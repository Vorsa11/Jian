/* ================== 1. 变量：明亮 + 温和色调 ================== */
:root {
  /* 主强调色：沉稳蓝（适合科研，又不失活力） */
  --primary: 215 80% 42%;       /* #2563eb 的 HSL 形式 */
  --primary-hover: 215 85% 35%; /* 悬停加深 */

  /* 背景 */
  --background: 0 0% 100%;      /* 纯白 */
  --surface: 220 8% 99%;        /* 卡片/输入框背景（极浅灰） */

  /* 文字 */
  --foreground: 220 12% 14%;    /* 深灰黑（#222222） */
  --muted-foreground: 215 10% 48%; /* 次要文字 */

  /* 边框 & 分割线 */
  --border: 220 10% 88%;        /* #e0e0e0 */

  /* 阴影（极轻） */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 2px 6px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.08);

  /* 圆角 */
  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;

  /* 动画 */
  --duration-fast: 0.15s;
  --duration-normal: 0.25s;
  --duration-slow: 0.35s;
  --easing: cubic-bezier(0.34, 1.56, 0.64, 1); /* 弹性缓动，有回弹感 */
}

/* ================== 2. 全局重置 + 基础样式 ================== */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body, #root {
  height: 100%;
}

body {
  font-family:
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    Roboto,
    'Helvetica Neue',
    Arial,
    sans-serif;
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  line-height: 1.68;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  touch-action: manipulation;
  font-size: 16px;
  -ms-overflow-style: none;
  scrollbar-width: none;
}
body::-webkit-scrollbar {
  display: none;
}

/* ================== 3. 安全区域适配 ================== */
@supports (padding-top: env(safe-area-inset-top)) {
  body {
    padding-top: env(safe-area-inset-top);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

.safe-area-pb {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

/* ================== 4. 阅读器容器（带过渡） ================== */
.reader-container {
  max-width: 740px;
  margin: 0 auto;
  padding: 24px 20px;
  height: calc(100vh - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px) - 40px);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  transition: background-color var(--duration-slow) var(--easing); /* 主题切换平滑 */
}

/* 内部主题变体（仅影响阅读区） */
.reader-container.theme-beige {
  background-color: #fdf8f0;
  color: #2a2a2a;
}
.reader-container.theme-green {
  background-color: #f8fcf8;
  color: #1e293b;
}
.reader-container.theme-sepia {
  background-color: #f9f3e9;
  color: #332d23;
}

/* ================== 5. 内容排版 ================== */
.reader-content {
  font-family:
    'Charter', 'Bitstream Charter', 'Sitka Text', Georgia, serif;
  font-size: 17px;
  line-height: 1.78;
  color: inherit;
  hyphens: auto;
  text-align: justify;
  -webkit-hyphens: auto;
  -moz-hyphens: auto;
  margin-bottom: 1.2em;
}

.txt-content {
  white-space: pre-wrap;
  word-break: break-word;
  font-family:
    ui-monospace, 'SF Mono', 'Consolas', 'Liberation Mono', monospace;
  font-size: 15px;
  line-height: 1.6;
  color: hsl(var(--foreground));
  background: hsl(var(--surface));
  padding: 16px;
  margin: 20px 0;
  border-radius: var(--radius-md);
  border: 1px solid hsl(var(--border));
  box-shadow: var(--shadow-sm);
  transition: box-shadow var(--duration-fast) ease;
}
.txt-content:hover {
  box-shadow: var(--shadow-md);
}

.pdf-viewer {
  width: 100%;
  min-height: 100%;
  background: hsl(var(--background));
  color: hsl(var(--foreground));
}

/* ================== 6. 按钮与交互元素（带动效） ================== */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px 16px;
  font-size: 15px;
  font-weight: 500;
  color: hsl(var(--primary-foreground));
  background-color: hsl(var(--primary));
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition:
    background-color var(--duration-normal) var(--easing),
    transform var(--duration-fast) ease,
    box-shadow var(--duration-fast) ease;
  box-shadow: var(--shadow-sm);
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
.btn:hover {
  background-color: hsl(var(--primary-hover));
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}
.btn:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}
.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none !important;
}

.btn-outline {
  background: transparent;
  color: hsl(var(--primary));
  border: 1px solid hsl(var(--primary));
  box-shadow: none;
}
.btn-outline:hover {
  background: hsl(var(--primary))10; /* 半透明白底 */
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

/* ================== 7. 工具类 ================== */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.no-select {
  user-select: none;
  -webkit-user-select: none;
}

.text-primary {
  color: hsl(var(--primary)) !important;
  transition: color var(--duration-normal) var(--easing);
}

.bg-secondary {
  background-color: hsl(var(--surface)) !important;
}

.border-default {
  border: 1px solid hsl(var(--border)) !important;
}

.radius-md {
  border-radius: var(--radius-md) !important;
}

/* ================== 8. 卡片 / 浮层（用于设置面板等） ================== */
.card {
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius-lg);
  padding: 20px;
  box-shadow: var(--shadow-md);
  transition: box-shadow var(--duration-normal) var(--easing);
}
.card:hover {
  box-shadow: var(--shadow-lg);
}

/* ================== 9. 移动端优化 ================== */
@media (max-width: 640px) {
  .reader-container {
    padding: 20px 16px;
  }

  .reader-content,
  .txt-content {
    font-size: 16px;
    line-height: 1.72;
  }

  .btn {
    padding: 10px 18px;
    font-size: 16px;
  }

  img {
    -webkit-touch-callout: none;
    user-select: none;
  }
}