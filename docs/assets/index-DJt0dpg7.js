var Fb=a=>{throw TypeError(a)};var bp=(a,e,t)=>e.has(a)||Fb("Cannot "+t);var Dt=(a,e,t)=>(bp(a,e,"read from private field"),t?t.call(a):e.get(a)),Ys=(a,e,t)=>e.has(a)?Fb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),Un=(a,e,t,s)=>(bp(a,e,"write to private field"),s?s.call(a,t):e.set(a,t),t),Xs=(a,e,t)=>(bp(a,e,"access private method"),t);var Hb=(a,e,t,s)=>({set _(r){Un(a,e,r,t)},get _(){return Dt(a,e,s)}});function cT(a,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in a)){const o=Object.getOwnPropertyDescriptor(s,r);o&&Object.defineProperty(a,r,o.get?o:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function Bm(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var wp={exports:{}},jl={};var Ub;function uT(){if(Ub)return jl;Ub=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:a,type:s,key:l,ref:r!==void 0?r:null,props:o}}return jl.Fragment=e,jl.jsx=t,jl.jsxs=t,jl}var Vb;function dT(){return Vb||(Vb=1,wp.exports=uT()),wp.exports}var d=dT(),Sp={exports:{}},Ye={};var $b;function hT(){if($b)return Ye;$b=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function b(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(T,k,I){this.props=T,this.context=k,this.refs=E,this.updater=I||A}C.prototype.isReactComponent={},C.prototype.setState=function(T,k){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,k,"setState")},C.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function j(){}j.prototype=C.prototype;function N(T,k,I){this.props=T,this.context=k,this.refs=E,this.updater=I||A}var M=N.prototype=new j;M.constructor=N,S(M,C.prototype),M.isPureReactComponent=!0;var O=Array.isArray;function P(){}var L={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function F(T,k,I){var q=I.ref;return{$$typeof:a,type:T,key:k,ref:q!==void 0?q:null,props:I}}function $(T,k){return F(T.type,k,T.props)}function Y(T){return typeof T=="object"&&T!==null&&T.$$typeof===a}function te(T){var k={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(I){return k[I]})}var oe=/\/+/g;function ie(T,k){return typeof T=="object"&&T!==null&&T.key!=null?te(""+T.key):k.toString(36)}function fe(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(P,P):(T.status="pending",T.then(function(k){T.status==="pending"&&(T.status="fulfilled",T.value=k)},function(k){T.status==="pending"&&(T.status="rejected",T.reason=k)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function R(T,k,I,q,X){var ce=typeof T;(ce==="undefined"||ce==="boolean")&&(T=null);var Q=!1;if(T===null)Q=!0;else switch(ce){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(T.$$typeof){case a:case e:Q=!0;break;case g:return Q=T._init,R(Q(T._payload),k,I,q,X)}}if(Q)return X=X(T),Q=q===""?"."+ie(T,0):q,O(X)?(I="",Q!=null&&(I=Q.replace(oe,"$&/")+"/"),R(X,k,I,"",function(Ce){return Ce})):X!=null&&(Y(X)&&(X=$(X,I+(X.key==null||T&&T.key===X.key?"":(""+X.key).replace(oe,"$&/")+"/")+Q)),k.push(X)),1;Q=0;var ue=q===""?".":q+":";if(O(T))for(var pe=0;pe<T.length;pe++)q=T[pe],ce=ue+ie(q,pe),Q+=R(q,k,I,ce,X);else if(pe=b(T),typeof pe=="function")for(T=pe.call(T),pe=0;!(q=T.next()).done;)q=q.value,ce=ue+ie(q,pe++),Q+=R(q,k,I,ce,X);else if(ce==="object"){if(typeof T.then=="function")return R(fe(T),k,I,q,X);throw k=String(T),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return Q}function U(T,k,I){if(T==null)return T;var q=[],X=0;return R(T,q,"","",function(ce){return k.call(I,ce,X++)}),q}function H(T){if(T._status===-1){var k=T._result;k=k(),k.then(function(I){(T._status===0||T._status===-1)&&(T._status=1,T._result=I)},function(I){(T._status===0||T._status===-1)&&(T._status=2,T._result=I)}),T._status===-1&&(T._status=0,T._result=k)}if(T._status===1)return T._result.default;throw T._result}var z=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},se={map:U,forEach:function(T,k,I){U(T,function(){k.apply(this,arguments)},I)},count:function(T){var k=0;return U(T,function(){k++}),k},toArray:function(T){return U(T,function(k){return k})||[]},only:function(T){if(!Y(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Ye.Activity=m,Ye.Children=se,Ye.Component=C,Ye.Fragment=t,Ye.Profiler=r,Ye.PureComponent=N,Ye.StrictMode=s,Ye.Suspense=h,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(T){return L.H.useMemoCache(T)}},Ye.cache=function(T){return function(){return T.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(T,k,I){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var q=S({},T.props),X=T.key;if(k!=null)for(ce in k.key!==void 0&&(X=""+k.key),k)!B.call(k,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&k.ref===void 0||(q[ce]=k[ce]);var ce=arguments.length-2;if(ce===1)q.children=I;else if(1<ce){for(var Q=Array(ce),ue=0;ue<ce;ue++)Q[ue]=arguments[ue+2];q.children=Q}return F(T.type,X,q)},Ye.createContext=function(T){return T={$$typeof:l,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:o,_context:T},T},Ye.createElement=function(T,k,I){var q,X={},ce=null;if(k!=null)for(q in k.key!==void 0&&(ce=""+k.key),k)B.call(k,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(X[q]=k[q]);var Q=arguments.length-2;if(Q===1)X.children=I;else if(1<Q){for(var ue=Array(Q),pe=0;pe<Q;pe++)ue[pe]=arguments[pe+2];X.children=ue}if(T&&T.defaultProps)for(q in Q=T.defaultProps,Q)X[q]===void 0&&(X[q]=Q[q]);return F(T,ce,X)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(T){return{$$typeof:u,render:T}},Ye.isValidElement=Y,Ye.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:H}},Ye.memo=function(T,k){return{$$typeof:p,type:T,compare:k===void 0?null:k}},Ye.startTransition=function(T){var k=L.T,I={};L.T=I;try{var q=T(),X=L.S;X!==null&&X(I,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(P,z)}catch(ce){z(ce)}finally{k!==null&&I.types!==null&&(k.types=I.types),L.T=k}},Ye.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Ye.use=function(T){return L.H.use(T)},Ye.useActionState=function(T,k,I){return L.H.useActionState(T,k,I)},Ye.useCallback=function(T,k){return L.H.useCallback(T,k)},Ye.useContext=function(T){return L.H.useContext(T)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(T,k){return L.H.useDeferredValue(T,k)},Ye.useEffect=function(T,k){return L.H.useEffect(T,k)},Ye.useEffectEvent=function(T){return L.H.useEffectEvent(T)},Ye.useId=function(){return L.H.useId()},Ye.useImperativeHandle=function(T,k,I){return L.H.useImperativeHandle(T,k,I)},Ye.useInsertionEffect=function(T,k){return L.H.useInsertionEffect(T,k)},Ye.useLayoutEffect=function(T,k){return L.H.useLayoutEffect(T,k)},Ye.useMemo=function(T,k){return L.H.useMemo(T,k)},Ye.useOptimistic=function(T,k){return L.H.useOptimistic(T,k)},Ye.useReducer=function(T,k,I){return L.H.useReducer(T,k,I)},Ye.useRef=function(T){return L.H.useRef(T)},Ye.useState=function(T){return L.H.useState(T)},Ye.useSyncExternalStore=function(T,k,I){return L.H.useSyncExternalStore(T,k,I)},Ye.useTransition=function(){return L.H.useTransition()},Ye.version="19.2.3",Ye}var Gb;function zm(){return Gb||(Gb=1,Sp.exports=hT()),Sp.exports}var w=zm();const me=Bm(w),Fm=cT({__proto__:null,default:me},[w]);var Ap={exports:{}},Ml={},Cp={exports:{}},Ep={};var qb;function fT(){return qb||(qb=1,(function(a){function e(R,U){var H=R.length;R.push(U);e:for(;0<H;){var z=H-1>>>1,se=R[z];if(0<r(se,U))R[z]=U,R[H]=se,H=z;else break e}}function t(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var U=R[0],H=R.pop();if(H!==U){R[0]=H;e:for(var z=0,se=R.length,T=se>>>1;z<T;){var k=2*(z+1)-1,I=R[k],q=k+1,X=R[q];if(0>r(I,H))q<se&&0>r(X,I)?(R[z]=X,R[q]=H,z=q):(R[z]=I,R[k]=H,z=k);else if(q<se&&0>r(X,H))R[z]=X,R[q]=H,z=q;else break e}}return U}function r(R,U){var H=R.sortIndex-U.sortIndex;return H!==0?H:R.id-U.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();a.unstable_now=function(){return l.now()-u}}var h=[],p=[],g=1,m=null,y=3,b=!1,A=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function M(R){for(var U=t(p);U!==null;){if(U.callback===null)s(p);else if(U.startTime<=R)s(p),U.sortIndex=U.expirationTime,e(h,U);else break;U=t(p)}}function O(R){if(S=!1,M(R),!A)if(t(h)!==null)A=!0,P||(P=!0,te());else{var U=t(p);U!==null&&fe(O,U.startTime-R)}}var P=!1,L=-1,B=5,F=-1;function $(){return E?!0:!(a.unstable_now()-F<B)}function Y(){if(E=!1,P){var R=a.unstable_now();F=R;var U=!0;try{e:{A=!1,S&&(S=!1,j(L),L=-1),b=!0;var H=y;try{t:{for(M(R),m=t(h);m!==null&&!(m.expirationTime>R&&$());){var z=m.callback;if(typeof z=="function"){m.callback=null,y=m.priorityLevel;var se=z(m.expirationTime<=R);if(R=a.unstable_now(),typeof se=="function"){m.callback=se,M(R),U=!0;break t}m===t(h)&&s(h),M(R)}else s(h);m=t(h)}if(m!==null)U=!0;else{var T=t(p);T!==null&&fe(O,T.startTime-R),U=!1}}break e}finally{m=null,y=H,b=!1}U=void 0}}finally{U?te():P=!1}}}var te;if(typeof N=="function")te=function(){N(Y)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ie=oe.port2;oe.port1.onmessage=Y,te=function(){ie.postMessage(null)}}else te=function(){C(Y,0)};function fe(R,U){L=C(function(){R(a.unstable_now())},U)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(R){R.callback=null},a.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<R?Math.floor(1e3/R):5},a.unstable_getCurrentPriorityLevel=function(){return y},a.unstable_next=function(R){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var H=y;y=U;try{return R()}finally{y=H}},a.unstable_requestPaint=function(){E=!0},a.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=y;y=R;try{return U()}finally{y=H}},a.unstable_scheduleCallback=function(R,U,H){var z=a.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?z+H:z):H=z,R){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=H+se,R={id:g++,callback:U,priorityLevel:R,startTime:H,expirationTime:se,sortIndex:-1},H>z?(R.sortIndex=H,e(p,R),t(h)===null&&R===t(p)&&(S?(j(L),L=-1):S=!0,fe(O,H-z))):(R.sortIndex=se,e(h,R),A||b||(A=!0,P||(P=!0,te()))),R},a.unstable_shouldYield=$,a.unstable_wrapCallback=function(R){var U=y;return function(){var H=y;y=U;try{return R.apply(this,arguments)}finally{y=H}}}})(Ep)),Ep}var Yb;function pT(){return Yb||(Yb=1,Cp.exports=fT()),Cp.exports}var _p={exports:{}},Tn={};var Xb;function mT(){if(Xb)return Tn;Xb=1;var a=zm();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(h,p,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:h,containerInfo:p,implementation:g}}var l=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Tn.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(h,p,null,g)},Tn.flushSync=function(h){var p=l.T,g=s.p;try{if(l.T=null,s.p=2,h)return h()}finally{l.T=p,s.p=g,s.d.f()}},Tn.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(h,p))},Tn.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},Tn.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,m=u(g,p.crossOrigin),y=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):g==="script"&&s.d.X(h,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Tn.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(h)},Tn.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,m=u(g,p.crossOrigin);s.d.L(h,g,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Tn.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=u(p.as,p.crossOrigin);s.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(h)},Tn.requestFormReset=function(h){s.d.r(h)},Tn.unstable_batchedUpdates=function(h,p){return h(p)},Tn.useFormState=function(h,p,g){return l.H.useFormState(h,p,g)},Tn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Tn.version="19.2.3",Tn}var Wb;function Uw(){if(Wb)return _p.exports;Wb=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),_p.exports=mT(),_p.exports}var Kb;function gT(){if(Kb)return Ml;Kb=1;var a=pT(),e=zm(),t=Uw();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,c=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(c=i.return),n=i.return;while(n)}return i.tag===3?c:null}function l(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function u(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function h(n){if(o(n)!==n)throw Error(s(188))}function p(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(s(188));return i!==n?null:n}for(var c=n,f=i;;){var v=c.return;if(v===null)break;var x=v.alternate;if(x===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===c)return h(v),n;if(x===f)return h(v),i;x=x.sibling}throw Error(s(188))}if(c.return!==f.return)c=v,f=x;else{for(var _=!1,D=v.child;D;){if(D===c){_=!0,c=v,f=x;break}if(D===f){_=!0,f=v,c=x;break}D=D.sibling}if(!_){for(D=x.child;D;){if(D===c){_=!0,c=x,f=v;break}if(D===f){_=!0,f=x,c=v;break}D=D.sibling}if(!_)throw Error(s(189))}}if(c.alternate!==f)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?n:i}function g(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=g(n),i!==null)return i;n=n.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function te(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Symbol.for("react.client.reference");function ie(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===oe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList";case F:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case N:return n.displayName||"Context";case j:return(n._context.displayName||"Context")+".Consumer";case M:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case L:return i=n.displayName||null,i!==null?i:ie(n.type)||"Memo";case B:i=n._payload,n=n._init;try{return ie(n(i))}catch{}}return null}var fe=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},z=[],se=-1;function T(n){return{current:n}}function k(n){0>se||(n.current=z[se],z[se]=null,se--)}function I(n,i){se++,z[se]=n.current,n.current=i}var q=T(null),X=T(null),ce=T(null),Q=T(null);function ue(n,i){switch(I(ce,i),I(X,n),I(q,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?cb(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=cb(i),n=ub(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}k(q),I(q,n)}function pe(){k(q),k(X),k(ce)}function Ce(n){n.memoizedState!==null&&I(Q,n);var i=q.current,c=ub(i,n.type);i!==c&&(I(X,n),I(q,c))}function ye(n){X.current===n&&(k(q),k(X)),Q.current===n&&(k(Q),El._currentValue=H)}var Ne,Be;function De(n){if(Ne===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);Ne=i&&i[1]||"",Be=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ne+n+Be}var K=!1;function be(n,i){if(!n||K)return"";K=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ne){var ee=ne}Reflect.construct(n,[],he)}else{try{he.call()}catch(ne){ee=ne}n.call(he.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(he=n())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=f.DetermineComponentFrameRoot(),_=x[0],D=x[1];if(_&&D){var V=_.split(`
`),J=D.split(`
`);for(v=f=0;f<V.length&&!V[f].includes("DetermineComponentFrameRoot");)f++;for(;v<J.length&&!J[v].includes("DetermineComponentFrameRoot");)v++;if(f===V.length||v===J.length)for(f=V.length-1,v=J.length-1;1<=f&&0<=v&&V[f]!==J[v];)v--;for(;1<=f&&0<=v;f--,v--)if(V[f]!==J[v]){if(f!==1||v!==1)do if(f--,v--,0>v||V[f]!==J[v]){var le=`
`+V[f].replace(" at new "," at ");return n.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",n.displayName)),le}while(1<=f&&0<=v);break}}}finally{K=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?De(c):""}function Le(n,i){switch(n.tag){case 26:case 27:case 5:return De(n.type);case 16:return De("Lazy");case 13:return n.child!==i&&i!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return be(n.type,!1);case 11:return be(n.type.render,!1);case 1:return be(n.type,!0);case 31:return De("Activity");default:return""}}function et(n){try{var i="",c=null;do i+=Le(n,c),c=n,n=n.return;while(n);return i}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var ut=Object.prototype.hasOwnProperty,Bt=a.unstable_scheduleCallback,mt=a.unstable_cancelCallback,gt=a.unstable_shouldYield,ve=a.unstable_requestPaint,Qe=a.unstable_now,re=a.unstable_getCurrentPriorityLevel,we=a.unstable_ImmediatePriority,He=a.unstable_UserBlockingPriority,vt=a.unstable_NormalPriority,Ot=a.unstable_LowPriority,Nt=a.unstable_IdlePriority,Xn=a.log,On=a.unstable_setDisableYieldValue,di=null,mn=null;function Wn(n){if(typeof Xn=="function"&&On(n),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(di,n)}catch{}}var on=Math.clz32?Math.clz32:us,zo=Math.log,ja=Math.LN2;function us(n){return n>>>=0,n===0?32:31-(zo(n)/ja|0)|0}var Gi=256,qi=262144,hi=4194304;function ds(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function $e(n,i,c){var f=n.pendingLanes;if(f===0)return 0;var v=0,x=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var D=f&134217727;return D!==0?(f=D&~x,f!==0?v=ds(f):(_&=D,_!==0?v=ds(_):c||(c=D&~n,c!==0&&(v=ds(c))))):(D=f&~x,D!==0?v=ds(D):_!==0?v=ds(_):c||(c=f&~n,c!==0&&(v=ds(c)))),v===0?0:i!==0&&i!==v&&(i&x)===0&&(x=v&-v,c=i&-i,x>=c||x===32&&(c&4194048)!==0)?i:v}function ge(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ze(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ue(){var n=hi;return hi<<=1,(hi&62914560)===0&&(hi=4194304),n}function yt(n){for(var i=[],c=0;31>c;c++)i.push(n);return i}function ot(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function _n(n,i,c,f,v,x){var _=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var D=n.entanglements,V=n.expirationTimes,J=n.hiddenUpdates;for(c=_&~c;0<c;){var le=31-on(c),he=1<<le;D[le]=0,V[le]=-1;var ee=J[le];if(ee!==null)for(J[le]=null,le=0;le<ee.length;le++){var ne=ee[le];ne!==null&&(ne.lane&=-536870913)}c&=~he}f!==0&&Us(n,f,0),x!==0&&v===0&&n.tag!==0&&(n.suspendedLanes|=x&~(_&~i))}function Us(n,i,c){n.pendingLanes|=i,n.suspendedLanes&=~i;var f=31-on(i);n.entangledLanes|=i,n.entanglements[f]=n.entanglements[f]|1073741824|c&261930}function ln(n,i){var c=n.entangledLanes|=i;for(n=n.entanglements;c;){var f=31-on(c),v=1<<f;v&i|n[f]&i&&(n[f]|=i),c&=~v}}function Ht(n,i){var c=i&-i;return c=(c&42)!==0?1:Ts(c),(c&(n.suspendedLanes|i))!==0?0:c}function Ts(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ns(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ch(){var n=U.p;return n!==0?n:(n=window.event,n===void 0?32:kb(n.type))}function Wg(n,i){var c=U.p;try{return U.p=n,i()}finally{U.p=c}}var Yi=Math.random().toString(36).slice(2),gn="__reactFiber$"+Yi,Ln="__reactProps$"+Yi,hr="__reactContainer$"+Yi,uh="__reactEvents$"+Yi,ZE="__reactListeners$"+Yi,JE="__reactHandles$"+Yi,Kg="__reactResources$"+Yi,Fo="__reactMarker$"+Yi;function dh(n){delete n[gn],delete n[Ln],delete n[uh],delete n[ZE],delete n[JE]}function fr(n){var i=n[gn];if(i)return i;for(var c=n.parentNode;c;){if(i=c[hr]||c[gn]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(n=vb(n);n!==null;){if(c=n[gn])return c;n=vb(n)}return i}n=c,c=n.parentNode}return null}function pr(n){if(n=n[gn]||n[hr]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Ho(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function mr(n){var i=n[Kg];return i||(i=n[Kg]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function cn(n){n[Fo]=!0}var Qg=new Set,Zg={};function Ma(n,i){gr(n,i),gr(n+"Capture",i)}function gr(n,i){for(Zg[n]=i,n=0;n<i.length;n++)Qg.add(i[n])}var e_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jg={},ev={};function t_(n){return ut.call(ev,n)?!0:ut.call(Jg,n)?!1:e_.test(n)?ev[n]=!0:(Jg[n]=!0,!1)}function vc(n,i,c){if(t_(i))if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var f=i.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+c)}}function yc(n,i,c){if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+c)}}function fi(n,i,c,f){if(f===null)n.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(i,c,""+f)}}function hs(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function tv(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function n_(n,i,c){var f=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,x=f.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return v.call(this)},set:function(_){c=""+_,x.call(this,_)}}),Object.defineProperty(n,i,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function hh(n){if(!n._valueTracker){var i=tv(n)?"checked":"value";n._valueTracker=n_(n,i,""+n[i])}}function nv(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var c=i.getValue(),f="";return n&&(f=tv(n)?n.checked?"true":"false":n.value),n=f,n!==c?(i.setValue(n),!0):!1}function xc(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var s_=/[\n"\\]/g;function fs(n){return n.replace(s_,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function fh(n,i,c,f,v,x,_,D){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+hs(i)):n.value!==""+hs(i)&&(n.value=""+hs(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?ph(n,_,hs(i)):c!=null?ph(n,_,hs(c)):f!=null&&n.removeAttribute("value"),v==null&&x!=null&&(n.defaultChecked=!!x),v!=null&&(n.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?n.name=""+hs(D):n.removeAttribute("name")}function sv(n,i,c,f,v,x,_,D){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.type=x),i!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||i!=null)){hh(n);return}c=c!=null?""+hs(c):"",i=i!=null?""+hs(i):c,D||i===n.value||(n.value=i),n.defaultValue=i}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,n.checked=D?n.checked:!!f,n.defaultChecked=!!f,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),hh(n)}function ph(n,i,c){i==="number"&&xc(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function vr(n,i,c,f){if(n=n.options,i){i={};for(var v=0;v<c.length;v++)i["$"+c[v]]=!0;for(c=0;c<n.length;c++)v=i.hasOwnProperty("$"+n[c].value),n[c].selected!==v&&(n[c].selected=v),v&&f&&(n[c].defaultSelected=!0)}else{for(c=""+hs(c),i=null,v=0;v<n.length;v++){if(n[v].value===c){n[v].selected=!0,f&&(n[v].defaultSelected=!0);return}i!==null||n[v].disabled||(i=n[v])}i!==null&&(i.selected=!0)}}function iv(n,i,c){if(i!=null&&(i=""+hs(i),i!==n.value&&(n.value=i),c==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=c!=null?""+hs(c):""}function av(n,i,c,f){if(i==null){if(f!=null){if(c!=null)throw Error(s(92));if(fe(f)){if(1<f.length)throw Error(s(93));f=f[0]}c=f}c==null&&(c=""),i=c}c=hs(i),n.defaultValue=c,f=n.textContent,f===c&&f!==""&&f!==null&&(n.value=f),hh(n)}function yr(n,i){if(i){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=i;return}}n.textContent=i}var i_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rv(n,i,c){var f=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":f?n.setProperty(i,c):typeof c!="number"||c===0||i_.has(i)?i==="float"?n.cssFloat=c:n[i]=(""+c).trim():n[i]=c+"px"}function ov(n,i,c){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||i!=null&&i.hasOwnProperty(f)||(f.indexOf("--")===0?n.setProperty(f,""):f==="float"?n.cssFloat="":n[f]="");for(var v in i)f=i[v],i.hasOwnProperty(v)&&c[v]!==f&&rv(n,v,f)}else for(var x in i)i.hasOwnProperty(x)&&rv(n,x,i[x])}function mh(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),r_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bc(n){return r_.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function pi(){}var gh=null;function vh(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xr=null,br=null;function lv(n){var i=pr(n);if(i&&(n=i.stateNode)){var c=n[Ln]||null;e:switch(n=i.stateNode,i.type){case"input":if(fh(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+fs(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var f=c[i];if(f!==n&&f.form===n.form){var v=f[Ln]||null;if(!v)throw Error(s(90));fh(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(i=0;i<c.length;i++)f=c[i],f.form===n.form&&nv(f)}break e;case"textarea":iv(n,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&vr(n,!!c.multiple,i,!1)}}}var yh=!1;function cv(n,i,c){if(yh)return n(i,c);yh=!0;try{var f=n(i);return f}finally{if(yh=!1,(xr!==null||br!==null)&&(ou(),xr&&(i=xr,n=br,br=xr=null,lv(i),n)))for(i=0;i<n.length;i++)lv(n[i])}}function Uo(n,i){var c=n.stateNode;if(c===null)return null;var f=c[Ln]||null;if(f===null)return null;c=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(s(231,i,typeof c));return c}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xh=!1;if(mi)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){xh=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{xh=!1}var Xi=null,bh=null,wc=null;function uv(){if(wc)return wc;var n,i=bh,c=i.length,f,v="value"in Xi?Xi.value:Xi.textContent,x=v.length;for(n=0;n<c&&i[n]===v[n];n++);var _=c-n;for(f=1;f<=_&&i[c-f]===v[x-f];f++);return wc=v.slice(n,1<f?1-f:void 0)}function Sc(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ac(){return!0}function dv(){return!1}function Pn(n){function i(c,f,v,x,_){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=x,this.target=_,this.currentTarget=null;for(var D in n)n.hasOwnProperty(D)&&(c=n[D],this[D]=c?c(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ac:dv,this.isPropagationStopped=dv,this}return m(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),i}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=Pn(Ra),$o=m({},Ra,{view:0,detail:0}),o_=Pn($o),wh,Sh,Go,Ec=m({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ch,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Go&&(Go&&n.type==="mousemove"?(wh=n.screenX-Go.screenX,Sh=n.screenY-Go.screenY):Sh=wh=0,Go=n),wh)},movementY:function(n){return"movementY"in n?n.movementY:Sh}}),hv=Pn(Ec),l_=m({},Ec,{dataTransfer:0}),c_=Pn(l_),u_=m({},$o,{relatedTarget:0}),Ah=Pn(u_),d_=m({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),h_=Pn(d_),f_=m({},Ra,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),p_=Pn(f_),m_=m({},Ra,{data:0}),fv=Pn(m_),g_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x_(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=y_[n])?!!i[n]:!1}function Ch(){return x_}var b_=m({},$o,{key:function(n){if(n.key){var i=g_[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Sc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?v_[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ch,charCode:function(n){return n.type==="keypress"?Sc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Sc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),w_=Pn(b_),S_=m({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pv=Pn(S_),A_=m({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ch}),C_=Pn(A_),E_=m({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),__=Pn(E_),T_=m({},Ec,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),N_=Pn(T_),j_=m({},Ra,{newState:0,oldState:0}),M_=Pn(j_),R_=[9,13,27,32],Eh=mi&&"CompositionEvent"in window,qo=null;mi&&"documentMode"in document&&(qo=document.documentMode);var D_=mi&&"TextEvent"in window&&!qo,mv=mi&&(!Eh||qo&&8<qo&&11>=qo),gv=" ",vv=!1;function yv(n,i){switch(n){case"keyup":return R_.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xv(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wr=!1;function k_(n,i){switch(n){case"compositionend":return xv(i);case"keypress":return i.which!==32?null:(vv=!0,gv);case"textInput":return n=i.data,n===gv&&vv?null:n;default:return null}}function O_(n,i){if(wr)return n==="compositionend"||!Eh&&yv(n,i)?(n=uv(),wc=bh=Xi=null,wr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return mv&&i.locale!=="ko"?null:i.data;default:return null}}var L_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bv(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!L_[n.type]:i==="textarea"}function wv(n,i,c,f){xr?br?br.push(f):br=[f]:xr=f,i=pu(i,"onChange"),0<i.length&&(c=new Cc("onChange","change",null,c,f),n.push({event:c,listeners:i}))}var Yo=null,Xo=null;function P_(n){sb(n,0)}function _c(n){var i=Ho(n);if(nv(i))return n}function Sv(n,i){if(n==="change")return i}var Av=!1;if(mi){var _h;if(mi){var Th="oninput"in document;if(!Th){var Cv=document.createElement("div");Cv.setAttribute("oninput","return;"),Th=typeof Cv.oninput=="function"}_h=Th}else _h=!1;Av=_h&&(!document.documentMode||9<document.documentMode)}function Ev(){Yo&&(Yo.detachEvent("onpropertychange",_v),Xo=Yo=null)}function _v(n){if(n.propertyName==="value"&&_c(Xo)){var i=[];wv(i,Xo,n,vh(n)),cv(P_,i)}}function I_(n,i,c){n==="focusin"?(Ev(),Yo=i,Xo=c,Yo.attachEvent("onpropertychange",_v)):n==="focusout"&&Ev()}function B_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _c(Xo)}function z_(n,i){if(n==="click")return _c(i)}function F_(n,i){if(n==="input"||n==="change")return _c(i)}function H_(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Kn=typeof Object.is=="function"?Object.is:H_;function Wo(n,i){if(Kn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var c=Object.keys(n),f=Object.keys(i);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!ut.call(i,v)||!Kn(n[v],i[v]))return!1}return!0}function Tv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Nv(n,i){var c=Tv(n);n=0;for(var f;c;){if(c.nodeType===3){if(f=n+c.textContent.length,n<=i&&f>=i)return{node:c,offset:i-n};n=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Tv(c)}}function jv(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?jv(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Mv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=xc(n.document);i instanceof n.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)n=i.contentWindow;else break;i=xc(n.document)}return i}function Nh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var U_=mi&&"documentMode"in document&&11>=document.documentMode,Sr=null,jh=null,Ko=null,Mh=!1;function Rv(n,i,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Mh||Sr==null||Sr!==xc(f)||(f=Sr,"selectionStart"in f&&Nh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ko&&Wo(Ko,f)||(Ko=f,f=pu(jh,"onSelect"),0<f.length&&(i=new Cc("onSelect","select",null,i,c),n.push({event:i,listeners:f}),i.target=Sr)))}function Da(n,i){var c={};return c[n.toLowerCase()]=i.toLowerCase(),c["Webkit"+n]="webkit"+i,c["Moz"+n]="moz"+i,c}var Ar={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionrun:Da("Transition","TransitionRun"),transitionstart:Da("Transition","TransitionStart"),transitioncancel:Da("Transition","TransitionCancel"),transitionend:Da("Transition","TransitionEnd")},Rh={},Dv={};mi&&(Dv=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);function ka(n){if(Rh[n])return Rh[n];if(!Ar[n])return n;var i=Ar[n],c;for(c in i)if(i.hasOwnProperty(c)&&c in Dv)return Rh[n]=i[c];return n}var kv=ka("animationend"),Ov=ka("animationiteration"),Lv=ka("animationstart"),V_=ka("transitionrun"),$_=ka("transitionstart"),G_=ka("transitioncancel"),Pv=ka("transitionend"),Iv=new Map,Dh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dh.push("scrollEnd");function js(n,i){Iv.set(n,i),Ma(i,[n])}var Tc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ps=[],Cr=0,kh=0;function Nc(){for(var n=Cr,i=kh=Cr=0;i<n;){var c=ps[i];ps[i++]=null;var f=ps[i];ps[i++]=null;var v=ps[i];ps[i++]=null;var x=ps[i];if(ps[i++]=null,f!==null&&v!==null){var _=f.pending;_===null?v.next=v:(v.next=_.next,_.next=v),f.pending=v}x!==0&&Bv(c,v,x)}}function jc(n,i,c,f){ps[Cr++]=n,ps[Cr++]=i,ps[Cr++]=c,ps[Cr++]=f,kh|=f,n.lanes|=f,n=n.alternate,n!==null&&(n.lanes|=f)}function Oh(n,i,c,f){return jc(n,i,c,f),Mc(n)}function Oa(n,i){return jc(n,null,null,i),Mc(n)}function Bv(n,i,c){n.lanes|=c;var f=n.alternate;f!==null&&(f.lanes|=c);for(var v=!1,x=n.return;x!==null;)x.childLanes|=c,f=x.alternate,f!==null&&(f.childLanes|=c),x.tag===22&&(n=x.stateNode,n===null||n._visibility&1||(v=!0)),n=x,x=x.return;return n.tag===3?(x=n.stateNode,v&&i!==null&&(v=31-on(c),n=x.hiddenUpdates,f=n[v],f===null?n[v]=[i]:f.push(i),i.lane=c|536870912),x):null}function Mc(n){if(50<yl)throw yl=0,$f=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Er={};function q_(n,i,c,f){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(n,i,c,f){return new q_(n,i,c,f)}function Lh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gi(n,i){var c=n.alternate;return c===null?(c=Qn(n.tag,i,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=i,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,i=n.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function zv(n,i){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,i=c.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Rc(n,i,c,f,v,x){var _=0;if(f=n,typeof n=="function")Lh(n)&&(_=1);else if(typeof n=="string")_=Q2(n,c,q.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case F:return n=Qn(31,c,i,v),n.elementType=F,n.lanes=x,n;case S:return La(c.children,v,x,i);case E:_=8,v|=24;break;case C:return n=Qn(12,c,i,v|2),n.elementType=C,n.lanes=x,n;case O:return n=Qn(13,c,i,v),n.elementType=O,n.lanes=x,n;case P:return n=Qn(19,c,i,v),n.elementType=P,n.lanes=x,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:_=10;break e;case j:_=9;break e;case M:_=11;break e;case L:_=14;break e;case B:_=16,f=null;break e}_=29,c=Error(s(130,n===null?"null":typeof n,"")),f=null}return i=Qn(_,c,i,v),i.elementType=n,i.type=f,i.lanes=x,i}function La(n,i,c,f){return n=Qn(7,n,f,i),n.lanes=c,n}function Ph(n,i,c){return n=Qn(6,n,null,i),n.lanes=c,n}function Fv(n){var i=Qn(18,null,null,0);return i.stateNode=n,i}function Ih(n,i,c){return i=Qn(4,n.children!==null?n.children:[],n.key,i),i.lanes=c,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Hv=new WeakMap;function ms(n,i){if(typeof n=="object"&&n!==null){var c=Hv.get(n);return c!==void 0?c:(i={value:n,source:i,stack:et(i)},Hv.set(n,i),i)}return{value:n,source:i,stack:et(i)}}var _r=[],Tr=0,Dc=null,Qo=0,gs=[],vs=0,Wi=null,Vs=1,$s="";function vi(n,i){_r[Tr++]=Qo,_r[Tr++]=Dc,Dc=n,Qo=i}function Uv(n,i,c){gs[vs++]=Vs,gs[vs++]=$s,gs[vs++]=Wi,Wi=n;var f=Vs;n=$s;var v=32-on(f)-1;f&=~(1<<v),c+=1;var x=32-on(i)+v;if(30<x){var _=v-v%5;x=(f&(1<<_)-1).toString(32),f>>=_,v-=_,Vs=1<<32-on(i)+v|c<<v|f,$s=x+n}else Vs=1<<x|c<<v|f,$s=n}function Bh(n){n.return!==null&&(vi(n,1),Uv(n,1,0))}function zh(n){for(;n===Dc;)Dc=_r[--Tr],_r[Tr]=null,Qo=_r[--Tr],_r[Tr]=null;for(;n===Wi;)Wi=gs[--vs],gs[vs]=null,$s=gs[--vs],gs[vs]=null,Vs=gs[--vs],gs[vs]=null}function Vv(n,i){gs[vs++]=Vs,gs[vs++]=$s,gs[vs++]=Wi,Vs=i.id,$s=i.overflow,Wi=n}var vn=null,jt=null,lt=!1,Ki=null,ys=!1,Fh=Error(s(519));function Qi(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zo(ms(i,n)),Fh}function $v(n){var i=n.stateNode,c=n.type,f=n.memoizedProps;switch(i[gn]=n,i[Ln]=f,c){case"dialog":st("cancel",i),st("close",i);break;case"iframe":case"object":case"embed":st("load",i);break;case"video":case"audio":for(c=0;c<bl.length;c++)st(bl[c],i);break;case"source":st("error",i);break;case"img":case"image":case"link":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"input":st("invalid",i),sv(i,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":st("invalid",i);break;case"textarea":st("invalid",i),av(i,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||f.suppressHydrationWarning===!0||ob(i.textContent,c)?(f.popover!=null&&(st("beforetoggle",i),st("toggle",i)),f.onScroll!=null&&st("scroll",i),f.onScrollEnd!=null&&st("scrollend",i),f.onClick!=null&&(i.onclick=pi),i=!0):i=!1,i||Qi(n,!0)}function Gv(n){for(vn=n.return;vn;)switch(vn.tag){case 5:case 31:case 13:ys=!1;return;case 27:case 3:ys=!0;return;default:vn=vn.return}}function Nr(n){if(n!==vn)return!1;if(!lt)return Gv(n),lt=!0,!1;var i=n.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||ap(n.type,n.memoizedProps)),c=!c),c&&jt&&Qi(n),Gv(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));jt=gb(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));jt=gb(n)}else i===27?(i=jt,da(n.type)?(n=up,up=null,jt=n):jt=i):jt=vn?bs(n.stateNode.nextSibling):null;return!0}function Pa(){jt=vn=null,lt=!1}function Hh(){var n=Ki;return n!==null&&(Fn===null?Fn=n:Fn.push.apply(Fn,n),Ki=null),n}function Zo(n){Ki===null?Ki=[n]:Ki.push(n)}var Uh=T(null),Ia=null,yi=null;function Zi(n,i,c){I(Uh,i._currentValue),i._currentValue=c}function xi(n){n._currentValue=Uh.current,k(Uh)}function Vh(n,i,c){for(;n!==null;){var f=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),n===c)break;n=n.return}}function $h(n,i,c,f){var v=n.child;for(v!==null&&(v.return=n);v!==null;){var x=v.dependencies;if(x!==null){var _=v.child;x=x.firstContext;e:for(;x!==null;){var D=x;x=v;for(var V=0;V<i.length;V++)if(D.context===i[V]){x.lanes|=c,D=x.alternate,D!==null&&(D.lanes|=c),Vh(x.return,c,n),f||(_=null);break e}x=D.next}}else if(v.tag===18){if(_=v.return,_===null)throw Error(s(341));_.lanes|=c,x=_.alternate,x!==null&&(x.lanes|=c),Vh(_,c,n),_=null}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===n){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}}function jr(n,i,c,f){n=null;for(var v=i,x=!1;v!==null;){if(!x){if((v.flags&524288)!==0)x=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var _=v.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var D=v.type;Kn(v.pendingProps.value,_.value)||(n!==null?n.push(D):n=[D])}}else if(v===Q.current){if(_=v.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(n!==null?n.push(El):n=[El])}v=v.return}n!==null&&$h(i,n,c,f),i.flags|=262144}function kc(n){for(n=n.firstContext;n!==null;){if(!Kn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ba(n){Ia=n,yi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function yn(n){return qv(Ia,n)}function Oc(n,i){return Ia===null&&Ba(n),qv(n,i)}function qv(n,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},yi===null){if(n===null)throw Error(s(308));yi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else yi=yi.next=i;return c}var Y_=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(c,f){n.push(f)}};this.abort=function(){i.aborted=!0,n.forEach(function(c){return c()})}},X_=a.unstable_scheduleCallback,W_=a.unstable_NormalPriority,Wt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gh(){return{controller:new Y_,data:new Map,refCount:0}}function Jo(n){n.refCount--,n.refCount===0&&X_(W_,function(){n.controller.abort()})}var el=null,qh=0,Mr=0,Rr=null;function K_(n,i){if(el===null){var c=el=[];qh=0,Mr=Kf(),Rr={status:"pending",value:void 0,then:function(f){c.push(f)}}}return qh++,i.then(Yv,Yv),i}function Yv(){if(--qh===0&&el!==null){Rr!==null&&(Rr.status="fulfilled");var n=el;el=null,Mr=0,Rr=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Q_(n,i){var c=[],f={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return n.then(function(){f.status="fulfilled",f.value=i;for(var v=0;v<c.length;v++)(0,c[v])(i)},function(v){for(f.status="rejected",f.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),f}var Xv=R.S;R.S=function(n,i){Rx=Qe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&K_(n,i),Xv!==null&&Xv(n,i)};var za=T(null);function Yh(){var n=za.current;return n!==null?n:Et.pooledCache}function Lc(n,i){i===null?I(za,za.current):I(za,i.pool)}function Wv(){var n=Yh();return n===null?null:{parent:Wt._currentValue,pool:n}}var Dr=Error(s(460)),Xh=Error(s(474)),Pc=Error(s(542)),Ic={then:function(){}};function Kv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Qv(n,i,c){switch(c=n[c],c===void 0?n.push(i):c!==i&&(i.then(pi,pi),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Jv(n),n;default:if(typeof i.status=="string")i.then(pi,pi);else{if(n=Et,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(f){if(i.status==="pending"){var v=i;v.status="fulfilled",v.value=f}},function(f){if(i.status==="pending"){var v=i;v.status="rejected",v.reason=f}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Jv(n),n}throw Ha=i,Dr}}function Fa(n){try{var i=n._init;return i(n._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ha=c,Dr):c}}var Ha=null;function Zv(){if(Ha===null)throw Error(s(459));var n=Ha;return Ha=null,n}function Jv(n){if(n===Dr||n===Pc)throw Error(s(483))}var kr=null,tl=0;function Bc(n){var i=tl;return tl+=1,kr===null&&(kr=[]),Qv(kr,n,i)}function nl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function zc(n,i){throw i.$$typeof===y?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function ey(n){function i(W,G){if(n){var Z=W.deletions;Z===null?(W.deletions=[G],W.flags|=16):Z.push(G)}}function c(W,G){if(!n)return null;for(;G!==null;)i(W,G),G=G.sibling;return null}function f(W){for(var G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function v(W,G){return W=gi(W,G),W.index=0,W.sibling=null,W}function x(W,G,Z){return W.index=Z,n?(Z=W.alternate,Z!==null?(Z=Z.index,Z<G?(W.flags|=67108866,G):Z):(W.flags|=67108866,G)):(W.flags|=1048576,G)}function _(W){return n&&W.alternate===null&&(W.flags|=67108866),W}function D(W,G,Z,de){return G===null||G.tag!==6?(G=Ph(Z,W.mode,de),G.return=W,G):(G=v(G,Z),G.return=W,G)}function V(W,G,Z,de){var ke=Z.type;return ke===S?le(W,G,Z.props.children,de,Z.key):G!==null&&(G.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===B&&Fa(ke)===G.type)?(G=v(G,Z.props),nl(G,Z),G.return=W,G):(G=Rc(Z.type,Z.key,Z.props,null,W.mode,de),nl(G,Z),G.return=W,G)}function J(W,G,Z,de){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=Ih(Z,W.mode,de),G.return=W,G):(G=v(G,Z.children||[]),G.return=W,G)}function le(W,G,Z,de,ke){return G===null||G.tag!==7?(G=La(Z,W.mode,de,ke),G.return=W,G):(G=v(G,Z),G.return=W,G)}function he(W,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Ph(""+G,W.mode,Z),G.return=W,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case b:return Z=Rc(G.type,G.key,G.props,null,W.mode,Z),nl(Z,G),Z.return=W,Z;case A:return G=Ih(G,W.mode,Z),G.return=W,G;case B:return G=Fa(G),he(W,G,Z)}if(fe(G)||te(G))return G=La(G,W.mode,Z,null),G.return=W,G;if(typeof G.then=="function")return he(W,Bc(G),Z);if(G.$$typeof===N)return he(W,Oc(W,G),Z);zc(W,G)}return null}function ee(W,G,Z,de){var ke=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return ke!==null?null:D(W,G,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return Z.key===ke?V(W,G,Z,de):null;case A:return Z.key===ke?J(W,G,Z,de):null;case B:return Z=Fa(Z),ee(W,G,Z,de)}if(fe(Z)||te(Z))return ke!==null?null:le(W,G,Z,de,null);if(typeof Z.then=="function")return ee(W,G,Bc(Z),de);if(Z.$$typeof===N)return ee(W,G,Oc(W,Z),de);zc(W,Z)}return null}function ne(W,G,Z,de,ke){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return W=W.get(Z)||null,D(G,W,""+de,ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case b:return W=W.get(de.key===null?Z:de.key)||null,V(G,W,de,ke);case A:return W=W.get(de.key===null?Z:de.key)||null,J(G,W,de,ke);case B:return de=Fa(de),ne(W,G,Z,de,ke)}if(fe(de)||te(de))return W=W.get(Z)||null,le(G,W,de,ke,null);if(typeof de.then=="function")return ne(W,G,Z,Bc(de),ke);if(de.$$typeof===N)return ne(W,G,Z,Oc(G,de),ke);zc(G,de)}return null}function Te(W,G,Z,de){for(var ke=null,dt=null,Re=G,Ze=G=0,at=null;Re!==null&&Ze<Z.length;Ze++){Re.index>Ze?(at=Re,Re=null):at=Re.sibling;var ht=ee(W,Re,Z[Ze],de);if(ht===null){Re===null&&(Re=at);break}n&&Re&&ht.alternate===null&&i(W,Re),G=x(ht,G,Ze),dt===null?ke=ht:dt.sibling=ht,dt=ht,Re=at}if(Ze===Z.length)return c(W,Re),lt&&vi(W,Ze),ke;if(Re===null){for(;Ze<Z.length;Ze++)Re=he(W,Z[Ze],de),Re!==null&&(G=x(Re,G,Ze),dt===null?ke=Re:dt.sibling=Re,dt=Re);return lt&&vi(W,Ze),ke}for(Re=f(Re);Ze<Z.length;Ze++)at=ne(Re,W,Ze,Z[Ze],de),at!==null&&(n&&at.alternate!==null&&Re.delete(at.key===null?Ze:at.key),G=x(at,G,Ze),dt===null?ke=at:dt.sibling=at,dt=at);return n&&Re.forEach(function(ga){return i(W,ga)}),lt&&vi(W,Ze),ke}function Fe(W,G,Z,de){if(Z==null)throw Error(s(151));for(var ke=null,dt=null,Re=G,Ze=G=0,at=null,ht=Z.next();Re!==null&&!ht.done;Ze++,ht=Z.next()){Re.index>Ze?(at=Re,Re=null):at=Re.sibling;var ga=ee(W,Re,ht.value,de);if(ga===null){Re===null&&(Re=at);break}n&&Re&&ga.alternate===null&&i(W,Re),G=x(ga,G,Ze),dt===null?ke=ga:dt.sibling=ga,dt=ga,Re=at}if(ht.done)return c(W,Re),lt&&vi(W,Ze),ke;if(Re===null){for(;!ht.done;Ze++,ht=Z.next())ht=he(W,ht.value,de),ht!==null&&(G=x(ht,G,Ze),dt===null?ke=ht:dt.sibling=ht,dt=ht);return lt&&vi(W,Ze),ke}for(Re=f(Re);!ht.done;Ze++,ht=Z.next())ht=ne(Re,W,Ze,ht.value,de),ht!==null&&(n&&ht.alternate!==null&&Re.delete(ht.key===null?Ze:ht.key),G=x(ht,G,Ze),dt===null?ke=ht:dt.sibling=ht,dt=ht);return n&&Re.forEach(function(lT){return i(W,lT)}),lt&&vi(W,Ze),ke}function At(W,G,Z,de){if(typeof Z=="object"&&Z!==null&&Z.type===S&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:e:{for(var ke=Z.key;G!==null;){if(G.key===ke){if(ke=Z.type,ke===S){if(G.tag===7){c(W,G.sibling),de=v(G,Z.props.children),de.return=W,W=de;break e}}else if(G.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===B&&Fa(ke)===G.type){c(W,G.sibling),de=v(G,Z.props),nl(de,Z),de.return=W,W=de;break e}c(W,G);break}else i(W,G);G=G.sibling}Z.type===S?(de=La(Z.props.children,W.mode,de,Z.key),de.return=W,W=de):(de=Rc(Z.type,Z.key,Z.props,null,W.mode,de),nl(de,Z),de.return=W,W=de)}return _(W);case A:e:{for(ke=Z.key;G!==null;){if(G.key===ke)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){c(W,G.sibling),de=v(G,Z.children||[]),de.return=W,W=de;break e}else{c(W,G);break}else i(W,G);G=G.sibling}de=Ih(Z,W.mode,de),de.return=W,W=de}return _(W);case B:return Z=Fa(Z),At(W,G,Z,de)}if(fe(Z))return Te(W,G,Z,de);if(te(Z)){if(ke=te(Z),typeof ke!="function")throw Error(s(150));return Z=ke.call(Z),Fe(W,G,Z,de)}if(typeof Z.then=="function")return At(W,G,Bc(Z),de);if(Z.$$typeof===N)return At(W,G,Oc(W,Z),de);zc(W,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,G!==null&&G.tag===6?(c(W,G.sibling),de=v(G,Z),de.return=W,W=de):(c(W,G),de=Ph(Z,W.mode,de),de.return=W,W=de),_(W)):c(W,G)}return function(W,G,Z,de){try{tl=0;var ke=At(W,G,Z,de);return kr=null,ke}catch(Re){if(Re===Dr||Re===Pc)throw Re;var dt=Qn(29,Re,null,W.mode);return dt.lanes=de,dt.return=W,dt}}}var Ua=ey(!0),ty=ey(!1),Ji=!1;function Wh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kh(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ea(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ta(n,i,c){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(pt&2)!==0){var v=f.pending;return v===null?i.next=i:(i.next=v.next,v.next=i),f.pending=i,i=Mc(n),Bv(n,null,c),i}return jc(n,f,i,c),Mc(n)}function sl(n,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var f=i.lanes;f&=n.pendingLanes,c|=f,i.lanes=c,ln(n,c)}}function Qh(n,i){var c=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var _={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?v=x=_:x=x.next=_,c=c.next}while(c!==null);x===null?v=x=i:x=x.next=i}else v=x=i;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:f.shared,callbacks:f.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=i:n.next=i,c.lastBaseUpdate=i}var Zh=!1;function il(){if(Zh){var n=Rr;if(n!==null)throw n}}function al(n,i,c,f){Zh=!1;var v=n.updateQueue;Ji=!1;var x=v.firstBaseUpdate,_=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var V=D,J=V.next;V.next=null,_===null?x=J:_.next=J,_=V;var le=n.alternate;le!==null&&(le=le.updateQueue,D=le.lastBaseUpdate,D!==_&&(D===null?le.firstBaseUpdate=J:D.next=J,le.lastBaseUpdate=V))}if(x!==null){var he=v.baseState;_=0,le=J=V=null,D=x;do{var ee=D.lane&-536870913,ne=ee!==D.lane;if(ne?(it&ee)===ee:(f&ee)===ee){ee!==0&&ee===Mr&&(Zh=!0),le!==null&&(le=le.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Te=n,Fe=D;ee=i;var At=c;switch(Fe.tag){case 1:if(Te=Fe.payload,typeof Te=="function"){he=Te.call(At,he,ee);break e}he=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Fe.payload,ee=typeof Te=="function"?Te.call(At,he,ee):Te,ee==null)break e;he=m({},he,ee);break e;case 2:Ji=!0}}ee=D.callback,ee!==null&&(n.flags|=64,ne&&(n.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:D.tag,payload:D.payload,callback:D.callback,next:null},le===null?(J=le=ne,V=he):le=le.next=ne,_|=ee;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;ne=D,D=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);le===null&&(V=he),v.baseState=V,v.firstBaseUpdate=J,v.lastBaseUpdate=le,x===null&&(v.shared.lanes=0),ra|=_,n.lanes=_,n.memoizedState=he}}function ny(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function sy(n,i){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)ny(c[n],i)}var Or=T(null),Fc=T(0);function iy(n,i){n=Ni,I(Fc,n),I(Or,i),Ni=n|i.baseLanes}function Jh(){I(Fc,Ni),I(Or,Or.current)}function ef(){Ni=Fc.current,k(Or),k(Fc)}var Zn=T(null),xs=null;function na(n){var i=n.alternate;I(Ut,Ut.current&1),I(Zn,n),xs===null&&(i===null||Or.current!==null||i.memoizedState!==null)&&(xs=n)}function tf(n){I(Ut,Ut.current),I(Zn,n),xs===null&&(xs=n)}function ay(n){n.tag===22?(I(Ut,Ut.current),I(Zn,n),xs===null&&(xs=n)):sa()}function sa(){I(Ut,Ut.current),I(Zn,Zn.current)}function Jn(n){k(Zn),xs===n&&(xs=null),k(Ut)}var Ut=T(0);function Hc(n){for(var i=n;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||lp(c)||cp(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var bi=0,Ke=null,wt=null,Kt=null,Uc=!1,Lr=!1,Va=!1,Vc=0,rl=0,Pr=null,Z_=0;function zt(){throw Error(s(321))}function nf(n,i){if(i===null)return!1;for(var c=0;c<i.length&&c<n.length;c++)if(!Kn(n[c],i[c]))return!1;return!0}function sf(n,i,c,f,v,x){return bi=x,Ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,R.H=n===null||n.memoizedState===null?Uy:xf,Va=!1,x=c(f,v),Va=!1,Lr&&(x=oy(i,c,f,v)),ry(n),x}function ry(n){R.H=cl;var i=wt!==null&&wt.next!==null;if(bi=0,Kt=wt=Ke=null,Uc=!1,rl=0,Pr=null,i)throw Error(s(300));n===null||Qt||(n=n.dependencies,n!==null&&kc(n)&&(Qt=!0))}function oy(n,i,c,f){Ke=n;var v=0;do{if(Lr&&(Pr=null),rl=0,Lr=!1,25<=v)throw Error(s(301));if(v+=1,Kt=wt=null,n.updateQueue!=null){var x=n.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}R.H=Vy,x=i(c,f)}while(Lr);return x}function J_(){var n=R.H,i=n.useState()[0];return i=typeof i.then=="function"?ol(i):i,n=n.useState()[0],(wt!==null?wt.memoizedState:null)!==n&&(Ke.flags|=1024),i}function af(){var n=Vc!==0;return Vc=0,n}function rf(n,i,c){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~c}function of(n){if(Uc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Uc=!1}bi=0,Kt=wt=Ke=null,Lr=!1,rl=Vc=0,Pr=null}function Mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ke.memoizedState=Kt=n:Kt=Kt.next=n,Kt}function Vt(){if(wt===null){var n=Ke.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var i=Kt===null?Ke.memoizedState:Kt.next;if(i!==null)Kt=i,wt=n;else{if(n===null)throw Ke.alternate===null?Error(s(467)):Error(s(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Kt===null?Ke.memoizedState=Kt=n:Kt=Kt.next=n}return Kt}function $c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(n){var i=rl;return rl+=1,Pr===null&&(Pr=[]),n=Qv(Pr,n,i),i=Ke,(Kt===null?i.memoizedState:Kt.next)===null&&(i=i.alternate,R.H=i===null||i.memoizedState===null?Uy:xf),n}function Gc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ol(n);if(n.$$typeof===N)return yn(n)}throw Error(s(438,String(n)))}function lf(n){var i=null,c=Ke.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var f=Ke.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(i={data:f.data.map(function(v){return v.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=$c(),Ke.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(n),f=0;f<n;f++)c[f]=$;return i.index++,c}function wi(n,i){return typeof i=="function"?i(n):i}function qc(n){var i=Vt();return cf(i,wt,n)}function cf(n,i,c){var f=n.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=c;var v=n.baseQueue,x=f.pending;if(x!==null){if(v!==null){var _=v.next;v.next=x.next,x.next=_}i.baseQueue=v=x,f.pending=null}if(x=n.baseState,v===null)n.memoizedState=x;else{i=v.next;var D=_=null,V=null,J=i,le=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(it&he)===he:(bi&he)===he){var ee=J.revertLane;if(ee===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===Mr&&(le=!0);else if((bi&ee)===ee){J=J.next,ee===Mr&&(le=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(D=V=he,_=x):V=V.next=he,Ke.lanes|=ee,ra|=ee;he=J.action,Va&&c(x,he),x=J.hasEagerState?J.eagerState:c(x,he)}else ee={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(D=V=ee,_=x):V=V.next=ee,Ke.lanes|=he,ra|=he;J=J.next}while(J!==null&&J!==i);if(V===null?_=x:V.next=D,!Kn(x,n.memoizedState)&&(Qt=!0,le&&(c=Rr,c!==null)))throw c;n.memoizedState=x,n.baseState=_,n.baseQueue=V,f.lastRenderedState=x}return v===null&&(f.lanes=0),[n.memoizedState,f.dispatch]}function uf(n){var i=Vt(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=n;var f=c.dispatch,v=c.pending,x=i.memoizedState;if(v!==null){c.pending=null;var _=v=v.next;do x=n(x,_.action),_=_.next;while(_!==v);Kn(x,i.memoizedState)||(Qt=!0),i.memoizedState=x,i.baseQueue===null&&(i.baseState=x),c.lastRenderedState=x}return[x,f]}function ly(n,i,c){var f=Ke,v=Vt(),x=lt;if(x){if(c===void 0)throw Error(s(407));c=c()}else c=i();var _=!Kn((wt||v).memoizedState,c);if(_&&(v.memoizedState=c,Qt=!0),v=v.queue,ff(dy.bind(null,f,v,n),[n]),v.getSnapshot!==i||_||Kt!==null&&Kt.memoizedState.tag&1){if(f.flags|=2048,Ir(9,{destroy:void 0},uy.bind(null,f,v,c,i),null),Et===null)throw Error(s(349));x||(bi&127)!==0||cy(f,i,c)}return c}function cy(n,i,c){n.flags|=16384,n={getSnapshot:i,value:c},i=Ke.updateQueue,i===null?(i=$c(),Ke.updateQueue=i,i.stores=[n]):(c=i.stores,c===null?i.stores=[n]:c.push(n))}function uy(n,i,c,f){i.value=c,i.getSnapshot=f,hy(i)&&fy(n)}function dy(n,i,c){return c(function(){hy(i)&&fy(n)})}function hy(n){var i=n.getSnapshot;n=n.value;try{var c=i();return!Kn(n,c)}catch{return!0}}function fy(n){var i=Oa(n,2);i!==null&&Hn(i,n,2)}function df(n){var i=Mn();if(typeof n=="function"){var c=n;if(n=c(),Va){Wn(!0);try{c()}finally{Wn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:n},i}function py(n,i,c,f){return n.baseState=c,cf(n,wt,typeof f=="function"?f:wi)}function e2(n,i,c,f,v){if(Wc(n))throw Error(s(485));if(n=i.action,n!==null){var x={payload:v,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){x.listeners.push(_)}};R.T!==null?c(!0):x.isTransition=!1,f(x),c=i.pending,c===null?(x.next=i.pending=x,my(i,x)):(x.next=c.next,i.pending=c.next=x)}}function my(n,i){var c=i.action,f=i.payload,v=n.state;if(i.isTransition){var x=R.T,_={};R.T=_;try{var D=c(v,f),V=R.S;V!==null&&V(_,D),gy(n,i,D)}catch(J){hf(n,i,J)}finally{x!==null&&_.types!==null&&(x.types=_.types),R.T=x}}else try{x=c(v,f),gy(n,i,x)}catch(J){hf(n,i,J)}}function gy(n,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){vy(n,i,f)},function(f){return hf(n,i,f)}):vy(n,i,c)}function vy(n,i,c){i.status="fulfilled",i.value=c,yy(i),n.state=c,i=n.pending,i!==null&&(c=i.next,c===i?n.pending=null:(c=c.next,i.next=c,my(n,c)))}function hf(n,i,c){var f=n.pending;if(n.pending=null,f!==null){f=f.next;do i.status="rejected",i.reason=c,yy(i),i=i.next;while(i!==f)}n.action=null}function yy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function xy(n,i){return i}function by(n,i){if(lt){var c=Et.formState;if(c!==null){e:{var f=Ke;if(lt){if(jt){t:{for(var v=jt,x=ys;v.nodeType!==8;){if(!x){v=null;break t}if(v=bs(v.nextSibling),v===null){v=null;break t}}x=v.data,v=x==="F!"||x==="F"?v:null}if(v){jt=bs(v.nextSibling),f=v.data==="F!";break e}}Qi(f)}f=!1}f&&(i=c[0])}}return c=Mn(),c.memoizedState=c.baseState=i,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xy,lastRenderedState:i},c.queue=f,c=zy.bind(null,Ke,f),f.dispatch=c,f=df(!1),x=yf.bind(null,Ke,!1,f.queue),f=Mn(),v={state:i,dispatch:null,action:n,pending:null},f.queue=v,c=e2.bind(null,Ke,v,x,c),v.dispatch=c,f.memoizedState=n,[i,c,!1]}function wy(n){var i=Vt();return Sy(i,wt,n)}function Sy(n,i,c){if(i=cf(n,i,xy)[0],n=qc(wi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var f=ol(i)}catch(_){throw _===Dr?Pc:_}else f=i;i=Vt();var v=i.queue,x=v.dispatch;return c!==i.memoizedState&&(Ke.flags|=2048,Ir(9,{destroy:void 0},t2.bind(null,v,c),null)),[f,x,n]}function t2(n,i){n.action=i}function Ay(n){var i=Vt(),c=wt;if(c!==null)return Sy(i,c,n);Vt(),i=i.memoizedState,c=Vt();var f=c.queue.dispatch;return c.memoizedState=n,[i,f,!1]}function Ir(n,i,c,f){return n={tag:n,create:c,deps:f,inst:i,next:null},i=Ke.updateQueue,i===null&&(i=$c(),Ke.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=n.next=n:(f=c.next,c.next=n,n.next=f,i.lastEffect=n),n}function Cy(){return Vt().memoizedState}function Yc(n,i,c,f){var v=Mn();Ke.flags|=n,v.memoizedState=Ir(1|i,{destroy:void 0},c,f===void 0?null:f)}function Xc(n,i,c,f){var v=Vt();f=f===void 0?null:f;var x=v.memoizedState.inst;wt!==null&&f!==null&&nf(f,wt.memoizedState.deps)?v.memoizedState=Ir(i,x,c,f):(Ke.flags|=n,v.memoizedState=Ir(1|i,x,c,f))}function Ey(n,i){Yc(8390656,8,n,i)}function ff(n,i){Xc(2048,8,n,i)}function n2(n){Ke.flags|=4;var i=Ke.updateQueue;if(i===null)i=$c(),Ke.updateQueue=i,i.events=[n];else{var c=i.events;c===null?i.events=[n]:c.push(n)}}function _y(n){var i=Vt().memoizedState;return n2({ref:i,nextImpl:n}),function(){if((pt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Ty(n,i){return Xc(4,2,n,i)}function Ny(n,i){return Xc(4,4,n,i)}function jy(n,i){if(typeof i=="function"){n=n();var c=i(n);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function My(n,i,c){c=c!=null?c.concat([n]):null,Xc(4,4,jy.bind(null,i,n),c)}function pf(){}function Ry(n,i){var c=Vt();i=i===void 0?null:i;var f=c.memoizedState;return i!==null&&nf(i,f[1])?f[0]:(c.memoizedState=[n,i],n)}function Dy(n,i){var c=Vt();i=i===void 0?null:i;var f=c.memoizedState;if(i!==null&&nf(i,f[1]))return f[0];if(f=n(),Va){Wn(!0);try{n()}finally{Wn(!1)}}return c.memoizedState=[f,i],f}function mf(n,i,c){return c===void 0||(bi&1073741824)!==0&&(it&261930)===0?n.memoizedState=i:(n.memoizedState=c,n=kx(),Ke.lanes|=n,ra|=n,c)}function ky(n,i,c,f){return Kn(c,i)?c:Or.current!==null?(n=mf(n,c,f),Kn(n,i)||(Qt=!0),n):(bi&42)===0||(bi&1073741824)!==0&&(it&261930)===0?(Qt=!0,n.memoizedState=c):(n=kx(),Ke.lanes|=n,ra|=n,i)}function Oy(n,i,c,f,v){var x=U.p;U.p=x!==0&&8>x?x:8;var _=R.T,D={};R.T=D,yf(n,!1,i,c);try{var V=v(),J=R.S;if(J!==null&&J(D,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var le=Q_(V,f);ll(n,i,le,ns(n))}else ll(n,i,f,ns(n))}catch(he){ll(n,i,{then:function(){},status:"rejected",reason:he},ns())}finally{U.p=x,_!==null&&D.types!==null&&(_.types=D.types),R.T=_}}function s2(){}function gf(n,i,c,f){if(n.tag!==5)throw Error(s(476));var v=Ly(n).queue;Oy(n,v,i,H,c===null?s2:function(){return Py(n),c(f)})}function Ly(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:H},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:c},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Py(n){var i=Ly(n);i.next===null&&(i=n.alternate.memoizedState),ll(n,i.next.queue,{},ns())}function vf(){return yn(El)}function Iy(){return Vt().memoizedState}function By(){return Vt().memoizedState}function i2(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var c=ns();n=ea(c);var f=ta(i,n,c);f!==null&&(Hn(f,i,c),sl(f,i,c)),i={cache:Gh()},n.payload=i;return}i=i.return}}function a2(n,i,c){var f=ns();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Wc(n)?Fy(i,c):(c=Oh(n,i,c,f),c!==null&&(Hn(c,n,f),Hy(c,i,f)))}function zy(n,i,c){var f=ns();ll(n,i,c,f)}function ll(n,i,c,f){var v={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Wc(n))Fy(i,v);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=i.lastRenderedReducer,x!==null))try{var _=i.lastRenderedState,D=x(_,c);if(v.hasEagerState=!0,v.eagerState=D,Kn(D,_))return jc(n,i,v,0),Et===null&&Nc(),!1}catch{}if(c=Oh(n,i,v,f),c!==null)return Hn(c,n,f),Hy(c,i,f),!0}return!1}function yf(n,i,c,f){if(f={lane:2,revertLane:Kf(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Wc(n)){if(i)throw Error(s(479))}else i=Oh(n,c,f,2),i!==null&&Hn(i,n,2)}function Wc(n){var i=n.alternate;return n===Ke||i!==null&&i===Ke}function Fy(n,i){Lr=Uc=!0;var c=n.pending;c===null?i.next=i:(i.next=c.next,c.next=i),n.pending=i}function Hy(n,i,c){if((c&4194048)!==0){var f=i.lanes;f&=n.pendingLanes,c|=f,i.lanes=c,ln(n,c)}}var cl={readContext:yn,use:Gc,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt};cl.useEffectEvent=zt;var Uy={readContext:yn,use:Gc,useCallback:function(n,i){return Mn().memoizedState=[n,i===void 0?null:i],n},useContext:yn,useEffect:Ey,useImperativeHandle:function(n,i,c){c=c!=null?c.concat([n]):null,Yc(4194308,4,jy.bind(null,i,n),c)},useLayoutEffect:function(n,i){return Yc(4194308,4,n,i)},useInsertionEffect:function(n,i){Yc(4,2,n,i)},useMemo:function(n,i){var c=Mn();i=i===void 0?null:i;var f=n();if(Va){Wn(!0);try{n()}finally{Wn(!1)}}return c.memoizedState=[f,i],f},useReducer:function(n,i,c){var f=Mn();if(c!==void 0){var v=c(i);if(Va){Wn(!0);try{c(i)}finally{Wn(!1)}}}else v=i;return f.memoizedState=f.baseState=v,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:v},f.queue=n,n=n.dispatch=a2.bind(null,Ke,n),[f.memoizedState,n]},useRef:function(n){var i=Mn();return n={current:n},i.memoizedState=n},useState:function(n){n=df(n);var i=n.queue,c=zy.bind(null,Ke,i);return i.dispatch=c,[n.memoizedState,c]},useDebugValue:pf,useDeferredValue:function(n,i){var c=Mn();return mf(c,n,i)},useTransition:function(){var n=df(!1);return n=Oy.bind(null,Ke,n.queue,!0,!1),Mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,c){var f=Ke,v=Mn();if(lt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=i(),Et===null)throw Error(s(349));(it&127)!==0||cy(f,i,c)}v.memoizedState=c;var x={value:c,getSnapshot:i};return v.queue=x,Ey(dy.bind(null,f,x,n),[n]),f.flags|=2048,Ir(9,{destroy:void 0},uy.bind(null,f,x,c,i),null),c},useId:function(){var n=Mn(),i=Et.identifierPrefix;if(lt){var c=$s,f=Vs;c=(f&~(1<<32-on(f)-1)).toString(32)+c,i="_"+i+"R_"+c,c=Vc++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=Z_++,i="_"+i+"r_"+c.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:vf,useFormState:by,useActionState:by,useOptimistic:function(n){var i=Mn();i.memoizedState=i.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=yf.bind(null,Ke,!0,c),c.dispatch=i,[n,i]},useMemoCache:lf,useCacheRefresh:function(){return Mn().memoizedState=i2.bind(null,Ke)},useEffectEvent:function(n){var i=Mn(),c={impl:n};return i.memoizedState=c,function(){if((pt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},xf={readContext:yn,use:Gc,useCallback:Ry,useContext:yn,useEffect:ff,useImperativeHandle:My,useInsertionEffect:Ty,useLayoutEffect:Ny,useMemo:Dy,useReducer:qc,useRef:Cy,useState:function(){return qc(wi)},useDebugValue:pf,useDeferredValue:function(n,i){var c=Vt();return ky(c,wt.memoizedState,n,i)},useTransition:function(){var n=qc(wi)[0],i=Vt().memoizedState;return[typeof n=="boolean"?n:ol(n),i]},useSyncExternalStore:ly,useId:Iy,useHostTransitionStatus:vf,useFormState:wy,useActionState:wy,useOptimistic:function(n,i){var c=Vt();return py(c,wt,n,i)},useMemoCache:lf,useCacheRefresh:By};xf.useEffectEvent=_y;var Vy={readContext:yn,use:Gc,useCallback:Ry,useContext:yn,useEffect:ff,useImperativeHandle:My,useInsertionEffect:Ty,useLayoutEffect:Ny,useMemo:Dy,useReducer:uf,useRef:Cy,useState:function(){return uf(wi)},useDebugValue:pf,useDeferredValue:function(n,i){var c=Vt();return wt===null?mf(c,n,i):ky(c,wt.memoizedState,n,i)},useTransition:function(){var n=uf(wi)[0],i=Vt().memoizedState;return[typeof n=="boolean"?n:ol(n),i]},useSyncExternalStore:ly,useId:Iy,useHostTransitionStatus:vf,useFormState:Ay,useActionState:Ay,useOptimistic:function(n,i){var c=Vt();return wt!==null?py(c,wt,n,i):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:lf,useCacheRefresh:By};Vy.useEffectEvent=_y;function bf(n,i,c,f){i=n.memoizedState,c=c(f,i),c=c==null?i:m({},i,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var wf={enqueueSetState:function(n,i,c){n=n._reactInternals;var f=ns(),v=ea(f);v.payload=i,c!=null&&(v.callback=c),i=ta(n,v,f),i!==null&&(Hn(i,n,f),sl(i,n,f))},enqueueReplaceState:function(n,i,c){n=n._reactInternals;var f=ns(),v=ea(f);v.tag=1,v.payload=i,c!=null&&(v.callback=c),i=ta(n,v,f),i!==null&&(Hn(i,n,f),sl(i,n,f))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var c=ns(),f=ea(c);f.tag=2,i!=null&&(f.callback=i),i=ta(n,f,c),i!==null&&(Hn(i,n,c),sl(i,n,c))}};function $y(n,i,c,f,v,x,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,x,_):i.prototype&&i.prototype.isPureReactComponent?!Wo(c,f)||!Wo(v,x):!0}function Gy(n,i,c,f){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,f),i.state!==n&&wf.enqueueReplaceState(i,i.state,null)}function $a(n,i){var c=i;if("ref"in i){c={};for(var f in i)f!=="ref"&&(c[f]=i[f])}if(n=n.defaultProps){c===i&&(c=m({},c));for(var v in n)c[v]===void 0&&(c[v]=n[v])}return c}function qy(n){Tc(n)}function Yy(n){console.error(n)}function Xy(n){Tc(n)}function Kc(n,i){try{var c=n.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(f){setTimeout(function(){throw f})}}function Wy(n,i,c){try{var f=n.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Sf(n,i,c){return c=ea(c),c.tag=3,c.payload={element:null},c.callback=function(){Kc(n,i)},c}function Ky(n){return n=ea(n),n.tag=3,n}function Qy(n,i,c,f){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var x=f.value;n.payload=function(){return v(x)},n.callback=function(){Wy(i,c,f)}}var _=c.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Wy(i,c,f),typeof v!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function r2(n,i,c,f,v){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(i=c.alternate,i!==null&&jr(i,c,v,!0),c=Zn.current,c!==null){switch(c.tag){case 31:case 13:return xs===null?lu():c.alternate===null&&Ft===0&&(Ft=3),c.flags&=-257,c.flags|=65536,c.lanes=v,f===Ic?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([f]):i.add(f),Yf(n,f,v)),!1;case 22:return c.flags|=65536,f===Ic?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([f]):c.add(f)),Yf(n,f,v)),!1}throw Error(s(435,c.tag))}return Yf(n,f,v),lu(),!1}if(lt)return i=Zn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=v,f!==Fh&&(n=Error(s(422),{cause:f}),Zo(ms(n,c)))):(f!==Fh&&(i=Error(s(423),{cause:f}),Zo(ms(i,c))),n=n.current.alternate,n.flags|=65536,v&=-v,n.lanes|=v,f=ms(f,c),v=Sf(n.stateNode,f,v),Qh(n,v),Ft!==4&&(Ft=2)),!1;var x=Error(s(520),{cause:f});if(x=ms(x,c),vl===null?vl=[x]:vl.push(x),Ft!==4&&(Ft=2),i===null)return!0;f=ms(f,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,n=v&-v,c.lanes|=n,n=Sf(c.stateNode,f,n),Qh(c,n),!1;case 1:if(i=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(oa===null||!oa.has(x))))return c.flags|=65536,v&=-v,c.lanes|=v,v=Ky(v),Qy(v,n,c,f),Qh(c,v),!1}c=c.return}while(c!==null);return!1}var Af=Error(s(461)),Qt=!1;function xn(n,i,c,f){i.child=n===null?ty(i,null,c,f):Ua(i,n.child,c,f)}function Zy(n,i,c,f,v){c=c.render;var x=i.ref;if("ref"in f){var _={};for(var D in f)D!=="ref"&&(_[D]=f[D])}else _=f;return Ba(i),f=sf(n,i,c,_,x,v),D=af(),n!==null&&!Qt?(rf(n,i,v),Si(n,i,v)):(lt&&D&&Bh(i),i.flags|=1,xn(n,i,f,v),i.child)}function Jy(n,i,c,f,v){if(n===null){var x=c.type;return typeof x=="function"&&!Lh(x)&&x.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=x,ex(n,i,x,f,v)):(n=Rc(c.type,null,f,i,i.mode,v),n.ref=i.ref,n.return=i,i.child=n)}if(x=n.child,!Rf(n,v)){var _=x.memoizedProps;if(c=c.compare,c=c!==null?c:Wo,c(_,f)&&n.ref===i.ref)return Si(n,i,v)}return i.flags|=1,n=gi(x,f),n.ref=i.ref,n.return=i,i.child=n}function ex(n,i,c,f,v){if(n!==null){var x=n.memoizedProps;if(Wo(x,f)&&n.ref===i.ref)if(Qt=!1,i.pendingProps=f=x,Rf(n,v))(n.flags&131072)!==0&&(Qt=!0);else return i.lanes=n.lanes,Si(n,i,v)}return Cf(n,i,c,f,v)}function tx(n,i,c,f){var v=f.children,x=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((i.flags&128)!==0){if(x=x!==null?x.baseLanes|c:c,n!==null){for(f=i.child=n.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~x}else f=0,i.child=null;return nx(n,i,x,c,f)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Lc(i,x!==null?x.cachePool:null),x!==null?iy(i,x):Jh(),ay(i);else return f=i.lanes=536870912,nx(n,i,x!==null?x.baseLanes|c:c,c,f)}else x!==null?(Lc(i,x.cachePool),iy(i,x),sa(),i.memoizedState=null):(n!==null&&Lc(i,null),Jh(),sa());return xn(n,i,v,c),i.child}function ul(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function nx(n,i,c,f,v){var x=Yh();return x=x===null?null:{parent:Wt._currentValue,pool:x},i.memoizedState={baseLanes:c,cachePool:x},n!==null&&Lc(i,null),Jh(),ay(i),n!==null&&jr(n,i,f,!0),i.childLanes=v,null}function Qc(n,i){return i=Jc({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function sx(n,i,c){return Ua(i,n.child,null,c),n=Qc(i,i.pendingProps),n.flags|=2,Jn(i),i.memoizedState=null,n}function o2(n,i,c){var f=i.pendingProps,v=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(lt){if(f.mode==="hidden")return n=Qc(i,f),i.lanes=536870912,ul(null,n);if(tf(i),(n=jt)?(n=mb(n,ys),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Wi!==null?{id:Vs,overflow:$s}:null,retryLane:536870912,hydrationErrors:null},c=Fv(n),c.return=i,i.child=c,vn=i,jt=null)):n=null,n===null)throw Qi(i);return i.lanes=536870912,null}return Qc(i,f)}var x=n.memoizedState;if(x!==null){var _=x.dehydrated;if(tf(i),v)if(i.flags&256)i.flags&=-257,i=sx(n,i,c);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Qt||jr(n,i,c,!1),v=(c&n.childLanes)!==0,Qt||v){if(f=Et,f!==null&&(_=Ht(f,c),_!==0&&_!==x.retryLane))throw x.retryLane=_,Oa(n,_),Hn(f,n,_),Af;lu(),i=sx(n,i,c)}else n=x.treeContext,jt=bs(_.nextSibling),vn=i,lt=!0,Ki=null,ys=!1,n!==null&&Vv(i,n),i=Qc(i,f),i.flags|=4096;return i}return n=gi(n.child,{mode:f.mode,children:f.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Zc(n,i){var c=i.ref;if(c===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(n===null||n.ref!==c)&&(i.flags|=4194816)}}function Cf(n,i,c,f,v){return Ba(i),c=sf(n,i,c,f,void 0,v),f=af(),n!==null&&!Qt?(rf(n,i,v),Si(n,i,v)):(lt&&f&&Bh(i),i.flags|=1,xn(n,i,c,v),i.child)}function ix(n,i,c,f,v,x){return Ba(i),i.updateQueue=null,c=oy(i,f,c,v),ry(n),f=af(),n!==null&&!Qt?(rf(n,i,x),Si(n,i,x)):(lt&&f&&Bh(i),i.flags|=1,xn(n,i,c,x),i.child)}function ax(n,i,c,f,v){if(Ba(i),i.stateNode===null){var x=Er,_=c.contextType;typeof _=="object"&&_!==null&&(x=yn(_)),x=new c(f,x),i.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=wf,i.stateNode=x,x._reactInternals=i,x=i.stateNode,x.props=f,x.state=i.memoizedState,x.refs={},Wh(i),_=c.contextType,x.context=typeof _=="object"&&_!==null?yn(_):Er,x.state=i.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(bf(i,c,_,f),x.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(_=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),_!==x.state&&wf.enqueueReplaceState(x,x.state,null),al(i,f,x,v),il(),x.state=i.memoizedState),typeof x.componentDidMount=="function"&&(i.flags|=4194308),f=!0}else if(n===null){x=i.stateNode;var D=i.memoizedProps,V=$a(c,D);x.props=V;var J=x.context,le=c.contextType;_=Er,typeof le=="object"&&le!==null&&(_=yn(le));var he=c.getDerivedStateFromProps;le=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",D=i.pendingProps!==D,le||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D||J!==_)&&Gy(i,x,f,_),Ji=!1;var ee=i.memoizedState;x.state=ee,al(i,f,x,v),il(),J=i.memoizedState,D||ee!==J||Ji?(typeof he=="function"&&(bf(i,c,he,f),J=i.memoizedState),(V=Ji||$y(i,c,V,f,ee,J,_))?(le||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=J),x.props=f,x.state=J,x.context=_,f=V):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{x=i.stateNode,Kh(n,i),_=i.memoizedProps,le=$a(c,_),x.props=le,he=i.pendingProps,ee=x.context,J=c.contextType,V=Er,typeof J=="object"&&J!==null&&(V=yn(J)),D=c.getDerivedStateFromProps,(J=typeof D=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_!==he||ee!==V)&&Gy(i,x,f,V),Ji=!1,ee=i.memoizedState,x.state=ee,al(i,f,x,v),il();var ne=i.memoizedState;_!==he||ee!==ne||Ji||n!==null&&n.dependencies!==null&&kc(n.dependencies)?(typeof D=="function"&&(bf(i,c,D,f),ne=i.memoizedState),(le=Ji||$y(i,c,le,f,ee,ne,V)||n!==null&&n.dependencies!==null&&kc(n.dependencies))?(J||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,ne,V),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,ne,V)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||_===n.memoizedProps&&ee===n.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&ee===n.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=ne),x.props=f,x.state=ne,x.context=V,f=le):(typeof x.componentDidUpdate!="function"||_===n.memoizedProps&&ee===n.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&ee===n.memoizedState||(i.flags|=1024),f=!1)}return x=f,Zc(n,i),f=(i.flags&128)!==0,x||f?(x=i.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:x.render(),i.flags|=1,n!==null&&f?(i.child=Ua(i,n.child,null,v),i.child=Ua(i,null,c,v)):xn(n,i,c,v),i.memoizedState=x.state,n=i.child):n=Si(n,i,v),n}function rx(n,i,c,f){return Pa(),i.flags|=256,xn(n,i,c,f),i.child}var Ef={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _f(n){return{baseLanes:n,cachePool:Wv()}}function Tf(n,i,c){return n=n!==null?n.childLanes&~c:0,i&&(n|=ts),n}function ox(n,i,c){var f=i.pendingProps,v=!1,x=(i.flags&128)!==0,_;if((_=x)||(_=n!==null&&n.memoizedState===null?!1:(Ut.current&2)!==0),_&&(v=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(lt){if(v?na(i):sa(),(n=jt)?(n=mb(n,ys),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Wi!==null?{id:Vs,overflow:$s}:null,retryLane:536870912,hydrationErrors:null},c=Fv(n),c.return=i,i.child=c,vn=i,jt=null)):n=null,n===null)throw Qi(i);return cp(n)?i.lanes=32:i.lanes=536870912,null}var D=f.children;return f=f.fallback,v?(sa(),v=i.mode,D=Jc({mode:"hidden",children:D},v),f=La(f,v,c,null),D.return=i,f.return=i,D.sibling=f,i.child=D,f=i.child,f.memoizedState=_f(c),f.childLanes=Tf(n,_,c),i.memoizedState=Ef,ul(null,f)):(na(i),Nf(i,D))}var V=n.memoizedState;if(V!==null&&(D=V.dehydrated,D!==null)){if(x)i.flags&256?(na(i),i.flags&=-257,i=jf(n,i,c)):i.memoizedState!==null?(sa(),i.child=n.child,i.flags|=128,i=null):(sa(),D=f.fallback,v=i.mode,f=Jc({mode:"visible",children:f.children},v),D=La(D,v,c,null),D.flags|=2,f.return=i,D.return=i,f.sibling=D,i.child=f,Ua(i,n.child,null,c),f=i.child,f.memoizedState=_f(c),f.childLanes=Tf(n,_,c),i.memoizedState=Ef,i=ul(null,f));else if(na(i),cp(D)){if(_=D.nextSibling&&D.nextSibling.dataset,_)var J=_.dgst;_=J,f=Error(s(419)),f.stack="",f.digest=_,Zo({value:f,source:null,stack:null}),i=jf(n,i,c)}else if(Qt||jr(n,i,c,!1),_=(c&n.childLanes)!==0,Qt||_){if(_=Et,_!==null&&(f=Ht(_,c),f!==0&&f!==V.retryLane))throw V.retryLane=f,Oa(n,f),Hn(_,n,f),Af;lp(D)||lu(),i=jf(n,i,c)}else lp(D)?(i.flags|=192,i.child=n.child,i=null):(n=V.treeContext,jt=bs(D.nextSibling),vn=i,lt=!0,Ki=null,ys=!1,n!==null&&Vv(i,n),i=Nf(i,f.children),i.flags|=4096);return i}return v?(sa(),D=f.fallback,v=i.mode,V=n.child,J=V.sibling,f=gi(V,{mode:"hidden",children:f.children}),f.subtreeFlags=V.subtreeFlags&65011712,J!==null?D=gi(J,D):(D=La(D,v,c,null),D.flags|=2),D.return=i,f.return=i,f.sibling=D,i.child=f,ul(null,f),f=i.child,D=n.child.memoizedState,D===null?D=_f(c):(v=D.cachePool,v!==null?(V=Wt._currentValue,v=v.parent!==V?{parent:V,pool:V}:v):v=Wv(),D={baseLanes:D.baseLanes|c,cachePool:v}),f.memoizedState=D,f.childLanes=Tf(n,_,c),i.memoizedState=Ef,ul(n.child,f)):(na(i),c=n.child,n=c.sibling,c=gi(c,{mode:"visible",children:f.children}),c.return=i,c.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=c,i.memoizedState=null,c)}function Nf(n,i){return i=Jc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Jc(n,i){return n=Qn(22,n,null,i),n.lanes=0,n}function jf(n,i,c){return Ua(i,n.child,null,c),n=Nf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function lx(n,i,c){n.lanes|=i;var f=n.alternate;f!==null&&(f.lanes|=i),Vh(n.return,i,c)}function Mf(n,i,c,f,v,x){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v,treeForkCount:x}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=c,_.tailMode=v,_.treeForkCount=x)}function cx(n,i,c){var f=i.pendingProps,v=f.revealOrder,x=f.tail;f=f.children;var _=Ut.current,D=(_&2)!==0;if(D?(_=_&1|2,i.flags|=128):_&=1,I(Ut,_),xn(n,i,f,c),f=lt?Qo:0,!D&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&lx(n,c,i);else if(n.tag===19)lx(n,c,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(v){case"forwards":for(c=i.child,v=null;c!==null;)n=c.alternate,n!==null&&Hc(n)===null&&(v=c),c=c.sibling;c=v,c===null?(v=i.child,i.child=null):(v=c.sibling,c.sibling=null),Mf(i,!1,v,c,x,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=i.child,i.child=null;v!==null;){if(n=v.alternate,n!==null&&Hc(n)===null){i.child=v;break}n=v.sibling,v.sibling=c,c=v,v=n}Mf(i,!0,c,null,x,f);break;case"together":Mf(i,!1,null,null,void 0,f);break;default:i.memoizedState=null}return i.child}function Si(n,i,c){if(n!==null&&(i.dependencies=n.dependencies),ra|=i.lanes,(c&i.childLanes)===0)if(n!==null){if(jr(n,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,c=gi(n,n.pendingProps),i.child=c,c.return=i;n.sibling!==null;)n=n.sibling,c=c.sibling=gi(n,n.pendingProps),c.return=i;c.sibling=null}return i.child}function Rf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&kc(n)))}function l2(n,i,c){switch(i.tag){case 3:ue(i,i.stateNode.containerInfo),Zi(i,Wt,n.memoizedState.cache),Pa();break;case 27:case 5:Ce(i);break;case 4:ue(i,i.stateNode.containerInfo);break;case 10:Zi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,tf(i),null;break;case 13:var f=i.memoizedState;if(f!==null)return f.dehydrated!==null?(na(i),i.flags|=128,null):(c&i.child.childLanes)!==0?ox(n,i,c):(na(i),n=Si(n,i,c),n!==null?n.sibling:null);na(i);break;case 19:var v=(n.flags&128)!==0;if(f=(c&i.childLanes)!==0,f||(jr(n,i,c,!1),f=(c&i.childLanes)!==0),v){if(f)return cx(n,i,c);i.flags|=128}if(v=i.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),I(Ut,Ut.current),f)break;return null;case 22:return i.lanes=0,tx(n,i,c,i.pendingProps);case 24:Zi(i,Wt,n.memoizedState.cache)}return Si(n,i,c)}function ux(n,i,c){if(n!==null)if(n.memoizedProps!==i.pendingProps)Qt=!0;else{if(!Rf(n,c)&&(i.flags&128)===0)return Qt=!1,l2(n,i,c);Qt=(n.flags&131072)!==0}else Qt=!1,lt&&(i.flags&1048576)!==0&&Uv(i,Qo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var f=i.pendingProps;if(n=Fa(i.elementType),i.type=n,typeof n=="function")Lh(n)?(f=$a(n,f),i.tag=1,i=ax(null,i,n,f,c)):(i.tag=0,i=Cf(null,i,n,f,c));else{if(n!=null){var v=n.$$typeof;if(v===M){i.tag=11,i=Zy(null,i,n,f,c);break e}else if(v===L){i.tag=14,i=Jy(null,i,n,f,c);break e}}throw i=ie(n)||n,Error(s(306,i,""))}}return i;case 0:return Cf(n,i,i.type,i.pendingProps,c);case 1:return f=i.type,v=$a(f,i.pendingProps),ax(n,i,f,v,c);case 3:e:{if(ue(i,i.stateNode.containerInfo),n===null)throw Error(s(387));f=i.pendingProps;var x=i.memoizedState;v=x.element,Kh(n,i),al(i,f,null,c);var _=i.memoizedState;if(f=_.cache,Zi(i,Wt,f),f!==x.cache&&$h(i,[Wt],c,!0),il(),f=_.element,x.isDehydrated)if(x={element:f,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=x,i.memoizedState=x,i.flags&256){i=rx(n,i,f,c);break e}else if(f!==v){v=ms(Error(s(424)),i),Zo(v),i=rx(n,i,f,c);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,jt=bs(n.firstChild),vn=i,lt=!0,Ki=null,ys=!0,c=ty(i,null,f,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Pa(),f===v){i=Si(n,i,c);break e}xn(n,i,f,c)}i=i.child}return i;case 26:return Zc(n,i),n===null?(c=wb(i.type,null,i.pendingProps,null))?i.memoizedState=c:lt||(c=i.type,n=i.pendingProps,f=mu(ce.current).createElement(c),f[gn]=i,f[Ln]=n,bn(f,c,n),cn(f),i.stateNode=f):i.memoizedState=wb(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ce(i),n===null&&lt&&(f=i.stateNode=yb(i.type,i.pendingProps,ce.current),vn=i,ys=!0,v=jt,da(i.type)?(up=v,jt=bs(f.firstChild)):jt=v),xn(n,i,i.pendingProps.children,c),Zc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&lt&&((v=f=jt)&&(f=B2(f,i.type,i.pendingProps,ys),f!==null?(i.stateNode=f,vn=i,jt=bs(f.firstChild),ys=!1,v=!0):v=!1),v||Qi(i)),Ce(i),v=i.type,x=i.pendingProps,_=n!==null?n.memoizedProps:null,f=x.children,ap(v,x)?f=null:_!==null&&ap(v,_)&&(i.flags|=32),i.memoizedState!==null&&(v=sf(n,i,J_,null,null,c),El._currentValue=v),Zc(n,i),xn(n,i,f,c),i.child;case 6:return n===null&&lt&&((n=c=jt)&&(c=z2(c,i.pendingProps,ys),c!==null?(i.stateNode=c,vn=i,jt=null,n=!0):n=!1),n||Qi(i)),null;case 13:return ox(n,i,c);case 4:return ue(i,i.stateNode.containerInfo),f=i.pendingProps,n===null?i.child=Ua(i,null,f,c):xn(n,i,f,c),i.child;case 11:return Zy(n,i,i.type,i.pendingProps,c);case 7:return xn(n,i,i.pendingProps,c),i.child;case 8:return xn(n,i,i.pendingProps.children,c),i.child;case 12:return xn(n,i,i.pendingProps.children,c),i.child;case 10:return f=i.pendingProps,Zi(i,i.type,f.value),xn(n,i,f.children,c),i.child;case 9:return v=i.type._context,f=i.pendingProps.children,Ba(i),v=yn(v),f=f(v),i.flags|=1,xn(n,i,f,c),i.child;case 14:return Jy(n,i,i.type,i.pendingProps,c);case 15:return ex(n,i,i.type,i.pendingProps,c);case 19:return cx(n,i,c);case 31:return o2(n,i,c);case 22:return tx(n,i,c,i.pendingProps);case 24:return Ba(i),f=yn(Wt),n===null?(v=Yh(),v===null&&(v=Et,x=Gh(),v.pooledCache=x,x.refCount++,x!==null&&(v.pooledCacheLanes|=c),v=x),i.memoizedState={parent:f,cache:v},Wh(i),Zi(i,Wt,v)):((n.lanes&c)!==0&&(Kh(n,i),al(i,null,null,c),il()),v=n.memoizedState,x=i.memoizedState,v.parent!==f?(v={parent:f,cache:f},i.memoizedState=v,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=v),Zi(i,Wt,f)):(f=x.cache,Zi(i,Wt,f),f!==v.cache&&$h(i,[Wt],c,!0))),xn(n,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ai(n){n.flags|=4}function Df(n,i,c,f,v){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(v&335544128)===v)if(n.stateNode.complete)n.flags|=8192;else if(Ix())n.flags|=8192;else throw Ha=Ic,Xh}else n.flags&=-16777217}function dx(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!_b(i))if(Ix())n.flags|=8192;else throw Ha=Ic,Xh}function eu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Ue():536870912,n.lanes|=i,Hr|=i)}function dl(n,i){if(!lt)switch(n.tailMode){case"hidden":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Mt(n){var i=n.alternate!==null&&n.alternate.child===n.child,c=0,f=0;if(i)for(var v=n.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=n,v=v.sibling;else for(v=n.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=n,v=v.sibling;return n.subtreeFlags|=f,n.childLanes=c,i}function c2(n,i,c){var f=i.pendingProps;switch(zh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(i),null;case 1:return Mt(i),null;case 3:return c=i.stateNode,f=null,n!==null&&(f=n.memoizedState.cache),i.memoizedState.cache!==f&&(i.flags|=2048),xi(Wt),pe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Nr(i)?Ai(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Hh())),Mt(i),null;case 26:var v=i.type,x=i.memoizedState;return n===null?(Ai(i),x!==null?(Mt(i),dx(i,x)):(Mt(i),Df(i,v,null,f,c))):x?x!==n.memoizedState?(Ai(i),Mt(i),dx(i,x)):(Mt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==f&&Ai(i),Mt(i),Df(i,v,n,f,c)),null;case 27:if(ye(i),c=ce.current,v=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==f&&Ai(i);else{if(!f){if(i.stateNode===null)throw Error(s(166));return Mt(i),null}n=q.current,Nr(i)?$v(i):(n=yb(v,f,c),i.stateNode=n,Ai(i))}return Mt(i),null;case 5:if(ye(i),v=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==f&&Ai(i);else{if(!f){if(i.stateNode===null)throw Error(s(166));return Mt(i),null}if(x=q.current,Nr(i))$v(i);else{var _=mu(ce.current);switch(x){case 1:x=_.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:x=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":x=_.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":x=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":x=_.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof f.is=="string"?_.createElement("select",{is:f.is}):_.createElement("select"),f.multiple?x.multiple=!0:f.size&&(x.size=f.size);break;default:x=typeof f.is=="string"?_.createElement(v,{is:f.is}):_.createElement(v)}}x[gn]=i,x[Ln]=f;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)x.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=x;e:switch(bn(x,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Ai(i)}}return Mt(i),Df(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,c),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==f&&Ai(i);else{if(typeof f!="string"&&i.stateNode===null)throw Error(s(166));if(n=ce.current,Nr(i)){if(n=i.stateNode,c=i.memoizedProps,f=null,v=vn,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}n[gn]=i,n=!!(n.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||ob(n.nodeValue,c)),n||Qi(i,!0)}else n=mu(n).createTextNode(f),n[gn]=i,i.stateNode=n}return Mt(i),null;case 31:if(c=i.memoizedState,n===null||n.memoizedState!==null){if(f=Nr(i),c!==null){if(n===null){if(!f)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[gn]=i}else Pa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Mt(i),n=!1}else c=Hh(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=c),n=!0;if(!n)return i.flags&256?(Jn(i),i):(Jn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Mt(i),null;case 13:if(f=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(v=Nr(i),f!==null&&f.dehydrated!==null){if(n===null){if(!v)throw Error(s(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[gn]=i}else Pa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Mt(i),v=!1}else v=Hh(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=v),v=!0;if(!v)return i.flags&256?(Jn(i),i):(Jn(i),null)}return Jn(i),(i.flags&128)!==0?(i.lanes=c,i):(c=f!==null,n=n!==null&&n.memoizedState!==null,c&&(f=i.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),x=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),x!==v&&(f.flags|=2048)),c!==n&&c&&(i.child.flags|=8192),eu(i,i.updateQueue),Mt(i),null);case 4:return pe(),n===null&&ep(i.stateNode.containerInfo),Mt(i),null;case 10:return xi(i.type),Mt(i),null;case 19:if(k(Ut),f=i.memoizedState,f===null)return Mt(i),null;if(v=(i.flags&128)!==0,x=f.rendering,x===null)if(v)dl(f,!1);else{if(Ft!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(x=Hc(n),x!==null){for(i.flags|=128,dl(f,!1),n=x.updateQueue,i.updateQueue=n,eu(i,n),i.subtreeFlags=0,n=c,c=i.child;c!==null;)zv(c,n),c=c.sibling;return I(Ut,Ut.current&1|2),lt&&vi(i,f.treeForkCount),i.child}n=n.sibling}f.tail!==null&&Qe()>au&&(i.flags|=128,v=!0,dl(f,!1),i.lanes=4194304)}else{if(!v)if(n=Hc(x),n!==null){if(i.flags|=128,v=!0,n=n.updateQueue,i.updateQueue=n,eu(i,n),dl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!x.alternate&&!lt)return Mt(i),null}else 2*Qe()-f.renderingStartTime>au&&c!==536870912&&(i.flags|=128,v=!0,dl(f,!1),i.lanes=4194304);f.isBackwards?(x.sibling=i.child,i.child=x):(n=f.last,n!==null?n.sibling=x:i.child=x,f.last=x)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=Qe(),n.sibling=null,c=Ut.current,I(Ut,v?c&1|2:c&1),lt&&vi(i,f.treeForkCount),n):(Mt(i),null);case 22:case 23:return Jn(i),ef(),f=i.memoizedState!==null,n!==null?n.memoizedState!==null!==f&&(i.flags|=8192):f&&(i.flags|=8192),f?(c&536870912)!==0&&(i.flags&128)===0&&(Mt(i),i.subtreeFlags&6&&(i.flags|=8192)):Mt(i),c=i.updateQueue,c!==null&&eu(i,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),f=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),f!==c&&(i.flags|=2048),n!==null&&k(za),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),xi(Wt),Mt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function u2(n,i){switch(zh(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return xi(Wt),pe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return ye(i),null;case 31:if(i.memoizedState!==null){if(Jn(i),i.alternate===null)throw Error(s(340));Pa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Jn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Pa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return k(Ut),null;case 4:return pe(),null;case 10:return xi(i.type),null;case 22:case 23:return Jn(i),ef(),n!==null&&k(za),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return xi(Wt),null;case 25:return null;default:return null}}function hx(n,i){switch(zh(i),i.tag){case 3:xi(Wt),pe();break;case 26:case 27:case 5:ye(i);break;case 4:pe();break;case 31:i.memoizedState!==null&&Jn(i);break;case 13:Jn(i);break;case 19:k(Ut);break;case 10:xi(i.type);break;case 22:case 23:Jn(i),ef(),n!==null&&k(za);break;case 24:xi(Wt)}}function hl(n,i){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var v=f.next;c=v;do{if((c.tag&n)===n){f=void 0;var x=c.create,_=c.inst;f=x(),_.destroy=f}c=c.next}while(c!==v)}}catch(D){bt(i,i.return,D)}}function ia(n,i,c){try{var f=i.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var x=v.next;f=x;do{if((f.tag&n)===n){var _=f.inst,D=_.destroy;if(D!==void 0){_.destroy=void 0,v=i;var V=c,J=D;try{J()}catch(le){bt(v,V,le)}}}f=f.next}while(f!==x)}}catch(le){bt(i,i.return,le)}}function fx(n){var i=n.updateQueue;if(i!==null){var c=n.stateNode;try{sy(i,c)}catch(f){bt(n,n.return,f)}}}function px(n,i,c){c.props=$a(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(f){bt(n,i,f)}}function fl(n,i){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var f=n.stateNode;break;case 30:f=n.stateNode;break;default:f=n.stateNode}typeof c=="function"?n.refCleanup=c(f):c.current=f}}catch(v){bt(n,i,v)}}function Gs(n,i){var c=n.ref,f=n.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(v){bt(n,i,v)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){bt(n,i,v)}else c.current=null}function mx(n){var i=n.type,c=n.memoizedProps,f=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(v){bt(n,n.return,v)}}function kf(n,i,c){try{var f=n.stateNode;D2(f,n.type,c,i),f[Ln]=i}catch(v){bt(n,n.return,v)}}function gx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&da(n.type)||n.tag===4}function Of(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&da(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Lf(n,i,c){var f=n.tag;if(f===5||f===6)n=n.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(n),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=pi));else if(f!==4&&(f===27&&da(n.type)&&(c=n.stateNode,i=null),n=n.child,n!==null))for(Lf(n,i,c),n=n.sibling;n!==null;)Lf(n,i,c),n=n.sibling}function tu(n,i,c){var f=n.tag;if(f===5||f===6)n=n.stateNode,i?c.insertBefore(n,i):c.appendChild(n);else if(f!==4&&(f===27&&da(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(tu(n,i,c),n=n.sibling;n!==null;)tu(n,i,c),n=n.sibling}function vx(n){var i=n.stateNode,c=n.memoizedProps;try{for(var f=n.type,v=i.attributes;v.length;)i.removeAttributeNode(v[0]);bn(i,f,c),i[gn]=n,i[Ln]=c}catch(x){bt(n,n.return,x)}}var Ci=!1,Zt=!1,Pf=!1,yx=typeof WeakSet=="function"?WeakSet:Set,un=null;function d2(n,i){if(n=n.containerInfo,sp=Su,n=Mv(n),Nh(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,x=f.focusNode;f=f.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var _=0,D=-1,V=-1,J=0,le=0,he=n,ee=null;t:for(;;){for(var ne;he!==c||v!==0&&he.nodeType!==3||(D=_+v),he!==x||f!==0&&he.nodeType!==3||(V=_+f),he.nodeType===3&&(_+=he.nodeValue.length),(ne=he.firstChild)!==null;)ee=he,he=ne;for(;;){if(he===n)break t;if(ee===c&&++J===v&&(D=_),ee===x&&++le===f&&(V=_),(ne=he.nextSibling)!==null)break;he=ee,ee=he.parentNode}he=ne}c=D===-1||V===-1?null:{start:D,end:V}}else c=null}c=c||{start:0,end:0}}else c=null;for(ip={focusedElem:n,selectionRange:c},Su=!1,un=i;un!==null;)if(i=un,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,un=n;else for(;un!==null;){switch(i=un,x=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(c=0;c<n.length;c++)v=n[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&x!==null){n=void 0,c=i,v=x.memoizedProps,x=x.memoizedState,f=c.stateNode;try{var Te=$a(c.type,v);n=f.getSnapshotBeforeUpdate(Te,x),f.__reactInternalSnapshotBeforeUpdate=n}catch(Fe){bt(c,c.return,Fe)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,c=n.nodeType,c===9)op(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":op(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,un=n;break}un=i.return}}function xx(n,i,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:_i(n,c),f&4&&hl(5,c);break;case 1:if(_i(n,c),f&4)if(n=c.stateNode,i===null)try{n.componentDidMount()}catch(_){bt(c,c.return,_)}else{var v=$a(c.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(v,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){bt(c,c.return,_)}}f&64&&fx(c),f&512&&fl(c,c.return);break;case 3:if(_i(n,c),f&64&&(n=c.updateQueue,n!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{sy(n,i)}catch(_){bt(c,c.return,_)}}break;case 27:i===null&&f&4&&vx(c);case 26:case 5:_i(n,c),i===null&&f&4&&mx(c),f&512&&fl(c,c.return);break;case 12:_i(n,c);break;case 31:_i(n,c),f&4&&Sx(n,c);break;case 13:_i(n,c),f&4&&Ax(n,c),f&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=b2.bind(null,c),F2(n,c))));break;case 22:if(f=c.memoizedState!==null||Ci,!f){i=i!==null&&i.memoizedState!==null||Zt,v=Ci;var x=Zt;Ci=f,(Zt=i)&&!x?Ti(n,c,(c.subtreeFlags&8772)!==0):_i(n,c),Ci=v,Zt=x}break;case 30:break;default:_i(n,c)}}function bx(n){var i=n.alternate;i!==null&&(n.alternate=null,bx(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&dh(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Rt=null,In=!1;function Ei(n,i,c){for(c=c.child;c!==null;)wx(n,i,c),c=c.sibling}function wx(n,i,c){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(di,c)}catch{}switch(c.tag){case 26:Zt||Gs(c,i),Ei(n,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Zt||Gs(c,i);var f=Rt,v=In;da(c.type)&&(Rt=c.stateNode,In=!1),Ei(n,i,c),Sl(c.stateNode),Rt=f,In=v;break;case 5:Zt||Gs(c,i);case 6:if(f=Rt,v=In,Rt=null,Ei(n,i,c),Rt=f,In=v,Rt!==null)if(In)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(c.stateNode)}catch(x){bt(c,i,x)}else try{Rt.removeChild(c.stateNode)}catch(x){bt(c,i,x)}break;case 18:Rt!==null&&(In?(n=Rt,fb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),Wr(n)):fb(Rt,c.stateNode));break;case 4:f=Rt,v=In,Rt=c.stateNode.containerInfo,In=!0,Ei(n,i,c),Rt=f,In=v;break;case 0:case 11:case 14:case 15:ia(2,c,i),Zt||ia(4,c,i),Ei(n,i,c);break;case 1:Zt||(Gs(c,i),f=c.stateNode,typeof f.componentWillUnmount=="function"&&px(c,i,f)),Ei(n,i,c);break;case 21:Ei(n,i,c);break;case 22:Zt=(f=Zt)||c.memoizedState!==null,Ei(n,i,c),Zt=f;break;default:Ei(n,i,c)}}function Sx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Wr(n)}catch(c){bt(i,i.return,c)}}}function Ax(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Wr(n)}catch(c){bt(i,i.return,c)}}function h2(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new yx),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new yx),i;default:throw Error(s(435,n.tag))}}function nu(n,i){var c=h2(n);i.forEach(function(f){if(!c.has(f)){c.add(f);var v=w2.bind(null,n,f);f.then(v,v)}})}function Bn(n,i){var c=i.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f],x=n,_=i,D=_;e:for(;D!==null;){switch(D.tag){case 27:if(da(D.type)){Rt=D.stateNode,In=!1;break e}break;case 5:Rt=D.stateNode,In=!1;break e;case 3:case 4:Rt=D.stateNode.containerInfo,In=!0;break e}D=D.return}if(Rt===null)throw Error(s(160));wx(x,_,v),Rt=null,In=!1,x=v.alternate,x!==null&&(x.return=null),v.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Cx(i,n),i=i.sibling}var Ms=null;function Cx(n,i){var c=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Bn(i,n),zn(n),f&4&&(ia(3,n,n.return),hl(3,n),ia(5,n,n.return));break;case 1:Bn(i,n),zn(n),f&512&&(Zt||c===null||Gs(c,c.return)),f&64&&Ci&&(n=n.updateQueue,n!==null&&(f=n.callbacks,f!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var v=Ms;if(Bn(i,n),zn(n),f&512&&(Zt||c===null||Gs(c,c.return)),f&4){var x=c!==null?c.memoizedState:null;if(f=n.memoizedState,c===null)if(f===null)if(n.stateNode===null){e:{f=n.type,c=n.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":x=v.getElementsByTagName("title")[0],(!x||x[Fo]||x[gn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=v.createElement(f),v.head.insertBefore(x,v.querySelector("head > title"))),bn(x,f,c),x[gn]=n,cn(x),f=x;break e;case"link":var _=Cb("link","href",v).get(f+(c.href||""));if(_){for(var D=0;D<_.length;D++)if(x=_[D],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){_.splice(D,1);break t}}x=v.createElement(f),bn(x,f,c),v.head.appendChild(x);break;case"meta":if(_=Cb("meta","content",v).get(f+(c.content||""))){for(D=0;D<_.length;D++)if(x=_[D],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){_.splice(D,1);break t}}x=v.createElement(f),bn(x,f,c),v.head.appendChild(x);break;default:throw Error(s(468,f))}x[gn]=n,cn(x),f=x}n.stateNode=f}else Eb(v,n.type,n.stateNode);else n.stateNode=Ab(v,f,n.memoizedProps);else x!==f?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,f===null?Eb(v,n.type,n.stateNode):Ab(v,f,n.memoizedProps)):f===null&&n.stateNode!==null&&kf(n,n.memoizedProps,c.memoizedProps)}break;case 27:Bn(i,n),zn(n),f&512&&(Zt||c===null||Gs(c,c.return)),c!==null&&f&4&&kf(n,n.memoizedProps,c.memoizedProps);break;case 5:if(Bn(i,n),zn(n),f&512&&(Zt||c===null||Gs(c,c.return)),n.flags&32){v=n.stateNode;try{yr(v,"")}catch(Te){bt(n,n.return,Te)}}f&4&&n.stateNode!=null&&(v=n.memoizedProps,kf(n,v,c!==null?c.memoizedProps:v)),f&1024&&(Pf=!0);break;case 6:if(Bn(i,n),zn(n),f&4){if(n.stateNode===null)throw Error(s(162));f=n.memoizedProps,c=n.stateNode;try{c.nodeValue=f}catch(Te){bt(n,n.return,Te)}}break;case 3:if(yu=null,v=Ms,Ms=gu(i.containerInfo),Bn(i,n),Ms=v,zn(n),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Wr(i.containerInfo)}catch(Te){bt(n,n.return,Te)}Pf&&(Pf=!1,Ex(n));break;case 4:f=Ms,Ms=gu(n.stateNode.containerInfo),Bn(i,n),zn(n),Ms=f;break;case 12:Bn(i,n),zn(n);break;case 31:Bn(i,n),zn(n),f&4&&(f=n.updateQueue,f!==null&&(n.updateQueue=null,nu(n,f)));break;case 13:Bn(i,n),zn(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(iu=Qe()),f&4&&(f=n.updateQueue,f!==null&&(n.updateQueue=null,nu(n,f)));break;case 22:v=n.memoizedState!==null;var V=c!==null&&c.memoizedState!==null,J=Ci,le=Zt;if(Ci=J||v,Zt=le||V,Bn(i,n),Zt=le,Ci=J,zn(n),f&8192)e:for(i=n.stateNode,i._visibility=v?i._visibility&-2:i._visibility|1,v&&(c===null||V||Ci||Zt||Ga(n)),c=null,i=n;;){if(i.tag===5||i.tag===26){if(c===null){V=c=i;try{if(x=V.stateNode,v)_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{D=V.stateNode;var he=V.memoizedProps.style,ee=he!=null&&he.hasOwnProperty("display")?he.display:null;D.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Te){bt(V,V.return,Te)}}}else if(i.tag===6){if(c===null){V=i;try{V.stateNode.nodeValue=v?"":V.memoizedProps}catch(Te){bt(V,V.return,Te)}}}else if(i.tag===18){if(c===null){V=i;try{var ne=V.stateNode;v?pb(ne,!0):pb(V.stateNode,!1)}catch(Te){bt(V,V.return,Te)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}f&4&&(f=n.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,nu(n,c))));break;case 19:Bn(i,n),zn(n),f&4&&(f=n.updateQueue,f!==null&&(n.updateQueue=null,nu(n,f)));break;case 30:break;case 21:break;default:Bn(i,n),zn(n)}}function zn(n){var i=n.flags;if(i&2){try{for(var c,f=n.return;f!==null;){if(gx(f)){c=f;break}f=f.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var v=c.stateNode,x=Of(n);tu(n,x,v);break;case 5:var _=c.stateNode;c.flags&32&&(yr(_,""),c.flags&=-33);var D=Of(n);tu(n,D,_);break;case 3:case 4:var V=c.stateNode.containerInfo,J=Of(n);Lf(n,J,V);break;default:throw Error(s(161))}}catch(le){bt(n,n.return,le)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Ex(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Ex(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function _i(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)xx(n,i.alternate,i),i=i.sibling}function Ga(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:ia(4,i,i.return),Ga(i);break;case 1:Gs(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&px(i,i.return,c),Ga(i);break;case 27:Sl(i.stateNode);case 26:case 5:Gs(i,i.return),Ga(i);break;case 22:i.memoizedState===null&&Ga(i);break;case 30:Ga(i);break;default:Ga(i)}n=n.sibling}}function Ti(n,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var f=i.alternate,v=n,x=i,_=x.flags;switch(x.tag){case 0:case 11:case 15:Ti(v,x,c),hl(4,x);break;case 1:if(Ti(v,x,c),f=x,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(J){bt(f,f.return,J)}if(f=x,v=f.updateQueue,v!==null){var D=f.stateNode;try{var V=v.shared.hiddenCallbacks;if(V!==null)for(v.shared.hiddenCallbacks=null,v=0;v<V.length;v++)ny(V[v],D)}catch(J){bt(f,f.return,J)}}c&&_&64&&fx(x),fl(x,x.return);break;case 27:vx(x);case 26:case 5:Ti(v,x,c),c&&f===null&&_&4&&mx(x),fl(x,x.return);break;case 12:Ti(v,x,c);break;case 31:Ti(v,x,c),c&&_&4&&Sx(v,x);break;case 13:Ti(v,x,c),c&&_&4&&Ax(v,x);break;case 22:x.memoizedState===null&&Ti(v,x,c),fl(x,x.return);break;case 30:break;default:Ti(v,x,c)}i=i.sibling}}function If(n,i){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&Jo(c))}function Bf(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Jo(n))}function Rs(n,i,c,f){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_x(n,i,c,f),i=i.sibling}function _x(n,i,c,f){var v=i.flags;switch(i.tag){case 0:case 11:case 15:Rs(n,i,c,f),v&2048&&hl(9,i);break;case 1:Rs(n,i,c,f);break;case 3:Rs(n,i,c,f),v&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Jo(n)));break;case 12:if(v&2048){Rs(n,i,c,f),n=i.stateNode;try{var x=i.memoizedProps,_=x.id,D=x.onPostCommit;typeof D=="function"&&D(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(V){bt(i,i.return,V)}}else Rs(n,i,c,f);break;case 31:Rs(n,i,c,f);break;case 13:Rs(n,i,c,f);break;case 23:break;case 22:x=i.stateNode,_=i.alternate,i.memoizedState!==null?x._visibility&2?Rs(n,i,c,f):pl(n,i):x._visibility&2?Rs(n,i,c,f):(x._visibility|=2,Br(n,i,c,f,(i.subtreeFlags&10256)!==0||!1)),v&2048&&If(_,i);break;case 24:Rs(n,i,c,f),v&2048&&Bf(i.alternate,i);break;default:Rs(n,i,c,f)}}function Br(n,i,c,f,v){for(v=v&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var x=n,_=i,D=c,V=f,J=_.flags;switch(_.tag){case 0:case 11:case 15:Br(x,_,D,V,v),hl(8,_);break;case 23:break;case 22:var le=_.stateNode;_.memoizedState!==null?le._visibility&2?Br(x,_,D,V,v):pl(x,_):(le._visibility|=2,Br(x,_,D,V,v)),v&&J&2048&&If(_.alternate,_);break;case 24:Br(x,_,D,V,v),v&&J&2048&&Bf(_.alternate,_);break;default:Br(x,_,D,V,v)}i=i.sibling}}function pl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=n,f=i,v=f.flags;switch(f.tag){case 22:pl(c,f),v&2048&&If(f.alternate,f);break;case 24:pl(c,f),v&2048&&Bf(f.alternate,f);break;default:pl(c,f)}i=i.sibling}}var ml=8192;function zr(n,i,c){if(n.subtreeFlags&ml)for(n=n.child;n!==null;)Tx(n,i,c),n=n.sibling}function Tx(n,i,c){switch(n.tag){case 26:zr(n,i,c),n.flags&ml&&n.memoizedState!==null&&Z2(c,Ms,n.memoizedState,n.memoizedProps);break;case 5:zr(n,i,c);break;case 3:case 4:var f=Ms;Ms=gu(n.stateNode.containerInfo),zr(n,i,c),Ms=f;break;case 22:n.memoizedState===null&&(f=n.alternate,f!==null&&f.memoizedState!==null?(f=ml,ml=16777216,zr(n,i,c),ml=f):zr(n,i,c));break;default:zr(n,i,c)}}function Nx(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function gl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var f=i[c];un=f,Mx(f,n)}Nx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jx(n),n=n.sibling}function jx(n){switch(n.tag){case 0:case 11:case 15:gl(n),n.flags&2048&&ia(9,n,n.return);break;case 3:gl(n);break;case 12:gl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,su(n)):gl(n);break;default:gl(n)}}function su(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var f=i[c];un=f,Mx(f,n)}Nx(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:ia(8,i,i.return),su(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,su(i));break;default:su(i)}n=n.sibling}}function Mx(n,i){for(;un!==null;){var c=un;switch(c.tag){case 0:case 11:case 15:ia(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Jo(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,un=f;else e:for(c=n;un!==null;){f=un;var v=f.sibling,x=f.return;if(bx(f),f===c){un=null;break e}if(v!==null){v.return=x,un=v;break e}un=x}}}var f2={getCacheForType:function(n){var i=yn(Wt),c=i.data.get(n);return c===void 0&&(c=n(),i.data.set(n,c)),c},cacheSignal:function(){return yn(Wt).controller.signal}},p2=typeof WeakMap=="function"?WeakMap:Map,pt=0,Et=null,nt=null,it=0,xt=0,es=null,aa=!1,Fr=!1,zf=!1,Ni=0,Ft=0,ra=0,qa=0,Ff=0,ts=0,Hr=0,vl=null,Fn=null,Hf=!1,iu=0,Rx=0,au=1/0,ru=null,oa=null,en=0,la=null,Ur=null,ji=0,Uf=0,Vf=null,Dx=null,yl=0,$f=null;function ns(){return(pt&2)!==0&&it!==0?it&-it:R.T!==null?Kf():ch()}function kx(){if(ts===0)if((it&536870912)===0||lt){var n=qi;qi<<=1,(qi&3932160)===0&&(qi=262144),ts=n}else ts=536870912;return n=Zn.current,n!==null&&(n.flags|=32),ts}function Hn(n,i,c){(n===Et&&(xt===2||xt===9)||n.cancelPendingCommit!==null)&&(Vr(n,0),ca(n,it,ts,!1)),ot(n,c),((pt&2)===0||n!==Et)&&(n===Et&&((pt&2)===0&&(qa|=c),Ft===4&&ca(n,it,ts,!1)),qs(n))}function Ox(n,i,c){if((pt&6)!==0)throw Error(s(327));var f=!c&&(i&127)===0&&(i&n.expiredLanes)===0||ge(n,i),v=f?v2(n,i):qf(n,i,!0),x=f;do{if(v===0){Fr&&!f&&ca(n,i,0,!1);break}else{if(c=n.current.alternate,x&&!m2(c)){v=qf(n,i,!1),x=!1;continue}if(v===2){if(x=i,n.errorRecoveryDisabledLanes&x)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var D=n;v=vl;var V=D.current.memoizedState.isDehydrated;if(V&&(Vr(D,_).flags|=256),_=qf(D,_,!1),_!==2){if(zf&&!V){D.errorRecoveryDisabledLanes|=x,qa|=x,v=4;break e}x=Fn,Fn=v,x!==null&&(Fn===null?Fn=x:Fn.push.apply(Fn,x))}v=_}if(x=!1,v!==2)continue}}if(v===1){Vr(n,0),ca(n,i,0,!0);break}e:{switch(f=n,x=v,x){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ca(f,i,ts,!aa);break e;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(v=iu+300-Qe(),10<v)){if(ca(f,i,ts,!aa),$e(f,0,!0)!==0)break e;ji=i,f.timeoutHandle=db(Lx.bind(null,f,c,Fn,ru,Hf,i,ts,qa,Hr,aa,x,"Throttled",-0,0),v);break e}Lx(f,c,Fn,ru,Hf,i,ts,qa,Hr,aa,x,null,-0,0)}}break}while(!0);qs(n)}function Lx(n,i,c,f,v,x,_,D,V,J,le,he,ee,ne){if(n.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pi},Tx(i,x,he);var Te=(x&62914560)===x?iu-Qe():(x&4194048)===x?Rx-Qe():0;if(Te=J2(he,Te),Te!==null){ji=x,n.cancelPendingCommit=Te(Vx.bind(null,n,i,x,c,f,v,_,D,V,le,he,null,ee,ne)),ca(n,x,_,!J);return}}Vx(n,i,x,c,f,v,_,D,V)}function m2(n){for(var i=n;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var v=c[f],x=v.getSnapshot;v=v.value;try{if(!Kn(x(),v))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ca(n,i,c,f){i&=~Ff,i&=~qa,n.suspendedLanes|=i,n.pingedLanes&=~i,f&&(n.warmLanes|=i),f=n.expirationTimes;for(var v=i;0<v;){var x=31-on(v),_=1<<x;f[x]=-1,v&=~_}c!==0&&Us(n,c,i)}function ou(){return(pt&6)===0?(xl(0),!1):!0}function Gf(){if(nt!==null){if(xt===0)var n=nt.return;else n=nt,yi=Ia=null,of(n),kr=null,tl=0,n=nt;for(;n!==null;)hx(n.alternate,n),n=n.return;nt=null}}function Vr(n,i){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,L2(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),ji=0,Gf(),Et=n,nt=c=gi(n.current,null),it=i,xt=0,es=null,aa=!1,Fr=ge(n,i),zf=!1,Hr=ts=Ff=qa=ra=Ft=0,Fn=vl=null,Hf=!1,(i&8)!==0&&(i|=i&32);var f=n.entangledLanes;if(f!==0)for(n=n.entanglements,f&=i;0<f;){var v=31-on(f),x=1<<v;i|=n[v],f&=~x}return Ni=i,Nc(),c}function Px(n,i){Ke=null,R.H=cl,i===Dr||i===Pc?(i=Zv(),xt=3):i===Xh?(i=Zv(),xt=4):xt=i===Af?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,es=i,nt===null&&(Ft=1,Kc(n,ms(i,n.current)))}function Ix(){var n=Zn.current;return n===null?!0:(it&4194048)===it?xs===null:(it&62914560)===it||(it&536870912)!==0?n===xs:!1}function Bx(){var n=R.H;return R.H=cl,n===null?cl:n}function zx(){var n=R.A;return R.A=f2,n}function lu(){Ft=4,aa||(it&4194048)!==it&&Zn.current!==null||(Fr=!0),(ra&134217727)===0&&(qa&134217727)===0||Et===null||ca(Et,it,ts,!1)}function qf(n,i,c){var f=pt;pt|=2;var v=Bx(),x=zx();(Et!==n||it!==i)&&(ru=null,Vr(n,i)),i=!1;var _=Ft;e:do try{if(xt!==0&&nt!==null){var D=nt,V=es;switch(xt){case 8:Gf(),_=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(i=!0);var J=xt;if(xt=0,es=null,$r(n,D,V,J),c&&Fr){_=0;break e}break;default:J=xt,xt=0,es=null,$r(n,D,V,J)}}g2(),_=Ft;break}catch(le){Px(n,le)}while(!0);return i&&n.shellSuspendCounter++,yi=Ia=null,pt=f,R.H=v,R.A=x,nt===null&&(Et=null,it=0,Nc()),_}function g2(){for(;nt!==null;)Fx(nt)}function v2(n,i){var c=pt;pt|=2;var f=Bx(),v=zx();Et!==n||it!==i?(ru=null,au=Qe()+500,Vr(n,i)):Fr=ge(n,i);e:do try{if(xt!==0&&nt!==null){i=nt;var x=es;t:switch(xt){case 1:xt=0,es=null,$r(n,i,x,1);break;case 2:case 9:if(Kv(x)){xt=0,es=null,Hx(i);break}i=function(){xt!==2&&xt!==9||Et!==n||(xt=7),qs(n)},x.then(i,i);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:Kv(x)?(xt=0,es=null,Hx(i)):(xt=0,es=null,$r(n,i,x,7));break;case 5:var _=null;switch(nt.tag){case 26:_=nt.memoizedState;case 5:case 27:var D=nt;if(_?_b(_):D.stateNode.complete){xt=0,es=null;var V=D.sibling;if(V!==null)nt=V;else{var J=D.return;J!==null?(nt=J,cu(J)):nt=null}break t}}xt=0,es=null,$r(n,i,x,5);break;case 6:xt=0,es=null,$r(n,i,x,6);break;case 8:Gf(),Ft=6;break e;default:throw Error(s(462))}}y2();break}catch(le){Px(n,le)}while(!0);return yi=Ia=null,R.H=f,R.A=v,pt=c,nt!==null?0:(Et=null,it=0,Nc(),Ft)}function y2(){for(;nt!==null&&!gt();)Fx(nt)}function Fx(n){var i=ux(n.alternate,n,Ni);n.memoizedProps=n.pendingProps,i===null?cu(n):nt=i}function Hx(n){var i=n,c=i.alternate;switch(i.tag){case 15:case 0:i=ix(c,i,i.pendingProps,i.type,void 0,it);break;case 11:i=ix(c,i,i.pendingProps,i.type.render,i.ref,it);break;case 5:of(i);default:hx(c,i),i=nt=zv(i,Ni),i=ux(c,i,Ni)}n.memoizedProps=n.pendingProps,i===null?cu(n):nt=i}function $r(n,i,c,f){yi=Ia=null,of(i),kr=null,tl=0;var v=i.return;try{if(r2(n,v,i,c,it)){Ft=1,Kc(n,ms(c,n.current)),nt=null;return}}catch(x){if(v!==null)throw nt=v,x;Ft=1,Kc(n,ms(c,n.current)),nt=null;return}i.flags&32768?(lt||f===1?n=!0:Fr||(it&536870912)!==0?n=!1:(aa=n=!0,(f===2||f===9||f===3||f===6)&&(f=Zn.current,f!==null&&f.tag===13&&(f.flags|=16384))),Ux(i,n)):cu(i)}function cu(n){var i=n;do{if((i.flags&32768)!==0){Ux(i,aa);return}n=i.return;var c=c2(i.alternate,i,Ni);if(c!==null){nt=c;return}if(i=i.sibling,i!==null){nt=i;return}nt=i=n}while(i!==null);Ft===0&&(Ft=5)}function Ux(n,i){do{var c=u2(n.alternate,n);if(c!==null){c.flags&=32767,nt=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(n=n.sibling,n!==null)){nt=n;return}nt=n=c}while(n!==null);Ft=6,nt=null}function Vx(n,i,c,f,v,x,_,D,V){n.cancelPendingCommit=null;do uu();while(en!==0);if((pt&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(x=i.lanes|i.childLanes,x|=kh,_n(n,c,x,_,D,V),n===Et&&(nt=Et=null,it=0),Ur=i,la=n,ji=c,Uf=x,Vf=v,Dx=f,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,S2(vt,function(){return Xx(),null})):(n.callbackNode=null,n.callbackPriority=0),f=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||f){f=R.T,R.T=null,v=U.p,U.p=2,_=pt,pt|=4;try{d2(n,i,c)}finally{pt=_,U.p=v,R.T=f}}en=1,$x(),Gx(),qx()}}function $x(){if(en===1){en=0;var n=la,i=Ur,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=R.T,R.T=null;var f=U.p;U.p=2;var v=pt;pt|=4;try{Cx(i,n);var x=ip,_=Mv(n.containerInfo),D=x.focusedElem,V=x.selectionRange;if(_!==D&&D&&D.ownerDocument&&jv(D.ownerDocument.documentElement,D)){if(V!==null&&Nh(D)){var J=V.start,le=V.end;if(le===void 0&&(le=J),"selectionStart"in D)D.selectionStart=J,D.selectionEnd=Math.min(le,D.value.length);else{var he=D.ownerDocument||document,ee=he&&he.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),Te=D.textContent.length,Fe=Math.min(V.start,Te),At=V.end===void 0?Fe:Math.min(V.end,Te);!ne.extend&&Fe>At&&(_=At,At=Fe,Fe=_);var W=Nv(D,Fe),G=Nv(D,At);if(W&&G&&(ne.rangeCount!==1||ne.anchorNode!==W.node||ne.anchorOffset!==W.offset||ne.focusNode!==G.node||ne.focusOffset!==G.offset)){var Z=he.createRange();Z.setStart(W.node,W.offset),ne.removeAllRanges(),Fe>At?(ne.addRange(Z),ne.extend(G.node,G.offset)):(Z.setEnd(G.node,G.offset),ne.addRange(Z))}}}}for(he=[],ne=D;ne=ne.parentNode;)ne.nodeType===1&&he.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<he.length;D++){var de=he[D];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Su=!!sp,ip=sp=null}finally{pt=v,U.p=f,R.T=c}}n.current=i,en=2}}function Gx(){if(en===2){en=0;var n=la,i=Ur,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=R.T,R.T=null;var f=U.p;U.p=2;var v=pt;pt|=4;try{xx(n,i.alternate,i)}finally{pt=v,U.p=f,R.T=c}}en=3}}function qx(){if(en===4||en===3){en=0,ve();var n=la,i=Ur,c=ji,f=Dx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?en=5:(en=0,Ur=la=null,Yx(n,n.pendingLanes));var v=n.pendingLanes;if(v===0&&(oa=null),Ns(c),i=i.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(di,i,void 0,(i.current.flags&128)===128)}catch{}if(f!==null){i=R.T,v=U.p,U.p=2,R.T=null;try{for(var x=n.onRecoverableError,_=0;_<f.length;_++){var D=f[_];x(D.value,{componentStack:D.stack})}}finally{R.T=i,U.p=v}}(ji&3)!==0&&uu(),qs(n),v=n.pendingLanes,(c&261930)!==0&&(v&42)!==0?n===$f?yl++:(yl=0,$f=n):yl=0,xl(0)}}function Yx(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Jo(i)))}function uu(){return $x(),Gx(),qx(),Xx()}function Xx(){if(en!==5)return!1;var n=la,i=Uf;Uf=0;var c=Ns(ji),f=R.T,v=U.p;try{U.p=32>c?32:c,R.T=null,c=Vf,Vf=null;var x=la,_=ji;if(en=0,Ur=la=null,ji=0,(pt&6)!==0)throw Error(s(331));var D=pt;if(pt|=4,jx(x.current),_x(x,x.current,_,c),pt=D,xl(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(di,x)}catch{}return!0}finally{U.p=v,R.T=f,Yx(n,i)}}function Wx(n,i,c){i=ms(c,i),i=Sf(n.stateNode,i,2),n=ta(n,i,2),n!==null&&(ot(n,2),qs(n))}function bt(n,i,c){if(n.tag===3)Wx(n,n,c);else for(;i!==null;){if(i.tag===3){Wx(i,n,c);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(oa===null||!oa.has(f))){n=ms(c,n),c=Ky(2),f=ta(i,c,2),f!==null&&(Qy(c,f,i,n),ot(f,2),qs(f));break}}i=i.return}}function Yf(n,i,c){var f=n.pingCache;if(f===null){f=n.pingCache=new p2;var v=new Set;f.set(i,v)}else v=f.get(i),v===void 0&&(v=new Set,f.set(i,v));v.has(c)||(zf=!0,v.add(c),n=x2.bind(null,n,i,c),i.then(n,n))}function x2(n,i,c){var f=n.pingCache;f!==null&&f.delete(i),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,Et===n&&(it&c)===c&&(Ft===4||Ft===3&&(it&62914560)===it&&300>Qe()-iu?(pt&2)===0&&Vr(n,0):Ff|=c,Hr===it&&(Hr=0)),qs(n)}function Kx(n,i){i===0&&(i=Ue()),n=Oa(n,i),n!==null&&(ot(n,i),qs(n))}function b2(n){var i=n.memoizedState,c=0;i!==null&&(c=i.retryLane),Kx(n,c)}function w2(n,i){var c=0;switch(n.tag){case 31:case 13:var f=n.stateNode,v=n.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=n.stateNode;break;case 22:f=n.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(i),Kx(n,c)}function S2(n,i){return Bt(n,i)}var du=null,Gr=null,Xf=!1,hu=!1,Wf=!1,ua=0;function qs(n){n!==Gr&&n.next===null&&(Gr===null?du=Gr=n:Gr=Gr.next=n),hu=!0,Xf||(Xf=!0,C2())}function xl(n,i){if(!Wf&&hu){Wf=!0;do for(var c=!1,f=du;f!==null;){if(n!==0){var v=f.pendingLanes;if(v===0)var x=0;else{var _=f.suspendedLanes,D=f.pingedLanes;x=(1<<31-on(42|n)+1)-1,x&=v&~(_&~D),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,eb(f,x))}else x=it,x=$e(f,f===Et?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(x&3)===0||ge(f,x)||(c=!0,eb(f,x));f=f.next}while(c);Wf=!1}}function A2(){Qx()}function Qx(){hu=Xf=!1;var n=0;ua!==0&&O2()&&(n=ua);for(var i=Qe(),c=null,f=du;f!==null;){var v=f.next,x=Zx(f,i);x===0?(f.next=null,c===null?du=v:c.next=v,v===null&&(Gr=c)):(c=f,(n!==0||(x&3)!==0)&&(hu=!0)),f=v}en!==0&&en!==5||xl(n),ua!==0&&(ua=0)}function Zx(n,i){for(var c=n.suspendedLanes,f=n.pingedLanes,v=n.expirationTimes,x=n.pendingLanes&-62914561;0<x;){var _=31-on(x),D=1<<_,V=v[_];V===-1?((D&c)===0||(D&f)!==0)&&(v[_]=ze(D,i)):V<=i&&(n.expiredLanes|=D),x&=~D}if(i=Et,c=it,c=$e(n,n===i?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),f=n.callbackNode,c===0||n===i&&(xt===2||xt===9)||n.cancelPendingCommit!==null)return f!==null&&f!==null&&mt(f),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||ge(n,c)){if(i=c&-c,i===n.callbackPriority)return i;switch(f!==null&&mt(f),Ns(c)){case 2:case 8:c=He;break;case 32:c=vt;break;case 268435456:c=Nt;break;default:c=vt}return f=Jx.bind(null,n),c=Bt(c,f),n.callbackPriority=i,n.callbackNode=c,i}return f!==null&&f!==null&&mt(f),n.callbackPriority=2,n.callbackNode=null,2}function Jx(n,i){if(en!==0&&en!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(uu()&&n.callbackNode!==c)return null;var f=it;return f=$e(n,n===Et?f:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),f===0?null:(Ox(n,f,i),Zx(n,Qe()),n.callbackNode!=null&&n.callbackNode===c?Jx.bind(null,n):null)}function eb(n,i){if(uu())return null;Ox(n,i,!0)}function C2(){P2(function(){(pt&6)!==0?Bt(we,A2):Qx()})}function Kf(){if(ua===0){var n=Mr;n===0&&(n=Gi,Gi<<=1,(Gi&261888)===0&&(Gi=256)),ua=n}return ua}function tb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:bc(""+n)}function nb(n,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,n.id&&c.setAttribute("form",n.id),i.parentNode.insertBefore(c,i),n=new FormData(n),c.parentNode.removeChild(c),n}function E2(n,i,c,f,v){if(i==="submit"&&c&&c.stateNode===v){var x=tb((v[Ln]||null).action),_=f.submitter;_&&(i=(i=_[Ln]||null)?tb(i.formAction):_.getAttribute("formAction"),i!==null&&(x=i,_=null));var D=new Cc("action","action",null,f,v);n.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(ua!==0){var V=_?nb(v,_):new FormData(v);gf(c,{pending:!0,data:V,method:v.method,action:x},null,V)}}else typeof x=="function"&&(D.preventDefault(),V=_?nb(v,_):new FormData(v),gf(c,{pending:!0,data:V,method:v.method,action:x},x,V))},currentTarget:v}]})}}for(var Qf=0;Qf<Dh.length;Qf++){var Zf=Dh[Qf],_2=Zf.toLowerCase(),T2=Zf[0].toUpperCase()+Zf.slice(1);js(_2,"on"+T2)}js(kv,"onAnimationEnd"),js(Ov,"onAnimationIteration"),js(Lv,"onAnimationStart"),js("dblclick","onDoubleClick"),js("focusin","onFocus"),js("focusout","onBlur"),js(V_,"onTransitionRun"),js($_,"onTransitionStart"),js(G_,"onTransitionCancel"),js(Pv,"onTransitionEnd"),gr("onMouseEnter",["mouseout","mouseover"]),gr("onMouseLeave",["mouseout","mouseover"]),gr("onPointerEnter",["pointerout","pointerover"]),gr("onPointerLeave",["pointerout","pointerover"]),Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bl));function sb(n,i){i=(i&4)!==0;for(var c=0;c<n.length;c++){var f=n[c],v=f.event;f=f.listeners;e:{var x=void 0;if(i)for(var _=f.length-1;0<=_;_--){var D=f[_],V=D.instance,J=D.currentTarget;if(D=D.listener,V!==x&&v.isPropagationStopped())break e;x=D,v.currentTarget=J;try{x(v)}catch(le){Tc(le)}v.currentTarget=null,x=V}else for(_=0;_<f.length;_++){if(D=f[_],V=D.instance,J=D.currentTarget,D=D.listener,V!==x&&v.isPropagationStopped())break e;x=D,v.currentTarget=J;try{x(v)}catch(le){Tc(le)}v.currentTarget=null,x=V}}}}function st(n,i){var c=i[uh];c===void 0&&(c=i[uh]=new Set);var f=n+"__bubble";c.has(f)||(ib(i,n,2,!1),c.add(f))}function Jf(n,i,c){var f=0;i&&(f|=4),ib(c,n,f,i)}var fu="_reactListening"+Math.random().toString(36).slice(2);function ep(n){if(!n[fu]){n[fu]=!0,Qg.forEach(function(c){c!=="selectionchange"&&(N2.has(c)||Jf(c,!1,n),Jf(c,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[fu]||(i[fu]=!0,Jf("selectionchange",!1,i))}}function ib(n,i,c,f){switch(kb(i)){case 2:var v=nT;break;case 8:v=sT;break;default:v=mp}c=v.bind(null,i,c,n),v=void 0,!xh||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(v=!0),f?v!==void 0?n.addEventListener(i,c,{capture:!0,passive:v}):n.addEventListener(i,c,!0):v!==void 0?n.addEventListener(i,c,{passive:v}):n.addEventListener(i,c,!1)}function tp(n,i,c,f,v){var x=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var _=f.tag;if(_===3||_===4){var D=f.stateNode.containerInfo;if(D===v)break;if(_===4)for(_=f.return;_!==null;){var V=_.tag;if((V===3||V===4)&&_.stateNode.containerInfo===v)return;_=_.return}for(;D!==null;){if(_=fr(D),_===null)return;if(V=_.tag,V===5||V===6||V===26||V===27){f=x=_;continue e}D=D.parentNode}}f=f.return}cv(function(){var J=x,le=vh(c),he=[];e:{var ee=Iv.get(n);if(ee!==void 0){var ne=Cc,Te=n;switch(n){case"keypress":if(Sc(c)===0)break e;case"keydown":case"keyup":ne=w_;break;case"focusin":Te="focus",ne=Ah;break;case"focusout":Te="blur",ne=Ah;break;case"beforeblur":case"afterblur":ne=Ah;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=hv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=c_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=C_;break;case kv:case Ov:case Lv:ne=h_;break;case Pv:ne=__;break;case"scroll":case"scrollend":ne=o_;break;case"wheel":ne=N_;break;case"copy":case"cut":case"paste":ne=p_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=pv;break;case"toggle":case"beforetoggle":ne=M_}var Fe=(i&4)!==0,At=!Fe&&(n==="scroll"||n==="scrollend"),W=Fe?ee!==null?ee+"Capture":null:ee;Fe=[];for(var G=J,Z;G!==null;){var de=G;if(Z=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||Z===null||W===null||(de=Uo(G,W),de!=null&&Fe.push(wl(G,de,Z))),At)break;G=G.return}0<Fe.length&&(ee=new ne(ee,Te,null,c,le),he.push({event:ee,listeners:Fe}))}}if((i&7)===0){e:{if(ee=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",ee&&c!==gh&&(Te=c.relatedTarget||c.fromElement)&&(fr(Te)||Te[hr]))break e;if((ne||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(Te=c.relatedTarget||c.toElement,ne=J,Te=Te?fr(Te):null,Te!==null&&(At=o(Te),Fe=Te.tag,Te!==At||Fe!==5&&Fe!==27&&Fe!==6)&&(Te=null)):(ne=null,Te=J),ne!==Te)){if(Fe=hv,de="onMouseLeave",W="onMouseEnter",G="mouse",(n==="pointerout"||n==="pointerover")&&(Fe=pv,de="onPointerLeave",W="onPointerEnter",G="pointer"),At=ne==null?ee:Ho(ne),Z=Te==null?ee:Ho(Te),ee=new Fe(de,G+"leave",ne,c,le),ee.target=At,ee.relatedTarget=Z,de=null,fr(le)===J&&(Fe=new Fe(W,G+"enter",Te,c,le),Fe.target=Z,Fe.relatedTarget=At,de=Fe),At=de,ne&&Te)t:{for(Fe=j2,W=ne,G=Te,Z=0,de=W;de;de=Fe(de))Z++;de=0;for(var ke=G;ke;ke=Fe(ke))de++;for(;0<Z-de;)W=Fe(W),Z--;for(;0<de-Z;)G=Fe(G),de--;for(;Z--;){if(W===G||G!==null&&W===G.alternate){Fe=W;break t}W=Fe(W),G=Fe(G)}Fe=null}else Fe=null;ne!==null&&ab(he,ee,ne,Fe,!1),Te!==null&&At!==null&&ab(he,At,Te,Fe,!0)}}e:{if(ee=J?Ho(J):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var dt=Sv;else if(bv(ee))if(Av)dt=F_;else{dt=B_;var Re=I_}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&mh(J.elementType)&&(dt=Sv):dt=z_;if(dt&&(dt=dt(n,J))){wv(he,dt,c,le);break e}Re&&Re(n,ee,J),n==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&ph(ee,"number",ee.value)}switch(Re=J?Ho(J):window,n){case"focusin":(bv(Re)||Re.contentEditable==="true")&&(Sr=Re,jh=J,Ko=null);break;case"focusout":Ko=jh=Sr=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,Rv(he,c,le);break;case"selectionchange":if(U_)break;case"keydown":case"keyup":Rv(he,c,le)}var Ze;if(Eh)e:{switch(n){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else wr?yv(n,c)&&(at="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(at="onCompositionStart");at&&(mv&&c.locale!=="ko"&&(wr||at!=="onCompositionStart"?at==="onCompositionEnd"&&wr&&(Ze=uv()):(Xi=le,bh="value"in Xi?Xi.value:Xi.textContent,wr=!0)),Re=pu(J,at),0<Re.length&&(at=new fv(at,n,null,c,le),he.push({event:at,listeners:Re}),Ze?at.data=Ze:(Ze=xv(c),Ze!==null&&(at.data=Ze)))),(Ze=D_?k_(n,c):O_(n,c))&&(at=pu(J,"onBeforeInput"),0<at.length&&(Re=new fv("onBeforeInput","beforeinput",null,c,le),he.push({event:Re,listeners:at}),Re.data=Ze)),E2(he,n,J,c,le)}sb(he,i)})}function wl(n,i,c){return{instance:n,listener:i,currentTarget:c}}function pu(n,i){for(var c=i+"Capture",f=[];n!==null;){var v=n,x=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||x===null||(v=Uo(n,c),v!=null&&f.unshift(wl(n,v,x)),v=Uo(n,i),v!=null&&f.push(wl(n,v,x))),n.tag===3)return f;n=n.return}return[]}function j2(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ab(n,i,c,f,v){for(var x=i._reactName,_=[];c!==null&&c!==f;){var D=c,V=D.alternate,J=D.stateNode;if(D=D.tag,V!==null&&V===f)break;D!==5&&D!==26&&D!==27||J===null||(V=J,v?(J=Uo(c,x),J!=null&&_.unshift(wl(c,J,V))):v||(J=Uo(c,x),J!=null&&_.push(wl(c,J,V)))),c=c.return}_.length!==0&&n.push({event:i,listeners:_})}var M2=/\r\n?/g,R2=/\u0000|\uFFFD/g;function rb(n){return(typeof n=="string"?n:""+n).replace(M2,`
`).replace(R2,"")}function ob(n,i){return i=rb(i),rb(n)===i}function St(n,i,c,f,v,x){switch(c){case"children":typeof f=="string"?i==="body"||i==="textarea"&&f===""||yr(n,f):(typeof f=="number"||typeof f=="bigint")&&i!=="body"&&yr(n,""+f);break;case"className":yc(n,"class",f);break;case"tabIndex":yc(n,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":yc(n,c,f);break;case"style":ov(n,f,x);break;case"data":if(i!=="object"){yc(n,"data",f);break}case"src":case"href":if(f===""&&(i!=="a"||c!=="href")){n.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){n.removeAttribute(c);break}f=bc(""+f),n.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(i!=="input"&&St(n,i,"name",v.name,v,null),St(n,i,"formEncType",v.formEncType,v,null),St(n,i,"formMethod",v.formMethod,v,null),St(n,i,"formTarget",v.formTarget,v,null)):(St(n,i,"encType",v.encType,v,null),St(n,i,"method",v.method,v,null),St(n,i,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){n.removeAttribute(c);break}f=bc(""+f),n.setAttribute(c,f);break;case"onClick":f!=null&&(n.onclick=pi);break;case"onScroll":f!=null&&st("scroll",n);break;case"onScrollEnd":f!=null&&st("scrollend",n);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"multiple":n.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":n.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){n.removeAttribute("xlink:href");break}c=bc(""+f),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(c,""+f):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":f===!0?n.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(c,f):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?n.setAttribute(c,f):n.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?n.removeAttribute(c):n.setAttribute(c,f);break;case"popover":st("beforetoggle",n),st("toggle",n),vc(n,"popover",f);break;case"xlinkActuate":fi(n,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":fi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":fi(n,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":fi(n,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":fi(n,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":fi(n,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":fi(n,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":fi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":fi(n,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":vc(n,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=a_.get(c)||c,vc(n,c,f))}}function np(n,i,c,f,v,x){switch(c){case"style":ov(n,f,x);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"children":typeof f=="string"?yr(n,f):(typeof f=="number"||typeof f=="bigint")&&yr(n,""+f);break;case"onScroll":f!=null&&st("scroll",n);break;case"onScrollEnd":f!=null&&st("scrollend",n);break;case"onClick":f!=null&&(n.onclick=pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zg.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),i=c.slice(2,v?c.length-7:void 0),x=n[Ln]||null,x=x!=null?x[c]:null,typeof x=="function"&&n.removeEventListener(i,x,v),typeof f=="function")){typeof x!="function"&&x!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(i,f,v);break e}c in n?n[c]=f:f===!0?n.setAttribute(c,""):vc(n,c,f)}}}function bn(n,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",n),st("load",n);var f=!1,v=!1,x;for(x in c)if(c.hasOwnProperty(x)){var _=c[x];if(_!=null)switch(x){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:St(n,i,x,_,c,null)}}v&&St(n,i,"srcSet",c.srcSet,c,null),f&&St(n,i,"src",c.src,c,null);return;case"input":st("invalid",n);var D=x=_=v=null,V=null,J=null;for(f in c)if(c.hasOwnProperty(f)){var le=c[f];if(le!=null)switch(f){case"name":v=le;break;case"type":_=le;break;case"checked":V=le;break;case"defaultChecked":J=le;break;case"value":x=le;break;case"defaultValue":D=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,i));break;default:St(n,i,f,le,c,null)}}sv(n,x,D,V,J,_,v,!1);return;case"select":st("invalid",n),f=_=x=null;for(v in c)if(c.hasOwnProperty(v)&&(D=c[v],D!=null))switch(v){case"value":x=D;break;case"defaultValue":_=D;break;case"multiple":f=D;default:St(n,i,v,D,c,null)}i=x,c=_,n.multiple=!!f,i!=null?vr(n,!!f,i,!1):c!=null&&vr(n,!!f,c,!0);return;case"textarea":st("invalid",n),x=v=f=null;for(_ in c)if(c.hasOwnProperty(_)&&(D=c[_],D!=null))switch(_){case"value":f=D;break;case"defaultValue":v=D;break;case"children":x=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(91));break;default:St(n,i,_,D,c,null)}av(n,f,v,x);return;case"option":for(V in c)c.hasOwnProperty(V)&&(f=c[V],f!=null)&&(V==="selected"?n.selected=f&&typeof f!="function"&&typeof f!="symbol":St(n,i,V,f,c,null));return;case"dialog":st("beforetoggle",n),st("toggle",n),st("cancel",n),st("close",n);break;case"iframe":case"object":st("load",n);break;case"video":case"audio":for(f=0;f<bl.length;f++)st(bl[f],n);break;case"image":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"embed":case"source":case"link":st("error",n),st("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(f=c[J],f!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:St(n,i,J,f,c,null)}return;default:if(mh(i)){for(le in c)c.hasOwnProperty(le)&&(f=c[le],f!==void 0&&np(n,i,le,f,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(f=c[D],f!=null&&St(n,i,D,f,c,null))}function D2(n,i,c,f){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,x=null,_=null,D=null,V=null,J=null,le=null;for(ne in c){var he=c[ne];if(c.hasOwnProperty(ne)&&he!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":V=he;default:f.hasOwnProperty(ne)||St(n,i,ne,null,f,he)}}for(var ee in f){var ne=f[ee];if(he=c[ee],f.hasOwnProperty(ee)&&(ne!=null||he!=null))switch(ee){case"type":x=ne;break;case"name":v=ne;break;case"checked":J=ne;break;case"defaultChecked":le=ne;break;case"value":_=ne;break;case"defaultValue":D=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,i));break;default:ne!==he&&St(n,i,ee,ne,f,he)}}fh(n,_,D,V,J,le,x,v);return;case"select":ne=_=D=ee=null;for(x in c)if(V=c[x],c.hasOwnProperty(x)&&V!=null)switch(x){case"value":break;case"multiple":ne=V;default:f.hasOwnProperty(x)||St(n,i,x,null,f,V)}for(v in f)if(x=f[v],V=c[v],f.hasOwnProperty(v)&&(x!=null||V!=null))switch(v){case"value":ee=x;break;case"defaultValue":D=x;break;case"multiple":_=x;default:x!==V&&St(n,i,v,x,f,V)}i=D,c=_,f=ne,ee!=null?vr(n,!!c,ee,!1):!!f!=!!c&&(i!=null?vr(n,!!c,i,!0):vr(n,!!c,c?[]:"",!1));return;case"textarea":ne=ee=null;for(D in c)if(v=c[D],c.hasOwnProperty(D)&&v!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:St(n,i,D,null,f,v)}for(_ in f)if(v=f[_],x=c[_],f.hasOwnProperty(_)&&(v!=null||x!=null))switch(_){case"value":ee=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==x&&St(n,i,_,v,f,x)}iv(n,ee,ne);return;case"option":for(var Te in c)ee=c[Te],c.hasOwnProperty(Te)&&ee!=null&&!f.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:St(n,i,Te,null,f,ee));for(V in f)ee=f[V],ne=c[V],f.hasOwnProperty(V)&&ee!==ne&&(ee!=null||ne!=null)&&(V==="selected"?n.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":St(n,i,V,ee,f,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in c)ee=c[Fe],c.hasOwnProperty(Fe)&&ee!=null&&!f.hasOwnProperty(Fe)&&St(n,i,Fe,null,f,ee);for(J in f)if(ee=f[J],ne=c[J],f.hasOwnProperty(J)&&ee!==ne&&(ee!=null||ne!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:St(n,i,J,ee,f,ne)}return;default:if(mh(i)){for(var At in c)ee=c[At],c.hasOwnProperty(At)&&ee!==void 0&&!f.hasOwnProperty(At)&&np(n,i,At,void 0,f,ee);for(le in f)ee=f[le],ne=c[le],!f.hasOwnProperty(le)||ee===ne||ee===void 0&&ne===void 0||np(n,i,le,ee,f,ne);return}}for(var W in c)ee=c[W],c.hasOwnProperty(W)&&ee!=null&&!f.hasOwnProperty(W)&&St(n,i,W,null,f,ee);for(he in f)ee=f[he],ne=c[he],!f.hasOwnProperty(he)||ee===ne||ee==null&&ne==null||St(n,i,he,ee,f,ne)}function lb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function k2(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var v=c[f],x=v.transferSize,_=v.initiatorType,D=v.duration;if(x&&D&&lb(_)){for(_=0,D=v.responseEnd,f+=1;f<c.length;f++){var V=c[f],J=V.startTime;if(J>D)break;var le=V.transferSize,he=V.initiatorType;le&&lb(he)&&(V=V.responseEnd,_+=le*(V<D?1:(D-J)/(V-J)))}if(--f,i+=8*(x+_)/(v.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var sp=null,ip=null;function mu(n){return n.nodeType===9?n:n.ownerDocument}function cb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ub(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function ap(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var rp=null;function O2(){var n=window.event;return n&&n.type==="popstate"?n===rp?!1:(rp=n,!0):(rp=null,!1)}var db=typeof setTimeout=="function"?setTimeout:void 0,L2=typeof clearTimeout=="function"?clearTimeout:void 0,hb=typeof Promise=="function"?Promise:void 0,P2=typeof queueMicrotask=="function"?queueMicrotask:typeof hb<"u"?function(n){return hb.resolve(null).then(n).catch(I2)}:db;function I2(n){setTimeout(function(){throw n})}function da(n){return n==="head"}function fb(n,i){var c=i,f=0;do{var v=c.nextSibling;if(n.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(f===0){n.removeChild(v),Wr(i);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Sl(n.ownerDocument.documentElement);else if(c==="head"){c=n.ownerDocument.head,Sl(c);for(var x=c.firstChild;x;){var _=x.nextSibling,D=x.nodeName;x[Fo]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||c.removeChild(x),x=_}}else c==="body"&&Sl(n.ownerDocument.body);c=v}while(c);Wr(i)}function pb(n,i){var c=n;n=0;do{var f=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(n===0)break;n--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||n++;c=f}while(c)}function op(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":op(c),dh(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function B2(n,i,c,f){for(;n.nodeType===1;){var v=c;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!f&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(f){if(!n[Fo])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(x=n.getAttribute("rel"),x==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(x!==v.rel||n.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||n.getAttribute("title")!==(v.title==null?null:v.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(x=n.getAttribute("src"),(x!==(v.src==null?null:v.src)||n.getAttribute("type")!==(v.type==null?null:v.type)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&x&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var x=v.name==null?null:""+v.name;if(v.type==="hidden"&&n.getAttribute("name")===x)return n}else return n;if(n=bs(n.nextSibling),n===null)break}return null}function z2(n,i,c){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=bs(n.nextSibling),n===null))return null;return n}function mb(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=bs(n.nextSibling),n===null))return null;return n}function lp(n){return n.data==="$?"||n.data==="$~"}function cp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function F2(n,i){var c=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||c.readyState!=="loading")i();else{var f=function(){i(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),n._reactRetry=f}}function bs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var up=null;function gb(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"||c==="/&"){if(i===0)return bs(n.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}n=n.nextSibling}return null}function vb(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return n;i--}else c!=="/$"&&c!=="/&"||i++}n=n.previousSibling}return null}function yb(n,i,c){switch(i=mu(c),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Sl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);dh(n)}var ws=new Map,xb=new Set;function gu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Mi=U.d;U.d={f:H2,r:U2,D:V2,C:$2,L:G2,m:q2,X:X2,S:Y2,M:W2};function H2(){var n=Mi.f(),i=ou();return n||i}function U2(n){var i=pr(n);i!==null&&i.tag===5&&i.type==="form"?Py(i):Mi.r(n)}var qr=typeof document>"u"?null:document;function bb(n,i,c){var f=qr;if(f&&typeof i=="string"&&i){var v=fs(i);v='link[rel="'+n+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),xb.has(v)||(xb.add(v),n={rel:n,crossOrigin:c,href:i},f.querySelector(v)===null&&(i=f.createElement("link"),bn(i,"link",n),cn(i),f.head.appendChild(i)))}}function V2(n){Mi.D(n),bb("dns-prefetch",n,null)}function $2(n,i){Mi.C(n,i),bb("preconnect",n,i)}function G2(n,i,c){Mi.L(n,i,c);var f=qr;if(f&&n&&i){var v='link[rel="preload"][as="'+fs(i)+'"]';i==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+fs(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+fs(c.imageSizes)+'"]')):v+='[href="'+fs(n)+'"]';var x=v;switch(i){case"style":x=Yr(n);break;case"script":x=Xr(n)}ws.has(x)||(n=m({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:n,as:i},c),ws.set(x,n),f.querySelector(v)!==null||i==="style"&&f.querySelector(Al(x))||i==="script"&&f.querySelector(Cl(x))||(i=f.createElement("link"),bn(i,"link",n),cn(i),f.head.appendChild(i)))}}function q2(n,i){Mi.m(n,i);var c=qr;if(c&&n){var f=i&&typeof i.as=="string"?i.as:"script",v='link[rel="modulepreload"][as="'+fs(f)+'"][href="'+fs(n)+'"]',x=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Xr(n)}if(!ws.has(x)&&(n=m({rel:"modulepreload",href:n},i),ws.set(x,n),c.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Cl(x)))return}f=c.createElement("link"),bn(f,"link",n),cn(f),c.head.appendChild(f)}}}function Y2(n,i,c){Mi.S(n,i,c);var f=qr;if(f&&n){var v=mr(f).hoistableStyles,x=Yr(n);i=i||"default";var _=v.get(x);if(!_){var D={loading:0,preload:null};if(_=f.querySelector(Al(x)))D.loading=5;else{n=m({rel:"stylesheet",href:n,"data-precedence":i},c),(c=ws.get(x))&&dp(n,c);var V=_=f.createElement("link");cn(V),bn(V,"link",n),V._p=new Promise(function(J,le){V.onload=J,V.onerror=le}),V.addEventListener("load",function(){D.loading|=1}),V.addEventListener("error",function(){D.loading|=2}),D.loading|=4,vu(_,i,f)}_={type:"stylesheet",instance:_,count:1,state:D},v.set(x,_)}}}function X2(n,i){Mi.X(n,i);var c=qr;if(c&&n){var f=mr(c).hoistableScripts,v=Xr(n),x=f.get(v);x||(x=c.querySelector(Cl(v)),x||(n=m({src:n,async:!0},i),(i=ws.get(v))&&hp(n,i),x=c.createElement("script"),cn(x),bn(x,"link",n),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},f.set(v,x))}}function W2(n,i){Mi.M(n,i);var c=qr;if(c&&n){var f=mr(c).hoistableScripts,v=Xr(n),x=f.get(v);x||(x=c.querySelector(Cl(v)),x||(n=m({src:n,async:!0,type:"module"},i),(i=ws.get(v))&&hp(n,i),x=c.createElement("script"),cn(x),bn(x,"link",n),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},f.set(v,x))}}function wb(n,i,c,f){var v=(v=ce.current)?gu(v):null;if(!v)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Yr(c.href),c=mr(v).hoistableStyles,f=c.get(i),f||(f={type:"style",instance:null,count:0,state:null},c.set(i,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=Yr(c.href);var x=mr(v).hoistableStyles,_=x.get(n);if(_||(v=v.ownerDocument||v,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(n,_),(x=v.querySelector(Al(n)))&&!x._p&&(_.instance=x,_.state.loading=5),ws.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ws.set(n,c),x||K2(v,n,c,_.state))),i&&f===null)throw Error(s(528,""));return _}if(i&&f!==null)throw Error(s(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Xr(c),c=mr(v).hoistableScripts,f=c.get(i),f||(f={type:"script",instance:null,count:0,state:null},c.set(i,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Yr(n){return'href="'+fs(n)+'"'}function Al(n){return'link[rel="stylesheet"]['+n+"]"}function Sb(n){return m({},n,{"data-precedence":n.precedence,precedence:null})}function K2(n,i,c,f){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?f.loading=1:(i=n.createElement("link"),f.preload=i,i.addEventListener("load",function(){return f.loading|=1}),i.addEventListener("error",function(){return f.loading|=2}),bn(i,"link",c),cn(i),n.head.appendChild(i))}function Xr(n){return'[src="'+fs(n)+'"]'}function Cl(n){return"script[async]"+n}function Ab(n,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var f=n.querySelector('style[data-href~="'+fs(c.href)+'"]');if(f)return i.instance=f,cn(f),f;var v=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(n.ownerDocument||n).createElement("style"),cn(f),bn(f,"style",v),vu(f,c.precedence,n),i.instance=f;case"stylesheet":v=Yr(c.href);var x=n.querySelector(Al(v));if(x)return i.state.loading|=4,i.instance=x,cn(x),x;f=Sb(c),(v=ws.get(v))&&dp(f,v),x=(n.ownerDocument||n).createElement("link"),cn(x);var _=x;return _._p=new Promise(function(D,V){_.onload=D,_.onerror=V}),bn(x,"link",f),i.state.loading|=4,vu(x,c.precedence,n),i.instance=x;case"script":return x=Xr(c.src),(v=n.querySelector(Cl(x)))?(i.instance=v,cn(v),v):(f=c,(v=ws.get(x))&&(f=m({},c),hp(f,v)),n=n.ownerDocument||n,v=n.createElement("script"),cn(v),bn(v,"link",f),n.head.appendChild(v),i.instance=v);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(f=i.instance,i.state.loading|=4,vu(f,c.precedence,n));return i.instance}function vu(n,i,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,x=v,_=0;_<f.length;_++){var D=f[_];if(D.dataset.precedence===i)x=D;else if(x!==v)break}x?x.parentNode.insertBefore(n,x.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(n,i.firstChild))}function dp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function hp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var yu=null;function Cb(n,i,c){if(yu===null){var f=new Map,v=yu=new Map;v.set(c,f)}else v=yu,f=v.get(c),f||(f=new Map,v.set(c,f));if(f.has(n))return f;for(f.set(n,null),c=c.getElementsByTagName(n),v=0;v<c.length;v++){var x=c[v];if(!(x[Fo]||x[gn]||n==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var _=x.getAttribute(i)||"";_=n+_;var D=f.get(_);D?D.push(x):f.set(_,[x])}}return f}function Eb(n,i,c){n=n.ownerDocument||n,n.head.insertBefore(c,i==="title"?n.querySelector("head > title"):null)}function Q2(n,i,c){if(c===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function _b(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Z2(n,i,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Yr(f.href),x=i.querySelector(Al(v));if(x){i=x._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=xu.bind(n),i.then(n,n)),c.state.loading|=4,c.instance=x,cn(x);return}x=i.ownerDocument||i,f=Sb(f),(v=ws.get(v))&&dp(f,v),x=x.createElement("link"),cn(x);var _=x;_._p=new Promise(function(D,V){_.onload=D,_.onerror=V}),bn(x,"link",f),c.instance=x}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(n.count++,c=xu.bind(n),i.addEventListener("load",c),i.addEventListener("error",c))}}var fp=0;function J2(n,i){return n.stylesheets&&n.count===0&&wu(n,n.stylesheets),0<n.count||0<n.imgCount?function(c){var f=setTimeout(function(){if(n.stylesheets&&wu(n,n.stylesheets),n.unsuspend){var x=n.unsuspend;n.unsuspend=null,x()}},6e4+i);0<n.imgBytes&&fp===0&&(fp=62500*k2());var v=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&wu(n,n.stylesheets),n.unsuspend)){var x=n.unsuspend;n.unsuspend=null,x()}},(n.imgBytes>fp?50:800)+i);return n.unsuspend=c,function(){n.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function xu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wu(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var bu=null;function wu(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,bu=new Map,i.forEach(eT,n),bu=null,xu.call(n))}function eT(n,i){if(!(i.state.loading&4)){var c=bu.get(n);if(c)var f=c.get(null);else{c=new Map,bu.set(n,c);for(var v=n.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<v.length;x++){var _=v[x];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(c.set(_.dataset.precedence,_),f=_)}f&&c.set(null,f)}v=i.instance,_=v.getAttribute("data-precedence"),x=c.get(_)||f,x===f&&c.set(null,v),c.set(_,v),this.count++,f=xu.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),x?x.parentNode.insertBefore(v,x.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(v,n.firstChild)),i.state.loading|=4}}var El={$$typeof:N,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function tT(n,i,c,f,v,x,_,D,V){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.hiddenUpdates=yt(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=x,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Tb(n,i,c,f,v,x,_,D,V,J,le,he){return n=new tT(n,i,c,_,V,J,le,he,D),i=1,x===!0&&(i|=24),x=Qn(3,null,null,i),n.current=x,x.stateNode=n,i=Gh(),i.refCount++,n.pooledCache=i,i.refCount++,x.memoizedState={element:f,isDehydrated:c,cache:i},Wh(x),n}function Nb(n){return n?(n=Er,n):Er}function jb(n,i,c,f,v,x){v=Nb(v),f.context===null?f.context=v:f.pendingContext=v,f=ea(i),f.payload={element:c},x=x===void 0?null:x,x!==null&&(f.callback=x),c=ta(n,f,i),c!==null&&(Hn(c,n,i),sl(c,n,i))}function Mb(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<i?c:i}}function pp(n,i){Mb(n,i),(n=n.alternate)&&Mb(n,i)}function Rb(n){if(n.tag===13||n.tag===31){var i=Oa(n,67108864);i!==null&&Hn(i,n,67108864),pp(n,67108864)}}function Db(n){if(n.tag===13||n.tag===31){var i=ns();i=Ts(i);var c=Oa(n,i);c!==null&&Hn(c,n,i),pp(n,i)}}var Su=!0;function nT(n,i,c,f){var v=R.T;R.T=null;var x=U.p;try{U.p=2,mp(n,i,c,f)}finally{U.p=x,R.T=v}}function sT(n,i,c,f){var v=R.T;R.T=null;var x=U.p;try{U.p=8,mp(n,i,c,f)}finally{U.p=x,R.T=v}}function mp(n,i,c,f){if(Su){var v=gp(f);if(v===null)tp(n,i,f,Au,c),Ob(n,f);else if(aT(v,n,i,c,f))f.stopPropagation();else if(Ob(n,f),i&4&&-1<iT.indexOf(n)){for(;v!==null;){var x=pr(v);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var _=ds(x.pendingLanes);if(_!==0){var D=x;for(D.pendingLanes|=2,D.entangledLanes|=2;_;){var V=1<<31-on(_);D.entanglements[1]|=V,_&=~V}qs(x),(pt&6)===0&&(au=Qe()+500,xl(0))}}break;case 31:case 13:D=Oa(x,2),D!==null&&Hn(D,x,2),ou(),pp(x,2)}if(x=gp(f),x===null&&tp(n,i,f,Au,c),x===v)break;v=x}v!==null&&f.stopPropagation()}else tp(n,i,f,null,c)}}function gp(n){return n=vh(n),vp(n)}var Au=null;function vp(n){if(Au=null,n=fr(n),n!==null){var i=o(n);if(i===null)n=null;else{var c=i.tag;if(c===13){if(n=l(i),n!==null)return n;n=null}else if(c===31){if(n=u(i),n!==null)return n;n=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Au=n,null}function kb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case we:return 2;case He:return 8;case vt:case Ot:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var yp=!1,ha=null,fa=null,pa=null,_l=new Map,Tl=new Map,ma=[],iT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ob(n,i){switch(n){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":_l.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(i.pointerId)}}function Nl(n,i,c,f,v,x){return n===null||n.nativeEvent!==x?(n={blockedOn:i,domEventName:c,eventSystemFlags:f,nativeEvent:x,targetContainers:[v]},i!==null&&(i=pr(i),i!==null&&Rb(i)),n):(n.eventSystemFlags|=f,i=n.targetContainers,v!==null&&i.indexOf(v)===-1&&i.push(v),n)}function aT(n,i,c,f,v){switch(i){case"focusin":return ha=Nl(ha,n,i,c,f,v),!0;case"dragenter":return fa=Nl(fa,n,i,c,f,v),!0;case"mouseover":return pa=Nl(pa,n,i,c,f,v),!0;case"pointerover":var x=v.pointerId;return _l.set(x,Nl(_l.get(x)||null,n,i,c,f,v)),!0;case"gotpointercapture":return x=v.pointerId,Tl.set(x,Nl(Tl.get(x)||null,n,i,c,f,v)),!0}return!1}function Lb(n){var i=fr(n.target);if(i!==null){var c=o(i);if(c!==null){if(i=c.tag,i===13){if(i=l(c),i!==null){n.blockedOn=i,Wg(n.priority,function(){Db(c)});return}}else if(i===31){if(i=u(c),i!==null){n.blockedOn=i,Wg(n.priority,function(){Db(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Cu(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var c=gp(n.nativeEvent);if(c===null){c=n.nativeEvent;var f=new c.constructor(c.type,c);gh=f,c.target.dispatchEvent(f),gh=null}else return i=pr(c),i!==null&&Rb(i),n.blockedOn=c,!1;i.shift()}return!0}function Pb(n,i,c){Cu(n)&&c.delete(i)}function rT(){yp=!1,ha!==null&&Cu(ha)&&(ha=null),fa!==null&&Cu(fa)&&(fa=null),pa!==null&&Cu(pa)&&(pa=null),_l.forEach(Pb),Tl.forEach(Pb)}function Eu(n,i){n.blockedOn===i&&(n.blockedOn=null,yp||(yp=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,rT)))}var _u=null;function Ib(n){_u!==n&&(_u=n,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){_u===n&&(_u=null);for(var i=0;i<n.length;i+=3){var c=n[i],f=n[i+1],v=n[i+2];if(typeof f!="function"){if(vp(f||c)===null)continue;break}var x=pr(c);x!==null&&(n.splice(i,3),i-=3,gf(x,{pending:!0,data:v,method:c.method,action:f},f,v))}}))}function Wr(n){function i(V){return Eu(V,n)}ha!==null&&Eu(ha,n),fa!==null&&Eu(fa,n),pa!==null&&Eu(pa,n),_l.forEach(i),Tl.forEach(i);for(var c=0;c<ma.length;c++){var f=ma[c];f.blockedOn===n&&(f.blockedOn=null)}for(;0<ma.length&&(c=ma[0],c.blockedOn===null);)Lb(c),c.blockedOn===null&&ma.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var v=c[f],x=c[f+1],_=v[Ln]||null;if(typeof x=="function")_||Ib(c);else if(_){var D=null;if(x&&x.hasAttribute("formAction")){if(v=x,_=x[Ln]||null)D=_.formAction;else if(vp(v)!==null)continue}else D=_.action;typeof D=="function"?c[f+1]=D:(c.splice(f,3),f-=3),Ib(c)}}}function Bb(){function n(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(_){return v=_})},focusReset:"manual",scroll:"manual"})}function i(){v!==null&&(v(),v=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),v!==null&&(v(),v=null)}}}function xp(n){this._internalRoot=n}Tu.prototype.render=xp.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var c=i.current,f=ns();jb(c,f,n,i,null,null)},Tu.prototype.unmount=xp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;jb(n.current,2,null,n,null,null),ou(),i[hr]=null}};function Tu(n){this._internalRoot=n}Tu.prototype.unstable_scheduleHydration=function(n){if(n){var i=ch();n={blockedOn:null,target:n,priority:i};for(var c=0;c<ma.length&&i!==0&&i<ma[c].priority;c++);ma.splice(c,0,n),c===0&&Lb(n)}};var zb=e.version;if(zb!=="19.2.3")throw Error(s(527,zb,"19.2.3"));U.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(i),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var oT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nu.isDisabled&&Nu.supportsFiber)try{di=Nu.inject(oT),mn=Nu}catch{}}return Ml.createRoot=function(n,i){if(!r(n))throw Error(s(299));var c=!1,f="",v=qy,x=Yy,_=Xy;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(v=i.onUncaughtError),i.onCaughtError!==void 0&&(x=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Tb(n,1,!1,null,null,c,f,null,v,x,_,Bb),n[hr]=i.current,ep(n),new xp(i)},Ml.hydrateRoot=function(n,i,c){if(!r(n))throw Error(s(299));var f=!1,v="",x=qy,_=Yy,D=Xy,V=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.formState!==void 0&&(V=c.formState)),i=Tb(n,1,!0,i,c??null,f,v,V,x,_,D,Bb),i.context=Nb(null),c=i.current,f=ns(),f=Ts(f),v=ea(f),v.callback=null,ta(c,v,f),c=f,i.current.lanes=c,ot(i,c),qs(i),n[hr]=i.current,ep(n),new Tu(i)},Ml.version="19.2.3",Ml}var Qb;function vT(){if(Qb)return Ap.exports;Qb=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Ap.exports=gT(),Ap.exports}var yT=vT();function xe(a,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(a?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}function xT(a,e){const t=w.createContext(e),s=o=>{const{children:l,...u}=o,h=w.useMemo(()=>u,Object.values(u));return d.jsx(t.Provider,{value:h,children:l})};s.displayName=a+"Provider";function r(o){const l=w.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${a}\``)}return[s,r]}function cs(a,e=[]){let t=[];function s(o,l){const u=w.createContext(l),h=t.length;t=[...t,l];const p=m=>{const{scope:y,children:b,...A}=m,S=y?.[a]?.[h]||u,E=w.useMemo(()=>A,Object.values(A));return d.jsx(S.Provider,{value:E,children:b})};p.displayName=o+"Provider";function g(m,y){const b=y?.[a]?.[h]||u,A=w.useContext(b);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[p,g]}const r=()=>{const o=t.map(l=>w.createContext(l));return function(u){const h=u?.[a]||o;return w.useMemo(()=>({[`__scope${a}`]:{...u,[a]:h}}),[u,h])}};return r.scopeName=a,[s,bT(r,...e)]}function bT(...a){const e=a[0];if(a.length===1)return e;const t=()=>{const s=a.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const l=s.reduce((u,{useScope:h,scopeName:p})=>{const m=h(o)[`__scope${p}`];return{...u,...m}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function Zb(a,e){if(typeof a=="function")return a(e);a!=null&&(a.current=e)}function Vi(...a){return e=>{let t=!1;const s=a.map(r=>{const o=Zb(r,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let r=0;r<s.length;r++){const o=s[r];typeof o=="function"?o():Zb(a[r],null)}}}}function qe(...a){return w.useCallback(Vi(...a),a)}function Jb(a){const e=wT(a),t=w.forwardRef((s,r)=>{const{children:o,...l}=s,u=w.Children.toArray(o),h=u.find(AT);if(h){const p=h.props.children,g=u.map(m=>m===h?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:m);return d.jsx(e,{...l,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,g):null})}return d.jsx(e,{...l,ref:r,children:o})});return t.displayName=`${a}.Slot`,t}function wT(a){const e=w.forwardRef((t,s)=>{const{children:r,...o}=t;if(w.isValidElement(r)){const l=ET(r),u=CT(o,r.props);return r.type!==w.Fragment&&(u.ref=s?Vi(s,l):l),w.cloneElement(r,u)}return w.Children.count(r)>1?w.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var ST=Symbol("radix.slottable");function AT(a){return w.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===ST}function CT(a,e){const t={...e};for(const s in e){const r=a[s],o=e[s];/^on[A-Z]/.test(s)?r&&o?t[s]=(...u)=>{const h=o(...u);return r(...u),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...o}:s==="className"&&(t[s]=[r,o].filter(Boolean).join(" "))}return{...a,...t}}function ET(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}function Cd(a){const e=a+"CollectionProvider",[t,s]=cs(e),[r,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=S=>{const{scope:E,children:C}=S,j=me.useRef(null),N=me.useRef(new Map).current;return d.jsx(r,{scope:E,itemMap:N,collectionRef:j,children:C})};l.displayName=e;const u=a+"CollectionSlot",h=Jb(u),p=me.forwardRef((S,E)=>{const{scope:C,children:j}=S,N=o(u,C),M=qe(E,N.collectionRef);return d.jsx(h,{ref:M,children:j})});p.displayName=u;const g=a+"CollectionItemSlot",m="data-radix-collection-item",y=Jb(g),b=me.forwardRef((S,E)=>{const{scope:C,children:j,...N}=S,M=me.useRef(null),O=qe(E,M),P=o(g,C);return me.useEffect(()=>(P.itemMap.set(M,{ref:M,...N}),()=>{P.itemMap.delete(M)})),d.jsx(y,{[m]:"",ref:O,children:j})});b.displayName=g;function A(S){const E=o(a+"CollectionConsumer",S);return me.useCallback(()=>{const j=E.collectionRef.current;if(!j)return[];const N=Array.from(j.querySelectorAll(`[${m}]`));return Array.from(E.itemMap.values()).sort((P,L)=>N.indexOf(P.ref.current)-N.indexOf(L.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:l,Slot:p,ItemSlot:b},A,s]}var En=globalThis?.document?w.useLayoutEffect:()=>{},_T=Fm[" useId ".trim().toString()]||(()=>{}),TT=0;function ai(a){const[e,t]=w.useState(_T());return En(()=>{t(s=>s??String(TT++))},[a]),a||(e?`radix-${e}`:"")}var sc=Uw();const Vw=Bm(sc);function NT(a){const e=jT(a),t=w.forwardRef((s,r)=>{const{children:o,...l}=s,u=w.Children.toArray(o),h=u.find(RT);if(h){const p=h.props.children,g=u.map(m=>m===h?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:m);return d.jsx(e,{...l,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,g):null})}return d.jsx(e,{...l,ref:r,children:o})});return t.displayName=`${a}.Slot`,t}function jT(a){const e=w.forwardRef((t,s)=>{const{children:r,...o}=t;if(w.isValidElement(r)){const l=kT(r),u=DT(o,r.props);return r.type!==w.Fragment&&(u.ref=s?Vi(s,l):l),w.cloneElement(r,u)}return w.Children.count(r)>1?w.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var MT=Symbol("radix.slottable");function RT(a){return w.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===MT}function DT(a,e){const t={...e};for(const s in e){const r=a[s],o=e[s];/^on[A-Z]/.test(s)?r&&o?t[s]=(...u)=>{const h=o(...u);return r(...u),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...o}:s==="className"&&(t[s]=[r,o].filter(Boolean).join(" "))}return{...a,...t}}function kT(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}var OT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ie=OT.reduce((a,e)=>{const t=NT(`Primitive.${e}`),s=w.forwardRef((r,o)=>{const{asChild:l,...u}=r,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(h,{...u,ref:o})});return s.displayName=`Primitive.${e}`,{...a,[e]:s}},{});function $w(a,e){a&&sc.flushSync(()=>a.dispatchEvent(e))}function An(a){const e=w.useRef(a);return w.useEffect(()=>{e.current=a}),w.useMemo(()=>(...t)=>e.current?.(...t),[])}var LT=Fm[" useInsertionEffect ".trim().toString()]||En;function Bi({prop:a,defaultProp:e,onChange:t=()=>{},caller:s}){const[r,o,l]=PT({defaultProp:e,onChange:t}),u=a!==void 0,h=u?a:r;{const g=w.useRef(a!==void 0);w.useEffect(()=>{const m=g.current;m!==u&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,s])}const p=w.useCallback(g=>{if(u){const m=IT(g)?g(a):g;m!==a&&l.current?.(m)}else o(g)},[u,a,o,l]);return[h,p]}function PT({defaultProp:a,onChange:e}){const[t,s]=w.useState(a),r=w.useRef(t),o=w.useRef(e);return LT(()=>{o.current=e},[e]),w.useEffect(()=>{r.current!==t&&(o.current?.(t),r.current=t)},[t,r]),[t,s,o]}function IT(a){return typeof a=="function"}var BT=w.createContext(void 0);function No(a){const e=w.useContext(BT);return a||e||"ltr"}var Tp="rovingFocusGroup.onEntryFocus",zT={bubbles:!1,cancelable:!0},ic="RovingFocusGroup",[rm,Gw,FT]=Cd(ic),[HT,Ed]=cs(ic,[FT]),[UT,VT]=HT(ic),qw=w.forwardRef((a,e)=>d.jsx(rm.Provider,{scope:a.__scopeRovingFocusGroup,children:d.jsx(rm.Slot,{scope:a.__scopeRovingFocusGroup,children:d.jsx($T,{...a,ref:e})})}));qw.displayName=ic;var $T=w.forwardRef((a,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:r=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...m}=a,y=w.useRef(null),b=qe(e,y),A=No(o),[S,E]=Bi({prop:l,defaultProp:u??null,onChange:h,caller:ic}),[C,j]=w.useState(!1),N=An(p),M=Gw(t),O=w.useRef(!1),[P,L]=w.useState(0);return w.useEffect(()=>{const B=y.current;if(B)return B.addEventListener(Tp,N),()=>B.removeEventListener(Tp,N)},[N]),d.jsx(UT,{scope:t,orientation:s,dir:A,loop:r,currentTabStopId:S,onItemFocus:w.useCallback(B=>E(B),[E]),onItemShiftTab:w.useCallback(()=>j(!0),[]),onFocusableItemAdd:w.useCallback(()=>L(B=>B+1),[]),onFocusableItemRemove:w.useCallback(()=>L(B=>B-1),[]),children:d.jsx(Ie.div,{tabIndex:C||P===0?-1:0,"data-orientation":s,...m,ref:b,style:{outline:"none",...a.style},onMouseDown:xe(a.onMouseDown,()=>{O.current=!0}),onFocus:xe(a.onFocus,B=>{const F=!O.current;if(B.target===B.currentTarget&&F&&!C){const $=new CustomEvent(Tp,zT);if(B.currentTarget.dispatchEvent($),!$.defaultPrevented){const Y=M().filter(R=>R.focusable),te=Y.find(R=>R.active),oe=Y.find(R=>R.id===S),fe=[te,oe,...Y].filter(Boolean).map(R=>R.ref.current);Ww(fe,g)}}O.current=!1}),onBlur:xe(a.onBlur,()=>j(!1))})})}),Yw="RovingFocusGroupItem",Xw=w.forwardRef((a,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:r=!1,tabStopId:o,children:l,...u}=a,h=ai(),p=o||h,g=VT(Yw,t),m=g.currentTabStopId===p,y=Gw(t),{onFocusableItemAdd:b,onFocusableItemRemove:A,currentTabStopId:S}=g;return w.useEffect(()=>{if(s)return b(),()=>A()},[s,b,A]),d.jsx(rm.ItemSlot,{scope:t,id:p,focusable:s,active:r,children:d.jsx(Ie.span,{tabIndex:m?0:-1,"data-orientation":g.orientation,...u,ref:e,onMouseDown:xe(a.onMouseDown,E=>{s?g.onItemFocus(p):E.preventDefault()}),onFocus:xe(a.onFocus,()=>g.onItemFocus(p)),onKeyDown:xe(a.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){g.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const C=YT(E,g.orientation,g.dir);if(C!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let N=y().filter(M=>M.focusable).map(M=>M.ref.current);if(C==="last")N.reverse();else if(C==="prev"||C==="next"){C==="prev"&&N.reverse();const M=N.indexOf(E.currentTarget);N=g.loop?XT(N,M+1):N.slice(M+1)}setTimeout(()=>Ww(N))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:S!=null}):l})})});Xw.displayName=Yw;var GT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qT(a,e){return e!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function YT(a,e,t){const s=qT(a.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return GT[s]}function Ww(a,e=!1){const t=document.activeElement;for(const s of a)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function XT(a,e){return a.map((t,s)=>a[(e+s)%a.length])}var Kw=qw,Qw=Xw;function WT(a,e){return w.useReducer((t,s)=>e[t][s]??t,a)}var Yn=a=>{const{present:e,children:t}=a,s=KT(e),r=typeof t=="function"?t({present:s.isPresent}):w.Children.only(t),o=qe(s.ref,QT(r));return typeof t=="function"||s.isPresent?w.cloneElement(r,{ref:o}):null};Yn.displayName="Presence";function KT(a){const[e,t]=w.useState(),s=w.useRef(null),r=w.useRef(a),o=w.useRef("none"),l=a?"mounted":"unmounted",[u,h]=WT(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const p=ju(s.current);o.current=u==="mounted"?p:"none"},[u]),En(()=>{const p=s.current,g=r.current;if(g!==a){const y=o.current,b=ju(p);a?h("MOUNT"):b==="none"||p?.display==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),r.current=a}},[a,h]),En(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,m=b=>{const S=ju(s.current).includes(CSS.escape(b.animationName));if(b.target===e&&S&&(h("ANIMATION_END"),!r.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},y=b=>{b.target===e&&(o.current=ju(s.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:w.useCallback(p=>{s.current=p?getComputedStyle(p):null,t(p)},[])}}function ju(a){return a?.animationName||"none"}function QT(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}var _d="Tabs",[ZT]=cs(_d,[Ed]),Zw=Ed(),[JT,Hm]=ZT(_d),Jw=w.forwardRef((a,e)=>{const{__scopeTabs:t,value:s,onValueChange:r,defaultValue:o,orientation:l="horizontal",dir:u,activationMode:h="automatic",...p}=a,g=No(u),[m,y]=Bi({prop:s,onChange:r,defaultProp:o??"",caller:_d});return d.jsx(JT,{scope:t,baseId:ai(),value:m,onValueChange:y,orientation:l,dir:g,activationMode:h,children:d.jsx(Ie.div,{dir:g,"data-orientation":l,...p,ref:e})})});Jw.displayName=_d;var e1="TabsList",t1=w.forwardRef((a,e)=>{const{__scopeTabs:t,loop:s=!0,...r}=a,o=Hm(e1,t),l=Zw(t);return d.jsx(Kw,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:s,children:d.jsx(Ie.div,{role:"tablist","aria-orientation":o.orientation,...r,ref:e})})});t1.displayName=e1;var n1="TabsTrigger",s1=w.forwardRef((a,e)=>{const{__scopeTabs:t,value:s,disabled:r=!1,...o}=a,l=Hm(n1,t),u=Zw(t),h=r1(l.baseId,s),p=o1(l.baseId,s),g=s===l.value;return d.jsx(Qw,{asChild:!0,...u,focusable:!r,active:g,children:d.jsx(Ie.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":p,"data-state":g?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:h,...o,ref:e,onMouseDown:xe(a.onMouseDown,m=>{!r&&m.button===0&&m.ctrlKey===!1?l.onValueChange(s):m.preventDefault()}),onKeyDown:xe(a.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(s)}),onFocus:xe(a.onFocus,()=>{const m=l.activationMode!=="manual";!g&&!r&&m&&l.onValueChange(s)})})})});s1.displayName=n1;var i1="TabsContent",a1=w.forwardRef((a,e)=>{const{__scopeTabs:t,value:s,forceMount:r,children:o,...l}=a,u=Hm(i1,t),h=r1(u.baseId,s),p=o1(u.baseId,s),g=s===u.value,m=w.useRef(g);return w.useEffect(()=>{const y=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(y)},[]),d.jsx(Yn,{present:r||g,children:({present:y})=>d.jsx(Ie.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!y,id:p,tabIndex:0,...l,ref:e,style:{...a.style,animationDuration:m.current?"0s":void 0},children:y&&o})})});a1.displayName=i1;function r1(a,e){return`${a}-trigger-${e}`}function o1(a,e){return`${a}-content-${e}`}var eN=Jw,tN=t1,nN=s1,sN=a1;function l1(a){var e,t,s="";if(typeof a=="string"||typeof a=="number")s+=a;else if(typeof a=="object")if(Array.isArray(a)){var r=a.length;for(e=0;e<r;e++)a[e]&&(t=l1(a[e]))&&(s&&(s+=" "),s+=t)}else for(t in a)a[t]&&(s&&(s+=" "),s+=t);return s}function jo(){for(var a,e,t=0,s="",r=arguments.length;t<r;t++)(a=arguments[t])&&(e=l1(a))&&(s&&(s+=" "),s+=e);return s}const iN=(a,e)=>{const t=new Array(a.length+e.length);for(let s=0;s<a.length;s++)t[s]=a[s];for(let s=0;s<e.length;s++)t[a.length+s]=e[s];return t},aN=(a,e)=>({classGroupId:a,validator:e}),c1=(a=new Map,e=null,t)=>({nextPart:a,validators:e,classGroupId:t}),ad="-",e0=[],rN="arbitrary..",oN=a=>{const e=cN(a),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=a;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return lN(l);const u=l.split(ad),h=u[0]===""&&u.length>1?1:0;return u1(u,h,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const h=s[l],p=t[l];return h?p?iN(p,h):h:p||e0}return t[l]||e0}}},u1=(a,e,t)=>{if(a.length-e===0)return t.classGroupId;const r=a[e],o=t.nextPart.get(r);if(o){const p=u1(a,e+1,o);if(p)return p}const l=t.validators;if(l===null)return;const u=e===0?a.join(ad):a.slice(e).join(ad),h=l.length;for(let p=0;p<h;p++){const g=l[p];if(g.validator(u))return g.classGroupId}},lN=a=>a.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=a.slice(1,-1),t=e.indexOf(":"),s=e.slice(0,t);return s?rN+s:void 0})(),cN=a=>{const{theme:e,classGroups:t}=a;return uN(t,e)},uN=(a,e)=>{const t=c1();for(const s in a){const r=a[s];Um(r,t,s,e)}return t},Um=(a,e,t,s)=>{const r=a.length;for(let o=0;o<r;o++){const l=a[o];dN(l,e,t,s)}},dN=(a,e,t,s)=>{if(typeof a=="string"){hN(a,e,t);return}if(typeof a=="function"){fN(a,e,t,s);return}pN(a,e,t,s)},hN=(a,e,t)=>{const s=a===""?e:d1(e,a);s.classGroupId=t},fN=(a,e,t,s)=>{if(mN(a)){Um(a(s),e,t,s);return}e.validators===null&&(e.validators=[]),e.validators.push(aN(t,a))},pN=(a,e,t,s)=>{const r=Object.entries(a),o=r.length;for(let l=0;l<o;l++){const[u,h]=r[l];Um(h,d1(e,u),t,s)}},d1=(a,e)=>{let t=a;const s=e.split(ad),r=s.length;for(let o=0;o<r;o++){const l=s[o];let u=t.nextPart.get(l);u||(u=c1(),t.nextPart.set(l,u)),t=u}return t},mN=a=>"isThemeGetter"in a&&a.isThemeGetter===!0,gN=a=>{if(a<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),s=Object.create(null);const r=(o,l)=>{t[o]=l,e++,e>a&&(e=0,s=t,t=Object.create(null))};return{get(o){let l=t[o];if(l!==void 0)return l;if((l=s[o])!==void 0)return r(o,l),l},set(o,l){o in t?t[o]=l:r(o,l)}}},om="!",t0=":",vN=[],n0=(a,e,t,s,r)=>({modifiers:a,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:s,isExternal:r}),yN=a=>{const{prefix:e,experimentalParseClassName:t}=a;let s=r=>{const o=[];let l=0,u=0,h=0,p;const g=r.length;for(let S=0;S<g;S++){const E=r[S];if(l===0&&u===0){if(E===t0){o.push(r.slice(h,S)),h=S+1;continue}if(E==="/"){p=S;continue}}E==="["?l++:E==="]"?l--:E==="("?u++:E===")"&&u--}const m=o.length===0?r:r.slice(h);let y=m,b=!1;m.endsWith(om)?(y=m.slice(0,-1),b=!0):m.startsWith(om)&&(y=m.slice(1),b=!0);const A=p&&p>h?p-h:void 0;return n0(o,b,y,A)};if(e){const r=e+t0,o=s;s=l=>l.startsWith(r)?o(l.slice(r.length)):n0(vN,!1,l,void 0,!0)}if(t){const r=s;s=o=>t({className:o,parseClassName:r})}return s},xN=a=>{const e=new Map;return a.orderSensitiveModifiers.forEach((t,s)=>{e.set(t,1e6+s)}),t=>{const s=[];let r=[];for(let o=0;o<t.length;o++){const l=t[o],u=l[0]==="[",h=e.has(l);u||h?(r.length>0&&(r.sort(),s.push(...r),r=[]),s.push(l)):r.push(l)}return r.length>0&&(r.sort(),s.push(...r)),s}},bN=a=>({cache:gN(a.cacheSize),parseClassName:yN(a),sortModifiers:xN(a),...oN(a)}),wN=/\s+/,SN=(a,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:o}=e,l=[],u=a.trim().split(wN);let h="";for(let p=u.length-1;p>=0;p-=1){const g=u[p],{isExternal:m,modifiers:y,hasImportantModifier:b,baseClassName:A,maybePostfixModifierPosition:S}=t(g);if(m){h=g+(h.length>0?" "+h:h);continue}let E=!!S,C=s(E?A.substring(0,S):A);if(!C){if(!E){h=g+(h.length>0?" "+h:h);continue}if(C=s(A),!C){h=g+(h.length>0?" "+h:h);continue}E=!1}const j=y.length===0?"":y.length===1?y[0]:o(y).join(":"),N=b?j+om:j,M=N+C;if(l.indexOf(M)>-1)continue;l.push(M);const O=r(C,E);for(let P=0;P<O.length;++P){const L=O[P];l.push(N+L)}h=g+(h.length>0?" "+h:h)}return h},AN=(...a)=>{let e=0,t,s,r="";for(;e<a.length;)(t=a[e++])&&(s=h1(t))&&(r&&(r+=" "),r+=s);return r},h1=a=>{if(typeof a=="string")return a;let e,t="";for(let s=0;s<a.length;s++)a[s]&&(e=h1(a[s]))&&(t&&(t+=" "),t+=e);return t},CN=(a,...e)=>{let t,s,r,o;const l=h=>{const p=e.reduce((g,m)=>m(g),a());return t=bN(p),s=t.cache.get,r=t.cache.set,o=u,u(h)},u=h=>{const p=s(h);if(p)return p;const g=SN(h,t);return r(h,g),g};return o=l,(...h)=>o(AN(...h))},EN=[],tn=a=>{const e=t=>t[a]||EN;return e.isThemeGetter=!0,e},f1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,p1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,_N=/^\d+\/\d+$/,TN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,MN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,RN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kr=a=>_N.test(a),tt=a=>!!a&&!Number.isNaN(Number(a)),va=a=>!!a&&Number.isInteger(Number(a)),Np=a=>a.endsWith("%")&&tt(a.slice(0,-1)),Ri=a=>TN.test(a),DN=()=>!0,kN=a=>NN.test(a)&&!jN.test(a),m1=()=>!1,ON=a=>MN.test(a),LN=a=>RN.test(a),PN=a=>!je(a)&&!Me(a),IN=a=>Mo(a,y1,m1),je=a=>f1.test(a),Ya=a=>Mo(a,x1,kN),jp=a=>Mo(a,UN,tt),s0=a=>Mo(a,g1,m1),BN=a=>Mo(a,v1,LN),Mu=a=>Mo(a,b1,ON),Me=a=>p1.test(a),Rl=a=>Ro(a,x1),zN=a=>Ro(a,VN),i0=a=>Ro(a,g1),FN=a=>Ro(a,y1),HN=a=>Ro(a,v1),Ru=a=>Ro(a,b1,!0),Mo=(a,e,t)=>{const s=f1.exec(a);return s?s[1]?e(s[1]):t(s[2]):!1},Ro=(a,e,t=!1)=>{const s=p1.exec(a);return s?s[1]?e(s[1]):t:!1},g1=a=>a==="position"||a==="percentage",v1=a=>a==="image"||a==="url",y1=a=>a==="length"||a==="size"||a==="bg-size",x1=a=>a==="length",UN=a=>a==="number",VN=a=>a==="family-name",b1=a=>a==="shadow",$N=()=>{const a=tn("color"),e=tn("font"),t=tn("text"),s=tn("font-weight"),r=tn("tracking"),o=tn("leading"),l=tn("breakpoint"),u=tn("container"),h=tn("spacing"),p=tn("radius"),g=tn("shadow"),m=tn("inset-shadow"),y=tn("text-shadow"),b=tn("drop-shadow"),A=tn("blur"),S=tn("perspective"),E=tn("aspect"),C=tn("ease"),j=tn("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...M(),Me,je],P=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto","contain","none"],B=()=>[Me,je,h],F=()=>[Kr,"full","auto",...B()],$=()=>[va,"none","subgrid",Me,je],Y=()=>["auto",{span:["full",va,Me,je]},va,Me,je],te=()=>[va,"auto",Me,je],oe=()=>["auto","min","max","fr",Me,je],ie=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],fe=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...B()],U=()=>[Kr,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],H=()=>[a,Me,je],z=()=>[...M(),i0,s0,{position:[Me,je]}],se=()=>["no-repeat",{repeat:["","x","y","space","round"]}],T=()=>["auto","cover","contain",FN,IN,{size:[Me,je]}],k=()=>[Np,Rl,Ya],I=()=>["","none","full",p,Me,je],q=()=>["",tt,Rl,Ya],X=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>[tt,Np,i0,s0],ue=()=>["","none",A,Me,je],pe=()=>["none",tt,Me,je],Ce=()=>["none",tt,Me,je],ye=()=>[tt,Me,je],Ne=()=>[Kr,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ri],breakpoint:[Ri],color:[DN],container:[Ri],"drop-shadow":[Ri],ease:["in","out","in-out"],font:[PN],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ri],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ri],shadow:[Ri],spacing:["px",tt],text:[Ri],"text-shadow":[Ri],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Kr,je,Me,E]}],container:["container"],columns:[{columns:[tt,je,Me,u]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[va,"auto",Me,je]}],basis:[{basis:[Kr,"full","auto",u,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,Kr,"auto","initial","none",je]}],grow:[{grow:["",tt,Me,je]}],shrink:[{shrink:["",tt,Me,je]}],order:[{order:[va,"first","last","none",Me,je]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":oe()}],"auto-rows":[{"auto-rows":oe()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...ie(),"normal"]}],"justify-items":[{"justify-items":[...fe(),"normal"]}],"justify-self":[{"justify-self":["auto",...fe()]}],"align-content":[{content:["normal",...ie()]}],"align-items":[{items:[...fe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...fe(),{baseline:["","last"]}]}],"place-content":[{"place-content":ie()}],"place-items":[{"place-items":[...fe(),"baseline"]}],"place-self":[{"place-self":["auto",...fe()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[u,"screen",...U()]}],"min-w":[{"min-w":[u,"screen","none",...U()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",t,Rl,Ya]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Me,jp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Np,je]}],"font-family":[{font:[zN,je,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Me,je]}],"line-clamp":[{"line-clamp":[tt,"none",Me,jp]}],leading:[{leading:[o,...B()]}],"list-image":[{"list-image":["none",Me,je]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Me,je]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",Me,Ya]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[tt,"auto",Me,je]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me,je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me,je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:z()}],"bg-repeat":[{bg:se()}],"bg-size":[{bg:T()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},va,Me,je],radial:["",Me,je],conic:[va,Me,je]},HN,BN]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:k()}],"gradient-via-pos":[{via:k()}],"gradient-to-pos":[{to:k()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:I()}],"rounded-s":[{"rounded-s":I()}],"rounded-e":[{"rounded-e":I()}],"rounded-t":[{"rounded-t":I()}],"rounded-r":[{"rounded-r":I()}],"rounded-b":[{"rounded-b":I()}],"rounded-l":[{"rounded-l":I()}],"rounded-ss":[{"rounded-ss":I()}],"rounded-se":[{"rounded-se":I()}],"rounded-ee":[{"rounded-ee":I()}],"rounded-es":[{"rounded-es":I()}],"rounded-tl":[{"rounded-tl":I()}],"rounded-tr":[{"rounded-tr":I()}],"rounded-br":[{"rounded-br":I()}],"rounded-bl":[{"rounded-bl":I()}],"border-w":[{border:q()}],"border-w-x":[{"border-x":q()}],"border-w-y":[{"border-y":q()}],"border-w-s":[{"border-s":q()}],"border-w-e":[{"border-e":q()}],"border-w-t":[{"border-t":q()}],"border-w-r":[{"border-r":q()}],"border-w-b":[{"border-b":q()}],"border-w-l":[{"border-l":q()}],"divide-x":[{"divide-x":q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,Me,je]}],"outline-w":[{outline:["",tt,Rl,Ya]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",g,Ru,Mu]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",m,Ru,Mu]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[tt,Ya]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":q()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",y,Ru,Mu]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[tt,Me,je]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Q()}],"mask-image-linear-to-pos":[{"mask-linear-to":Q()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":Q()}],"mask-image-t-to-pos":[{"mask-t-to":Q()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":Q()}],"mask-image-r-to-pos":[{"mask-r-to":Q()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":Q()}],"mask-image-b-to-pos":[{"mask-b-to":Q()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":Q()}],"mask-image-l-to-pos":[{"mask-l-to":Q()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":Q()}],"mask-image-x-to-pos":[{"mask-x-to":Q()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":Q()}],"mask-image-y-to-pos":[{"mask-y-to":Q()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[Me,je]}],"mask-image-radial-from-pos":[{"mask-radial-from":Q()}],"mask-image-radial-to-pos":[{"mask-radial-to":Q()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Q()}],"mask-image-conic-to-pos":[{"mask-conic-to":Q()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:z()}],"mask-repeat":[{mask:se()}],"mask-size":[{mask:T()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Me,je]}],filter:[{filter:["","none",Me,je]}],blur:[{blur:ue()}],brightness:[{brightness:[tt,Me,je]}],contrast:[{contrast:[tt,Me,je]}],"drop-shadow":[{"drop-shadow":["","none",b,Ru,Mu]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",tt,Me,je]}],"hue-rotate":[{"hue-rotate":[tt,Me,je]}],invert:[{invert:["",tt,Me,je]}],saturate:[{saturate:[tt,Me,je]}],sepia:[{sepia:["",tt,Me,je]}],"backdrop-filter":[{"backdrop-filter":["","none",Me,je]}],"backdrop-blur":[{"backdrop-blur":ue()}],"backdrop-brightness":[{"backdrop-brightness":[tt,Me,je]}],"backdrop-contrast":[{"backdrop-contrast":[tt,Me,je]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,Me,je]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,Me,je]}],"backdrop-invert":[{"backdrop-invert":["",tt,Me,je]}],"backdrop-opacity":[{"backdrop-opacity":[tt,Me,je]}],"backdrop-saturate":[{"backdrop-saturate":[tt,Me,je]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,Me,je]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Me,je]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",Me,je]}],ease:[{ease:["linear","initial",C,Me,je]}],delay:[{delay:[tt,Me,je]}],animate:[{animate:["none",j,Me,je]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Me,je]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:Ce()}],"scale-x":[{"scale-x":Ce()}],"scale-y":[{"scale-y":Ce()}],"scale-z":[{"scale-z":Ce()}],"scale-3d":["scale-3d"],skew:[{skew:ye()}],"skew-x":[{"skew-x":ye()}],"skew-y":[{"skew-y":ye()}],transform:[{transform:[Me,je,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ne()}],"translate-x":[{"translate-x":Ne()}],"translate-y":[{"translate-y":Ne()}],"translate-z":[{"translate-z":Ne()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me,je]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me,je]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[tt,Rl,Ya,jp]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},GN=CN($N);function Ge(...a){return GN(jo(a))}function Vm({className:a,...e}){return d.jsx(eN,{"data-slot":"tabs",className:Ge("flex flex-col gap-2",a),...e})}function w1({className:a,...e}){return d.jsx(tN,{"data-slot":"tabs-list",className:Ge("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...e})}function ao({className:a,...e}){return d.jsx(nN,{"data-slot":"tabs-trigger",className:Ge("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...e})}function Os({className:a,...e}){return d.jsx(sN,{"data-slot":"tabs-content",className:Ge("flex-1 outline-none",a),...e})}const qN=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YN=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),a0=a=>{const e=YN(a);return e.charAt(0).toUpperCase()+e.slice(1)},S1=(...a)=>a.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),XN=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var WN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const KN=w.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:o,iconNode:l,...u},h)=>w.createElement("svg",{ref:h,...WN,width:e,height:e,stroke:a,strokeWidth:s?Number(t)*24/Number(e):t,className:S1("lucide",r),...!o&&!XN(u)&&{"aria-hidden":"true"},...u},[...l.map(([p,g])=>w.createElement(p,g)),...Array.isArray(o)?o:[o]]));const Ae=(a,e)=>{const t=w.forwardRef(({className:s,...r},o)=>w.createElement(KN,{ref:o,iconNode:e,className:S1(`lucide-${qN(a0(a))}`,`lucide-${a}`,s),...r}));return t.displayName=a0(a),t};const QN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ZN=Ae("arrow-left",QN);const JN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Do=Ae("book-open",JN);const ej=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],tj=Ae("calendar-days",ej);const nj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],go=Ae("calendar",nj);const sj=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ij=Ae("chart-pie",sj);const aj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],A1=Ae("check",aj);const rj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$m=Ae("chevron-down",rj);const oj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vo=Ae("chevron-left",oj);const lj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rd=Ae("chevron-right",lj);const cj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],C1=Ae("chevron-up",cj);const uj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],E1=Ae("circle-check-big",uj);const dj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_1=Ae("circle-check",dj);const hj=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fj=Ae("circle-play",hj);const pj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],mj=Ae("clipboard-list",pj);const gj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lm=Ae("clock",gj);const vj=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],r0=Ae("cloud-rain",vj);const yj=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],xj=Ae("cloud-upload",yj);const bj=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],T1=Ae("code-xml",bj);const wj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],yo=Ae("download",wj);const Sj=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],xo=Ae("ellipsis-vertical",Sj);const Aj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],o0=Ae("eye",Aj);const Cj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],l0=Ae("file-code",Cj);const Ej=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],_j=Ae("file-down",Ej);const Tj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ba=Ae("file-text",Tj);const Nj=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],N1=Ae("folder-kanban",Nj);const jj=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],j1=Ae("folder",jj);const Mj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Rj=Ae("image",Mj);const Dj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],kj=Ae("info",Dj);const Oj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Lj=Ae("layout-grid",Oj);const Pj=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],Ij=Ae("library",Pj);const Bj=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Mp=Ae("lightbulb",Bj);const zj=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Fj=Ae("list-todo",zj);const Hj=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],c0=Ae("list",Hj);const Uj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Vj=Ae("loader-circle",Uj);const $j=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],M1=Ae("maximize-2",$j);const Gj=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Td=Ae("message-square",Gj);const qj=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Yj=Ae("minimize-2",qj);const Xj=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],R1=Ae("monitor",Xj);const Wj=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Rp=Ae("music",Wj);const Kj=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],Qj=Ae("newspaper",Kj);const Zj=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Jj=Ae("octagon-x",Zj);const eM=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],D1=Ae("pause",eM);const tM=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],u0=Ae("pen-line",tM);const nM=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ul=Ae("pen",nM);const sM=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],k1=Ae("play",sM);const iM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ps=Ae("plus",iM);const aM=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],rM=Ae("printer",aM);const oM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],lM=Ae("refresh-cw",oM);const cM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],uM=Ae("rotate-ccw",cM);const dM=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],d0=Ae("rotate-cw",dM);const hM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],h0=Ae("save",hM);const fM=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Ku=Ae("scroll-text",fM);const pM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],O1=Ae("search",pM);const mM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nd=Ae("settings",mM);const gM=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],vM=Ae("sliders-horizontal",gM);const yM=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],xM=Ae("smartphone",yM);const bM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],L1=Ae("star",bM);const wM=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],SM=Ae("text-align-center",wM);const AM=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],CM=Ae("text-align-end",AM);const EM=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],_M=Ae("text-align-start",EM);const TM=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],NM=Ae("timer",TM);const jM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ri=Ae("trash-2",jM);const MM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Qu=Ae("triangle-alert",MM);const RM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Gl=Ae("upload",RM);const DM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kM=Ae("user",DM);const OM=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],f0=Ae("volume-2",OM);const LM=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],p0=Ae("volume-x",LM);const PM=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],m0=Ae("waves",PM);const IM=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],g0=Ae("wind",IM);const BM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cn=Ae("x",BM);const zM=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Dp=Ae("zoom-in",zM);const FM=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],kp=Ae("zoom-out",FM);var HM=(a,e,t,s,r,o,l,u)=>{let h=document.documentElement,p=["light","dark"];function g(b){(Array.isArray(a)?a:[a]).forEach(A=>{let S=A==="class",E=S&&o?r.map(C=>o[C]||C):r;S?(h.classList.remove(...E),h.classList.add(o&&o[b]?o[b]:b)):h.setAttribute(A,b)}),m(b)}function m(b){u&&p.includes(b)&&(h.style.colorScheme=b)}function y(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)g(s);else try{let b=localStorage.getItem(e)||t,A=l&&b==="system"?y():b;g(A)}catch{}},UM=w.createContext(void 0),VM={setTheme:a=>{},themes:[]},$M=()=>{var a;return(a=w.useContext(UM))!=null?a:VM};w.memo(({forcedTheme:a,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:r,defaultTheme:o,value:l,themes:u,nonce:h,scriptProps:p})=>{let g=JSON.stringify([t,e,o,a,u,l,s,r]).slice(1,-1);return w.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${HM.toString()})(${g})`}})});function GM(a){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=a:t.appendChild(document.createTextNode(a))}const qM=a=>{switch(a){case"success":return WM;case"info":return QM;case"warning":return KM;case"error":return ZM;default:return null}},YM=Array(12).fill(0),XM=({visible:a,className:e})=>me.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":a},me.createElement("div",{className:"sonner-spinner"},YM.map((t,s)=>me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),WM=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),KM=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),QM=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ZM=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),JM=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),eR=()=>{const[a,e]=me.useState(document.hidden);return me.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),a};let cm=1;class tR{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...r}=e,o=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:cm++,l=this.toasts.find(h=>h.id===o),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(h=>h.id===o?(this.publish({...h,...e,id:o,title:s}),{...h,...e,id:o,dismissible:u,title:s}):h):this.addToast({title:s,...r,dismissible:u,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let o=s!==void 0,l;const u=r.then(async p=>{if(l=["resolve",p],me.isValidElement(p))o=!1,this.create({id:s,type:"default",message:p});else if(sR(p)&&!p.ok){o=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,y=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,A=typeof m=="object"&&!me.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:y,...A})}else if(p instanceof Error){o=!1;const m=typeof t.error=="function"?await t.error(p):t.error,y=typeof t.description=="function"?await t.description(p):t.description,A=typeof m=="object"&&!me.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:y,...A})}else if(t.success!==void 0){o=!1;const m=typeof t.success=="function"?await t.success(p):t.success,y=typeof t.description=="function"?await t.description(p):t.description,A=typeof m=="object"&&!me.isValidElement(m)?m:{message:m};this.create({id:s,type:"success",description:y,...A})}}).catch(async p=>{if(l=["reject",p],t.error!==void 0){o=!1;const g=typeof t.error=="function"?await t.error(p):t.error,m=typeof t.description=="function"?await t.description(p):t.description,b=typeof g=="object"&&!me.isValidElement(g)?g:{message:g};this.create({id:s,type:"error",description:m,...b})}}).finally(()=>{o&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),h=()=>new Promise((p,g)=>u.then(()=>l[0]==="reject"?g(l[1]):p(l[1])).catch(g));return typeof s!="string"&&typeof s!="number"?{unwrap:h}:Object.assign(s,{unwrap:h})},this.custom=(e,t)=>{const s=t?.id||cm++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const $n=new tR,nR=(a,e)=>{const t=e?.id||cm++;return $n.addToast({title:a,...e,id:t}),t},sR=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",iR=nR,aR=()=>$n.toasts,rR=()=>$n.getActiveToasts(),Se=Object.assign(iR,{success:$n.success,info:$n.info,warning:$n.warning,error:$n.error,custom:$n.custom,message:$n.message,promise:$n.promise,dismiss:$n.dismiss,loading:$n.loading},{getHistory:aR,getToasts:rR});GM("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Du(a){return a.label!==void 0}const oR=3,lR="24px",cR="16px",v0=4e3,uR=356,dR=14,hR=45,fR=200;function Ws(...a){return a.filter(Boolean).join(" ")}function pR(a){const[e,t]=a.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}const mR=a=>{var e,t,s,r,o,l,u,h,p;const{invert:g,toast:m,unstyled:y,interacting:b,setHeights:A,visibleToasts:S,heights:E,index:C,toasts:j,expanded:N,removeToast:M,defaultRichColors:O,closeButton:P,style:L,cancelButtonStyle:B,actionButtonStyle:F,className:$="",descriptionClassName:Y="",duration:te,position:oe,gap:ie,expandByDefault:fe,classNames:R,icons:U,closeButtonAriaLabel:H="Close toast"}=a,[z,se]=me.useState(null),[T,k]=me.useState(null),[I,q]=me.useState(!1),[X,ce]=me.useState(!1),[Q,ue]=me.useState(!1),[pe,Ce]=me.useState(!1),[ye,Ne]=me.useState(!1),[Be,De]=me.useState(0),[K,be]=me.useState(0),Le=me.useRef(m.duration||te||v0),et=me.useRef(null),ut=me.useRef(null),Bt=C===0,mt=C+1<=S,gt=m.type,ve=m.dismissible!==!1,Qe=m.className||"",re=m.descriptionClassName||"",we=me.useMemo(()=>E.findIndex($e=>$e.toastId===m.id)||0,[E,m.id]),He=me.useMemo(()=>{var $e;return($e=m.closeButton)!=null?$e:P},[m.closeButton,P]),vt=me.useMemo(()=>m.duration||te||v0,[m.duration,te]),Ot=me.useRef(0),Nt=me.useRef(0),Xn=me.useRef(0),On=me.useRef(null),[di,mn]=oe.split("-"),Wn=me.useMemo(()=>E.reduce(($e,ge,ze)=>ze>=we?$e:$e+ge.height,0),[E,we]),on=eR(),zo=m.invert||g,ja=gt==="loading";Nt.current=me.useMemo(()=>we*ie+Wn,[we,Wn]),me.useEffect(()=>{Le.current=vt},[vt]),me.useEffect(()=>{q(!0)},[]),me.useEffect(()=>{const $e=ut.current;if($e){const ge=$e.getBoundingClientRect().height;return be(ge),A(ze=>[{toastId:m.id,height:ge,position:m.position},...ze]),()=>A(ze=>ze.filter(Ue=>Ue.toastId!==m.id))}},[A,m.id]),me.useLayoutEffect(()=>{if(!I)return;const $e=ut.current,ge=$e.style.height;$e.style.height="auto";const ze=$e.getBoundingClientRect().height;$e.style.height=ge,be(ze),A(Ue=>Ue.find(ot=>ot.toastId===m.id)?Ue.map(ot=>ot.toastId===m.id?{...ot,height:ze}:ot):[{toastId:m.id,height:ze,position:m.position},...Ue])},[I,m.title,m.description,A,m.id,m.jsx,m.action,m.cancel]);const us=me.useCallback(()=>{ce(!0),De(Nt.current),A($e=>$e.filter(ge=>ge.toastId!==m.id)),setTimeout(()=>{M(m)},fR)},[m,M,A,Nt]);me.useEffect(()=>{if(m.promise&&gt==="loading"||m.duration===1/0||m.type==="loading")return;let $e;return N||b||on?(()=>{if(Xn.current<Ot.current){const Ue=new Date().getTime()-Ot.current;Le.current=Le.current-Ue}Xn.current=new Date().getTime()})():Le.current!==1/0&&(Ot.current=new Date().getTime(),$e=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),us()},Le.current)),()=>clearTimeout($e)},[N,b,m,gt,on,us]),me.useEffect(()=>{m.delete&&(us(),m.onDismiss==null||m.onDismiss.call(m,m))},[us,m.delete]);function Gi(){var $e;if(U?.loading){var ge;return me.createElement("div",{className:Ws(R?.loader,m==null||(ge=m.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":gt==="loading"},U.loading)}return me.createElement(XM,{className:Ws(R?.loader,m==null||($e=m.classNames)==null?void 0:$e.loader),visible:gt==="loading"})}const qi=m.icon||U?.[gt]||qM(gt);var hi,ds;return me.createElement("li",{tabIndex:0,ref:ut,className:Ws($,Qe,R?.toast,m==null||(e=m.classNames)==null?void 0:e.toast,R?.default,R?.[gt],m==null||(t=m.classNames)==null?void 0:t[gt]),"data-sonner-toast":"","data-rich-colors":(hi=m.richColors)!=null?hi:O,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":I,"data-promise":!!m.promise,"data-swiped":ye,"data-removed":X,"data-visible":mt,"data-y-position":di,"data-x-position":mn,"data-index":C,"data-front":Bt,"data-swiping":Q,"data-dismissible":ve,"data-type":gt,"data-invert":zo,"data-swipe-out":pe,"data-swipe-direction":T,"data-expanded":!!(N||fe&&I),"data-testid":m.testId,style:{"--index":C,"--toasts-before":C,"--z-index":j.length-C,"--offset":`${X?Be:Nt.current}px`,"--initial-height":fe?"auto":`${K}px`,...L,...m.style},onDragEnd:()=>{ue(!1),se(null),On.current=null},onPointerDown:$e=>{$e.button!==2&&(ja||!ve||(et.current=new Date,De(Nt.current),$e.target.setPointerCapture($e.pointerId),$e.target.tagName!=="BUTTON"&&(ue(!0),On.current={x:$e.clientX,y:$e.clientY})))},onPointerUp:()=>{var $e,ge,ze;if(pe||!ve)return;On.current=null;const Ue=Number((($e=ut.current)==null?void 0:$e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yt=Number(((ge=ut.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ot=new Date().getTime()-((ze=et.current)==null?void 0:ze.getTime()),_n=z==="x"?Ue:yt,Us=Math.abs(_n)/ot;if(Math.abs(_n)>=hR||Us>.11){De(Nt.current),m.onDismiss==null||m.onDismiss.call(m,m),k(z==="x"?Ue>0?"right":"left":yt>0?"down":"up"),us(),Ce(!0);return}else{var ln,Ht;(ln=ut.current)==null||ln.style.setProperty("--swipe-amount-x","0px"),(Ht=ut.current)==null||Ht.style.setProperty("--swipe-amount-y","0px")}Ne(!1),ue(!1),se(null)},onPointerMove:$e=>{var ge,ze,Ue;if(!On.current||!ve||((ge=window.getSelection())==null?void 0:ge.toString().length)>0)return;const ot=$e.clientY-On.current.y,_n=$e.clientX-On.current.x;var Us;const ln=(Us=a.swipeDirections)!=null?Us:pR(oe);!z&&(Math.abs(_n)>1||Math.abs(ot)>1)&&se(Math.abs(_n)>Math.abs(ot)?"x":"y");let Ht={x:0,y:0};const Ts=Ns=>1/(1.5+Math.abs(Ns)/20);if(z==="y"){if(ln.includes("top")||ln.includes("bottom"))if(ln.includes("top")&&ot<0||ln.includes("bottom")&&ot>0)Ht.y=ot;else{const Ns=ot*Ts(ot);Ht.y=Math.abs(Ns)<Math.abs(ot)?Ns:ot}}else if(z==="x"&&(ln.includes("left")||ln.includes("right")))if(ln.includes("left")&&_n<0||ln.includes("right")&&_n>0)Ht.x=_n;else{const Ns=_n*Ts(_n);Ht.x=Math.abs(Ns)<Math.abs(_n)?Ns:_n}(Math.abs(Ht.x)>0||Math.abs(Ht.y)>0)&&Ne(!0),(ze=ut.current)==null||ze.style.setProperty("--swipe-amount-x",`${Ht.x}px`),(Ue=ut.current)==null||Ue.style.setProperty("--swipe-amount-y",`${Ht.y}px`)}},He&&!m.jsx&&gt!=="loading"?me.createElement("button",{"aria-label":H,"data-disabled":ja,"data-close-button":!0,onClick:ja||!ve?()=>{}:()=>{us(),m.onDismiss==null||m.onDismiss.call(m,m)},className:Ws(R?.closeButton,m==null||(s=m.classNames)==null?void 0:s.closeButton)},(ds=U?.close)!=null?ds:JM):null,(gt||m.icon||m.promise)&&m.icon!==null&&(U?.[gt]!==null||m.icon)?me.createElement("div",{"data-icon":"",className:Ws(R?.icon,m==null||(r=m.classNames)==null?void 0:r.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Gi():null,m.type!=="loading"?qi:null):null,me.createElement("div",{"data-content":"",className:Ws(R?.content,m==null||(o=m.classNames)==null?void 0:o.content)},me.createElement("div",{"data-title":"",className:Ws(R?.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?me.createElement("div",{"data-description":"",className:Ws(Y,re,R?.description,m==null||(u=m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),me.isValidElement(m.cancel)?m.cancel:m.cancel&&Du(m.cancel)?me.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||B,onClick:$e=>{Du(m.cancel)&&ve&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,$e),us())},className:Ws(R?.cancelButton,m==null||(h=m.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,me.isValidElement(m.action)?m.action:m.action&&Du(m.action)?me.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||F,onClick:$e=>{Du(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,$e),!$e.defaultPrevented&&us())},className:Ws(R?.actionButton,m==null||(p=m.classNames)==null?void 0:p.actionButton)},m.action.label):null)};function y0(){if(typeof window>"u"||typeof document>"u")return"ltr";const a=document.documentElement.getAttribute("dir");return a==="auto"||!a?window.getComputedStyle(document.documentElement).direction:a}function gR(a,e){const t={};return[a,e].forEach((s,r)=>{const o=r===1,l=o?"--mobile-offset":"--offset",u=o?cR:lR;function h(p){["top","right","bottom","left"].forEach(g=>{t[`${l}-${g}`]=typeof p=="number"?`${p}px`:p})}typeof s=="number"||typeof s=="string"?h(s):typeof s=="object"?["top","right","bottom","left"].forEach(p=>{s[p]===void 0?t[`${l}-${p}`]=u:t[`${l}-${p}`]=typeof s[p]=="number"?`${s[p]}px`:s[p]}):h(u)}),t}const vR=me.forwardRef(function(e,t){const{id:s,invert:r,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:h,className:p,offset:g,mobileOffset:m,theme:y="light",richColors:b,duration:A,style:S,visibleToasts:E=oR,toastOptions:C,dir:j=y0(),gap:N=dR,icons:M,containerAriaLabel:O="Notifications"}=e,[P,L]=me.useState([]),B=me.useMemo(()=>s?P.filter(I=>I.toasterId===s):P.filter(I=>!I.toasterId),[P,s]),F=me.useMemo(()=>Array.from(new Set([o].concat(B.filter(I=>I.position).map(I=>I.position)))),[B,o]),[$,Y]=me.useState([]),[te,oe]=me.useState(!1),[ie,fe]=me.useState(!1),[R,U]=me.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=me.useRef(null),z=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),se=me.useRef(null),T=me.useRef(!1),k=me.useCallback(I=>{L(q=>{var X;return(X=q.find(ce=>ce.id===I.id))!=null&&X.delete||$n.dismiss(I.id),q.filter(({id:ce})=>ce!==I.id)})},[]);return me.useEffect(()=>$n.subscribe(I=>{if(I.dismiss){requestAnimationFrame(()=>{L(q=>q.map(X=>X.id===I.id?{...X,delete:!0}:X))});return}setTimeout(()=>{Vw.flushSync(()=>{L(q=>{const X=q.findIndex(ce=>ce.id===I.id);return X!==-1?[...q.slice(0,X),{...q[X],...I},...q.slice(X+1)]:[I,...q]})})})}),[P]),me.useEffect(()=>{if(y!=="system"){U(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;const I=window.matchMedia("(prefers-color-scheme: dark)");try{I.addEventListener("change",({matches:q})=>{U(q?"dark":"light")})}catch{I.addListener(({matches:X})=>{try{U(X?"dark":"light")}catch(ce){console.error(ce)}})}},[y]),me.useEffect(()=>{P.length<=1&&oe(!1)},[P]),me.useEffect(()=>{const I=q=>{var X;if(l.every(ue=>q[ue]||q.code===ue)){var Q;oe(!0),(Q=H.current)==null||Q.focus()}q.code==="Escape"&&(document.activeElement===H.current||(X=H.current)!=null&&X.contains(document.activeElement))&&oe(!1)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[l]),me.useEffect(()=>{if(H.current)return()=>{se.current&&(se.current.focus({preventScroll:!0}),se.current=null,T.current=!1)}},[H.current]),me.createElement("section",{ref:t,"aria-label":`${O} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((I,q)=>{var X;const[ce,Q]=I.split("-");return B.length?me.createElement("ol",{key:I,dir:j==="auto"?y0():j,tabIndex:-1,ref:H,className:p,"data-sonner-toaster":!0,"data-sonner-theme":R,"data-y-position":ce,"data-x-position":Q,style:{"--front-toast-height":`${((X=$[0])==null?void 0:X.height)||0}px`,"--width":`${uR}px`,"--gap":`${N}px`,...S,...gR(g,m)},onBlur:ue=>{T.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(T.current=!1,se.current&&(se.current.focus({preventScroll:!0}),se.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||T.current||(T.current=!0,se.current=ue.relatedTarget)},onMouseEnter:()=>oe(!0),onMouseMove:()=>oe(!0),onMouseLeave:()=>{ie||oe(!1)},onDragEnd:()=>oe(!1),onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||fe(!0)},onPointerUp:()=>fe(!1)},B.filter(ue=>!ue.position&&q===0||ue.position===I).map((ue,pe)=>{var Ce,ye;return me.createElement(mR,{key:ue.id,icons:M,index:pe,toast:ue,defaultRichColors:b,duration:(Ce=C?.duration)!=null?Ce:A,className:C?.className,descriptionClassName:C?.descriptionClassName,invert:r,visibleToasts:E,closeButton:(ye=C?.closeButton)!=null?ye:h,interacting:ie,position:I,style:C?.style,unstyled:C?.unstyled,classNames:C?.classNames,cancelButtonStyle:C?.cancelButtonStyle,actionButtonStyle:C?.actionButtonStyle,closeButtonAriaLabel:C?.closeButtonAriaLabel,removeToast:k,toasts:B.filter(Ne=>Ne.position==ue.position),heights:$.filter(Ne=>Ne.position==ue.position),setHeights:Y,expandByDefault:u,gap:N,expanded:te,swipeDirections:e.swipeDirections})})):null}))}),yR=({...a})=>{const{theme:e="system"}=$M();return d.jsx(vR,{theme:e,className:"toaster group",icons:{success:d.jsx(_1,{className:"size-4"}),info:d.jsx(kj,{className:"size-4"}),warning:d.jsx(Qu,{className:"size-4"}),error:d.jsx(Jj,{className:"size-4"}),loading:d.jsx(Vj,{className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...a})},Op=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#d946ef","#f43f5e","#6b7280"],xR=[{id:"cat-entertainment",name:"",color:"#f43f5e"},{id:"cat-tech",name:"",color:"#3b82f6"},{id:"cat-academic",name:"",color:"#8b5cf6"},{id:"cat-literature",name:"",color:"#10b981"},{id:"cat-business",name:"",color:"#f59e0b"},{id:"cat-other",name:"",color:"#6b7280"}];function x0(a,e){const t=e.split(".").pop()?.toLowerCase();return a==="application/pdf"||t==="pdf"?"pdf":a.startsWith("text/")||t==="txt"||t==="md"||t==="json"||t==="xml"||t==="csv"?"txt":t==="epub"||a==="application/epub+zip"?"epub":a.startsWith("image/")||["jpg","jpeg","png","gif","webp","bmp","svg"].includes(t||"")?"image":["doc","docx","odt","rtf"].includes(t||"")||a.includes("word")||a==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"?"doc":["ppt","pptx","odp"].includes(t||"")||a.includes("powerpoint")||a==="application/vnd.openxmlformats-officedocument.presentationml.presentation"?"ppt":["zip","7z","rar","tar","gz","bz2"].includes(t||"")||a.includes("zip")||a.includes("compressed")||a==="application/x-7z-compressed"||a==="application/x-rar-compressed"?"archive":a.startsWith("audio/")||["mp3","wav","ogg","flac","aac","m4a"].includes(t||"")?"audio":a.startsWith("video/")||["mp4","avi","mkv","mov","wmv"].includes(t||"")?"video":"other"}function bR(a){switch(a){case"pdf":return"";case"txt":return"";case"epub":return"";case"image":return"";case"doc":return"";case"ppt":return"";case"archive":return"";case"audio":return"";case"video":return"";default:return""}}function wR(a){switch(a){case"pdf":return"PDF";case"txt":return"";case"epub":return"EPUB";case"image":return"";case"doc":return"";case"ppt":return"";case"archive":return"";case"audio":return"";case"video":return"";default:return""}}function SR(a){return["pdf","txt","epub","image"].includes(a)}const b0="jian-v1.1.0",Zs=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,AR=()=>{let a=localStorage.getItem("knowledge-library-device-id");return a||(a=Zs(),localStorage.setItem("knowledge-library-device-id",a)),a},P1=()=>Math.random().toString(36).substring(2,8).toUpperCase(),um={lastSyncAt:null,syncStatus:"idle",deviceId:AR(),syncCode:P1()},Lp={books:[],categories:xR,pdfAnnotations:[],projects:[],notes:[],sync:um},CR="KnowledgeLibraryDB",ER=2,Aa="files";async function Gm(){return new Promise((a,e)=>{const t=indexedDB.open(CR,ER);t.onerror=()=>e(t.error),t.onsuccess=()=>a(t.result),t.onupgradeneeded=s=>{const r=s.target.result;r.objectStoreNames.contains(Aa)||r.createObjectStore(Aa,{keyPath:"id"})}})}async function w0(a){const e=await Gm();return new Promise((t,s)=>{const l=e.transaction([Aa],"readwrite").objectStore(Aa).put(a);l.onsuccess=()=>t(),l.onerror=()=>s(l.error)})}async function S0(a){const e=await Gm();return new Promise((t,s)=>{const l=e.transaction([Aa],"readonly").objectStore(Aa).get(a);l.onsuccess=()=>t(l.result||null),l.onerror=()=>s(l.error)})}async function Pp(a){const e=await Gm();return new Promise((t,s)=>{const l=e.transaction([Aa],"readwrite").objectStore(Aa).delete(a);l.onsuccess=()=>t(),l.onerror=()=>s(l.error)})}function _R(){const[a,e]=w.useState(Lp),[t,s]=w.useState(!1);w.useEffect(()=>{try{const T=localStorage.getItem(b0);if(T){const k=JSON.parse(T);e({...Lp,...k,sync:{...um,...k.sync}})}}catch(T){console.error("Failed to load data:",T)}s(!0)},[]),w.useEffect(()=>{t&&localStorage.setItem(b0,JSON.stringify(a))},[a,t]);const r=w.useCallback(T=>{const k={...T,id:Zs(),annotations:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(I=>({...I,books:[k,...I.books]})),k},[]),o=w.useCallback((T,k)=>{e(I=>({...I,books:I.books.map(q=>q.id===T?{...q,...k,updatedAt:new Date().toISOString()}:q)}))},[]),l=w.useCallback(async T=>{const k=a.books.find(I=>I.id===T);k?.fileId&&await Pp(k.fileId),e(I=>({...I,books:I.books.filter(q=>q.id!==T),pdfAnnotations:I.pdfAnnotations.filter(q=>q.bookId!==T)}))},[a.books]),u=w.useCallback(T=>a.books.find(k=>k.id===T),[a.books]),h=w.useCallback(async(T,k)=>{const I=await k.arrayBuffer(),q=Zs(),X=x0(k.type,k.name),ce={id:q,name:k.name,type:k.type,fileType:X,size:k.size,data:I,createdAt:new Date().toISOString()};return await w0(ce),o(T,{fileId:q,fileType:X,fileName:k.name}),ce},[o]),p=w.useCallback(async T=>await S0(T),[]),g=w.useCallback(async T=>{const k=u(T);k?.fileId&&(await Pp(k.fileId),o(T,{fileId:void 0,fileType:void 0,fileName:void 0}))},[u,o]),m=w.useCallback(T=>{const k={...T,id:Zs(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(I=>({...I,pdfAnnotations:[k,...I.pdfAnnotations]})),k},[]),y=w.useCallback((T,k)=>{e(I=>({...I,pdfAnnotations:I.pdfAnnotations.map(q=>q.id===T?{...q,content:k,updatedAt:new Date().toISOString()}:q)}))},[]),b=w.useCallback(T=>{e(k=>({...k,pdfAnnotations:k.pdfAnnotations.filter(I=>I.id!==T)}))},[]),A=w.useCallback(T=>a.pdfAnnotations.filter(k=>k.bookId===T),[a.pdfAnnotations]),S=w.useCallback(T=>{const k={...T,id:Zs(),knowledge:[],lessons:[],files:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(I=>({...I,projects:[k,...I.projects]})),k},[]),E=w.useCallback(T=>{e(k=>({...k,projects:k.projects.filter(I=>I.id!==T)}))},[]),C=w.useCallback((T,k)=>{const I={...k,id:Zs(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(q=>({...q,projects:q.projects.map(X=>X.id===T?{...X,knowledge:[I,...X.knowledge],updatedAt:new Date().toISOString()}:X)})),I},[]),j=w.useCallback((T,k)=>{const I={...k,id:Zs(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(q=>({...q,projects:q.projects.map(X=>X.id===T?{...X,lessons:[I,...X.lessons],updatedAt:new Date().toISOString()}:X)})),I},[]),N=w.useCallback(async(T,k,I)=>{const q=await k.arrayBuffer(),X=Zs(),ce=x0(k.type,k.name),Q={id:X,name:k.name,type:k.type,fileType:ce,size:k.size,data:q,createdAt:new Date().toISOString()};await w0(Q);const ue={id:X,name:k.name,type:k.type,fileType:ce,size:k.size,description:I,createdAt:new Date().toISOString()};return e(pe=>({...pe,projects:pe.projects.map(Ce=>Ce.id===T?{...Ce,files:[ue,...Ce.files],updatedAt:new Date().toISOString()}:Ce)})),ue},[]),M=w.useCallback(async(T,k)=>{await Pp(k),e(I=>({...I,projects:I.projects.map(q=>q.id===T?{...q,files:q.files.filter(X=>X.id!==k),updatedAt:new Date().toISOString()}:q)}))},[]),O=w.useCallback(async T=>await S0(T),[]),P=w.useCallback(T=>{const k={...T,id:Zs(),completed:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(I=>({...I,notes:[k,...I.notes]})),k},[]),L=w.useCallback((T,k)=>{e(I=>({...I,notes:I.notes.map(q=>q.id===T?{...q,...k,completedAt:k.completed?new Date().toISOString():q.completedAt,updatedAt:new Date().toISOString()}:q)}))},[]),B=w.useCallback(T=>{e(k=>({...k,notes:k.notes.filter(I=>I.id!==T)}))},[]),F=w.useCallback(T=>{e(k=>({...k,notes:k.notes.map(I=>I.id===T?{...I,completed:!I.completed,completedAt:I.completed?void 0:new Date().toISOString(),updatedAt:new Date().toISOString()}:I)}))},[]),$=w.useCallback((T,k)=>{const I={id:Zs(),name:T,color:k};return e(q=>({...q,categories:[...q.categories,I]})),I},[]),Y=w.useCallback(T=>{e(k=>({...k,categories:k.categories.filter(I=>I.id!==T),books:k.books.map(I=>I.categoryId===T?{...I,categoryId:"cat-other",updatedAt:new Date().toISOString()}:I)}))},[]),te=w.useCallback(T=>a.books.filter(k=>{if(T.categoryId&&k.categoryId!==T.categoryId||T.status&&k.status!==T.status||T.type&&k.type!==T.type||T.tags?.length&&!T.tags.some(I=>k.tags.includes(I)))return!1;if(T.searchQuery){const I=T.searchQuery.toLowerCase();if(!(k.title.toLowerCase().includes(I)||k.author.toLowerCase().includes(I)||k.description?.toLowerCase().includes(I)||k.tags.some(X=>X.toLowerCase().includes(I))))return!1}return!0}),[a.books]),oe=w.useCallback(()=>{const T=new Set;return a.books.forEach(k=>k.tags.forEach(I=>T.add(I))),Array.from(T).sort()},[a.books]),ie=w.useCallback(()=>{const T=a.books;return{total:T.length,completed:T.filter(k=>k.status==="completed").length,reading:T.filter(k=>k.status==="reading").length,unread:T.filter(k=>k.status==="unread").length,totalAnnotations:T.reduce((k,I)=>k+I.annotations.length,0),categoryStats:a.categories.map(k=>({...k,count:T.filter(I=>I.categoryId===k.id).length})),projectCount:a.projects.length,noteCount:a.notes.length,pendingNotes:a.notes.filter(k=>!k.completed&&k.type==="todo").length}},[a.books,a.categories,a.projects,a.notes]),fe=w.useCallback((T,k)=>{try{const I={data:k,timestamp:Date.now(),deviceId:k.sync.deviceId};return localStorage.setItem(`knowledge-sync-${T}`,JSON.stringify(I)),e(q=>({...q,sync:{...q.sync,lastSyncAt:new Date().toISOString(),syncStatus:"idle"}})),!0}catch(I){return console.error("Sync to cloud failed:",I),!1}},[]),R=w.useCallback(T=>{try{const k=localStorage.getItem(`knowledge-sync-${T}`);return k?JSON.parse(k).data:null}catch(k){return console.error("Sync from cloud failed:",k),null}},[]),U=w.useCallback(T=>{e(k=>{const I=new Map;[...k.books,...T.books].forEach(ue=>{const pe=I.get(ue.id);(!pe||new Date(ue.updatedAt)>new Date(pe.updatedAt))&&I.set(ue.id,ue)});const q=new Map;[...k.categories,...T.categories].forEach(ue=>{q.has(ue.id)||q.set(ue.id,ue)});const X=new Map;[...k.pdfAnnotations,...T.pdfAnnotations].forEach(ue=>{const pe=X.get(ue.id);(!pe||new Date(ue.updatedAt)>new Date(pe.updatedAt))&&X.set(ue.id,ue)});const ce=new Map;[...k.projects,...T.projects].forEach(ue=>{const pe=ce.get(ue.id);(!pe||new Date(ue.updatedAt)>new Date(pe.updatedAt))&&ce.set(ue.id,ue)});const Q=new Map;return[...k.notes,...T.notes].forEach(ue=>{const pe=Q.get(ue.id);(!pe||new Date(ue.updatedAt)>new Date(pe.updatedAt))&&Q.set(ue.id,ue)}),{books:Array.from(I.values()),categories:Array.from(q.values()),pdfAnnotations:Array.from(X.values()),projects:Array.from(ce.values()),notes:Array.from(Q.values()),sync:{...k.sync,lastSyncAt:new Date().toISOString()}}})},[]),H=w.useCallback(()=>JSON.stringify(a,null,2),[a]),z=w.useCallback(T=>{try{const k=JSON.parse(T);return e({...Lp,...k,sync:{...um,...k.sync}}),!0}catch{return!1}},[]),se=w.useCallback(()=>{const T=P1();return e(k=>({...k,sync:{...k.sync,syncCode:T}})),T},[]);return{books:a.books,categories:a.categories,projects:a.projects,notes:a.notes,sync:a.sync,isLoaded:t,addBook:r,updateBook:o,deleteBook:l,getBook:u,filterBooks:te,uploadFile:h,downloadFile:p,deleteBookFile:g,addPDFAnnotation:m,updatePDFAnnotation:y,deletePDFAnnotation:b,getBookPDFAnnotations:A,addProject:S,deleteProject:E,addProjectKnowledge:C,addProjectLesson:j,addProjectFile:N,deleteProjectFile:M,downloadProjectFile:O,addNote:P,updateNote:L,deleteNote:B,toggleNoteComplete:F,addCategory:$,deleteCategory:Y,getAllTags:oe,getStats:ie,exportData:H,importData:z,regenerateSyncCode:se,syncDataToCloud:fe,syncDataFromCloud:R,mergeData:U}}var TR=Symbol.for("react.lazy"),od=Fm[" use ".trim().toString()];function NR(a){return typeof a=="object"&&a!==null&&"then"in a}function I1(a){return a!=null&&typeof a=="object"&&"$$typeof"in a&&a.$$typeof===TR&&"_payload"in a&&NR(a._payload)}function qm(a){const e=jR(a),t=w.forwardRef((s,r)=>{let{children:o,...l}=s;I1(o)&&typeof od=="function"&&(o=od(o._payload));const u=w.Children.toArray(o),h=u.find(RR);if(h){const p=h.props.children,g=u.map(m=>m===h?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:m);return d.jsx(e,{...l,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,g):null})}return d.jsx(e,{...l,ref:r,children:o})});return t.displayName=`${a}.Slot`,t}var B1=qm("Slot");function jR(a){const e=w.forwardRef((t,s)=>{let{children:r,...o}=t;if(I1(r)&&typeof od=="function"&&(r=od(r._payload)),w.isValidElement(r)){const l=kR(r),u=DR(o,r.props);return r.type!==w.Fragment&&(u.ref=s?Vi(s,l):l),w.cloneElement(r,u)}return w.Children.count(r)>1?w.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var MR=Symbol("radix.slottable");function RR(a){return w.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===MR}function DR(a,e){const t={...e};for(const s in e){const r=a[s],o=e[s];/^on[A-Z]/.test(s)?r&&o?t[s]=(...u)=>{const h=o(...u);return r(...u),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...o}:s==="className"&&(t[s]=[r,o].filter(Boolean).join(" "))}return{...a,...t}}function kR(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}const A0=a=>typeof a=="boolean"?`${a}`:a===0?"0":a,C0=jo,z1=(a,e)=>t=>{var s;if(e?.variants==null)return C0(a,t?.class,t?.className);const{variants:r,defaultVariants:o}=e,l=Object.keys(r).map(p=>{const g=t?.[p],m=o?.[p];if(g===null)return null;const y=A0(g)||A0(m);return r[p][y]}),u=t&&Object.entries(t).reduce((p,g)=>{let[m,y]=g;return y===void 0||(p[m]=y),p},{}),h=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((p,g)=>{let{class:m,className:y,...b}=g;return Object.entries(b).every(A=>{let[S,E]=A;return Array.isArray(E)?E.includes({...o,...u}[S]):{...o,...u}[S]===E})?[...p,m,y]:p},[]);return C0(a,l,h,t?.class,t?.className)},Ym=z1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function ae({className:a,variant:e="default",size:t="default",asChild:s=!1,...r}){const o=s?B1:"button";return d.jsx(o,{"data-slot":"button","data-variant":e,"data-size":t,className:Ge(Ym({variant:e,size:t,className:a})),...r})}const OR=z1("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function fn({className:a,variant:e,asChild:t=!1,...s}){const r=t?B1:"span";return d.jsx(r,{"data-slot":"badge",className:Ge(OR({variant:e}),a),...s})}function LR(a,e=globalThis?.document){const t=An(a);w.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var PR="DismissableLayer",dm="dismissableLayer.update",IR="dismissableLayer.pointerDownOutside",BR="dismissableLayer.focusOutside",E0,F1=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jd=w.forwardRef((a,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...h}=a,p=w.useContext(F1),[g,m]=w.useState(null),y=g?.ownerDocument??globalThis?.document,[,b]=w.useState({}),A=qe(e,L=>m(L)),S=Array.from(p.layers),[E]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),C=S.indexOf(E),j=g?S.indexOf(g):-1,N=p.layersWithOutsidePointerEventsDisabled.size>0,M=j>=C,O=HR(L=>{const B=L.target,F=[...p.branches].some($=>$.contains(B));!M||F||(r?.(L),l?.(L),L.defaultPrevented||u?.())},y),P=UR(L=>{const B=L.target;[...p.branches].some($=>$.contains(B))||(o?.(L),l?.(L),L.defaultPrevented||u?.())},y);return LR(L=>{j===p.layers.size-1&&(s?.(L),!L.defaultPrevented&&u&&(L.preventDefault(),u()))},y),w.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(E0=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),_0(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=E0)}},[g,y,t,p]),w.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),_0())},[g,p]),w.useEffect(()=>{const L=()=>b({});return document.addEventListener(dm,L),()=>document.removeEventListener(dm,L)},[]),d.jsx(Ie.div,{...h,ref:A,style:{pointerEvents:N?M?"auto":"none":void 0,...a.style},onFocusCapture:xe(a.onFocusCapture,P.onFocusCapture),onBlurCapture:xe(a.onBlurCapture,P.onBlurCapture),onPointerDownCapture:xe(a.onPointerDownCapture,O.onPointerDownCapture)})});jd.displayName=PR;var zR="DismissableLayerBranch",FR=w.forwardRef((a,e)=>{const t=w.useContext(F1),s=w.useRef(null),r=qe(e,s);return w.useEffect(()=>{const o=s.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),d.jsx(Ie.div,{...a,ref:r})});FR.displayName=zR;function HR(a,e=globalThis?.document){const t=An(a),s=w.useRef(!1),r=w.useRef(()=>{});return w.useEffect(()=>{const o=u=>{if(u.target&&!s.current){let h=function(){H1(IR,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=h,e.addEventListener("click",r.current,{once:!0})):h()}else e.removeEventListener("click",r.current);s.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function UR(a,e=globalThis?.document){const t=An(a),s=w.useRef(!1);return w.useEffect(()=>{const r=o=>{o.target&&!s.current&&H1(BR,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function _0(){const a=new CustomEvent(dm);document.dispatchEvent(a)}function H1(a,e,t,{discrete:s}){const r=t.originalEvent.target,o=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(a,e,{once:!0}),s?$w(r,o):r.dispatchEvent(o)}var Ip="focusScope.autoFocusOnMount",Bp="focusScope.autoFocusOnUnmount",T0={bubbles:!1,cancelable:!0},VR="FocusScope",Md=w.forwardRef((a,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:o,...l}=a,[u,h]=w.useState(null),p=An(r),g=An(o),m=w.useRef(null),y=qe(e,S=>h(S)),b=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(s){let S=function(N){if(b.paused||!u)return;const M=N.target;u.contains(M)?m.current=M:ya(m.current,{select:!0})},E=function(N){if(b.paused||!u)return;const M=N.relatedTarget;M!==null&&(u.contains(M)||ya(m.current,{select:!0}))},C=function(N){if(document.activeElement===document.body)for(const O of N)O.removedNodes.length>0&&ya(u)};document.addEventListener("focusin",S),document.addEventListener("focusout",E);const j=new MutationObserver(C);return u&&j.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",E),j.disconnect()}}},[s,u,b.paused]),w.useEffect(()=>{if(u){j0.add(b);const S=document.activeElement;if(!u.contains(S)){const C=new CustomEvent(Ip,T0);u.addEventListener(Ip,p),u.dispatchEvent(C),C.defaultPrevented||($R(WR(U1(u)),{select:!0}),document.activeElement===S&&ya(u))}return()=>{u.removeEventListener(Ip,p),setTimeout(()=>{const C=new CustomEvent(Bp,T0);u.addEventListener(Bp,g),u.dispatchEvent(C),C.defaultPrevented||ya(S??document.body,{select:!0}),u.removeEventListener(Bp,g),j0.remove(b)},0)}}},[u,p,g,b]);const A=w.useCallback(S=>{if(!t&&!s||b.paused)return;const E=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,C=document.activeElement;if(E&&C){const j=S.currentTarget,[N,M]=GR(j);N&&M?!S.shiftKey&&C===M?(S.preventDefault(),t&&ya(N,{select:!0})):S.shiftKey&&C===N&&(S.preventDefault(),t&&ya(M,{select:!0})):C===j&&S.preventDefault()}},[t,s,b.paused]);return d.jsx(Ie.div,{tabIndex:-1,...l,ref:y,onKeyDown:A})});Md.displayName=VR;function $R(a,{select:e=!1}={}){const t=document.activeElement;for(const s of a)if(ya(s,{select:e}),document.activeElement!==t)return}function GR(a){const e=U1(a),t=N0(e,a),s=N0(e.reverse(),a);return[t,s]}function U1(a){const e=[],t=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function N0(a,e){for(const t of a)if(!qR(t,{upTo:e}))return t}function qR(a,{upTo:e}){if(getComputedStyle(a).visibility==="hidden")return!0;for(;a;){if(e!==void 0&&a===e)return!1;if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}function YR(a){return a instanceof HTMLInputElement&&"select"in a}function ya(a,{select:e=!1}={}){if(a&&a.focus){const t=document.activeElement;a.focus({preventScroll:!0}),a!==t&&YR(a)&&e&&a.select()}}var j0=XR();function XR(){let a=[];return{add(e){const t=a[0];e!==t&&t?.pause(),a=M0(a,e),a.unshift(e)},remove(e){a=M0(a,e),a[0]?.resume()}}}function M0(a,e){const t=[...a],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function WR(a){return a.filter(e=>e.tagName!=="A")}var KR="Portal",Rd=w.forwardRef((a,e)=>{const{container:t,...s}=a,[r,o]=w.useState(!1);En(()=>o(!0),[]);const l=t||r&&globalThis?.document?.body;return l?Vw.createPortal(d.jsx(Ie.div,{...s,ref:e}),l):null});Rd.displayName=KR;var zp=0;function Xm(){w.useEffect(()=>{const a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??R0()),document.body.insertAdjacentElement("beforeend",a[1]??R0()),zp++,()=>{zp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zp--}},[])}function R0(){const a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var ni=function(){return ni=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ni.apply(this,arguments)};function V1(a,e){var t={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&e.indexOf(s)<0&&(t[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(a);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(a,s[r])&&(t[s[r]]=a[s[r]]);return t}function QR(a,e,t){if(t||arguments.length===2)for(var s=0,r=e.length,o;s<r;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return a.concat(o||Array.prototype.slice.call(e))}var Zu="right-scroll-bar-position",Ju="width-before-scroll-bar",ZR="with-scroll-bars-hidden",JR="--removed-body-scroll-bar-size";function Fp(a,e){return typeof a=="function"?a(e):a&&(a.current=e),a}function eD(a,e){var t=w.useState(function(){return{value:a,callback:e,facade:{get current(){return t.value},set current(s){var r=t.value;r!==s&&(t.value=s,t.callback(s,r))}}}})[0];return t.callback=e,t.facade}var tD=typeof window<"u"?w.useLayoutEffect:w.useEffect,D0=new WeakMap;function nD(a,e){var t=eD(null,function(s){return a.forEach(function(r){return Fp(r,s)})});return tD(function(){var s=D0.get(t);if(s){var r=new Set(s),o=new Set(a),l=t.current;r.forEach(function(u){o.has(u)||Fp(u,null)}),o.forEach(function(u){r.has(u)||Fp(u,l)})}D0.set(t,a)},[a]),t}function sD(a){return a}function iD(a,e){e===void 0&&(e=sD);var t=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:a},useMedium:function(o){var l=e(o,s);return t.push(l),function(){t=t.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(s=!0;t.length;){var l=t;t=[],l.forEach(o)}t={push:function(u){return o(u)},filter:function(){return t}}},assignMedium:function(o){s=!0;var l=[];if(t.length){var u=t;t=[],u.forEach(o),l=t}var h=function(){var g=l;l=[],g.forEach(o)},p=function(){return Promise.resolve().then(h)};p(),t={push:function(g){l.push(g),p()},filter:function(g){return l=l.filter(g),t}}}};return r}function aD(a){a===void 0&&(a={});var e=iD(null);return e.options=ni({async:!0,ssr:!1},a),e}var $1=function(a){var e=a.sideCar,t=V1(a,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return w.createElement(s,ni({},t))};$1.isSideCarExport=!0;function rD(a,e){return a.useMedium(e),$1}var G1=aD(),Hp=function(){},Dd=w.forwardRef(function(a,e){var t=w.useRef(null),s=w.useState({onScrollCapture:Hp,onWheelCapture:Hp,onTouchMoveCapture:Hp}),r=s[0],o=s[1],l=a.forwardProps,u=a.children,h=a.className,p=a.removeScrollBar,g=a.enabled,m=a.shards,y=a.sideCar,b=a.noRelative,A=a.noIsolation,S=a.inert,E=a.allowPinchZoom,C=a.as,j=C===void 0?"div":C,N=a.gapMode,M=V1(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=y,P=nD([t,e]),L=ni(ni({},M),r);return w.createElement(w.Fragment,null,g&&w.createElement(O,{sideCar:G1,removeScrollBar:p,shards:m,noRelative:b,noIsolation:A,inert:S,setCallbacks:o,allowPinchZoom:!!E,lockRef:t,gapMode:N}),l?w.cloneElement(w.Children.only(u),ni(ni({},L),{ref:P})):w.createElement(j,ni({},L,{className:h,ref:P}),u))});Dd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Dd.classNames={fullWidth:Ju,zeroRight:Zu};var oD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lD(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var e=oD();return e&&a.setAttribute("nonce",e),a}function cD(a,e){a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}function uD(a){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(a)}var dD=function(){var a=0,e=null;return{add:function(t){a==0&&(e=lD())&&(cD(e,t),uD(e)),a++},remove:function(){a--,!a&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},hD=function(){var a=dD();return function(e,t){w.useEffect(function(){return a.add(e),function(){a.remove()}},[e&&t])}},q1=function(){var a=hD(),e=function(t){var s=t.styles,r=t.dynamic;return a(s,r),null};return e},fD={left:0,top:0,right:0,gap:0},Up=function(a){return parseInt(a||"",10)||0},pD=function(a){var e=window.getComputedStyle(document.body),t=e[a==="padding"?"paddingLeft":"marginLeft"],s=e[a==="padding"?"paddingTop":"marginTop"],r=e[a==="padding"?"paddingRight":"marginRight"];return[Up(t),Up(s),Up(r)]},mD=function(a){if(a===void 0&&(a="margin"),typeof window>"u")return fD;var e=pD(a),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},gD=q1(),ro="data-scroll-locked",vD=function(a,e,t,s){var r=a.left,o=a.top,l=a.right,u=a.gap;return t===void 0&&(t="margin"),`
  .`.concat(ZR,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(ro,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zu,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(Ju,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(Zu," .").concat(Zu,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Ju," .").concat(Ju,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(ro,`] {
    `).concat(JR,": ").concat(u,`px;
  }
`)},k0=function(){var a=parseInt(document.body.getAttribute(ro)||"0",10);return isFinite(a)?a:0},yD=function(){w.useEffect(function(){return document.body.setAttribute(ro,(k0()+1).toString()),function(){var a=k0()-1;a<=0?document.body.removeAttribute(ro):document.body.setAttribute(ro,a.toString())}},[])},xD=function(a){var e=a.noRelative,t=a.noImportant,s=a.gapMode,r=s===void 0?"margin":s;yD();var o=w.useMemo(function(){return mD(r)},[r]);return w.createElement(gD,{styles:vD(o,!e,r,t?"":"!important")})},hm=!1;if(typeof window<"u")try{var ku=Object.defineProperty({},"passive",{get:function(){return hm=!0,!0}});window.addEventListener("test",ku,ku),window.removeEventListener("test",ku,ku)}catch{hm=!1}var Qr=hm?{passive:!1}:!1,bD=function(a){return a.tagName==="TEXTAREA"},Y1=function(a,e){if(!(a instanceof Element))return!1;var t=window.getComputedStyle(a);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!bD(a)&&t[e]==="visible")},wD=function(a){return Y1(a,"overflowY")},SD=function(a){return Y1(a,"overflowX")},O0=function(a,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=X1(a,s);if(r){var o=W1(a,s),l=o[1],u=o[2];if(l>u)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},AD=function(a){var e=a.scrollTop,t=a.scrollHeight,s=a.clientHeight;return[e,t,s]},CD=function(a){var e=a.scrollLeft,t=a.scrollWidth,s=a.clientWidth;return[e,t,s]},X1=function(a,e){return a==="v"?wD(e):SD(e)},W1=function(a,e){return a==="v"?AD(e):CD(e)},ED=function(a,e){return a==="h"&&e==="rtl"?-1:1},_D=function(a,e,t,s,r){var o=ED(a,window.getComputedStyle(e).direction),l=o*s,u=t.target,h=e.contains(u),p=!1,g=l>0,m=0,y=0;do{if(!u)break;var b=W1(a,u),A=b[0],S=b[1],E=b[2],C=S-E-o*A;(A||C)&&X1(a,u)&&(m+=C,y+=A);var j=u.parentNode;u=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(m)<1||!g&&Math.abs(y)<1)&&(p=!0),p},Ou=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},L0=function(a){return[a.deltaX,a.deltaY]},P0=function(a){return a&&"current"in a?a.current:a},TD=function(a,e){return a[0]===e[0]&&a[1]===e[1]},ND=function(a){return`
  .block-interactivity-`.concat(a,` {pointer-events: none;}
  .allow-interactivity-`).concat(a,` {pointer-events: all;}
`)},jD=0,Zr=[];function MD(a){var e=w.useRef([]),t=w.useRef([0,0]),s=w.useRef(),r=w.useState(jD++)[0],o=w.useState(q1)[0],l=w.useRef(a);w.useEffect(function(){l.current=a},[a]),w.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(r));var S=QR([a.lockRef.current],(a.shards||[]).map(P0),!0).filter(Boolean);return S.forEach(function(E){return E.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),S.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(r))})}}},[a.inert,a.lockRef.current,a.shards]);var u=w.useCallback(function(S,E){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!l.current.allowPinchZoom;var C=Ou(S),j=t.current,N="deltaX"in S?S.deltaX:j[0]-C[0],M="deltaY"in S?S.deltaY:j[1]-C[1],O,P=S.target,L=Math.abs(N)>Math.abs(M)?"h":"v";if("touches"in S&&L==="h"&&P.type==="range")return!1;var B=window.getSelection(),F=B&&B.anchorNode,$=F?F===P||F.contains(P):!1;if($)return!1;var Y=O0(L,P);if(!Y)return!0;if(Y?O=L:(O=L==="v"?"h":"v",Y=O0(L,P)),!Y)return!1;if(!s.current&&"changedTouches"in S&&(N||M)&&(s.current=O),!O)return!0;var te=s.current||O;return _D(te,E,S,te==="h"?N:M)},[]),h=w.useCallback(function(S){var E=S;if(!(!Zr.length||Zr[Zr.length-1]!==o)){var C="deltaY"in E?L0(E):Ou(E),j=e.current.filter(function(O){return O.name===E.type&&(O.target===E.target||E.target===O.shadowParent)&&TD(O.delta,C)})[0];if(j&&j.should){E.cancelable&&E.preventDefault();return}if(!j){var N=(l.current.shards||[]).map(P0).filter(Boolean).filter(function(O){return O.contains(E.target)}),M=N.length>0?u(E,N[0]):!l.current.noIsolation;M&&E.cancelable&&E.preventDefault()}}},[]),p=w.useCallback(function(S,E,C,j){var N={name:S,delta:E,target:C,should:j,shadowParent:RD(C)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(M){return M!==N})},1)},[]),g=w.useCallback(function(S){t.current=Ou(S),s.current=void 0},[]),m=w.useCallback(function(S){p(S.type,L0(S),S.target,u(S,a.lockRef.current))},[]),y=w.useCallback(function(S){p(S.type,Ou(S),S.target,u(S,a.lockRef.current))},[]);w.useEffect(function(){return Zr.push(o),a.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Qr),document.addEventListener("touchmove",h,Qr),document.addEventListener("touchstart",g,Qr),function(){Zr=Zr.filter(function(S){return S!==o}),document.removeEventListener("wheel",h,Qr),document.removeEventListener("touchmove",h,Qr),document.removeEventListener("touchstart",g,Qr)}},[]);var b=a.removeScrollBar,A=a.inert;return w.createElement(w.Fragment,null,A?w.createElement(o,{styles:ND(r)}):null,b?w.createElement(xD,{noRelative:a.noRelative,gapMode:a.gapMode}):null)}function RD(a){for(var e=null;a!==null;)a instanceof ShadowRoot&&(e=a.host,a=a.host),a=a.parentNode;return e}const DD=rD(G1,MD);var kd=w.forwardRef(function(a,e){return w.createElement(Dd,ni({},a,{ref:e,sideCar:DD}))});kd.classNames=Dd.classNames;var kD=function(a){if(typeof document>"u")return null;var e=Array.isArray(a)?a[0]:a;return e.ownerDocument.body},Jr=new WeakMap,Lu=new WeakMap,Pu={},Vp=0,K1=function(a){return a&&(a.host||K1(a.parentNode))},OD=function(a,e){return e.map(function(t){if(a.contains(t))return t;var s=K1(t);return s&&a.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",a,". Doing nothing"),null)}).filter(function(t){return!!t})},LD=function(a,e,t,s){var r=OD(e,Array.isArray(a)?a:[a]);Pu[t]||(Pu[t]=new WeakMap);var o=Pu[t],l=[],u=new Set,h=new Set(r),p=function(m){!m||u.has(m)||(u.add(m),p(m.parentNode))};r.forEach(p);var g=function(m){!m||h.has(m)||Array.prototype.forEach.call(m.children,function(y){if(u.has(y))g(y);else try{var b=y.getAttribute(s),A=b!==null&&b!=="false",S=(Jr.get(y)||0)+1,E=(o.get(y)||0)+1;Jr.set(y,S),o.set(y,E),l.push(y),S===1&&A&&Lu.set(y,!0),E===1&&y.setAttribute(t,"true"),A||y.setAttribute(s,"true")}catch(C){console.error("aria-hidden: cannot operate on ",y,C)}})};return g(e),u.clear(),Vp++,function(){l.forEach(function(m){var y=Jr.get(m)-1,b=o.get(m)-1;Jr.set(m,y),o.set(m,b),y||(Lu.has(m)||m.removeAttribute(s),Lu.delete(m)),b||m.removeAttribute(t)}),Vp--,Vp||(Jr=new WeakMap,Jr=new WeakMap,Lu=new WeakMap,Pu={})}},Wm=function(a,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(a)?a:[a]),r=kD(a);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),LD(s,r,t,"aria-hidden")):function(){return null}};function PD(a){const e=ID(a),t=w.forwardRef((s,r)=>{const{children:o,...l}=s,u=w.Children.toArray(o),h=u.find(zD);if(h){const p=h.props.children,g=u.map(m=>m===h?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:m);return d.jsx(e,{...l,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,g):null})}return d.jsx(e,{...l,ref:r,children:o})});return t.displayName=`${a}.Slot`,t}function ID(a){const e=w.forwardRef((t,s)=>{const{children:r,...o}=t;if(w.isValidElement(r)){const l=HD(r),u=FD(o,r.props);return r.type!==w.Fragment&&(u.ref=s?Vi(s,l):l),w.cloneElement(r,u)}return w.Children.count(r)>1?w.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var BD=Symbol("radix.slottable");function zD(a){return w.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===BD}function FD(a,e){const t={...e};for(const s in e){const r=a[s],o=e[s];/^on[A-Z]/.test(s)?r&&o?t[s]=(...u)=>{const h=o(...u);return r(...u),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...o}:s==="className"&&(t[s]=[r,o].filter(Boolean).join(" "))}return{...a,...t}}function HD(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}var Od="Dialog",[Q1,Z1]=cs(Od),[UD,Hs]=Q1(Od),J1=a=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:r,onOpenChange:o,modal:l=!0}=a,u=w.useRef(null),h=w.useRef(null),[p,g]=Bi({prop:s,defaultProp:r??!1,onChange:o,caller:Od});return d.jsx(UD,{scope:e,triggerRef:u,contentRef:h,contentId:ai(),titleId:ai(),descriptionId:ai(),open:p,onOpenChange:g,onOpenToggle:w.useCallback(()=>g(m=>!m),[g]),modal:l,children:t})};J1.displayName=Od;var eS="DialogTrigger",tS=w.forwardRef((a,e)=>{const{__scopeDialog:t,...s}=a,r=Hs(eS,t),o=qe(e,r.triggerRef);return d.jsx(Ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Zm(r.open),...s,ref:o,onClick:xe(a.onClick,r.onOpenToggle)})});tS.displayName=eS;var Km="DialogPortal",[VD,nS]=Q1(Km,{forceMount:void 0}),sS=a=>{const{__scopeDialog:e,forceMount:t,children:s,container:r}=a,o=Hs(Km,e);return d.jsx(VD,{scope:e,forceMount:t,children:w.Children.map(s,l=>d.jsx(Yn,{present:t||o.open,children:d.jsx(Rd,{asChild:!0,container:r,children:l})}))})};sS.displayName=Km;var ld="DialogOverlay",iS=w.forwardRef((a,e)=>{const t=nS(ld,a.__scopeDialog),{forceMount:s=t.forceMount,...r}=a,o=Hs(ld,a.__scopeDialog);return o.modal?d.jsx(Yn,{present:s||o.open,children:d.jsx(GD,{...r,ref:e})}):null});iS.displayName=ld;var $D=PD("DialogOverlay.RemoveScroll"),GD=w.forwardRef((a,e)=>{const{__scopeDialog:t,...s}=a,r=Hs(ld,t);return d.jsx(kd,{as:$D,allowPinchZoom:!0,shards:[r.contentRef],children:d.jsx(Ie.div,{"data-state":Zm(r.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),tr="DialogContent",aS=w.forwardRef((a,e)=>{const t=nS(tr,a.__scopeDialog),{forceMount:s=t.forceMount,...r}=a,o=Hs(tr,a.__scopeDialog);return d.jsx(Yn,{present:s||o.open,children:o.modal?d.jsx(qD,{...r,ref:e}):d.jsx(YD,{...r,ref:e})})});aS.displayName=tr;var qD=w.forwardRef((a,e)=>{const t=Hs(tr,a.__scopeDialog),s=w.useRef(null),r=qe(e,t.contentRef,s);return w.useEffect(()=>{const o=s.current;if(o)return Wm(o)},[]),d.jsx(rS,{...a,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(a.onCloseAutoFocus,o=>{o.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:xe(a.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&o.preventDefault()}),onFocusOutside:xe(a.onFocusOutside,o=>o.preventDefault())})}),YD=w.forwardRef((a,e)=>{const t=Hs(tr,a.__scopeDialog),s=w.useRef(!1),r=w.useRef(!1);return d.jsx(rS,{...a,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{a.onCloseAutoFocus?.(o),o.defaultPrevented||(s.current||t.triggerRef.current?.focus(),o.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:o=>{a.onInteractOutside?.(o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=o.target;t.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&r.current&&o.preventDefault()}})}),rS=w.forwardRef((a,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:o,...l}=a,u=Hs(tr,t),h=w.useRef(null),p=qe(e,h);return Xm(),d.jsxs(d.Fragment,{children:[d.jsx(Md,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:o,children:d.jsx(jd,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Zm(u.open),...l,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(WD,{titleId:u.titleId}),d.jsx(QD,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Qm="DialogTitle",oS=w.forwardRef((a,e)=>{const{__scopeDialog:t,...s}=a,r=Hs(Qm,t);return d.jsx(Ie.h2,{id:r.titleId,...s,ref:e})});oS.displayName=Qm;var lS="DialogDescription",cS=w.forwardRef((a,e)=>{const{__scopeDialog:t,...s}=a,r=Hs(lS,t);return d.jsx(Ie.p,{id:r.descriptionId,...s,ref:e})});cS.displayName=lS;var uS="DialogClose",dS=w.forwardRef((a,e)=>{const{__scopeDialog:t,...s}=a,r=Hs(uS,t);return d.jsx(Ie.button,{type:"button",...s,ref:e,onClick:xe(a.onClick,()=>r.onOpenChange(!1))})});dS.displayName=uS;function Zm(a){return a?"open":"closed"}var hS="DialogTitleWarning",[XD,fS]=xT(hS,{contentName:tr,titleName:Qm,docsSlug:"dialog"}),WD=({titleId:a})=>{const e=fS(hS),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{a&&(document.getElementById(a)||console.error(t))},[t,a]),null},KD="DialogDescriptionWarning",QD=({contentRef:a,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${fS(KD).contentName}}.`;return w.useEffect(()=>{const r=a.current?.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(s))},[s,a,e]),null},Jm=J1,pS=tS,eg=sS,tg=iS,ng=aS,sg=oS,mS=cS,Ld=dS;function gS({...a}){return d.jsx(Jm,{"data-slot":"sheet",...a})}function vS({...a}){return d.jsx(pS,{"data-slot":"sheet-trigger",...a})}function ZD({...a}){return d.jsx(eg,{"data-slot":"sheet-portal",...a})}function JD({className:a,...e}){return d.jsx(tg,{"data-slot":"sheet-overlay",className:Ge("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...e})}function yS({className:a,children:e,side:t="right",...s}){return d.jsxs(ZD,{children:[d.jsx(JD,{}),d.jsxs(ng,{"data-slot":"sheet-content",className:Ge("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",t==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",t==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",t==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",t==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",a),...s,children:[e,d.jsxs(Ld,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[d.jsx(Cn,{className:"size-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function xS({className:a,...e}){return d.jsx("div",{"data-slot":"sheet-header",className:Ge("flex flex-col gap-1.5 p-4",a),...e})}function bS({className:a,...e}){return d.jsx(sg,{"data-slot":"sheet-title",className:Ge("text-foreground font-semibold",a),...e})}function ql(a,[e,t]){return Math.min(t,Math.max(e,a))}const ek=["top","right","bottom","left"],Ca=Math.min,rs=Math.max,cd=Math.round,Iu=Math.floor,oi=a=>({x:a,y:a}),tk={left:"right",right:"left",bottom:"top",top:"bottom"},nk={start:"end",end:"start"};function fm(a,e,t){return rs(a,Ca(e,t))}function zi(a,e){return typeof a=="function"?a(e):a}function Fi(a){return a.split("-")[0]}function ko(a){return a.split("-")[1]}function ig(a){return a==="x"?"y":"x"}function ag(a){return a==="y"?"height":"width"}const sk=new Set(["top","bottom"]);function ii(a){return sk.has(Fi(a))?"y":"x"}function rg(a){return ig(ii(a))}function ik(a,e,t){t===void 0&&(t=!1);const s=ko(a),r=rg(a),o=ag(r);let l=r==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=ud(l)),[l,ud(l)]}function ak(a){const e=ud(a);return[pm(a),e,pm(e)]}function pm(a){return a.replace(/start|end/g,e=>nk[e])}const I0=["left","right"],B0=["right","left"],rk=["top","bottom"],ok=["bottom","top"];function lk(a,e,t){switch(a){case"top":case"bottom":return t?e?B0:I0:e?I0:B0;case"left":case"right":return e?rk:ok;default:return[]}}function ck(a,e,t,s){const r=ko(a);let o=lk(Fi(a),t==="start",s);return r&&(o=o.map(l=>l+"-"+r),e&&(o=o.concat(o.map(pm)))),o}function ud(a){return a.replace(/left|right|bottom|top/g,e=>tk[e])}function uk(a){return{top:0,right:0,bottom:0,left:0,...a}}function wS(a){return typeof a!="number"?uk(a):{top:a,right:a,bottom:a,left:a}}function dd(a){const{x:e,y:t,width:s,height:r}=a;return{width:s,height:r,top:t,left:e,right:e+s,bottom:t+r,x:e,y:t}}function z0(a,e,t){let{reference:s,floating:r}=a;const o=ii(e),l=rg(e),u=ag(l),h=Fi(e),p=o==="y",g=s.x+s.width/2-r.width/2,m=s.y+s.height/2-r.height/2,y=s[u]/2-r[u]/2;let b;switch(h){case"top":b={x:g,y:s.y-r.height};break;case"bottom":b={x:g,y:s.y+s.height};break;case"right":b={x:s.x+s.width,y:m};break;case"left":b={x:s.x-r.width,y:m};break;default:b={x:s.x,y:s.y}}switch(ko(e)){case"start":b[l]-=y*(t&&p?-1:1);break;case"end":b[l]+=y*(t&&p?-1:1);break}return b}const dk=async(a,e,t)=>{const{placement:s="bottom",strategy:r="absolute",middleware:o=[],platform:l}=t,u=o.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(e));let p=await l.getElementRects({reference:a,floating:e,strategy:r}),{x:g,y:m}=z0(p,s,h),y=s,b={},A=0;for(let S=0;S<u.length;S++){const{name:E,fn:C}=u[S],{x:j,y:N,data:M,reset:O}=await C({x:g,y:m,initialPlacement:s,placement:y,strategy:r,middlewareData:b,rects:p,platform:l,elements:{reference:a,floating:e}});g=j??g,m=N??m,b={...b,[E]:{...b[E],...M}},O&&A<=50&&(A++,typeof O=="object"&&(O.placement&&(y=O.placement),O.rects&&(p=O.rects===!0?await l.getElementRects({reference:a,floating:e,strategy:r}):O.rects),{x:g,y:m}=z0(p,y,h)),S=-1)}return{x:g,y:m,placement:y,strategy:r,middlewareData:b}};async function Yl(a,e){var t;e===void 0&&(e={});const{x:s,y:r,platform:o,rects:l,elements:u,strategy:h}=a,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:m="floating",altBoundary:y=!1,padding:b=0}=zi(e,a),A=wS(b),E=u[y?m==="floating"?"reference":"floating":m],C=dd(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(E)))==null||t?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:p,rootBoundary:g,strategy:h})),j=m==="floating"?{x:s,y:r,width:l.floating.width,height:l.floating.height}:l.reference,N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),M=await(o.isElement==null?void 0:o.isElement(N))?await(o.getScale==null?void 0:o.getScale(N))||{x:1,y:1}:{x:1,y:1},O=dd(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:j,offsetParent:N,strategy:h}):j);return{top:(C.top-O.top+A.top)/M.y,bottom:(O.bottom-C.bottom+A.bottom)/M.y,left:(C.left-O.left+A.left)/M.x,right:(O.right-C.right+A.right)/M.x}}const hk=a=>({name:"arrow",options:a,async fn(e){const{x:t,y:s,placement:r,rects:o,platform:l,elements:u,middlewareData:h}=e,{element:p,padding:g=0}=zi(a,e)||{};if(p==null)return{};const m=wS(g),y={x:t,y:s},b=rg(r),A=ag(b),S=await l.getDimensions(p),E=b==="y",C=E?"top":"left",j=E?"bottom":"right",N=E?"clientHeight":"clientWidth",M=o.reference[A]+o.reference[b]-y[b]-o.floating[A],O=y[b]-o.reference[b],P=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p));let L=P?P[N]:0;(!L||!await(l.isElement==null?void 0:l.isElement(P)))&&(L=u.floating[N]||o.floating[A]);const B=M/2-O/2,F=L/2-S[A]/2-1,$=Ca(m[C],F),Y=Ca(m[j],F),te=$,oe=L-S[A]-Y,ie=L/2-S[A]/2+B,fe=fm(te,ie,oe),R=!h.arrow&&ko(r)!=null&&ie!==fe&&o.reference[A]/2-(ie<te?$:Y)-S[A]/2<0,U=R?ie<te?ie-te:ie-oe:0;return{[b]:y[b]+U,data:{[b]:fe,centerOffset:ie-fe-U,...R&&{alignmentOffset:U}},reset:R}}}),fk=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(e){var t,s;const{placement:r,middlewareData:o,rects:l,initialPlacement:u,platform:h,elements:p}=e,{mainAxis:g=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:S=!0,...E}=zi(a,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const C=Fi(r),j=ii(u),N=Fi(u)===u,M=await(h.isRTL==null?void 0:h.isRTL(p.floating)),O=y||(N||!S?[ud(u)]:ak(u)),P=A!=="none";!y&&P&&O.push(...ck(u,S,A,M));const L=[u,...O],B=await Yl(e,E),F=[];let $=((s=o.flip)==null?void 0:s.overflows)||[];if(g&&F.push(B[C]),m){const ie=ik(r,l,M);F.push(B[ie[0]],B[ie[1]])}if($=[...$,{placement:r,overflows:F}],!F.every(ie=>ie<=0)){var Y,te;const ie=(((Y=o.flip)==null?void 0:Y.index)||0)+1,fe=L[ie];if(fe&&(!(m==="alignment"?j!==ii(fe):!1)||$.every(H=>ii(H.placement)===j?H.overflows[0]>0:!0)))return{data:{index:ie,overflows:$},reset:{placement:fe}};let R=(te=$.filter(U=>U.overflows[0]<=0).sort((U,H)=>U.overflows[1]-H.overflows[1])[0])==null?void 0:te.placement;if(!R)switch(b){case"bestFit":{var oe;const U=(oe=$.filter(H=>{if(P){const z=ii(H.placement);return z===j||z==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(z=>z>0).reduce((z,se)=>z+se,0)]).sort((H,z)=>H[1]-z[1])[0])==null?void 0:oe[0];U&&(R=U);break}case"initialPlacement":R=u;break}if(r!==R)return{reset:{placement:R}}}return{}}}};function F0(a,e){return{top:a.top-e.height,right:a.right-e.width,bottom:a.bottom-e.height,left:a.left-e.width}}function H0(a){return ek.some(e=>a[e]>=0)}const pk=function(a){return a===void 0&&(a={}),{name:"hide",options:a,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...r}=zi(a,e);switch(s){case"referenceHidden":{const o=await Yl(e,{...r,elementContext:"reference"}),l=F0(o,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:H0(l)}}}case"escaped":{const o=await Yl(e,{...r,altBoundary:!0}),l=F0(o,t.floating);return{data:{escapedOffsets:l,escaped:H0(l)}}}default:return{}}}}},SS=new Set(["left","top"]);async function mk(a,e){const{placement:t,platform:s,elements:r}=a,o=await(s.isRTL==null?void 0:s.isRTL(r.floating)),l=Fi(t),u=ko(t),h=ii(t)==="y",p=SS.has(l)?-1:1,g=o&&h?-1:1,m=zi(e,a);let{mainAxis:y,crossAxis:b,alignmentAxis:A}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof A=="number"&&(b=u==="end"?A*-1:A),h?{x:b*g,y:y*p}:{x:y*p,y:b*g}}const gk=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(e){var t,s;const{x:r,y:o,placement:l,middlewareData:u}=e,h=await mk(e,a);return l===((t=u.offset)==null?void 0:t.placement)&&(s=u.arrow)!=null&&s.alignmentOffset?{}:{x:r+h.x,y:o+h.y,data:{...h,placement:l}}}}},vk=function(a){return a===void 0&&(a={}),{name:"shift",options:a,async fn(e){const{x:t,y:s,placement:r}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:E=>{let{x:C,y:j}=E;return{x:C,y:j}}},...h}=zi(a,e),p={x:t,y:s},g=await Yl(e,h),m=ii(Fi(r)),y=ig(m);let b=p[y],A=p[m];if(o){const E=y==="y"?"top":"left",C=y==="y"?"bottom":"right",j=b+g[E],N=b-g[C];b=fm(j,b,N)}if(l){const E=m==="y"?"top":"left",C=m==="y"?"bottom":"right",j=A+g[E],N=A-g[C];A=fm(j,A,N)}const S=u.fn({...e,[y]:b,[m]:A});return{...S,data:{x:S.x-t,y:S.y-s,enabled:{[y]:o,[m]:l}}}}}},yk=function(a){return a===void 0&&(a={}),{options:a,fn(e){const{x:t,y:s,placement:r,rects:o,middlewareData:l}=e,{offset:u=0,mainAxis:h=!0,crossAxis:p=!0}=zi(a,e),g={x:t,y:s},m=ii(r),y=ig(m);let b=g[y],A=g[m];const S=zi(u,e),E=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(h){const N=y==="y"?"height":"width",M=o.reference[y]-o.floating[N]+E.mainAxis,O=o.reference[y]+o.reference[N]-E.mainAxis;b<M?b=M:b>O&&(b=O)}if(p){var C,j;const N=y==="y"?"width":"height",M=SS.has(Fi(r)),O=o.reference[m]-o.floating[N]+(M&&((C=l.offset)==null?void 0:C[m])||0)+(M?0:E.crossAxis),P=o.reference[m]+o.reference[N]+(M?0:((j=l.offset)==null?void 0:j[m])||0)-(M?E.crossAxis:0);A<O?A=O:A>P&&(A=P)}return{[y]:b,[m]:A}}}},xk=function(a){return a===void 0&&(a={}),{name:"size",options:a,async fn(e){var t,s;const{placement:r,rects:o,platform:l,elements:u}=e,{apply:h=()=>{},...p}=zi(a,e),g=await Yl(e,p),m=Fi(r),y=ko(r),b=ii(r)==="y",{width:A,height:S}=o.floating;let E,C;m==="top"||m==="bottom"?(E=m,C=y===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(C=m,E=y==="end"?"top":"bottom");const j=S-g.top-g.bottom,N=A-g.left-g.right,M=Ca(S-g[E],j),O=Ca(A-g[C],N),P=!e.middlewareData.shift;let L=M,B=O;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(B=N),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(L=j),P&&!y){const $=rs(g.left,0),Y=rs(g.right,0),te=rs(g.top,0),oe=rs(g.bottom,0);b?B=A-2*($!==0||Y!==0?$+Y:rs(g.left,g.right)):L=S-2*(te!==0||oe!==0?te+oe:rs(g.top,g.bottom))}await h({...e,availableWidth:B,availableHeight:L});const F=await l.getDimensions(u.floating);return A!==F.width||S!==F.height?{reset:{rects:!0}}:{}}}};function Pd(){return typeof window<"u"}function Oo(a){return AS(a)?(a.nodeName||"").toLowerCase():"#document"}function os(a){var e;return(a==null||(e=a.ownerDocument)==null?void 0:e.defaultView)||window}function ci(a){var e;return(e=(AS(a)?a.ownerDocument:a.document)||window.document)==null?void 0:e.documentElement}function AS(a){return Pd()?a instanceof Node||a instanceof os(a).Node:!1}function Bs(a){return Pd()?a instanceof Element||a instanceof os(a).Element:!1}function li(a){return Pd()?a instanceof HTMLElement||a instanceof os(a).HTMLElement:!1}function U0(a){return!Pd()||typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof os(a).ShadowRoot}const bk=new Set(["inline","contents"]);function ac(a){const{overflow:e,overflowX:t,overflowY:s,display:r}=zs(a);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!bk.has(r)}const wk=new Set(["table","td","th"]);function Sk(a){return wk.has(Oo(a))}const Ak=[":popover-open",":modal"];function Id(a){return Ak.some(e=>{try{return a.matches(e)}catch{return!1}})}const Ck=["transform","translate","scale","rotate","perspective"],Ek=["transform","translate","scale","rotate","perspective","filter"],_k=["paint","layout","strict","content"];function og(a){const e=lg(),t=Bs(a)?zs(a):a;return Ck.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||Ek.some(s=>(t.willChange||"").includes(s))||_k.some(s=>(t.contain||"").includes(s))}function Tk(a){let e=Ea(a);for(;li(e)&&!bo(e);){if(og(e))return e;if(Id(e))return null;e=Ea(e)}return null}function lg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Nk=new Set(["html","body","#document"]);function bo(a){return Nk.has(Oo(a))}function zs(a){return os(a).getComputedStyle(a)}function Bd(a){return Bs(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function Ea(a){if(Oo(a)==="html")return a;const e=a.assignedSlot||a.parentNode||U0(a)&&a.host||ci(a);return U0(e)?e.host:e}function CS(a){const e=Ea(a);return bo(e)?a.ownerDocument?a.ownerDocument.body:a.body:li(e)&&ac(e)?e:CS(e)}function Xl(a,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=CS(a),o=r===((s=a.ownerDocument)==null?void 0:s.body),l=os(r);if(o){const u=mm(l);return e.concat(l,l.visualViewport||[],ac(r)?r:[],u&&t?Xl(u):[])}return e.concat(r,Xl(r,[],t))}function mm(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function ES(a){const e=zs(a);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=li(a),o=r?a.offsetWidth:t,l=r?a.offsetHeight:s,u=cd(t)!==o||cd(s)!==l;return u&&(t=o,s=l),{width:t,height:s,$:u}}function cg(a){return Bs(a)?a:a.contextElement}function oo(a){const e=cg(a);if(!li(e))return oi(1);const t=e.getBoundingClientRect(),{width:s,height:r,$:o}=ES(e);let l=(o?cd(t.width):t.width)/s,u=(o?cd(t.height):t.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const jk=oi(0);function _S(a){const e=os(a);return!lg()||!e.visualViewport?jk:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Mk(a,e,t){return e===void 0&&(e=!1),!t||e&&t!==os(a)?!1:e}function nr(a,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=a.getBoundingClientRect(),o=cg(a);let l=oi(1);e&&(s?Bs(s)&&(l=oo(s)):l=oo(a));const u=Mk(o,t,s)?_S(o):oi(0);let h=(r.left+u.x)/l.x,p=(r.top+u.y)/l.y,g=r.width/l.x,m=r.height/l.y;if(o){const y=os(o),b=s&&Bs(s)?os(s):s;let A=y,S=mm(A);for(;S&&s&&b!==A;){const E=oo(S),C=S.getBoundingClientRect(),j=zs(S),N=C.left+(S.clientLeft+parseFloat(j.paddingLeft))*E.x,M=C.top+(S.clientTop+parseFloat(j.paddingTop))*E.y;h*=E.x,p*=E.y,g*=E.x,m*=E.y,h+=N,p+=M,A=os(S),S=mm(A)}}return dd({width:g,height:m,x:h,y:p})}function zd(a,e){const t=Bd(a).scrollLeft;return e?e.left+t:nr(ci(a)).left+t}function TS(a,e){const t=a.getBoundingClientRect(),s=t.left+e.scrollLeft-zd(a,t),r=t.top+e.scrollTop;return{x:s,y:r}}function Rk(a){let{elements:e,rect:t,offsetParent:s,strategy:r}=a;const o=r==="fixed",l=ci(s),u=e?Id(e.floating):!1;if(s===l||u&&o)return t;let h={scrollLeft:0,scrollTop:0},p=oi(1);const g=oi(0),m=li(s);if((m||!m&&!o)&&((Oo(s)!=="body"||ac(l))&&(h=Bd(s)),li(s))){const b=nr(s);p=oo(s),g.x=b.x+s.clientLeft,g.y=b.y+s.clientTop}const y=l&&!m&&!o?TS(l,h):oi(0);return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-h.scrollLeft*p.x+g.x+y.x,y:t.y*p.y-h.scrollTop*p.y+g.y+y.y}}function Dk(a){return Array.from(a.getClientRects())}function kk(a){const e=ci(a),t=Bd(a),s=a.ownerDocument.body,r=rs(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),o=rs(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let l=-t.scrollLeft+zd(a);const u=-t.scrollTop;return zs(s).direction==="rtl"&&(l+=rs(e.clientWidth,s.clientWidth)-r),{width:r,height:o,x:l,y:u}}const V0=25;function Ok(a,e){const t=os(a),s=ci(a),r=t.visualViewport;let o=s.clientWidth,l=s.clientHeight,u=0,h=0;if(r){o=r.width,l=r.height;const g=lg();(!g||g&&e==="fixed")&&(u=r.offsetLeft,h=r.offsetTop)}const p=zd(s);if(p<=0){const g=s.ownerDocument,m=g.body,y=getComputedStyle(m),b=g.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,A=Math.abs(s.clientWidth-m.clientWidth-b);A<=V0&&(o-=A)}else p<=V0&&(o+=p);return{width:o,height:l,x:u,y:h}}const Lk=new Set(["absolute","fixed"]);function Pk(a,e){const t=nr(a,!0,e==="fixed"),s=t.top+a.clientTop,r=t.left+a.clientLeft,o=li(a)?oo(a):oi(1),l=a.clientWidth*o.x,u=a.clientHeight*o.y,h=r*o.x,p=s*o.y;return{width:l,height:u,x:h,y:p}}function $0(a,e,t){let s;if(e==="viewport")s=Ok(a,t);else if(e==="document")s=kk(ci(a));else if(Bs(e))s=Pk(e,t);else{const r=_S(a);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return dd(s)}function NS(a,e){const t=Ea(a);return t===e||!Bs(t)||bo(t)?!1:zs(t).position==="fixed"||NS(t,e)}function Ik(a,e){const t=e.get(a);if(t)return t;let s=Xl(a,[],!1).filter(u=>Bs(u)&&Oo(u)!=="body"),r=null;const o=zs(a).position==="fixed";let l=o?Ea(a):a;for(;Bs(l)&&!bo(l);){const u=zs(l),h=og(l);!h&&u.position==="fixed"&&(r=null),(o?!h&&!r:!h&&u.position==="static"&&!!r&&Lk.has(r.position)||ac(l)&&!h&&NS(a,l))?s=s.filter(g=>g!==l):r=u,l=Ea(l)}return e.set(a,s),s}function Bk(a){let{element:e,boundary:t,rootBoundary:s,strategy:r}=a;const l=[...t==="clippingAncestors"?Id(e)?[]:Ik(e,this._c):[].concat(t),s],u=l[0],h=l.reduce((p,g)=>{const m=$0(e,g,r);return p.top=rs(m.top,p.top),p.right=Ca(m.right,p.right),p.bottom=Ca(m.bottom,p.bottom),p.left=rs(m.left,p.left),p},$0(e,u,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function zk(a){const{width:e,height:t}=ES(a);return{width:e,height:t}}function Fk(a,e,t){const s=li(e),r=ci(e),o=t==="fixed",l=nr(a,!0,o,e);let u={scrollLeft:0,scrollTop:0};const h=oi(0);function p(){h.x=zd(r)}if(s||!s&&!o)if((Oo(e)!=="body"||ac(r))&&(u=Bd(e)),s){const b=nr(e,!0,o,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else r&&p();o&&!s&&r&&p();const g=r&&!s&&!o?TS(r,u):oi(0),m=l.left+u.scrollLeft-h.x-g.x,y=l.top+u.scrollTop-h.y-g.y;return{x:m,y,width:l.width,height:l.height}}function $p(a){return zs(a).position==="static"}function G0(a,e){if(!li(a)||zs(a).position==="fixed")return null;if(e)return e(a);let t=a.offsetParent;return ci(a)===t&&(t=t.ownerDocument.body),t}function jS(a,e){const t=os(a);if(Id(a))return t;if(!li(a)){let r=Ea(a);for(;r&&!bo(r);){if(Bs(r)&&!$p(r))return r;r=Ea(r)}return t}let s=G0(a,e);for(;s&&Sk(s)&&$p(s);)s=G0(s,e);return s&&bo(s)&&$p(s)&&!og(s)?t:s||Tk(a)||t}const Hk=async function(a){const e=this.getOffsetParent||jS,t=this.getDimensions,s=await t(a.floating);return{reference:Fk(a.reference,await e(a.floating),a.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Uk(a){return zs(a).direction==="rtl"}const Vk={convertOffsetParentRelativeRectToViewportRelativeRect:Rk,getDocumentElement:ci,getClippingRect:Bk,getOffsetParent:jS,getElementRects:Hk,getClientRects:Dk,getDimensions:zk,getScale:oo,isElement:Bs,isRTL:Uk};function MS(a,e){return a.x===e.x&&a.y===e.y&&a.width===e.width&&a.height===e.height}function $k(a,e){let t=null,s;const r=ci(a);function o(){var u;clearTimeout(s),(u=t)==null||u.disconnect(),t=null}function l(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),o();const p=a.getBoundingClientRect(),{left:g,top:m,width:y,height:b}=p;if(u||e(),!y||!b)return;const A=Iu(m),S=Iu(r.clientWidth-(g+y)),E=Iu(r.clientHeight-(m+b)),C=Iu(g),N={rootMargin:-A+"px "+-S+"px "+-E+"px "+-C+"px",threshold:rs(0,Ca(1,h))||1};let M=!0;function O(P){const L=P[0].intersectionRatio;if(L!==h){if(!M)return l();L?l(!1,L):s=setTimeout(()=>{l(!1,1e-7)},1e3)}L===1&&!MS(p,a.getBoundingClientRect())&&l(),M=!1}try{t=new IntersectionObserver(O,{...N,root:r.ownerDocument})}catch{t=new IntersectionObserver(O,N)}t.observe(a)}return l(!0),o}function Gk(a,e,t,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=s,p=cg(a),g=r||o?[...p?Xl(p):[],...Xl(e)]:[];g.forEach(C=>{r&&C.addEventListener("scroll",t,{passive:!0}),o&&C.addEventListener("resize",t)});const m=p&&u?$k(p,t):null;let y=-1,b=null;l&&(b=new ResizeObserver(C=>{let[j]=C;j&&j.target===p&&b&&(b.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var N;(N=b)==null||N.observe(e)})),t()}),p&&!h&&b.observe(p),b.observe(e));let A,S=h?nr(a):null;h&&E();function E(){const C=nr(a);S&&!MS(S,C)&&t(),S=C,A=requestAnimationFrame(E)}return t(),()=>{var C;g.forEach(j=>{r&&j.removeEventListener("scroll",t),o&&j.removeEventListener("resize",t)}),m?.(),(C=b)==null||C.disconnect(),b=null,h&&cancelAnimationFrame(A)}}const qk=gk,Yk=vk,Xk=fk,Wk=xk,Kk=pk,q0=hk,Qk=yk,Zk=(a,e,t)=>{const s=new Map,r={platform:Vk,...t},o={...r.platform,_c:s};return dk(a,e,{...r,platform:o})};var Jk=typeof document<"u",eO=function(){},ed=Jk?w.useLayoutEffect:eO;function hd(a,e){if(a===e)return!0;if(typeof a!=typeof e)return!1;if(typeof a=="function"&&a.toString()===e.toString())return!0;let t,s,r;if(a&&e&&typeof a=="object"){if(Array.isArray(a)){if(t=a.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!hd(a[s],e[s]))return!1;return!0}if(r=Object.keys(a),t=r.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=t;s--!==0;){const o=r[s];if(!(o==="_owner"&&a.$$typeof)&&!hd(a[o],e[o]))return!1}return!0}return a!==a&&e!==e}function RS(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function Y0(a,e){const t=RS(a);return Math.round(e*t)/t}function Gp(a){const e=w.useRef(a);return ed(()=>{e.current=a}),e}function tO(a){a===void 0&&(a={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:r,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:h,open:p}=a,[g,m]=w.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,b]=w.useState(s);hd(y,s)||b(s);const[A,S]=w.useState(null),[E,C]=w.useState(null),j=w.useCallback(H=>{H!==P.current&&(P.current=H,S(H))},[]),N=w.useCallback(H=>{H!==L.current&&(L.current=H,C(H))},[]),M=o||A,O=l||E,P=w.useRef(null),L=w.useRef(null),B=w.useRef(g),F=h!=null,$=Gp(h),Y=Gp(r),te=Gp(p),oe=w.useCallback(()=>{if(!P.current||!L.current)return;const H={placement:e,strategy:t,middleware:y};Y.current&&(H.platform=Y.current),Zk(P.current,L.current,H).then(z=>{const se={...z,isPositioned:te.current!==!1};ie.current&&!hd(B.current,se)&&(B.current=se,sc.flushSync(()=>{m(se)}))})},[y,e,t,Y,te]);ed(()=>{p===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,m(H=>({...H,isPositioned:!1})))},[p]);const ie=w.useRef(!1);ed(()=>(ie.current=!0,()=>{ie.current=!1}),[]),ed(()=>{if(M&&(P.current=M),O&&(L.current=O),M&&O){if($.current)return $.current(M,O,oe);oe()}},[M,O,oe,$,F]);const fe=w.useMemo(()=>({reference:P,floating:L,setReference:j,setFloating:N}),[j,N]),R=w.useMemo(()=>({reference:M,floating:O}),[M,O]),U=w.useMemo(()=>{const H={position:t,left:0,top:0};if(!R.floating)return H;const z=Y0(R.floating,g.x),se=Y0(R.floating,g.y);return u?{...H,transform:"translate("+z+"px, "+se+"px)",...RS(R.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:se}},[t,u,R.floating,g.x,g.y]);return w.useMemo(()=>({...g,update:oe,refs:fe,elements:R,floatingStyles:U}),[g,oe,fe,R,U])}const nO=a=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:a,fn(t){const{element:s,padding:r}=typeof a=="function"?a(t):a;return s&&e(s)?s.current!=null?q0({element:s.current,padding:r}).fn(t):{}:s?q0({element:s,padding:r}).fn(t):{}}}},sO=(a,e)=>({...qk(a),options:[a,e]}),iO=(a,e)=>({...Yk(a),options:[a,e]}),aO=(a,e)=>({...Qk(a),options:[a,e]}),rO=(a,e)=>({...Xk(a),options:[a,e]}),oO=(a,e)=>({...Wk(a),options:[a,e]}),lO=(a,e)=>({...Kk(a),options:[a,e]}),cO=(a,e)=>({...nO(a),options:[a,e]});var uO="Arrow",DS=w.forwardRef((a,e)=>{const{children:t,width:s=10,height:r=5,...o}=a;return d.jsx(Ie.svg,{...o,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?t:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});DS.displayName=uO;var dO=DS;function Fd(a){const[e,t]=w.useState(void 0);return En(()=>{if(a){t({width:a.offsetWidth,height:a.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const o=r[0];let l,u;if("borderBoxSize"in o){const h=o.borderBoxSize,p=Array.isArray(h)?h[0]:h;l=p.inlineSize,u=p.blockSize}else l=a.offsetWidth,u=a.offsetHeight;t({width:l,height:u})});return s.observe(a,{box:"border-box"}),()=>s.unobserve(a)}else t(void 0)},[a]),e}var ug="Popper",[kS,Hd]=cs(ug),[hO,OS]=kS(ug),LS=a=>{const{__scopePopper:e,children:t}=a,[s,r]=w.useState(null);return d.jsx(hO,{scope:e,anchor:s,onAnchorChange:r,children:t})};LS.displayName=ug;var PS="PopperAnchor",IS=w.forwardRef((a,e)=>{const{__scopePopper:t,virtualRef:s,...r}=a,o=OS(PS,t),l=w.useRef(null),u=qe(e,l),h=w.useRef(null);return w.useEffect(()=>{const p=h.current;h.current=s?.current||l.current,p!==h.current&&o.onAnchorChange(h.current)}),s?null:d.jsx(Ie.div,{...r,ref:u})});IS.displayName=PS;var dg="PopperContent",[fO,pO]=kS(dg),BS=w.forwardRef((a,e)=>{const{__scopePopper:t,side:s="bottom",sideOffset:r=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:b="optimized",onPlaced:A,...S}=a,E=OS(dg,t),[C,j]=w.useState(null),N=qe(e,Q=>j(Q)),[M,O]=w.useState(null),P=Fd(M),L=P?.width??0,B=P?.height??0,F=s+(o!=="center"?"-"+o:""),$=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},Y=Array.isArray(p)?p:[p],te=Y.length>0,oe={padding:$,boundary:Y.filter(gO),altBoundary:te},{refs:ie,floatingStyles:fe,placement:R,isPositioned:U,middlewareData:H}=tO({strategy:"fixed",placement:F,whileElementsMounted:(...Q)=>Gk(...Q,{animationFrame:b==="always"}),elements:{reference:E.anchor},middleware:[sO({mainAxis:r+B,alignmentAxis:l}),h&&iO({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?aO():void 0,...oe}),h&&rO({...oe}),oO({...oe,apply:({elements:Q,rects:ue,availableWidth:pe,availableHeight:Ce})=>{const{width:ye,height:Ne}=ue.reference,Be=Q.floating.style;Be.setProperty("--radix-popper-available-width",`${pe}px`),Be.setProperty("--radix-popper-available-height",`${Ce}px`),Be.setProperty("--radix-popper-anchor-width",`${ye}px`),Be.setProperty("--radix-popper-anchor-height",`${Ne}px`)}}),M&&cO({element:M,padding:u}),vO({arrowWidth:L,arrowHeight:B}),y&&lO({strategy:"referenceHidden",...oe})]}),[z,se]=HS(R),T=An(A);En(()=>{U&&T?.()},[U,T]);const k=H.arrow?.x,I=H.arrow?.y,q=H.arrow?.centerOffset!==0,[X,ce]=w.useState();return En(()=>{C&&ce(window.getComputedStyle(C).zIndex)},[C]),d.jsx("div",{ref:ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...fe,transform:U?fe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:d.jsx(fO,{scope:t,placedSide:z,onArrowChange:O,arrowX:k,arrowY:I,shouldHideArrow:q,children:d.jsx(Ie.div,{"data-side":z,"data-align":se,...S,ref:N,style:{...S.style,animation:U?void 0:"none"}})})})});BS.displayName=dg;var zS="PopperArrow",mO={top:"bottom",right:"left",bottom:"top",left:"right"},FS=w.forwardRef(function(e,t){const{__scopePopper:s,...r}=e,o=pO(zS,s),l=mO[o.placedSide];return d.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:d.jsx(dO,{...r,ref:t,style:{...r.style,display:"block"}})})});FS.displayName=zS;function gO(a){return a!==null}var vO=a=>({name:"transformOrigin",options:a,fn(e){const{placement:t,rects:s,middlewareData:r}=e,l=r.arrow?.centerOffset!==0,u=l?0:a.arrowWidth,h=l?0:a.arrowHeight,[p,g]=HS(t),m={start:"0%",center:"50%",end:"100%"}[g],y=(r.arrow?.x??0)+u/2,b=(r.arrow?.y??0)+h/2;let A="",S="";return p==="bottom"?(A=l?m:`${y}px`,S=`${-h}px`):p==="top"?(A=l?m:`${y}px`,S=`${s.floating.height+h}px`):p==="right"?(A=`${-h}px`,S=l?m:`${b}px`):p==="left"&&(A=`${s.floating.width+h}px`,S=l?m:`${b}px`),{data:{x:A,y:S}}}});function HS(a){const[e,t="center"]=a.split("-");return[e,t]}var US=LS,VS=IS,$S=BS,GS=FS;function yO(a){const e=xO(a),t=w.forwardRef((s,r)=>{const{children:o,...l}=s,u=w.Children.toArray(o),h=u.find(wO);if(h){const p=h.props.children,g=u.map(m=>m===h?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:m);return d.jsx(e,{...l,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,g):null})}return d.jsx(e,{...l,ref:r,children:o})});return t.displayName=`${a}.Slot`,t}function xO(a){const e=w.forwardRef((t,s)=>{const{children:r,...o}=t;if(w.isValidElement(r)){const l=AO(r),u=SO(o,r.props);return r.type!==w.Fragment&&(u.ref=s?Vi(s,l):l),w.cloneElement(r,u)}return w.Children.count(r)>1?w.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var bO=Symbol("radix.slottable");function wO(a){return w.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===bO}function SO(a,e){const t={...e};for(const s in e){const r=a[s],o=e[s];/^on[A-Z]/.test(s)?r&&o?t[s]=(...u)=>{const h=o(...u);return r(...u),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...o}:s==="className"&&(t[s]=[r,o].filter(Boolean).join(" "))}return{...a,...t}}function AO(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}function Ud(a){const e=w.useRef({value:a,previous:a});return w.useMemo(()=>(e.current.value!==a&&(e.current.previous=e.current.value,e.current.value=a),e.current.previous),[a])}var qS=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),CO="VisuallyHidden",EO=w.forwardRef((a,e)=>d.jsx(Ie.span,{...a,ref:e,style:{...qS,...a.style}}));EO.displayName=CO;var _O=[" ","Enter","ArrowUp","ArrowDown"],TO=[" ","Enter"],sr="Select",[Vd,$d,NO]=Cd(sr),[Lo]=cs(sr,[NO,Hd]),Gd=Hd(),[jO,Ta]=Lo(sr),[MO,RO]=Lo(sr),YS=a=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:r,onOpenChange:o,value:l,defaultValue:u,onValueChange:h,dir:p,name:g,autoComplete:m,disabled:y,required:b,form:A}=a,S=Gd(e),[E,C]=w.useState(null),[j,N]=w.useState(null),[M,O]=w.useState(!1),P=No(p),[L,B]=Bi({prop:s,defaultProp:r??!1,onChange:o,caller:sr}),[F,$]=Bi({prop:l,defaultProp:u,onChange:h,caller:sr}),Y=w.useRef(null),te=E?A||!!E.closest("form"):!0,[oe,ie]=w.useState(new Set),fe=Array.from(oe).map(R=>R.props.value).join(";");return d.jsx(US,{...S,children:d.jsxs(jO,{required:b,scope:e,trigger:E,onTriggerChange:C,valueNode:j,onValueNodeChange:N,valueNodeHasChildren:M,onValueNodeHasChildrenChange:O,contentId:ai(),value:F,onValueChange:$,open:L,onOpenChange:B,dir:P,triggerPointerDownPosRef:Y,disabled:y,children:[d.jsx(Vd.Provider,{scope:e,children:d.jsx(MO,{scope:a.__scopeSelect,onNativeOptionAdd:w.useCallback(R=>{ie(U=>new Set(U).add(R))},[]),onNativeOptionRemove:w.useCallback(R=>{ie(U=>{const H=new Set(U);return H.delete(R),H})},[]),children:t})}),te?d.jsxs(mA,{"aria-hidden":!0,required:b,tabIndex:-1,name:g,autoComplete:m,value:F,onChange:R=>$(R.target.value),disabled:y,form:A,children:[F===void 0?d.jsx("option",{value:""}):null,Array.from(oe)]},fe):null]})})};YS.displayName=sr;var XS="SelectTrigger",WS=w.forwardRef((a,e)=>{const{__scopeSelect:t,disabled:s=!1,...r}=a,o=Gd(t),l=Ta(XS,t),u=l.disabled||s,h=qe(e,l.onTriggerChange),p=$d(t),g=w.useRef("touch"),[m,y,b]=vA(S=>{const E=p().filter(N=>!N.disabled),C=E.find(N=>N.value===l.value),j=yA(E,S,C);j!==void 0&&l.onValueChange(j.value)}),A=S=>{u||(l.onOpenChange(!0),b()),S&&(l.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return d.jsx(VS,{asChild:!0,...o,children:d.jsx(Ie.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":gA(l.value)?"":void 0,...r,ref:h,onClick:xe(r.onClick,S=>{S.currentTarget.focus(),g.current!=="mouse"&&A(S)}),onPointerDown:xe(r.onPointerDown,S=>{g.current=S.pointerType;const E=S.target;E.hasPointerCapture(S.pointerId)&&E.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(A(S),S.preventDefault())}),onKeyDown:xe(r.onKeyDown,S=>{const E=m.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&y(S.key),!(E&&S.key===" ")&&_O.includes(S.key)&&(A(),S.preventDefault())})})})});WS.displayName=XS;var KS="SelectValue",QS=w.forwardRef((a,e)=>{const{__scopeSelect:t,className:s,style:r,children:o,placeholder:l="",...u}=a,h=Ta(KS,t),{onValueNodeHasChildrenChange:p}=h,g=o!==void 0,m=qe(e,h.onValueNodeChange);return En(()=>{p(g)},[p,g]),d.jsx(Ie.span,{...u,ref:m,style:{pointerEvents:"none"},children:gA(h.value)?d.jsx(d.Fragment,{children:l}):o})});QS.displayName=KS;var DO="SelectIcon",ZS=w.forwardRef((a,e)=>{const{__scopeSelect:t,children:s,...r}=a;return d.jsx(Ie.span,{"aria-hidden":!0,...r,ref:e,children:s||""})});ZS.displayName=DO;var kO="SelectPortal",JS=a=>d.jsx(Rd,{asChild:!0,...a});JS.displayName=kO;var ir="SelectContent",eA=w.forwardRef((a,e)=>{const t=Ta(ir,a.__scopeSelect),[s,r]=w.useState();if(En(()=>{r(new DocumentFragment)},[]),!t.open){const o=s;return o?sc.createPortal(d.jsx(tA,{scope:a.__scopeSelect,children:d.jsx(Vd.Slot,{scope:a.__scopeSelect,children:d.jsx("div",{children:a.children})})}),o):null}return d.jsx(nA,{...a,ref:e})});eA.displayName=ir;var Ds=10,[tA,Na]=Lo(ir),OO="SelectContentImpl",LO=yO("SelectContent.RemoveScroll"),nA=w.forwardRef((a,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:o,onPointerDownOutside:l,side:u,sideOffset:h,align:p,alignOffset:g,arrowPadding:m,collisionBoundary:y,collisionPadding:b,sticky:A,hideWhenDetached:S,avoidCollisions:E,...C}=a,j=Ta(ir,t),[N,M]=w.useState(null),[O,P]=w.useState(null),L=qe(e,Q=>M(Q)),[B,F]=w.useState(null),[$,Y]=w.useState(null),te=$d(t),[oe,ie]=w.useState(!1),fe=w.useRef(!1);w.useEffect(()=>{if(N)return Wm(N)},[N]),Xm();const R=w.useCallback(Q=>{const[ue,...pe]=te().map(Ne=>Ne.ref.current),[Ce]=pe.slice(-1),ye=document.activeElement;for(const Ne of Q)if(Ne===ye||(Ne?.scrollIntoView({block:"nearest"}),Ne===ue&&O&&(O.scrollTop=0),Ne===Ce&&O&&(O.scrollTop=O.scrollHeight),Ne?.focus(),document.activeElement!==ye))return},[te,O]),U=w.useCallback(()=>R([B,N]),[R,B,N]);w.useEffect(()=>{oe&&U()},[oe,U]);const{onOpenChange:H,triggerPointerDownPosRef:z}=j;w.useEffect(()=>{if(N){let Q={x:0,y:0};const ue=Ce=>{Q={x:Math.abs(Math.round(Ce.pageX)-(z.current?.x??0)),y:Math.abs(Math.round(Ce.pageY)-(z.current?.y??0))}},pe=Ce=>{Q.x<=10&&Q.y<=10?Ce.preventDefault():N.contains(Ce.target)||H(!1),document.removeEventListener("pointermove",ue),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",pe,{capture:!0})}}},[N,H,z]),w.useEffect(()=>{const Q=()=>H(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[H]);const[se,T]=vA(Q=>{const ue=te().filter(ye=>!ye.disabled),pe=ue.find(ye=>ye.ref.current===document.activeElement),Ce=yA(ue,Q,pe);Ce&&setTimeout(()=>Ce.ref.current.focus())}),k=w.useCallback((Q,ue,pe)=>{const Ce=!fe.current&&!pe;(j.value!==void 0&&j.value===ue||Ce)&&(F(Q),Ce&&(fe.current=!0))},[j.value]),I=w.useCallback(()=>N?.focus(),[N]),q=w.useCallback((Q,ue,pe)=>{const Ce=!fe.current&&!pe;(j.value!==void 0&&j.value===ue||Ce)&&Y(Q)},[j.value]),X=s==="popper"?gm:sA,ce=X===gm?{side:u,sideOffset:h,align:p,alignOffset:g,arrowPadding:m,collisionBoundary:y,collisionPadding:b,sticky:A,hideWhenDetached:S,avoidCollisions:E}:{};return d.jsx(tA,{scope:t,content:N,viewport:O,onViewportChange:P,itemRefCallback:k,selectedItem:B,onItemLeave:I,itemTextRefCallback:q,focusSelectedItem:U,selectedItemText:$,position:s,isPositioned:oe,searchRef:se,children:d.jsx(kd,{as:LO,allowPinchZoom:!0,children:d.jsx(Md,{asChild:!0,trapped:j.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:xe(r,Q=>{j.trigger?.focus({preventScroll:!0}),Q.preventDefault()}),children:d.jsx(jd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:d.jsx(X,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:Q=>Q.preventDefault(),...C,...ce,onPlaced:()=>ie(!0),ref:L,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:xe(C.onKeyDown,Q=>{const ue=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!ue&&Q.key.length===1&&T(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let Ce=te().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const ye=Q.target,Ne=Ce.indexOf(ye);Ce=Ce.slice(Ne+1)}setTimeout(()=>R(Ce)),Q.preventDefault()}})})})})})})});nA.displayName=OO;var PO="SelectItemAlignedPosition",sA=w.forwardRef((a,e)=>{const{__scopeSelect:t,onPlaced:s,...r}=a,o=Ta(ir,t),l=Na(ir,t),[u,h]=w.useState(null),[p,g]=w.useState(null),m=qe(e,L=>g(L)),y=$d(t),b=w.useRef(!1),A=w.useRef(!0),{viewport:S,selectedItem:E,selectedItemText:C,focusSelectedItem:j}=l,N=w.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&p&&S&&E&&C){const L=o.trigger.getBoundingClientRect(),B=p.getBoundingClientRect(),F=o.valueNode.getBoundingClientRect(),$=C.getBoundingClientRect();if(o.dir!=="rtl"){const ye=$.left-B.left,Ne=F.left-ye,Be=L.left-Ne,De=L.width+Be,K=Math.max(De,B.width),be=window.innerWidth-Ds,Le=ql(Ne,[Ds,Math.max(Ds,be-K)]);u.style.minWidth=De+"px",u.style.left=Le+"px"}else{const ye=B.right-$.right,Ne=window.innerWidth-F.right-ye,Be=window.innerWidth-L.right-Ne,De=L.width+Be,K=Math.max(De,B.width),be=window.innerWidth-Ds,Le=ql(Ne,[Ds,Math.max(Ds,be-K)]);u.style.minWidth=De+"px",u.style.right=Le+"px"}const Y=y(),te=window.innerHeight-Ds*2,oe=S.scrollHeight,ie=window.getComputedStyle(p),fe=parseInt(ie.borderTopWidth,10),R=parseInt(ie.paddingTop,10),U=parseInt(ie.borderBottomWidth,10),H=parseInt(ie.paddingBottom,10),z=fe+R+oe+H+U,se=Math.min(E.offsetHeight*5,z),T=window.getComputedStyle(S),k=parseInt(T.paddingTop,10),I=parseInt(T.paddingBottom,10),q=L.top+L.height/2-Ds,X=te-q,ce=E.offsetHeight/2,Q=E.offsetTop+ce,ue=fe+R+Q,pe=z-ue;if(ue<=q){const ye=Y.length>0&&E===Y[Y.length-1].ref.current;u.style.bottom="0px";const Ne=p.clientHeight-S.offsetTop-S.offsetHeight,Be=Math.max(X,ce+(ye?I:0)+Ne+U),De=ue+Be;u.style.height=De+"px"}else{const ye=Y.length>0&&E===Y[0].ref.current;u.style.top="0px";const Be=Math.max(q,fe+S.offsetTop+(ye?k:0)+ce)+pe;u.style.height=Be+"px",S.scrollTop=ue-q+S.offsetTop}u.style.margin=`${Ds}px 0`,u.style.minHeight=se+"px",u.style.maxHeight=te+"px",s?.(),requestAnimationFrame(()=>b.current=!0)}},[y,o.trigger,o.valueNode,u,p,S,E,C,o.dir,s]);En(()=>N(),[N]);const[M,O]=w.useState();En(()=>{p&&O(window.getComputedStyle(p).zIndex)},[p]);const P=w.useCallback(L=>{L&&A.current===!0&&(N(),j?.(),A.current=!1)},[N,j]);return d.jsx(BO,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:P,children:d.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:d.jsx(Ie.div,{...r,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});sA.displayName=PO;var IO="SelectPopperPosition",gm=w.forwardRef((a,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:r=Ds,...o}=a,l=Gd(t);return d.jsx($S,{...l,...o,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});gm.displayName=IO;var[BO,hg]=Lo(ir,{}),vm="SelectViewport",iA=w.forwardRef((a,e)=>{const{__scopeSelect:t,nonce:s,...r}=a,o=Na(vm,t),l=hg(vm,t),u=qe(e,o.onViewportChange),h=w.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),d.jsx(Vd.Slot,{scope:t,children:d.jsx(Ie.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:xe(r.onScroll,p=>{const g=p.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:y}=l;if(y?.current&&m){const b=Math.abs(h.current-g.scrollTop);if(b>0){const A=window.innerHeight-Ds*2,S=parseFloat(m.style.minHeight),E=parseFloat(m.style.height),C=Math.max(S,E);if(C<A){const j=C+b,N=Math.min(A,j),M=j-N;m.style.height=N+"px",m.style.bottom==="0px"&&(g.scrollTop=M>0?M:0,m.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});iA.displayName=vm;var aA="SelectGroup",[zO,FO]=Lo(aA),HO=w.forwardRef((a,e)=>{const{__scopeSelect:t,...s}=a,r=ai();return d.jsx(zO,{scope:t,id:r,children:d.jsx(Ie.div,{role:"group","aria-labelledby":r,...s,ref:e})})});HO.displayName=aA;var rA="SelectLabel",UO=w.forwardRef((a,e)=>{const{__scopeSelect:t,...s}=a,r=FO(rA,t);return d.jsx(Ie.div,{id:r.id,...s,ref:e})});UO.displayName=rA;var fd="SelectItem",[VO,oA]=Lo(fd),lA=w.forwardRef((a,e)=>{const{__scopeSelect:t,value:s,disabled:r=!1,textValue:o,...l}=a,u=Ta(fd,t),h=Na(fd,t),p=u.value===s,[g,m]=w.useState(o??""),[y,b]=w.useState(!1),A=qe(e,j=>h.itemRefCallback?.(j,s,r)),S=ai(),E=w.useRef("touch"),C=()=>{r||(u.onValueChange(s),u.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(VO,{scope:t,value:s,disabled:r,textId:S,isSelected:p,onItemTextChange:w.useCallback(j=>{m(N=>N||(j?.textContent??"").trim())},[]),children:d.jsx(Vd.ItemSlot,{scope:t,value:s,disabled:r,textValue:g,children:d.jsx(Ie.div,{role:"option","aria-labelledby":S,"data-highlighted":y?"":void 0,"aria-selected":p&&y,"data-state":p?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...l,ref:A,onFocus:xe(l.onFocus,()=>b(!0)),onBlur:xe(l.onBlur,()=>b(!1)),onClick:xe(l.onClick,()=>{E.current!=="mouse"&&C()}),onPointerUp:xe(l.onPointerUp,()=>{E.current==="mouse"&&C()}),onPointerDown:xe(l.onPointerDown,j=>{E.current=j.pointerType}),onPointerMove:xe(l.onPointerMove,j=>{E.current=j.pointerType,r?h.onItemLeave?.():E.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xe(l.onPointerLeave,j=>{j.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:xe(l.onKeyDown,j=>{h.searchRef?.current!==""&&j.key===" "||(TO.includes(j.key)&&C(),j.key===" "&&j.preventDefault())})})})})});lA.displayName=fd;var Il="SelectItemText",cA=w.forwardRef((a,e)=>{const{__scopeSelect:t,className:s,style:r,...o}=a,l=Ta(Il,t),u=Na(Il,t),h=oA(Il,t),p=RO(Il,t),[g,m]=w.useState(null),y=qe(e,C=>m(C),h.onItemTextChange,C=>u.itemTextRefCallback?.(C,h.value,h.disabled)),b=g?.textContent,A=w.useMemo(()=>d.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:S,onNativeOptionRemove:E}=p;return En(()=>(S(A),()=>E(A)),[S,E,A]),d.jsxs(d.Fragment,{children:[d.jsx(Ie.span,{id:h.textId,...o,ref:y}),h.isSelected&&l.valueNode&&!l.valueNodeHasChildren?sc.createPortal(o.children,l.valueNode):null]})});cA.displayName=Il;var uA="SelectItemIndicator",dA=w.forwardRef((a,e)=>{const{__scopeSelect:t,...s}=a;return oA(uA,t).isSelected?d.jsx(Ie.span,{"aria-hidden":!0,...s,ref:e}):null});dA.displayName=uA;var ym="SelectScrollUpButton",hA=w.forwardRef((a,e)=>{const t=Na(ym,a.__scopeSelect),s=hg(ym,a.__scopeSelect),[r,o]=w.useState(!1),l=qe(e,s.onScrollButtonChange);return En(()=>{if(t.viewport&&t.isPositioned){let u=function(){const p=h.scrollTop>0;o(p)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),r?d.jsx(pA,{...a,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});hA.displayName=ym;var xm="SelectScrollDownButton",fA=w.forwardRef((a,e)=>{const t=Na(xm,a.__scopeSelect),s=hg(xm,a.__scopeSelect),[r,o]=w.useState(!1),l=qe(e,s.onScrollButtonChange);return En(()=>{if(t.viewport&&t.isPositioned){let u=function(){const p=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<p;o(g)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),r?d.jsx(pA,{...a,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});fA.displayName=xm;var pA=w.forwardRef((a,e)=>{const{__scopeSelect:t,onAutoScroll:s,...r}=a,o=Na("SelectScrollButton",t),l=w.useRef(null),u=$d(t),h=w.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return w.useEffect(()=>()=>h(),[h]),En(()=>{u().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),d.jsx(Ie.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:xe(r.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:xe(r.onPointerMove,()=>{o.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:xe(r.onPointerLeave,()=>{h()})})}),$O="SelectSeparator",GO=w.forwardRef((a,e)=>{const{__scopeSelect:t,...s}=a;return d.jsx(Ie.div,{"aria-hidden":!0,...s,ref:e})});GO.displayName=$O;var bm="SelectArrow",qO=w.forwardRef((a,e)=>{const{__scopeSelect:t,...s}=a,r=Gd(t),o=Ta(bm,t),l=Na(bm,t);return o.open&&l.position==="popper"?d.jsx(GS,{...r,...s,ref:e}):null});qO.displayName=bm;var YO="SelectBubbleInput",mA=w.forwardRef(({__scopeSelect:a,value:e,...t},s)=>{const r=w.useRef(null),o=qe(s,r),l=Ud(e);return w.useEffect(()=>{const u=r.current;if(!u)return;const h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(l!==e&&g){const m=new Event("change",{bubbles:!0});g.call(u,e),u.dispatchEvent(m)}},[l,e]),d.jsx(Ie.select,{...t,style:{...qS,...t.style},ref:o,defaultValue:e})});mA.displayName=YO;function gA(a){return a===""||a===void 0}function vA(a){const e=An(a),t=w.useRef(""),s=w.useRef(0),r=w.useCallback(l=>{const u=t.current+l;e(u),(function h(p){t.current=p,window.clearTimeout(s.current),p!==""&&(s.current=window.setTimeout(()=>h(""),1e3))})(u)},[e]),o=w.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,r,o]}function yA(a,e,t){const r=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=t?a.indexOf(t):-1;let l=XO(a,Math.max(o,0));r.length===1&&(l=l.filter(p=>p!==t));const h=l.find(p=>p.textValue.toLowerCase().startsWith(r.toLowerCase()));return h!==t?h:void 0}function XO(a,e){return a.map((t,s)=>a[(e+s)%a.length])}var WO=YS,KO=WS,QO=QS,ZO=ZS,JO=JS,eL=eA,tL=iA,nL=lA,sL=cA,iL=dA,aL=hA,rL=fA;function Oi({...a}){return d.jsx(WO,{"data-slot":"select",...a})}function Li({...a}){return d.jsx(QO,{"data-slot":"select-value",...a})}function Pi({className:a,size:e="default",children:t,...s}){return d.jsxs(KO,{"data-slot":"select-trigger","data-size":e,className:Ge("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...s,children:[t,d.jsx(ZO,{asChild:!0,children:d.jsx($m,{className:"size-4 opacity-50"})})]})}function Ii({className:a,children:e,position:t="item-aligned",align:s="center",...r}){return d.jsx(JO,{children:d.jsxs(eL,{"data-slot":"select-content",className:Ge("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:t,align:s,...r,children:[d.jsx(oL,{}),d.jsx(tL,{className:Ge("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),d.jsx(lL,{})]})})}function qt({className:a,children:e,...t}){return d.jsxs(nL,{"data-slot":"select-item",className:Ge("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...t,children:[d.jsx("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:d.jsx(iL,{children:d.jsx(A1,{className:"size-4"})})}),d.jsx(sL,{children:e})]})}function oL({className:a,...e}){return d.jsx(aL,{"data-slot":"select-scroll-up-button",className:Ge("flex cursor-default items-center justify-center py-1",a),...e,children:d.jsx(C1,{className:"size-4"})})}function lL({className:a,...e}){return d.jsx(rL,{"data-slot":"select-scroll-down-button",className:Ge("flex cursor-default items-center justify-center py-1",a),...e,children:d.jsx($m,{className:"size-4"})})}function Yt({className:a,...e}){return d.jsx("div",{"data-slot":"card",className:Ge("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...e})}function td({className:a,...e}){return d.jsx("div",{"data-slot":"card-header",className:Ge("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...e})}function nd({className:a,...e}){return d.jsx("div",{"data-slot":"card-title",className:Ge("leading-none font-semibold",a),...e})}function Xt({className:a,...e}){return d.jsx("div",{"data-slot":"card-content",className:Ge("px-6",a),...e})}function cL(a){const e=uL(a),t=w.forwardRef((s,r)=>{const{children:o,...l}=s,u=w.Children.toArray(o),h=u.find(hL);if(h){const p=h.props.children,g=u.map(m=>m===h?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:m);return d.jsx(e,{...l,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,g):null})}return d.jsx(e,{...l,ref:r,children:o})});return t.displayName=`${a}.Slot`,t}function uL(a){const e=w.forwardRef((t,s)=>{const{children:r,...o}=t;if(w.isValidElement(r)){const l=pL(r),u=fL(o,r.props);return r.type!==w.Fragment&&(u.ref=s?Vi(s,l):l),w.cloneElement(r,u)}return w.Children.count(r)>1?w.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var dL=Symbol("radix.slottable");function hL(a){return w.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===dL}function fL(a,e){const t={...e};for(const s in e){const r=a[s],o=e[s];/^on[A-Z]/.test(s)?r&&o?t[s]=(...u)=>{const h=o(...u);return r(...u),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...o}:s==="className"&&(t[s]=[r,o].filter(Boolean).join(" "))}return{...a,...t}}function pL(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}var wm=["Enter"," "],mL=["ArrowDown","PageUp","Home"],xA=["ArrowUp","PageDown","End"],gL=[...mL,...xA],vL={ltr:[...wm,"ArrowRight"],rtl:[...wm,"ArrowLeft"]},yL={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rc="Menu",[Wl,xL,bL]=Cd(rc),[lr,bA]=cs(rc,[bL,Hd,Ed]),qd=Hd(),wA=Ed(),[wL,cr]=lr(rc),[SL,oc]=lr(rc),SA=a=>{const{__scopeMenu:e,open:t=!1,children:s,dir:r,onOpenChange:o,modal:l=!0}=a,u=qd(e),[h,p]=w.useState(null),g=w.useRef(!1),m=An(o),y=No(r);return w.useEffect(()=>{const b=()=>{g.current=!0,document.addEventListener("pointerdown",A,{capture:!0,once:!0}),document.addEventListener("pointermove",A,{capture:!0,once:!0})},A=()=>g.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",A,{capture:!0}),document.removeEventListener("pointermove",A,{capture:!0})}},[]),d.jsx(US,{...u,children:d.jsx(wL,{scope:e,open:t,onOpenChange:m,content:h,onContentChange:p,children:d.jsx(SL,{scope:e,onClose:w.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:g,dir:y,modal:l,children:s})})})};SA.displayName=rc;var AL="MenuAnchor",fg=w.forwardRef((a,e)=>{const{__scopeMenu:t,...s}=a,r=qd(t);return d.jsx(VS,{...r,...s,ref:e})});fg.displayName=AL;var pg="MenuPortal",[CL,AA]=lr(pg,{forceMount:void 0}),CA=a=>{const{__scopeMenu:e,forceMount:t,children:s,container:r}=a,o=cr(pg,e);return d.jsx(CL,{scope:e,forceMount:t,children:d.jsx(Yn,{present:t||o.open,children:d.jsx(Rd,{asChild:!0,container:r,children:s})})})};CA.displayName=pg;var Es="MenuContent",[EL,mg]=lr(Es),EA=w.forwardRef((a,e)=>{const t=AA(Es,a.__scopeMenu),{forceMount:s=t.forceMount,...r}=a,o=cr(Es,a.__scopeMenu),l=oc(Es,a.__scopeMenu);return d.jsx(Wl.Provider,{scope:a.__scopeMenu,children:d.jsx(Yn,{present:s||o.open,children:d.jsx(Wl.Slot,{scope:a.__scopeMenu,children:l.modal?d.jsx(_L,{...r,ref:e}):d.jsx(TL,{...r,ref:e})})})})}),_L=w.forwardRef((a,e)=>{const t=cr(Es,a.__scopeMenu),s=w.useRef(null),r=qe(e,s);return w.useEffect(()=>{const o=s.current;if(o)return Wm(o)},[]),d.jsx(gg,{...a,ref:r,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:xe(a.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),TL=w.forwardRef((a,e)=>{const t=cr(Es,a.__scopeMenu);return d.jsx(gg,{...a,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),NL=cL("MenuContent.ScrollLock"),gg=w.forwardRef((a,e)=>{const{__scopeMenu:t,loop:s=!1,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:h,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:y,onDismiss:b,disableOutsideScroll:A,...S}=a,E=cr(Es,t),C=oc(Es,t),j=qd(t),N=wA(t),M=xL(t),[O,P]=w.useState(null),L=w.useRef(null),B=qe(e,L,E.onContentChange),F=w.useRef(0),$=w.useRef(""),Y=w.useRef(0),te=w.useRef(null),oe=w.useRef("right"),ie=w.useRef(0),fe=A?kd:w.Fragment,R=A?{as:NL,allowPinchZoom:!0}:void 0,U=z=>{const se=$.current+z,T=M().filter(Q=>!Q.disabled),k=document.activeElement,I=T.find(Q=>Q.ref.current===k)?.textValue,q=T.map(Q=>Q.textValue),X=FL(q,se,I),ce=T.find(Q=>Q.textValue===X)?.ref.current;(function Q(ue){$.current=ue,window.clearTimeout(F.current),ue!==""&&(F.current=window.setTimeout(()=>Q(""),1e3))})(se),ce&&setTimeout(()=>ce.focus())};w.useEffect(()=>()=>window.clearTimeout(F.current),[]),Xm();const H=w.useCallback(z=>oe.current===te.current?.side&&UL(z,te.current?.area),[]);return d.jsx(EL,{scope:t,searchRef:$,onItemEnter:w.useCallback(z=>{H(z)&&z.preventDefault()},[H]),onItemLeave:w.useCallback(z=>{H(z)||(L.current?.focus(),P(null))},[H]),onTriggerLeave:w.useCallback(z=>{H(z)&&z.preventDefault()},[H]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:w.useCallback(z=>{te.current=z},[]),children:d.jsx(fe,{...R,children:d.jsx(Md,{asChild:!0,trapped:r,onMountAutoFocus:xe(o,z=>{z.preventDefault(),L.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:d.jsx(jd,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:y,onDismiss:b,children:d.jsx(Kw,{asChild:!0,...N,dir:C.dir,orientation:"vertical",loop:s,currentTabStopId:O,onCurrentTabStopIdChange:P,onEntryFocus:xe(h,z=>{C.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:d.jsx($S,{role:"menu","aria-orientation":"vertical","data-state":HA(E.open),"data-radix-menu-content":"",dir:C.dir,...j,...S,ref:B,style:{outline:"none",...S.style},onKeyDown:xe(S.onKeyDown,z=>{const T=z.target.closest("[data-radix-menu-content]")===z.currentTarget,k=z.ctrlKey||z.altKey||z.metaKey,I=z.key.length===1;T&&(z.key==="Tab"&&z.preventDefault(),!k&&I&&U(z.key));const q=L.current;if(z.target!==q||!gL.includes(z.key))return;z.preventDefault();const ce=M().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);xA.includes(z.key)&&ce.reverse(),BL(ce)}),onBlur:xe(a.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(F.current),$.current="")}),onPointerMove:xe(a.onPointerMove,Kl(z=>{const se=z.target,T=ie.current!==z.clientX;if(z.currentTarget.contains(se)&&T){const k=z.clientX>ie.current?"right":"left";oe.current=k,ie.current=z.clientX}}))})})})})})})});EA.displayName=Es;var jL="MenuGroup",vg=w.forwardRef((a,e)=>{const{__scopeMenu:t,...s}=a;return d.jsx(Ie.div,{role:"group",...s,ref:e})});vg.displayName=jL;var ML="MenuLabel",_A=w.forwardRef((a,e)=>{const{__scopeMenu:t,...s}=a;return d.jsx(Ie.div,{...s,ref:e})});_A.displayName=ML;var pd="MenuItem",X0="menu.itemSelect",Yd=w.forwardRef((a,e)=>{const{disabled:t=!1,onSelect:s,...r}=a,o=w.useRef(null),l=oc(pd,a.__scopeMenu),u=mg(pd,a.__scopeMenu),h=qe(e,o),p=w.useRef(!1),g=()=>{const m=o.current;if(!t&&m){const y=new CustomEvent(X0,{bubbles:!0,cancelable:!0});m.addEventListener(X0,b=>s?.(b),{once:!0}),$w(m,y),y.defaultPrevented?p.current=!1:l.onClose()}};return d.jsx(TA,{...r,ref:h,disabled:t,onClick:xe(a.onClick,g),onPointerDown:m=>{a.onPointerDown?.(m),p.current=!0},onPointerUp:xe(a.onPointerUp,m=>{p.current||m.currentTarget?.click()}),onKeyDown:xe(a.onKeyDown,m=>{const y=u.searchRef.current!=="";t||y&&m.key===" "||wm.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Yd.displayName=pd;var TA=w.forwardRef((a,e)=>{const{__scopeMenu:t,disabled:s=!1,textValue:r,...o}=a,l=mg(pd,t),u=wA(t),h=w.useRef(null),p=qe(e,h),[g,m]=w.useState(!1),[y,b]=w.useState("");return w.useEffect(()=>{const A=h.current;A&&b((A.textContent??"").trim())},[o.children]),d.jsx(Wl.ItemSlot,{scope:t,disabled:s,textValue:r??y,children:d.jsx(Qw,{asChild:!0,...u,focusable:!s,children:d.jsx(Ie.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:p,onPointerMove:xe(a.onPointerMove,Kl(A=>{s?l.onItemLeave(A):(l.onItemEnter(A),A.defaultPrevented||A.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:xe(a.onPointerLeave,Kl(A=>l.onItemLeave(A))),onFocus:xe(a.onFocus,()=>m(!0)),onBlur:xe(a.onBlur,()=>m(!1))})})})}),RL="MenuCheckboxItem",NA=w.forwardRef((a,e)=>{const{checked:t=!1,onCheckedChange:s,...r}=a;return d.jsx(kA,{scope:a.__scopeMenu,checked:t,children:d.jsx(Yd,{role:"menuitemcheckbox","aria-checked":md(t)?"mixed":t,...r,ref:e,"data-state":xg(t),onSelect:xe(r.onSelect,()=>s?.(md(t)?!0:!t),{checkForDefaultPrevented:!1})})})});NA.displayName=RL;var jA="MenuRadioGroup",[DL,kL]=lr(jA,{value:void 0,onValueChange:()=>{}}),MA=w.forwardRef((a,e)=>{const{value:t,onValueChange:s,...r}=a,o=An(s);return d.jsx(DL,{scope:a.__scopeMenu,value:t,onValueChange:o,children:d.jsx(vg,{...r,ref:e})})});MA.displayName=jA;var RA="MenuRadioItem",DA=w.forwardRef((a,e)=>{const{value:t,...s}=a,r=kL(RA,a.__scopeMenu),o=t===r.value;return d.jsx(kA,{scope:a.__scopeMenu,checked:o,children:d.jsx(Yd,{role:"menuitemradio","aria-checked":o,...s,ref:e,"data-state":xg(o),onSelect:xe(s.onSelect,()=>r.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});DA.displayName=RA;var yg="MenuItemIndicator",[kA,OL]=lr(yg,{checked:!1}),OA=w.forwardRef((a,e)=>{const{__scopeMenu:t,forceMount:s,...r}=a,o=OL(yg,t);return d.jsx(Yn,{present:s||md(o.checked)||o.checked===!0,children:d.jsx(Ie.span,{...r,ref:e,"data-state":xg(o.checked)})})});OA.displayName=yg;var LL="MenuSeparator",LA=w.forwardRef((a,e)=>{const{__scopeMenu:t,...s}=a;return d.jsx(Ie.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});LA.displayName=LL;var PL="MenuArrow",PA=w.forwardRef((a,e)=>{const{__scopeMenu:t,...s}=a,r=qd(t);return d.jsx(GS,{...r,...s,ref:e})});PA.displayName=PL;var IL="MenuSub",[IB,IA]=lr(IL),Bl="MenuSubTrigger",BA=w.forwardRef((a,e)=>{const t=cr(Bl,a.__scopeMenu),s=oc(Bl,a.__scopeMenu),r=IA(Bl,a.__scopeMenu),o=mg(Bl,a.__scopeMenu),l=w.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:h}=o,p={__scopeMenu:a.__scopeMenu},g=w.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return w.useEffect(()=>g,[g]),w.useEffect(()=>{const m=u.current;return()=>{window.clearTimeout(m),h(null)}},[u,h]),d.jsx(fg,{asChild:!0,...p,children:d.jsx(TA,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":r.contentId,"data-state":HA(t.open),...a,ref:Vi(e,r.onTriggerChange),onClick:m=>{a.onClick?.(m),!(a.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:xe(a.onPointerMove,Kl(m=>{o.onItemEnter(m),!m.defaultPrevented&&!a.disabled&&!t.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),g()},100))})),onPointerLeave:xe(a.onPointerLeave,Kl(m=>{g();const y=t.content?.getBoundingClientRect();if(y){const b=t.content?.dataset.side,A=b==="right",S=A?-5:5,E=y[A?"left":"right"],C=y[A?"right":"left"];o.onPointerGraceIntentChange({area:[{x:m.clientX+S,y:m.clientY},{x:E,y:y.top},{x:C,y:y.top},{x:C,y:y.bottom},{x:E,y:y.bottom}],side:b}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(m),m.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:xe(a.onKeyDown,m=>{const y=o.searchRef.current!=="";a.disabled||y&&m.key===" "||vL[s.dir].includes(m.key)&&(t.onOpenChange(!0),t.content?.focus(),m.preventDefault())})})})});BA.displayName=Bl;var zA="MenuSubContent",FA=w.forwardRef((a,e)=>{const t=AA(Es,a.__scopeMenu),{forceMount:s=t.forceMount,...r}=a,o=cr(Es,a.__scopeMenu),l=oc(Es,a.__scopeMenu),u=IA(zA,a.__scopeMenu),h=w.useRef(null),p=qe(e,h);return d.jsx(Wl.Provider,{scope:a.__scopeMenu,children:d.jsx(Yn,{present:s||o.open,children:d.jsx(Wl.Slot,{scope:a.__scopeMenu,children:d.jsx(gg,{id:u.contentId,"aria-labelledby":u.triggerId,...r,ref:p,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{l.isUsingKeyboardRef.current&&h.current?.focus(),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:xe(a.onFocusOutside,g=>{g.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:xe(a.onEscapeKeyDown,g=>{l.onClose(),g.preventDefault()}),onKeyDown:xe(a.onKeyDown,g=>{const m=g.currentTarget.contains(g.target),y=yL[l.dir].includes(g.key);m&&y&&(o.onOpenChange(!1),u.trigger?.focus(),g.preventDefault())})})})})})});FA.displayName=zA;function HA(a){return a?"open":"closed"}function md(a){return a==="indeterminate"}function xg(a){return md(a)?"indeterminate":a?"checked":"unchecked"}function BL(a){const e=document.activeElement;for(const t of a)if(t===e||(t.focus(),document.activeElement!==e))return}function zL(a,e){return a.map((t,s)=>a[(e+s)%a.length])}function FL(a,e,t){const r=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=t?a.indexOf(t):-1;let l=zL(a,Math.max(o,0));r.length===1&&(l=l.filter(p=>p!==t));const h=l.find(p=>p.toLowerCase().startsWith(r.toLowerCase()));return h!==t?h:void 0}function HL(a,e){const{x:t,y:s}=a;let r=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const u=e[o],h=e[l],p=u.x,g=u.y,m=h.x,y=h.y;g>s!=y>s&&t<(m-p)*(s-g)/(y-g)+p&&(r=!r)}return r}function UL(a,e){if(!e)return!1;const t={x:a.clientX,y:a.clientY};return HL(t,e)}function Kl(a){return e=>e.pointerType==="mouse"?a(e):void 0}var VL=SA,$L=fg,GL=CA,qL=EA,YL=vg,XL=_A,WL=Yd,KL=NA,QL=MA,ZL=DA,JL=OA,eP=LA,tP=PA,nP=BA,sP=FA,Xd="DropdownMenu",[iP]=cs(Xd,[bA]),kn=bA(),[aP,UA]=iP(Xd),VA=a=>{const{__scopeDropdownMenu:e,children:t,dir:s,open:r,defaultOpen:o,onOpenChange:l,modal:u=!0}=a,h=kn(e),p=w.useRef(null),[g,m]=Bi({prop:r,defaultProp:o??!1,onChange:l,caller:Xd});return d.jsx(aP,{scope:e,triggerId:ai(),triggerRef:p,contentId:ai(),open:g,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(y=>!y),[m]),modal:u,children:d.jsx(VL,{...h,open:g,onOpenChange:m,dir:s,modal:u,children:t})})};VA.displayName=Xd;var $A="DropdownMenuTrigger",GA=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,disabled:s=!1,...r}=a,o=UA($A,t),l=kn(t);return d.jsx($L,{asChild:!0,...l,children:d.jsx(Ie.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Vi(e,o.triggerRef),onPointerDown:xe(a.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:xe(a.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});GA.displayName=$A;var rP="DropdownMenuPortal",qA=a=>{const{__scopeDropdownMenu:e,...t}=a,s=kn(e);return d.jsx(GL,{...s,...t})};qA.displayName=rP;var YA="DropdownMenuContent",XA=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=UA(YA,t),o=kn(t),l=w.useRef(!1);return d.jsx(qL,{id:r.contentId,"aria-labelledby":r.triggerId,...o,...s,ref:e,onCloseAutoFocus:xe(a.onCloseAutoFocus,u=>{l.current||r.triggerRef.current?.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:xe(a.onInteractOutside,u=>{const h=u.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,g=h.button===2||p;(!r.modal||g)&&(l.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});XA.displayName=YA;var oP="DropdownMenuGroup",lP=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(YL,{...r,...s,ref:e})});lP.displayName=oP;var cP="DropdownMenuLabel",uP=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(XL,{...r,...s,ref:e})});uP.displayName=cP;var dP="DropdownMenuItem",WA=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(WL,{...r,...s,ref:e})});WA.displayName=dP;var hP="DropdownMenuCheckboxItem",fP=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(KL,{...r,...s,ref:e})});fP.displayName=hP;var pP="DropdownMenuRadioGroup",mP=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(QL,{...r,...s,ref:e})});mP.displayName=pP;var gP="DropdownMenuRadioItem",vP=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(ZL,{...r,...s,ref:e})});vP.displayName=gP;var yP="DropdownMenuItemIndicator",xP=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(JL,{...r,...s,ref:e})});xP.displayName=yP;var bP="DropdownMenuSeparator",wP=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(eP,{...r,...s,ref:e})});wP.displayName=bP;var SP="DropdownMenuArrow",AP=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(tP,{...r,...s,ref:e})});AP.displayName=SP;var CP="DropdownMenuSubTrigger",EP=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(nP,{...r,...s,ref:e})});EP.displayName=CP;var _P="DropdownMenuSubContent",TP=w.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...s}=a,r=kn(t);return d.jsx(sP,{...r,...s,ref:e,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});TP.displayName=_P;var NP=VA,jP=GA,MP=qA,RP=XA,DP=WA;function wo({...a}){return d.jsx(NP,{"data-slot":"dropdown-menu",...a})}function So({...a}){return d.jsx(jP,{"data-slot":"dropdown-menu-trigger",...a})}function Ao({className:a,sideOffset:e=4,...t}){return d.jsx(MP,{children:d.jsx(RP,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Ge("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...t})})}function qn({className:a,inset:e,variant:t="default",...s}){return d.jsx(DP,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:Ge("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...s})}const kP={unread:"",reading:"",completed:""},OP={unread:"bg-slate-100 text-slate-700",reading:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700"},LP={book:"",paper:"",article:"",other:""};function PP({book:a,category:e,onClick:t,onEdit:s,onDelete:r}){return d.jsx(Yt,{className:"cursor-pointer hover:shadow-md transition-shadow overflow-hidden",onClick:t,children:d.jsx(Xt,{className:"p-4",children:d.jsxs("div",{className:"flex gap-3",children:[d.jsx("div",{className:"flex-shrink-0",children:a.coverUrl?d.jsx("img",{src:a.coverUrl,alt:a.title,className:"w-20 h-28 object-cover rounded-md bg-muted"}):d.jsxs("div",{className:"w-20 h-28 rounded-md bg-muted flex items-center justify-center relative",children:[d.jsx(Do,{className:"h-8 w-8 text-muted-foreground"}),a.fileId&&d.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 bg-primary rounded-full flex items-center justify-center",children:d.jsx(ba,{className:"h-3 w-3 text-primary-foreground"})})]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsx("h3",{className:"font-semibold text-sm line-clamp-2 flex-1",children:a.title}),d.jsxs(wo,{children:[d.jsx(So,{asChild:!0,children:d.jsx(ae,{variant:"ghost",size:"icon",className:"h-7 w-7 -mr-2 -mt-1 flex-shrink-0",onClick:o=>o.stopPropagation(),children:d.jsx(xo,{className:"h-4 w-4"})})}),d.jsxs(Ao,{align:"end",children:[d.jsx(qn,{onClick:o=>{o.stopPropagation(),s?.()},children:""}),d.jsx(qn,{className:"text-destructive",onClick:o=>{o.stopPropagation(),r?.()},children:""})]})]})]}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.author}),d.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[d.jsx(fn,{variant:"secondary",className:`text-xs ${OP[a.status]}`,children:kP[a.status]}),d.jsx(fn,{variant:"outline",className:"text-xs",children:LP[a.type]}),e&&d.jsx(fn,{variant:"outline",className:"text-xs",style:{borderColor:e.color,color:e.color},children:e.name})]}),d.jsxs("div",{className:"flex items-center justify-between mt-3",children:[d.jsx("div",{className:"flex items-center gap-1",children:a.rating?d.jsxs(d.Fragment,{children:[d.jsx(L1,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),d.jsx("span",{className:"text-xs",children:a.rating})]}):d.jsx("span",{className:"text-xs text-muted-foreground",children:""})}),d.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.fileId&&d.jsx(ba,{className:"h-3 w-3 text-primary"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(Td,{className:"h-3 w-3"}),d.jsx("span",{className:"text-xs",children:a.annotations.length})]})]})]}),a.currentPage&&a.totalPages&&d.jsxs("div",{className:"mt-2",children:[d.jsx("div",{className:"h-1.5 w-full bg-muted rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${a.currentPage/a.totalPages*100}%`}})}),d.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[a.currentPage," / ",a.totalPages," "]})]})]})]})})})}const W0=[{value:"unread",label:""},{value:"reading",label:""},{value:"completed",label:""}],K0=[{value:"book",label:""},{value:"paper",label:""},{value:"article",label:""},{value:"other",label:""}];function IP({books:a,categories:e,filter:t,onFilterChange:s,onBookClick:r,allTags:o,onEditBook:l,onDeleteBook:u}){const[h,p]=w.useState(!1),g=b=>e.find(A=>A.id===b),m=t.categoryId||t.status||t.type||t.tags&&t.tags.length>0,y=()=>{s({categoryId:void 0,status:void 0,type:void 0,tags:void 0})};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(gS,{open:h,onOpenChange:p,children:[d.jsx(vS,{asChild:!0,children:d.jsxs(ae,{variant:"outline",size:"sm",className:"gap-2",children:[d.jsx(vM,{className:"h-4 w-4"}),"",m&&d.jsx(fn,{variant:"secondary",className:"ml-1",children:"!"})]})}),d.jsxs(yS,{side:"right",className:"w-full sm:max-w-md",children:[d.jsx(xS,{children:d.jsx(bS,{children:""})}),d.jsxs("div",{className:"space-y-6 py-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:""}),d.jsxs(Oi,{value:t.categoryId||"all",onValueChange:b=>s({categoryId:b==="all"?void 0:b}),children:[d.jsx(Pi,{children:d.jsx(Li,{placeholder:""})}),d.jsxs(Ii,{children:[d.jsx(qt,{value:"all",children:""}),e.map(b=>d.jsx(qt,{value:b.id,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b.color}}),b.name]})},b.id))]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:""}),d.jsxs(Oi,{value:t.status||"all",onValueChange:b=>s({status:b==="all"?void 0:b}),children:[d.jsx(Pi,{children:d.jsx(Li,{placeholder:""})}),d.jsxs(Ii,{children:[d.jsx(qt,{value:"all",children:""}),W0.map(b=>d.jsx(qt,{value:b.value,children:b.label},b.value))]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:""}),d.jsxs(Oi,{value:t.type||"all",onValueChange:b=>s({type:b==="all"?void 0:b}),children:[d.jsx(Pi,{children:d.jsx(Li,{placeholder:""})}),d.jsxs(Ii,{children:[d.jsx(qt,{value:"all",children:""}),K0.map(b=>d.jsx(qt,{value:b.value,children:b.label},b.value))]})]})]}),o.length>0&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:""}),d.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(b=>d.jsx(fn,{variant:t.tags?.includes(b)?"default":"outline",className:"cursor-pointer",onClick:()=>{const A=t.tags||[],S=A.includes(b)?A.filter(E=>E!==b):[...A,b];s({tags:S.length>0?S:void 0})},children:b},b))})]}),m&&d.jsx(ae,{variant:"outline",className:"w-full",onClick:y,children:""})]})]})]}),t.categoryId&&d.jsxs(fn,{variant:"secondary",className:"gap-1",children:[g(t.categoryId)?.name,d.jsx(Cn,{className:"h-3 w-3 cursor-pointer",onClick:()=>s({categoryId:void 0})})]}),t.status&&d.jsxs(fn,{variant:"secondary",className:"gap-1",children:[W0.find(b=>b.value===t.status)?.label,d.jsx(Cn,{className:"h-3 w-3 cursor-pointer",onClick:()=>s({status:void 0})})]}),t.type&&d.jsxs(fn,{variant:"secondary",className:"gap-1",children:[K0.find(b=>b.value===t.type)?.label,d.jsx(Cn,{className:"h-3 w-3 cursor-pointer",onClick:()=>s({type:void 0})})]})]}),d.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",a.length," "]}),a.length>0?d.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:a.map(b=>d.jsx(PP,{book:b,category:g(b.categoryId),onClick:()=>r(b),onEdit:()=>l?.(b),onDelete:()=>u?.(b.id)},b.id))}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("p",{className:"text-muted-foreground",children:""}),m&&d.jsx(ae,{variant:"link",onClick:y,children:""})]})]})}function Is({className:a,...e}){return d.jsx("textarea",{"data-slot":"textarea",className:Ge("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...e})}function ft({className:a,type:e,...t}){return d.jsx("input",{type:e,"data-slot":"input",className:Ge("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...t})}var BP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zP=BP.reduce((a,e)=>{const t=qm(`Primitive.${e}`),s=w.forwardRef((r,o)=>{const{asChild:l,...u}=r,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(h,{...u,ref:o})});return s.displayName=`Primitive.${e}`,{...a,[e]:s}},{}),FP="Label",KA=w.forwardRef((a,e)=>d.jsx(zP.label,{...a,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(a.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));KA.displayName=FP;var HP=KA;function Pe({className:a,...e}){return d.jsx(HP,{"data-slot":"label",className:Ge("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...e})}function nn({...a}){return d.jsx(Jm,{"data-slot":"dialog",...a})}function UP({...a}){return d.jsx(eg,{"data-slot":"dialog-portal",...a})}function VP({className:a,...e}){return d.jsx(tg,{"data-slot":"dialog-overlay",className:Ge("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...e})}function sn({className:a,children:e,showCloseButton:t=!0,...s}){return d.jsxs(UP,{"data-slot":"dialog-portal",children:[d.jsx(VP,{}),d.jsxs(ng,{"data-slot":"dialog-content",className:Ge("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",a),...s,children:[e,t&&d.jsxs(Ld,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[d.jsx(Cn,{}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function an({className:a,...e}){return d.jsx("div",{"data-slot":"dialog-header",className:Ge("flex flex-col gap-2 text-center sm:text-left",a),...e})}function Ls({className:a,...e}){return d.jsx("div",{"data-slot":"dialog-footer",className:Ge("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...e})}function rn({className:a,...e}){return d.jsx(sg,{"data-slot":"dialog-title",className:Ge("text-lg leading-none font-semibold",a),...e})}function QA({className:a,...e}){return d.jsx(mS,{"data-slot":"dialog-description",className:Ge("text-muted-foreground text-sm",a),...e})}const $P={unread:"",reading:"",completed:""};function GP({book:a,categories:e,onBack:t,onUpdate:s,onDelete:r,onAddAnnotation:o,onUpdateAnnotation:l,onDeleteAnnotation:u,onUploadFile:h,onDeleteFile:p,onReadPDF:g,onReadText:m,hasFile:y,onUploadCover:b}){const[A,S]=w.useState(!1),[E,C]=w.useState(!1),[j,N]=w.useState(""),[M,O]=w.useState(""),[P,L]=w.useState(null),[B,F]=w.useState(""),[$,Y]=w.useState({title:a.title,author:a.author,description:a.description||"",totalPages:a.totalPages?.toString()||"",currentPage:a.currentPage?.toString()||"",rating:a.rating?.toString()||""}),te=w.useRef(null),oe=w.useRef(null),ie=e.find(X=>X.id===a.categoryId),fe=async X=>{const ce=X.target.files?.[0];if(ce&&b){if(!ce.type.startsWith("image/")){Se.error("");return}await b(a.id,ce),Se.success("")}},R=()=>{s(a.id,{coverUrl:void 0}),Se.success("")},U=()=>{if(!$.title.trim()){Se.error("");return}s(a.id,{title:$.title.trim(),author:$.author.trim(),description:$.description.trim()||void 0,totalPages:$.totalPages?parseInt($.totalPages):void 0,currentPage:$.currentPage?parseInt($.currentPage):void 0,rating:$.rating?parseInt($.rating):void 0}),S(!1),Se.success("")},H=()=>{r(a.id)},z=()=>{if(!j.trim()){Se.error("");return}o(a.id,j.trim(),M?parseInt(M):void 0),N(""),O(""),Se.success("")},se=()=>{if(!P||!B.trim()){Se.error("");return}l(a.id,P.id,B.trim()),L(null),F(""),Se.success("")},T=X=>{u(a.id,X)},k=X=>{const ce=X.target.files?.[0];ce&&h&&h(a.id,ce)},I=async()=>{if(p)try{await p(a.id),Se.success("")}catch{Se.error("")}},q=a.totalPages&&a.currentPage?Math.round(a.currentPage/a.totalPages*100):0;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ae,{variant:"ghost",size:"icon",onClick:t,children:d.jsx(ZN,{className:"h-5 w-5"})}),d.jsx("h1",{className:"text-lg font-semibold flex-1 truncate",children:a.title}),d.jsxs(wo,{children:[d.jsx(So,{asChild:!0,children:d.jsx(ae,{variant:"ghost",size:"icon",children:d.jsx(xo,{className:"h-5 w-5"})})}),d.jsxs(Ao,{align:"end",children:[d.jsxs(qn,{onClick:()=>S(!0),children:[d.jsx(Ul,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(qn,{className:"text-destructive",onClick:()=>C(!0),children:[d.jsx(ri,{className:"h-4 w-4 mr-2"}),""]})]})]})]}),d.jsx(Yt,{children:d.jsxs(Xt,{className:"p-4",children:[d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"flex-shrink-0 relative group",children:[a.coverUrl?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:a.coverUrl,alt:a.title,className:"w-28 h-40 object-cover rounded-lg bg-muted"}),d.jsxs("div",{className:"absolute inset-0 bg-black/50 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[d.jsx(ae,{variant:"ghost",size:"icon",className:"text-white hover:text-white hover:bg-white/20",onClick:()=>oe.current?.click(),children:d.jsx(Gl,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"ghost",size:"icon",className:"text-white hover:text-white hover:bg-white/20",onClick:R,children:d.jsx(Cn,{className:"h-4 w-4"})})]})]}):d.jsxs("div",{className:"w-28 h-40 rounded-lg bg-gradient-to-br from-muted to-muted/50 flex flex-col items-center justify-center cursor-pointer hover:from-muted/80 hover:to-muted/30 transition-colors border-2 border-dashed border-muted-foreground/30",onClick:()=>oe.current?.click(),children:[d.jsx(Rj,{className:"h-10 w-10 text-muted-foreground/50 mb-2"}),d.jsx("span",{className:"text-xs text-muted-foreground/70",children:""})]}),d.jsx("input",{ref:oe,type:"file",accept:"image/*",className:"hidden",onChange:fe})]}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"font-semibold text-lg",children:a.title}),d.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[d.jsx(kM,{className:"h-3 w-3"}),a.author]})]}),ie&&d.jsx(fn,{variant:"outline",style:{borderColor:ie.color,color:ie.color},children:ie.name}),d.jsxs(Oi,{value:a.status,onValueChange:X=>{s(a.id,{status:X,completedAt:X==="completed"?new Date().toISOString():void 0}),Se.success("")},children:[d.jsx(Pi,{className:"w-32 h-8",children:d.jsx(Li,{})}),d.jsx(Ii,{children:Object.entries($P).map(([X,ce])=>d.jsx(qt,{value:X,children:ce},X))})]}),d.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(X=>d.jsx("button",{onClick:()=>s(a.id,{rating:X}),className:"p-0.5",children:d.jsx(L1,{className:`h-5 w-5 ${(a.rating||0)>=X?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`})},X))})]})]}),d.jsxs("div",{className:"mt-4 pt-4 border-t",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-medium",children:""}),y?d.jsxs("div",{className:"flex gap-2",children:[a.fileType==="txt"&&m&&d.jsxs(ae,{size:"sm",variant:"outline",onClick:m,children:[d.jsx(o0,{className:"h-4 w-4 mr-1"}),""]}),a.fileType&&a.fileType!=="txt"&&SR(a.fileType)&&g&&d.jsxs(ae,{size:"sm",variant:"outline",onClick:g,children:[d.jsx(o0,{className:"h-4 w-4 mr-1"}),""]}),p&&d.jsxs(ae,{size:"sm",variant:"outline",className:"text-destructive",onClick:I,children:[d.jsx(ri,{className:"h-4 w-4 mr-1"}),""]})]}):d.jsxs(ae,{size:"sm",variant:"outline",onClick:()=>te.current?.click(),children:[d.jsx(Gl,{className:"h-4 w-4 mr-1"}),""]})]}),d.jsx("input",{ref:te,type:"file",className:"hidden",onChange:k}),y&&d.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[d.jsx("span",{className:"text-lg",children:a.fileType?bR(a.fileType):""}),d.jsx("span",{children:a.fileName||""}),a.fileType&&d.jsx(fn,{variant:"secondary",className:"text-xs",children:wR(a.fileType)})]})]}),a.totalPages&&d.jsxs("div",{className:"mt-4 pt-4 border-t",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm",children:""}),d.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.currentPage||0," / ",a.totalPages,"  (",q,"%)"]})]}),d.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${q}%`}})}),d.jsxs("div",{className:"flex gap-2 mt-3",children:[d.jsx(ft,{type:"number",placeholder:"",value:a.currentPage||"",onChange:X=>s(a.id,{currentPage:X.target.value?parseInt(X.target.value):void 0}),className:"w-28"}),d.jsx(ae,{variant:"outline",size:"sm",onClick:()=>s(a.id,{currentPage:a.totalPages,status:"completed",completedAt:new Date().toISOString()}),children:""})]})]}),a.description&&d.jsx("div",{className:"mt-4 pt-4 border-t",children:d.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:a.description})}),a.tags.length>0&&d.jsx("div",{className:"mt-4 pt-4 border-t",children:d.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(X=>d.jsx(fn,{variant:"secondary",children:X},X))})}),d.jsxs("div",{className:"mt-4 pt-4 border-t flex items-center gap-4 text-xs text-muted-foreground",children:[d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(go,{className:"h-3 w-3"})," ",new Date(a.createdAt).toLocaleDateString()]}),a.completedAt&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(go,{className:"h-3 w-3"})," ",new Date(a.completedAt).toLocaleDateString()]})]})]})}),d.jsxs(Yt,{children:[d.jsx(td,{children:d.jsxs(nd,{className:"text-lg flex items-center gap-2",children:[d.jsx(Td,{className:"h-5 w-5"})," (",a.annotations.length,")"]})}),d.jsxs(Xt,{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Is,{placeholder:"...",value:j,onChange:X=>N(X.target.value),rows:3}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ft,{type:"number",placeholder:"",value:M,onChange:X=>O(X.target.value),className:"w-32"}),d.jsxs(ae,{onClick:z,disabled:!j.trim(),className:"gap-2",children:[d.jsx(Ps,{className:"h-4 w-4"}),""]})]})]}),a.annotations.length>0?d.jsx("div",{className:"space-y-3",children:a.annotations.map(X=>d.jsx("div",{className:"p-3 bg-muted rounded-lg",children:d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsx("div",{className:"flex-1",children:P?.id===X.id?d.jsxs("div",{className:"space-y-2",children:[d.jsx(Is,{value:B,onChange:ce=>F(ce.target.value),rows:3}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ae,{size:"sm",onClick:se,children:""}),d.jsx(ae,{size:"sm",variant:"outline",onClick:()=>{L(null),F("")},children:""})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-sm whitespace-pre-wrap",children:X.content}),X.page&&d.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",X.page," "]}),d.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(X.createdAt).toLocaleString()})]})}),P?.id!==X.id&&d.jsxs(wo,{children:[d.jsx(So,{asChild:!0,children:d.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8",children:d.jsx(xo,{className:"h-4 w-4"})})}),d.jsxs(Ao,{align:"end",children:[d.jsxs(qn,{onClick:()=>{L(X),F(X.content)},children:[d.jsx(Ul,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(qn,{className:"text-destructive",onClick:()=>T(X.id),children:[d.jsx(ri,{className:"h-4 w-4 mr-2"}),""]})]})]})]})},X.id))}):d.jsx("p",{className:"text-center text-muted-foreground py-4",children:""})]})]}),d.jsx(nn,{open:A,onOpenChange:S,children:d.jsxs(sn,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[d.jsx(an,{children:d.jsx(rn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs(Pe,{children:[" ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx(ft,{value:$.title,onChange:X=>Y({...$,title:X.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:$.author,onChange:X=>Y({...$,author:X.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(Is,{value:$.description,onChange:X=>Y({...$,description:X.target.value}),rows:3,placeholder:""})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{type:"number",value:$.totalPages,onChange:X=>Y({...$,totalPages:X.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{type:"number",value:$.currentPage,onChange:X=>Y({...$,currentPage:X.target.value}),placeholder:""})]})]})]}),d.jsxs(Ls,{children:[d.jsx(ae,{variant:"outline",onClick:()=>S(!1),children:""}),d.jsx(ae,{onClick:U,children:""})]})]})}),d.jsx(nn,{open:E,onOpenChange:C,children:d.jsxs(sn,{children:[d.jsxs(an,{children:[d.jsx(rn,{children:""}),d.jsxs(QA,{children:["",a.title,"PDF"]})]}),d.jsxs(Ls,{children:[d.jsx(ae,{variant:"outline",onClick:()=>C(!1),children:""}),d.jsx(ae,{variant:"destructive",onClick:H,children:""})]})]})})]})}const qP=[{value:"book",label:"",icon:d.jsx(Do,{className:"h-4 w-4"})},{value:"paper",label:"",icon:d.jsx(ba,{className:"h-4 w-4"})},{value:"article",label:"",icon:d.jsx(Qj,{className:"h-4 w-4"})},{value:"other",label:"",icon:d.jsx(j1,{className:"h-4 w-4"})}];function YP({open:a,onOpenChange:e,categories:t,onAdd:s,allTags:r}){const[o,l]=w.useState({title:"",author:"",description:"",type:"book",categoryId:t[0]?.id||"",status:"unread",totalPages:"",tags:[],newTag:""}),u=()=>{if(!o.title.trim()||!o.author.trim()){Se.error("");return}s({title:o.title.trim(),author:o.author.trim(),description:o.description.trim()||void 0,type:o.type,categoryId:o.categoryId,status:o.status,totalPages:o.totalPages?parseInt(o.totalPages):void 0,tags:o.tags,rating:void 0,coverUrl:void 0,currentPage:void 0,completedAt:void 0}),Se.success(""),h(),e(!1)},h=()=>{l({title:"",author:"",description:"",type:"book",categoryId:t[0]?.id||"",status:"unread",totalPages:"",tags:[],newTag:""})},p=()=>{o.newTag.trim()&&!o.tags.includes(o.newTag.trim())&&l({...o,tags:[...o.tags,o.newTag.trim()],newTag:""})},g=y=>{l({...o,tags:o.tags.filter(b=>b!==y)})},m=y=>{o.tags.includes(y)||l({...o,tags:[...o.tags,y]})};return d.jsx(nn,{open:a,onOpenChange:e,children:d.jsxs(sn,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[d.jsxs(an,{children:[d.jsx(rn,{children:"/"}),d.jsx(QA,{children:""})]}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:qP.map(y=>d.jsxs("button",{onClick:()=>l({...o,type:y.value}),className:`flex flex-col items-center gap-1 p-3 rounded-lg border transition-colors ${o.type===y.value?"border-primary bg-primary/5":"border-border hover:bg-accent"}`,children:[y.icon,d.jsx("span",{className:"text-xs",children:y.label})]},y.value))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs(Pe,{children:["/ ",d.jsx("span",{className:"text-destructive",children:"*"})]}),d.jsx(ft,{placeholder:"",value:o.title,onChange:y=>l({...o,title:y.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs(Pe,{children:[" ",d.jsx("span",{className:"text-destructive",children:"*"})]}),d.jsx(ft,{placeholder:"",value:o.author,onChange:y=>l({...o,author:y.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsxs(Oi,{value:o.categoryId,onValueChange:y=>l({...o,categoryId:y}),children:[d.jsx(Pi,{children:d.jsx(Li,{placeholder:""})}),d.jsx(Ii,{children:t.map(y=>d.jsx(qt,{value:y.id,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y.color}}),y.name]})},y.id))})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsxs(Oi,{value:o.status,onValueChange:y=>l({...o,status:y}),children:[d.jsx(Pi,{children:d.jsx(Li,{})}),d.jsxs(Ii,{children:[d.jsx(qt,{value:"unread",children:""}),d.jsx(qt,{value:"reading",children:""}),d.jsx(qt,{value:"completed",children:""})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{type:"number",placeholder:"",value:o.totalPages,onChange:y=>l({...o,totalPages:y.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(Is,{placeholder:"",value:o.description,onChange:y=>l({...o,description:y.target.value}),rows:3})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ft,{placeholder:"",value:o.newTag,onChange:y=>l({...o,newTag:y.target.value}),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),p())}}),d.jsx(ae,{type:"button",onClick:p,variant:"outline",children:""})]}),r.length>0&&d.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[d.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:":"}),r.map(y=>d.jsx(fn,{variant:o.tags.includes(y)?"default":"outline",className:"cursor-pointer text-xs",onClick:()=>m(y),children:y},y))]}),o.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.tags.map(y=>d.jsxs(fn,{variant:"secondary",className:"gap-1",children:[y,d.jsx("button",{onClick:()=>g(y),className:"ml-1 hover:text-destructive",children:""})]},y))})]})]}),d.jsxs(Ls,{children:[d.jsx(ae,{variant:"outline",onClick:()=>e(!1),children:""}),d.jsx(ae,{onClick:u,children:""})]})]})})}function XP(a,e=[]){let t=[];function s(o,l){const u=w.createContext(l);u.displayName=o+"Context";const h=t.length;t=[...t,l];const p=m=>{const{scope:y,children:b,...A}=m,S=y?.[a]?.[h]||u,E=w.useMemo(()=>A,Object.values(A));return d.jsx(S.Provider,{value:E,children:b})};p.displayName=o+"Provider";function g(m,y){const b=y?.[a]?.[h]||u,A=w.useContext(b);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[p,g]}const r=()=>{const o=t.map(l=>w.createContext(l));return function(u){const h=u?.[a]||o;return w.useMemo(()=>({[`__scope${a}`]:{...u,[a]:h}}),[u,h])}};return r.scopeName=a,[s,WP(r,...e)]}function WP(...a){const e=a[0];if(a.length===1)return e;const t=()=>{const s=a.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const l=s.reduce((u,{useScope:h,scopeName:p})=>{const m=h(o)[`__scope${p}`];return{...u,...m}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var KP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ZA=KP.reduce((a,e)=>{const t=qm(`Primitive.${e}`),s=w.forwardRef((r,o)=>{const{asChild:l,...u}=r,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(h,{...u,ref:o})});return s.displayName=`Primitive.${e}`,{...a,[e]:s}},{}),bg="Progress",wg=100,[QP]=XP(bg),[ZP,JP]=QP(bg),JA=w.forwardRef((a,e)=>{const{__scopeProgress:t,value:s=null,max:r,getValueLabel:o=e4,...l}=a;(r||r===0)&&!Q0(r)&&console.error(t4(`${r}`,"Progress"));const u=Q0(r)?r:wg;s!==null&&!Z0(s,u)&&console.error(n4(`${s}`,"Progress"));const h=Z0(s,u)?s:null,p=gd(h)?o(h,u):void 0;return d.jsx(ZP,{scope:t,value:h,max:u,children:d.jsx(ZA.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":gd(h)?h:void 0,"aria-valuetext":p,role:"progressbar","data-state":nC(h,u),"data-value":h??void 0,"data-max":u,...l,ref:e})})});JA.displayName=bg;var eC="ProgressIndicator",tC=w.forwardRef((a,e)=>{const{__scopeProgress:t,...s}=a,r=JP(eC,t);return d.jsx(ZA.div,{"data-state":nC(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:e})});tC.displayName=eC;function e4(a,e){return`${Math.round(a/e*100)}%`}function nC(a,e){return a==null?"indeterminate":a===e?"complete":"loading"}function gd(a){return typeof a=="number"}function Q0(a){return gd(a)&&!isNaN(a)&&a>0}function Z0(a,e){return gd(a)&&!isNaN(a)&&a<=e&&a>=0}function t4(a,e){return`Invalid prop \`max\` of value \`${a}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${wg}\`.`}function n4(a,e){return`Invalid prop \`value\` of value \`${a}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${wg} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var s4=JA,i4=tC;function a4({className:a,value:e,...t}){return d.jsx(s4,{"data-slot":"progress",className:Ge("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...t,children:d.jsx(i4,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function r4({stats:a}){const e=a.total>0?Math.round(a.completed/a.total*100):0;return d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-lg font-semibold",children:""}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Yt,{children:d.jsx(Xt,{className:"p-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:d.jsx(Do,{className:"h-5 w-5 text-primary"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold",children:a.total}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})}),d.jsx(Yt,{children:d.jsx(Xt,{className:"p-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:d.jsx(E1,{className:"h-5 w-5 text-green-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold",children:a.completed}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})}),d.jsx(Yt,{children:d.jsx(Xt,{className:"p-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:d.jsx(fj,{className:"h-5 w-5 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold",children:a.reading}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})}),d.jsx(Yt,{children:d.jsx(Xt,{className:"p-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:d.jsx(Td,{className:"h-5 w-5 text-purple-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold",children:a.totalAnnotations}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsx(Yt,{children:d.jsxs(Xt,{className:"p-4 text-center",children:[d.jsx(N1,{className:"h-5 w-5 mx-auto text-orange-500 mb-2"}),d.jsx("p",{className:"text-xl font-bold",children:a.projectCount}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}),d.jsx(Yt,{children:d.jsxs(Xt,{className:"p-4 text-center",children:[d.jsx(mj,{className:"h-5 w-5 mx-auto text-yellow-500 mb-2"}),d.jsx("p",{className:"text-xl font-bold",children:a.pendingNotes}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}),d.jsx(Yt,{children:d.jsxs(Xt,{className:"p-4 text-center",children:[d.jsx(tj,{className:"h-5 w-5 mx-auto text-cyan-500 mb-2"}),d.jsx("p",{className:"text-xl font-bold",children:a.noteCount}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})]}),d.jsxs(Yt,{children:[d.jsx(td,{children:d.jsx(nd,{className:"text-sm font-medium",children:""})}),d.jsx(Xt,{children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsxs("span",{children:[e,"%"]}),d.jsxs("span",{className:"text-muted-foreground",children:[a.completed," / ",a.total]})]}),d.jsx(a4,{value:e,className:"h-2"})]})})]}),d.jsxs(Yt,{children:[d.jsx(td,{children:d.jsx(nd,{className:"text-sm font-medium",children:""})}),d.jsx(Xt,{children:d.jsxs("div",{className:"space-y-3",children:[a.categoryStats.filter(t=>t.count>0).sort((t,s)=>s.count-t.count).map(t=>d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),d.jsx("span",{className:"text-sm flex-1",children:t.name}),d.jsx("span",{className:"text-sm font-medium",children:t.count})]},t.id)),a.categoryStats.filter(t=>t.count>0).length===0&&d.jsx("p",{className:"text-sm text-muted-foreground text-center py-2",children:""})]})})]}),d.jsxs(Yt,{children:[d.jsx(td,{children:d.jsx(nd,{className:"text-sm font-medium",children:""})}),d.jsx(Xt,{children:d.jsxs("div",{className:"space-y-3",children:[a.typeStats?[{key:"book",label:"",count:a.typeStats.book},{key:"paper",label:"",count:a.typeStats.paper},{key:"article",label:"",count:a.typeStats.article},{key:"other",label:"",count:a.typeStats.other}].filter(t=>t.count>0).map(t=>d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-sm flex-1",children:t.label}),d.jsx("span",{className:"text-sm font-medium",children:t.count})]},t.key)):null,(!a.typeStats||a.total===0)&&d.jsx("p",{className:"text-sm text-muted-foreground text-center py-2",children:""})]})})]})]})}var o4=Symbol("radix.slottable");function l4(a){const e=({children:t})=>d.jsx(d.Fragment,{children:t});return e.displayName=`${a}.Slottable`,e.__radixId=o4,e}var sC="AlertDialog",[c4]=cs(sC,[Z1]),$i=Z1(),iC=a=>{const{__scopeAlertDialog:e,...t}=a,s=$i(e);return d.jsx(Jm,{...s,...t,modal:!0})};iC.displayName=sC;var u4="AlertDialogTrigger",d4=w.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...s}=a,r=$i(t);return d.jsx(pS,{...r,...s,ref:e})});d4.displayName=u4;var h4="AlertDialogPortal",aC=a=>{const{__scopeAlertDialog:e,...t}=a,s=$i(e);return d.jsx(eg,{...s,...t})};aC.displayName=h4;var f4="AlertDialogOverlay",rC=w.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...s}=a,r=$i(t);return d.jsx(tg,{...r,...s,ref:e})});rC.displayName=f4;var lo="AlertDialogContent",[p4,m4]=c4(lo),g4=l4("AlertDialogContent"),oC=w.forwardRef((a,e)=>{const{__scopeAlertDialog:t,children:s,...r}=a,o=$i(t),l=w.useRef(null),u=qe(e,l),h=w.useRef(null);return d.jsx(XD,{contentName:lo,titleName:lC,docsSlug:"alert-dialog",children:d.jsx(p4,{scope:t,cancelRef:h,children:d.jsxs(ng,{role:"alertdialog",...o,...r,ref:u,onOpenAutoFocus:xe(r.onOpenAutoFocus,p=>{p.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[d.jsx(g4,{children:s}),d.jsx(y4,{contentRef:l})]})})})});oC.displayName=lo;var lC="AlertDialogTitle",cC=w.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...s}=a,r=$i(t);return d.jsx(sg,{...r,...s,ref:e})});cC.displayName=lC;var uC="AlertDialogDescription",dC=w.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...s}=a,r=$i(t);return d.jsx(mS,{...r,...s,ref:e})});dC.displayName=uC;var v4="AlertDialogAction",hC=w.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...s}=a,r=$i(t);return d.jsx(Ld,{...r,...s,ref:e})});hC.displayName=v4;var fC="AlertDialogCancel",pC=w.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...s}=a,{cancelRef:r}=m4(fC,t),o=$i(t),l=qe(e,r);return d.jsx(Ld,{...o,...s,ref:l})});pC.displayName=fC;var y4=({contentRef:a})=>{const e=`\`${lo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${lo}\` by passing a \`${uC}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${lo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return w.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,a]),null},x4=iC,b4=aC,w4=rC,S4=oC,A4=hC,C4=pC,E4=cC,_4=dC;function T4({...a}){return d.jsx(x4,{"data-slot":"alert-dialog",...a})}function N4({...a}){return d.jsx(b4,{"data-slot":"alert-dialog-portal",...a})}function j4({className:a,...e}){return d.jsx(w4,{"data-slot":"alert-dialog-overlay",className:Ge("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...e})}function M4({className:a,...e}){return d.jsxs(N4,{children:[d.jsx(j4,{}),d.jsx(S4,{"data-slot":"alert-dialog-content",className:Ge("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...e})]})}function R4({className:a,...e}){return d.jsx("div",{"data-slot":"alert-dialog-header",className:Ge("flex flex-col gap-2 text-center sm:text-left",a),...e})}function D4({className:a,...e}){return d.jsx("div",{"data-slot":"alert-dialog-footer",className:Ge("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...e})}function k4({className:a,...e}){return d.jsx(E4,{"data-slot":"alert-dialog-title",className:Ge("text-lg font-semibold",a),...e})}function O4({className:a,...e}){return d.jsx(_4,{"data-slot":"alert-dialog-description",className:Ge("text-muted-foreground text-sm",a),...e})}function L4({className:a,...e}){return d.jsx(A4,{className:Ge(Ym(),a),...e})}function P4({className:a,...e}){return d.jsx(C4,{className:Ge(Ym({variant:"outline"}),a),...e})}function I4({categories:a,onAddCategory:e,onDeleteCategory:t}){const[s,r]=w.useState(!1),[o,l]=w.useState(!1),[u,h]=w.useState(null),[p,g]=w.useState(""),[m,y]=w.useState(Op[0]),b=()=>{if(!p.trim()){Se.error("");return}e(p.trim(),m),g(""),y(Op[0]),r(!1),Se.success("")},A=()=>{u&&(t(u.id),l(!1),h(null),Se.success(""))};return d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-sm font-medium",children:""}),d.jsxs(ae,{size:"sm",variant:"outline",onClick:()=>r(!0),children:[d.jsx(Ps,{className:"h-4 w-4 mr-1"}),""]})]}),d.jsx("div",{className:"space-y-2",children:a.map(S=>d.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:S.color}}),d.jsx("span",{className:"text-sm",children:S.name})]}),!["cat-entertainment","cat-tech","cat-academic","cat-literature","cat-business","cat-other"].includes(S.id)&&d.jsx(ae,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-destructive",onClick:()=>{h(S),l(!0)},children:d.jsx(Cn,{className:"h-4 w-4"})})]},S.id))}),d.jsx(nn,{open:s,onOpenChange:r,children:d.jsxs(sn,{children:[d.jsx(an,{children:d.jsx(rn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:p,onChange:S=>g(S.target.value),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx("div",{className:"flex flex-wrap gap-2",children:Op.map(S=>d.jsx("button",{onClick:()=>y(S),className:`w-8 h-8 rounded-full transition-all ${m===S?"ring-2 ring-offset-2 ring-primary scale-110":""}`,style:{backgroundColor:S}},S))})]})]}),d.jsxs(Ls,{children:[d.jsx(ae,{variant:"outline",onClick:()=>r(!1),children:""}),d.jsx(ae,{onClick:b,children:""})]})]})}),d.jsx(T4,{open:o,onOpenChange:l,children:d.jsxs(M4,{children:[d.jsxs(R4,{children:[d.jsx(k4,{children:""}),d.jsxs(O4,{children:['"',u?.name,'"""']})]}),d.jsxs(D4,{children:[d.jsx(P4,{onClick:()=>h(null),children:""}),d.jsx(L4,{onClick:A,className:"bg-destructive",children:""})]})]})})]})}function B4({value:a,onChange:e,placeholder:t="..."}){return d.jsxs("div",{className:"relative",children:[d.jsx(O1,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),d.jsx(ft,{value:a,onChange:s=>e(s.target.value),placeholder:t,className:"pl-10 pr-10"}),a&&d.jsx(ae,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>e(""),children:d.jsx(Cn,{className:"h-4 w-4"})})]})}const Rn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Sm=[.001,0,0,.001,0,0],qp=1.35,ss={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},si={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ql="pdfjs_internal_editor_",Xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},mC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},wn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Vl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},$t={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},to={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},lc={ERRORS:0,WARNINGS:1,INFOS:5},Co={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Bu={moveTo:0,lineTo:1,curveTo:2,closePath:3},gC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Wd=lc.WARNINGS;function z4(a){Number.isInteger(a)&&(Wd=a)}function F4(){return Wd}function Kd(a){Wd>=lc.INFOS&&console.info(`Info: ${a}`)}function We(a){Wd>=lc.WARNINGS&&console.warn(`Warning: ${a}`)}function Tt(a){throw new Error(a)}function ct(a,e){a||Tt(e)}function H4(a){switch(a?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Sg(a,e=null,t=null){if(!a)return null;if(t&&typeof a=="string"&&(t.addDefaultProtocol&&a.startsWith("www.")&&a.match(/\./g)?.length>=2&&(a=`http://${a}`),t.tryConvertEncoding))try{a=q4(a)}catch{}const s=e?URL.parse(a,e):URL.parse(a);return H4(s)?s:null}function Ag(a,e,t=!1){const s=URL.parse(a);return s?(s.hash=e,s.href):t&&Sg(a,"http://example.com")?a.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Je(a,e,t,s=!1){return Object.defineProperty(a,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const ur=(function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e})();class J0 extends ur{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Yp extends ur{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class vd extends ur{constructor(e){super(e,"InvalidPDFException")}}class Zl extends ur{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class U4 extends ur{constructor(e){super(e,"FormatError")}}class Hi extends ur{constructor(e){super(e,"AbortException")}}function vC(a){(typeof a!="object"||a?.length===void 0)&&Tt("Invalid argument for bytesToString");const e=a.length,t=8192;if(e<t)return String.fromCharCode.apply(null,a);const s=[];for(let r=0;r<e;r+=t){const o=Math.min(r+t,e),l=a.subarray(r,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function cc(a){typeof a!="string"&&Tt("Invalid argument for stringToBytes");const e=a.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=a.charCodeAt(s)&255;return t}function V4(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function $4(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function G4(){try{return new Function(""),!0}catch{return!1}}class pn{static get isLittleEndian(){return Je(this,"isLittleEndian",$4())}static get isEvalSupported(){return Je(this,"isEvalSupported",G4())}static get isOffscreenCanvasSupported(){return Je(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Je(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Je(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Je(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Xp=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));class _e{static makeHexColor(e,t,s){return`#${Xp[e]}${Xp[t]}${Xp[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const r=e[s],o=e[s+1];e[s]=r*t[0]+o*t[2]+t[4],e[s+1]=r*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],o=t[1],l=t[2],u=t[3],h=t[4],p=t[5];for(let g=0;g<6;g+=2){const m=e[s+g],y=e[s+g+1];e[s+g]=m*r+y*l+h,e[s+g+1]=m*o+y*u+p}}static applyInverseTransform(e,t){const s=e[0],r=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,s){const r=t[0],o=t[1],l=t[2],u=t[3],h=t[4],p=t[5],g=e[0],m=e[1],y=e[2],b=e[3];let A=r*g+h,S=A,E=r*y+h,C=E,j=u*m+p,N=j,M=u*b+p,O=M;if(o!==0||l!==0){const P=o*g,L=o*y,B=l*m,F=l*b;A+=B,C+=B,E+=F,S+=F,j+=P,O+=P,M+=L,N+=L}s[0]=Math.min(s[0],A,E,S,C),s[1]=Math.min(s[1],j,M,N,O),s[2]=Math.max(s[2],A,E,S,C),s[3]=Math.max(s[3],j,M,N,O)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],o=e[2],l=e[3],u=s**2+r**2,h=s*o+r*l,p=o**2+l**2,g=(u+p)/2,m=Math.sqrt(g**2-(u*p-h**2));t[0]=Math.sqrt(g+m||1),t[1]=Math.sqrt(g-m||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>l?null:[s,o,r,l]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,o){o[0]=Math.min(o[0],e,s),o[1]=Math.min(o[1],t,r),o[2]=Math.max(o[2],e,s),o[3]=Math.max(o[3],t,r)}static#e(e,t,s,r,o,l,u,h,p,g){if(p<=0||p>=1)return;const m=1-p,y=p*p,b=y*p,A=m*(m*(m*e+3*p*t)+3*y*s)+b*r,S=m*(m*(m*o+3*p*l)+3*y*u)+b*h;g[0]=Math.min(g[0],A),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],S)}static#t(e,t,s,r,o,l,u,h,p,g,m,y){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&this.#e(e,t,s,r,o,l,u,h,-m/g,y);return}const b=g**2-4*m*p;if(b<0)return;const A=Math.sqrt(b),S=2*p;this.#e(e,t,s,r,o,l,u,h,(-g+A)/S,y),this.#e(e,t,s,r,o,l,u,h,(-g-A)/S,y)}static bezierBoundingBox(e,t,s,r,o,l,u,h,p){p[0]=Math.min(p[0],e,u),p[1]=Math.min(p[1],t,h),p[2]=Math.max(p[2],e,u),p[3]=Math.max(p[3],t,h),this.#t(e,s,o,u,t,r,l,h,3*(-e+3*(s-o)+u),6*(e-2*s+o),3*(s-e),p),this.#t(e,s,o,u,t,r,l,h,3*(-t+3*(r-l)+h),6*(t-2*r+l),3*(r-t),p)}}function q4(a){return decodeURIComponent(escape(a))}let Wp=null,ew=null;function yC(a){return Wp||(Wp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ew=new Map([["","t"]])),a.replaceAll(Wp,(e,t,s)=>t?t.normalize("NFKC"):ew.get(s))}function Cg(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),vC(a)}const Eg="pdfjs_internal_id_";function Y4(a,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...o]=t;if(!a(s)&&!Number.isInteger(s)||!e(r))return!1;const l=o.length;let u=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function Nn(a,e,t){return Math.min(Math.max(a,e),t)}function xC(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(vC(a))}function X4(a){return Uint8Array.fromBase64?Uint8Array.fromBase64(a):cc(atob(a))}typeof Promise.try!="function"&&(Promise.try=function(a,...e){return new Promise(t=>{t(a(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(a){return a.reduce((e,t)=>e+t,0)});class Jl{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(Jl.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&t.push({str:l}),!!o.children)for(const h of o.children)r(h)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class _g{static setupStorage(e,t,s,r,o){const l=r.getValue(t,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),o==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?e.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),o==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const u of s.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const h=u.target.options,p=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:o}){const{attributes:l}=t,u=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[h,p]of Object.entries(l))if(p!=null)switch(h){case"class":p.length&&e.setAttribute(h,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!u||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,p)}u&&o.addLinkAttributes(e,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(e,l.dataId,t,s)}static render(e){const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,o=e.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:s});const u=o!=="richText",h=e.div;if(h.append(l),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=m}u&&h.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);l.append(m),u&&Jl.shouldBuildText(r.name)&&p.push(m)}return{textDivs:p}}const g=[[r,-1,l]];for(;g.length>0;){const[m,y,b]=g.at(-1);if(y+1===m.children.length){g.pop();continue}const A=m.children[++g.at(-1)[1]];if(A===null)continue;const{name:S}=A;if(S==="#text"){const C=document.createTextNode(A.value);p.push(C),b.append(C);continue}const E=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,S):document.createElement(S);if(b.append(E),A.attributes&&this.setAttributes({html:E,element:A,storage:t,intent:o,linkService:s}),A.children?.length>0)g.push([A,-1,E]);else if(A.value){const C=document.createTextNode(A.value);u&&Jl.shouldBuildText(S)&&p.push(C),E.append(C)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Di="http://www.w3.org/2000/svg";class ar{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Po(a,e="text"){if(zl(a,document.baseURI)){const t=await fetch(a);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",a,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class uc{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=o,this.offsetY=l,s*=t;const h=(e[2]+e[0])/2,p=(e[3]+e[1])/2;let g,m,y,b;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,m=0,y=0,b=1;break;case 90:g=0,m=1,y=1,b=0;break;case 270:g=0,m=-1,y=-1,b=0;break;case 0:g=1,m=0,y=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,b=-b);let A,S,E,C;g===0?(A=Math.abs(p-e[1])*s+o,S=Math.abs(h-e[0])*s+l,E=(e[3]-e[1])*s,C=(e[2]-e[0])*s):(A=Math.abs(h-e[0])*s+o,S=Math.abs(p-e[1])*s+l,E=(e[2]-e[0])*s,C=(e[3]-e[1])*s),this.transform=[g*s,m*s,y*s,b*s,A-g*s*h-y*s*p,S-m*s*h-b*s*p],this.width=E,this.height=C}get rawDims(){const e=this.viewBox;return Je(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new uc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){const s=[e,t];return _e.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];_e.applyTransform(t,this.transform);const s=[e[2],e[3]];return _e.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return _e.applyInverseTransform(s,this.transform),s}}class Qd extends ur{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function dc(a){const e=a.length;let t=0;for(;t<e&&a[t].trim()==="";)t++;return a.substring(t,t+5).toLowerCase()==="data:"}function Zd(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function bC(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function wC(a,e="document.pdf"){if(typeof a!="string")return e;if(dc(a))return We('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(a);if(!s)return e;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return r(l);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const p of u)if(o.test(p))return r(p);const h=Array.from(s.searchParams.keys()).reverse();for(const p of h)if(o.test(p))return r(p)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return r(h[0])}return e}class tw{started=Object.create(null);times=[];time(e){e in this.started&&We(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||We(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:o}of this.times)e.push(`${s.padEnd(t)} ${o-r}ms
`);return e.join("")}}function zl(a,e){const t=e?URL.parse(a,e):URL.parse(a);return t?.protocol==="http:"||t?.protocol==="https:"}function ls(a){a.preventDefault()}function Pt(a){a.preventDefault(),a.stopPropagation()}function W4(a){console.log("Deprecated API usage: "+a)}class yd{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const p=t[7]||"Z";let g=parseInt(t[8],10);g=g>=0&&g<=23?g:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,p==="-"?(l+=g,u+=m):p==="+"&&(l-=g,u-=m),new Date(Date.UTC(s,r,o,l,u,h))}}function SC(a,{scale:e=1,rotation:t=0}){const{width:s,height:r}=a.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new uc({viewBox:o,userUnit:1,scale:e,rotation:t})}function Io(a){if(a.startsWith("#")){const e=parseInt(a.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(e=>parseInt(e)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(We(`Not a valid color format: "${a}"`),[0,0,0])}function K4(a){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of a.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;a.set(t,Io(s))}e.remove()}function Lt(a){const{a:e,b:t,c:s,d:r,e:o,f:l}=a.getTransform();return[e,t,s,r,o,l]}function Ks(a){const{a:e,b:t,c:s,d:r,e:o,f:l}=a.getTransform().invertSelf();return[e,t,s,r,o,l]}function _a(a,e,t=!1,s=!0){if(e instanceof uc){const{pageWidth:r,pageHeight:o}=e.rawDims,{style:l}=a,u=pn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,p=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=u?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!t||e.rotation%180===0?(l.width=g,l.height=m):(l.width=m,l.height=g)}s&&a.setAttribute("data-main-rotation",e.rotation)}class Fs{constructor(){const{pixelRatio:e}=Fs;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,o=-1){let l=1/0,u=1/0,h=1/0;s=Fs.capPixels(s,o),s>0&&(l=Math.sqrt(s/(e*t))),r!==-1&&(u=r/e,h=r/t);const p=Math.min(l,u,h);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const xd=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Q4{static get isDarkMode(){return Je(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class AC{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),Je(this,"commentForegroundColor",Io(s))}}function CC(a,e,t,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return a=Math.round(a*s+r),e=Math.round(e*s+r),t=Math.round(t*s+r),[a,e,t]}function nw(a,e){const t=a[0]/255,s=a[1]/255,r=a[2]/255,o=Math.max(t,s,r),l=Math.min(t,s,r),u=(o+l)/2;if(o===l)e[0]=e[1]=0;else{const h=o-l;switch(e[1]=u<.5?h/(o+l):h/(2-o-l),o){case t:e[0]=((s-r)/h+(s<r?6:0))*60;break;case s:e[0]=((r-t)/h+2)*60;break;case r:e[0]=((t-s)/h+4)*60;break}}e[2]=u}function Am(a,e){const t=a[0],s=a[1],r=a[2],o=(1-Math.abs(2*r-1))*s,l=o*(1-Math.abs(t/60%2-1)),u=r-o/2;switch(Math.floor(t/60)){case 0:e[0]=o+u,e[1]=l+u,e[2]=u;break;case 1:e[0]=l+u,e[1]=o+u,e[2]=u;break;case 2:e[0]=u,e[1]=o+u,e[2]=l+u;break;case 3:e[0]=u,e[1]=l+u,e[2]=o+u;break;case 4:e[0]=l+u,e[1]=u,e[2]=o+u;break;case 5:case 6:e[0]=o+u,e[1]=u,e[2]=l+u;break}}function sw(a){return a<=.03928?a/12.92:((a+.055)/1.055)**2.4}function iw(a,e,t){Am(a,t),t.map(sw);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];Am(e,t),t.map(sw);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const aw=new Map;function EC(a,e){const t=a[0]+a[1]*256+a[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=aw.get(t);if(s)return s;const r=new Float32Array(9),o=r.subarray(0,3),l=r.subarray(3,6);nw(a,l);const u=r.subarray(6,9);nw(e,u);const h=u[2]<.5,p=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),iw(l,u,o)<p){let g,m;h?(g=l[2],m=1):(g=0,m=l[2]);const y=.005;for(;m-g>y;){const b=l[2]=(g+m)/2;h===iw(l,u,o)<p?g=b:m=b}l[2]=h?m:g}return Am(l,o),s=_e.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),aw.set(t,s),s}function Tg({html:a,dir:e,className:t},s){const r=document.createDocumentFragment();if(typeof a=="string"){const o=document.createElement("p");o.dir=e||"auto";const l=a.split(/(?:\r\n?|\n)/);for(let u=0,h=l.length;u<h;++u){const p=l[u];o.append(document.createTextNode(p)),u<h-1&&o.append(document.createElement("br"))}r.append(o)}else _g.render({xfaHtml:a,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),s.append(r)}class $l{#e=null;#t=null;#s;#n=null;#r=null;#i=null;#a=null;#o=null;static#c=null;constructor(e){this.#s=e,$l.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#s._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",ls,{signal:t}),e.addEventListener("pointerdown",$l.#l,{signal:t}));const s=this.#n=document.createElement("div");s.className="buttons",e.append(s);const r=this.#s.toolbarPosition;if(r){const{style:o}=e,l=this.#s._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#s._focusEventsAllowed=!1,Pt(e)}#d(e){this.#s._focusEventsAllowed=!0,Pt(e)}#f(e){const t=this.#s._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ls,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#s,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",$l.#c[e]),this.#f(s)&&s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#n.append(s)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#r=e}addComment(e,t=null){if(this.#i)return;const s=e.renderForToolbar();if(!s)return;this.#f(s);const r=this.#a=this.#g;t?(this.#n.insertBefore(s,t),this.#n.insertBefore(r,t)):this.#n.append(s,r),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#s);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#a?.remove(),this.#a=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const r=this.#n.querySelector(s);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Z4{#e=null;#t=null;#s;constructor(e){this.#s=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#s._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",ls,{signal:t});const s=this.#e=document.createElement("div");return s.className="buttons",e.append(s),this.#s.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),e}#r(e,t){let s=0,r=0;for(const o of e){const l=o.y+o.height;if(l<s)continue;const u=o.x+(t?o.width:0);if(l>s){r=u,s=l;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,s]}show(e,t,s){const[r,o]=this.#r(t,s),{style:l}=this.#t||=this.#n();e.append(this.#t),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,t,s,r){const o=document.createElement("button");o.classList.add("basic",e),o.tabIndex=0,o.setAttribute("data-l10n-id",t);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const u=this.#s._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",ls,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#e.append(o)}}function _C(a,e,t){for(const s of t)e.addEventListener(s,a[s].bind(a))}class J4{#e=0;get id(){return`${Ql}${this.#e++}`}}class Ng{#e=Cg();#t=0;#s=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Je(this,"_isSVGFittingCanvas",o)}async#n(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let r;if(typeof t=="string"?(s.url=t,r=await Po(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const o=Ng._isSVGFittingCanvas,l=new FileReader,u=new Image,h=new Promise((p,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,p()},l.onload=async()=>{const m=s.svgUrl=l.result;u.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=l.onerror=g});l.readAsDataURL(r),await h}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){We(r),s=null}return this.#s.set(e,s),s&&this.#s.set(s.id,s),s}async getFromFile(e){const{lastModified:t,name:s,size:r,type:o}=e;return this.#n(`${t}_${s}_${r}_${o}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const s=await t;return this.#n(e,s)}async getFromId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#s.set(e,s),this.#s.set(s.id,s),s}getSvgUrl(e){const t=this.#s.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}s.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class e3{#e=[];#t=!1;#s;#n=-1;constructor(e=128){this.#s=e}add({cmd:e,undo:t,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(r&&e(),this.#t)return;const h={cmd:e,undo:t,post:s,type:o};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(h);return}if(l&&this.#e[this.#n].type===o){u&&(h.undo=this.#e[this.#n].undo),this.#e[this.#n]=h;return}const p=this.#n+1;p===this.#s?this.#e.splice(0,1):(this.#n=p,p<this.#e.length&&this.#e.splice(p)),this.#e.push(h)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class hc{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=pn.platform;for(const[s,r,o={}]of e)for(const l of s){const u=l.startsWith("mac+");t&&u?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!t&&!u&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(this.#e(t));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:u=null}}=s;u&&!u(e,t)||(r.bind(e,...l,t)(),o||Pt(t))}}class jg{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return K4(e),Je(this,"_colors",e)}convert(e){const t=Io(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((o,l)=>o===t[l]))return jg._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?_e.makeHexColor(...t):e}}class Ui{#e=new AbortController;#t=null;#s=null;#n=new Map;#r=new Map;#i=null;#a=null;#o=null;#c=new e3;#l=null;#h=null;#d=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#v=!1;#x=!1;#y=!1;#E=null;#A=null;#b=null;#T=null;#S=!1;#C=null;#M=new J4;#N=!1;#j=!1;#I=!1;#D=null;#O=null;#B=null;#L=null;#$=null;#_=Xe.NONE;#w=new Set;#k=null;#z=null;#H=null;#Y=null;#q=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#P=null;#G=null;#Z=null;#J=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Ui.prototype,t=l=>l.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Je(this,"_keyboardManager",new hc([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#G.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}constructor(e,t,s,r,o,l,u,h,p,g,m,y,b,A,S,E){const C=this._signal=this.#e.signal;this.#G=e,this.#Z=t,this.#J=s,this.#i=r,this.#l=o,this.#z=l,this.#q=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:C}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),u._on("setpreference",this.onSetPreference.bind(this),{signal:C}),u._on("switchannotationeditorparams",j=>this.updateParams(j.type,j.value),{signal:C}),window.addEventListener("pointerdown",()=>{this.#j=!0},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{this.#j=!1},{capture:!0,signal:C}),this.#le(),this.#he(),this.#te(),this.#a=h.annotationStorage,this.#E=h.filterFactory,this.#H=p,this.#T=g||null,this.#v=m,this.#x=y,this.#y=b,this.#$=A||null,this.viewParameters={realScale:ar.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=E!==!1,o?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#r.values())e.destroy();this.#r.clear(),this.#n.clear(),this.#m.clear(),this.#L?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#z?.destroy(),this.#C?.hide(),this.#C=null,this.#B?.destroy(),this.#B=null,this.#s=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#$}get useNewAltTextFlow(){return this.#x}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Je(this,"hcmFilter",this.#H?this.#E.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Je(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Je(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Je(this,"highlightColors",null);const t=new Map,s=!!this.#H;for(const[r,o]of e){const l=r.endsWith("_HCM");if(s&&l){t.set(r.replace("_HCM",""),o);continue}!s&&!l&&t.set(r,o)}return Je(this,"highlightColors",t)}get highlightColorNames(){return Je(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#B=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,s,r){this.#l?.showDialog(this,e,t,s,r)}selectComment(e,t){this.#r.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,s=void 0){this.#l?.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#r.has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),r=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await s}getSignature(e){this.#z?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#z}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#y=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(const s of this.#r.values()){const{x:r,y:o,width:l,height:u}=s.div.getBoundingClientRect();if(e>=r&&e<=r+l&&t>=o&&t<=o+u)return s}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#m.add(e)}removeShouldRescale(e){this.#m.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ar.PDF_TO_CSS_UNITS;for(const t of this.#m)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of this.#r.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u}=s,h=s.toString(),g=this.#Q(s).closest(".textLayer"),m=this.getSelectionBoxes(g);if(!m)return;s.empty();const y=this.#ee(g),b=this.#_===Xe.NONE,A=()=>{const S=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u,text:h});b&&this.showAllEditors("highlight",!0,!0),t&&S?.editComment()};if(b){this.switchToMode(Xe.HIGHLIGHT,A);return}A()}commentSelection(e=""){this.highlightSelection(e,!0)}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=this.#Q(e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#C||=new Z4(this),this.#C.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#a)return null;const t=`${Ql}${e}`,s=this.#a.getRawValue(t);return s&&this.#a.remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#k&&(this.#C?.hide(),this.#k=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#k)return;const r=this.#Q(e).closest(".textLayer");if(!r){this.#k&&(this.#C?.hide(),this.#k=null,this.#R({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#k=t,this.#R({hasSelectedText:!0}),!(this.#_!==Xe.HIGHLIGHT&&this.#_!==Xe.NONE)&&(this.#_===Xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#_===Xe.HIGHLIGHT?this.#ee(r):null;if(o?.toggleDrawing(),this.#j){const l=new AbortController,u=this.combinedSignal(l),h=p=>{p.type==="pointerup"&&p.button!==0||(l.abort(),o?.toggleDrawing(!0),p.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(e=""){this.#_===Xe.HIGHLIGHT?this.highlightSelection(e):this.#v&&this.#re()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#b)return;this.#b=new AbortController;const e=this.combinedSignal(this.#b);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#b?.abort(),this.#b=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#O=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,t]=this.#O;this.#O=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#D?.abort(),this.#D=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#se(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#se()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of this.#w){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){We(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const h of s){const p=await r.deserialize(h);if(!p)return;o.push(p)}const l=()=>{for(const h of o)this.#ie(h);this.#ae(o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){We(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==Xe.NONE&&!this.isEditorHandlingKeyboard&&Ui._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(e){Object.entries(e).some(([s,r])=>this.#X[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,e)}),this.#_===Xe.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[rt.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#R({isEditing:this.#_!==Xe.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#se(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#V(t.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(e){return this.#r.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#r.set(e.pageIndex,e),this.#N?e.enable():e.disable()}removeLayer(e){this.#r.delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1,o=!1){if(this.#_!==e&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#_===Xe.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#_=e,e===Xe.NONE){this.setEditingState(!1),this.#pe();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();e===Xe.SIGNATURE&&await this.#z?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const l of this.#r.values())l.updateMode(e);if(e===Xe.POPUP){this.#s||=await this.#q.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const l=new Set,u=[];for(const h of this.#n.values()){const{annotationElementId:p,hasComment:g,deleted:m}=h;p&&l.add(p),g&&!m&&u.push(h.getData())}for(const h of this.#s){const{id:p,popupRef:g,contentsObj:m}=h;g&&m?.str&&!l.has(p)&&!this.#g.has(p)&&u.push(h)}this.#l?.showSidebar(u)}if(!t){s&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const l of this.#n.values())l.uid===t?(this.setSelected(l),o?l.editComment():r?l.enterInEditMode():l.focus()):l.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case rt.CREATE:this.currentLayer.addNewEditor(t);return;case rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(e,t);else for(const s of this.#u)s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){for(const o of this.#n.values())o.editorType===e&&o.show(t);(this.#Y?.get(rt.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#V([[rt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#I!==e){this.#I=e;for(const t of this.#r.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#N){this.#N=!0;const e=[];for(const t of this.#r.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#N){this.#N=!1;for(const e of this.#r.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#L?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#r.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#w);return e}updateUI(e){this.#me===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#d?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],s=()=>{this._editorUndoBar?.show(r,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},r=()=>{for(const o of t)this.#ie(o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ae(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#ae(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#_!==Xe.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=e,this.#U[1]+=t;const[r,o]=this.#U,l=[...this.#w],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(r,o),h.translationDone())},undo:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(-r,-o),h.translationDone())},mustExec:!1})},u);for(const h of l)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#w)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let t=!1;for(const[{x:r,y:o,pageIndex:l},u]of e)u.newX=r,u.newY=o,u.newPageIndex=l,t||=r!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!t)return!1;const s=(r,o,l,u)=>{if(this.#n.has(r.id)){const h=this.#r.get(u);h?r._setParentAndPosition(h,o,l):(r.pageIndex=u,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:u}]of e)s(r,o,l,u)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:u}]of e)s(r,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#p)for(const s of this.#p.keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#_}isEditingMode(){return this.#_!==Xe.NONE}get imageManager(){return Je(this,"imageManager",new Ng)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,g=t.rangeCount;p<g;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:l}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(p,g,m,y)=>({x:(g-r)/l,y:1-(p+m-s)/o,width:y/l,height:m/o});break;case"180":u=(p,g,m,y)=>({x:1-(p+m-s)/o,y:1-(g+y-r)/l,width:m/o,height:y/l});break;case"270":u=(p,g,m,y)=>({x:1-(g+y-r)/l,y:(p-s)/o,width:y/l,height:m/o});break;default:u=(p,g,m,y)=>({x:(p-s)/o,y:(g-r)/l,width:m/o,height:y/l});break}const h=[];for(let p=0,g=t.rangeCount;p<g;p++){const m=t.getRangeAt(p);if(!m.collapsed)for(const{x:y,y:b,width:A,height:S}of m.getClientRects())A===0||S===0||h.push(u(y,b,A,S))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const s=this.#a.getRawValue(t);s&&(this.#_===Xe.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){const r=this.#L?.get(e);r&&(r.setCanvas(t,s),this.#L.delete(e))}addMissingCanvas(e,t){(this.#L||=new Map).set(e,t)}}class ei{#e=null;#t=!1;#s=null;#n=null;#r=null;#i=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,ei.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){ei._l10n??=e}async render(){const e=this.#s=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",ei.#f.missing),t.setAttribute("data-l10n-id",ei.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;e.addEventListener("contextmenu",ls,{signal:s}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#a=!0,r(o))},{signal:s}),await this.#p(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await ei._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#l=s,this.#h=r),!(this.#e===e&&this.#t===t)&&(o||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#s&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const e=this.#s;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",ei.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",ei.#f[`${this.#g}-label`]),!this.#e){this.#r?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#r?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#r;if(!t){this.#r=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r?.classList.remove("show")},{signal:o})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class zu{#e=null;#t=null;#s=!1;#n=null;#r=null;#i=null;#a=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=this.#n.commentButtonColor;r&&(s.backgroundColor=r)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:s}=this.#e.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(e-r)/l,(t+s-o)/u]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",ls,{signal:s}),t&&(e.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,Pt(o)},{capture:!0,signal:s}),e.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,Pt(o)},{capture:!0,signal:s})),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#s=!0,r(o))},{signal:s}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),e}edit(e){const t=this.commentPopupPositionInLayer;let s,r;if(t)[s,r]=t;else{[s,r]=this.#n.commentButtonPosition;const{width:g,height:m,x:y,y:b}=this.#n;s=y+s*g,r=b+r*m}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:h,height:p}=o;this.#n._uiManager.editComment(this.#n,l+s*h,u+r*p,{...e,parentDimensions:o})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#a&&(this.#i=null),e===null){this.#a="",this.#c=!0;return}this.#a=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#r=e,this.data=e,this.#o=null,this.#i=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#a="",this.#i=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class fc{#e;#t=!1;#s=null;#n;#r;#i;#a;#o=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#e=e,this.#s=s,this.#n=t,this.#r=r,this.#i=o,this.#a=l,this.#h=new AbortController,this.#c=AbortSignal.any([u,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Fs.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#c,r.signal]),l=this.#e,u={capture:!0,signal:o,passive:!1},h=p=>{p.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Pt(p),h(p))},u),l.addEventListener("pointerup",h,u),l.addEventListener("pointercancel",h,u);return}if(!this.#d){this.#d=new AbortController;const r=AbortSignal.any([this.#c,this.#d.signal]),o=this.#e,l={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const u=this.#p.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",Pt,l),o.addEventListener("pointermove",Pt,l),o.addEventListener("pointercancel",Pt,l),o.addEventListener("pointerup",Pt,l),this.#r?.()}if(Pt(e),e.touches.length!==2||this.#s?.()){this.#l=null;return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;Pt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:o}=t,{screenX:l,screenY:u}=s,h=this.#l,{touch0X:p,touch0Y:g,touch1X:m,touch1Y:y}=h,b=m-p,A=y-g,S=l-r,E=u-o,C=Math.hypot(S,E)||1,j=Math.hypot(b,A)||1;if(!this.#t&&Math.abs(j-C)<=fc.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=o,h.touch1X=l,h.touch1Y=u,!this.#t){this.#t=!0;return}const N=[(r+l)/2,(o+u)/2];this.#i?.(N,j,C)}#p(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#a?.()),this.#l&&(Pt(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class Oe{#e=null;#t=null;#s=null;#n=null;#r=null;#i=!1;#a=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#v=!1;#x=!1;#y=null;#E=0;#A=0;#b=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#C=Oe._zIndex++;static _borderLineWidth=-1;static _colorManager=new jg;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Oe.prototype._resizeWithKeyboard,t=Ui.TRANSLATE_SMALL,s=Ui.TRANSLATE_BIG;return Je(this,"_resizerKeyboardManager",new hc([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Oe.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,l];const[u,h]=this.parentDimensions;this.x=e.x/u,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Je(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new t3({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Oe._l10n??=e,Oe._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Oe._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Oe._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Tt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(e){this.#S=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#P(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[o,l]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/o,this.y=(t+r)/l,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}#M([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#M(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,o]}=this;if(this.x+=e/r,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[h,p]=this.getBaseTranslation();l+=h,u+=p;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Oe,r=s/e,o=s/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:o,y:l,width:u,height:h}=this;if(u*=s,h*=r,o*=s,l*=r,this._mustFixPosition)switch(e){case 0:o=Nn(o,0,s-u),l=Nn(l,0,r-h);break;case 90:o=Nn(o,0,s-h),l=Nn(l,u,r);break;case 180:o=Nn(o,u,s),l=Nn(l,h,r);break;case 270:o=Nn(o,h,s),l=Nn(l,0,r-u);break}this.x=o/=s,this.y=l/=r;const[p,g]=this.getBaseTranslation();o+=p,l+=g,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#N(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Oe.#N(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Oe.#N(e,t,360-this.parentRotation)}#j(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#D.bind(this,s),{signal:t}),r.addEventListener("contextmenu",ls,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#c)}#D(e,t){t.preventDefault();const{isMac:s}=pn.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#s?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Pt,{passive:!1,signal:l}),window.addEventListener("contextmenu",ls,{signal:l}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#B()};window.addEventListener("pointerup",p,{signal:l}),window.addEventListener("blur",p,{signal:l})}#O(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=this.#h;this.#h=null;const o=this.x,l=this.y,u=this.width,h=this.height;o===e&&l===t&&u===s&&h===r||this.addCommands({cmd:this.#O.bind(this,o,l,u,h),undo:this.#O.bind(this,e,t,s,r),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#L(e,t){const[s,r]=this.parentDimensions,o=this.x,l=this.y,u=this.width,h=this.height,p=Oe.MIN_SIZE/s,g=Oe.MIN_SIZE/r,m=this.#j(this.rotation),y=(R,U)=>[m[0]*R+m[2]*U,m[1]*R+m[3]*U],b=this.#j(360-this.rotation),A=(R,U)=>[b[0]*R+b[2]*U,b[1]*R+b[3]*U];let S,E,C=!1,j=!1;switch(e){case"topLeft":C=!0,S=(R,U)=>[0,0],E=(R,U)=>[R,U];break;case"topMiddle":S=(R,U)=>[R/2,0],E=(R,U)=>[R/2,U];break;case"topRight":C=!0,S=(R,U)=>[R,0],E=(R,U)=>[0,U];break;case"middleRight":j=!0,S=(R,U)=>[R,U/2],E=(R,U)=>[0,U/2];break;case"bottomRight":C=!0,S=(R,U)=>[R,U],E=(R,U)=>[0,0];break;case"bottomMiddle":S=(R,U)=>[R/2,U],E=(R,U)=>[R/2,0];break;case"bottomLeft":C=!0,S=(R,U)=>[0,U],E=(R,U)=>[R,0];break;case"middleLeft":j=!0,S=(R,U)=>[0,U/2],E=(R,U)=>[R,U/2];break}const N=S(u,h),M=E(u,h);let O=y(...M);const P=Oe._round(o+O[0]),L=Oe._round(l+O[1]);let B=1,F=1,$,Y;if(t.fromKeyboard)({deltaX:$,deltaY:Y}=t);else{const{screenX:R,screenY:U}=t,[H,z]=this.#l;[$,Y]=this.screenToPageTranslation(R-H,U-z),this.#l[0]=R,this.#l[1]=U}if([$,Y]=A($/s,Y/r),C){const R=Math.hypot(u,h);B=F=Math.max(Math.min(Math.hypot(M[0]-N[0]-$,M[1]-N[1]-Y)/R,1/u,1/h),p/u,g/h)}else j?B=Nn(Math.abs(M[0]-N[0]-$),p,1)/u:F=Nn(Math.abs(M[1]-N[1]-Y),g,1)/h;const te=Oe._round(u*B),oe=Oe._round(h*F);O=y(...E(te,oe));const ie=P-O[0],fe=L-O[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=te,this.height=oe,this.x=ie,this.y=fe,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#v)return this._editToolbar;this._editToolbar=new $l(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(ei.initialize(Oe._l10n),this.#s=new ei(this),this.#e&&(this.#s.data=this.#e,this.#e=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(e){this.#s&&(this.#s.data=e)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(e){await this.#s?.setGuessedText(e)}serializeAltText(e){return this.#s?.serialize(e)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new zu(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:r}}=this.#n;return{text:t,richText:e,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new zu(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(this.#n||=new zu(this),this.#n.setInitialText(e,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new zu(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,h=r-100,p=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,p,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#H();const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),_C(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new fc({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#$.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#$(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(e,t,s){let o=.7*(s/t)+1-.7;if(o===1)return;const l=this.#j(this.rotation),u=(P,L)=>[l[0]*P+l[2]*L,l[1]*P+l[3]*L],[h,p]=this.parentDimensions,g=this.x,m=this.y,y=this.width,b=this.height,A=Oe.MIN_SIZE/h,S=Oe.MIN_SIZE/p;o=Math.max(Math.min(o,1/y,1/b),A/y,S/b);const E=Oe._round(y*o),C=Oe._round(b*o);if(E===y&&C===b)return;this.#u||=[g,m,y,b];const j=u(y/2,b/2),N=Oe._round(g+j[0]),M=Oe._round(m+j[1]),O=u(E/2,C/2);this.x=N-O[0],this.y=M-O[1],this.width=E,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(e){const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#z(e);return}this.#k(e)}#k(e){const{isMac:t}=pn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},u=p=>{r.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#k(p),s&&this._onStopDragging()};t&&(this.#E=e.clientX,this.#A=e.clientY,this.#a=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",p=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:m,pointerId:y}=p;if(y!==this.#a){Pt(p);return}const[b,A]=this.screenToPageTranslation(g-this.#E,m-this.#A);this.#E=g,this.#A=m,this._uiManager.dragSelectedEditors(b,A)},l),window.addEventListener("touchmove",Pt,l),window.addEventListener("pointerdown",p=>{p.pointerType===this.#o&&(this.#T||p.isPrimary)&&u(p),Pt(p)},l));const h=p=>{if(!this.#a||this.#a===p.pointerId){u(p);return}Pt(p)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[u,h]=this.pageTranslation,p=e/r,g=t/r,m=this.x*o,y=this.y*l,b=this.width*o,A=this.height*l;switch(s){case 0:return[m+p+u,l-y-g-A+h,m+p+b+u,l-y-g+h];case 90:return[m+g+u,l-y+p+h,m+g+A+u,l-y+p+b+h];case 180:return[m-p-b+u,l-y+g+h,m-p+u,l-y+g+A+h];case 270:return[m-g-A+u,l-y-p-b+h,m-g+u,l-y-p+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,o,l]=e,u=o-s,h=l-r;switch(this.rotation){case 0:return[s,t-l,u,h];case 90:return[s,t-r,h,u];case 180:return[o,t-r,u,h];case 270:return[o,t-l,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Oe._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:r,deleted:o,richText:l},uid:u,pageIndex:h,creationDate:p,modificationDate:g}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:e},creationDate:p,modificationDate:s||g,popupRef:!o,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#v=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#v=!1,!0):!1}isInEditMode(){return this.#v}shouldGetKeyboardEvents(){return this.#x}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return t<l&&r>0&&e<o&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#H()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,r.#e=e.accessibilityData,r._isCopy=e.isCopy||!1;const[o,l]=r.pageDimensions,[u,h,p,g]=r.getRectInCurrentCoords(e.rect,l);return r.x=u/o,r.y=h/l,r.width=p/o,r.height=g/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#P(),this.removeEditToolbar(),this.#b){for(const e of this.#b.values())clearTimeout(e);this.#b=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,r,o,l]=this.getPDFRect();return[Oe._round(s+(o-s)*e),Oe._round(r+(l-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const l=this.#Y.bind(this),u=this.#q.bind(this),h=this._uiManager._signal;for(const p of this.#t){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",l,{signal:h}),p.addEventListener("blur",u,{signal:h}),p.addEventListener("focus",this.#X.bind(this,g),{signal:h}),p.setAttribute("data-l10n-id",Oe._l10nResizer[g])}}const s=this.#t[0];let r=0;for(const l of t){if(l===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const u of t){const p=this.#t[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Oe._l10nResizer[p])}}this.#U(0),this.#x=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#Y(e){Oe._resizerKeyboardManager.exec(this,e)}#q(e){this.#x&&e.relatedTarget?.parentNode!==this.#c&&this.#P()}#X(e){this.#g=this.#x?e:""}#U(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#x&&this.#L(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#P(){this.#x=!1,this.#U(-1),this.#B()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(e){this.#m=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#b||=new Map;const{action:s}=e;let r=this.#b.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#b.delete(s),this.#b.size===0&&(this.#b=null)},Oe._telemetryTimeout),this.#b.set(s,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class t3 extends Oe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const rw=3285377520,Ss=4294901760,Qs=65535;class TC{constructor(e){this.h1=e?e&4294967295:rw,this.h2=e?e&4294967295:rw}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let S=0,E=e.length;S<E;S++){const C=e.charCodeAt(S);C<=255?t[s++]=C:(t[s++]=C>>>8,t[s++]=C&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,l=new Uint32Array(t.buffer,0,r);let u=0,h=0,p=this.h1,g=this.h2;const m=3432918353,y=461845907,b=m&Qs,A=y&Qs;for(let S=0;S<r;S++)S&1?(u=l[S],u=u*m&Ss|u*b&Qs,u=u<<15|u>>>17,u=u*y&Ss|u*A&Qs,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(h=l[S],h=h*m&Ss|h*b&Qs,h=h<<15|h>>>17,h=h*y&Ss|h*A&Qs,g^=h,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*m&Ss|u*b&Qs,u=u<<15|u>>>17,u=u*y&Ss|u*A&Qs,r&1?p^=u:g^=u}this.h1=p,this.h2=g}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ss|e*36045&Qs,t=t*4283543511&Ss|((t<<16|e>>>16)*2950163797&Ss)>>>16,e^=t>>>1,e=e*444984403&Ss|e*60499&Qs,t=t*3301882366&Ss|((t<<16|e>>>16)*3120437893&Ss)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Cm=Object.freeze({map:null,hash:"",transfer:void 0});class Mg{#e=!1;#t=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=this.#n.get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof Oe&&this.#s.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof Oe)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=this.#n.get(e);let r=!1;if(s!==void 0)for(const[o,l]of Object.entries(t))s[o]!==l&&(r=!0,s[o]=l);else r=!0,this.#n.set(e,t);r&&this.#r(),t instanceof Oe&&((this.#s||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new NC(this)}get serializable(){if(this.#n.size===0)return Cm;const e=new Map,t=new TC,s=[],r=Object.create(null);let o=!1;for(const[l,u]of this.#n){const h=u instanceof Oe?u.serialize(!1,r):u;h&&(e.set(l,h),t.update(`${l}:${JSON.stringify(h)}`),o||=!!h.bitmap)}if(o)for(const l of e.values())l.bitmap&&s.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Cm}get editorStats(){let e=null;const t=new Map;let s=0,r=0;for(const o of this.#n.values()){if(!(o instanceof Oe)){o.popup&&(o.popup.deleted?r+=1:s+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;t.has(u)||t.set(u,Object.getPrototypeOf(o).constructor),e||=Object.create(null);const h=e[u]||=new Map;for(const[p,g]of Object.entries(l)){if(p==="type")continue;let m=h.get(p);m||(m=new Map,h.set(p,m));const y=m.get(g)??0;m.set(g,y+1)}}if((r>0||s>0)&&(e||=Object.create(null),e.comments={deleted:r,edited:s}),!e)return null;for(const[o,l]of t)e[o]=l.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const s=this.#s?.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#s?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#s)for(const t of this.#s.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class NC extends Mg{#e;constructor(e){super();const{map:t,hash:s,transfer:r}=e.serializable,o=structuredClone(t,r?{transfer:r}:null);this.#e={map:o,hash:s,transfer:r}}get print(){Tt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Je(this,"modifiedIds",{ids:new Set,hash:""})}}class n3{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||this.#e.has(e.loadedName))){if(ct(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=e,u=new FontFace(r,o,l);this.addNativeFontFace(u);try{await u.load(),this.#e.add(r),s?.(e)}catch{We(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Tt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw We(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Je(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Je(this,"isSyncFontLoadingSupported",Rn||pn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(ct(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Je(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(M,O){return M.charCodeAt(O)<<24|M.charCodeAt(O+1)<<16|M.charCodeAt(O+2)<<8|M.charCodeAt(O+3)&255}function r(M,O,P,L){const B=M.substring(0,O),F=M.substring(O+P);return B+L+F}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let p=0;function g(M,O){if(++p>30){We("Load test font never loaded."),O();return}if(h.font="30px "+M,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(g.bind(null,M,O))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,m.length,m);const A=16,S=1482184792;let E=s(y,A);for(o=0,l=m.length-3;o<l;o+=4)E=E-S+s(m,o)|0;o<m.length&&(E=E-S+s(m+"XXX",o)|0),y=r(y,A,4,V4(E));const C=`url(data:font/opentype;base64,${btoa(y)});`,j=`@font-face {font-family:"${m}";src:${C}}`;this.insertRule(j);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const M of[e.loadedName,m]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=M,N.append(O)}this._document.body.append(N),g(m,()=>{N.remove(),t.complete()})}}class s3{#e;constructor(e,t=null,s,r){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${xC(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(l){We(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=o}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function i3(a){if(a instanceof URL)return a.href;if(typeof a=="string"){if(Rn)return a;const e=URL.parse(a,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function a3(a){if(Rn&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return cc(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a?.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Fu(a){if(typeof a!="string")return null;if(a.endsWith("/"))return a;throw new Error(`Invalid factory url: "${a}" must include trailing slash.`)}const Em=a=>typeof a=="object"&&Number.isInteger(a?.num)&&a.num>=0&&Number.isInteger(a?.gen)&&a.gen>=0,r3=a=>typeof a=="object"&&typeof a?.name=="string",jC=Y4.bind(null,Em,r3);class o3{#e=new Map;#t=Promise.resolve();postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[r]of this.#e)r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){We("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#e.set(t,r)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Hu={DATA:1,ERROR:2},Jt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ow(){}function Vn(a){if(a instanceof Hi||a instanceof vd||a instanceof J0||a instanceof Zl||a instanceof Yp)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||Tt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new Hi(a.message);case"InvalidPDFException":return new vd(a.message);case"PasswordException":return new J0(a.message,a.code);case"ResponseException":return new Zl(a.message,a.status,a.missing);case"UnknownErrorException":return new Yp(a.message,a.details)}return new Yp(a.message,a.toString())}class Fl{#e=new AbortController;constructor(e,t,s){this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Hu.DATA)r.resolve(e.data);else if(e.callback===Hu.ERROR)r.reject(Vn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(l){o.postMessage({sourceName:s,targetName:r,callback:Hu.DATA,callbackId:e.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:r,callback:Hu.ERROR,callbackId:e.callbackId,reason:Vn(l)})});return}if(e.streamId){this.#s(e);return}t(e.data)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(e,t,s,r){const o=this.streamId++,l=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:u,action:e,streamId:o,data:t,desiredSize:p.desiredSize},r),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,h.postMessage({sourceName:l,targetName:u,stream:Jt.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{ct(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:l,targetName:u,stream:Jt.CANCEL,streamId:o,reason:Vn(p)}),g.promise}},s)}#s(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,o=this.comObj,l=this,u=this.actionHandler[e.action],h={enqueue(p,g=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=g,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:Jt.ENQUEUE,streamId:t,chunk:p},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:Jt.CLOSE,streamId:t}),delete l.streamSinks[t])},error(p){ct(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:Jt.ERROR,streamId:t,reason:Vn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(u,e.data,h).then(function(){o.postMessage({sourceName:s,targetName:r,stream:Jt.START_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:s,targetName:r,stream:Jt.START_COMPLETE,streamId:t,reason:Vn(p)})})}#n(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,o=this.comObj,l=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case Jt.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(Vn(e.reason));break;case Jt.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(Vn(e.reason));break;case Jt.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:Jt.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||ow).then(function(){o.postMessage({sourceName:s,targetName:r,stream:Jt.PULL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:s,targetName:r,stream:Jt.PULL_COMPLETE,streamId:t,reason:Vn(p)})});break;case Jt.ENQUEUE:if(ct(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case Jt.CLOSE:if(ct(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,t);break;case Jt.ERROR:ct(l,"error should have stream controller"),l.controller.error(Vn(e.reason)),this.#r(l,t);break;case Jt.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(Vn(e.reason)),this.#r(l,t);break;case Jt.CANCEL:if(!u)break;const h=Vn(e.reason);Promise.try(u.onCancel||ow,h).then(function(){o.postMessage({sourceName:s,targetName:r,stream:Jt.CANCEL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:s,targetName:r,stream:Jt.CANCEL_COMPLETE,streamId:t,reason:Vn(p)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#r(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class MC{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Tt("Abstract method `_createCanvas` called.")}}class l3 extends MC{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class RC{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Tt("Abstract method `_fetch` called.")}}class lw extends RC{async _fetch(e){const t=await Po(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):cc(t)}}class DC{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,o){return"none"}destroy(e=!1){}}class c3 extends DC{#e;#t;#s;#n;#r;#i;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#r=t}get#o(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#s){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const s=this.#r.createElementNS(Di,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#s=this.#r.createElementNS(Di,"defs"),e.append(s),s.append(this.#s),this.#r.body.append(e)}return this.#s}#h(e){if(e.length===1){const h=e[0],p=new Array(256);for(let m=0;m<256;m++)p[m]=h[m]/255;const g=p.join(",");return[g,g,g]}const[t,s,r]=e,o=new Array(256),l=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=t[h]/255,l[h]=s[h]/255,u[h]=r[h]/255;return[o.join(","),l.join(","),u.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(dc(t)?We('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=Ag(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[s,r,o]=this.#h(e),l=e.length===1?s:`${s}${r}${o}`;if(t=this.#o.get(l),t)return this.#o.set(e,t),t;const u=`g_${this.#n}_transfer_map_${this.#a++}`,h=this.#d(u);this.#o.set(e,h),this.#o.set(l,h);const p=this.#p(u);return this.#m(s,r,o,p),h}addHCMFilter(e,t){const s=`${e}-${t}`,r="base";let o=this.#c.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(r,o)),!e||!t))return o.url;const l=this.#x(e);e=_e.makeHexColor(...l);const u=this.#x(t);if(t=_e.makeHexColor(...u),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return o.url;const h=new Array(256);for(let b=0;b<=255;b++){const A=b/255;h[b]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const p=h.join(","),g=`g_${this.#n}_hcm_filter`,m=o.filter=this.#p(g);this.#m(p,p,p,m),this.#g(m);const y=(b,A)=>{const S=l[b]/255,E=u[b]/255,C=new Array(A+1);for(let j=0;j<=A;j++)C[j]=S+j/A*(E-S);return C.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),m),o.url=this.#d(g),o.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[s]=this.#h([e]),r=`alpha_${s}`;if(t=this.#o.get(r),t)return this.#o.set(e,t),t;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#d(o);this.#o.set(e,l),this.#o.set(r,l);const u=this.#p(o);return this.#v(s,u),l}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let s,r;if(e?([s]=this.#h([e]),r=`luminosity_${s}`):r="luminosity",t=this.#o.get(r),t)return this.#o.set(e,t),t;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#d(o);this.#o.set(e,l),this.#o.set(r,l);const u=this.#p(o);return this.#f(u),e&&this.#v(s,u),l}addHighlightHCMFilter(e,t,s,r,o){const l=`${t}-${s}-${r}-${o}`;let u=this.#c.get(e);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(e,u)),!t||!s))return u.url;const[h,p]=[t,s].map(this.#x.bind(this));let g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[y,b]=[r,o].map(this.#x.bind(this));m<g&&([g,m,y,b]=[m,g,b,y]),this.#l.style.color="";const A=(C,j,N)=>{const M=new Array(256),O=(m-g)/N,P=C/255,L=(j-C)/(255*N);let B=0;for(let F=0;F<=N;F++){const $=Math.round(g+F*O),Y=P+F*L;for(let te=B;te<=$;te++)M[te]=Y;B=$+1}for(let F=B;F<256;F++)M[F]=M[B-1];return M.join(",")},S=`g_${this.#n}_hcm_${e}_filter`,E=u.filter=this.#p(S);return this.#g(E),this.#m(A(y[0],b[0],5),A(y[1],b[1],5),A(y[2],b[2],5),E),u.url=this.#d(S),u.url}destroy(e=!1){e&&this.#i?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#a=0)}#f(e){const t=this.#r.createElementNS(Di,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#r.createElementNS(Di,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#r.createElementNS(Di,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,s){const r=this.#r.createElementNS(Di,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)}#m(e,t,s,r){const o=this.#r.createElementNS(Di,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",e),this.#u(o,"feFuncG",t),this.#u(o,"feFuncB",s)}#v(e,t){const s=this.#r.createElementNS(Di,"feComponentTransfer");t.append(s),this.#u(s,"feFuncA",e)}#x(e){return this.#l.style.color=e,Io(getComputedStyle(this.#l).getPropertyValue("color"))}}class kC{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Tt("Abstract method `_fetch` called.")}}class cw extends kC{async _fetch(e){const t=await Po(e,"arraybuffer");return new Uint8Array(t)}}class OC{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Tt("Abstract method `_fetch` called.")}}class uw extends OC{async _fetch(e){const t=await Po(e,"arraybuffer");return new Uint8Array(t)}}Rn&&We("Please use the `legacy` build in Node.js environments.");async function Rg(a){const t=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(t)}class u3 extends DC{}class d3 extends MC{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class h3 extends RC{async _fetch(e){return Rg(e)}}class f3 extends kC{async _fetch(e){return Rg(e)}}class p3 extends OC{async _fetch(e){return Rg(e)}}const eo="__forcedDependency",{floor:dw,ceil:hw}=Math;function Uu(a,e,t,s,r,o){a[e*4+0]=Math.min(a[e*4+0],t),a[e*4+1]=Math.min(a[e*4+1],s),a[e*4+2]=Math.max(a[e*4+2],r),a[e*4+3]=Math.max(a[e*4+3],o)}const _m=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class m3{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===_m}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Vu=(a,e)=>{if(!a)return;let t=a.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},a.set(e,t)),t};class g3{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[eo]:[]};#s=new Map;#n=[];#r=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#p;#u;#m;constructor(e,t,s=!1){this.#f=e.width,this.#g=e.height,this.#v(t),s&&(this.#m=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#v(e,this.#u)}#v(e,t){const s=new ArrayBuffer(e*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),t&&t.length>0?(this.#u.set(t),this.#u.fill(_m,t.length)):this.#u.fill(_m)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[eo]:{__proto__:this.#t[eo]}},this.#a={__proto__:this.#a},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#a=Object.getPrototypeOf(this.#a);const s=this.#n.pop();return s!==void 0&&(Vu(this.#m,e)?.dependencies.add(s),this.#u[e]=this.#u[s]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(Vu(this.#m,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#r.push(e),this}endMarkedContent(e){const t=this.#r.pop();return t!==void 0&&(Vu(this.#m,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#i.push(_e.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#s.set(e,t),this}recordSimpleDataFromNamed(e,t,s){this.#e[e]=this.#s.get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(eo,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(eo,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,s,r,o,l){const u=_e.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform()),h=[1/0,1/0,-1/0,-1/0];_e.axialAlignedBoundingBox([s,o,r,l],u,h);const p=_e.intersect(this.#a,h);return p?(this.#a[0]=p[0],this.#a[1]=p[1],this.#a[2]=p[2],this.#a[3]=p[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(e,t,s,r,o,l){const u=this.#a;if(u[0]===1/0)return this;const h=_e.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform());if(u[0]===-1/0)return _e.axialAlignedBoundingBox([s,o,r,l],h,this.#o),this;const p=[1/0,1/0,-1/0,-1/0];return _e.axialAlignedBoundingBox([s,o,r,l],h,p),this.#o[0]=Math.min(this.#o[0],Math.max(p[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(p[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(p[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(p[3],u[3])),this}recordCharacterBBox(e,t,s,r=1,o=0,l=0,u){const h=s.bbox;let p,g;if(h&&(p=h[2]!==h[0]&&h[3]!==h[1]&&this.#d.get(s),p!==!1&&(g=[0,0,0,0],_e.axialAlignedBoundingBox(h,s.fontMatrix,g),(r!==1||o!==0||l!==0)&&_e.scaleMinMax([r,0,0,-r,o,l],g),p)))return this.recordBBox(e,t,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(e);const m=u();return h&&g&&p===void 0&&(p=g[0]<=o-m.actualBoundingBoxLeft&&g[2]>=o+m.actualBoundingBoxRight&&g[1]<=l-m.actualBoundingBoxAscent&&g[3]>=l+m.actualBoundingBoxDescent,this.#d.set(s,p),p)?this.recordBBox(e,t,g[0],g[2],g[1],g[3]):this.recordBBox(e,t,o-m.actualBoundingBoxLeft,o+m.actualBoundingBoxRight,l-m.actualBoundingBoxAscent,l+m.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const s=this.#l,r=this.#e,o=this.#t;for(const l of t)l in this.#e?s.add(r[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(e,t){return this.#s.has(t)&&this.#l.add(this.#s.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[eo]),this.#m){const s=Vu(this.#m,e),{dependencies:r}=s;this.#l.forEach(r.add,r),this.#n.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(e),s.isRenderingOperation=!0}if(this.#c===e){const s=dw(this.#o[0]*256/this.#f),r=dw(this.#o[1]*256/this.#g),o=hw(this.#o[2]*256/this.#f),l=hw(this.#o[3]*256/this.#g);Uu(this.#p,e,s,r,o,l);for(const u of this.#l)u!==e&&Uu(this.#p,u,s,r,o,l);for(const u of this.#n)u!==e&&Uu(this.#p,u,s,r,o,l);for(const u of this.#r)u!==e&&Uu(this.#p,u,s,r,o,l);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const s=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new m3(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class bd{#e;#t;#s;#n=0;#r=0;constructor(e,t,s){if(e instanceof bd&&e.#s===!!s)return e;this.#e=e,this.#t=t,this.#s=!!s}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#r++,this.#e.save(this.#t),this}restore(e){return this.#r>0&&(this.#e.restore(this.#t),this.#r--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#s||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,s,r,o,l){return this.#s||this.#e.recordClipBox(this.#t,t,s,r,o,l),this}recordBBox(e,t,s,r,o,l){return this.#s||this.#e.recordBBox(this.#t,t,s,r,o,l),this}recordCharacterBBox(e,t,s,r,o,l,u){return this.#s||this.#e.recordCharacterBBox(this.#t,t,s,r,o,l,u),this}recordFullPageBBox(e){return this.#s||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#s||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const As={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Sn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Tm(a,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),a.clip(r)}class Dg{isModifyingCurrentTransform(){return!1}getPattern(){Tt("Abstract method `getPattern` called.")}}class v3 extends Dg{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let o;if(r===Sn.STROKE||r===Sn.FILL){const l=t.current.getClippedPathBoundingBox(r,Lt(e))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,p=t.cachedCanvases.getCanvas("pattern",u,h),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=_e.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...t.baseTransform),this.matrix&&g.transform(...this.matrix),Tm(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=e.createPattern(p.canvas,"no-repeat");const m=new DOMMatrix(s);o.setTransform(m)}else Tm(e,this._bbox),o=this._createGradient(e);return o}}function Kp(a,e,t,s,r,o,l,u){const h=e.coords,p=e.colors,g=a.data,m=a.width*4;let y;h[t+1]>h[s+1]&&(y=t,t=s,s=y,y=o,o=l,l=y),h[s+1]>h[r+1]&&(y=s,s=r,r=y,y=l,l=u,u=y),h[t+1]>h[s+1]&&(y=t,t=s,s=y,y=o,o=l,l=y);const b=(h[t]+e.offsetX)*e.scaleX,A=(h[t+1]+e.offsetY)*e.scaleY,S=(h[s]+e.offsetX)*e.scaleX,E=(h[s+1]+e.offsetY)*e.scaleY,C=(h[r]+e.offsetX)*e.scaleX,j=(h[r+1]+e.offsetY)*e.scaleY;if(A>=j)return;const N=p[o],M=p[o+1],O=p[o+2],P=p[l],L=p[l+1],B=p[l+2],F=p[u],$=p[u+1],Y=p[u+2],te=Math.round(A),oe=Math.round(j);let ie,fe,R,U,H,z,se,T;for(let k=te;k<=oe;k++){if(k<E){const Q=k<A?0:(A-k)/(A-E);ie=b-(b-S)*Q,fe=N-(N-P)*Q,R=M-(M-L)*Q,U=O-(O-B)*Q}else{let Q;k>j?Q=1:E===j?Q=0:Q=(E-k)/(E-j),ie=S-(S-C)*Q,fe=P-(P-F)*Q,R=L-(L-$)*Q,U=B-(B-Y)*Q}let I;k<A?I=0:k>j?I=1:I=(A-k)/(A-j),H=b-(b-C)*I,z=N-(N-F)*I,se=M-(M-$)*I,T=O-(O-Y)*I;const q=Math.round(Math.min(ie,H)),X=Math.round(Math.max(ie,H));let ce=m*k+q*4;for(let Q=q;Q<=X;Q++)I=(ie-Q)/(ie-H),I<0?I=0:I>1&&(I=1),g[ce++]=fe-(fe-z)*I|0,g[ce++]=R-(R-se)*I|0,g[ce++]=U-(U-T)*I|0,g[ce++]=255}}function y3(a,e,t){const s=e.coords,r=e.colors;let o,l;switch(e.type){case"lattice":const u=e.verticesPerRow,h=Math.floor(s.length/u)-1,p=u-1;for(o=0;o<h;o++){let g=o*u;for(let m=0;m<p;m++,g++)Kp(a,t,s[g],s[g+1],s[g+u],r[g],r[g+1],r[g+u]),Kp(a,t,s[g+u+1],s[g+1],s[g+u],r[g+u+1],r[g+1],r[g+u])}break;case"triangles":for(o=0,l=s.length;o<l;o+=3)Kp(a,t,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class x3 extends Dg{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),b=p/m,A=g/y,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/b,scaleY:1/A},E=m+4,C=y+4,j=s.getCanvas("mesh",E,C),N=j.context,M=N.createImageData(m,y);if(t){const P=M.data;for(let L=0,B=P.length;L<B;L+=4)P[L]=t[0],P[L+1]=t[1],P[L+2]=t[2],P[L+3]=255}for(const P of this._figures)y3(M,P,S);return N.putImageData(M,2,2),{canvas:j.canvas,offsetX:u-2*b,offsetY:h-2*A,scaleX:b,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){Tm(e,this._bbox);const o=new Float32Array(2);if(r===Sn.SHADING)_e.singularValueDecompose2dScale(Lt(e),o);else if(this.matrix){_e.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;_e.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=u,o[1]*=h}else _e.singularValueDecompose2dScale(t.baseTransform,o);const l=this._createMeshCanvas(o,r===Sn.SHADING?null:this._background,t.cachedCanvases);return r!==Sn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class b3 extends Dg{getPattern(){return"hotpink"}}function w3(a){switch(a[0]){case"RadialAxial":return new v3(a);case"Mesh":return new x3(a);case"Dummy":return new b3}throw new Error(`Unknown IR type: ${a[0]}`)}const fw={COLORED:1,UNCOLORED:2};class kg{static MAX_PATTERN_SIZE=3e3;constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e,t){const{bbox:s,operatorList:r,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:h}=this;let{xstep:p,ystep:g}=this;p=Math.abs(p),g=Math.abs(g),Kd("TilingType: "+l);const m=s[0],y=s[1],b=s[2],A=s[3],S=b-m,E=A-y,C=new Float32Array(2);_e.singularValueDecompose2dScale(this.matrix,C);const[j,N]=C;_e.singularValueDecompose2dScale(this.baseTransform,C);const M=j*C[0],O=N*C[1];let P=S,L=E,B=!1,F=!1;const $=Math.ceil(p*M),Y=Math.ceil(g*O),te=Math.ceil(S*M),oe=Math.ceil(E*O);$>=te?P=p:B=!0,Y>=oe?L=g:F=!0;const ie=this.getSizeAndScale(P,this.ctx.canvas.width,M),fe=this.getSizeAndScale(L,this.ctx.canvas.height,O),R=e.cachedCanvases.getCanvas("pattern",ie.size,fe.size),U=R.context,H=h.createCanvasGraphics(U,t);if(H.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(H,o,u),U.translate(-ie.scale*m,-fe.scale*y),H.transform(0,ie.scale,0,0,fe.scale,0,0),U.save(),H.dependencyTracker?.save(),this.clipBbox(H,m,y,b,A),H.baseTransform=Lt(H.ctx),H.executeOperatorList(r),H.endDrawing(),H.dependencyTracker?.restore(),U.restore(),B||F){const z=R.canvas;B&&(P=p),F&&(L=g);const se=this.getSizeAndScale(P,this.ctx.canvas.width,M),T=this.getSizeAndScale(L,this.ctx.canvas.height,O),k=se.size,I=T.size,q=e.cachedCanvases.getCanvas("pattern-workaround",k,I),X=q.context,ce=B?Math.floor(S/p):0,Q=F?Math.floor(E/g):0;for(let ue=0;ue<=ce;ue++)for(let pe=0;pe<=Q;pe++)X.drawImage(z,k*ue,I*pe,k,I,0,0,k,I);return{canvas:q.canvas,scaleX:se.scale,scaleY:T.scale,offsetX:m,offsetY:y}}return{canvas:R.canvas,scaleX:ie.scale,scaleY:fe.scale,offsetX:m,offsetY:y}}getSizeAndScale(e,t,s){const r=Math.max(kg.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*s);return o>=r?o=r:s=o/e,{scale:s,size:o}}clipBbox(e,t,s,r,o){const l=r-t,u=o-s;e.ctx.rect(t,s,l,u),_e.axialAlignedBoundingBox([t,s,r,o],Lt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,o=e.current;switch(t){case fw.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=l,r.strokeStyle=o.strokeColor=u;break;case fw.UNCOLORED:r.fillStyle=r.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new U4(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r,o){let l=s;r!==Sn.SHADING&&(l=_e.transform(l,t.baseTransform),this.matrix&&(l=_e.transform(l,this.matrix)));const u=this.createPatternCanvas(t,o);let h=new DOMMatrix(l);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const p=e.createPattern(u.canvas,"repeat");return p.setTransform(h),p}}function S3({src:a,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=pn.isLittleEndian?4278190080:255,[h,p]=l?[o,u]:[u,o],g=s>>3,m=s&7,y=a.length;t=new Uint32Array(t.buffer);let b=0;for(let A=0;A<r;A++){for(const E=e+g;e<E;e++){const C=e<y?a[e]:255;t[b++]=C&128?p:h,t[b++]=C&64?p:h,t[b++]=C&32?p:h,t[b++]=C&16?p:h,t[b++]=C&8?p:h,t[b++]=C&4?p:h,t[b++]=C&2?p:h,t[b++]=C&1?p:h}if(m===0)continue;const S=e<y?a[e++]:255;for(let E=0;E<m;E++)t[b++]=S&1<<7-E?p:h}return{srcPos:e,destPos:b}}const pw=16,mw=100,A3=15,gw=10,Gn=16,Qp=new DOMMatrix,as=new Float32Array(2),so=new Float32Array([1/0,1/0,-1/0,-1/0]);function C3(a,e){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){e.save(),this.__originalSave()},a.restore=function(){e.restore(),this.__originalRestore()},a.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},a.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},a.transform=function(t,s,r,o,l,u){e.transform(t,s,r,o,l,u),this.__originalTransform(t,s,r,o,l,u)},a.setTransform=function(t,s,r,o,l,u){e.setTransform(t,s,r,o,l,u),this.__originalSetTransform(t,s,r,o,l,u)},a.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},a.rotate=function(t){e.rotate(t),this.__originalRotate(t)},a.clip=function(t){e.clip(t),this.__originalClip(t)},a.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},a.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},a.bezierCurveTo=function(t,s,r,o,l,u){e.bezierCurveTo(t,s,r,o,l,u),this.__originalBezierCurveTo(t,s,r,o,l,u)},a.rect=function(t,s,r,o){e.rect(t,s,r,o),this.__originalRect(t,s,r,o)},a.closePath=function(){e.closePath(),this.__originalClosePath()},a.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class E3{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function $u(a,e,t,s,r,o,l,u,h,p){const[g,m,y,b,A,S]=Lt(a);if(m===0&&y===0){const j=l*g+A,N=Math.round(j),M=u*b+S,O=Math.round(M),P=(l+h)*g+A,L=Math.abs(Math.round(P)-N)||1,B=(u+p)*b+S,F=Math.abs(Math.round(B)-O)||1;return a.setTransform(Math.sign(g),0,0,Math.sign(b),N,O),a.drawImage(e,t,s,r,o,0,0,L,F),a.setTransform(g,m,y,b,A,S),[L,F]}if(g===0&&b===0){const j=u*y+A,N=Math.round(j),M=l*m+S,O=Math.round(M),P=(u+p)*y+A,L=Math.abs(Math.round(P)-N)||1,B=(l+h)*m+S,F=Math.abs(Math.round(B)-O)||1;return a.setTransform(0,Math.sign(m),Math.sign(y),0,N,O),a.drawImage(e,t,s,r,o,0,0,F,L),a.setTransform(g,m,y,b,A,S),[F,L]}a.drawImage(e,t,s,r,o,l,u,h,p);const E=Math.hypot(g,m),C=Math.hypot(y,b);return[E*h,C*p]}class vw{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Sm;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=wn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,s){s?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=so.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Sn.FILL,t=null){const s=this.minMax.slice();if(e===Sn.STROKE){t||Tt("Stroke bounding box must include transform."),_e.singularValueDecompose2dScale(t,as);const r=as[0]*this.lineWidth/2,o=as[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const e=_e.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(so,0)}getClippedPathBoundingBox(e=Sn.FILL,t=null){return _e.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function yw(a,e){if(e instanceof ImageData){a.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%Gn,o=(t-r)/Gn,l=r===0?o:o+1,u=a.createImageData(s,Gn);let h=0,p;const g=e.data,m=u.data;let y,b,A,S;if(e.kind===Vl.GRAYSCALE_1BPP){const E=g.byteLength,C=new Uint32Array(m.buffer,0,m.byteLength>>2),j=C.length,N=s+7>>3,M=4294967295,O=pn.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(A=y<o?Gn:r,p=0,b=0;b<A;b++){const P=E-h;let L=0;const B=P>N?s:P*8-7,F=B&-8;let $=0,Y=0;for(;L<F;L+=8)Y=g[h++],C[p++]=Y&128?M:O,C[p++]=Y&64?M:O,C[p++]=Y&32?M:O,C[p++]=Y&16?M:O,C[p++]=Y&8?M:O,C[p++]=Y&4?M:O,C[p++]=Y&2?M:O,C[p++]=Y&1?M:O;for(;L<B;L++)$===0&&(Y=g[h++],$=128),C[p++]=Y&$?M:O,$>>=1}for(;p<j;)C[p++]=0;a.putImageData(u,0,y*Gn)}}else if(e.kind===Vl.RGBA_32BPP){for(b=0,S=s*Gn*4,y=0;y<o;y++)m.set(g.subarray(h,h+S)),h+=S,a.putImageData(u,0,b),b+=Gn;y<l&&(S=s*r*4,m.set(g.subarray(h,h+S)),a.putImageData(u,0,b))}else if(e.kind===Vl.RGB_24BPP)for(A=Gn,S=s*A,y=0;y<l;y++){for(y>=o&&(A=r,S=s*A),p=0,b=S;b--;)m[p++]=g[h++],m[p++]=g[h++],m[p++]=g[h++],m[p++]=255;a.putImageData(u,0,y*Gn)}else throw new Error(`bad image kind: ${e.kind}`)}function xw(a,e){if(e.bitmap){a.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%Gn,o=(t-r)/Gn,l=r===0?o:o+1,u=a.createImageData(s,Gn);let h=0;const p=e.data,g=u.data;for(let m=0;m<l;m++){const y=m<o?Gn:r;({srcPos:h}=S3({src:p,srcPos:h,dest:g,width:s,height:y,nonBlackColor:0})),a.putImageData(u,0,m*Gn)}}function Dl(a,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)a[s]!==void 0&&(e[s]=a[s]);a.setLineDash!==void 0&&(e.setLineDash(a.getLineDash()),e.lineDashOffset=a.lineDashOffset)}function Gu(a){a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0);const{filter:e}=a;e!=="none"&&e!==""&&(a.filter="none")}function bw(a,e){if(e)return!0;_e.singularValueDecompose2dScale(a,as);const t=Math.fround(Fs.pixelRatio*ar.PDF_TO_CSS_UNITS);return as[0]<=t&&as[1]<=t}const _3=["butt","round","square"],T3=["miter","round","bevel"],N3={},ww={};class co{constructor(e,t,s,r,o,{optionalContentConfig:l,markedContentStack:u=null},h,p,g){this.ctx=e,this.current=new vw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new E3(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(e,t,s=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Lt(this.compositeCtx))}this.ctx.save(),Gu(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Lt(this.ctx)}executeOperatorList(e,t,s,r,o){const l=e.argsArray,u=e.fnArray;let h=t||0;const p=l.length;if(p===h)return h;const g=p-h>gw&&typeof s=="function",m=g?Date.now()+A3:0;let y=0;const b=this.commonObjs,A=this.objs;let S,E;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,s),h;if(!o||o(h))if(S=u[h],E=l[h]??null,S!==Co.dependency)E===null?this[S](h):this[S](h,...E);else for(const C of E){this.dependencyTracker?.recordNamedData(C,h);const j=C.startsWith("g_")?b:A;if(!j.has(C))return j.get(C,s),h}if(h++,h===p)return h;if(g&&++y>gw){if(Date.now()>m)return s(),h;y=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),u=s,h=r,p="prescale1",g,m;for(;o>2&&u>1||l>2&&h>1;){let y=u,b=h;o>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/y),l>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/b),g=this.cachedCanvases.getCanvas(p,y,b),m=g.context,m.clearRect(0,0,y,b),m.drawImage(e,0,0,u,h,0,0,y,b),e=g.canvas,u=y,h=b,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e,t){const s=this.ctx,{width:r,height:o}=t,l=this.current.fillColor,u=this.current.patternFill,h=Lt(s);let p,g,m,y;if((t.bitmap||t.data)&&t.count>1){const $=t.bitmap||t.data.buffer;g=JSON.stringify(u?h:[h.slice(0,4),l]),p=this._cachedBitmapsMap.get($),p||(p=new Map,this._cachedBitmapsMap.set($,p));const Y=p.get(g);if(Y&&!u){const te=Math.round(Math.min(h[0],h[2])+h[4]),oe=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(e,As.transformAndFill),{canvas:Y,offsetX:te,offsetY:oe}}m=Y}m||(y=this.cachedCanvases.getCanvas("maskCanvas",r,o),xw(y.context,t));let b=_e.transform(h,[1/r,0,0,-1/o,0,0]);b=_e.transform(b,[1,0,0,1,0,-o]);const A=so.slice();_e.axialAlignedBoundingBox([0,0,r,o],b,A);const[S,E,C,j]=A,N=Math.round(C-S)||1,M=Math.round(j-E)||1,O=this.cachedCanvases.getCanvas("fillCanvas",N,M),P=O.context,L=S,B=E;P.translate(-L,-B),P.transform(...b),m||(m=this._scaleImage(y.canvas,Ks(P)),m=m.img,p&&u&&p.set(g,m)),P.imageSmoothingEnabled=bw(Lt(P),t.interpolate),$u(P,m,0,0,m.width,m.height,0,0,r,o),P.globalCompositeOperation="source-in";const F=_e.transform(Ks(P),[1,0,0,1,-L,-B]);return P.fillStyle=u?l.getPattern(s,this,F,Sn.FILL,e):l,P.fillRect(0,0,r,o),p&&!u&&(this.cachedCanvases.delete("fillCanvas"),p.set(g,O.canvas)),this.dependencyTracker?.recordDependencies(e,As.transformAndFill),{canvas:O.canvas,offsetX:Math.round(L),offsetY:Math.round(B)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=_3[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=T3[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){this.dependencyTracker?.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[s,r]of t)switch(s){case"LW":this.setLineWidth(e,r);break;case"LC":this.setLineCap(e,r);break;case"LJ":this.setLineJoin(e,r);break;case"ML":this.setMiterLimit(e,r);break;case"D":this.setDash(e,r[0],r[1]);break;case"RI":this.setRenderingIntent(e,r);break;case"FL":this.setFlatness(e,r);break;case"Font":this.setFont(e,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,t,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Dl(this.suspendedCtx,l),C3(l,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Dl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const o=r[0],l=r[1],u=r[2]-o,h=r[3]-l;u===0||h===0||(this.genericComposeSMask(t.context,s,u,h,t.subtype,t.backdrop,t.transferMap,o,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,o,l,u,h,p,g,m){let y=e.canvas,b=h-g,A=p-m;if(l)if(b<0||A<0||b+s>y.width||A+r>y.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,r),C=E.context;C.drawImage(y,-b,-A),C.globalCompositeOperation="destination-atop",C.fillStyle=l,C.fillRect(0,0,s,r),C.globalCompositeOperation="source-over",y=E.canvas,b=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(b,A,s,r),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=l,e.fillRect(b,A,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(h,p,s,r),t.clip(S),t.globalCompositeOperation="destination-in",t.drawImage(y,b,A,s,r,h,p,s,r),t.restore()}save(e){this.inSMaskMode&&Dl(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Dl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,s,r,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,r){let[o]=s;if(!r){o||=s[0]=new Path2D,this[t](e,o);return}if(this.dependencyTracker!==null){const l=t===Co.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-l,r[2]+l,r[1]-l,r[3]+l).recordDependencies(e,["transform"])}if(!(o instanceof Path2D)){const l=s[0]=new Path2D;for(let u=0,h=o.length;u<h;)switch(o[u++]){case Bu.moveTo:l.moveTo(o[u++],o[u++]);break;case Bu.lineTo:l.lineTo(o[u++],o[u++]);break;case Bu.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case Bu.closePath:l.closePath();break;default:We(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}_e.axialAlignedBoundingBox(r,Lt(this.ctx),this.current.minMax),this[t](e,o),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,Ks(r),Sn.STROKE,e),l){const u=new Path2D;u.addPath(t,r.getTransform().invertSelf().multiplySelf(l)),t=u}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,As.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Sn.STROKE,Lt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){const r=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const p=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(e),r.save(),r.fillStyle=o.getPattern(r,this,Ks(r),Sn.FILL,e),p){const g=new Path2D;g.addPath(t,r.getTransform().invertSelf().multiplySelf(p)),t=g}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),this.dependencyTracker?.recordDependencies(e,As.fill),u&&(r.restore(),this.dependencyTracker?.restore(e)),s&&this.consumePath(e,t,h)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,As.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=N3}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=ww}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:u,y:h,fontSize:p,path:g}of t)g&&r.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(u,h).scale(p,-p));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),o=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=r.fontMatrix||Sm,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&We("Invalid font matrix for font "+t),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const l=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${l}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const p=r.italic?"italic":"normal";let g=s;s<pw?g=pw:s>mw&&(g=mw),this.current.fontSizeScale=s/g,this.ctx.font=`${p} ${h} ${g}px ${u}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#s(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r}paintChar(e,t,s,r,o,l){const u=this.ctx,h=this.current,p=h.font,g=h.textRenderingMode,m=h.fontSize/h.fontSizeScale,y=g&wn.FILL_STROKE_MASK,b=!!(g&wn.ADD_TO_PATH_FLAG),A=h.patternFill&&!p.missingFile,S=h.patternStroke&&!p.missingFile;let E;if((p.disableFontFace||b||A||S)&&!p.missingFile&&(E=p.getPathGenerator(this.commonObjs,t)),E&&(p.disableFontFace||A||S)){u.save(),u.translate(s,r),u.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(e,u,p);let C;if(y===wn.FILL||y===wn.FILL_STROKE)if(o){C=u.getTransform(),u.setTransform(...o);const j=this.#s(E,C,o);u.fill(j)}else u.fill(E);if(y===wn.STROKE||y===wn.FILL_STROKE)if(l){C||=u.getTransform(),u.setTransform(...l);const{a:j,b:N,c:M,d:O}=C,P=_e.inverseTransform(l),L=_e.transform([j,N,M,O,0,0],P);_e.singularValueDecompose2dScale(L,as),u.lineWidth*=Math.max(as[0],as[1])/m,u.stroke(this.#s(E,C,l))}else u.lineWidth/=m,u.stroke(E);u.restore()}else(y===wn.FILL||y===wn.FILL_STROKE)&&(u.fillText(t,s,r),this.dependencyTracker?.recordCharacterBBox(e,u,p,m,s,r,()=>u.measureText(t))),(y===wn.STROKE||y===wn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,u,p,m,s,r,()=>u.measureText(t)).recordDependencies(e,As.stroke),u.strokeText(t,s,r));b&&((this.pendingTextPaths||=[]).push({transform:Lt(u),x:s,y:r,fontSize:m,path:E}),this.dependencyTracker?.recordCharacterBBox(e,u,p,m,s,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return Je(this,"isFontSubpixelAAEnabled",s)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,As.showText).resetBBox(e),this.current.textRenderingMode&wn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(e);return}const l=this.ctx,u=s.fontSizeScale,h=s.charSpacing,p=s.wordSpacing,g=s.fontDirection,m=s.textHScale*g,y=t.length,b=r.vertical,A=b?1:-1,S=r.defaultVMetrics,E=o*s.fontMatrix[0],C=s.textRenderingMode===wn.FILL&&!r.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),g>0?l.scale(m,-1):l.scale(m,1);let j,N;if(s.patternFill){l.save();const B=s.fillColor.getPattern(l,this,Ks(l),Sn.FILL,e);j=Lt(l),l.restore(),l.fillStyle=B}if(s.patternStroke){l.save();const B=s.strokeColor.getPattern(l,this,Ks(l),Sn.STROKE,e);N=Lt(l),l.restore(),l.strokeStyle=B}let M=s.lineWidth;const O=s.textMatrixScale;if(O===0||M===0){const B=s.textRenderingMode&wn.FILL_STROKE_MASK;(B===wn.STROKE||B===wn.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=O;if(u!==1&&(l.scale(u,u),M/=u),l.lineWidth=M,r.isInvalidPDFjsFont){const B=[];let F=0;for(const Y of t)B.push(Y.unicode),F+=Y.width;const $=B.join("");if(l.fillText($,0,0),this.dependencyTracker!==null){const Y=l.measureText($);this.dependencyTracker.recordBBox(e,this.ctx,-Y.actualBoundingBoxLeft,Y.actualBoundingBoxRight,-Y.actualBoundingBoxAscent,Y.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=F*E*m,l.restore(),this.compose();return}let P=0,L;for(L=0;L<y;++L){const B=t[L];if(typeof B=="number"){P+=A*B*o/1e3;continue}let F=!1;const $=(B.isSpace?p:0)+h,Y=B.fontChar,te=B.accent;let oe,ie,fe=B.width;if(b){const H=B.vmetric||S,z=-(B.vmetric?H[1]:fe*.5)*E,se=H[2]*E;fe=H?-H[0]:fe,oe=z/u,ie=(P+se)/u}else oe=P/u,ie=0;let R;if(r.remeasure&&fe>0){R=l.measureText(Y);const H=R.width*1e3/o*u;if(fe<H&&this.isFontSubpixelAAEnabled){const z=fe/H;F=!0,l.save(),l.scale(z,1),oe/=z}else fe!==H&&(oe+=(fe-H)/2e3*o/u)}if(this.contentVisible&&(B.isInFont||r.missingFile)){if(C&&!te)l.fillText(Y,oe,ie),this.dependencyTracker?.recordCharacterBBox(e,l,R?{bbox:null}:r,o/u,oe,ie,()=>R??l.measureText(Y));else if(this.paintChar(e,Y,oe,ie,j,N),te){const H=oe+o*te.offset.x/u,z=ie-o*te.offset.y/u;this.paintChar(e,te.fontChar,H,z,j,N)}}const U=b?fe*E-$*g:fe*E+$*g;P+=U,F&&l.restore()}b?s.y-=P:s.x+=P*m,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,r=this.current,o=r.font,l=r.fontSize,u=r.fontDirection,h=o.vertical?1:-1,p=r.charSpacing,g=r.wordSpacing,m=r.textHScale*u,y=r.fontMatrix||Sm,b=t.length,A=r.textRenderingMode===wn.INVISIBLE;let S,E,C,j;if(A||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(m,u);const N=this.dependencyTracker;for(this.dependencyTracker=N?new bd(N,e):null,S=0;S<b;++S){if(E=t[S],typeof E=="number"){j=h*E*l/1e3,this.ctx.translate(j,0),r.x+=j*m;continue}const M=(E.isSpace?g:0)+p,O=o.charProcOperatorList[E.operatorListId];O?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...y),this.executeOperatorList(O),this.restore()):We(`Type3 character "${E.operatorListId}" is not available.`);const P=[E.width,0];_e.applyTransform(P,y),C=P[0]*l+M,s.translate(C,0),r.x+=C*m}s.restore(),N&&(this.dependencyTracker=N)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,r,o,l,u){const h=new Path2D;h.rect(r,o,l-r,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(e,this.ctx,r,l,o,u).recordClipBox(e,this.ctx,r,l,o,u),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const r=this.baseTransform||Lt(this.ctx),o={createCanvasGraphics:(l,u)=>new co(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new bd(this.dependencyTracker,u,!0):null)};s=new kg(t,this.ctx,o,r)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=w3(this.getObject(e,t)),this.cachedPatterns.set(t,r)),s&&(r.matrix=s),r}shadingFill(e,t){if(!this.contentVisible)return;const s=this.ctx;this.save(e);const r=this._getPattern(e,t);s.fillStyle=r.getPattern(s,this,Ks(s),Sn.SHADING,e);const o=Ks(s);if(o){const{width:l,height:u}=s.canvas,h=so.slice();_e.axialAlignedBoundingBox([0,0,l,u],o,h);const[p,g,m,y]=h;this.ctx.fillRect(p,g,m-p,y-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,As.transform).recordDependencies(e,As.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Tt("Should not call beginInlineImage")}beginImageData(){Tt("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Lt(this.ctx),s)){_e.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,o,l,u]=s,h=new Path2D;h.rect(r,o,l-r,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(e,this.ctx,r,l,o,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||Kd("TODO: Support non-isolated groups."),t.knockout&&We("Knockout groups not supported.");const r=Lt(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=so.slice();_e.axialAlignedBoundingBox(t.bbox,Lt(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=_e.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),p=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,p,g]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,p,g),b=y.context;b.translate(-u,-h),b.transform(...r);let A=new Path2D;const[S,E,C,j]=t.bbox;if(A.rect(S,E,C-S,j-E),t.matrix){const N=new Path2D;N.addPath(A,new DOMMatrix(t.matrix)),A=N}b.clip(A),t.smask&&this.smaskStack.push({canvas:y.canvas,context:b,offsetX:u,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,h),s.save()),Dl(s,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Lt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=so.slice();_e.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,s,r,o,l){if(this.#e(),Gu(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],h=s[3]-s[1];if(l&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=h,_e.singularValueDecompose2dScale(Lt(this.ctx),as);const{viewportScale:p}=this,g=Math.ceil(u*this.outputScaleX*p),m=Math.ceil(h*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(g,m);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(as[0],0,0,-as[1],0,h*as[1]),Gu(this.ctx)}else{Gu(this.ctx),this.endPath(e);const p=new Path2D;p.rect(s[0],s[1],u,h),this.ctx.clip(p)}}this.current=new vw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...o)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const r=this.ctx,o=this._createMaskCanvas(e,t),l=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,r=0,o=0,l,u){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const h=this.ctx;h.save();const p=Lt(h);h.transform(s,r,o,l,0,0);const g=this._createMaskCanvas(e,t);h.setTransform(1,0,0,1,g.offsetX-p[4],g.offsetY-p[5]),this.dependencyTracker?.resetBBox(e);for(let m=0,y=u.length;m<y;m+=2){const b=_e.transform(p,[s,r,o,l,u[m],u[m+1]]);h.drawImage(g.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(e,this.ctx,b[4],b[4]+g.canvas.width,b[5],b[5]+g.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,As.transformAndFill);for(const l of t){const{data:u,width:h,height:p,transform:g}=l,m=this.cachedCanvases.getCanvas("maskCanvas",h,p),y=m.context;y.save();const b=this.getObject(e,u,l);xw(y,b),y.globalCompositeOperation="source-in",y.fillStyle=o?r.getPattern(y,this,Ks(s),Sn.FILL,e):r,y.fillRect(0,0,h,p),y.restore(),s.save(),s.transform(...g),s.scale(1,-1),$u(s,m.canvas,0,0,h,p,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,h,0,p),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){We("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,r,o){if(!this.contentVisible)return;const l=this.getObject(e,t);if(!l){We("Dependent image isn't ready yet");return}const u=l.width,h=l.height,p=[];for(let g=0,m=o.length;g<m;g+=2)p.push({transform:[s,0,0,r,o[g],o[g+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(e,l,p)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",s,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",o.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const s=t.width,r=t.height,o=this.ctx;this.save(e);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/r);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,r).context;yw(g,t),u=this.applyTransferMapsToCanvas(g)}const h=this._scaleImage(u,Ks(o));o.imageSmoothingEnabled=bw(Lt(o),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,o,0,s,-r,0).recordDependencies(e,As.imageXObject).recordOperation(e),$u(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,s,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){if(!this.contentVisible)return;const r=this.ctx;let o;if(t.bitmap)o=t.bitmap;else{const l=t.width,u=t.height,p=this.cachedCanvases.getCanvas("inlineImage",l,u).context;yw(p,t),o=this.applyTransferMapsToCanvas(p)}this.dependencyTracker?.resetBBox(e);for(const l of s)r.save(),r.transform(...l.transform),r.scale(1,-1),$u(r,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,As.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===ww?o.clip(t,"evenodd"):o.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Lt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:o}=this.ctx.getTransform();let l,u;if(s===0&&r===0){const h=Math.abs(t),p=Math.abs(o);if(h===p)if(e===0)l=u=1/h;else{const g=h*e;l=u=g<1?1/g:1}else if(e===0)l=1/h,u=1/p;else{const g=h*e,m=p*e;l=g<1?1/g:1,u=m<1?1/m:1}}else{const h=Math.abs(t*o-s*r),p=Math.hypot(t,s),g=Math.hypot(r,o);if(e===0)l=g/h,u=p/h;else{const m=e*h;l=g>m?g/m:1,u=p>m?p/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(r||1)*o,s.stroke(e);return}const u=s.getLineDash();t&&s.save(),s.scale(o,l),Qp.a=1/o,Qp.d=1/l;const h=new Path2D;if(h.addPath(e,Qp),u.length>0){const p=Math.max(o,l);s.setLineDash(u.map(g=>g/p)),s.lineDashOffset/=p}s.lineWidth=r||1,s.stroke(h),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const a in Co)co.prototype[a]!==void 0&&(co.prototype[Co[a]]=co.prototype[a]);class uo{#e;#t;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,s={};let r=0;for(const p of uo.strings){const g=t.encode(e[p]);s[p]=g,r+=4+g.length}const o=new ArrayBuffer(r),l=new Uint8Array(o),u=new DataView(o);let h=0;for(const p of uo.strings){const g=s[p],m=g.length;u.setUint32(h,m),l.set(g,h+4),h+=4+m}return ct(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}#n(e){ct(e<uo.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class ho{#e;#t;#s;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,s={};let r=0;for(const y of ho.strings){const b=t.encode(e[y]);s[y]=b,r+=4+b.length}r+=4;let o,l,u=1+r;e.style&&(o=t.encode(e.style.style),l=t.encode(e.style.weight),u+=4+o.length+4+l.length);const h=new ArrayBuffer(u),p=new Uint8Array(h),g=new DataView(h);let m=0;g.setUint8(m++,e.guessFallback?1:0),g.setUint32(m,0),m+=4,r=0;for(const y of ho.strings){const b=s[y],A=b.length;r+=4+A,g.setUint32(m,A),p.set(b,m+4),m+=4+A}return g.setUint32(m-r-4,r),e.style&&(g.setUint32(m,o.length),p.set(o,m+4),m+=4+o.length,g.setUint32(m,l.length),p.set(l,m+4),m+=4+l.length),ct(m<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(m)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){ct(e<ho.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),s=this.#s.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const r=this.#t.getUint32(e),o=this.#s.decode(new Uint8Array(this.#e,e+4,r));return{style:s,weight:o}}}class Ct{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#s=this.#t+1+8;static#n=this.#s+1+48;static#r=this.#n+1+6;#i;#a;#o;constructor({data:e,extra:t}){this.#i=e,this.#a=new TextDecoder,this.#o=new DataView(this.#i),t&&Object.assign(this,t)}#c(e){ct(e<Ct.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,r=this.#o.getUint8(t)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return ct(e<Ct.numbers.length,"Invalid number index"),this.#o.getFloat64(Ct.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=Ct.#t;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=Ct.#s;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#o.getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=Ct.#n;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}#h(e){ct(e<Ct.strings.length,"Invalid string index");let t=Ct.#r+4;for(let o=0;o<e;o++)t+=this.#o.getUint32(t)+4;const s=this.#o.getUint32(t),r=new Uint8Array(s);return r.set(new Uint8Array(this.#i,t+4,s)),this.#a.decode(r)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=Ct.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);e+=4+r;const o=this.#o.getUint32(e);if(o!==0)return new Uint8Array(this.#i,e+4,o)}clearData(){let e=Ct.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);e+=4+r;const o=this.#o.getUint32(e);new Uint8Array(this.#i,e+4,o).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=Ct.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#i,e+4,r)),new uo(o.buffer)}get systemFontInfo(){let e=Ct.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#i,e+4,s)),new ho(r.buffer)}static write(e){const t=e.systemFontInfo?ho.write(e.systemFontInfo):null,s=e.cssFontInfo?uo.write(e.cssFontInfo):null,r=new TextEncoder,o={};let l=0;for(const S of Ct.strings)o[S]=r.encode(e[S]),l+=4+o[S].length;const u=Ct.#r+4+l+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(u),p=new Uint8Array(h),g=new DataView(h);let m=0;const y=Ct.bools.length;let b=0,A=0;for(let S=0;S<y;S++){const E=e[Ct.bools[S]];b|=(E===void 0?0:E?2:1)<<A,A+=2,(A===8||S===y-1)&&(g.setUint8(m++,b),b=0,A=0)}ct(m===Ct.#e,"FontInfo.write: Boolean properties offset mismatch");for(const S of Ct.numbers)g.setFloat64(m,e[S]),m+=8;if(ct(m===Ct.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){g.setUint8(m++,4);for(const S of e.bbox)g.setInt16(m,S,!0),m+=2}else g.setUint8(m++,0),m+=8;if(ct(m===Ct.#s,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){g.setUint8(m++,6);for(const S of e.fontMatrix)g.setFloat64(m,S,!0),m+=8}else g.setUint8(m++,0),m+=48;if(ct(m===Ct.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){g.setUint8(m++,1);for(const S of e.defaultVMetrics)g.setInt16(m,S,!0),m+=2}else g.setUint8(m++,0),m+=6;ct(m===Ct.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Ct.#r,0),m+=4;for(const S of Ct.strings){const E=o[S],C=E.length;g.setUint32(m,C),p.set(E,m+4),m+=4+C}if(g.setUint32(Ct.#r,m-Ct.#r-4),!t)g.setUint32(m,0),m+=4;else{const S=t.byteLength;g.setUint32(m,S),ct(m+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(t),m+4),m+=4+S}if(!s)g.setUint32(m,0),m+=4;else{const S=s.byteLength;g.setUint32(m,S),ct(m+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(s),m+4),m+=4+S}return e.data===void 0?(g.setUint32(m,0),m+=4):(g.setUint32(m,e.data.length),p.set(e.data,m+4),m+=4+e.data.length),ct(m<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(m)}}class wa{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class j3{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const no=Symbol("INTERNAL");class M3{#e=!1;#t=!1;#s=!1;#n=!0;constructor(e,{name:t,intent:s,usage:r,rbGroups:o}){this.#e=!!(e&ss.DISPLAY),this.#t=!!(e&ss.PRINT),this.name=t,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,s=!1){e!==no&&Tt("Internal method `_setVisible` called."),this.#s=s,this.#n=t}}class R3{#e=null;#t=new Map;#s=null;#n=null;constructor(e,t=ss.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const s of e.groups)this.#t.set(s.id,new M3(t,s));if(e.baseState==="OFF")for(const s of this.#t.values())s._setVisible(no,!1);for(const s of e.on)this.#t.get(s)._setVisible(no,!0);for(const s of e.off)this.#t.get(s)._setVisible(no,!1);this.#s=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const o=e[r];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#t.has(o))l=this.#t.get(o).visible;else return We(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Kd("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(We(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#r(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return We(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return We(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return We(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return We(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return We(`Unknown optional content policy ${e.policy}.`),!0}return We(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){const r=this.#t.get(e);if(!r){We(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==e&&this.#t.get(l)?._setVisible(no,!1,!0);r._setVisible(no,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#t.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!o.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new TC;for(const[t,s]of this.#t)e.update(`${t}:${s.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class D3{constructor(e,{disableRange:t=!1,disableStream:s=!1}){ct(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,p)=>{this._onReceiveData({begin:h,chunk:p})}),e.addProgressListener((h,p)=>{this._onProgress({loaded:h,total:p})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(s),!0)});ct(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ct(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new k3(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new O3(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class k3{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=Zd(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class O3{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function L3(a){let e=!0,t=s("filename\\*","i").exec(a);if(t){t=t[1];let g=u(t);return g=unescape(g),g=h(g),g=p(g),o(g)}if(t=l(a),t){const g=p(t);return o(g)}if(t=s("filename","i").exec(a),t){t=t[1];let g=u(t);return g=p(g),o(g)}function s(g,m){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(g,m){if(g){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(g,{fatal:!0}),b=cc(m);m=y.decode(b),e=!1}catch{}}return m}function o(g){return e&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),e&&(g=r("iso-8859-1",g))),g}function l(g){const m=[];let y;const b=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=b.exec(g))!==null;){let[,S,E,C]=y;if(S=parseInt(S,10),S in m){if(S===0)break;continue}m[S]=[E,C]}const A=[];for(let S=0;S<m.length&&S in m;++S){let[E,C]=m[S];C=u(C),E&&(C=unescape(C),S===0&&(C=h(C))),A.push(C)}return A.join("")}function u(g){if(g.startsWith('"')){const m=g.slice(1).split('\\"');for(let y=0;y<m.length;++y){const b=m[y].indexOf('"');b!==-1&&(m[y]=m[y].slice(0,b),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}g=m.join('"')}return g}function h(g){const m=g.indexOf("'");if(m===-1)return g;const y=g.slice(0,m),A=g.slice(m+1).replace(/^[^']*'/,"");return r(y,A)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,b,A){if(b==="q"||b==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,E){return String.fromCharCode(parseInt(E,16))}),r(y,A);try{A=atob(A)}catch{}return r(y,A)})}return""}function LC(a,e){const t=new Headers;if(!a||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function Jd(a){return URL.parse(a)?.origin??null}function PC({responseHeaders:a,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(a.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||s||!e||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function IC(a){const e=a.get("Content-Disposition");if(e){let t=L3(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Zd(t))return t}return null}function pc(a,e){return new Zl(`Unexpected server response (${a}) while retrieving PDF "${e}".`,a,a===404||a===0&&e.startsWith("file:"))}function BC(a){return a===200||a===206}function zC(a,e,t){return{method:"GET",headers:a,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function FC(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(We(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class P3{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=LC(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ct(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new I3(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new B3(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class I3{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,zC(s,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=Jd(o.url),!BC(o.status))throw pc(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:h}=PC({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=IC(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Hi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:FC(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class B3{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${s-1}`);const l=r.url;fetch(l,zC(o,this._withCredentials,this._abortController)).then(u=>{const h=Jd(u.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!BC(u.status))throw pc(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:FC(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Zp=200,Jp=206;function z3(a){const e=a.response;return typeof e!="string"?e:cc(e).buffer}class F3{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=LC(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,l]of this.headers)t.setRequestHeader(o,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Jp):r.expectedStatus=Zp,t.responseType="arraybuffer",ct(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){const s=this.pendingRequests[e];s&&s.onProgress?.(t)}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const o=r.status||Zp;if(!(o===Zp&&s.expectedStatus===Jp)&&o!==s.expectedStatus){s.onError(r.status);return}const u=z3(r);if(o===Jp){const h=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);p?s.onDone({begin:parseInt(p[1],10),chunk:u}):(We('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class H3{constructor(e){this._source=e,this._manager=new F3(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ct(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new U3(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new V3(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class U3{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Jd(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...p]=u.split(": ");return[h,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=PC({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=IC(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=pc(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class V3{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Jd(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=pc(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const $3=/^[a-z][a-z0-9\-+.]+:/i;function G3(a){if($3.test(a))return new URL(a);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(a))}class q3{constructor(e){this.source=e,this.url=G3(e.url),ct(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ct(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Y3(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new X3(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Y3{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=pc(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Hi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class X3{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const kl=Symbol("INITIAL_DATA");class HC{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:kl}}get(e,t=null){if(t){const r=this.#t(e);return r.promise.then(()=>t(r.data)),null}const s=this.#e[e];if(!s||s.data===kl)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=this.#e[e];return!!t&&t.data!==kl}delete(e){const t=this.#e[e];return!t||t.data===kl?!1:(delete this.#e[e],!0)}resolve(e,t=null){const s=this.#t(e);s.data=t,s.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==kl&&(yield[e,t])}}}const W3=1e5,Sw=30;let ec=class Cs{#e=Promise.withResolvers();#t=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#i=null;#a=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#v=null;static#x=new Map;static#y=new Map;static#E=new WeakMap;static#A=null;static#b=new Set;constructor({textContentSource:e,container:t,viewport:s}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(h){h.enqueue(e),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=s.scale*Fs.pixelRatio,this.#h=s.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:l,pageY:u}=s.rawDims;this.#v=[1,0,0,-1,-l,u+o],this.#o=r,this.#a=o,Cs.#j(),_a(t,s),this.#e.promise.finally(()=>{Cs.#b.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=pn.platform;return Je(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:s})=>{if(s){this.#e.resolve();return}this.#r??=t.lang,Object.assign(this.#f,t.styles),this.#T(t.items),e()},this.#e.reject)};return this.#c=this.#p.getReader(),Cs.#b.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const s=e.scale*Fs.pixelRatio,r=e.rotation;if(r!==this.#h&&(t?.(),this.#h=r,_a(this.#l,{rotation:r})),s!==this.#d){t?.(),this.#d=s;const o={div:null,properties:null,ctx:Cs.#M(this.#r)};for(const l of this.#u)o.properties=this.#m.get(l),o.div=l,this.#C(o)}}cancel(){const e=new Hi("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(e){if(this.#s)return;this.#i.ctx??=Cs.#M(this.#r);const t=this.#u,s=this.#g;for(const r of e){if(t.length>W3){We("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),r.id&&this.#t.setAttribute("id",`${r.id}`),o.append(this.#t)}else r.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}s.push(r.str),this.#S(r)}}#S(e){const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const r=_e.transform(this.#v,e.transform);let o=Math.atan2(r[1],r[0]);const l=this.#f[e.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=Cs.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),p=h*Cs.#I(u,l,this.#r);let g,m;o===0?(g=r[4],m=r[5]-p):(g=r[4]+p*Math.sin(o),m=r[5]-p*Math.cos(o));const y="calc(var(--total-scale-factor) *",b=t.style;this.#t===this.#l?(b.left=`${(100*g/this.#o).toFixed(2)}%`,b.top=`${(100*m/this.#a).toFixed(2)}%`):(b.left=`${y}${g.toFixed(2)}px)`,b.top=`${y}${m.toFixed(2)}px)`),b.fontSize=`${y}${(Cs.#A*h).toFixed(2)}px)`,b.fontFamily=u,s.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),o!==0&&(s.angle=o*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);S!==E&&Math.max(S,E)/Math.min(S,E)>1.5&&(A=!0)}if(A&&(s.canvasWidth=l.vertical?e.height:e.width),this.#m.set(t,s),this.#i.div=t,this.#i.properties=s,this.#C(this.#i),s.hasText&&this.#t.append(t),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#t.append(S)}}#C(e){const{div:t,properties:s,ctx:r}=e,{style:o}=t;let l="";if(Cs.#A>1&&(l=`scale(${1/Cs.#A})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:h,fontSize:p}=s;Cs.#N(r,p*this.#d,u);const{width:g}=r.measureText(t.textContent);g>0&&(l=`scaleX(${h*this.#d/g}) ${l}`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#b.size>0)){this.#x.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#M(e=null){let t=this.#y.get(e||="");if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#N(e,t,s){const r=this.#E.get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)}static#j(){if(this.#A!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#A=e.getBoundingClientRect().height,e.remove()}static#I(e,t,s){const r=this.#x.get(e);if(r)return r;const o=this.#M(s);o.canvas.width=o.canvas.height=Sw,this.#N(o,Sw,e);const l=o.measureText(""),u=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return u?p=u/(u+h):(pn.platform.isFirefox&&We("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?p=t.ascent:t.descent&&(p=1+t.descent)),this.#x.set(e,p),p}};const K3=100;function Og(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const e=new Lg,{docId:t}=e,s=a.url?i3(a.url):null,r=a.data?a3(a.data):null,o=a.httpHeaders||null,l=a.withCredentials===!0,u=a.password??null,h=a.range instanceof Pg?a.range:null,p=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:2**16;let g=a.worker instanceof Eo?a.worker:null;const m=a.verbosity,y=typeof a.docBaseUrl=="string"&&!dc(a.docBaseUrl)?a.docBaseUrl:null,b=Fu(a.cMapUrl),A=a.cMapPacked!==!1,S=a.CMapReaderFactory||(Rn?h3:lw),E=Fu(a.iccUrl),C=Fu(a.standardFontDataUrl),j=a.StandardFontDataFactory||(Rn?f3:cw),N=Fu(a.wasmUrl),M=a.WasmFactory||(Rn?p3:uw),O=a.stopAtErrors!==!0,P=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,L=a.isEvalSupported!==!1,B=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!Rn,F=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!Rn&&(pn.platform.isFirefox||!globalThis.chrome),$=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,Y=typeof a.disableFontFace=="boolean"?a.disableFontFace:Rn,te=a.fontExtraProperties===!0,oe=a.enableXfa===!0,ie=a.ownerDocument||globalThis.document,fe=a.disableRange===!0,R=a.disableStream===!0,U=a.disableAutoFetch===!0,H=a.pdfBug===!0,z=a.CanvasFactory||(Rn?d3:l3),se=a.FilterFactory||(Rn?u3:c3),T=a.enableHWA===!0,k=a.useWasm!==!1,I=h?h.length:a.length??NaN,q=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!Rn&&!Y,X=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:!!(S===lw&&j===cw&&M===uw&&b&&C&&N&&zl(b,document.baseURI)&&zl(C,document.baseURI)&&zl(N,document.baseURI)),ce=null;z4(m);const Q={canvasFactory:new z({ownerDocument:ie,enableHWA:T}),filterFactory:new se({docId:t,ownerDocument:ie}),cMapReaderFactory:X?null:new S({baseUrl:b,isCompressed:A}),standardFontDataFactory:X?null:new j({baseUrl:C}),wasmFactory:X?null:new M({baseUrl:N})};g||(g=Eo.create({verbosity:m,port:wa.workerPort}),e._worker=g);const ue={docId:t,apiVersion:"5.4.296",data:r,password:u,disableAutoFetch:U,rangeChunkSize:p,length:I,docBaseUrl:y,enableXfa:oe,evaluatorOptions:{maxImageSize:P,disableFontFace:Y,ignoreErrors:O,isEvalSupported:L,isOffscreenCanvasSupported:B,isImageDecoderSupported:F,canvasMaxAreaInBytes:$,fontExtraProperties:te,useSystemFonts:q,useWasm:k,useWorkerFetch:X,cMapUrl:b,iccUrl:E,standardFontDataUrl:C,wasmUrl:N}},pe={ownerDocument:ie,pdfBug:H,styleElement:ce,loadingParams:{disableAutoFetch:U,enableXfa:oe}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Ce=g.messageHandler.sendWithPromise("GetDocRequest",ue,r?[r.buffer]:null);let ye;if(h)ye=new D3(h,{disableRange:fe,disableStream:R});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Ne=zl(s)?P3:Rn?q3:H3;ye=new Ne({url:s,length:I,httpHeaders:o,withCredentials:l,rangeChunkSize:p,disableRange:fe,disableStream:R})}return Ce.then(Ne=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Be=new Fl(t,Ne,g.port),De=new J3(Be,e,ye,pe,Q,T);e._transport=De,Be.send("Ready",null)})}).catch(e._capability.reject),e}class Lg{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Lg.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Pg=class{#e=Promise.withResolvers();#t=[];#s=[];#n=[];#r=[];constructor(e,t,s=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){this.#r.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#s.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const s of this.#r)s(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const s of this.#n)s(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#s)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){Tt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Q3{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Je(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Z3{#e=!1;constructor(e,t,s,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new tw:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new HC,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new uc({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Je(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:r="display",annotationMode:o=si.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:p=null,pageColors:g=null,printAnnotationStorage:m=null,isEditing:y=!1,recordOperations:b=!1,operationsFilter:A=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,o,m,y),{renderingIntent:E,cacheKey:C}=S;this.#e=!1,h||=this._transport.getOptionalContentConfig(E);let j=this._intentStates.get(C);j||(j=Object.create(null),this._intentStates.set(C,j)),j.streamReaderCancelTimeout&&(clearTimeout(j.streamReaderCancelTimeout),j.streamReaderCancelTimeout=null);const N=!!(E&ss.PRINT);j.displayReadyCapability||(j.displayReadyCapability=Promise.withResolvers(),j.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const M=!!(this._pdfBug&&globalThis.StepperManager?.enabled),O=!this.recordedBBoxes&&(b||M),P=F=>{if(j.renderTasks.delete(L),O){const $=L.gfx?.dependencyTracker.take();$&&(L.stepper&&L.stepper.setOperatorBBoxes($,L.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=$))}N&&(this.#e=!0),this.#t(),F?(L.capability.reject(F),this._abortOperatorList({intentState:j,reason:F instanceof Error?F:new Error(F)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new io({callback:P,params:{canvas:t,canvasContext:e,dependencyTracker:O?new g3(t,j.operatorList.length,M):null,viewport:s,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:j.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:A});(j.renderTasks||=new Set).add(L);const B=L.task;return Promise.all([j.displayReadyCapability.promise,h]).then(([F,$])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!($.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:F,optionalContentConfig:$}),L.operatorListChanged()}).catch(P),B}getOperatorList({intent:e="display",annotationMode:t=si.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(e,t,s,r,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Jl.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function o(){l.read().then(function({value:h,done:p}){if(p){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},r)}const l=t.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new tw),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const s=this._intentStates.get(t);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:l}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:r},l).getReader(),p=this._intentStates.get(t);p.streamReader=h;const g=()=>{h.read().then(({value:m,done:y})=>{if(y){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,p),g())},m=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const y of p.renderTasks)y.operatorListChanged();this.#t()}if(p.displayReadyCapability)p.displayReadyCapability.reject(m);else if(p.opListReadCapability)p.opListReadCapability.reject(m);else throw m}})};g()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Qd){let r=K3;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Hi(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var xa,ks,ki,Za,Ad,Ja,er,Dn,sd,UC,VC,Hl,mo,id;const kt=class kt{constructor({name:e=null,port:t=null,verbosity:s=F4()}={}){Ys(this,Dn);Ys(this,xa,Promise.withResolvers());Ys(this,ks,null);Ys(this,ki,null);Ys(this,Za,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(Dt(kt,er).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Dt(kt,er).set(t,this),Xs(this,Dn,UC).call(this,t)}else Xs(this,Dn,VC).call(this)}get promise(){return Dt(this,xa).promise}get port(){return Dt(this,ki)}get messageHandler(){return Dt(this,ks)}destroy(){this.destroyed=!0,Dt(this,Za)?.terminate(),Un(this,Za,null),Dt(kt,er).delete(Dt(this,ki)),Un(this,ki,null),Dt(this,ks)?.destroy(),Un(this,ks,null)}static create(e){const t=Dt(this,er).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new kt(e)}static get workerSrc(){if(wa.workerSrc)return wa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Je(this,"_setupFakeWorkerGlobal",(async()=>Dt(this,mo,id)?Dt(this,mo,id):(await import(this.workerSrc)).WorkerMessageHandler)())}};xa=new WeakMap,ks=new WeakMap,ki=new WeakMap,Za=new WeakMap,Ad=new WeakMap,Ja=new WeakMap,er=new WeakMap,Dn=new WeakSet,sd=function(){Dt(this,xa).resolve(),Dt(this,ks).send("configure",{verbosity:this.verbosity})},UC=function(e){Un(this,ki,e),Un(this,ks,new Fl("main","worker",e)),Dt(this,ks).on("ready",()=>{}),Xs(this,Dn,sd).call(this)},VC=function(){if(Dt(kt,Ja)||Dt(kt,mo,id)){Xs(this,Dn,Hl).call(this);return}let{workerSrc:e}=kt;try{kt._isSameOrigin(window.location,e)||(e=kt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Fl("main","worker",t),r=()=>{o.abort(),s.destroy(),t.terminate(),this.destroyed?Dt(this,xa).reject(new Error("Worker was destroyed")):Xs(this,Dn,Hl).call(this)},o=new AbortController;t.addEventListener("error",()=>{Dt(this,Za)||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}Un(this,ks,s),Un(this,ki,t),Un(this,Za,t),Xs(this,Dn,sd).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{Xs(this,Dn,Hl).call(this)}});const l=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};l();return}catch{Kd("The worker has been disabled.")}Xs(this,Dn,Hl).call(this)},Hl=function(){Dt(kt,Ja)||(We("Setting up fake worker."),Un(kt,Ja,!0)),kt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Dt(this,xa).reject(new Error("Worker was destroyed"));return}const t=new o3;Un(this,ki,t);const s=`fake${Hb(kt,Ad)._++}`,r=new Fl(s+"_worker",s,t);e.setup(r,t),Un(this,ks,new Fl(s,s+"_worker",t)),Xs(this,Dn,sd).call(this)}).catch(e=>{Dt(this,xa).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},mo=new WeakSet,id=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ys(kt,mo),Ys(kt,Ad,0),Ys(kt,Ja,!1),Ys(kt,er,new WeakMap),Rn&&(Un(kt,Ja,!0),wa.workerSrc||="./pdf.worker.mjs"),kt._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!s?.origin||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},kt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},kt.fromPort=e=>{if(W4("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return kt.create(e)};let Eo=kt;class J3{#e=new Map;#t=new Map;#s=new Map;#n=new Map;#r=null;constructor(e,t,s,r,o,l){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new HC,this.fontLoader=new n3({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#i(e,t=null){const s=this.#e.get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,r),r}get annotationStorage(){return Je(this,"annotationStorage",new Mg)}getRenderingIntent(e,t=si.ENABLE,s=null,r=!1,o=!1){let l=ss.DISPLAY,u=Cm;switch(e){case"any":l=ss.ANY;break;case"display":break;case"print":l=ss.PRINT;break;default:We(`getRenderingIntent - invalid intent: ${e}`)}const h=l&ss.PRINT&&s instanceof NC?s:this.annotationStorage;switch(t){case si.DISABLE:l+=ss.ANNOTATIONS_DISABLE;break;case si.ENABLE:break;case si.ENABLE_FORMS:l+=ss.ANNOTATIONS_FORMS;break;case si.ENABLE_STORAGE:l+=ss.ANNOTATIONS_STORAGE,u=h.serializable;break;default:We(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(l+=ss.IS_EDITING),o&&(l+=ss.OPLIST);const{ids:p,hash:g}=h.modifiedIds,m=[l,u.hash,g];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),ec.cleanup(),this._networkStream?.cancelAllRequests(new Hi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{ct(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}ct(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{t.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),e.on("GetRangeReader",(s,r)=>{ct(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){r.close();return}ct(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new Q3(s,this))}),e.on("DocException",s=>{t._capability.reject(Vn(s))}),e.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!t.onPassword)throw Vn(s);const r=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};t.onPassword(r,s.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),e.on("DataLoaded",s=>{t.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in o){const g=o.error;We(`Error during font loading: ${g}`),this.commonObjs.resolve(s,g);break}const l=new Ct(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,m)=>globalThis.FontInspector.fontAdded(g,m):null,h=new s3(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:p}=o;ct(p,"The imageRef must be defined.");for(const g of this.#t.values())for(const[,m]of g.objs)if(m?.ref===p)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,o,l])=>{if(this.destroyed)return;const u=this.#t.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",s=>{this.destroyed||t.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&We("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=this.#s.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,e);const l=new Z3(t,o,this,this._params.pdfBug);return this.#t.set(t,l),l});return this.#s.set(t,r),r}getPageIndex(e){return Em(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new R3(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new j3(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),ec.cleanup()}}cachedPageNumber(e){if(!Em(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class eI{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class io{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:h,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:m=!1,pageColors:y=null,enableHWA:b=!1,operationsFilter:A=null}){this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=p,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new eI(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=b,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(io.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");io.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new co(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),io.#t.delete(this._canvas),e||=new Qd(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),io.#t.delete(this._canvas),this.callback())))}}const Ig="5.4.296",$C="f56dc8601";class is{#e=null;#t=null;#s;#n=null;#r=!1;#i=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Je(this,"_keyboardManager",new hc([[["Escape","mac+Escape"],is.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],is.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],is.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],is.prototype._moveToPrevious],[["Home","mac+Home"],is.prototype._moveToBeginning],[["End","mac+End"],is.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#a=e):this.#i=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#s=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",is.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#a&&(e.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#p.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const s=this.#t=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#s,e.append(s),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",ls,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(e.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",is.#h[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.ariaSelected=r===this.#s,o.addEventListener("click",this.#f.bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:rt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#p(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#m){this.#p(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#p(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#p(e);return}this.#n.lastChild?.focus()}#g(e){is._keyboardManager.exec(this,e)}#p(e){if(this.#m){this.hideDropdown();return}if(this.#r=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#m){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class tc{#e=null;#t=null;#s=null;static#n=null;constructor(e){this.#t=e,this.#s=e._uiManager,tc.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:s}=this.#t,r=this.#e=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",tc.#n[e]),r.addEventListener("input",()=>{this.#s.updateParams(t,r.value)},{signal:this.#s._signal}),r}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function Aw(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function Ol(a){return Math.max(0,Math.min(255,255*a))}class Cw{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ol(e),[e,e,e]}static G_HTML([e]){const t=Aw(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Ol)}static RGB_HTML(e){return`#${e.map(Aw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[Ol(1-Math.min(1,e+r)),Ol(1-Math.min(1,s+r)),Ol(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,o=1-t,l=1-s,u=Math.min(r,o,l);return["CMYK",r,o,l,u]}}class tI{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Tt("Abstract method `_createSVG` called.")}}class nc extends tI{_createSVG(e){return document.createElementNS(Di,e)}}const nI=9,rr=new WeakSet,sI=new Date().getTimezoneOffset()*60*1e3;class Ew{static create(e){switch(e.data.annotationType){case $t.LINK:return new Bg(e);case $t.TEXT:return new aI(e);case $t.WIDGET:switch(e.data.fieldType){case"Tx":return new rI(e);case"Btn":return e.data.radioButton?new GC(e):e.data.checkBox?new lI(e):new cI(e);case"Ch":return new uI(e);case"Sig":return new oI(e)}return new dr(e);case $t.POPUP:return new Nm(e);case $t.FREETEXT:return new qC(e);case $t.LINE:return new hI(e);case $t.SQUARE:return new fI(e);case $t.CIRCLE:return new pI(e);case $t.POLYLINE:return new YC(e);case $t.CARET:return new gI(e);case $t.INK:return new zg(e);case $t.POLYGON:return new mI(e);case $t.HIGHLIGHT:return new XC(e);case $t.UNDERLINE:return new vI(e);case $t.SQUIGGLY:return new yI(e);case $t.STRIKEOUT:return new xI(e);case $t.STAMP:return new WC(e);case $t.FILEATTACHMENT:return new bI(e);default:return new It(e)}}}class It{#e=null;#t=!1;#s=null;constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return It._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:r}=this.data;let o=-1/0,l=-1/0;if(t?.length>=8){for(let u=0;u<t.length;u+=8)t[u+1]>l?(l=t[u+1],o=t[u+2]):t[u+1]===l&&(o=Math.max(o,t[u+2]));return[o,l]}if(s?.length>=1){for(const u of s)for(let h=0,p=u.length;h<p;h+=2)u[h+1]>l?(l=u[h+1],o=u[h]):u[h+1]===l&&(o=Math.max(o,u[h]));if(o!==1/0)return[o,l]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:l}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-o)/s,e[1]=100*(e[1]-l)/r,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Ql}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${Ql}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:s}=e;t&&this.#n(t);let r=this.#s?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#s.popup),r&&(r.updateEdited(e),s?.deleted&&(r.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#s?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...e),t.left=`${100*(e[0]-u)/o}%`,t.top=`${100*(l-e[3]+h)/l}%`,r===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/l}%`):this.setRotation(r)}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),!(this instanceof dr)&&!(this instanceof Bg)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof Nm){const{rotation:S}=t;return!t.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:h}=this;if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const S=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(S>0||E>0){const j=`calc(${S}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;l.borderRadius=j}else if(this instanceof GC){const j=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=j}switch(t.borderStyle.style){case to.SOLID:l.borderStyle="solid";break;case to.DASHED:l.borderStyle="dashed";break;case to.BEVELED:We("Unimplemented border style: beveled");break;case to.INSET:We("Unimplemented border style: inset");break;case to.UNDERLINE:l.borderBottomStyle="solid";break}const C=t.borderColor||null;C?(this.#t=!0,l.borderColor=_e.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):l.borderWidth=0}const p=_e.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:m,pageX:y,pageY:b}=r.rawDims;l.left=`${100*(p[0]-y)/g}%`,l.top=`${100*(p[1]-b)/m}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(l.width=`${100*u/g}%`,l.height=`${100*h/m}%`):this.setRotation(A,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:l}=this;e%180!==0&&([o,l]=[l,o]),t.style.width=`${100*o/s}%`,t.style.height=`${100*l/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const o=r.detail[t],l=o[0],u=o.slice(1);r.target.style[s]=Cw[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Cw[`${l}_rgb`](u)})};return Je(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail))(e[r]||s[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,o]of Object.entries(t)){const l=s[r];if(l){const u={detail:{[r]:o},target:e};l(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,o]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,E,C,j]=e.subarray(2,6);if(r===S&&o===E&&t===C&&s===j)return}const{style:l}=this.container;let u;if(this.#t){const{borderColor:S,borderWidth:E}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const h=r-t,p=o-s,{svgFactory:g}=this,m=g.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const y=g.createElement("defs");m.append(y);const b=g.createElement("clipPath"),A=`clippath_${this.data.id}`;b.setAttribute("id",A),b.setAttribute("clipPathUnits","objectBoundingBox"),y.append(b);for(let S=2,E=e.length;S<E;S+=8){const C=e[S],j=e[S+1],N=e[S+2],M=e[S+3],O=g.createElement("rect"),P=(N-t)/h,L=(o-j)/p,B=(C-N)/h,F=(j-M)/p;O.setAttribute("x",P),O.setAttribute("y",L),O.setAttribute("width",B),O.setAttribute("height",F),b.append(O),u?.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${L}" width="${B}" height="${F}"/>`)}this.#t&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(e=null){const{data:t}=this;let s,r;e?(s={str:e.text},r=e.date):(s=t.contentsObj,r=t.modificationDate);const o=this.#s=new Nm({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){Tt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:o,id:l,exportValues:u}of r){if(o===-1||l===t)continue;const h=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${l}"]`);if(p&&!rr.has(p)){We(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:h,domElement:p})}return s}for(const r of document.getElementsByName(e)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==t&&rr.has(r)&&s.push({id:l,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class iI extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Bg extends It{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),r=!0):e.attachment?(this.#t(s,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(this.#s(s,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,s=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),s&&(e.title=s)}_bindNamedAction(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),s&&(e.title=s),this.#e()}#t(e,t,s="",r=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:s&&(e.title=s),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#s(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),s&&(e.title=s),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const o=s.get(r);o&&(e[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){We('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{s?.();const{fields:r,refs:o,include:l}=t,u=[];if(r.length!==0||o.length!==0){const g=new Set(o);for(const m of r){const y=this._fieldObjects[m]||[];for(const{id:b}of y)g.add(b)}for(const m of Object.values(this._fieldObjects))for(const y of m)g.has(y.id)===l&&u.push(y)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const h=this.annotationStorage,p=[];for(const g of u){const{id:m}=g;switch(p.push(m),g.type){case"text":{const b=g.defaultValue||"";h.setValue(m,{value:b});break}case"checkbox":case"radiobutton":{const b=g.defaultValue===g.exportValues;h.setValue(m,{value:b});break}case"combobox":case"listbox":{const b=g.defaultValue||"";h.setValue(m,{value:b});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!rr.has(y)){We(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class aI extends It{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class dr extends It{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return pn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,o){s.includes("mouse")?e.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(s,l=>{if(s==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}})})}_setEventListeners(e,t,s,r){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,o,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":_e.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||nI,o=e.style;let l;const u=2,h=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(p/(qp*r))||1,m=p/g;l=Math.min(r,h(m/qp))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(r,h(p/qp))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=_e.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class rI extends dr{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const o=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=s),o.setValue(l.id,{[r]:s})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let o=r.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),rr.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:p,datetimeType:g,timeStep:m}=this.data,y=!!g&&this.enableScripting;p&&(s.title=p),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(s,"value",A.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",A=>{const S=this.data.defaultFieldValue??"";s.value=h.userValue=S,h.formattedValue=null});let b=A=>{const{formattedValue:S}=h;S!=null&&(A.target.value=S),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(h.focused)return;const{target:E}=S;if(y&&(E.type=g,m&&(E.step=m)),h.userValue){const C=h.userValue;if(y)if(g==="time"){const j=new Date(C),N=[j.getHours(),j.getMinutes(),j.getSeconds()];E.value=N.map(M=>M.toString().padStart(2,"0")).join(":")}else E.value=new Date(C-sI).toISOString().split(g==="date"?"T":".",1)[0];else E.value=C}h.lastCommittedValue=E.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const E={value(C){h.userValue=C.detail.value??"",y||e.setValue(t,{value:h.userValue.toString()}),C.target.value=h.userValue},formattedValue(C){const{formattedValue:j}=C.detail;h.formattedValue=j,j!=null&&C.target!==document.activeElement&&(C.target.value=j);const N={formattedValue:j};y&&(N.value=j),e.setValue(t,N)},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{const{charLimit:j}=C.detail,{target:N}=C;if(j===0){N.removeAttribute("maxLength");return}N.setAttribute("maxLength",j);let M=h.userValue;!M||M.length<=j||(M=M.slice(0,j),N.value=h.userValue=M,e.setValue(t,{value:M}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:N.selectionStart,selEnd:N.selectionEnd}}))}};this._dispatchEventFromSandbox(E,S)}),s.addEventListener("keydown",S=>{h.commitKey=1;let E=-1;if(S.key==="Escape"?E=0:S.key==="Enter"&&!this.data.multiLine?E=2:S.key==="Tab"&&(h.commitKey=3),E===-1)return;const{value:C}=S.target;h.lastCommittedValue!==C&&(h.lastCommittedValue=C,h.userValue=C,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:E,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const A=b;b=null,s.addEventListener("blur",S=>{if(!h.focused||!S.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:E}=S;let{value:C}=E;if(y){if(C&&g==="time"){const j=C.split(":").map(N=>parseInt(N,10));C=new Date(2e3,0,1,j[0],j[1],j[2]||0).valueOf(),E.step=""}else C.includes("T")||(C=`${C}T00:00`),C=new Date(C).valueOf();E.type="text"}h.userValue=C,h.lastCommittedValue!==C&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:h.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),A(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{h.lastCommittedValue=null;const{data:E,target:C}=S,{value:j,selectionStart:N,selectionEnd:M}=C;let O=N,P=M;switch(S.inputType){case"deleteWordBackward":{const L=j.substring(0,N).match(/\w*[^\w]*$/);L&&(O-=L[0].length);break}case"deleteWordForward":{const L=j.substring(N).match(/^[^\w]*\w*/);L&&(P+=L[0].length);break}case"deleteContentBackward":N===M&&(O-=1);break;case"deleteContentForward":N===M&&(P+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:j,change:E||"",willCommit:!1,selStart:O,selEnd:P}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(b&&s.addEventListener("blur",b),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class oI extends dr{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class lI extends dr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return rr.add(o),o.setAttribute("data-element-id",s),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const p of this._getElementsByName(u,s)){const g=h&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}e.setValue(s,{value:h})}),o.addEventListener("resetform",l=>{const u=t.defaultFieldValue||"Off";l.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class GC extends dr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const l of this._getElementsByName(t.fieldName,s))e.setValue(l.id,{value:!1});const o=document.createElement("input");if(rr.add(o),o.setAttribute("data-element-id",s),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const p of this._getElementsByName(u,s))e.setValue(p.id,{value:!1});e.setValue(s,{value:h})}),o.addEventListener("resetform",l=>{const u=t.defaultFieldValue;l.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:p=>{const g=l===p.detail.value;for(const m of this._getElementsByName(p.target.name)){const y=g&&m.id===s;m.domElement&&(m.domElement.checked=y),e.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class cI extends Bg{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class uI extends dr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");rr.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const m=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===m});for(const g of this.data.options){const m=document.createElement("option");m.textContent=g.displayValue,m.value=g.exportValue,s.value.includes(g.exportValue)&&(m.setAttribute("selected",!0),o=!1),r.append(m)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),l=()=>{g.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const u=g=>{const m=g?"value":"textContent",{options:y,multiple:b}=r;return b?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let h=u(!1);const p=g=>{const m=g.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const m={value(y){l?.();const b=y.detail.value,A=new Set(Array.isArray(b)?b:[b]);for(const S of r.options)S.selected=A.has(S.value);e.setValue(t,{value:u(!0)}),h=u(!1)},multipleSelection(y){r.multiple=!0},remove(y){const b=r.options,A=y.detail.remove;b[A].selected=!1,r.remove(A),b.length>0&&Array.prototype.findIndex.call(b,E=>E.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:u(!0),items:p(y)}),h=u(!1)},clear(y){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),h=u(!1)},insert(y){const{index:b,displayValue:A,exportValue:S}=y.detail.insert,E=r.children[b],C=document.createElement("option");C.textContent=A,C.value=S,E?E.before(C):r.append(C),e.setValue(t,{value:u(!0),items:p(y)}),h=u(!1)},items(y){const{items:b}=y.detail;for(;r.length!==0;)r.remove(0);for(const A of b){const{displayValue:S,exportValue:E}=A,C=document.createElement("option");C.textContent=S,C.value=E,r.append(C)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:p(y)}),h=u(!1)},indices(y){const b=new Set(y.detail.indices);for(const A of y.target.options)A.selected=b.has(A.index);e.setValue(t,{value:u(!0)}),h=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,g)}),r.addEventListener("input",g=>{const m=u(!0),y=u(!1);e.setValue(t,{value:m}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Nm extends It{constructor(e){const{data:t,elements:s,parent:r}=e,o=!!r._commentManager;if(super(e,{isRenderable:!o&&It._hasPopupData(t)}),this.elements=s,o&&It._hasPopupData(t)){const l=this.popup=this.#e();for(const u of s)u.popup=l}else this.popup=null}#e(){return new dI({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),s=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Eg}${r}`).join(",")),this.container}}class dI{#e=null;#t=this.#$.bind(this);#s=this.#z.bind(this);#n=this.#k.bind(this);#r=this.#w.bind(this);#i=null;#a=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#v=null;#x=null;#y=null;#E=null;#A=null;#b=null;#T=!1;#S=null;#C=null;constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:o,contentsObj:l,richText:u,parent:h,rect:p,parentRect:g,open:m,commentManager:y=null}){this.#a=e,this.#A=r,this.#o=l,this.#E=u,this.#h=h,this.#i=t,this.#y=p,this.#d=g,this.#l=s,this.#e=y,this.#S=s[0],this.#c=yd.toDateObject(o),this.trigger=s.flatMap(b=>b.getElementsToTriggerPopup()),y?this.renderCommentButton():(this.#M(),this.#a.hidden=!0,m&&this.#w())}#M(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const t of this.trigger)t.addEventListener("click",this.#r,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#s,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#N(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#v=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#v||this.#N(),!this.#v))return;const{signal:e}=this.#p=new AbortController,t=!!this.#S.extraPopupElement,s=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},r=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},o=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#m=this.#S.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",s,{signal:e}),l.addEventListener("pointerenter",r,{signal:e}),l.addEventListener("pointerleave",o,{signal:e}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const u=this.#S.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#j(),l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",s,{signal:e}),l.addEventListener("pointerenter",r,{signal:e}),l.addEventListener("pointerleave",o,{signal:e}),u.after(l)}}#j(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[e,t]=this.#v,{style:s}=this.#m;s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`}#I(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#S.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:r,modificationDate:o}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#C||=this.#S.commentText,this.#C}set comment(e){e!==this.comment&&(this.#S.commentText=this.#C=e)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#m&&(this.#m.classList.toggle("selected",e),this.#m.ariaExpanded=t)}setSelectedCommentButton(e){this.#m.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#x)return this.#x;const{x:e,y:t,height:s}=this.#m.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#S.layer.getBoundingClientRect();return[(e-r)/l,(t+s-o)/u]}set commentPopupPosition(e){this.#x=e}hasDefaultPopupPosition(){return this.#x===null}get commentButtonPosition(){return this.#v}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=this.#x||this.commentButtonPosition.map(p=>p/100),r=this.parentBoundingClientRect,{x:o,y:l,width:u,height:h}=r;this.#e.showDialog(null,this,o+t*u,l+s*h,{...e,parentDimensions:r})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#i){const s=e.style.outlineColor=_e.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#A?.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=this.#A}if(e.append(t),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),t.append(s)}Tg({html:this.#D||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#a.append(e)}get#D(){const e=this.#E,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#E.html||null}get#O(){return this.#D?.attributes?.style?.fontSize||0}get#B(){return this.#D?.attributes?.style?.color||null}#L(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#B,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return s}#$(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:t,deleted:s}){if(this.#e){s?(this.remove(),this.#C=null):t&&(t.deleted?this.remove():(this.#I(),this.#C=t.text)),e&&(this.#v=null,this.#N(),this.#j());return}if(s||t?.deleted){this.remove();return}this.#M(),this.#b||={contentsObj:this.#o,richText:this.#E},e&&(this.#u=null),t&&t.text&&(this.#E=this.#L(t.text),this.#c=yd.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#b&&({contentsObj:this.#o,richText:this.#E}=this.#b,this.#b=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#_(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:o}}}=this.#h;let l=!!this.#d,u=l?this.#d:this.#y;for(const A of this.#l)if(!u||_e.intersect(A.data.rect,u)!==null){u=A.data.rect,l=!0;break}const h=_e.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),g=l?u[2]-u[0]+5:0,m=h[0]+g,y=h[1];this.#u=[100*(m-r)/t,100*(y-o)/s];const{style:b}=this.#a;b.left=`${this.#u[0]}%`,b.top=`${this.#u[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#k(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#t)):(this.#z(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#t))}#k(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#_(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#z(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#a.hidden=!0)}maybeShow(){this.#e||(this.#M(),this.#T&&(this.#g||this.#k(),this.#T=!1,this.#a.hidden=!1))}get isVisible(){return this.#e?!1:this.#a.hidden===!1}}class qC extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class hI extends It{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:s}=this,r=this.svgFactory.create(t,s,!0),o=this.#e=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class fI extends It{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:s}=this,r=this.svgFactory.create(t,s,!0),o=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",t-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class pI extends It{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:s}=this,r=this.svgFactory.create(t,s,!0),o=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",t/2),l.setAttribute("cy",s/2),l.setAttribute("rx",t/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class YC extends It{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!t)return this.container;const u=this.svgFactory.create(o,l,!0);let h=[];for(let g=0,m=t.length;g<m;g+=2){const y=t[g]-e[0],b=e[3]-t[g+1];h.push(`${y},${b}`)}h=h.join(" ");const p=this.#e=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",h),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),u.append(p),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class mI extends YC{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class gI extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class zg extends It{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Xe.HIGHLIGHT:Xe.INK}#s(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:u,height:h}=this.#s(t,e),p=this.svgFactory.create(u,h,!0),g=this.#e=this.svgFactory.createElement("svg:g");p.append(g),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let m=0,y=s.length;m<y;m++){const b=this.svgFactory.createElement(this.svgElementName);this.#t.push(b),b.setAttribute("points",s[m].join(",")),g.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:s,rect:r}=e,o=this.#e;if(t>=0&&o.setAttribute("stroke-width",t||1),s)for(let l=0,u=this.#t.length;l<u;l++)this.#t[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:u,height:h}=this.#s(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class XC extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Xe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class vI extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class yI extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class xI extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class WC extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Xe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class bI extends It{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let s;t.hasAppearance||t.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:r}=pn.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Fg=class KC{#e=null;#t=null;#s=null;#n=new Map;#r=null;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:u,commentManager:h,linkService:p,annotationStorage:g}){this.div=e,this.#e=t,this.#t=s,this.#r=u||null,this.#i=p||null,this.#s=g||new Mg,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#n.size>0}async#a(e,t,s){const r=e.firstChild||e,o=r.id=`${Eg}${t}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[u,h]of l)r.setAttribute(u,h);s?s.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1))}async render(e){const{annotations:t}=e,s=this.div;_a(s,this.viewport);const r=new Map,o={data:null,layer:s,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new nc,annotationStorage:this.#s,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const u=l.annotationType===$t.POPUP;if(u){const g=r.get(l.id);if(!g)continue;o.elements=g}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const h=Ew.create(o);if(!h.isRenderable)continue;if(!u&&l.popupRef){const g=r.get(l.popupRef);g?g.push(h):r.set(l.popupRef,[h])}const p=h.render();l.hidden&&(p.style.visibility="hidden"),await this.#a(p,l.id,o.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#i,svgFactory:new nc,parent:this};for(const s of e){s.borderStyle||=KC._defaultBorderStyle,t.data=s;const r=Ew.create(t);if(!r.isRenderable)continue;const o=r.render();await this.#a(o,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,_a(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,s]of this.#t){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=this.#n.get(t);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:s,rotation:r}=e,o=new iI({data:{id:s,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#s}),l=o.render();return t.append(l),this.#e?.moveElementInDOM(t,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return Je(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:to.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const qu=/\r\n?|\n/g;class dn extends Oe{#e="";#t=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=dn.prototype,t=o=>o.isEmpty(),s=Ui.TRANSLATE_SMALL,r=Ui.TRANSLATE_BIG;return Je(this,"_keyboardManager",new hc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=Xe.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||dn._defaultColor||Oe._defaultLineColor,this.#n=e.fontSize||dn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){Oe.initialize(e,t);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case rt.FREETEXT_SIZE:dn._defaultFontSize=t;break;case rt.FREETEXT_COLOR:dn._defaultColor=t;break}}updateParams(e,t){switch(e){case rt.FREETEXT_SIZE:this.#r(t);break;case rt.FREETEXT_COLOR:this.#i(t);break}}static get defaultPropertiesToUpdate(){return[[rt.FREETEXT_SIZE,dn._defaultFontSize],[rt.FREETEXT_COLOR,dn._defaultColor||Oe._defaultLineColor]]}get propertiesToUpdate(){return[[rt.FREETEXT_SIZE,this.#n],[rt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new tc(this),[["colorPicker",this._colorPicker]]}get colorType(){return rt.FREETEXT_COLOR}#r(e){const t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#n)*this.parentScale),this.#n=r,this.#o()},s=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const t=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-dn._internalPadding*e,-(dn._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const s of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(dn.#c(s)),t=s);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/t):(this.width=s.height/e,this.height=s.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#a().trimEnd();if(e===t)return;const s=r=>{if(this.#e=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(t)},undo:()=>{s(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){dn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[p,g]=this.pageDimensions,[m,y]=this.pageTranslation;let b,A;switch(this.rotation){case 0:b=e+(l[0]-m)/p,A=t+this.height-(l[1]-y)/g;break;case 90:b=e+(l[0]-m)/p,A=t-(l[1]-y)/g,[u,h]=[h,-u];break;case 180:b=e-this.width+(l[0]-m)/p,A=t-(l[1]-y)/g,[u,h]=[-u,-h];break;case 270:b=e+(l[0]-m-this.height*g)/p,A=t+(l[1]-y-this.width*p)/g,[u,h]=[-h,u];break}this.setAt(b*r,A*o,u,h)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(qu,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:s}=t;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=dn.#d(t.getData("text")||"").replaceAll(qu,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=l,p=[],g=[];if(u.nodeType===Node.TEXT_NODE){const b=u.parentElement;if(g.push(u.nodeValue.slice(h).replaceAll(qu,"")),b!==this.editorDiv){let A=p;for(const S of this.editorDiv.childNodes){if(S===b){A=g;continue}A.push(dn.#c(S))}}p.push(u.nodeValue.slice(0,h).replaceAll(qu,""))}else if(u===this.editorDiv){let b=p,A=0;for(const S of this.editorDiv.childNodes)A++===h&&(b=g),b.push(dn.#c(S))}this.#e=`${p.join(`
`)}${r}${g.join(`
`)}`,this.#l();const m=new Range;let y=Math.sumPrecise(p.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const A=b.nodeValue.length;if(y<=A){m.setStart(b,y),m.setEnd(b,y);break}y-=A}o.removeAllRanges(),o.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=dn._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,s){let r=null;if(e instanceof qC){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:p,id:g,popupRef:m,richText:y,contentsObj:b,creationDate:A,modificationDate:S},textContent:E,textPosition:C,parent:{page:{pageNumber:j}}}=e;if(!E||E.length===0)return null;r=e={annotationType:Xe.FREETEXT,color:Array.from(u),fontSize:l,value:E.join(`
`),position:C,pageIndex:j-1,rect:h.slice(0),rotation:p,annotationElementId:g,id:g,deleted:!1,popupRef:m,comment:b?.str||null,richText:y,creationDate:A,modificationDate:S}}const o=await super.deserialize(e,t,s);return o.#n=e.fontSize,o.color=_e.makeHexColor(...e.color),o.#e=dn.#d(e.value),o._initialData=r,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Oe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(e){const{value:t,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==s||e.color.some((l,u)=>l!==r[u])||e.pageIndex!==o}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:s}=t;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,t.replaceChildren();for(const r of this.#e.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),t.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Ee{static PRECISION=1e-4;toSVGPath(){Tt("Abstract method `toSVGPath` must be implemented.")}get box(){Tt("Abstract getter `box` must be implemented.")}serialize(e,t){Tt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,o,l){l||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)l[u]=t+e[u]*r,l[u+1]=s+e[u+1]*o;return l}static _rescaleAndSwap(e,t,s,r,o,l){l||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)l[u]=t+e[u+1]*r,l[u+1]=s+e[u]*o;return l}static _translate(e,t,s,r){r||=new Float32Array(e.length);for(let o=0,l=e.length;o<l;o+=2)r[o]=t+e[o],r[o+1]=s+e[o+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,o){switch(o){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,o,l){return[(e+5*s)/6,(t+5*r)/6,(5*s+o)/6,(5*r+l)/6,(s+o)/2,(r+l)/2]}}class Qa{#e;#t=[];#s;#n;#r=[];#i=new Float32Array(18);#a;#o;#c;#l;#h;#d;#f=[];static#g=8;static#p=2;static#u=Qa.#g+Qa.#p;constructor({x:e,y:t},s,r,o,l,u=0){this.#e=s,this.#d=o*r,this.#n=l,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#s=u,this.#l=Qa.#g*r,this.#c=Qa.#u*r,this.#h=r,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#m(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[s,r,o,l]=this.#e;return[(this.#a+(e[0]-t[0])/2-s)/o,(this.#o+(e[1]-t[1])/2-r)/l,(this.#a+(t[0]-e[0])/2-s)/o,(this.#o+(t[1]-e[1])/2-r)/l]}add({x:e,y:t}){this.#a=e,this.#o=t;const[s,r,o,l]=this.#e;let[u,h,p,g]=this.#i.subarray(8,12);const m=e-p,y=t-g,b=Math.hypot(m,y);if(b<this.#c)return!1;const A=b-this.#l,S=A/b,E=S*m,C=S*y;let j=u,N=h;u=p,h=g,p+=E,g+=C,this.#f?.push(e,t);const M=-C/A,O=E/A,P=M*this.#d,L=O*this.#d;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([p+P,g+L],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([p-P,g-L],16),isNaN(this.#i[6])?(this.#r.length===0&&(this.#i.set([u+P,h+L],2),this.#r.push(NaN,NaN,NaN,NaN,(u+P-s)/o,(h+L-r)/l),this.#i.set([u-P,h-L],14),this.#t.push(NaN,NaN,NaN,NaN,(u-P-s)/o,(h-L-r)/l)),this.#i.set([j,N,u,h,p,g],6),!this.isEmpty()):(this.#i.set([j,N,u,h,p,g],6),Math.abs(Math.atan2(N-h,j-u)-Math.atan2(C,E))<Math.PI/2?([u,h,p,g]=this.#i.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+p)/2-s)/o,((h+g)/2-r)/l),[u,h,j,N]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((j+u)/2-s)/o,((N+h)/2-r)/l),!0):([j,N,u,h,p,g]=this.#i.subarray(0,6),this.#r.push(((j+5*u)/6-s)/o,((N+5*h)/6-r)/l,((5*u+p)/6-s)/o,((5*h+g)/6-r)/l,((u+p)/2-s)/o,((h+g)/2-r)/l),[p,g,u,h,j,N]=this.#i.subarray(12,18),this.#t.push(((j+5*u)/6-s)/o,((N+5*h)/6-r)/l,((5*u+p)/6-s)/o,((5*h+g)/6-r)/l,((u+p)/2-s)/o,((h+g)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#v();const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#y(s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return this.#x(s),s.join(" ")}#v(){const[e,t,s,r]=this.#e,[o,l,u,h]=this.#m();return`M${(this.#i[2]-e)/s} ${(this.#i[3]-t)/r} L${(this.#i[4]-e)/s} ${(this.#i[5]-t)/r} L${o} ${l} L${u} ${h} L${(this.#i[16]-e)/s} ${(this.#i[17]-t)/r} L${(this.#i[14]-e)/s} ${(this.#i[15]-t)/r} Z`}#x(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){const[t,s,r,o]=this.#e,l=this.#i.subarray(4,6),u=this.#i.subarray(16,18),[h,p,g,m]=this.#m();e.push(`L${(l[0]-t)/r} ${(l[1]-s)/o} L${h} ${p} L${g} ${m} L${(u[0]-t)/r} ${(u[1]-s)/o}`)}newFreeDrawOutline(e,t,s,r,o,l){return new QC(e,t,s,r,o,l)}getOutlines(){const e=this.#r,t=this.#t,s=this.#i,[r,o,l,u]=this.#e,h=new Float32Array((this.#f?.length??0)+2);for(let m=0,y=h.length-2;m<y;m+=2)h[m]=(this.#f[m]-r)/l,h[m+1]=(this.#f[m+1]-o)/u;if(h[h.length-2]=(this.#a-r)/l,h[h.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#E(h);const p=new Float32Array(this.#r.length+24+this.#t.length);let g=e.length;for(let m=0;m<g;m+=2){if(isNaN(e[m])){p[m]=p[m+1]=NaN;continue}p[m]=e[m],p[m+1]=e[m+1]}g=this.#b(p,g);for(let m=t.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(t[m+y])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=t[m+y],p[g+1]=t[m+y+1],g+=2}return this.#A(p,g),this.newFreeDrawOutline(p,h,this.#e,this.#h,this.#s,this.#n)}#E(e){const t=this.#i,[s,r,o,l]=this.#e,[u,h,p,g]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-s)/o,(t[3]-r)/l,NaN,NaN,NaN,NaN,(t[4]-s)/o,(t[5]-r)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(t[16]-s)/o,(t[17]-r)/l,NaN,NaN,NaN,NaN,(t[14]-s)/o,(t[15]-r)/l],0),this.newFreeDrawOutline(m,e,this.#e,this.#h,this.#s,this.#n)}#A(e,t){const s=this.#t;return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6}#b(e,t){const s=this.#i.subarray(4,6),r=this.#i.subarray(16,18),[o,l,u,h]=this.#e,[p,g,m,y]=this.#m();return e.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/h,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-l)/h],t),t+=24}}class QC extends Ee{#e;#t=new Float32Array(4);#s;#n;#r;#i;#a;constructor(e,t,s,r,o,l){super(),this.#a=e,this.#r=t,this.#e=s,this.#i=r,this.#s=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,h,p,g]=this.#t;for(let m=0,y=e.length;m<y;m+=2)e[m]=(e[m]-u)/p,e[m+1]=(e[m+1]-h)/g;for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-u)/p,t[m+1]=(t[m+1]-h)/g}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,s=this.#a.length;t<s;t+=6){if(isNaN(this.#a[t])){e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`);continue}e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,s,r],o){const l=s-e,u=r-t;let h,p;switch(o){case 0:h=Ee._rescale(this.#a,e,r,l,-u),p=Ee._rescale(this.#r,e,r,l,-u);break;case 90:h=Ee._rescaleAndSwap(this.#a,e,t,l,u),p=Ee._rescaleAndSwap(this.#r,e,t,l,u);break;case 180:h=Ee._rescale(this.#a,s,t,-l,u),p=Ee._rescale(this.#r,s,t,-l,u);break;case 270:h=Ee._rescaleAndSwap(this.#a,s,r,-l,-u),p=Ee._rescaleAndSwap(this.#r,s,r,-l,-u);break}return{outline:Array.from(h),points:[Array.from(p)]}}#o(e){const t=this.#a;let s=t[4],r=t[5];const o=[s,r,s,r];let l=s,u=r,h=s,p=r;const g=e?Math.max:Math.min,m=new Float32Array(4);for(let b=6,A=t.length;b<A;b+=6){const S=t[b+4],E=t[b+5];isNaN(t[b])?(_e.pointBoundingBox(S,E,o),u>E?(l=S,u=E):u===E&&(l=g(l,S)),p<E?(h=S,p=E):p===E&&(h=g(h,S))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,_e.bezierBoundingBox(s,r,...t.slice(b,b+6),m),_e.rectBoundingBox(m[0],m[1],m[2],m[3],o),u>m[1]?(l=m[0],u=m[1]):u===m[1]&&(l=g(l,m[0])),p<m[3]?(h=m[2],p=m[3]):p===m[3]&&(h=g(h,m[2]))),s=S,r=E}const y=this.#t;y[0]=o[0]-this.#s,y[1]=o[1]-this.#s,y[2]=o[2]-o[0]+2*this.#s,y[3]=o[3]-o[1]+2*this.#s,this.firstPoint=[l,u],this.lastPoint=[h,p]}get box(){return this.#t}newOutliner(e,t,s,r,o,l=0){return new Qa(e,t,s,r,o,l)}getNewOutline(e,t){const[s,r,o,l]=this.#t,[u,h,p,g]=this.#e,m=o*p,y=l*g,b=s*p+u,A=r*g+h,S=this.newOutliner({x:this.#r[0]*m+b,y:this.#r[1]*y+A},this.#e,this.#i,e,this.#n,t??this.#s);for(let E=2;E<this.#r.length;E+=2)S.add({x:this.#r[E]*m+b,y:this.#r[E+1]*y+A});return S.getOutlines()}}class jm{#e;#t;#s;#n=[];#r=[];constructor(e,t=0,s=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:E,width:C,height:j}of e){const N=Math.floor((S-t)/l)*l,M=Math.ceil((S+C+t)/l)*l,O=Math.floor((E-t)/l)*l,P=Math.ceil((E+j+t)/l)*l,L=[N,O,P,!0],B=[M,O,P,!1];this.#n.push(L,B),_e.rectBoundingBox(N,O,M,P,o)}const u=o[2]-o[0]+2*s,h=o[3]-o[1]+2*s,p=o[0]-s,g=o[1]-s;let m=r?-1/0:1/0,y=1/0;const b=this.#n.at(r?-1:-2),A=[b[0],b[2]];for(const S of this.#n){const[E,C,j,N]=S;!N&&r?C<y?(y=C,m=E):C===y&&(m=Math.max(m,E)):N&&!r&&(C<y?(y=C,m=E):C===y&&(m=Math.min(m,E))),S[0]=(E-p)/u,S[1]=(C-g)/h,S[2]=(j-g)/h}this.#e=new Float32Array([p,g,u,h]),this.#t=[m,y],this.#s=A}getOutlines(){this.#n.sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],s=new Set;for(const l of e){const[u,h,p]=l;t.push([u,h,l],[u,p,l])}t.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=t.length;l<u;l+=2){const h=t[l][2],p=t[l+1][2];h.push(p),p.push(h),s.add(h),s.add(p)}const r=[];let o;for(;s.size>0;){const l=s.values().next().value;let[u,h,p,g,m]=l;s.delete(l);let y=u,b=h;for(o=[u,p],r.push(o);;){let A;if(s.has(g))A=g;else if(s.has(m))A=m;else break;s.delete(A),[u,h,p,g,m]=A,y!==u&&(o.push(y,b,u,b===h?h:p),y=u),b=b===h?p:h}o.push(y,b)}return new wI(r,this.#e,this.#t,this.#s)}#a(e){const t=this.#r;let s=0,r=t.length-1;for(;s<=r;){const o=s+r>>1,l=t[o][0];if(l===e)return o;l<e?s=o+1:r=o-1}return r+1}#o([,e,t]){const s=this.#a(e);this.#r.splice(s,0,[e,t])}#c([,e,t]){const s=this.#a(e);for(let r=s;r<this.#r.length;r++){const[o,l]=this.#r[r];if(o!==e)break;if(o===e&&l===t){this.#r.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,l]=this.#r[r];if(o!==e)break;if(o===e&&l===t){this.#r.splice(r,1);return}}}#l(e){const[t,s,r]=e,o=[[t,s,r]],l=this.#a(r);for(let u=0;u<l;u++){const[h,p]=this.#r[u];for(let g=0,m=o.length;g<m;g++){const[,y,b]=o[g];if(!(p<=y||b<=h)){if(y>=h){if(b>p)o[g][1]=p;else{if(m===1)return[];o.splice(g,1),g--,m--}continue}o[g][2]=h,b>p&&o.push([t,p,b])}}}return o}}class wI extends Ee{#e;#t;constructor(e,t,s,r){super(),this.#t=e,this.#e=t,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const e=[];for(const t of this.#t){let[s,r]=t;e.push(`M${s} ${r}`);for(let o=2;o<t.length;o+=2){const l=t[o],u=t[o+1];l===s?(e.push(`V${u}`),r=u):u===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,t,s,r],o){const l=[],u=s-e,h=r-t;for(const p of this.#t){const g=new Array(p.length);for(let m=0;m<p.length;m+=2)g[m]=e+p[m]*u,g[m+1]=r-p[m+1]*h;l.push(g)}return l}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class Mm extends Qa{newFreeDrawOutline(e,t,s,r,o,l){return new SI(e,t,s,r,o,l)}}class SI extends QC{newOutliner(e,t,s,r,o,l=0){return new Mm(e,t,s,r,o,l)}}class Gt extends Oe{#e=null;#t=0;#s;#n=null;#r=null;#i=null;#a=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#p=null;#u="";#m;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Xe.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Gt.prototype;return Je(this,"_keyboardManager",new hc([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Gt._defaultColor,this.#m=e.thickness||Gt._defaultThickness,this.opacity=e.opacity||Gt._defaultOpacity,this.#s=e.boxes||null,this.#v=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#y(e),this.#S()):this.#s&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#o=e.focusOffset,this.#x(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#x(){const e=new jm(this.#s,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new jm(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#i;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:t,clipPathId:s}){this.#l=e;const r=1.5;if(this.#i=e.getNewOutline(this.#m/2+r,.0025),t>=0)this.#h=t,this.#n=s,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Gt.#C(this.#l.box,(m-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Gt.#C(this.#i.box,m),path:{d:this.#i.toSVGPath()}})}const[o,l,u,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=h;break;case 90:{const[m,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*y/m,this.height=h*m/y;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=h;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*y/m,this.height=h*m/y;break}}const{firstPoint:p}=e;this.#f=[(p[0]-o)/u,(p[1]-l)/h];const{lastPoint:g}=this.#i;this.#g=[(g[0]-o)/u,(g[1]-l)/h]}static initialize(e,t){Oe.initialize(e,t),Gt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case rt.HIGHLIGHT_COLOR:Gt._defaultColor=t;break;case rt.HIGHLIGHT_THICKNESS:Gt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case rt.HIGHLIGHT_COLOR:this.#E(t);break;case rt.HIGHLIGHT_THICKNESS:this.#A(t);break}}static get defaultPropertiesToUpdate(){return[[rt.HIGHLIGHT_COLOR,Gt._defaultColor],[rt.HIGHLIGHT_THICKNESS,Gt._defaultThickness]]}get propertiesToUpdate(){return[[rt.HIGHLIGHT_COLOR,this.color||Gt._defaultColor],[rt.HIGHLIGHT_THICKNESS,this.#m||Gt._defaultThickness],[rt.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#E(e){const t=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:t.bind(this,e,Gt._defaultOpacity),undo:t.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#A(e){const t=this.#m,s=r=>{this.#m=r,this.#b(r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new is({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#j())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#j())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#T():e&&(this.#S(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#b(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#C([e,t,s,r],o){switch(o){case 90:return[1-t-r,e,r,s];case 180:return[1-e-s,1-t-r,s,r];case 270:return[t,1-e-s,r,s]}return[e,t,s,r]}rotate(e){const{drawLayer:t}=this.parent;let s;this.#d?(e=(e-this.rotation+360)%360,s=Gt.#C(this.#l.box,e)):s=Gt.#C([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:Gt.#C(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),_C(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#M(e){Gt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#N(!0);break;case 1:case 3:this.#N(!1);break}}#N(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#N(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#j(){return this.#d?this.rotation:0}#I(){if(this.#d)return null;const[e,t]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#s,l=new Float32Array(o.length*8);let u=0;for(const{x:h,y:p,width:g,height:m}of o){const y=h*e+s,b=(1-p)*t+r;l[u]=l[u+4]=y,l[u+1]=l[u+3]=b,l[u+2]=l[u+6]=y+g*e,l[u+5]=l[u+7]=b-m*t,u+=8}return l}#D(e){return this.#l.serialize(e,this.#j())}static startHighlighting(e,t,{target:s,x:r,y:o}){const{x:l,y:u,width:h,height:p}=s.getBoundingClientRect(),g=new AbortController,m=e.combinedSignal(g),y=b=>{g.abort(),this.#B(e,b)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",Pt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",ls,{signal:m}),s.addEventListener("pointermove",this.#O.bind(this,e),{signal:m}),this._freeHighlight=new Mm({x:r,y:o},[l,u,h,p],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,s){let r=null;if(e instanceof XC){const{data:{quadPoints:A,rect:S,rotation:E,id:C,color:j,opacity:N,popupRef:M,richText:O,contentsObj:P,creationDate:L,modificationDate:B},parent:{page:{pageNumber:F}}}=e;r=e={annotationType:Xe.HIGHLIGHT,color:Array.from(j),opacity:N,quadPoints:A,boxes:null,pageIndex:F-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:M,richText:O,comment:P?.str||null,creationDate:L,modificationDate:B}}else if(e instanceof zg){const{data:{inkLists:A,rect:S,rotation:E,id:C,color:j,borderStyle:{rawWidth:N},popupRef:M,richText:O,contentsObj:P,creationDate:L,modificationDate:B},parent:{page:{pageNumber:F}}}=e;r=e={annotationType:Xe.HIGHLIGHT,color:Array.from(j),thickness:N,inkLists:A,boxes:null,pageIndex:F-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:M,richText:O,comment:P?.str||null,creationDate:L,modificationDate:B}}const{color:o,quadPoints:l,inkLists:u,opacity:h}=e,p=await super.deserialize(e,t,s);p.color=_e.makeHexColor(...o),p.opacity=h||1,u&&(p.#m=e.thickness),p._initialData=r,e.comment&&p.setCommentData(e);const[g,m]=p.pageDimensions,[y,b]=p.pageTranslation;if(l){const A=p.#s=[];for(let S=0;S<l.length;S+=8)A.push({x:(l[S]-y)/g,y:1-(l[S+1]-b)/m,width:(l[S+2]-l[S])/g,height:(l[S+1]-l[S+5])/m});p.#x(),p.#S(),p.rotate(p.rotation)}else if(u){p.#d=!0;const A=u[0],S={x:A[0]-y,y:m-(A[1]-b)},E=new Mm(S,[0,0,g,m],1,p.#m/2,!0,.001);for(let N=0,M=A.length;N<M;N+=2)S.x=A[N]-y,S.y=m-(A[N+1]-b),E.add(S);const{id:C,clipPathId:j}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);p.#y({highlightOutlines:E.getOutlines(),highlightId:C,clipPathId:j}),p.#S(),p.rotate(p.parentRotation)}return p}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=Oe._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:t,opacity:this.opacity,thickness:this.#m,quadPoints:this.#I(),outlines:this.#D(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#L(s)?null:(s.id=this.annotationElementId,s)}#L(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((s,r)=>s!==t[r])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class ZC{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Tt("Not implemented")}}class Ve extends Oe{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#r=null;static#i=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:s}){this.#e=e,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#u(e.box)}#h(e,t){const{id:s}=t.drawLayer.draw(Ve._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(e,t){const s=new Set(Object.keys(e));for(const[r,o]of Object.entries(t))s.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){Tt("Not implemented")}static get typesMap(){Tt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,t),this._currentParent&&(Ve.#s.updateProperty(s,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,t[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,t[r]]);return e}_updateProperty(e,t,s){const r=this._drawingOptions,o=r[t],l=u=>{r.updateProperty(t,u);const h=this.#e.updateProperty(t,u);h&&this.#u(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,t,s,r]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[t,1-e,s*(l/o),r*(o/l)];case 180:return[1-e,1-t,s,r];case 270:return[1-t,e,s*(l/o),r*(o/l)];default:return[e,t,s,r]}}#p(){const{x:e,y:t,width:s,height:r,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-t,e,s*(o/l),r*(l/o)];case 180:return[1-e,1-t,s,r];case 270:return[t,1-e,s*(o/l),r*(l/o)];default:return[e,t,s,r]}}#u(e){[this.x,this.y,this.width,this.height]=this.#g(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:e,y:t,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[u,h]}=this;switch((o*4+l)/90){case 1:return[1-t-r,e,r,s];case 2:return[1-e-s,1-t-r,s,r];case 3:return[t,1-e-s,r,s];case 4:return[e,t-s*(u/h),r*(h/u),s*(u/h)];case 5:return[1-t,e,s*(u/h),r*(h/u)];case 6:return[1-e-r*(h/u),1-t,r*(h/u),s*(u/h)];case 7:return[t-s*(u/h),1-e-r*(h/u),s*(u/h),r*(h/u)];case 8:return[e-s,t-r,s,r];case 9:return[1-t,e-s,r,s];case 10:return[1-e,1-t,s,r];case 11:return[t-r,1-e,r,s];case 12:return[e-r*(h/u),t,r*(h/u),s*(u/h)];case 13:return[1-t-s*(u/h),e-r*(h/u),s*(u/h),r*(h/u)];case 14:return[1-e,1-t-s*(u/h),r*(h/u),s*(u/h)];case 15:return[t,1-e,s*(u/h),r*(h/u)];default:return[e,t,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties({bbox:this.#m()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),s}static createDrawerInstance(e,t,s,r,o){Tt("Not implemented")}static startDrawing(e,t,s,r){const{target:o,offsetX:l,offsetY:u,pointerId:h,pointerType:p}=r;if(Ve.#a&&Ve.#a!==p)return;const{viewport:{rotation:g}}=e,{width:m,height:y}=o.getBoundingClientRect(),b=Ve.#n=new AbortController,A=e.combinedSignal(b);if(Ve.#i||=h,Ve.#a??=p,window.addEventListener("pointerup",S=>{Ve.#i===S.pointerId?this._endDraw(S):Ve.#o?.delete(S.pointerId)},{signal:A}),window.addEventListener("pointercancel",S=>{Ve.#i===S.pointerId?this._currentParent.endDrawingSession():Ve.#o?.delete(S.pointerId)},{signal:A}),window.addEventListener("pointerdown",S=>{Ve.#a===S.pointerType&&((Ve.#o||=new Set).add(S.pointerId),Ve.#s.isCancellable()&&(Ve.#s.removeLastElement(),Ve.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",ls,{signal:A}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),o.addEventListener("touchmove",S=>{S.timeStamp===Ve.#c&&Pt(S)},{signal:A}),e.toggleDrawing(),t._editorUndoBar?.hide(),Ve.#s){e.drawLayer.updateProperties(this._currentDrawId,Ve.#s.startNew(l,u,m,y,g));return}t.updateUIForDefaultProperties(this),Ve.#s=this.createDrawerInstance(l,u,m,y,g),Ve.#r=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Ve.#r.toSVGProperties(),Ve.#s.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ve.#c=-1,!Ve.#s)return;const{offsetX:t,offsetY:s,pointerId:r}=e;if(Ve.#i===r){if(Ve.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ve.#s.add(t,s)),Ve.#c=e.timeStamp,Pt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Ve.#s=null,Ve.#r=null,Ve.#a=null,Ve.#c=NaN),Ve.#n&&(Ve.#n.abort(),Ve.#n=null,Ve.#i=NaN,Ve.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Ve.#s.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=Ve.#s,r=this._currentDrawId,o=s.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{t.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:rt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(rt.DRAW_STEP),!Ve.#s.isEmpty()){const{pageDimensions:[s,r],scale:o}=t,l=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ve.#s.getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:Ve.#r,mustBeCommitted:!e});return this._cleanup(!0),l}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,s,r,o,l){Tt("Not implemented")}static async deserialize(e,t,s){const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:u}}=t.viewport,h=this.deserializeDraw(l,u,r,o,this._INNER_MARGIN,e),p=await super.deserialize(e,t,s);return p.createDrawingOptions(e),p.#l({drawOutlines:h}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(e){const[t,s]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#e.serialize([t,s,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class AI{#e=new Float64Array(6);#t;#s;#n;#r;#i;#a="";#o=0;#c=new mc;#l;#h;constructor(e,t,s,r,o,l){this.#l=s,this.#h=r,this.#n=o,this.#r=l,[e,t]=this.#d(e,t);const u=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#s=[{line:u,points:this.#i}],this.#e.set(u,0)}updateProperty(e,t){e==="stroke-width"&&(this.#r=t)}#d(e,t){return Ee._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#d(e,t);const[s,r,o,l]=this.#e.subarray(2,6),u=e-o,h=t-l;return Math.hypot(this.#l*u,this.#h*h)<=2?null:(this.#i.push(e,t),isNaN(s)?(this.#e.set([o,l,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([s,r,o,l,e,t],0),this.#t.push(...Ee.createBezierPoints(s,r,o,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,o){this.#l=s,this.#h=r,this.#n=o,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const u=this.#s.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#s.push({line:l,points:this.#i}),this.#e.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(e){return this.#s?(this.#s.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#a="";for(let e=0,t=this.#s.length;e<t;e++){const{line:s,points:r}=this.#s[e];this.#t=s,this.#i=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const e=Ee.svgRound(this.#t[4]),t=Ee.svgRound(this.#t[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${e} ${t} Z`,this.#a;if(this.#i.length<=6){const r=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,r)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const r=Ee.svgRound(this.#t[10]),o=Ee.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${r} ${o}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${e} ${t}`),this.#o=6);for(let r=this.#o,o=this.#t.length;r<o;r+=6){const[l,u,h,p,g,m]=this.#t.slice(r,r+6).map(Ee.svgRound);s.push(`C${l} ${u} ${h} ${p} ${g} ${m}`)}return this.#a+=s.join(" "),this.#o=this.#t.length,this.#a}getOutlines(e,t,s,r){const o=this.#s.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#s,e,t,s,this.#n,this.#r,r),this.#e=null,this.#t=null,this.#s=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class mc extends Ee{#e;#t=0;#s;#n;#r;#i;#a;#o;#c;build(e,t,s,r,o,l,u){this.#r=t,this.#i=s,this.#a=r,this.#o=o,this.#c=l,this.#s=u??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${Ee.svgRound(t[4])} ${Ee.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${Ee.svgRound(t[10])} ${Ee.svgRound(t[11])}`);continue}for(let s=6,r=t.length;s<r;s+=6){const[o,l,u,h,p,g]=t.subarray(s,s+6).map(Ee.svgRound);e.push(`C${o} ${l} ${u} ${h} ${p} ${g}`)}}return e.join("")}serialize([e,t,s,r],o){const l=[],u=[],[h,p,g,m]=this.#h();let y,b,A,S,E,C,j,N,M;switch(this.#o){case 0:M=Ee._rescale,y=e,b=t+r,A=s,S=-r,E=e+h*s,C=t+(1-p-m)*r,j=e+(h+g)*s,N=t+(1-p)*r;break;case 90:M=Ee._rescaleAndSwap,y=e,b=t,A=s,S=r,E=e+p*s,C=t+h*r,j=e+(p+m)*s,N=t+(h+g)*r;break;case 180:M=Ee._rescale,y=e+s,b=t,A=-s,S=r,E=e+(1-h-g)*s,C=t+p*r,j=e+(1-h)*s,N=t+(p+m)*r;break;case 270:M=Ee._rescaleAndSwap,y=e+s,b=t+r,A=-s,S=-r,E=e+(1-p-m)*s,C=t+(1-h-g)*r,j=e+(1-p)*s,N=t+(1-h)*r;break}for(const{line:O,points:P}of this.#n)l.push(M(O,y,b,A,S,o?new Array(O.length):null)),u.push(M(P,y,b,A,S,o?new Array(P.length):null));return{lines:l,points:u,rect:[E,C,j,N]}}static deserialize(e,t,s,r,o,{paths:{lines:l,points:u},rotation:h,thickness:p}){const g=[];let m,y,b,A,S;switch(h){case 0:S=Ee._rescale,m=-e/s,y=t/r+1,b=1/s,A=-1/r;break;case 90:S=Ee._rescaleAndSwap,m=-t/r,y=-e/s,b=1/r,A=1/s;break;case 180:S=Ee._rescale,m=e/s+1,y=-t/r,b=-1/s,A=1/r;break;case 270:S=Ee._rescaleAndSwap,m=t/r+1,y=e/s+1,b=-1/r,A=-1/s;break}if(!l){l=[];for(const C of u){const j=C.length;if(j===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(j===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const N=new Float32Array(3*(j-2));l.push(N);let[M,O,P,L]=C.subarray(0,4);N.set([NaN,NaN,NaN,NaN,M,O],0);for(let B=4;B<j;B+=2){const F=C[B],$=C[B+1];N.set(Ee.createBezierPoints(M,O,P,L,F,$),(B-2)*3),[M,O,P,L]=[P,L,F,$]}}}for(let C=0,j=l.length;C<j;C++)g.push({line:S(l[C].map(N=>N??NaN),m,y,b,A),points:S(u[C].map(N=>N??NaN),m,y,b,A)});const E=new this.prototype.constructor;return E.build(g,s,r,1,h,p,o),E}#l(e=this.#c){const t=this.#s+e/2*this.#a;return this.#o%180===0?[t/this.#r,t/this.#i]:[t/this.#i,t/this.#r]}#h(){const[e,t,s,r]=this.#e,[o,l]=this.#l(0);return[e+o,t+l,s-2*o,r-2*l]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)_e.pointBoundingBox(r[u],r[u+1],e);continue}let o=r[4],l=r[5];for(let u=6,h=r.length;u<h;u+=6){const[p,g,m,y,b,A]=r.subarray(u,u+6);_e.bezierBoundingBox(o,l,p,g,m,y,b,A,e),o=b,l=A}}const[t,s]=this.#l();e[0]=Nn(e[0]-t,0,1),e[1]=Nn(e[1]-s,0,1),e[2]=Nn(e[2]+t,0,1),e[3]=Nn(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,s]=this.#l();this.#c=e;const[r,o]=this.#l(),[l,u]=[r-t,o-s],h=this.#e;return h[0]-=l,h[1]-=u,h[2]+=2*l,h[3]+=2*u,h}updateParentDimensions([e,t],s){const[r,o]=this.#l();this.#r=e,this.#i=t,this.#a=s;const[l,u]=this.#l(),h=l-r,p=u-o,g=this.#e;return g[0]-=h,g[1]-=p,g[2]+=2*h,g[3]+=2*p,g}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Ee.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ee.svgRound(e)} ${Ee.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let s=0,r=0,o=0,l=0,u=0,h=0;switch(this.#t){case 90:r=t/e,o=-e/t,u=e;break;case 180:s=-1,l=-1,u=e,h=t;break;case 270:r=-t/e,o=e/t,h=t;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${Ee.svgRound(u)} ${Ee.svgRound(h)})`}getPathResizingSVGProperties([e,t,s,r]){const[o,l]=this.#l(),[u,h,p,g]=this.#e;if(Math.abs(p-o)<=Ee.PRECISION||Math.abs(g-l)<=Ee.PRECISION){const S=e+s/2-(u+p/2),E=t+r/2-(h+g/2);return{path:{"transform-origin":`${Ee.svgRound(e)} ${Ee.svgRound(t)}`,transform:`${this.rotationTransform} translate(${S} ${E})`}}}const m=(s-2*o)/(p-2*o),y=(r-2*l)/(g-2*l),b=p/s,A=g/r;return{path:{"transform-origin":`${Ee.svgRound(u)} ${Ee.svgRound(h)}`,transform:`${this.rotationTransform} scale(${b} ${A}) translate(${Ee.svgRound(o)} ${Ee.svgRound(l)}) scale(${m} ${y}) translate(${Ee.svgRound(-o)} ${Ee.svgRound(-l)})`}}}getPathResizedSVGProperties([e,t,s,r]){const[o,l]=this.#l(),u=this.#e,[h,p,g,m]=u;if(u[0]=e,u[1]=t,u[2]=s,u[3]=r,Math.abs(g-o)<=Ee.PRECISION||Math.abs(m-l)<=Ee.PRECISION){const E=e+s/2-(h+g/2),C=t+r/2-(p+m/2);for(const{line:j,points:N}of this.#n)Ee._translate(j,E,C,j),Ee._translate(N,E,C,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ee.svgRound(e)} ${Ee.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(s-2*o)/(g-2*o),b=(r-2*l)/(m-2*l),A=-y*(h+o)+e+o,S=-b*(p+l)+t+l;if(y!==1||b!==1||A!==0||S!==0)for(const{line:E,points:C}of this.#n)Ee._rescale(E,A,S,y,b,E),Ee._rescale(C,A,S,y,b,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ee.svgRound(e)} ${Ee.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],s){const[r,o]=s,l=this.#e,u=e-l[0],h=t-l[1];if(this.#r===r&&this.#i===o)for(const{line:p,points:g}of this.#n)Ee._translate(p,u,h,p),Ee._translate(g,u,h,g);else{const p=this.#r/r,g=this.#i/o;this.#r=r,this.#i=o;for(const{line:m,points:y}of this.#n)Ee._rescale(m,u,h,p,g,m),Ee._rescale(y,u,h,p,g,y);l[2]*=p,l[3]*=g}return l[0]=e,l[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ee.svgRound(e)} ${Ee.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ee.svgRound(e[0])} ${Ee.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class eh extends ZC{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Oe._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new eh(this._viewParameters);return e.updateAll(this),e}}class Hg extends Ve{static _type="ink";static _editorType=Xe.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Oe.initialize(e,t),this._defaultDrawingOptions=new eh(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Je(this,"typesMap",new Map([[rt.INK_THICKNESS,"stroke-width"],[rt.INK_COLOR,"stroke"],[rt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,s,r,o){return new AI(e,t,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,s,r,o,l){return mc.deserialize(e,t,s,r,o,l)}static async deserialize(e,t,s){let r=null;if(e instanceof zg){const{data:{inkLists:l,rect:u,rotation:h,id:p,color:g,opacity:m,borderStyle:{rawWidth:y},popupRef:b,richText:A,contentsObj:S,creationDate:E,modificationDate:C},parent:{page:{pageNumber:j}}}=e;r=e={annotationType:Xe.INK,color:Array.from(g),thickness:y,opacity:m,paths:{points:l},boxes:null,pageIndex:j-1,rect:u.slice(0),rotation:h,annotationElementId:p,id:p,deleted:!1,popupRef:b,richText:A,comment:S?.str||null,creationDate:E,modificationDate:C}}const o=await super.deserialize(e,t,s);return o._initialData=r,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||=new tc(this),[["colorPicker",this._colorPicker]]}get colorType(){return rt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:s}=this;t.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:s}){this._drawingOptions=Hg.getDefaultDrawingOptions({stroke:_e.makeHexColor(...e),"stroke-width":t,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(e),{color:Oe._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:t,points:s}});return this.addComment(u),e?(u.isCopy=!0,u):this.annotationElementId&&!this.#e(u)?null:(u.id=this.annotationElementId,u)}#e(e){const{color:t,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,u)=>l!==t[u])||e.thickness!==s||e.opacity!==r||e.pageIndex!==o}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class Rm extends mc{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Yu=8,Ll=3;class Wa{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,s,r,o,l,u){const h=this.#t(s,r,o,l);for(let p=0;p<8;p++){const g=(-p+h-u+16)%8,m=this.#s[2*g],y=this.#s[2*g+1];if(e[(s+m)*t+(r+y)]!==0)return g}return-1}static#r(e,t,s,r,o,l,u){const h=this.#t(s,r,o,l);for(let p=0;p<8;p++){const g=(p+h+u+16)%8,m=this.#s[2*g],y=this.#s[2*g+1];if(e[(s+m)*t+(r+y)]!==0)return g}return-1}static#i(e,t,s,r){const o=e.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=e[g]<=r?1:0;for(let g=1;g<s-1;g++)l[g*t]=l[g*t+t-1]=0;for(let g=0;g<t;g++)l[g]=l[t*s-1-g]=0;let u=1,h;const p=[];for(let g=1;g<s-1;g++){h=1;for(let m=1;m<t-1;m++){const y=g*t+m,b=l[y];if(b===0)continue;let A=g,S=m;if(b===1&&l[y-1]===0)u+=1,S-=1;else if(b>=1&&l[y+1]===0)u+=1,S+=1,b>1&&(h=b);else{b!==1&&(h=Math.abs(b));continue}const E=[m,g],C=S===m+1,j={isHole:C,points:E,id:u,parent:0};p.push(j);let N;for(const Y of p)if(Y.id===h){N=Y;break}N?N.isHole?j.parent=C?N.parent:h:j.parent=C?h:N.parent:j.parent=C?h:0;const M=this.#n(l,t,g,m,A,S,0);if(M===-1){l[y]=-u,l[y]!==1&&(h=Math.abs(l[y]));continue}let O=this.#s[2*M],P=this.#s[2*M+1];const L=g+O,B=m+P;A=L,S=B;let F=g,$=m;for(;;){const Y=this.#r(l,t,F,$,A,S,1);O=this.#s[2*Y],P=this.#s[2*Y+1];const te=F+O,oe=$+P;E.push(oe,te);const ie=F*t+$;if(l[ie+1]===0?l[ie]=-u:l[ie]===1&&(l[ie]=u),te===g&&oe===m&&F===L&&$===B){l[y]!==1&&(h=Math.abs(l[y]));break}else A=F,S=$,F=te,$=oe}}}return p}static#a(e,t,s,r){if(s-t<=4){for(let L=t;L<s-2;L+=2)r.push(e[L],e[L+1]);return}const o=e[t],l=e[t+1],u=e[s-4]-o,h=e[s-3]-l,p=Math.hypot(u,h),g=u/p,m=h/p,y=g*l-m*o,b=h/u,A=1/p,S=Math.atan(b),E=Math.cos(S),C=Math.sin(S),j=A*(Math.abs(E)+Math.abs(C)),N=A*(1-j+j**2),M=Math.max(Math.atan(Math.abs(C+E)*N),Math.atan(Math.abs(C-E)*N));let O=0,P=t;for(let L=t+2;L<s-2;L+=2){const B=Math.abs(y-g*e[L+1]+m*e[L]);B>O&&(P=L,O=B)}O>(p*M)**2?(this.#a(e,t,P+2,r),this.#a(e,P,s,r)):r.push(o,l)}static#o(e){const t=[],s=e.length;return this.#a(e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t}static#c(e,t,s,r,o,l){const u=new Float32Array(l**2),h=-2*r**2,p=l>>1;for(let S=0;S<l;S++){const E=(S-p)**2;for(let C=0;C<l;C++)u[S*l+C]=Math.exp((E+(C-p)**2)/h)}const g=new Float32Array(256),m=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/m);const y=e.length,b=new Uint8Array(y),A=new Uint32Array(256);for(let S=0;S<s;S++)for(let E=0;E<t;E++){const C=S*t+E,j=e[C];let N=0,M=0;for(let P=0;P<l;P++){const L=S+P-p;if(!(L<0||L>=s))for(let B=0;B<l;B++){const F=E+B-p;if(F<0||F>=t)continue;const $=e[L*t+F],Y=u[P*l+B]*g[Math.abs($-j)];N+=$*Y,M+=Y}}const O=b[C]=Math.round(N/M);A[O]++}return[b,A]}static#l(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t}static#h(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,o=1/0;for(let u=0,h=s.length;u<h;u++){const p=s[u]=e[u<<2];r=Math.max(r,p),o=Math.min(o,p)}const l=255/(r-o);for(let u=0,h=s.length;u<h;u++)s[u]=(s[u]-o)*l;return s}static#d(e){let t,s=-1/0,r=-1/0;const o=e.findIndex(h=>h!==0);let l=o,u=o;for(t=o;t<256;t++){const h=e[t];h>s&&(t-l>r&&(r=t-l,u=t-1),s=h,l=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:s,height:r}=e,{maxDim:o}=this.#e;let l=s,u=r;if(s>o||r>o){let y=s,b=r,A=Math.log2(Math.max(s,r)/o);const S=Math.floor(A);A=A===S?S-1:S;for(let C=0;C<A;C++){l=Math.ceil(y/2),u=Math.ceil(b/2);const j=new OffscreenCanvas(l,u);j.getContext("2d").drawImage(e,0,0,y,b,0,0,l,u),y=l,b=u,e!==t&&e.close(),e=j.transferToImageBitmap()}const E=Math.min(o/l,o/u);l=Math.round(l*E),u=Math.round(u*E)}const p=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,l,u),p.filter="grayscale(1)",p.drawImage(e,0,0,e.width,e.height,0,0,l,u);const g=p.getImageData(0,0,l,u).data;return[this.#h(g),l,u]}static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},o,l,u,h){let p=new OffscreenCanvas(1,1),g=p.getContext("2d",{alpha:!1});const m=200,y=g.font=`${s} ${r} ${m}px ${t}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:A,actualBoundingBoxAscent:S,actualBoundingBoxDescent:E,fontBoundingBoxAscent:C,fontBoundingBoxDescent:j,width:N}=g.measureText(e),M=1.5,O=Math.ceil(Math.max(Math.abs(b)+Math.abs(A)||0,N)*M),P=Math.ceil(Math.max(Math.abs(S)+Math.abs(E)||m,Math.abs(C)+Math.abs(j)||m)*M);p=new OffscreenCanvas(O,P),g=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=y,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,O,P),g.fillStyle="black",g.fillText(e,O*(M-1)/2,P*(3-M)/2);const L=this.#h(g.getImageData(0,0,O,P).data),B=this.#l(L),F=this.#d(B),$=this.#i(L,O,P,F);return this.processDrawnLines({lines:{curves:$,width:O,height:P},pageWidth:o,pageHeight:l,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,o){const[l,u,h]=this.#f(e),[p,g]=this.#c(l,u,h,Math.hypot(u,h)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),m=this.#d(g),y=this.#i(p,u,h,m);return this.processDrawnLines({lines:{curves:y,width:u,height:h},pageWidth:t,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:l,areContours:u}){r%180!==0&&([t,s]=[s,t]);const{curves:h,width:p,height:g}=e,m=e.thickness??0,y=[],b=Math.min(t/p,s/g),A=b/t,S=b/s,E=[];for(const{points:j}of h){const N=l?this.#o(j):j;if(!N)continue;E.push(N);const M=N.length,O=new Float32Array(M),P=new Float32Array(3*(M===2?2:M-2));if(y.push({line:P,points:O}),M===2){O[0]=N[0]*A,O[1]=N[1]*S,P.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[L,B,F,$]=N;L*=A,B*=S,F*=A,$*=S,O.set([L,B,F,$],0),P.set([NaN,NaN,NaN,NaN,L,B],0);for(let Y=4;Y<M;Y+=2){const te=O[Y]=N[Y]*A,oe=O[Y+1]=N[Y+1]*S;P.set(Ee.createBezierPoints(L,B,F,$,te,oe),(Y-2)*3),[L,B,F,$]=[F,$,te,oe]}}if(y.length===0)return null;const C=u?new Rm:new mc;return C.build(y,t,s,1,r,u?0:m,o),{outline:C,newCurves:E,areContours:u,thickness:m,width:p,height:g}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:o}){let l=1/0,u=-1/0,h=0;for(const N of e){h+=N.length;for(let M=2,O=N.length;M<O;M++){const P=N[M]-N[M-2];l=Math.min(l,P),u=Math.max(u,P)}}let p;l>=-128&&u<=127?p=Int8Array:l>=-32768&&u<=32767?p=Int16Array:p=Int32Array;const g=e.length,m=Yu+Ll*g,y=new Uint32Array(m);let b=0;y[b++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*g)*p.BYTES_PER_ELEMENT,y[b++]=0,y[b++]=r,y[b++]=o,y[b++]=t?0:1,y[b++]=Math.max(0,Math.floor(s??0)),y[b++]=g,y[b++]=p.BYTES_PER_ELEMENT;for(const N of e)y[b++]=N.length-2,y[b++]=N[0],y[b++]=N[1];const A=new CompressionStream("deflate-raw"),S=A.writable.getWriter();await S.ready,S.write(y);const E=p.prototype.constructor;for(const N of e){const M=new E(N.length-2);for(let O=2,P=N.length;O<P;O++)M[O-2]=N[O]-N[O-2];S.write(M)}S.close();const C=await new Response(A.readable).arrayBuffer(),j=new Uint8Array(C);return xC(j)}static async decompressSignature(e){try{const t=X4(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(t).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const N of s)l||=new Uint8Array(new Uint32Array(N.buffer,0,4)[0]),l.set(N,u),u+=N.length;const h=new Uint32Array(l.buffer,0,l.length>>2),p=h[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const g=h[2],m=h[3],y=h[4]===0,b=h[5],A=h[6],S=h[7],E=[],C=(Yu+Ll*A)*Uint32Array.BYTES_PER_ELEMENT;let j;switch(S){case Int8Array.BYTES_PER_ELEMENT:j=new Int8Array(l.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:j=new Int16Array(l.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:j=new Int32Array(l.buffer,C);break}u=0;for(let N=0;N<A;N++){const M=h[Ll*N+Yu],O=new Float32Array(M+2);E.push(O);for(let P=0;P<Ll-1;P++)O[P]=h[Ll*N+Yu+P+1];for(let P=0;P<M;P++)O[P+2]=O[P]+j[u++]}return{areContours:y,thickness:b,outlines:E,width:g,height:m}}catch(t){return We(`decompressSignature: ${t}`),null}}}class Ug extends ZC{constructor(){super(),super.updateProperties({fill:Oe._defaultLineColor,"stroke-width":0})}clone(){const e=new Ug;return e.updateAll(this),e}}class Vg extends eh{constructor(e){super(e),super.updateProperties({stroke:Oe._defaultLineColor,"stroke-width":1})}clone(){const e=new Vg(this._viewParameters);return e.updateAll(this),e}}class Js extends Ve{#e=!1;#t=null;#s=null;#n=null;static _type="signature";static _editorType=Xe.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Oe.initialize(e,t),this._defaultDrawingOptions=new Ug,this._defaultDrawnSignatureOptions=new Vg(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Je(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:r,mustSmooth:o,areContours:l,description:u,uuid:h,heightInPage:p}=this.#s,{rawDims:{pageWidth:g,pageHeight:m},rotation:y}=this.parent.viewport,b=Wa.processDrawnLines({lines:r,pageWidth:g,pageHeight:m,rotation:y,innerMargin:Js._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(b,p,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:s,width:r,height:o}=this.#s,l=Math.max(r,o),u=Wa.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,s,r){const{x:o,y:l}=this,{outline:u}=this.#s=e;this.#e=u instanceof Rm,this.description=s;let h;this.#e?h=Js.getDefaultDrawingOptions():(h=Js._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,p]=this.pageDimensions;let g=t/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:r}=this.parent.viewport;return Wa.process(e,t,s,r,Js._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return Wa.extractContoursFromText(e,t,s,r,o,Js._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:r}=this.parent.viewport;return Wa.processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:Js._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Js.getDefaultDrawingOptions():(this._drawingOptions=Js._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:r});return this.addComment(o),e?(o.paths={lines:t,points:s},o.uuid=this.#n,o.isCopy=!0):o.lines=t,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(e,t,s,r,o,l){return l.areContours?Rm.deserialize(e,t,s,r,o,l):mc.deserialize(e,t,s,r,o,l)}static async deserialize(e,t,s){const r=await super.deserialize(e,t,s);return r.#e=e.areContours,r.description=e.accessibilityData?.alt||"",r.#n=e.uuid,r}}class CI extends Oe{#e=null;#t=null;#s=null;#n=null;#r=null;#i="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Xe.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#r=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Oe.initialize(e,t)}static isHandlingMimeForPasting(e){return xd.includes(e)}static paste(e,t){t.pasteEditor({mode:Xe.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#p()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),t&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#d(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#d(r)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(s).then(r=>this.#d(r)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=xd.join(",");const t=this._uiManager._signal;this.#s=new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(r)}s()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#s||this.#e||this.#n||this.#r||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#t=s,r&&(this.#e=r),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},e)}#p(){const{div:e}=this;let{width:t,height:s}=this.#e;const[r,o]=this.pageDimensions,l=.75;if(this.width)t=this.width*r,s=this.height*o;else if(t>l*r||s>l*o){const h=Math.min(l*r/t,l*o/s);t*=h,s*=h}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=t/r,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,s=!1){e||(e=224);const{width:r,height:o}=this.#e,l=new Fs;let u=this.#e,h=r,p=o,g=null;if(t){if(r>t||o>t){const P=Math.min(t/r,t/o);h=Math.floor(r*P),p=Math.floor(o*P)}g=document.createElement("canvas");const y=g.width=Math.ceil(h*l.sx),b=g.height=Math.ceil(p*l.sy);this.#l||(u=this.#u(y,b));const A=g.getContext("2d");A.filter=this._uiManager.hcmFilter;let S="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":Q4.isDarkMode&&(S="#8f8f9d",E="#42414d");const C=15,j=C*l.sx,N=C*l.sy,M=new OffscreenCanvas(j*2,N*2),O=M.getContext("2d");O.fillStyle=S,O.fillRect(0,0,j*2,N*2),O.fillStyle=E,O.fillRect(0,0,j,N),O.fillRect(j,N,j,N),A.fillStyle=A.createPattern(M,"repeat"),A.fillRect(0,0,y,b),A.drawImage(u,0,0,u.width,u.height,0,0,y,b)}let m=null;if(s){let y,b;if(l.symmetric&&u.width<e&&u.height<e)y=u.width,b=u.height;else if(u=this.#e,r>e||o>e){const E=Math.min(e/r,e/o);y=Math.floor(r*E),b=Math.floor(o*E),this.#l||(u=this.#u(y,b))}const S=new OffscreenCanvas(y,b).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,y,b),m={width:y,height:b,data:S.getImageData(0,0,y,b).data}}return{canvas:g,width:h,height:p,imageData:m}}#u(e,t){const{width:s,height:r}=this.#e;let o=s,l=r,u=this.#e;for(;o>2*e||l>2*t;){const h=o,p=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(u,0,0,h,p,0,0,o,l),u=g.transferToImageBitmap()}return u}#m(){const[e,t]=this.parentDimensions,{width:s,height:r}=this,o=new Fs,l=Math.ceil(s*e*o.sx),u=Math.ceil(r*t*o.sy),h=this.#a;if(!h||h.width===l&&h.height===u)return;h.width=l,h.height=u;const p=this.#l?this.#e:this.#u(l,u),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,l,u)}#v(e){if(e){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,s]=this.pageDimensions,r=Math.round(this.width*t*ar.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ar.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,s){let r=null,o=!1;if(e instanceof WC){const{data:{rect:S,rotation:E,id:C,structParent:j,popupRef:N,richText:M,contentsObj:O,creationDate:P,modificationDate:L},container:B,parent:{page:{pageNumber:F}},canvas:$}=e;let Y,te;$?(delete e.canvas,{id:Y,bitmap:te}=s.imageManager.getFromCanvas(B.id,$),$.remove()):(o=!0,e._hasNoCanvas=!0);const oe=(await t._structTree.getAriaAttributes(`${Eg}${C}`))?.get("aria-label")||"";r=e={annotationType:Xe.STAMP,bitmapId:Y,bitmap:te,pageIndex:F-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:oe},isSvg:!1,structParent:j,popupRef:N,richText:M,comment:O?.str||null,creationDate:P,modificationDate:L}}const l=await super.deserialize(e,t,s),{rect:u,bitmap:h,bitmapUrl:p,bitmapId:g,isSvg:m,accessibilityData:y}=e;o?(s.addMissingCanvas(e.id,l),l.#o=!0):g&&s.imageManager.isValidId(g)?(l.#t=g,h&&(l.#e=h)):l.#n=p,l.#l=m;const[b,A]=l.pageDimensions;return l.width=(u[2]-u[0])/b,l.height=(u[3]-u[1])/A,y&&(l.altTextData=y),l._initialData=r,e.comment&&l.setCommentData(e),l.#h=!!r,l}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(s),e)return s.bitmapUrl=this.#v(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#x(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(t===null)return s;t.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:l,serialized:s}),s.bitmap=this.#v(!1);else if(this.#l){const u=t.stamps.get(this.#t);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#v(!1))}return s}#x(e){const{pageIndex:t,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===t,o=(e.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class ti{#e;#t=!1;#s=null;#n=null;#r=null;#i=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([dn,Hg,CI,Gt,Js].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:h,viewport:p,l10n:g}){const m=[...ti.#m.values()];if(!ti._initialized){ti._initialized=!0;for(const y of m)y.initialize(g,e)}e.registerEditorTypes(m),this.#u=e,this.pageIndex=t,this.div=s,this.#e=o,this.#s=l,this.viewport=p,this.#d=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Xe.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#b(),e){case Xe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Xe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Xe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of ti.#m.values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#s?.div.classList.toggle("disabled",!e)}get#v(){return this.#i.size!==0?this.#i.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const s of this.#v)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=this.#s;if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const s=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:u,timeStamp:h}=r,p=this.#p;if(h-p>500){this.#p=h;return}this.#p=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const m=document.elementsFromPoint(l,u);if(g.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const b=new RegExp(`^${Ql}[0-9]+$`);for(const S of m)if(b.test(S.id)){y=S.id;break}if(!y)return;const A=this.#i.get(y);A?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),A.dblclick(r))},{signal:s,capture:!0})}const e=this.#s;if(e){const s=new Map,r=new Map;for(const l of this.#v){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let h=r.get(u);if(h){h.resetAnnotationElement(l),h.show(!1),l.show();continue}h=s.get(u),h&&(this.#u.addChangedExistingAnnotation(h),h.renderAnnotationElement(l)&&h.show(!1)),l.show()}}this.#b(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of ti.#m.values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#s?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#x.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#x(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:s}=pn.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Gt.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),Oe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#r&&(e._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of this.#i.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#y(){return ti.#m.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#E(e){const t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:s,offsetY:r}=this.#A(),o=this.getNextId(),l=this.#E({parent:this,id:o,x:s,y:r,uiManager:this.#u,isCentered:!0,...t});l&&this.add(l)}async deserialize(e){return await ti.#m.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),o=this.#E({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:e,y:t,width:s,height:r}=this.boundingClientRect,o=Math.max(0,e),l=Math.max(0,t),u=Math.min(window.innerWidth,e+s),h=Math.min(window.innerHeight,t+r),p=(o+u)/2-e,g=(l+h)/2-t,[m,y]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:m,offsetY:y}}addNewEditor(e={}){this.createAndAddNewEditor(this.#A(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#a||(this.#a=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const s=this.#u.getMode();if(s===Xe.STAMP||s===Xe.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===Xe.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#a=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const s=this.#u.getActive();this.#t=!s||s.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,t,s){const r=this.#u.findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#u.removeLayer(this)}#b(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,_a(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#b();const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,_a(this.div,{rotation:s}),t!==s)for(const r of this.#i.values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class hn{#e=null;#t=new Map;#s=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Je(this,"_svgFactory",new nc)}static#r(e,[t,s,r,o]){const{style:l}=e;l.top=`${100*s}%`,l.left=`${100*t}%`,l.width=`${100*r}%`,l.height=`${100*o}%`}#i(){const e=hn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,t){const s=hn._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=hn._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r}#o(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)}draw(e,t=!1,s=!1){const r=hn.#n++,o=this.#i(),l=hn._svgFactory.createElement("defs");o.append(l);const u=hn._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(r,u);const p=s?this.#a(l,h):null,g=hn._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${h}`),this.updateProperties(o,e),this.#t.set(r,o),{id:r,clipPathId:`url(#${p})`}}drawOutline(e,t){const s=hn.#n++,r=this.#i(),o=hn._svgFactory.createElement("defs");r.append(o);const l=hn._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const m=hn._svgFactory.createElement("mask");o.append(m),h=`mask_p${this.pageIndex}_${s}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const y=hn._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const b=hn._svgFactory.createElement("use");m.append(b),b.setAttribute("href",`#${u}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const p=hn._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${u}`),h&&p.setAttribute("mask",`url(#${h})`);const g=p.cloneNode();return r.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#t.set(s,r),s}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:s,bbox:r,rootClass:o,path:l}=t,u=typeof e=="number"?this.#t.get(e):e;if(u){if(s&&this.#o(u,s),r&&hn.#r(u,r),o){const{classList:h}=u;for(const[p,g]of Object.entries(o))h.toggle(p,g)}if(l){const p=u.firstChild.firstChild;this.#o(p,l)}}}updateParent(e,t){if(t===this)return;const s=this.#t.get(e);s&&(t.#e.append(s),this.#t.delete(e),t.#t.set(e,s))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:jm};globalThis.pdfjsLib={AbortException:Hi,AnnotationEditorLayer:ti,AnnotationEditorParamsType:rt,AnnotationEditorType:Xe,AnnotationEditorUIManager:Ui,AnnotationLayer:Fg,AnnotationMode:si,AnnotationType:$t,applyOpacity:CC,build:$C,ColorPicker:is,createValidAbsoluteUrl:Sg,CSSConstants:AC,DOMSVGFactory:nc,DrawLayer:hn,FeatureTest:pn,fetchData:Po,findContrastColor:EC,getDocument:Og,getFilenameFromUrl:bC,getPdfFilenameFromUrl:wC,getRGB:Io,getUuid:Cg,getXfaPageViewport:SC,GlobalWorkerOptions:wa,ImageKind:Vl,InvalidPDFException:vd,isDataScheme:dc,isPdfFile:Zd,isValidExplicitDest:jC,MathClamp:Nn,noContextMenu:ls,normalizeUnicode:yC,OPS:Co,OutputScale:Fs,PasswordResponses:gC,PDFDataRangeTransport:Pg,PDFDateString:yd,PDFWorker:Eo,PermissionFlag:mC,PixelsPerInch:ar,RenderingCancelledException:Qd,renderRichText:Tg,ResponseException:Zl,setLayerDimensions:_a,shadow:Je,SignatureExtractor:Wa,stopEvent:Pt,SupportedImageMimeTypes:xd,TextLayer:ec,TouchManager:fc,updateUrlHash:Ag,Util:_e,VerbosityLevel:lc,version:Ig,XfaLayer:_g};const EI=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Hi,AnnotationEditorLayer:ti,AnnotationEditorParamsType:rt,AnnotationEditorType:Xe,AnnotationEditorUIManager:Ui,AnnotationLayer:Fg,AnnotationMode:si,AnnotationType:$t,CSSConstants:AC,ColorPicker:is,DOMSVGFactory:nc,DrawLayer:hn,FeatureTest:pn,GlobalWorkerOptions:wa,ImageKind:Vl,InvalidPDFException:vd,MathClamp:Nn,OPS:Co,OutputScale:Fs,PDFDataRangeTransport:Pg,PDFDateString:yd,PDFWorker:Eo,PasswordResponses:gC,PermissionFlag:mC,PixelsPerInch:ar,RenderingCancelledException:Qd,ResponseException:Zl,SignatureExtractor:Wa,SupportedImageMimeTypes:xd,TextLayer:ec,TouchManager:fc,Util:_e,VerbosityLevel:lc,XfaLayer:_g,applyOpacity:CC,build:$C,createValidAbsoluteUrl:Sg,fetchData:Po,findContrastColor:EC,getDocument:Og,getFilenameFromUrl:bC,getPdfFilenameFromUrl:wC,getRGB:Io,getUuid:Cg,getXfaPageViewport:SC,isDataScheme:dc,isPdfFile:Zd,isValidExplicitDest:jC,noContextMenu:ls,normalizeUnicode:yC,renderRichText:Tg,setLayerDimensions:_a,shadow:Je,stopEvent:Pt,updateUrlHash:Ag,version:Ig},Symbol.toStringTag,{value:"Module"}));var _w=Object.prototype.hasOwnProperty;function Tw(a,e,t){for(t of a.keys())if(fo(t,e))return t}function fo(a,e){var t,s,r;if(a===e)return!0;if(a&&e&&(t=a.constructor)===e.constructor){if(t===Date)return a.getTime()===e.getTime();if(t===RegExp)return a.toString()===e.toString();if(t===Array){if((s=a.length)===e.length)for(;s--&&fo(a[s],e[s]););return s===-1}if(t===Set){if(a.size!==e.size)return!1;for(s of a)if(r=s,r&&typeof r=="object"&&(r=Tw(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(a.size!==e.size)return!1;for(s of a)if(r=s[0],r&&typeof r=="object"&&(r=Tw(e,r),!r)||!fo(s[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)a=new Uint8Array(a),e=new Uint8Array(e);else if(t===DataView){if((s=a.byteLength)===e.byteLength)for(;s--&&a.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(a)){if((s=a.byteLength)===e.byteLength)for(;s--&&a[s]===e[s];);return s===-1}if(!t||typeof a=="object"){s=0;for(t in a)if(_w.call(a,t)&&++s&&!_w.call(e,t)||!(t in e)||!fo(a[t],e[t]))return!1;return Object.keys(e).length===s}}return a!==a&&e!==e}function gc(a){let e=!1;return{promise:new Promise((s,r)=>{a.then(o=>!e&&s(o)).catch(o=>!e&&r(o))}),cancel(){e=!0}}}const _I=["onCopy","onCut","onPaste"],TI=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],NI=["onFocus","onBlur"],jI=["onInput","onInvalid","onReset","onSubmit"],MI=["onLoad","onError"],RI=["onKeyDown","onKeyPress","onKeyUp"],DI=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],kI=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],OI=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],LI=["onSelect"],PI=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],II=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],BI=["onScroll"],zI=["onWheel"],FI=["onAnimationStart","onAnimationEnd","onAnimationIteration"],HI=["onTransitionEnd"],UI=["onToggle"],VI=["onChange"],$I=[..._I,...TI,...NI,...jI,...MI,...RI,...DI,...kI,...OI,...LI,...PI,...II,...BI,...zI,...FI,...HI,...VI,...UI];function JC(a,e){const t={};for(const s of $I){const r=a[s];r&&(e?t[s]=(o=>r(o,e(s))):t[s]=r)}return t}var GI="Invariant failed";function _t(a,e){if(!a)throw new Error(GI)}var em,Nw;function qI(){if(Nw)return em;Nw=1;var a=function(){};return em=a,em}var YI=qI();const jn=Bm(YI),eE=w.createContext(null),XI="noopener noreferrer nofollow";class WI{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return _t(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){_t(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||XI,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{_t(this.pdfDocument),_t(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{_t(Array.isArray(t));const s=t[0];new Promise(r=>{_t(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{r(o)}).catch(()=>{_t(!1)}):typeof s=="number"?r(s):_t(!1)}).then(r=>{const o=r+1;_t(this.pdfViewer),_t(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:o})})})}goToPage(e){const t=e-1;_t(this.pdfViewer),_t(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function po({children:a,type:e}){return d.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:a})}const jw={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function KI(a,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return a}}function _o(){return w.useReducer(KI,{value:void 0,error:void 0})}const th=typeof window<"u",tE=th&&window.location.protocol==="file:";function QI(a){return typeof a<"u"}function Xa(a){return QI(a)&&a!==null}function ZI(a){return typeof a=="string"}function JI(a){return a instanceof ArrayBuffer}function e5(a){return _t(th),a instanceof Blob}function Dm(a){return ZI(a)&&/^data:/.test(a)}function Mw(a){_t(Dm(a));const[e="",t=""]=a.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function t5(){return th&&window.devicePixelRatio||1}const nE="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Rw(){jn(!tE,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${nE}`)}function n5(){jn(!tE,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${nE}`)}function or(a){a?.cancel&&a.cancel()}function km(a,e){return Object.defineProperty(a,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(a,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(a,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(a,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),a}function sE(a){return a.name==="AbortException"||a.name==="RenderingCancelledException"}function s5(a){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return t(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(a)})}const{PDFDataRangeTransport:i5}=EI,a5=(a,e)=>{switch(e){case jw.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");a(t);break}case jw.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");a(t);break}}};function Dw(a){return typeof a=="object"&&a!==null&&("data"in a||"range"in a||"url"in a)}const tm=w.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:o,file:l,inputRef:u,imageResourcesPath:h,loading:p="Loading PDF",noData:g="No PDF file specified.",onItemClick:m,onLoadError:y,onLoadProgress:b,onLoadSuccess:A,onPassword:S=a5,onSourceError:E,onSourceSuccess:C,options:j,renderMode:N,rotate:M,scale:O,...P},L){const[B,F]=_o(),{value:$,error:Y}=B,[te,oe]=_o(),{value:ie,error:fe}=te,R=w.useRef(new WI),U=w.useRef([]),H=w.useRef(void 0),z=w.useRef(void 0);l&&l!==H.current&&Dw(l)&&(jn(!fo(l,H.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),H.current=l),j&&j!==z.current&&(jn(!fo(j,z.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),z.current=j);const se=w.useRef({scrollPageIntoView:Be=>{const{dest:De,pageNumber:K,pageIndex:be=K-1}=Be;if(m){m({dest:De,pageIndex:be,pageNumber:K});return}const Le=U.current[be];if(Le){Le.scrollIntoView();return}jn(!1,`An internal link leading to page ${K} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});w.useImperativeHandle(L,()=>({linkService:R,pages:U,viewer:se}),[]);function T(){C&&C()}function k(){Y&&(jn(!1,Y.toString()),E&&E(Y))}function I(){F({type:"RESET"})}w.useEffect(I,[l,F]);const q=w.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Dm(l)?{data:Mw(l)}:(Rw(),{url:l});if(l instanceof i5)return{range:l};if(JI(l))return{data:l};if(th&&e5(l))return{data:await s5(l)};if(_t(typeof l=="object"),_t(Dw(l)),"url"in l&&typeof l.url=="string"){if(Dm(l.url)){const{url:Be,...De}=l;return{data:Mw(Be),...De}}Rw()}return l},[l]);w.useEffect(()=>{const Be=gc(q());return Be.promise.then(De=>{F({type:"RESOLVE",value:De})}).catch(De=>{F({type:"REJECT",error:De})}),()=>{or(Be)}},[q,F]),w.useEffect(()=>{if(!(typeof $>"u")){if($===!1){k();return}T()}},[$]);function X(){ie&&(A&&A(ie),U.current=new Array(ie.numPages),R.current.setDocument(ie))}function ce(){fe&&(jn(!1,fe.toString()),y&&y(fe))}w.useEffect(function(){oe({type:"RESET"})},[oe,$]),w.useEffect(function(){if(!$)return;const De=j?{...$,...j}:$,K=Og(De);b&&(K.onProgress=b),S&&(K.onPassword=S);const be=K;return be.promise.then(Le=>{be.destroyed||oe({type:"RESOLVE",value:Le})}).catch(Le=>{be.destroyed||oe({type:"REJECT",error:Le})}),()=>{be.destroy()}},[j,oe,$]),w.useEffect(()=>{if(!(typeof ie>"u")){if(ie===!1){ce();return}X()}},[ie]),w.useEffect(function(){R.current.setViewer(se.current),R.current.setExternalLinkRel(r),R.current.setExternalLinkTarget(o)},[r,o]);const Q=w.useCallback((Be,De)=>{U.current[Be]=De},[]),ue=w.useCallback(Be=>{delete U.current[Be]},[]),pe=w.useMemo(()=>({imageResourcesPath:h,linkService:R.current,onItemClick:m,pdf:ie,registerPage:Q,renderMode:N,rotate:M,scale:O,unregisterPage:ue}),[h,m,ie,Q,N,M,O,ue]),Ce=w.useMemo(()=>JC(P,()=>ie),[P,ie]);function ye(){function Be(K){return!!K?.pdf}if(!Be(pe))throw new Error("pdf is undefined");const De=typeof e=="function"?e(pe):e;return d.jsx(eE.Provider,{value:pe,children:De})}function Ne(){return l?ie==null?d.jsx(po,{type:"loading",children:typeof p=="function"?p():p}):ie===!1?d.jsx(po,{type:"error",children:typeof s=="function"?s():s}):ye():d.jsx(po,{type:"no-data",children:typeof g=="function"?g():g})}return d.jsx("div",{className:jo("react-pdf__Document",t),ref:u,...Ce,children:Ne()})});function iE(){return w.useContext(eE)}function aE(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];var t=a.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(o){for(var l=0,u=t;l<u.length;l++){var h=u[l];typeof h=="function"?h(o):h&&(h.current=o)}}}const rE=w.createContext(null);function nh(){return w.useContext(rE)}function r5(){const a=iE(),e=nh();_t(e);const t={...a,...e},{filterAnnotations:s,imageResourcesPath:r,linkService:o,onGetAnnotationsError:l,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:p,page:g,pdf:m,renderForms:y,rotate:b,scale:A=1}=t;_t(m),_t(g),_t(o);const[S,E]=_o(),{value:C,error:j}=S,N=w.useRef(null);jn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function M(){C&&u&&u(C)}function O(){j&&(jn(!1,j.toString()),l&&l(j))}w.useEffect(function(){E({type:"RESET"})},[E,g]),w.useEffect(function(){if(!g)return;const $=gc(g.getAnnotations()),Y=$;return $.promise.then(te=>{E({type:"RESOLVE",value:te})}).catch(te=>{E({type:"REJECT",error:te})}),()=>{or(Y)}},[E,g]),w.useEffect(()=>{if(C!==void 0){if(C===!1){O();return}M()}},[C]);function P(){p&&p()}function L(F){jn(!1,`${F}`),h&&h(F)}const B=w.useMemo(()=>g.getViewport({scale:A,rotation:b}),[g,b,A]);return w.useEffect(function(){if(!m||!g||!o||!C)return;const{current:$}=N;if(!$)return;const Y=B.clone({dontFlip:!0}),te={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:m.annotationStorage,commentManager:null,div:$,l10n:null,linkService:o,page:g,structTreeLayer:null,viewport:Y},oe={annotations:s?s({annotations:C}):C,annotationStorage:m.annotationStorage,div:$,imageResourcesPath:r,linkService:o,page:g,renderForms:y,viewport:Y};$.innerHTML="";try{new Fg(te).render(oe),P()}catch(ie){L(ie)}return()=>{}},[C,s,r,o,g,m,y,B]),d.jsx("div",{className:jo("react-pdf__Page__annotations","annotationLayer"),ref:N})}const oE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},o5=/^H(\d+)$/;function l5(a){return a in oE}function sh(a){return"children"in a}function lE(a){return sh(a)?a.children.length===1&&0 in a.children&&"id"in a.children[0]:!1}function c5(a){const e={};if(sh(a)){const{role:t}=a,s=t.match(o5);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(l5(t)){const r=oE[t];r&&(e.role=r)}}return e}function cE(a){const e={};if(sh(a)){if(a.alt!==void 0&&(e["aria-label"]=a.alt),a.lang!==void 0&&(e.lang=a.lang),lE(a)){const[t]=a.children;if(t){const s=cE(t);return{...e,...s}}}}else"id"in a&&(e["aria-owns"]=a.id);return e}function u5(a){return a?{...c5(a),...cE(a)}:null}function uE({className:a,node:e}){const t=w.useMemo(()=>u5(e),[e]),s=w.useMemo(()=>!sh(e)||lE(e)?null:e.children.map((r,o)=>d.jsx(uE,{node:r},o)),[e]);return d.jsx("span",{className:a,...t,children:s})}function d5(){const a=nh();_t(a);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=a,[s,r]=_o(),{value:o,error:l}=s,{customTextRenderer:u,page:h}=a;function p(){o&&t&&t(o)}function g(){l&&(jn(!1,l.toString()),e&&e(l))}return w.useEffect(function(){r({type:"RESET"})},[r,h]),w.useEffect(function(){if(u||!h)return;const y=gc(h.getStructTree()),b=y;return y.promise.then(A=>{r({type:"RESOLVE",value:A})}).catch(A=>{r({type:"REJECT",error:A})}),()=>or(b)},[u,h,r]),w.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}p()}},[o]),o?d.jsx(uE,{className:"react-pdf__Page__structTree structTree",node:o}):null}const kw=si;function h5(a){const e=nh();_t(e);const t={...e,...a},{_className:s,canvasBackground:r,devicePixelRatio:o=t5(),onRenderError:l,onRenderSuccess:u,page:h,renderForms:p,renderTextLayer:g,rotate:m,scale:y}=t,{canvasRef:b}=a;_t(h);const A=w.useRef(null);function S(){h&&u&&u(km(h,y))}function E(M){sE(M)||(jn(!1,M.toString()),l&&l(M))}const C=w.useMemo(()=>h.getViewport({scale:y*o,rotation:m}),[o,h,m,y]),j=w.useMemo(()=>h.getViewport({scale:y,rotation:m}),[h,m,y]);w.useEffect(function(){if(!h)return;h.cleanup();const{current:O}=A;if(!O)return;O.width=C.width,O.height=C.height,O.style.width=`${Math.floor(j.width)}px`,O.style.height=`${Math.floor(j.height)}px`,O.style.visibility="hidden";const P={annotationMode:p?kw.ENABLE_FORMS:kw.ENABLE,canvas:O,canvasContext:O.getContext("2d",{alpha:!1}),viewport:C};r&&(P.background=r);const L=h.render(P),B=L;return L.promise.then(()=>{O.style.visibility="",S()}).catch(E),()=>or(B)},[r,h,p,C,j]);const N=w.useCallback(()=>{const{current:M}=A;M&&(M.width=0,M.height=0)},[]);return w.useEffect(()=>N,[N]),d.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:aE(b,A),style:{display:"block",userSelect:"none"},children:g?d.jsx(d5,{}):null})}function f5(a){return"str"in a}function p5(){const a=nh();_t(a);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:l,pageIndex:u,pageNumber:h,rotate:p,scale:g}=a;_t(l);const[m,y]=_o(),{value:b,error:A}=m,S=w.useRef(null);jn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){b&&s&&s(b)}function C(){A&&(jn(!1,A.toString()),t&&t(A))}w.useEffect(function(){y({type:"RESET"})},[l,y]),w.useEffect(function(){if(!l)return;const B=gc(l.getTextContent()),F=B;return B.promise.then($=>{y({type:"RESOLVE",value:$})}).catch($=>{y({type:"REJECT",error:$})}),()=>or(F)},[l,y]),w.useEffect(()=>{if(b!==void 0){if(b===!1){C();return}E()}},[b]);const j=w.useCallback(()=>{o&&o()},[o]),N=w.useCallback(L=>{sE(L)||(jn(!1,L.toString()),r&&r(L))},[r]);function M(){const L=S.current;L&&L.classList.add("selecting")}function O(){const L=S.current;L&&L.classList.remove("selecting")}const P=w.useMemo(()=>l.getViewport({scale:g,rotation:p}),[l,p,g]);return w.useLayoutEffect(function(){if(!l||!b)return;const{current:B}=S;if(!B)return;B.innerHTML="";const F=l.streamTextContent({includeMarkedContent:!0}),$={container:B,textContentSource:F,viewport:P},Y=new ec($),te=Y;return Y.render().then(()=>{const oe=document.createElement("div");oe.className="endOfContent",B.append(oe);const ie=B.querySelectorAll('[role="presentation"]');if(e){let fe=0;b.items.forEach((R,U)=>{if(!f5(R))return;const H=ie[fe];if(!H)return;const z=e({pageIndex:u,pageNumber:h,itemIndex:U,...R});H.innerHTML=z,fe+=R.str&&R.hasEOL?2:1})}j()}).catch(N),()=>or(te)},[e,N,j,l,u,h,b,P]),d.jsx("div",{className:jo("react-pdf__Page__textContent","textLayer"),onMouseUp:O,onMouseDown:M,ref:S})}const Ow=1;function nm(a){const t={...iE(),...a},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:l,children:u,className:h,customRenderer:p,customTextRenderer:g,devicePixelRatio:m,error:y="Failed to load the page.",filterAnnotations:b,height:A,inputRef:S,loading:E="Loading page",noData:C="No page specified.",onGetAnnotationsError:j,onGetAnnotationsSuccess:N,onGetStructTreeError:M,onGetStructTreeSuccess:O,onGetTextError:P,onGetTextSuccess:L,onLoadError:B,onLoadSuccess:F,onRenderAnnotationLayerError:$,onRenderAnnotationLayerSuccess:Y,onRenderError:te,onRenderSuccess:oe,onRenderTextLayerError:ie,onRenderTextLayerSuccess:fe,pageIndex:R,pageNumber:U,pdf:H,registerPage:z,renderAnnotationLayer:se=!0,renderForms:T=!1,renderMode:k="canvas",renderTextLayer:I=!0,rotate:q,scale:X=Ow,unregisterPage:ce,width:Q,...ue}=t,[pe,Ce]=_o(),{value:ye,error:Ne}=pe,Be=w.useRef(null);_t(H);const De=Xa(U)?U-1:R??null,K=U??(Xa(R)?R+1:null),be=q??(ye?ye.rotate:null),Le=w.useMemo(()=>{if(!ye)return null;let vt=1;const Ot=X??Ow;if(Q||A){const Nt=ye.getViewport({scale:1,rotation:be});Q?vt=Q/Nt.width:A&&(vt=A/Nt.height)}return Ot*vt},[A,ye,be,X,Q]);w.useEffect(function(){return()=>{Xa(De)&&r&&ce&&ce(De)}},[r,H,De,ce]);function et(){if(F){if(!ye||!Le)return;F(km(ye,Le))}if(r&&z){if(!Xa(De)||!Be.current)return;z(De,Be.current)}}function ut(){Ne&&(jn(!1,Ne.toString()),B&&B(Ne))}w.useEffect(function(){Ce({type:"RESET"})},[Ce,H,De]),w.useEffect(function(){if(!H||!K)return;const Ot=gc(H.getPage(K)),Nt=Ot;return Ot.promise.then(Xn=>{Ce({type:"RESOLVE",value:Xn})}).catch(Xn=>{Ce({type:"REJECT",error:Xn})}),()=>or(Nt)},[Ce,H,K]),w.useEffect(()=>{if(ye!==void 0){if(ye===!1){ut();return}et()}},[ye,Le]);const Bt=w.useMemo(()=>Xa(De)&&K&&Xa(be)&&Xa(Le)?{_className:s,canvasBackground:o,customTextRenderer:g,devicePixelRatio:m,filterAnnotations:b,onGetAnnotationsError:j,onGetAnnotationsSuccess:N,onGetStructTreeError:M,onGetStructTreeSuccess:O,onGetTextError:P,onGetTextSuccess:L,onRenderAnnotationLayerError:$,onRenderAnnotationLayerSuccess:Y,onRenderError:te,onRenderSuccess:oe,onRenderTextLayerError:ie,onRenderTextLayerSuccess:fe,page:ye,pageIndex:De,pageNumber:K,renderForms:T,renderTextLayer:I,rotate:be,scale:Le}:null,[s,o,g,m,b,j,N,M,O,P,L,$,Y,te,oe,ie,fe,ye,De,K,T,I,be,Le]),mt=w.useMemo(()=>JC(ue,()=>ye&&(Le?km(ye,Le):void 0)),[ue,ye,Le]),gt=`${De}@${Le}/${be}`;function ve(){switch(k){case"custom":return _t(p),d.jsx(p,{},`${gt}_custom`);case"none":return null;default:return d.jsx(h5,{canvasRef:l},`${gt}_canvas`)}}function Qe(){return I?d.jsx(p5,{},`${gt}_text`):null}function re(){return se?d.jsx(r5,{},`${gt}_annotations`):null}function we(){function vt(Nt){return!!Nt?.page}if(!vt(Bt))throw new Error("page is undefined");const Ot=typeof u=="function"?u(Bt):u;return d.jsxs(rE.Provider,{value:Bt,children:[ve(),Qe(),re(),Ot]})}function He(){return K?H===null||ye===void 0||ye===null?d.jsx(po,{type:"loading",children:typeof E=="function"?E():E}):H===!1||ye===!1?d.jsx(po,{type:"error",children:typeof y=="function"?y():y}):we():d.jsx(po,{type:"no-data",children:typeof C=="function"?C():C})}return d.jsx("div",{className:jo(s,h),"data-page-number":K,ref:aE(S,Be),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Le}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...mt,children:He()})}n5();wa.workerSrc="pdf.worker.mjs";var ih="Checkbox",[m5]=cs(ih),[g5,$g]=m5(ih);function v5(a){const{__scopeCheckbox:e,checked:t,children:s,defaultChecked:r,disabled:o,form:l,name:u,onCheckedChange:h,required:p,value:g="on",internal_do_not_use_render:m}=a,[y,b]=Bi({prop:t,defaultProp:r??!1,onChange:h,caller:ih}),[A,S]=w.useState(null),[E,C]=w.useState(null),j=w.useRef(!1),N=A?!!l||!!A.closest("form"):!0,M={checked:y,disabled:o,setChecked:b,control:A,setControl:S,name:u,form:l,value:g,hasConsumerStoppedPropagationRef:j,required:p,defaultChecked:Sa(r)?!1:r,isFormControl:N,bubbleInput:E,setBubbleInput:C};return d.jsx(g5,{scope:e,...M,children:y5(m)?m(M):s})}var dE="CheckboxTrigger",hE=w.forwardRef(({__scopeCheckbox:a,onKeyDown:e,onClick:t,...s},r)=>{const{control:o,value:l,disabled:u,checked:h,required:p,setControl:g,setChecked:m,hasConsumerStoppedPropagationRef:y,isFormControl:b,bubbleInput:A}=$g(dE,a),S=qe(r,g),E=w.useRef(h);return w.useEffect(()=>{const C=o?.form;if(C){const j=()=>m(E.current);return C.addEventListener("reset",j),()=>C.removeEventListener("reset",j)}},[o,m]),d.jsx(Ie.button,{type:"button",role:"checkbox","aria-checked":Sa(h)?"mixed":h,"aria-required":p,"data-state":yE(h),"data-disabled":u?"":void 0,disabled:u,value:l,...s,ref:S,onKeyDown:xe(e,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:xe(t,C=>{m(j=>Sa(j)?!0:!j),A&&b&&(y.current=C.isPropagationStopped(),y.current||C.stopPropagation())})})});hE.displayName=dE;var fE=w.forwardRef((a,e)=>{const{__scopeCheckbox:t,name:s,checked:r,defaultChecked:o,required:l,disabled:u,value:h,onCheckedChange:p,form:g,...m}=a;return d.jsx(v5,{__scopeCheckbox:t,checked:r,defaultChecked:o,disabled:u,required:l,onCheckedChange:p,name:s,form:g,value:h,internal_do_not_use_render:({isFormControl:y})=>d.jsxs(d.Fragment,{children:[d.jsx(hE,{...m,ref:e,__scopeCheckbox:t}),y&&d.jsx(vE,{__scopeCheckbox:t})]})})});fE.displayName=ih;var pE="CheckboxIndicator",mE=w.forwardRef((a,e)=>{const{__scopeCheckbox:t,forceMount:s,...r}=a,o=$g(pE,t);return d.jsx(Yn,{present:s||Sa(o.checked)||o.checked===!0,children:d.jsx(Ie.span,{"data-state":yE(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...a.style}})})});mE.displayName=pE;var gE="CheckboxBubbleInput",vE=w.forwardRef(({__scopeCheckbox:a,...e},t)=>{const{control:s,hasConsumerStoppedPropagationRef:r,checked:o,defaultChecked:l,required:u,disabled:h,name:p,value:g,form:m,bubbleInput:y,setBubbleInput:b}=$g(gE,a),A=qe(t,b),S=Ud(o),E=Fd(s);w.useEffect(()=>{const j=y;if(!j)return;const N=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(N,"checked").set,P=!r.current;if(S!==o&&O){const L=new Event("click",{bubbles:P});j.indeterminate=Sa(o),O.call(j,Sa(o)?!1:o),j.dispatchEvent(L)}},[y,S,o,r]);const C=w.useRef(Sa(o)?!1:o);return d.jsx(Ie.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??C.current,required:u,disabled:h,name:p,value:g,form:m,...e,tabIndex:-1,ref:A,style:{...e.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});vE.displayName=gE;function y5(a){return typeof a=="function"}function Sa(a){return a==="indeterminate"}function yE(a){return Sa(a)?"indeterminate":a?"checked":"unchecked"}function Om({className:a,...e}){return d.jsx(fE,{"data-slot":"checkbox",className:Ge("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...e,children:d.jsx(mE,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:d.jsx(A1,{className:"size-3.5"})})})}function x5(a,e){return w.useReducer((t,s)=>e[t][s]??t,a)}var Gg="ScrollArea",[xE]=cs(Gg),[b5,_s]=xE(Gg),bE=w.forwardRef((a,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:r,scrollHideDelay:o=600,...l}=a,[u,h]=w.useState(null),[p,g]=w.useState(null),[m,y]=w.useState(null),[b,A]=w.useState(null),[S,E]=w.useState(null),[C,j]=w.useState(0),[N,M]=w.useState(0),[O,P]=w.useState(!1),[L,B]=w.useState(!1),F=qe(e,Y=>h(Y)),$=No(r);return d.jsx(b5,{scope:t,type:s,dir:$,scrollHideDelay:o,scrollArea:u,viewport:p,onViewportChange:g,content:m,onContentChange:y,scrollbarX:b,onScrollbarXChange:A,scrollbarXEnabled:O,onScrollbarXEnabledChange:P,scrollbarY:S,onScrollbarYChange:E,scrollbarYEnabled:L,onScrollbarYEnabledChange:B,onCornerWidthChange:j,onCornerHeightChange:M,children:d.jsx(Ie.div,{dir:$,...l,ref:F,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":N+"px",...a.style}})})});bE.displayName=Gg;var wE="ScrollAreaViewport",SE=w.forwardRef((a,e)=>{const{__scopeScrollArea:t,children:s,nonce:r,...o}=a,l=_s(wE,t),u=w.useRef(null),h=qe(e,u,l.onViewportChange);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(Ie.div,{"data-radix-scroll-area-viewport":"",...o,ref:h,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...a.style},children:d.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});SE.displayName=wE;var ui="ScrollAreaScrollbar",AE=w.forwardRef((a,e)=>{const{forceMount:t,...s}=a,r=_s(ui,a.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=r,u=a.orientation==="horizontal";return w.useEffect(()=>(u?o(!0):l(!0),()=>{u?o(!1):l(!1)}),[u,o,l]),r.type==="hover"?d.jsx(w5,{...s,ref:e,forceMount:t}):r.type==="scroll"?d.jsx(S5,{...s,ref:e,forceMount:t}):r.type==="auto"?d.jsx(CE,{...s,ref:e,forceMount:t}):r.type==="always"?d.jsx(qg,{...s,ref:e}):null});AE.displayName=ui;var w5=w.forwardRef((a,e)=>{const{forceMount:t,...s}=a,r=_s(ui,a.__scopeScrollArea),[o,l]=w.useState(!1);return w.useEffect(()=>{const u=r.scrollArea;let h=0;if(u){const p=()=>{window.clearTimeout(h),l(!0)},g=()=>{h=window.setTimeout(()=>l(!1),r.scrollHideDelay)};return u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",g),()=>{window.clearTimeout(h),u.removeEventListener("pointerenter",p),u.removeEventListener("pointerleave",g)}}},[r.scrollArea,r.scrollHideDelay]),d.jsx(Yn,{present:t||o,children:d.jsx(CE,{"data-state":o?"visible":"hidden",...s,ref:e})})}),S5=w.forwardRef((a,e)=>{const{forceMount:t,...s}=a,r=_s(ui,a.__scopeScrollArea),o=a.orientation==="horizontal",l=rh(()=>h("SCROLL_END"),100),[u,h]=x5("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(u==="idle"){const p=window.setTimeout(()=>h("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(p)}},[u,r.scrollHideDelay,h]),w.useEffect(()=>{const p=r.viewport,g=o?"scrollLeft":"scrollTop";if(p){let m=p[g];const y=()=>{const b=p[g];m!==b&&(h("SCROLL"),l()),m=b};return p.addEventListener("scroll",y),()=>p.removeEventListener("scroll",y)}},[r.viewport,o,h,l]),d.jsx(Yn,{present:t||u!=="hidden",children:d.jsx(qg,{"data-state":u==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:xe(a.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:xe(a.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),CE=w.forwardRef((a,e)=>{const t=_s(ui,a.__scopeScrollArea),{forceMount:s,...r}=a,[o,l]=w.useState(!1),u=a.orientation==="horizontal",h=rh(()=>{if(t.viewport){const p=t.viewport.offsetWidth<t.viewport.scrollWidth,g=t.viewport.offsetHeight<t.viewport.scrollHeight;l(u?p:g)}},10);return To(t.viewport,h),To(t.content,h),d.jsx(Yn,{present:s||o,children:d.jsx(qg,{"data-state":o?"visible":"hidden",...r,ref:e})})}),qg=w.forwardRef((a,e)=>{const{orientation:t="vertical",...s}=a,r=_s(ui,a.__scopeScrollArea),o=w.useRef(null),l=w.useRef(0),[u,h]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=jE(u.viewport,u.content),g={...s,sizes:u,onSizesChange:h,hasThumb:p>0&&p<1,onThumbChange:y=>o.current=y,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:y=>l.current=y};function m(y,b){return N5(y,l.current,u,b)}return t==="horizontal"?d.jsx(A5,{...g,ref:e,onThumbPositionChange:()=>{if(r.viewport&&o.current){const y=r.viewport.scrollLeft,b=Lw(y,u,r.dir);o.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:y=>{r.viewport&&(r.viewport.scrollLeft=y)},onDragScroll:y=>{r.viewport&&(r.viewport.scrollLeft=m(y,r.dir))}}):t==="vertical"?d.jsx(C5,{...g,ref:e,onThumbPositionChange:()=>{if(r.viewport&&o.current){const y=r.viewport.scrollTop,b=Lw(y,u);o.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:y=>{r.viewport&&(r.viewport.scrollTop=y)},onDragScroll:y=>{r.viewport&&(r.viewport.scrollTop=m(y))}}):null}),A5=w.forwardRef((a,e)=>{const{sizes:t,onSizesChange:s,...r}=a,o=_s(ui,a.__scopeScrollArea),[l,u]=w.useState(),h=w.useRef(null),p=qe(e,h,o.onScrollbarXChange);return w.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),d.jsx(_E,{"data-orientation":"horizontal",...r,ref:p,sizes:t,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ah(t)+"px",...a.style},onThumbPointerDown:g=>a.onThumbPointerDown(g.x),onDragScroll:g=>a.onDragScroll(g.x),onWheelScroll:(g,m)=>{if(o.viewport){const y=o.viewport.scrollLeft+g.deltaX;a.onWheelScroll(y),RE(y,m)&&g.preventDefault()}},onResize:()=>{h.current&&o.viewport&&l&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Sd(l.paddingLeft),paddingEnd:Sd(l.paddingRight)}})}})}),C5=w.forwardRef((a,e)=>{const{sizes:t,onSizesChange:s,...r}=a,o=_s(ui,a.__scopeScrollArea),[l,u]=w.useState(),h=w.useRef(null),p=qe(e,h,o.onScrollbarYChange);return w.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),d.jsx(_E,{"data-orientation":"vertical",...r,ref:p,sizes:t,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ah(t)+"px",...a.style},onThumbPointerDown:g=>a.onThumbPointerDown(g.y),onDragScroll:g=>a.onDragScroll(g.y),onWheelScroll:(g,m)=>{if(o.viewport){const y=o.viewport.scrollTop+g.deltaY;a.onWheelScroll(y),RE(y,m)&&g.preventDefault()}},onResize:()=>{h.current&&o.viewport&&l&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Sd(l.paddingTop),paddingEnd:Sd(l.paddingBottom)}})}})}),[E5,EE]=xE(ui),_E=w.forwardRef((a,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:r,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:h,onDragScroll:p,onWheelScroll:g,onResize:m,...y}=a,b=_s(ui,t),[A,S]=w.useState(null),E=qe(e,F=>S(F)),C=w.useRef(null),j=w.useRef(""),N=b.viewport,M=s.content-s.viewport,O=An(g),P=An(h),L=rh(m,10);function B(F){if(C.current){const $=F.clientX-C.current.left,Y=F.clientY-C.current.top;p({x:$,y:Y})}}return w.useEffect(()=>{const F=$=>{const Y=$.target;A?.contains(Y)&&O($,M)};return document.addEventListener("wheel",F,{passive:!1}),()=>document.removeEventListener("wheel",F,{passive:!1})},[N,A,M,O]),w.useEffect(P,[s,P]),To(A,L),To(b.content,L),d.jsx(E5,{scope:t,scrollbar:A,hasThumb:r,onThumbChange:An(o),onThumbPointerUp:An(l),onThumbPositionChange:P,onThumbPointerDown:An(u),children:d.jsx(Ie.div,{...y,ref:E,style:{position:"absolute",...y.style},onPointerDown:xe(a.onPointerDown,F=>{F.button===0&&(F.target.setPointerCapture(F.pointerId),C.current=A.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),B(F))}),onPointerMove:xe(a.onPointerMove,B),onPointerUp:xe(a.onPointerUp,F=>{const $=F.target;$.hasPointerCapture(F.pointerId)&&$.releasePointerCapture(F.pointerId),document.body.style.webkitUserSelect=j.current,b.viewport&&(b.viewport.style.scrollBehavior=""),C.current=null})})})}),wd="ScrollAreaThumb",TE=w.forwardRef((a,e)=>{const{forceMount:t,...s}=a,r=EE(wd,a.__scopeScrollArea);return d.jsx(Yn,{present:t||r.hasThumb,children:d.jsx(_5,{ref:e,...s})})}),_5=w.forwardRef((a,e)=>{const{__scopeScrollArea:t,style:s,...r}=a,o=_s(wd,t),l=EE(wd,t),{onThumbPositionChange:u}=l,h=qe(e,m=>l.onThumbChange(m)),p=w.useRef(void 0),g=rh(()=>{p.current&&(p.current(),p.current=void 0)},100);return w.useEffect(()=>{const m=o.viewport;if(m){const y=()=>{if(g(),!p.current){const b=j5(m,u);p.current=b,u()}};return u(),m.addEventListener("scroll",y),()=>m.removeEventListener("scroll",y)}},[o.viewport,g,u]),d.jsx(Ie.div,{"data-state":l.hasThumb?"visible":"hidden",...r,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:xe(a.onPointerDownCapture,m=>{const b=m.target.getBoundingClientRect(),A=m.clientX-b.left,S=m.clientY-b.top;l.onThumbPointerDown({x:A,y:S})}),onPointerUp:xe(a.onPointerUp,l.onThumbPointerUp)})});TE.displayName=wd;var Yg="ScrollAreaCorner",NE=w.forwardRef((a,e)=>{const t=_s(Yg,a.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?d.jsx(T5,{...a,ref:e}):null});NE.displayName=Yg;var T5=w.forwardRef((a,e)=>{const{__scopeScrollArea:t,...s}=a,r=_s(Yg,t),[o,l]=w.useState(0),[u,h]=w.useState(0),p=!!(o&&u);return To(r.scrollbarX,()=>{const g=r.scrollbarX?.offsetHeight||0;r.onCornerHeightChange(g),h(g)}),To(r.scrollbarY,()=>{const g=r.scrollbarY?.offsetWidth||0;r.onCornerWidthChange(g),l(g)}),p?d.jsx(Ie.div,{...s,ref:e,style:{width:o,height:u,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...a.style}}):null});function Sd(a){return a?parseInt(a,10):0}function jE(a,e){const t=a/e;return isNaN(t)?0:t}function ah(a){const e=jE(a.viewport,a.content),t=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,s=(a.scrollbar.size-t)*e;return Math.max(s,18)}function N5(a,e,t,s="ltr"){const r=ah(t),o=r/2,l=e||o,u=r-l,h=t.scrollbar.paddingStart+l,p=t.scrollbar.size-t.scrollbar.paddingEnd-u,g=t.content-t.viewport,m=s==="ltr"?[0,g]:[g*-1,0];return ME([h,p],m)(a)}function Lw(a,e,t="ltr"){const s=ah(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-r,l=e.content-e.viewport,u=o-s,h=t==="ltr"?[0,l]:[l*-1,0],p=ql(a,h);return ME([0,l],[0,u])(p)}function ME(a,e){return t=>{if(a[0]===a[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(a[1]-a[0]);return e[0]+s*(t-a[0])}}function RE(a,e){return a>0&&a<e}var j5=(a,e=()=>{})=>{let t={left:a.scrollLeft,top:a.scrollTop},s=0;return(function r(){const o={left:a.scrollLeft,top:a.scrollTop},l=t.left!==o.left,u=t.top!==o.top;(l||u)&&e(),t=o,s=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(s)};function rh(a,e){const t=An(a),s=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(s.current),[]),w.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function To(a,e){const t=An(e);En(()=>{let s=0;if(a){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return r.observe(a),()=>{window.cancelAnimationFrame(s),r.unobserve(a)}}},[a,t])}var M5=bE,R5=SE,D5=NE;function Pw({className:a,children:e,...t}){return d.jsxs(M5,{"data-slot":"scroll-area",className:Ge("relative",a),...t,children:[d.jsx(R5,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),d.jsx(k5,{}),d.jsx(D5,{})]})}function k5({className:a,orientation:e="vertical",...t}){return d.jsx(AE,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Ge("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",a),...t,children:d.jsx(TE,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}wa.workerSrc=`https://unpkg.com/pdfjs-dist@${Ig}/build/pdf.worker.min.mjs`;function O5({fileUrl:a,book:e,annotations:t,onAddAnnotation:s,onUpdateAnnotation:r,onDeleteAnnotation:o,onDownloadFile:l}){const[u,h]=w.useState(0),[p,g]=w.useState(1),[m,y]=w.useState(1.2),[b,A]=w.useState(0),[S,E]=w.useState(!1),[C,j]=w.useState(null),[N,M]=w.useState(""),[O,P]=w.useState(null),[L,B]=w.useState(null),[F,$]=w.useState(""),[Y,te]=w.useState(null),[oe,ie]=w.useState(!1),[fe,R]=w.useState(!1),[U,H]=w.useState(!0),[z,se]=w.useState(!1),[T,k]=w.useState(!1),I=w.useRef(null),q=w.useRef(null),X=w.useRef(null),ce=t.filter(ve=>ve.page===p),Q=({numPages:ve})=>{h(ve),g(1),te(null)},ue=ve=>{console.error("PDF load error:",ve),te("PDF")},pe=()=>g(ve=>Math.max(ve-1,1)),Ce=()=>g(ve=>Math.min(ve+1,u)),ye=()=>y(ve=>Math.min(3,ve+.2)),Ne=()=>y(ve=>Math.max(.5,ve-.2)),Be=()=>A(ve=>(ve+90)%360),De=ve=>{if(!S||!q.current)return;const Qe=q.current.getBoundingClientRect(),re=(ve.clientX-Qe.left)/Qe.width,we=(ve.clientY-Qe.top)/Qe.height;j({x:re,y:we})},K=()=>{!C||!N.trim()||(s({bookId:e.id,page:p,x:C.x,y:C.y,content:N.trim(),color:"#fbbf24"}),M(""),j(null),E(!1),Se.success(""))},be=()=>{!L||!F.trim()||(r(L.id,F.trim()),B(null),$(""),Se.success(""))},Le=ve=>{o(ve),P(null),Se.success("")},et=()=>{document.fullscreenElement?(document.exitFullscreen(),ie(!1)):(I.current?.requestFullscreen(),ie(!0))},ut=()=>{R(!0)},Bt=()=>{l&&l(U),R(!1)},mt=()=>{const ve=window.open(a,"_blank");ve&&(ve.onload=()=>{ve.print()})},gt=w.useCallback(ve=>{ve.ctrlKey||ve.metaKey?(ve.preventDefault(),ve.deltaY<0?ye():Ne()):!T&&!z&&(ve.preventDefault(),ve.deltaY>0?Ce():pe())},[T,z]);return w.useEffect(()=>{const ve=Qe=>{if(!z)switch(Qe.key){case"ArrowRight":case"ArrowDown":case" ":case"PageDown":Qe.preventDefault(),Ce();break;case"ArrowLeft":case"ArrowUp":case"PageUp":Qe.preventDefault(),pe();break;case"Home":Qe.preventDefault(),g(1);break;case"End":Qe.preventDefault(),g(u);break}};return window.addEventListener("keydown",ve),()=>window.removeEventListener("keydown",ve)},[u,z]),z?d.jsxs("div",{className:"flex flex-col h-full bg-background",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 border-b bg-muted/50",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>se(!1),children:[d.jsx(Ku,{className:"h-4 w-4 mr-1"}),""]})}),d.jsx("span",{className:"text-sm font-medium",children:""}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(ae,{variant:"outline",size:"sm",onClick:()=>y(ve=>Math.max(.3,ve-.1)),children:d.jsx(kp,{className:"h-4 w-4"})}),d.jsxs("span",{className:"text-sm w-12 text-center font-mono",children:[Math.round(m*100),"%"]}),d.jsx(ae,{variant:"outline",size:"sm",onClick:()=>y(ve=>Math.min(2,ve+.1)),children:d.jsx(Dp,{className:"h-4 w-4"})})]})]}),d.jsx(Pw,{className:"flex-1",children:d.jsx("div",{className:"p-4",children:d.jsx(tm,{file:a,onLoadSuccess:Q,onLoadError:ue,loading:d.jsx("div",{className:"h-96 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),children:d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:u},(ve,Qe)=>Qe+1).map(ve=>d.jsx("div",{className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{g(ve),se(!1)},children:d.jsxs("div",{className:"relative bg-white shadow-md rounded-lg overflow-hidden",children:[d.jsx(nm,{pageNumber:ve,scale:.3,renderTextLayer:!1,renderAnnotationLayer:!1}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-center text-xs py-1",children:[" ",ve," "]})]})},ve))})})})})]}):T?d.jsxs("div",{className:"flex flex-col h-full bg-background",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 border-b bg-muted/50",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>k(!1),children:[d.jsx(Ku,{className:"h-4 w-4 mr-1"}),""]})}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(ae,{variant:"outline",size:"sm",onClick:Ne,children:d.jsx(kp,{className:"h-4 w-4"})}),d.jsxs("span",{className:"text-sm w-12 text-center font-mono",children:[Math.round(m*100),"%"]}),d.jsx(ae,{variant:"outline",size:"sm",onClick:ye,children:d.jsx(Dp,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"outline",size:"sm",onClick:Be,children:d.jsx(d0,{className:"h-4 w-4"})})]})]}),d.jsx(Pw,{ref:X,className:"flex-1 bg-muted/30",children:d.jsx("div",{className:"py-8",children:d.jsx(tm,{file:a,onLoadSuccess:Q,onLoadError:ue,loading:d.jsx("div",{className:"h-96 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),children:d.jsx("div",{className:"space-y-4",children:Array.from({length:u},(ve,Qe)=>Qe+1).map(ve=>d.jsx("div",{className:"flex justify-center",children:d.jsxs("div",{className:"relative shadow-xl rounded-lg overflow-hidden bg-white",children:[d.jsx(nm,{pageNumber:ve,scale:m,rotate:b,renderTextLayer:!1,renderAnnotationLayer:!1}),d.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:[ve," / ",u]})]})},ve))})})})})]}):d.jsxs("div",{ref:I,className:"flex flex-col h-full bg-background",onWheel:gt,children:[d.jsxs("div",{className:"flex items-center justify-between p-3 border-b bg-muted/50 flex-wrap gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ae,{variant:"outline",size:"sm",onClick:pe,disabled:p<=1,children:d.jsx(vo,{className:"h-4 w-4"})}),d.jsx("span",{className:"text-sm min-w-[80px] text-center font-mono",children:u>0?`${p} / ${u}`:"-"}),d.jsx(ae,{variant:"outline",size:"sm",onClick:Ce,disabled:p>=u,children:d.jsx(rd,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(ae,{variant:"outline",size:"sm",onClick:()=>se(!0),children:d.jsx(Lj,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"outline",size:"sm",onClick:()=>k(!0),children:d.jsx(Ku,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"outline",size:"sm",onClick:Ne,children:d.jsx(kp,{className:"h-4 w-4"})}),d.jsxs("span",{className:"text-sm w-14 text-center font-mono",children:[Math.round(m*100),"%"]}),d.jsx(ae,{variant:"outline",size:"sm",onClick:ye,children:d.jsx(Dp,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"outline",size:"sm",onClick:Be,children:d.jsx(d0,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs(ae,{variant:S?"default":"outline",size:"sm",onClick:()=>{E(!S),j(null)},disabled:Y!==null,children:[d.jsx(Ps,{className:"h-4 w-4 mr-1"}),""]}),d.jsxs(ae,{variant:"outline",size:"sm",onClick:ut,children:[d.jsx(_j,{className:"h-4 w-4 mr-1"}),""]}),d.jsx(ae,{variant:"outline",size:"sm",onClick:mt,children:d.jsx(rM,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"outline",size:"sm",onClick:et,children:oe?d.jsx(Yj,{className:"h-4 w-4"}):d.jsx(M1,{className:"h-4 w-4"})})]})]}),d.jsxs("div",{className:"flex-1 overflow-auto p-4 relative bg-muted/30",children:[S&&d.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-20 bg-primary text-primary-foreground px-4 py-2 rounded-full text-sm shadow-lg flex items-center gap-2",children:[d.jsx("span",{children:""}),d.jsx("button",{onClick:()=>{E(!1),j(null)},className:"hover:opacity-80",children:d.jsx(Cn,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"absolute bottom-4 right-4 z-10 text-xs text-muted-foreground bg-background/80 px-2 py-1 rounded space-y-1",children:[d.jsx("p",{children:"  Ctrl+"}),d.jsx("p",{children:"  "})]}),d.jsx("div",{className:"flex justify-center min-h-full items-start",children:Y?d.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-muted-foreground",children:[d.jsx("p",{className:"text-lg mb-2",children:Y}),d.jsx("p",{className:"text-sm",children:""})]}):d.jsx(tm,{file:a,onLoadSuccess:Q,onLoadError:ue,loading:d.jsx("div",{className:"h-96 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),children:d.jsxs("div",{ref:q,className:"relative inline-block shadow-xl rounded-lg overflow-hidden",onClick:De,style:{cursor:S?"crosshair":"default"},children:[d.jsx(nm,{pageNumber:p,scale:m,rotate:b,renderTextLayer:!1,renderAnnotationLayer:!1,loading:d.jsx("div",{className:"w-[400px] h-[600px] flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}),ce.map(ve=>d.jsx("button",{className:"absolute w-8 h-8 -ml-4 -mt-4 rounded-full bg-amber-400 hover:bg-amber-500 flex items-center justify-center shadow-lg transition-transform hover:scale-110 z-10 border-2 border-white",style:{left:`${ve.x*100}%`,top:`${ve.y*100}%`},onClick:Qe=>{Qe.stopPropagation(),P(ve)},title:"",children:d.jsx(Td,{className:"h-4 w-4 text-amber-900"})},ve.id)),C&&d.jsx("div",{className:"absolute w-8 h-8 -ml-4 -mt-4 rounded-full bg-primary flex items-center justify-center shadow-lg z-20 border-2 border-white",style:{left:`${C.x*100}%`,top:`${C.y*100}%`},children:d.jsx(Ps,{className:"h-4 w-4 text-primary-foreground"})})]})})})]}),d.jsx(nn,{open:!!C,onOpenChange:()=>j(null),children:d.jsxs(sn,{children:[d.jsx(an,{children:d.jsx(rn,{children:""})}),d.jsx(Is,{placeholder:"...",value:N,onChange:ve=>M(ve.target.value),rows:4,autoFocus:!0}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx(ae,{variant:"outline",onClick:()=>j(null),children:""}),d.jsx(ae,{onClick:K,disabled:!N.trim(),children:""})]})]})}),d.jsx(nn,{open:!!O,onOpenChange:()=>P(null),children:d.jsxs(sn,{children:[d.jsx(an,{children:d.jsx(rn,{children:""})}),d.jsx("div",{className:"py-4",children:L?.id===O?.id?d.jsxs(d.Fragment,{children:[d.jsx(Is,{value:F,onChange:ve=>$(ve.target.value),rows:4,autoFocus:!0}),d.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[d.jsx(ae,{variant:"outline",onClick:()=>{B(null),$("")},children:""}),d.jsx(ae,{onClick:be,children:""})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"whitespace-pre-wrap",children:O?.content}),d.jsxs("p",{className:"text-xs text-muted-foreground mt-4",children:[" ",O?.page,"   ",O&&new Date(O.createdAt).toLocaleString()]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[d.jsx(ae,{variant:"outline",onClick:()=>{O&&(B(O),$(O.content))},children:""}),d.jsx(ae,{variant:"destructive",onClick:()=>O&&Le(O.id),children:""})]})]})})]})}),d.jsx(nn,{open:fe,onOpenChange:R,children:d.jsxs(sn,{children:[d.jsx(an,{children:d.jsxs(rn,{className:"flex items-center gap-2",children:[d.jsx(yo,{className:"h-5 w-5"}),""]})}),d.jsxs("div",{className:"py-4 space-y-4",children:[d.jsxs("p",{className:"text-sm text-muted-foreground",children:["",e.title,"PDF"]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Om,{id:"include-annotations",checked:U,onCheckedChange:ve=>H(ve)}),d.jsx("label",{htmlFor:"include-annotations",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:""})]}),U&&t.length>0&&d.jsx("div",{className:"p-3 bg-muted rounded-lg text-sm",children:d.jsxs("p",{className:"text-muted-foreground",children:[" ",t.length," "]})})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx(ae,{variant:"outline",onClick:()=>R(!1),children:""}),d.jsxs(ae,{onClick:Bt,children:[d.jsx(yo,{className:"h-4 w-4 mr-1"}),""]})]})]})})]})}var DE=["PageUp","PageDown"],kE=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],OE={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Bo="Slider",[Lm,L5,P5]=Cd(Bo),[LE]=cs(Bo,[P5]),[I5,oh]=LE(Bo),PE=w.forwardRef((a,e)=>{const{name:t,min:s=0,max:r=100,step:o=1,orientation:l="horizontal",disabled:u=!1,minStepsBetweenThumbs:h=0,defaultValue:p=[s],value:g,onValueChange:m=()=>{},onValueCommit:y=()=>{},inverted:b=!1,form:A,...S}=a,E=w.useRef(new Set),C=w.useRef(0),N=l==="horizontal"?B5:z5,[M=[],O]=Bi({prop:g,defaultProp:p,onChange:Y=>{[...E.current][C.current]?.focus(),m(Y)}}),P=w.useRef(M);function L(Y){const te=$5(M,Y);$(Y,te)}function B(Y){$(Y,C.current)}function F(){const Y=P.current[C.current];M[C.current]!==Y&&y(M)}function $(Y,te,{commit:oe}={commit:!1}){const ie=X5(o),fe=W5(Math.round((Y-s)/o)*o+s,ie),R=ql(fe,[s,r]);O((U=[])=>{const H=U5(U,R,te);if(Y5(H,h*o)){C.current=H.indexOf(R);const z=String(H)!==String(U);return z&&oe&&y(H),z?H:U}else return U})}return d.jsx(I5,{scope:a.__scopeSlider,name:t,disabled:u,min:s,max:r,valueIndexToChangeRef:C,thumbs:E.current,values:M,orientation:l,form:A,children:d.jsx(Lm.Provider,{scope:a.__scopeSlider,children:d.jsx(Lm.Slot,{scope:a.__scopeSlider,children:d.jsx(N,{"aria-disabled":u,"data-disabled":u?"":void 0,...S,ref:e,onPointerDown:xe(S.onPointerDown,()=>{u||(P.current=M)}),min:s,max:r,inverted:b,onSlideStart:u?void 0:L,onSlideMove:u?void 0:B,onSlideEnd:u?void 0:F,onHomeKeyDown:()=>!u&&$(s,0,{commit:!0}),onEndKeyDown:()=>!u&&$(r,M.length-1,{commit:!0}),onStepKeyDown:({event:Y,direction:te})=>{if(!u){const fe=DE.includes(Y.key)||Y.shiftKey&&kE.includes(Y.key)?10:1,R=C.current,U=M[R],H=o*fe*te;$(U+H,R,{commit:!0})}}})})})})});PE.displayName=Bo;var[IE,BE]=LE(Bo,{startEdge:"left",endEdge:"right",size:"width",direction:1}),B5=w.forwardRef((a,e)=>{const{min:t,max:s,dir:r,inverted:o,onSlideStart:l,onSlideMove:u,onSlideEnd:h,onStepKeyDown:p,...g}=a,[m,y]=w.useState(null),b=qe(e,N=>y(N)),A=w.useRef(void 0),S=No(r),E=S==="ltr",C=E&&!o||!E&&o;function j(N){const M=A.current||m.getBoundingClientRect(),O=[0,M.width],L=Xg(O,C?[t,s]:[s,t]);return A.current=M,L(N-M.left)}return d.jsx(IE,{scope:a.__scopeSlider,startEdge:C?"left":"right",endEdge:C?"right":"left",direction:C?1:-1,size:"width",children:d.jsx(zE,{dir:S,"data-orientation":"horizontal",...g,ref:b,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const M=j(N.clientX);l?.(M)},onSlideMove:N=>{const M=j(N.clientX);u?.(M)},onSlideEnd:()=>{A.current=void 0,h?.()},onStepKeyDown:N=>{const O=OE[C?"from-left":"from-right"].includes(N.key);p?.({event:N,direction:O?-1:1})}})})}),z5=w.forwardRef((a,e)=>{const{min:t,max:s,inverted:r,onSlideStart:o,onSlideMove:l,onSlideEnd:u,onStepKeyDown:h,...p}=a,g=w.useRef(null),m=qe(e,g),y=w.useRef(void 0),b=!r;function A(S){const E=y.current||g.current.getBoundingClientRect(),C=[0,E.height],N=Xg(C,b?[s,t]:[t,s]);return y.current=E,N(S-E.top)}return d.jsx(IE,{scope:a.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:d.jsx(zE,{"data-orientation":"vertical",...p,ref:m,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const E=A(S.clientY);o?.(E)},onSlideMove:S=>{const E=A(S.clientY);l?.(E)},onSlideEnd:()=>{y.current=void 0,u?.()},onStepKeyDown:S=>{const C=OE[b?"from-bottom":"from-top"].includes(S.key);h?.({event:S,direction:C?-1:1})}})})}),zE=w.forwardRef((a,e)=>{const{__scopeSlider:t,onSlideStart:s,onSlideMove:r,onSlideEnd:o,onHomeKeyDown:l,onEndKeyDown:u,onStepKeyDown:h,...p}=a,g=oh(Bo,t);return d.jsx(Ie.span,{...p,ref:e,onKeyDown:xe(a.onKeyDown,m=>{m.key==="Home"?(l(m),m.preventDefault()):m.key==="End"?(u(m),m.preventDefault()):DE.concat(kE).includes(m.key)&&(h(m),m.preventDefault())}),onPointerDown:xe(a.onPointerDown,m=>{const y=m.target;y.setPointerCapture(m.pointerId),m.preventDefault(),g.thumbs.has(y)?y.focus():s(m)}),onPointerMove:xe(a.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&r(m)}),onPointerUp:xe(a.onPointerUp,m=>{const y=m.target;y.hasPointerCapture(m.pointerId)&&(y.releasePointerCapture(m.pointerId),o(m))})})}),FE="SliderTrack",HE=w.forwardRef((a,e)=>{const{__scopeSlider:t,...s}=a,r=oh(FE,t);return d.jsx(Ie.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...s,ref:e})});HE.displayName=FE;var Pm="SliderRange",UE=w.forwardRef((a,e)=>{const{__scopeSlider:t,...s}=a,r=oh(Pm,t),o=BE(Pm,t),l=w.useRef(null),u=qe(e,l),h=r.values.length,p=r.values.map(y=>GE(y,r.min,r.max)),g=h>1?Math.min(...p):0,m=100-Math.max(...p);return d.jsx(Ie.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:u,style:{...a.style,[o.startEdge]:g+"%",[o.endEdge]:m+"%"}})});UE.displayName=Pm;var Im="SliderThumb",VE=w.forwardRef((a,e)=>{const t=L5(a.__scopeSlider),[s,r]=w.useState(null),o=qe(e,u=>r(u)),l=w.useMemo(()=>s?t().findIndex(u=>u.ref.current===s):-1,[t,s]);return d.jsx(F5,{...a,ref:o,index:l})}),F5=w.forwardRef((a,e)=>{const{__scopeSlider:t,index:s,name:r,...o}=a,l=oh(Im,t),u=BE(Im,t),[h,p]=w.useState(null),g=qe(e,j=>p(j)),m=h?l.form||!!h.closest("form"):!0,y=Fd(h),b=l.values[s],A=b===void 0?0:GE(b,l.min,l.max),S=V5(s,l.values.length),E=y?.[u.size],C=E?G5(E,A,u.direction):0;return w.useEffect(()=>{if(h)return l.thumbs.add(h),()=>{l.thumbs.delete(h)}},[h,l.thumbs]),d.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${A}% + ${C}px)`},children:[d.jsx(Lm.ItemSlot,{scope:a.__scopeSlider,children:d.jsx(Ie.span,{role:"slider","aria-label":a["aria-label"]||S,"aria-valuemin":l.min,"aria-valuenow":b,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...o,ref:g,style:b===void 0?{display:"none"}:a.style,onFocus:xe(a.onFocus,()=>{l.valueIndexToChangeRef.current=s})})}),m&&d.jsx($E,{name:r??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:b},s)]})});VE.displayName=Im;var H5="RadioBubbleInput",$E=w.forwardRef(({__scopeSlider:a,value:e,...t},s)=>{const r=w.useRef(null),o=qe(r,s),l=Ud(e);return w.useEffect(()=>{const u=r.current;if(!u)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(l!==e&&g){const m=new Event("input",{bubbles:!0});g.call(u,e),u.dispatchEvent(m)}},[l,e]),d.jsx(Ie.input,{style:{display:"none"},...t,ref:o,defaultValue:e})});$E.displayName=H5;function U5(a=[],e,t){const s=[...a];return s[t]=e,s.sort((r,o)=>r-o)}function GE(a,e,t){const o=100/(t-e)*(a-e);return ql(o,[0,100])}function V5(a,e){return e>2?`Value ${a+1} of ${e}`:e===2?["Minimum","Maximum"][a]:void 0}function $5(a,e){if(a.length===1)return 0;const t=a.map(r=>Math.abs(r-e)),s=Math.min(...t);return t.indexOf(s)}function G5(a,e,t){const s=a/2,o=Xg([0,50],[0,s]);return(s-o(e)*t)*t}function q5(a){return a.slice(0,-1).map((e,t)=>a[t+1]-e)}function Y5(a,e){if(e>0){const t=q5(a);return Math.min(...t)>=e}return!0}function Xg(a,e){return t=>{if(a[0]===a[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(a[1]-a[0]);return e[0]+s*(t-a[0])}}function X5(a){return(String(a).split(".")[1]||"").length}function W5(a,e){const t=Math.pow(10,e);return Math.round(a*t)/t}var K5=PE,Q5=HE,Z5=UE,J5=VE;function Ka({className:a,defaultValue:e,value:t,min:s=0,max:r=100,...o}){const l=w.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[s,r],[t,e,s,r]);return d.jsxs(K5,{"data-slot":"slider",defaultValue:e,value:t,min:s,max:r,className:Ge("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a),...o,children:[d.jsx(Q5,{"data-slot":"slider-track",className:Ge("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:d.jsx(Z5,{"data-slot":"slider-range",className:Ge("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(u,h)=>d.jsx(J5,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},h))]})}var lh="Switch",[eB]=cs(lh),[tB,nB]=eB(lh),qE=w.forwardRef((a,e)=>{const{__scopeSwitch:t,name:s,checked:r,defaultChecked:o,required:l,disabled:u,value:h="on",onCheckedChange:p,form:g,...m}=a,[y,b]=w.useState(null),A=qe(e,N=>b(N)),S=w.useRef(!1),E=y?g||!!y.closest("form"):!0,[C,j]=Bi({prop:r,defaultProp:o??!1,onChange:p,caller:lh});return d.jsxs(tB,{scope:t,checked:C,disabled:u,children:[d.jsx(Ie.button,{type:"button",role:"switch","aria-checked":C,"aria-required":l,"data-state":KE(C),"data-disabled":u?"":void 0,disabled:u,value:h,...m,ref:A,onClick:xe(a.onClick,N=>{j(M=>!M),E&&(S.current=N.isPropagationStopped(),S.current||N.stopPropagation())})}),E&&d.jsx(WE,{control:y,bubbles:!S.current,name:s,value:h,checked:C,required:l,disabled:u,form:g,style:{transform:"translateX(-100%)"}})]})});qE.displayName=lh;var YE="SwitchThumb",XE=w.forwardRef((a,e)=>{const{__scopeSwitch:t,...s}=a,r=nB(YE,t);return d.jsx(Ie.span,{"data-state":KE(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:e})});XE.displayName=YE;var sB="SwitchBubbleInput",WE=w.forwardRef(({__scopeSwitch:a,control:e,checked:t,bubbles:s=!0,...r},o)=>{const l=w.useRef(null),u=qe(l,o),h=Ud(t),p=Fd(e);return w.useEffect(()=>{const g=l.current;if(!g)return;const m=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(m,"checked").set;if(h!==t&&b){const A=new Event("click",{bubbles:s});b.call(g,t),g.dispatchEvent(A)}},[h,t,s]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:u,style:{...r.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});WE.displayName=sB;function KE(a){return a?"checked":"unchecked"}var iB=qE,aB=XE;function rB({className:a,...e}){return d.jsx(iB,{"data-slot":"switch",className:Ge("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...e,children:d.jsx(aB,{"data-slot":"switch-thumb",className:Ge("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const QE=[{name:"",value:"system-ui, -apple-system, sans-serif"},{name:"",value:'"Noto Serif SC", "SimSun", serif'},{name:"",value:'"Noto Sans SC", "SimHei", sans-serif'},{name:"",value:'"KaiTi", "STKaiti", serif'},{name:"",value:'"FangSong", "STFangsong", serif'},{name:"",value:'"Microsoft YaHei", sans-serif'}],sm=[{name:"",bg:"#ffffff",text:"#1a1a1a"},{name:"",bg:"#f5e6c8",text:"#3d3d3d"},{name:"",bg:"#c7edcc",text:"#2d5a27"},{name:"",bg:"#1a1a1a",text:"#b8b8b8"},{name:"",bg:"#e8f4fc",text:"#1a3a52"},{name:"",bg:"#fce8f0",text:"#521a3a"},{name:"",bg:"#3d2914",text:"#d4c4a8"},{name:"",bg:"#0d2818",text:"#90c695"}],oB=[{name:"",value:"scroll",icon:Ku},{name:"",value:"page",icon:Do}],lB=[{name:"",value:"left",icon:_M},{name:"",value:"center",icon:SM},{name:"",value:"justify",icon:CM}];function cB(a){if(!a)return[{title:"",index:0,startLine:0,endLine:0,lines:[]}];const e=a.split(`
`),t=[],s=/^([\d]+|Chapter\s+\d+|\d+\.|.*?|.*?.*?)[\s:]/i;if(e.forEach((o,l)=>{const u=o.trim();(s.test(u)||u.length<50&&u.includes("")&&u.length>2)&&t.push({title:u.slice(0,50)||`${t.length+1}`,startLine:l})}),t.length===0)for(let o=0;o<e.length;o+=200)t.push({title:`${Math.floor(o/200)+1}`,startLine:o});return t.map((o,l)=>{const u=l<t.length-1?t[l+1].startLine-1:e.length-1;return{title:o.title,index:l,startLine:o.startLine,endLine:u,lines:e.slice(o.startLine,u+1)}})}function uB(a){try{const e=localStorage.getItem(`reader-progress-v5-${a}`);if(e){const t=JSON.parse(e);return{chapter:t.chapter||0,lineInChapter:t.lineInChapter||0}}}catch{}return{chapter:0,lineInChapter:0}}function dB(a,e,t){try{localStorage.setItem(`reader-progress-v5-${a}`,JSON.stringify({chapter:e,lineInChapter:t}))}catch{}}function hB(){const a={fontSize:18,fontFamily:QE[0].value,theme:0,pageMode:"scroll",lineHeight:1.75,letterSpacing:.3,textAlign:"left",paragraphSpacing:1.2,autoHideHeader:!0};try{const e=localStorage.getItem("text-reader-settings");if(e){const t=JSON.parse(e);return(t.theme===void 0||t.theme===null)&&(t.theme=0),{...a,...t}}}catch{}return a}function fB(a){try{localStorage.setItem("text-reader-settings",JSON.stringify(a))}catch{}}const pB=(a,e,t)=>{let s=0;if(e>0){let h=e;for(;h>0&&a.charAt(h-1)!==`
`;)h--;s=h}let r=a.length;if(t<a.length){let h=t;for(;h<a.length&&a.charAt(h)!==`
`;)h++;r=h+1}const l=a.substring(s,r).split(`
`),u=e-s;return l.slice(u,u+(t-e)).filter(h=>h!==void 0)};function mB({content:a,title:e,bookId:t,onClose:s}){if(!a||a.trim().length===0)return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center p-6 max-w-md",children:[d.jsx("p",{className:"text-muted-foreground mb-4",children:a?"":""}),d.jsx(ae,{onClick:s,className:"mt-4",children:""})]})});const[o,l]=w.useState(hB()),[u,h]=w.useState(0),[p,g]=w.useState(0),[m,y]=w.useState(!1),[b,A]=w.useState(200),[S,E]=w.useState(!1),[C,j]=w.useState(!1),[N,M]=w.useState(!1),[O,P]=w.useState(!0),[L,B]=w.useState(""),F=w.useRef(null),$=w.useRef(null),Y=w.useRef(null),te=w.useRef(null),oe=w.useRef(0),ie=w.useRef(0),fe=w.useRef(!1),R=w.useRef(0),U=w.useRef([]),H=w.useRef(!1),z=w.useRef(null),se=w.useMemo(()=>cB(a),[a]),T=sm[o.theme]||sm[0],k=se[u]||se[0],I=k?.lines.length||0,q=se.length,X=se.reduce((re,we)=>re+we.lines.length,0),Q=se.slice(0,u).reduce((re,we)=>re+we.lines.length,0)+p,ue=Math.round(Q/Math.max(1,X)*100),pe=25,Ce=Math.max(1,Math.ceil(I/pe)),ye=Math.floor(p/pe),Ne=`${u}-${ye}`;w.useEffect(()=>{if(fe.current)return;fe.current=!0;const re=uB(t);if(re.chapter>=0&&re.chapter<se.length){h(re.chapter);const we=se[re.chapter],He=Math.max(0,we.lines.length-1);g(Math.min(re.lineInChapter,He))}},[t,se.length]),w.useEffect(()=>{const re=()=>{B(new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}))};re();const we=setInterval(re,6e4);return()=>clearInterval(we)},[]),w.useEffect(()=>{dB(t,u,p)},[u,p,t]),w.useEffect(()=>(m&&(Y.current=setInterval(()=>{if(o.pageMode==="scroll"){const re=N?$.current:F.current;re&&(re.scrollTop+=2)}else De()},b)),()=>{Y.current&&clearInterval(Y.current)}),[m,b,o.pageMode,p,N]),w.useEffect(()=>{fB(o)},[o]),w.useEffect(()=>{if(!o.autoHideHeader||N)return;const re=()=>{P(!0),te.current&&clearTimeout(te.current),te.current=setTimeout(()=>P(!1),3e3)};re();const we=F.current;return we&&(we.addEventListener("scroll",re),we.addEventListener("touchstart",re)),()=>{te.current&&clearTimeout(te.current),we&&(we.removeEventListener("scroll",re),we.removeEventListener("touchstart",re))}},[o.autoHideHeader,N]),w.useEffect(()=>{const re=we=>{if(!(S||C))switch(we.key){case"ArrowRight":case"ArrowDown":case" ":case"PageDown":we.preventDefault(),De();break;case"ArrowLeft":case"ArrowUp":case"PageUp":we.preventDefault(),K();break;case"Home":we.preventDefault(),be(0);break;case"End":we.preventDefault(),be(se.length-1);break}};return window.addEventListener("keydown",re),()=>window.removeEventListener("keydown",re)},[S,C,p,u,se.length,o.pageMode,N]);const Be=()=>{if(o.pageMode!=="scroll")return;H.current=!0,z.current&&clearTimeout(z.current);const re=N?$.current:F.current;if(!re)return;const we=re.scrollTop,He=re.clientHeight,vt=we+He/3;for(let Ot=0;Ot<se.length;Ot++){const Nt=U.current[Ot];if(!Nt)continue;const Xn=Nt.offsetTop,On=Xn+Nt.offsetHeight;if(vt>=Xn&&vt<On){u!==Ot&&h(Ot);break}}z.current=setTimeout(()=>{H.current=!1},150)},De=()=>{if(o.pageMode==="page"){const re=p+pe;re>=I&&u<se.length-1?(h(we=>we+1),g(0)):re<I&&g(re)}else{const re=N?$.current:F.current;re&&re.scrollBy({top:re.clientHeight*.9,behavior:"smooth"})}},K=()=>{if(o.pageMode==="page"){const re=p-pe;re<0&&u>0?(h(u-1),g(0)):re>=0&&g(re)}else{const re=N?$.current:F.current;re&&re.scrollBy({top:-re.clientHeight*.9,behavior:"smooth"})}},be=re=>{re<0||re>=se.length||(h(re),g(0),j(!1),requestAnimationFrame(()=>{const we=N?$.current:F.current;if(we){if(o.pageMode==="page")we.scrollTop=0;else if(o.pageMode==="scroll"){const He=U.current[re];He&&we.scrollTo({top:He.offsetTop,behavior:"smooth"})}}}))},Le=()=>{const re=!N,we=re?F.current:$.current;we&&(R.current=we.scrollTop),M(re),re?(P(!1),document.fullscreenElement||document.documentElement.requestFullscreen().catch(()=>{})):(P(!0),document.fullscreenElement&&document.exitFullscreen().catch(()=>{}))};w.useEffect(()=>{const re=N?$.current:F.current;re&&R.current>0&&requestAnimationFrame(()=>{re.scrollTop=R.current})},[N]),w.useEffect(()=>{if(o.pageMode!=="page")return;const re=N?$.current:F.current;if(!re)return;const we=requestAnimationFrame(()=>{re.scrollTop=0});return()=>cancelAnimationFrame(we)},[Ne,o.pageMode,N]);const et=re=>{oe.current=re.touches[0].clientX,ie.current=re.touches[0].clientY},ut=re=>{const we=oe.current-re.changedTouches[0].clientX,He=ie.current-re.changedTouches[0].clientY;Math.abs(we)>Math.abs(He)&&Math.abs(we)>50&&(we>0?De():K())},Bt=re=>{if(o.pageMode==="scroll"&&!N)return;const He=(N?$.current:F.current)?.getBoundingClientRect();if(!He)return;const vt=re.clientX-He.left;vt<He.width*.25?K():vt>He.width*.75&&De()},mt=(re,we)=>{l(He=>({...He,[re]:we}))},gt=()=>{const re=se[u];if(!re)return null;const we=re.startLine+ye*pe,He=Math.min(re.startLine+(ye+1)*pe,re.endLine+1),vt=pB(a,we,He);return d.jsx("div",{style:{fontSize:`${o.fontSize}px`,fontFamily:o.fontFamily,lineHeight:o.lineHeight,letterSpacing:`${o.letterSpacing}px`,textAlign:o.textAlign,color:T.text,textRendering:"optimizeLegibility",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},children:vt.map((Ot,Nt)=>d.jsx("p",{style:{marginBottom:`${o.paragraphSpacing}em`},className:"break-words",children:Ot.trim()||""},we+Nt))})},ve=()=>d.jsx("div",{children:se.map((re,we)=>d.jsxs("div",{ref:He=>{U.current[we]=He},className:"mb-8",children:[d.jsx("div",{className:"text-center py-4 mb-4 border-b-2 border-dashed",style:{borderColor:`${T.text}20`,color:T.text,fontSize:`${o.fontSize*1.2}px`,fontWeight:"bold"},children:re.title}),d.jsx("div",{style:{fontSize:`${o.fontSize}px`,fontFamily:o.fontFamily,lineHeight:o.lineHeight,letterSpacing:`${o.letterSpacing}px`,textAlign:o.textAlign,color:T.text},children:re.lines.map((He,vt)=>d.jsx("p",{style:{marginBottom:`${o.paragraphSpacing}em`},className:"break-words",children:He.trim()||""},vt))})]},we))}),Qe=({onSelect:re})=>d.jsx("div",{className:"py-2",children:se.map((we,He)=>d.jsx("button",{onClick:()=>re(He),className:`w-full text-left px-5 py-3.5 transition-all duration-200 ${u===He?"bg-primary/20 border-l-4 border-primary":"hover:bg-black/5 border-l-4 border-transparent"}`,style:{borderBottom:`1px solid ${T.text}10`},children:d.jsx("p",{className:`text-sm ${u===He?"font-semibold":""}`,style:{color:T.text},children:we.title})},He))});return N?d.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col",style:{backgroundColor:T.bg},children:[d.jsx("div",{className:"absolute bottom-6 left-6 z-10 text-xs opacity-50",style:{color:T.text},children:L}),d.jsxs("button",{onClick:()=>j(!0),className:"absolute top-4 left-4 z-10 h-9 px-4 rounded-full text-sm font-medium transition-all duration-200 hover:scale-105 flex items-center gap-2",style:{backgroundColor:`${T.text}30`,color:T.text},children:[d.jsx(c0,{className:"h-4 w-4"}),d.jsx("span",{className:"max-w-[140px] truncate",children:k?.title.slice(0,15)||""})]}),d.jsxs("div",{className:"absolute top-4 right-4 z-10 flex items-center gap-2",children:[d.jsx("button",{onClick:()=>u>0&&be(u-1),disabled:u===0,className:`w-9 h-9 rounded-full flex items-center justify-center transition-all duration-200 ${u===0?"opacity-30 cursor-not-allowed":"hover:scale-110"}`,style:{backgroundColor:`${T.text}25`,color:T.text},title:"",children:d.jsx(C1,{className:"h-5 w-5"})}),d.jsx("button",{onClick:()=>u<se.length-1&&be(u+1),disabled:u>=se.length-1,className:`w-9 h-9 rounded-full flex items-center justify-center transition-all duration-200 ${u>=se.length-1?"opacity-30 cursor-not-allowed":"hover:scale-110"}`,style:{backgroundColor:`${T.text}25`,color:T.text},title:"",children:d.jsx($m,{className:"h-5 w-5"})}),d.jsx("button",{onClick:Le,className:"w-9 h-9 rounded-full flex items-center justify-center text-sm font-medium transition-all duration-200 hover:scale-110 ml-1",style:{backgroundColor:`${T.text}30`,color:T.text},title:"",children:d.jsx(Cn,{className:"h-4 w-4"})})]}),d.jsx("div",{ref:$,className:"flex-1 overflow-auto px-6 py-16",onTouchStart:et,onTouchEnd:ut,onClick:Bt,onScroll:Be,children:d.jsx("div",{className:"max-w-2xl mx-auto",children:o.pageMode==="page"?gt():ve()})}),d.jsxs("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-10 text-xs opacity-50",style:{color:T.text},children:[ue,"%"]}),C&&d.jsxs("div",{className:"fixed inset-0 z-[200] flex",onClick:()=>j(!1),children:[d.jsx("div",{className:"absolute inset-0 bg-black/50"}),d.jsxs("div",{className:"relative w-full max-w-md h-full overflow-y-auto animate-in slide-in-from-left duration-200",style:{backgroundColor:T.bg},onClick:re=>re.stopPropagation(),children:[d.jsxs("div",{className:"px-4 py-4 border-b flex items-center justify-between",style:{borderColor:`${T.text}15`},children:[d.jsx("h2",{style:{color:T.text,fontSize:"1.1rem",fontWeight:600},children:""}),d.jsx("button",{onClick:()=>j(!1),className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:`${T.text}15`,color:T.text},children:d.jsx(Cn,{className:"h-4 w-4"})})]}),d.jsx(Qe,{onSelect:be})]})]})]}):d.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:T.bg},children:[d.jsxs("header",{className:`flex items-center justify-between px-3 py-2 border-b flex-shrink-0 transition-all duration-300 ${O?"opacity-100":"opacity-0 -translate-y-full pointer-events-none"}`,style:{borderColor:`${T.text}12`},children:[d.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[d.jsx(ae,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8 flex-shrink-0",children:d.jsx(vo,{className:"h-5 w-5",style:{color:T.text}})}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"text-sm font-medium truncate",style:{color:T.text},children:e}),d.jsxs("p",{className:"text-xs opacity-50 truncate",style:{color:T.text},children:[k?.title||"","  ",ue,"%"]})]})]}),d.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[d.jsx(ae,{variant:"ghost",size:"sm",onClick:Le,className:"h-8 px-2.5 text-xs",children:d.jsx("span",{style:{color:T.text},children:""})}),d.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>j(!0),className:"h-8 w-8",children:d.jsx(c0,{className:"h-4 w-4",style:{color:T.text}})}),d.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>E(!0),className:"h-8 w-8",children:d.jsx(Nd,{className:"h-4 w-4",style:{color:T.text}})})]})]}),d.jsx("div",{ref:F,className:"flex-1 overflow-auto relative",onTouchStart:et,onTouchEnd:ut,onClick:Bt,onScroll:Be,children:d.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:o.pageMode==="page"?gt():ve()})}),d.jsx("footer",{className:`px-3 py-2 border-t flex-shrink-0 transition-all duration-300 ${O?"opacity-100":"opacity-0 translate-y-full pointer-events-none"}`,style:{borderColor:`${T.text}12`},children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>y(!m),className:"h-8 gap-1.5",children:[m?d.jsx(D1,{className:"h-4 w-4"}):d.jsx(k1,{className:"h-4 w-4"}),d.jsx("span",{className:"text-xs",style:{color:T.text},children:m?"":""})]}),d.jsx("span",{className:"text-xs opacity-50",style:{color:T.text},children:o.pageMode==="page"?`${ye+1} / ${Ce}`:`${u+1}/${q}`})]}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("span",{className:"text-xs opacity-50",style:{color:T.text},children:[ue,"%"]})})]})}),S&&d.jsxs("div",{className:"fixed inset-0 z-[200] flex justify-end",onClick:()=>E(!1),children:[d.jsx("div",{className:"absolute inset-0 bg-black/50"}),d.jsxs("div",{className:"relative w-full max-w-md h-full overflow-y-auto animate-in slide-in-from-right duration-200",style:{backgroundColor:T.bg},onClick:re=>re.stopPropagation(),children:[d.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",style:{borderColor:`${T.text}12`},children:[d.jsx("h2",{style:{color:T.text,fontWeight:600},children:""}),d.jsx("button",{onClick:()=>E(!1),className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:`${T.text}15`,color:T.text},children:d.jsx(Cn,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"p-4 space-y-5",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm",style:{color:T.text},children:""}),d.jsxs("span",{className:"text-xs opacity-50",style:{color:T.text},children:[o.fontSize,"px"]})]}),d.jsx(Ka,{value:[o.fontSize],onValueChange:re=>mt("fontSize",re[0]),min:12,max:32,step:1})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("span",{className:"text-sm",style:{color:T.text},children:""}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:QE.map(re=>d.jsx(ae,{variant:o.fontFamily===re.value?"default":"outline",size:"sm",onClick:()=>mt("fontFamily",re.value),style:{fontFamily:re.value},className:"text-xs h-9",children:re.name},re.name))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("span",{className:"text-sm",style:{color:T.text},children:""}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:sm.map((re,we)=>d.jsx("button",{onClick:()=>mt("theme",we),className:`aspect-square rounded-lg border-2 transition-all ${o.theme===we?"border-primary":"border-transparent"}`,style:{backgroundColor:re.bg},children:d.jsx("span",{style:{color:re.text,fontSize:"10px"},children:re.name})},we))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("span",{className:"text-sm",style:{color:T.text},children:""}),d.jsx("div",{className:"flex gap-2",children:oB.map(re=>d.jsxs(ae,{variant:o.pageMode===re.value?"default":"outline",className:"flex-1 gap-2 h-9",onClick:()=>mt("pageMode",re.value),children:[d.jsx(re.icon,{className:"h-4 w-4"}),re.name]},re.value))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("span",{className:"text-sm",style:{color:T.text},children:""}),d.jsx("div",{className:"flex gap-2",children:lB.map(re=>d.jsxs(ae,{variant:o.textAlign===re.value?"default":"outline",className:"flex-1 gap-2 h-9",onClick:()=>mt("textAlign",re.value),children:[d.jsx(re.icon,{className:"h-4 w-4"}),re.name]},re.value))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm",style:{color:T.text},children:""}),d.jsx("span",{className:"text-xs opacity-50",style:{color:T.text},children:o.lineHeight.toFixed(1)})]}),d.jsx(Ka,{value:[o.lineHeight],onValueChange:re=>mt("lineHeight",re[0]),min:1.2,max:2.5,step:.1})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm",style:{color:T.text},children:""}),d.jsxs("span",{className:"text-xs opacity-50",style:{color:T.text},children:[o.letterSpacing.toFixed(1),"px"]})]}),d.jsx(Ka,{value:[o.letterSpacing],onValueChange:re=>mt("letterSpacing",re[0]),min:0,max:3,step:.1})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm",style:{color:T.text},children:""}),d.jsxs("span",{className:"text-xs opacity-50",style:{color:T.text},children:[o.paragraphSpacing.toFixed(1),"em"]})]}),d.jsx(Ka,{value:[o.paragraphSpacing],onValueChange:re=>mt("paragraphSpacing",re[0]),min:0,max:2,step:.1})]}),d.jsxs("div",{className:"flex items-center justify-between py-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(R1,{className:"h-4 w-4 opacity-60",style:{color:T.text}}),d.jsx("span",{className:"text-sm",style:{color:T.text},children:""})]}),d.jsx(rB,{checked:o.autoHideHeader,onCheckedChange:re=>mt("autoHideHeader",re)})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(lm,{className:"h-4 w-4 opacity-60",style:{color:T.text}}),d.jsx("span",{className:"text-sm",style:{color:T.text},children:""})]}),d.jsx(Ka,{value:[b],onValueChange:re=>A(re[0]),min:50,max:500,step:10,inverted:!0}),d.jsx("p",{className:"text-xs opacity-50",style:{color:T.text},children:""})]})]})]})]}),C&&d.jsxs("div",{className:"fixed inset-0 z-[200] flex",onClick:()=>j(!1),children:[d.jsx("div",{className:"absolute inset-0 bg-black/50"}),d.jsxs("div",{className:"relative w-full max-w-md h-full overflow-y-auto animate-in slide-in-from-left duration-200",style:{backgroundColor:T.bg},onClick:re=>re.stopPropagation(),children:[d.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",style:{borderColor:`${T.text}12`},children:[d.jsx("h2",{style:{color:T.text,fontWeight:600},children:""}),d.jsx("button",{onClick:()=>j(!1),className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:`${T.text}15`,color:T.text},children:d.jsx(Cn,{className:"h-4 w-4"})})]}),d.jsx(Qe,{onSelect:be})]})]})]})}const gB={ongoing:"",completed:"",archived:""},vB={ongoing:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700",archived:"bg-gray-100 text-gray-700"},Iw=a=>a<1024?a+" B":a<1024*1024?(a/1024).toFixed(1)+" KB":(a/(1024*1024)).toFixed(1)+" MB";function yB({projects:a,onAddProject:e,onDeleteProject:t,onAddKnowledge:s,onAddLesson:r,onAddFile:o,onDeleteFile:l,onDownloadFile:u}){const[h,p]=w.useState(!1),[g,m]=w.useState(null),[y,b]=w.useState(!1),[A,S]=w.useState(!1),[E,C]=w.useState(!1),j=w.useRef(null),[N,M]=w.useState({name:"",description:"",status:"ongoing",startDate:new Date().toISOString().split("T")[0],tags:[],newTag:""}),[O,P]=w.useState({title:"",content:"",category:"technical"}),[L,B]=w.useState({title:"",content:"",type:"success"}),[F,$]=w.useState({description:"",selectedFile:null}),Y=()=>{if(!N.name.trim()){Se.error("");return}e({name:N.name.trim(),description:N.description.trim(),status:N.status,startDate:N.startDate,tags:N.tags}),M({name:"",description:"",status:"ongoing",startDate:new Date().toISOString().split("T")[0],tags:[],newTag:""}),p(!1),Se.success("")},te=()=>{if(!g||!O.title.trim()||!O.content.trim()){Se.error("");return}s(g.id,{title:O.title.trim(),content:O.content.trim(),category:O.category}),P({title:"",content:"",category:"technical"}),b(!1),Se.success("")},oe=()=>{if(!g||!L.title.trim()||!L.content.trim()){Se.error("");return}r(g.id,{title:L.title.trim(),content:L.content.trim(),type:L.type}),B({title:"",content:"",type:"success"}),S(!1),Se.success("")},ie=z=>{const se=z.target.files?.[0];se&&$({...F,selectedFile:se})},fe=async()=>{!g||!F.selectedFile||!o||(await o(g.id,F.selectedFile,F.description),$({description:"",selectedFile:null}),C(!1),j.current&&(j.current.value=""),Se.success(""))},R=async z=>{if(!u)return;const se=await u(z.id);if(se){const T=new Blob([se.data],{type:se.type}),k=URL.createObjectURL(T),I=document.createElement("a");I.href=k,I.download=se.name,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(k),Se.success("")}else Se.error("")},U=async z=>{!g||!l||(await l(g.id,z),Se.success(""))},H=()=>{N.newTag.trim()&&!N.tags.includes(N.newTag.trim())&&M({...N,tags:[...N.tags,N.newTag.trim()],newTag:""})};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-lg font-semibold",children:""}),d.jsxs(ae,{size:"sm",onClick:()=>p(!0),children:[d.jsx(Ps,{className:"h-4 w-4 mr-1"}),""]})]}),a.length===0?d.jsx(Yt,{children:d.jsxs(Xt,{className:"p-8 text-center",children:[d.jsx(j1,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),d.jsx("p",{className:"text-muted-foreground",children:""}),d.jsx(ae,{variant:"outline",className:"mt-4",onClick:()=>p(!0),children:""})]})}):d.jsx("div",{className:"space-y-3",children:a.map(z=>d.jsx(Yt,{className:"cursor-pointer hover:shadow-md transition-all duration-200",children:d.jsx(Xt,{className:"p-4",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",onClick:()=>m(z),children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("h3",{className:"font-semibold",children:z.name}),d.jsx(fn,{className:vB[z.status],children:gB[z.status]})]}),d.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:z.description}),d.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(go,{className:"h-3 w-3"}),new Date(z.startDate).toLocaleDateString()]}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(Mp,{className:"h-3 w-3"}),z.knowledge.length," "]}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(Qu,{className:"h-3 w-3"}),z.lessons.length," "]}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(ba,{className:"h-3 w-3"}),z.files.length," "]})]}),z.tags.length>0&&d.jsx("div",{className:"flex gap-1 mt-2",children:z.tags.map(se=>d.jsx(fn,{variant:"secondary",className:"text-xs",children:se},se))})]}),d.jsxs(wo,{children:[d.jsx(So,{asChild:!0,children:d.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8",children:d.jsx(xo,{className:"h-4 w-4"})})}),d.jsxs(Ao,{align:"end",children:[d.jsxs(qn,{onClick:()=>m(z),children:[d.jsx(rd,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(qn,{className:"text-destructive",onClick:()=>t(z.id),children:[d.jsx(ri,{className:"h-4 w-4 mr-2"}),""]})]})]})]})})},z.id))}),d.jsx(nn,{open:!!g,onOpenChange:()=>m(null),children:d.jsx(sn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:g&&d.jsxs(d.Fragment,{children:[d.jsx(an,{children:d.jsx(rn,{children:g.name})}),d.jsxs(Vm,{defaultValue:"knowledge",className:"w-full",children:[d.jsxs(w1,{className:"grid w-full grid-cols-3",children:[d.jsxs(ao,{value:"knowledge",children:[d.jsx(Mp,{className:"h-4 w-4 mr-1"})," (",g.knowledge.length,")"]}),d.jsxs(ao,{value:"lessons",children:[d.jsx(Qu,{className:"h-4 w-4 mr-1"})," (",g.lessons.length,")"]}),d.jsxs(ao,{value:"files",children:[d.jsx(ba,{className:"h-4 w-4 mr-1"})," (",g.files.length,")"]})]}),d.jsxs(Os,{value:"knowledge",className:"space-y-4 mt-4",children:[d.jsxs(ae,{size:"sm",onClick:()=>b(!0),className:"w-full",children:[d.jsx(Ps,{className:"h-4 w-4 mr-1"}),""]}),g.knowledge.length===0?d.jsx("p",{className:"text-center text-muted-foreground py-8",children:""}):d.jsx("div",{className:"space-y-3",children:g.knowledge.map(z=>d.jsx(Yt,{className:"transition-all duration-200 hover:shadow-sm",children:d.jsx(Xt,{className:"p-4",children:d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(Mp,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-medium text-sm",children:z.title}),d.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:z.content}),d.jsxs(fn,{variant:"outline",className:"mt-2 text-xs",children:[z.category==="technical"&&"",z.category==="process"&&"",z.category==="communication"&&"",z.category==="other"&&""]})]})]})})},z.id))})]}),d.jsxs(Os,{value:"lessons",className:"space-y-4 mt-4",children:[d.jsxs(ae,{size:"sm",onClick:()=>S(!0),className:"w-full",children:[d.jsx(Ps,{className:"h-4 w-4 mr-1"}),""]}),g.lessons.length===0?d.jsx("p",{className:"text-center text-muted-foreground py-8",children:""}):d.jsx("div",{className:"space-y-3",children:g.lessons.map(z=>d.jsx(Yt,{className:"transition-all duration-200 hover:shadow-sm",children:d.jsx(Xt,{className:"p-4",children:d.jsxs("div",{className:"flex items-start gap-2",children:[z.type==="success"&&d.jsx(E1,{className:"h-4 w-4 text-green-500 mt-0.5"}),z.type==="failure"&&d.jsx(Cn,{className:"h-4 w-4 text-red-500 mt-0.5"}),z.type==="warning"&&d.jsx(Qu,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-medium text-sm",children:z.title}),d.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:z.content}),d.jsxs(fn,{variant:"outline",className:`mt-2 text-xs ${z.type==="success"?"border-green-500 text-green-600":z.type==="failure"?"border-red-500 text-red-600":"border-yellow-500 text-yellow-600"}`,children:[z.type==="success"&&"",z.type==="failure"&&"",z.type==="warning"&&""]})]})]})})},z.id))})]}),d.jsxs(Os,{value:"files",className:"space-y-4 mt-4",children:[d.jsxs(ae,{size:"sm",onClick:()=>C(!0),className:"w-full",children:[d.jsx(Gl,{className:"h-4 w-4 mr-1"}),""]}),g.files.length===0?d.jsx("p",{className:"text-center text-muted-foreground py-8",children:""}):d.jsx("div",{className:"space-y-2",children:g.files.map(z=>d.jsx(Yt,{className:"transition-all duration-200 hover:shadow-sm",children:d.jsx(Xt,{className:"p-3",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(ba,{className:"h-5 w-5 text-primary"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium",children:z.name}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[Iw(z.size),z.description&&`  ${z.description}`]})]})]}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>R(z),children:d.jsx(yo,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>U(z.id),children:d.jsx(ri,{className:"h-4 w-4"})})]})]})})},z.id))})]})]})]})})}),d.jsx(nn,{open:h,onOpenChange:p,children:d.jsxs(sn,{className:"max-w-md",children:[d.jsx(an,{children:d.jsx(rn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:N.name,onChange:z=>M({...N,name:z.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(Is,{value:N.description,onChange:z=>M({...N,description:z.target.value}),placeholder:"",rows:3})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsxs(Oi,{value:N.status,onValueChange:z=>M({...N,status:z}),children:[d.jsx(Pi,{children:d.jsx(Li,{})}),d.jsxs(Ii,{children:[d.jsx(qt,{value:"ongoing",children:""}),d.jsx(qt,{value:"completed",children:""}),d.jsx(qt,{value:"archived",children:""})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{type:"date",value:N.startDate,onChange:z=>M({...N,startDate:z.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ft,{value:N.newTag,onChange:z=>M({...N,newTag:z.target.value}),placeholder:"",onKeyDown:z=>z.key==="Enter"&&H()}),d.jsx(ae,{type:"button",variant:"outline",onClick:H,children:""})]}),N.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:N.tags.map(z=>d.jsxs(fn,{variant:"secondary",className:"gap-1",children:[z,d.jsx("button",{onClick:()=>M({...N,tags:N.tags.filter(se=>se!==z)}),children:d.jsx(Cn,{className:"h-3 w-3"})})]},z))})]})]}),d.jsxs(Ls,{children:[d.jsx(ae,{variant:"outline",onClick:()=>p(!1),children:""}),d.jsx(ae,{onClick:Y,children:""})]})]})}),d.jsx(nn,{open:y,onOpenChange:b,children:d.jsxs(sn,{children:[d.jsx(an,{children:d.jsx(rn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:O.title,onChange:z=>P({...O,title:z.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(Is,{value:O.content,onChange:z=>P({...O,content:z.target.value}),placeholder:"",rows:4})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsxs(Oi,{value:O.category,onValueChange:z=>P({...O,category:z}),children:[d.jsx(Pi,{children:d.jsx(Li,{})}),d.jsxs(Ii,{children:[d.jsx(qt,{value:"technical",children:""}),d.jsx(qt,{value:"process",children:""}),d.jsx(qt,{value:"communication",children:""}),d.jsx(qt,{value:"other",children:""})]})]})]})]}),d.jsxs(Ls,{children:[d.jsx(ae,{variant:"outline",onClick:()=>b(!1),children:""}),d.jsx(ae,{onClick:te,children:""})]})]})}),d.jsx(nn,{open:A,onOpenChange:S,children:d.jsxs(sn,{children:[d.jsx(an,{children:d.jsx(rn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:L.title,onChange:z=>B({...L,title:z.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(Is,{value:L.content,onChange:z=>B({...L,content:z.target.value}),placeholder:"",rows:4})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsxs(Oi,{value:L.type,onValueChange:z=>B({...L,type:z}),children:[d.jsx(Pi,{children:d.jsx(Li,{})}),d.jsxs(Ii,{children:[d.jsx(qt,{value:"success",children:""}),d.jsx(qt,{value:"failure",children:""}),d.jsx(qt,{value:"warning",children:""})]})]})]})]}),d.jsxs(Ls,{children:[d.jsx(ae,{variant:"outline",onClick:()=>S(!1),children:""}),d.jsx(ae,{onClick:oe,children:""})]})]})}),d.jsx(nn,{open:E,onOpenChange:C,children:d.jsxs(sn,{children:[d.jsx(an,{children:d.jsx(rn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{ref:j,type:"file",onChange:ie})]}),F.selectedFile&&d.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[d.jsx("p",{className:"text-sm font-medium",children:F.selectedFile.name}),d.jsx("p",{className:"text-xs text-muted-foreground",children:Iw(F.selectedFile.size)})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:F.description,onChange:z=>$({...F,description:z.target.value}),placeholder:""})]})]}),d.jsxs(Ls,{children:[d.jsx(ae,{variant:"outline",onClick:()=>C(!1),children:""}),d.jsx(ae,{onClick:fe,disabled:!F.selectedFile,children:""})]})]})})]})}const xB=["","","","","","",""],im=["","","","","","",""],bB=["","","","","","","","","","","",""],Pl=[{bg:"bg-blue-100",border:"border-blue-300",text:"text-blue-800"},{bg:"bg-green-100",border:"border-green-300",text:"text-green-800"},{bg:"bg-yellow-100",border:"border-yellow-300",text:"text-yellow-800"},{bg:"bg-red-100",border:"border-red-300",text:"text-red-800"},{bg:"bg-purple-100",border:"border-purple-300",text:"text-purple-800"},{bg:"bg-pink-100",border:"border-pink-300",text:"text-pink-800"},{bg:"bg-indigo-100",border:"border-indigo-300",text:"text-indigo-800"},{bg:"bg-orange-100",border:"border-orange-300",text:"text-orange-800"}],Xu=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"];function Bw(a,e){return new Date(a,e+1,0).getDate()}function wB(a,e){return new Date(a,e,1).getDay()}function zw(a,e){return a.getFullYear()===e.getFullYear()&&a.getMonth()===e.getMonth()&&a.getDate()===e.getDate()}function Wu(a){return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}function SB(){try{const a=localStorage.getItem("schedule-courses");if(a)return JSON.parse(a)}catch{}return[]}function AB(a){try{localStorage.setItem("schedule-courses",JSON.stringify(a))}catch{}}function CB({notes:a,onAddNote:e,onUpdateNote:t,onDeleteNote:s,onToggleComplete:r}){const[o,l]=w.useState(new Date),[u,h]=w.useState(null),[p,g]=w.useState(!1),[m,y]=w.useState(!1),[b,A]=w.useState(null),[S,E]=w.useState("calendar"),[C,j]=w.useState(SB()),[N,M]=w.useState(1),[O,P]=w.useState(!1),[L,B]=w.useState(null),[F,$]=w.useState({name:"",location:"",day:1,startTime:"08:00",endTime:"09:40",color:"0",weekType:"all"}),Y=o.getFullYear(),te=o.getMonth();w.useEffect(()=>{AB(C)},[C]);const oe=Bw(Y,te),ie=wB(Y,te),fe=Bw(Y,te-1),R=w.useMemo(()=>{const K={};return a.forEach(be=>{if(be.dueDate){const Le=new Date(be.dueDate),et=Wu(Le);K[et]||(K[et]=[]),K[et].push(be)}}),K},[a]),U=w.useMemo(()=>{if(!u)return[];const K=Wu(u);return R[K]||[]},[u,R]),H=w.useMemo(()=>a.filter(K=>!K.completed&&K.type==="todo"),[a]),[z,se]=w.useState({title:"",content:"",type:"todo",dueDate:"",dueTime:""}),T=K=>{l(new Date(Y,te+K,1))},k=()=>{const K=new Date;l(K),h(K)},I=()=>{if(!z.title.trim()){Se.error("");return}e({title:z.title,content:z.content,type:z.type,dueDate:z.dueDate||void 0,dueTime:z.dueTime||void 0,tags:[],priority:"medium"}),se({title:"",content:"",type:"todo",dueDate:"",dueTime:""}),g(!1),Se.success("")},q=()=>{!b||!z.title.trim()||(t(b.id,{title:z.title,content:z.content,type:z.type,dueDate:z.dueDate||void 0,dueTime:z.dueTime||void 0}),y(!1),A(null),Se.success(""))},X=K=>{A(K),se({title:K.title,content:K.content,type:K.type==="todo"||K.type==="note"?K.type:"todo",dueDate:K.dueDate||"",dueTime:K.dueTime||""}),y(!0)},ce=K=>{s(K),Se.success("")},Q=()=>{if(!F.name.trim()){Se.error("");return}const K={id:Date.now().toString(),name:F.name,location:F.location,day:F.day,startTime:F.startTime,endTime:F.endTime,color:F.color,weekType:F.weekType};j([...C,K]),$({name:"",location:"",day:1,startTime:"08:00",endTime:"09:40",color:"0",weekType:"all"}),P(!1),Se.success("")},ue=()=>{!L||!F.name.trim()||(j(C.map(K=>K.id===L.id?{...K,...F}:K)),P(!1),B(null),Se.success(""))},pe=K=>{j(C.filter(be=>be.id!==K)),Se.success("")},Ce=K=>{B(K),$({name:K.name,location:K.location,day:K.day,startTime:K.startTime,endTime:K.endTime,color:K.color,weekType:K.weekType}),P(!0)},ye=()=>{B(null),$({name:"",location:"",day:1,startTime:"08:00",endTime:"09:40",color:"0",weekType:"all"}),P(!0)},Ne=K=>C.filter(be=>be.day===K).filter(be=>be.weekType==="all"?!0:be.weekType==="odd"?N%2===1:be.weekType==="even"?N%2===0:!0).sort((be,Le)=>be.startTime.localeCompare(Le.startTime)),Be=K=>{const be=Xu.findIndex(mt=>mt>=K.startTime),Le=Xu.findIndex(mt=>mt>=K.endTime),et=be>=0?be*32:0,ut=Math.max(32,(Le-be)*32),Bt=Pl[parseInt(K.color)%Pl.length];return{top:`${et}px`,height:`${ut}px`,colorSet:Bt}},De=()=>{const K=[],be=new Date;for(let et=ie-1;et>=0;et--){const ut=fe-et;K.push(d.jsx("div",{className:"p-2 text-center text-muted-foreground opacity-50",children:ut},`prev-${ut}`))}for(let et=1;et<=oe;et++){const ut=new Date(Y,te,et),Bt=Wu(ut),mt=R[Bt]||[],gt=mt.length>0,ve=zw(ut,be),Qe=u&&zw(ut,u);K.push(d.jsxs("button",{onClick:()=>h(ut),className:`p-2 text-center rounded-lg transition-all relative ${Qe?"bg-primary text-primary-foreground":ve?"bg-primary/20 text-primary font-semibold":"hover:bg-muted"}`,children:[d.jsx("span",{children:et}),gt&&d.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 flex gap-0.5",children:mt.slice(0,3).map((re,we)=>d.jsx("div",{className:`w-1 h-1 rounded-full ${re.completed?"bg-green-500":"bg-orange-500"}`},we))})]},`current-${et}`))}const Le=42-K.length;for(let et=1;et<=Le;et++)K.push(d.jsx("div",{className:"p-2 text-center text-muted-foreground opacity-50",children:et},`next-${et}`));return K};return d.jsxs("div",{className:"space-y-4 pb-20",children:[d.jsxs(Vm,{value:S,onValueChange:E,className:"w-full",children:[d.jsxs(w1,{className:"grid w-full grid-cols-3",children:[d.jsxs(ao,{value:"calendar",className:"flex items-center gap-1.5",children:[d.jsx(go,{className:"h-4 w-4"}),""]}),d.jsxs(ao,{value:"schedule",className:"flex items-center gap-1.5",children:[d.jsx(Do,{className:"h-4 w-4"}),""]}),d.jsxs(ao,{value:"todos",className:"flex items-center gap-1.5",children:[d.jsx(Fj,{className:"h-4 w-4"}),""]})]}),d.jsxs(Os,{value:"calendar",className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ae,{variant:"outline",size:"icon",onClick:()=>T(-1),children:d.jsx(vo,{className:"h-4 w-4"})}),d.jsxs("span",{className:"text-lg font-semibold min-w-[120px] text-center",children:[Y," ",bB[te]]}),d.jsx(ae,{variant:"outline",size:"icon",onClick:()=>T(1),children:d.jsx(rd,{className:"h-4 w-4"})})]}),d.jsx(ae,{variant:"outline",size:"sm",onClick:k,children:""})]}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:xB.map(K=>d.jsxs("div",{className:"text-center text-sm font-medium text-muted-foreground py-2",children:["",K]},K))}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:De()}),u&&d.jsx(Yt,{children:d.jsxs(Xt,{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("h3",{className:"font-semibold",children:[u.getMonth()+1,"",u.getDate(),""]}),d.jsxs(ae,{size:"sm",onClick:()=>{se({...z,dueDate:Wu(u)}),g(!0)},children:[d.jsx(Ps,{className:"h-4 w-4 mr-1"}),""]})]}),d.jsx("div",{className:"space-y-2",children:U.length===0?d.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""}):U.map(K=>d.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-muted group",children:[d.jsx(Om,{checked:K.completed,onCheckedChange:()=>r(K.id),className:"mt-0.5"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`text-sm font-medium ${K.completed?"line-through text-muted-foreground":""}`,children:K.title}),K.dueTime&&d.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[d.jsx(lm,{className:"h-3 w-3"}),K.dueTime]})]}),d.jsxs(wo,{children:[d.jsx(So,{asChild:!0,children:d.jsx(ae,{variant:"ghost",size:"icon",className:"h-7 w-7 opacity-0 group-hover:opacity-100",children:d.jsx(xo,{className:"h-4 w-4"})})}),d.jsxs(Ao,{align:"end",children:[d.jsxs(qn,{onClick:()=>X(K),children:[d.jsx(Ul,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(qn,{onClick:()=>ce(K.id),className:"text-red-600",children:[d.jsx(ri,{className:"h-4 w-4 mr-2"}),""]})]})]})]},K.id))})]})})]}),d.jsxs(Os,{value:"schedule",className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("h2",{className:"text-lg font-semibold",children:""}),d.jsxs("div",{className:"flex items-center gap-1 bg-muted rounded-lg p-1",children:[d.jsx("button",{onClick:()=>M(Math.max(1,N-1)),className:"p-1.5 rounded hover:bg-background transition-colors",children:d.jsx(vo,{className:"h-4 w-4"})}),d.jsxs("div",{className:"px-3 py-1 text-sm font-medium min-w-[80px] text-center",children:[" ",N," "]}),d.jsx("button",{onClick:()=>M(N+1),className:"p-1.5 rounded hover:bg-background transition-colors",children:d.jsx(rd,{className:"h-4 w-4"})})]}),d.jsx("span",{className:"text-xs text-muted-foreground",children:N%2===1?"":""})]}),d.jsxs(ae,{size:"sm",onClick:ye,children:[d.jsx(Ps,{className:"h-4 w-4 mr-1"}),""]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("div",{className:"min-w-[800px]",children:[d.jsxs("div",{className:"grid grid-cols-8 gap-1 mb-1",children:[d.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground py-2",children:""}),im.map(K=>d.jsx("div",{className:"text-center text-sm font-medium py-2 bg-muted rounded",children:K},K))]}),d.jsxs("div",{className:"grid grid-cols-8 gap-1 relative",children:[d.jsx("div",{className:"space-y-0",children:Xu.map((K,be)=>d.jsx("div",{className:"h-8 text-xs text-muted-foreground text-right pr-2 flex items-center justify-end",children:be%2===0?K:""},K))}),[1,2,3,4,5,6,0].map(K=>d.jsxs("div",{className:"relative bg-muted/30 rounded min-h-[832px]",children:[Xu.map((be,Le)=>d.jsx("div",{className:"h-8 border-b border-dashed border-border/50"},Le)),Ne(K).map(be=>{const Le=Be(be),et=Le.colorSet;return d.jsxs("div",{onClick:()=>Ce(be),className:`absolute left-1 right-1 rounded px-2 py-1 cursor-pointer hover:brightness-95 transition-all border ${et.bg} ${et.border}`,style:{top:Le.top,height:Le.height},children:[d.jsx("p",{className:`text-xs font-medium truncate ${et.text}`,children:be.name}),d.jsx("p",{className:`text-[10px] truncate ${et.text} opacity-80`,children:be.location})]},be.id)})]},K))]})]})}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:""}),C.length===0?d.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""}):d.jsx("div",{className:"space-y-2",children:C.map(K=>{const be=Pl[parseInt(K.color)%Pl.length],Le={all:"",odd:"",even:""}[K.weekType||"all"];return d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-3 h-3 rounded-full ${be.bg.replace("bg-","bg-").replace("100","400")}`}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("p",{className:"font-medium",children:K.name}),d.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:Le})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[im[K.day===0?6:K.day-1]," ",K.startTime,"-",K.endTime,"  ",K.location]})]})]}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>Ce(K),children:d.jsx(Ul,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500",onClick:()=>pe(K.id),children:d.jsx(ri,{className:"h-4 w-4"})})]})]},K.id)})})]})]}),d.jsxs(Os,{value:"todos",className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("h2",{className:"text-lg font-semibold",children:["",H.length>0&&d.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",H.length,")"]})]}),d.jsxs(ae,{size:"sm",onClick:()=>g(!0),children:[d.jsx(Ps,{className:"h-4 w-4 mr-1"}),""]})]}),d.jsx("div",{className:"space-y-2",children:H.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(_1,{className:"h-12 w-12 mx-auto text-green-500 mb-3"}),d.jsx("p",{className:"text-muted-foreground",children:""})]}):H.map(K=>d.jsx(Yt,{className:"group",children:d.jsx(Xt,{className:"p-3",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Om,{checked:K.completed,onCheckedChange:()=>r(K.id),className:"mt-1"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-medium",children:K.title}),K.content&&d.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:K.content}),(K.dueDate||K.dueTime)&&d.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[K.dueDate&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(go,{className:"h-3 w-3"}),K.dueDate]}),K.dueTime&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(lm,{className:"h-3 w-3"}),K.dueTime]})]})]}),d.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>X(K),children:d.jsx(Ul,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500",onClick:()=>ce(K.id),children:d.jsx(ri,{className:"h-4 w-4"})})]})]})})},K.id))})]})]}),d.jsx(nn,{open:p||m,onOpenChange:K=>{K||(g(!1),y(!1),A(null))},children:d.jsxs(sn,{className:"sm:max-w-md",children:[d.jsx(an,{children:d.jsx(rn,{children:b?"":""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:z.title,onChange:K=>se({...z,title:K.target.value}),placeholder:"..."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(Is,{value:z.content,onChange:K=>se({...z,content:K.target.value}),placeholder:"...",rows:3})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{type:"date",value:z.dueDate,onChange:K=>se({...z,dueDate:K.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{type:"time",value:z.dueTime,onChange:K=>se({...z,dueTime:K.target.value})})]})]})]}),d.jsxs(Ls,{children:[d.jsx(ae,{variant:"outline",onClick:()=>{g(!1),y(!1),A(null)},children:""}),d.jsx(ae,{onClick:b?q:I,children:b?"":""})]})]})}),d.jsx(nn,{open:O,onOpenChange:P,children:d.jsxs(sn,{className:"sm:max-w-md",children:[d.jsx(an,{children:d.jsx(rn,{children:L?"":""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:F.name,onChange:K=>$({...F,name:K.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:F.location,onChange:K=>$({...F,location:K.target.value}),placeholder:" A301"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:im.map((K,be)=>d.jsx("button",{onClick:()=>$({...F,day:be===6?0:be+1}),className:`p-2 text-xs rounded transition-colors ${(F.day===0?6:F.day-1)===be?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:K.replace("","")},K))})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{type:"time",value:F.startTime,onChange:K=>$({...F,startTime:K.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{type:"time",value:F.endTime,onChange:K=>$({...F,endTime:K.target.value})})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx("div",{className:"flex gap-2 flex-wrap",children:Pl.map((K,be)=>d.jsx("button",{onClick:()=>$({...F,color:be.toString()}),className:`w-8 h-8 rounded-full ${K.bg} border-2 ${K.border} transition-all ${F.color===be.toString()?"ring-2 ring-primary ring-offset-2 scale-110":""}`},be))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx("div",{className:"flex gap-2",children:[{value:"all",label:""},{value:"odd",label:""},{value:"even",label:""}].map(K=>d.jsx("button",{onClick:()=>$({...F,weekType:K.value}),className:`flex-1 p-2 text-sm rounded transition-colors ${F.weekType===K.value?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:K.label},K.value))})]})]}),d.jsxs(Ls,{children:[L&&d.jsx(ae,{variant:"destructive",onClick:()=>{pe(L.id),P(!1),B(null)},children:""}),d.jsx("div",{className:"flex-1"}),d.jsx(ae,{variant:"outline",onClick:()=>{P(!1),B(null)},children:""}),d.jsx(ae,{onClick:L?ue:Q,children:L?"":""})]})]})})]})}const am=[{value:"javascript",label:"JavaScript",icon:"JS",color:"#f7df1e"},{value:"typescript",label:"TypeScript",icon:"TS",color:"#3178c6"},{value:"python",label:"Python",icon:"PY",color:"#3776ab"},{value:"java",label:"Java",icon:"JV",color:"#b07219"},{value:"cpp",label:"C++",icon:"C++",color:"#f34b7d"},{value:"c",label:"C",icon:"C",color:"#555555"},{value:"html",label:"HTML",icon:"HT",color:"#e34c26"},{value:"css",label:"CSS",icon:"CS",color:"#563d7c"},{value:"sql",label:"SQL",icon:"SQ",color:"#336791"},{value:"rust",label:"Rust",icon:"RS",color:"#dea584"},{value:"go",label:"Go",icon:"GO",color:"#00add8"},{value:"other",label:"",icon:"..",color:"#888888"}],Fw=[{name:"Darcula",bg:"#2b2b2b",sidebar:"#3c3f41",text:"#a9b7c6",keyword:"#cc7832",string:"#6a8759",comment:"#808080",number:"#6897bb",function:"#ffc66d",lineNumber:"#606366",selection:"#214283"},{name:"Light",bg:"#ffffff",sidebar:"#f5f5f5",text:"#000000",keyword:"#000080",string:"#008000",comment:"#808080",number:"#0000ff",function:"#795e26",lineNumber:"#237893",selection:"#add6ff"},{name:"Monokai",bg:"#272822",sidebar:"#3e3d32",text:"#f8f8f2",keyword:"#f92672",string:"#e6db74",comment:"#75715e",number:"#ae81ff",function:"#a6e22e",lineNumber:"#90908a",selection:"#49483e"},{name:"Oceanic",bg:"#1e2b35",sidebar:"#263740",text:"#d8dee9",keyword:"#c695c6",string:"#99c794",comment:"#65737e",number:"#f99157",function:"#6699cc",lineNumber:"#5f7885",selection:"#344a55"}];function EB(){try{const a=localStorage.getItem("coding-projects-v2");if(a)return JSON.parse(a)}catch{}return[]}function _B(a){try{localStorage.setItem("coding-projects-v2",JSON.stringify(a))}catch{}}function TB(){try{const a=localStorage.getItem("coding-editor-settings");if(a)return JSON.parse(a)}catch{}return{theme:0,fontSize:14}}function NB(a){try{localStorage.setItem("coding-editor-settings",JSON.stringify(a))}catch{}}function jB(){const[a,e]=w.useState(EB()),[t,s]=w.useState(""),[r,o]=w.useState(null),[l,u]=w.useState(!1),[h,p]=w.useState(!1),[g,m]=w.useState(!1),[y,b]=w.useState(!1),[A,S]=w.useState(TB()),[E,C]=w.useState(!1),[j,N]=w.useState({name:"",description:"",language:"javascript",code:""}),M=Fw[A.theme],O=w.useRef(null),P=w.useRef(null);w.useEffect(()=>{_B(a)},[a]),w.useEffect(()=>{NB(A)},[A]);const L=w.useMemo(()=>{if(!t.trim())return a;const T=t.toLowerCase();return a.filter(k=>k.name.toLowerCase().includes(T)||k.description.toLowerCase().includes(T)||k.language.toLowerCase().includes(T))},[a,t]),B=w.useMemo(()=>{const T={};return L.forEach(k=>{T[k.language]||(T[k.language]=[]),T[k.language].push(k)}),T},[L]),F=()=>{if(!j.name.trim()){Se.error("");return}const T={id:Date.now().toString(),name:j.name,description:j.description,language:j.language,code:j.code,createdAt:Date.now(),updatedAt:Date.now()};e([T,...a]),N({name:"",description:"",language:"javascript",code:""}),u(!1),Se.success("")},$=()=>{if(!r||!j.name.trim())return;const T=a.map(I=>I.id===r.id?{...I,...j,updatedAt:Date.now()}:I);e(T);const k={...r,...j,updatedAt:Date.now()};o(k),p(!1),C(!1),Se.success("")},Y=T=>{e(a.filter(k=>k.id!==T)),r?.id===T&&(o(null),m(!1)),Se.success("")},te=T=>{r&&(o({...r,code:T}),C(!0))},oe=()=>{r&&(e(a.map(T=>T.id===r.id?{...T,code:r.code,updatedAt:Date.now()}:T)),C(!1),Se.success(""))},ie=()=>{r&&(N({name:r.name,description:r.description,language:r.language,code:r.code}),p(!0))},fe=()=>{N({name:"",description:"",language:"javascript",code:""}),u(!0)},R=T=>{const k=new Blob([T.code],{type:"text/plain"}),I=URL.createObjectURL(k),q=document.createElement("a");q.href=I,q.download=`${T.name}.${H(T.language)}`,q.click(),URL.revokeObjectURL(I),Se.success("")},U=T=>{const k=T.target.files?.[0];if(!k)return;const I=new FileReader;I.onload=q=>{const X=q.target?.result,ce=z(k.name);N({name:k.name.replace(/\.[^/.]+$/,""),description:` ${k.name} `,language:ce,code:X}),u(!0)},I.readAsText(k),T.target.value=""},H=T=>({javascript:"js",typescript:"ts",python:"py",java:"java",cpp:"cpp",c:"c",html:"html",css:"css",sql:"sql",rust:"rs",go:"go"})[T]||"txt",z=T=>{const k=T.split(".").pop()?.toLowerCase()||"";return{js:"javascript",ts:"typescript",py:"python",java:"java",cpp:"cpp",c:"c",h:"c",html:"html",htm:"html",css:"css",sql:"sql",rs:"rust",go:"go"}[k]||"other"},se=T=>am.find(k=>k.value===T)||am[11];return g&&r?d.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col animate-in fade-in duration-200",style:{backgroundColor:M.bg},children:[d.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b select-none",style:{backgroundColor:M.sidebar,borderColor:`${M.text}15`},children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:()=>{E&&oe(),m(!1)},className:"flex items-center gap-1.5 px-2 py-1.5 rounded text-sm transition-all hover:brightness-110",style:{backgroundColor:`${M.text}15`,color:M.text},children:[d.jsx(vo,{className:"h-4 w-4"}),""]}),d.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded",style:{backgroundColor:`${M.text}08`},children:[d.jsx(l0,{className:"h-4 w-4",style:{color:se(r.language).color}}),d.jsx("span",{style:{color:M.text,fontSize:"13px"},children:r.name}),E&&d.jsx("span",{className:"text-amber-400 text-xs",children:""})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:oe,className:"flex items-center gap-1.5 px-3 py-1.5 rounded text-sm transition-all hover:brightness-110",style:{backgroundColor:E?"#365880":`${M.text}15`,color:E?"#fff":M.text},children:[d.jsx(h0,{className:"h-4 w-4"}),""]}),d.jsx("button",{onClick:()=>b(!0),className:"p-2 rounded transition-all hover:brightness-110",style:{backgroundColor:`${M.text}15`,color:M.text},children:d.jsx(Nd,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>{E&&oe(),m(!1)},className:"p-2 rounded transition-all hover:brightness-110",style:{backgroundColor:`${M.text}15`,color:M.text},children:d.jsx(Cn,{className:"h-4 w-4"})})]})]}),d.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[d.jsx("div",{className:"w-12 flex-shrink-0 py-4 text-right pr-2 select-none overflow-hidden",style:{backgroundColor:M.bg,color:M.lineNumber,fontSize:`${A.fontSize}px`,lineHeight:"1.6",fontFamily:'"JetBrains Mono", "Fira Code", monospace'},children:r.code.split(`
`).map((T,k)=>d.jsx("div",{className:"h-[1.6em]",children:k+1},k))}),d.jsx("div",{className:"flex-1 relative overflow-auto",ref:P,children:d.jsx("textarea",{ref:O,value:r.code,onChange:T=>te(T.target.value),className:"w-full min-h-full p-4 resize-none outline-none border-0",style:{backgroundColor:M.bg,color:M.text,fontSize:`${A.fontSize}px`,lineHeight:"1.6",fontFamily:'"JetBrains Mono", "Fira Code", monospace',tabSize:2},spellCheck:!1,placeholder:"// ..."})})]}),d.jsxs("div",{className:"flex items-center justify-between px-3 py-1 text-xs select-none",style:{backgroundColor:M.sidebar,color:M.text},children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{children:se(r.language).label}),d.jsx("span",{children:"UTF-8"}),d.jsxs("span",{children:[r.code.length," "]}),d.jsxs("span",{children:[r.code.split(`
`).length," "]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("span",{children:[": ",A.fontSize,"px"]}),d.jsxs("span",{children:[": ",M.name]})]})]}),y&&d.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 animate-in fade-in duration-150",onClick:()=>b(!1),children:d.jsxs("div",{className:"w-full max-w-sm rounded-lg overflow-hidden shadow-2xl animate-in zoom-in-95 duration-200",style:{backgroundColor:M.sidebar},onClick:T=>T.stopPropagation(),children:[d.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",style:{borderColor:`${M.text}15`},children:[d.jsx("h3",{className:"font-semibold",style:{color:M.text},children:""}),d.jsx("button",{onClick:()=>b(!1),className:"p-1.5 rounded hover:brightness-110 transition-all",style:{color:M.text},children:d.jsx(Cn,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"p-4 space-y-5",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{style:{color:M.text},children:""}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:Fw.map((T,k)=>d.jsx("button",{onClick:()=>S({...A,theme:k}),className:`p-3 rounded-lg text-sm font-medium transition-all ${A.theme===k?"ring-2 ring-primary scale-[1.02]":"hover:scale-[1.02]"}`,style:{backgroundColor:T.bg,color:T.text,border:`1px solid ${A.theme===k?"var(--primary)":"transparent"}`},children:T.name},k))})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(Pe,{style:{color:M.text},children:""}),d.jsxs("span",{className:"text-sm font-mono px-2 py-0.5 rounded",style:{backgroundColor:`${M.text}15`,color:M.text},children:[A.fontSize,"px"]})]}),d.jsx(Ka,{value:[A.fontSize],onValueChange:T=>S({...A,fontSize:T[0]}),min:10,max:24,step:1})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{style:{color:M.text},children:""}),d.jsxs("div",{className:"p-3 rounded-lg font-mono text-sm",style:{backgroundColor:M.bg,color:M.text,fontSize:`${A.fontSize}px`},children:[d.jsx("span",{style:{color:M.keyword},children:"function"}),d.jsx("span",{children:" hello"}),d.jsx("span",{style:{color:M.function},children:"()"}),d.jsxs("span",{children:[" ","{"]}),d.jsx("br",{}),d.jsx("span",{children:"  "}),d.jsx("span",{style:{color:M.keyword},children:"return"}),d.jsx("span",{style:{color:M.string},children:' "Hello World"'}),d.jsx("span",{children:";"}),d.jsx("br",{}),d.jsx("span",{children:"}"})]})]})]})]})})]}):r?d.jsxs("div",{className:"h-full flex flex-col animate-in fade-in duration-200",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-muted/30",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>{E&&oe(),o(null)},children:[d.jsx(vo,{className:"h-4 w-4 mr-1"}),""]}),d.jsx("div",{className:"h-6 w-px bg-border"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(l0,{className:"h-5 w-5",style:{color:se(r.language).color}}),d.jsx("span",{className:"font-medium",children:r.name}),E&&d.jsx("span",{className:"text-amber-500 text-xs",children:" "})]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(ae,{variant:"ghost",size:"icon",onClick:oe,title:"",children:d.jsx(h0,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>m(!0),title:"",children:d.jsx(M1,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"ghost",size:"icon",onClick:ie,title:"",children:d.jsx(u0,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>R(r),title:"",children:d.jsx(yo,{className:"h-4 w-4"})}),d.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>Y(r.id),title:"",className:"text-red-500 hover:text-red-600",children:d.jsx(ri,{className:"h-4 w-4"})})]})]}),d.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[d.jsx("div",{className:"w-10 flex-shrink-0 py-4 text-right pr-2 select-none bg-muted/20 text-muted-foreground text-sm font-mono",children:r.code.split(`
`).map((T,k)=>d.jsx("div",{className:"h-6",children:k+1},k))}),d.jsx("textarea",{value:r.code,onChange:T=>te(T.target.value),className:"flex-1 w-full p-4 resize-none outline-none font-mono text-sm",style:{lineHeight:"1.5",backgroundColor:"#1e1e1e",color:"#d4d4d4"},placeholder:"// ...",spellCheck:!1})]})]}):d.jsxs("div",{className:"space-y-4 pb-20 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold",children:""}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," "]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(Pe,{htmlFor:"import-file",className:"cursor-pointer",children:[d.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 rounded-md bg-muted hover:bg-muted/80 transition-all text-sm",children:[d.jsx(Gl,{className:"h-4 w-4"}),""]}),d.jsx(ft,{id:"import-file",type:"file",accept:".js,.ts,.py,.java,.cpp,.c,.html,.css,.sql,.rs,.go,.txt",className:"hidden",onChange:U})]}),d.jsxs(ae,{size:"sm",onClick:fe,children:[d.jsx(Ps,{className:"h-4 w-4 mr-1"}),""]})]})]}),d.jsxs("div",{className:"relative",children:[d.jsx(O1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),d.jsx(ft,{placeholder:"...",value:t,onChange:T=>s(T.target.value),className:"pl-9"})]}),a.length===0?d.jsxs("div",{className:"text-center py-16 animate-in fade-in duration-500",children:[d.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl bg-primary/10 flex items-center justify-center",children:d.jsx(T1,{className:"h-10 w-10 text-primary"})}),d.jsx("p",{className:"text-muted-foreground mb-1",children:""}),d.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}):L.length===0?d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-muted-foreground",children:""})}):d.jsx("div",{className:"space-y-6",children:Object.entries(B).map(([T,k])=>{const I=se(T);return d.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-300",children:[d.jsxs("h3",{className:"text-sm font-medium text-muted-foreground mb-3 flex items-center gap-2",children:[d.jsx("span",{className:"w-6 h-6 rounded-md flex items-center justify-center text-[10px] font-bold",style:{backgroundColor:`${I.color}20`,color:I.color},children:I.icon}),I.label,d.jsxs("span",{className:"text-xs",children:["(",k.length,")"]})]}),d.jsx("div",{className:"grid gap-2",children:k.map((q,X)=>d.jsx(Yt,{className:"cursor-pointer hover:border-primary/50 hover:shadow-sm transition-all duration-200 group animate-in fade-in slide-in-from-bottom-2",style:{animationDelay:`${X*50}ms`},onClick:()=>o(q),children:d.jsx(Xt,{className:"p-3",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ba,{className:"h-4 w-4 text-primary"}),d.jsx("p",{className:"font-medium truncate",children:q.name})]}),q.description&&d.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-1",children:q.description}),d.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",new Date(q.updatedAt).toLocaleDateString("zh-CN")]})]}),d.jsxs(wo,{children:[d.jsx(So,{asChild:!0,children:d.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:ce=>ce.stopPropagation(),children:d.jsx(xo,{className:"h-4 w-4"})})}),d.jsxs(Ao,{align:"end",children:[d.jsxs(qn,{onClick:ce=>{ce.stopPropagation(),o(q),m(!0)},children:[d.jsx(R1,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(qn,{onClick:ce=>{ce.stopPropagation(),o(q),ie()},children:[d.jsx(u0,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(qn,{onClick:ce=>{ce.stopPropagation(),R(q)},children:[d.jsx(yo,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(qn,{onClick:ce=>{ce.stopPropagation(),Y(q.id)},className:"text-red-600",children:[d.jsx(ri,{className:"h-4 w-4 mr-2"}),""]})]})]})]})})},q.id))})]},T)})}),d.jsx(nn,{open:l||h,onOpenChange:T=>{T||(u(!1),p(!1))},children:d.jsxs(sn,{className:"sm:max-w-md",children:[d.jsx(an,{children:d.jsx(rn,{children:h?"":""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:j.name,onChange:T=>N({...j,name:T.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{value:j.description,onChange:T=>N({...j,description:T.target.value}),placeholder:"..."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:am.map(T=>d.jsx("button",{onClick:()=>N({...j,language:T.value}),className:`p-2 rounded-md text-xs font-medium transition-all ${j.language===T.value?"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2":"bg-muted hover:bg-muted/80"}`,children:T.label},T.value))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(Is,{value:j.code,onChange:T=>N({...j,code:T.target.value}),placeholder:"...",rows:5,className:"font-mono text-sm"})]})]}),d.jsxs(Ls,{children:[d.jsx(ae,{variant:"outline",onClick:()=>{u(!1),p(!1)},children:""}),d.jsx(ae,{onClick:h?$:F,children:h?"":""})]})]})})]})}const MB=()=>{const a=new(window.AudioContext||window.webkitAudioContext),e=a.createOscillator(),t=a.createGain();e.connect(t),t.connect(a.destination),e.frequency.value=800,e.type="sine",t.gain.setValueAtTime(.3,a.currentTime),t.gain.exponentialRampToValueAtTime(.01,a.currentTime+.5),e.start(a.currentTime),e.stop(a.currentTime+.5),setTimeout(()=>{const s=a.createOscillator(),r=a.createGain();s.connect(r),r.connect(a.destination),s.frequency.value=1e3,s.type="sine",r.gain.setValueAtTime(.3,a.currentTime),r.gain.exponentialRampToValueAtTime(.01,a.currentTime+.5),s.start(a.currentTime),s.stop(a.currentTime+.5)},200),setTimeout(()=>{const s=a.createOscillator(),r=a.createGain();s.connect(r),r.connect(a.destination),s.frequency.value=1200,s.type="sine",r.gain.setValueAtTime(.3,a.currentTime),r.gain.exponentialRampToValueAtTime(.01,a.currentTime+1),s.start(a.currentTime),s.stop(a.currentTime+1)},400)},RB=a=>{if(a==="none")return null;const e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate,s=t*2,r=e.createBuffer(1,s,t),o=r.getChannelData(0);for(let h=0;h<s;h++)if(a==="rain"){const p=Math.random()*2-1;o[h]=(Hw+.02*p)/1.02,Hw=o[h],o[h]*=3.5}else if(a==="wind"){const p=Math.random()*2-1;o[h]=p*.3}else if(a==="waves"){const p=h/t,g=.1+Math.sin(p*.5)*.05;o[h]=Math.sin(p*g*Math.PI*2)*.3}const l=e.createBufferSource();l.buffer=r,l.loop=!0;const u=e.createGain();if(u.gain.value=.3,a==="wind"){const h=e.createBiquadFilter();h.type="lowpass",h.frequency.value=400,l.connect(h),h.connect(u)}else l.connect(u);return u.connect(e.destination),l.start(),{audioContext:e,noiseNode:l,gainNode:u}};let Hw=0;function DB(){const[a,e]=w.useState(!1),[t,s]=w.useState(!1),[r,o]=w.useState(!1),[l,u]=w.useState(0),[h,p]=w.useState({mode:"countdown",minutes:25,soundEnabled:!0,ambientSound:"none",ambientVolume:30}),[g,m]=w.useState(25),[y,b]=w.useState(null),[A,S]=w.useState(""),E=w.useRef(null),C=w.useRef(null),j=w.useRef(null);w.useEffect(()=>()=>{N(),E.current&&clearInterval(E.current)},[]);const N=()=>{if(C.current){try{C.current.noiseNode.stop(),C.current.audioContext.close()}catch{}C.current=null}j.current&&(j.current.pause(),j.current=null)},M=()=>{if(N(),y){const R=new Audio(y);R.loop=!0,R.volume=h.ambientVolume/100,R.play().catch(()=>{Se.error("")}),j.current=R}else if(h.ambientSound!=="none"){const R=RB(h.ambientSound);R&&(R.gainNode.gain.value=h.ambientVolume/100,C.current=R)}},O=w.useCallback(()=>{h.soundEnabled&&MB()},[h.soundEnabled]),P=w.useCallback(()=>{h.mode==="countdown"||h.mode==="custom"?u(h.minutes*60):u(0),o(!0),M()},[h.mode,h.minutes,y,h.ambientSound,h.ambientVolume]),L=w.useCallback(()=>{o(!1),N(),E.current&&(clearInterval(E.current),E.current=null)},[]),B=w.useCallback(()=>{L(),h.mode==="countdown"||h.mode==="custom"?u(h.minutes*60):u(0)},[h.mode,h.minutes,L]),F=w.useCallback(()=>{L(),u(0)},[L]);w.useEffect(()=>(r&&(E.current=setInterval(()=>{u(R=>h.mode==="countdown"||h.mode==="custom"?R<=1?(L(),O(),Se.success(" ",{duration:5e3,icon:""}),0):R-1:R+1)},1e3)),()=>{E.current&&clearInterval(E.current)}),[r,h.mode,L,O]);const $=R=>{const U=Math.floor(R/3600),H=Math.floor(R%3600/60),z=R%60;return U>0?`${U}:${H.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}`:`${H.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}`},Y=()=>!r&&l===0&&(h.mode==="countdown"||h.mode==="custom")?$(h.minutes*60):$(l),te=()=>{if(h.mode==="countup")return 0;const R=h.minutes*60;return R===0?0:(R-l)/R*100},oe=()=>{p(R=>({...R,minutes:g})),r||u(g*60),s(!1),Se.success("")},ie=R=>{const U=R.target.files?.[0];if(U){const H=URL.createObjectURL(U);b(H),S(U.name),Se.success("")}},fe=()=>{y&&URL.revokeObjectURL(y),b(null),S(""),Se.success("")};return d.jsxs(d.Fragment,{children:[d.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>e(!0),className:"gap-2",children:[d.jsx(NM,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:""}),r&&d.jsx("span",{className:"ml-1 text-xs font-mono",children:Y()})]}),d.jsx(nn,{open:a,onOpenChange:R=>{e(!R&&r?!1:R)},children:d.jsxs(sn,{className:"max-w-sm",children:[d.jsx(an,{children:d.jsxs(rn,{className:"flex items-center justify-between",children:[d.jsx("span",{children:""}),d.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>s(!0),children:d.jsx(Nd,{className:"h-4 w-4"})})]})}),d.jsxs("div",{className:"py-6",children:[d.jsxs("div",{className:"relative flex items-center justify-center mb-8",children:[d.jsxs("svg",{className:"w-56 h-56 transform -rotate-90",children:[d.jsx("circle",{cx:"112",cy:"112",r:"100",fill:"none",stroke:"currentColor",strokeWidth:"12",className:"text-muted"}),d.jsx("circle",{cx:"112",cy:"112",r:"100",fill:"none",stroke:"currentColor",strokeWidth:"12",strokeLinecap:"round",className:"text-primary transition-all duration-1000",strokeDasharray:`${2*Math.PI*100}`,strokeDashoffset:`${2*Math.PI*100*(1-te()/100)}`})]}),d.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[d.jsx("span",{className:"text-5xl font-mono font-bold",children:Y()}),d.jsxs("span",{className:"text-sm text-muted-foreground mt-2",children:[h.mode==="countdown"&&"",h.mode==="countup"&&"",h.mode==="custom"&&` ${h.minutes}`]}),h.ambientSound!=="none"&&d.jsxs("span",{className:"text-xs text-primary mt-1 flex items-center gap-1",children:[h.ambientSound==="rain"&&d.jsx(r0,{className:"h-3 w-3"}),h.ambientSound==="wind"&&d.jsx(g0,{className:"h-3 w-3"}),h.ambientSound==="waves"&&d.jsx(m0,{className:"h-3 w-3"}),""]}),y&&d.jsxs("span",{className:"text-xs text-primary mt-1 flex items-center gap-1",children:[d.jsx(Rp,{className:"h-3 w-3"}),""]})]})]}),d.jsxs("div",{className:"flex items-center justify-center gap-3",children:[r?d.jsxs(ae,{size:"lg",variant:"outline",onClick:L,className:"gap-2 px-8",children:[d.jsx(D1,{className:"h-5 w-5"}),""]}):d.jsxs(ae,{size:"lg",onClick:P,className:"gap-2 px-8",children:[d.jsx(k1,{className:"h-5 w-5"}),""]}),d.jsxs(ae,{size:"lg",variant:"outline",onClick:B,disabled:l===0&&!r,className:"gap-2",children:[d.jsx(uM,{className:"h-5 w-5"}),""]}),d.jsx(ae,{size:"lg",variant:"ghost",onClick:()=>p(R=>({...R,soundEnabled:!R.soundEnabled})),className:"gap-2",children:h.soundEnabled?d.jsx(f0,{className:"h-5 w-5"}):d.jsx(p0,{className:"h-5 w-5"})})]}),d.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[d.jsx(ae,{variant:h.mode==="countdown"?"default":"outline",size:"sm",onClick:()=>{p(R=>({...R,mode:"countdown",minutes:25})),m(25),F()},children:"25"}),d.jsx(ae,{variant:h.mode==="countup"?"default":"outline",size:"sm",onClick:()=>{p(R=>({...R,mode:"countup"})),F()},children:""}),d.jsx(ae,{variant:h.mode==="custom"?"default":"outline",size:"sm",onClick:()=>{p(R=>({...R,mode:"custom",minutes:g})),F()},children:""})]})]})]})}),d.jsx(nn,{open:t,onOpenChange:s,children:d.jsxs(sn,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[d.jsx(an,{children:d.jsx(rn,{children:""})}),d.jsxs("div",{className:"space-y-6 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsx(ft,{type:"number",min:1,max:180,value:g,onChange:R=>m(Math.max(1,Math.min(180,parseInt(R.target.value)||1)))})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(Pe,{children:""}),d.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>p(R=>({...R,soundEnabled:!R.soundEnabled})),children:h.soundEnabled?d.jsx(f0,{className:"h-4 w-4"}):d.jsx(p0,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(Pe,{children:""}),d.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[d.jsx(ae,{variant:h.ambientSound==="none"?"default":"outline",size:"sm",onClick:()=>p(R=>({...R,ambientSound:"none"})),children:""}),d.jsxs(ae,{variant:h.ambientSound==="rain"?"default":"outline",size:"sm",onClick:()=>p(R=>({...R,ambientSound:"rain"})),className:"gap-1",children:[d.jsx(r0,{className:"h-3 w-3"}),""]}),d.jsxs(ae,{variant:h.ambientSound==="wind"?"default":"outline",size:"sm",onClick:()=>p(R=>({...R,ambientSound:"wind"})),className:"gap-1",children:[d.jsx(g0,{className:"h-3 w-3"}),""]}),d.jsxs(ae,{variant:h.ambientSound==="waves"?"default":"outline",size:"sm",onClick:()=>p(R=>({...R,ambientSound:"waves"})),className:"gap-1",children:[d.jsx(m0,{className:"h-3 w-3"}),""]})]})]}),h.ambientSound!=="none"&&d.jsxs("div",{className:"space-y-2",children:[d.jsxs(Pe,{children:[" (",h.ambientVolume,"%)"]}),d.jsx(Ka,{value:[h.ambientVolume],onValueChange:R=>p(U=>({...U,ambientVolume:R[0]})),min:0,max:100,step:5})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(Pe,{children:""}),y?d.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[d.jsx(Rp,{className:"h-4 w-4 text-primary"}),d.jsx("span",{className:"flex-1 text-sm truncate",children:A}),d.jsx(ae,{variant:"ghost",size:"sm",onClick:fe,children:""})]}):d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"file",accept:"audio/*",onChange:ie,className:"hidden",id:"music-upload"}),d.jsx("label",{htmlFor:"music-upload",className:"flex-1",children:d.jsx(ae,{variant:"outline",className:"w-full gap-2",asChild:!0,children:d.jsxs("span",{children:[d.jsx(Rp,{className:"h-4 w-4"}),""]})})})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:" MP3, WAV, OGG "})]})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx(ae,{variant:"outline",onClick:()=>s(!1),children:""}),d.jsx(ae,{onClick:oe,children:""})]})]})})]})}const kB=[{id:"schedule",label:"",icon:go},{id:"coding",label:"",icon:T1},{id:"library",label:"",icon:Ij},{id:"projects",label:"",icon:N1}];function OB(){const{categories:a,projects:e,notes:t,sync:s,isLoaded:r,addBook:o,updateBook:l,deleteBook:u,getBook:h,filterBooks:p,uploadFile:g,downloadFile:m,deleteBookFile:y,addPDFAnnotation:b,updatePDFAnnotation:A,deletePDFAnnotation:S,getBookPDFAnnotations:E,addProject:C,deleteProject:j,addProjectKnowledge:N,addProjectLesson:M,addProjectFile:O,deleteProjectFile:P,downloadProjectFile:L,addNote:B,updateNote:F,deleteNote:$,toggleNoteComplete:Y,addCategory:te,deleteCategory:oe,getAllTags:ie,getStats:fe,exportData:R,importData:U,regenerateSyncCode:H,syncDataToCloud:z,syncDataFromCloud:se,mergeData:T}=_R(),[k,I]=w.useState(null),[q,X]=w.useState(!1),[ce,Q]=w.useState({}),[ue,pe]=w.useState("schedule"),[Ce,ye]=w.useState(!1),[Ne,Be]=w.useState(null),[De,K]=w.useState(null),[be,Le]=w.useState(!1),[et,ut]=w.useState(!1),[Bt,mt]=w.useState(""),[gt,ve]=w.useState(!1),[Qe,re]=w.useState(""),we=k?h(k):null,He=De?h(De):null,vt=p(ce),Ot=ie(),Nt=fe();w.useEffect(()=>()=>{Ne&&URL.revokeObjectURL(Ne)},[Ne]);const Xn=ge=>{I(ge.id)},On=()=>{I(null)},di=ge=>{Q(ze=>({...ze,searchQuery:ge}))},mn=ge=>{Q(ze=>({...ze,...ge}))},Wn=async(ge,ze)=>{if(ze.size>104857600){Se.error("100MB");return}await g(ge,ze),Se.success("")},on=async ge=>{const ze=h(ge);if(!ze?.fileId){Se.error("");return}try{const Ue=await m(ze.fileId);if(Ue){Ne&&URL.revokeObjectURL(Ne);const yt=new Blob([Ue.data],{type:Ue.type}),ot=URL.createObjectURL(yt);Be(ot),K(ge),ye(!0)}else Se.error("")}catch{Se.error("")}},zo=async ge=>{const ze=h(ge);if(!ze?.fileId){Se.error("");return}try{const Ue=await m(ze.fileId);if(Ue){const ot=new TextDecoder("utf-8").decode(Ue.data);re(ot),K(ge),ve(!0)}else Se.error("")}catch{Se.error("")}},ja=async(ge,ze)=>{try{const Ue=await ze.arrayBuffer(),yt=new Blob([Ue],{type:ze.type}),ot=URL.createObjectURL(yt);return l(ge,{coverUrl:ot}),Promise.resolve()}catch(Ue){return Se.error(""),Promise.reject(Ue)}},us=ge=>{He&&b({...ge,bookId:He.id})},Gi=ge=>{if(Ne&&He?.fileName){const ze=document.createElement("a");if(ze.href=Ne,ze.download=He.fileName,ze.click(),ge){const Ue=E(He.id);if(Ue.length>0){const yt=Ue.sort((Ht,Ts)=>Ht.page-Ts.page||new Date(Ht.createdAt).getTime()-new Date(Ts.createdAt).getTime()).map((Ht,Ts)=>`[${Ts+1}] ${Ht.page}
${Ht.content}
: ${new Date(Ht.createdAt).toLocaleString()}
`).join(`
---

`),ot=`${He.title}
: ${He.author}
: ${new Date().toLocaleString()}
 ${Ue.length} 

==================

${yt}`,_n=new Blob([ot],{type:"text/plain;charset=utf-8"}),Us=URL.createObjectURL(_n),ln=document.createElement("a");ln.href=Us,ln.download=`${He.title}_.txt`,ln.click(),URL.revokeObjectURL(Us)}}Se.success("")}},qi=()=>{const ge=R(),ze=new Blob([ge],{type:"application/json"}),Ue=URL.createObjectURL(ze),yt=document.createElement("a");yt.href=Ue,yt.download=`knowledge-library-backup-${new Date().toISOString().split("T")[0]}.json`,yt.click(),URL.revokeObjectURL(Ue),Se.success("")},hi=ge=>U(ge)?(Se.success(""),!0):(Se.error(""),!1),ds=()=>{const ge=s.syncCode||H();z(ge,{books:vt,categories:a,pdfAnnotations:[],projects:e,notes:t,sync:{...s,syncCode:ge}})?Se.success(""):Se.error(""),ut(!0)},$e=()=>{if(!Bt.trim()){Se.error("");return}const ge=se(Bt.toUpperCase());ge?(T(ge),Se.success(""),ut(!1),mt("")):Se.error("")};return r?d.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[d.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur",children:d.jsxs("div",{className:"container flex h-14 items-center justify-between px-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Do,{className:"h-6 w-6 text-primary"}),d.jsx("h1",{className:"text-lg font-semibold",children:""}),d.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"v1.4.0"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>pe("stats"),className:ue==="stats"?"text-primary":"",title:"",children:d.jsx(ij,{className:"h-5 w-5"})}),d.jsx(DB,{}),d.jsxs(ae,{variant:"ghost",size:"sm",onClick:ds,className:"gap-2",children:[d.jsx(lM,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:""})]}),d.jsxs(gS,{open:be,onOpenChange:Le,children:[d.jsx(vS,{asChild:!0,children:d.jsx(ae,{variant:"ghost",size:"icon",children:d.jsx(Nd,{className:"h-5 w-5"})})}),d.jsxs(yS,{side:"right",className:"w-full sm:max-w-md",children:[d.jsx(xS,{children:d.jsx(bS,{children:""})}),d.jsxs("div",{className:"py-4 space-y-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[d.jsx(xM,{className:"h-4 w-4"}),""]}),d.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[d.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:""}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("code",{className:"flex-1 p-2 bg-background rounded text-lg font-mono tracking-wider",children:s.syncCode}),d.jsx(ae,{size:"sm",variant:"outline",onClick:()=>{const ge=H();Se.success(": "+ge)},children:""})]}),d.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-sm font-medium",children:""}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs(ae,{variant:"outline",className:"w-full gap-2",onClick:qi,children:[d.jsx(yo,{className:"h-4 w-4"}),""]}),d.jsxs("label",{className:"flex",children:[d.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:ge=>{const ze=ge.target.files?.[0];if(ze){const Ue=new FileReader;Ue.onload=yt=>{hi(yt.target?.result)},Ue.readAsText(ze)}}}),d.jsx(ae,{variant:"outline",className:"w-full gap-2",asChild:!0,children:d.jsxs("span",{children:[d.jsx(xj,{className:"h-4 w-4"}),""]})})]})]})]}),d.jsx(I4,{categories:a,onAddCategory:te,onDeleteCategory:oe}),d.jsxs("div",{className:"pt-4 border-t text-center",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:" v1.4.0"}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]})]})]}),ue==="library"&&!we&&d.jsxs(ae,{size:"sm",onClick:()=>X(!0),children:[d.jsx(Gl,{className:"h-4 w-4 mr-1"}),""]})]})]})}),d.jsx("main",{className:"flex-1 container px-4 py-4 pb-24",children:d.jsxs(Vm,{value:ue,onValueChange:pe,className:"w-full",children:[d.jsx(Os,{value:"schedule",className:"mt-0 animate-in fade-in slide-in-from-bottom-4 duration-300",children:d.jsx(CB,{notes:t,onAddNote:B,onUpdateNote:F,onDeleteNote:$,onToggleComplete:Y})}),d.jsx(Os,{value:"coding",className:"mt-0 animate-in fade-in slide-in-from-bottom-4 duration-300",children:d.jsx(jB,{})}),d.jsx(Os,{value:"library",className:"mt-0 animate-in fade-in slide-in-from-bottom-4 duration-300",children:we?d.jsx(GP,{book:we,categories:a,onBack:On,onUpdate:l,onDelete:ge=>{u(ge),On(),Se.success("")},onAddAnnotation:(ge,ze,Ue)=>{const yt=h(ge);yt&&(l(ge,{annotations:[...yt.annotations,{id:LB(),content:ze,page:Ue,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]}),Se.success(""))},onUpdateAnnotation:(ge,ze,Ue)=>{const yt=h(ge);yt&&(l(ge,{annotations:yt.annotations.map(ot=>ot.id===ze?{...ot,content:Ue,updatedAt:new Date().toISOString()}:ot)}),Se.success(""))},onDeleteAnnotation:(ge,ze)=>{const Ue=h(ge);Ue&&(l(ge,{annotations:Ue.annotations.filter(yt=>yt.id!==ze)}),Se.success(""))},onUploadFile:Wn,onDeleteFile:y,onReadPDF:()=>on(we.id),onReadText:()=>zo(we.id),hasFile:!!we.fileId,onUploadCover:ja}):d.jsxs("div",{className:"space-y-4",children:[d.jsx(B4,{value:ce.searchQuery||"",onChange:di,placeholder:"..."}),d.jsx(IP,{books:vt,categories:a,filter:ce,onFilterChange:mn,onBookClick:Xn,allTags:Ot,onEditBook:ge=>{I(ge.id)},onDeleteBook:ge=>{u(ge),Se.success("")}})]})}),d.jsx(Os,{value:"projects",className:"mt-0 animate-in fade-in slide-in-from-bottom-4 duration-300",children:d.jsx(yB,{projects:e,onAddProject:C,onDeleteProject:j,onAddKnowledge:N,onAddLesson:M,onAddFile:O,onDeleteFile:P,onDownloadFile:L})}),d.jsx(Os,{value:"stats",className:"mt-0 animate-in fade-in slide-in-from-bottom-4 duration-300",children:d.jsx(r4,{stats:Nt})})]})}),d.jsx("nav",{className:"fixed bottom-0 left-0 right-0 border-t bg-background/95 backdrop-blur safe-area-pb z-50",children:d.jsx("div",{className:"flex justify-around h-16 items-center",children:kB.map(ge=>{const ze=ge.icon,Ue=ue===ge.id;return d.jsxs("button",{onClick:()=>{pe(ge.id),On()},className:`flex flex-col items-center gap-1 px-4 py-2 transition-all duration-200 ${Ue?"text-primary":"text-muted-foreground"}`,children:[d.jsx(ze,{className:"h-5 w-5"}),d.jsx("span",{className:"text-[10px]",children:ge.label}),Ue&&d.jsx("div",{className:"absolute bottom-1 w-4 h-0.5 bg-primary rounded-full"})]},ge.id)})})}),d.jsx(YP,{open:q,onOpenChange:X,categories:a,onAdd:o,allTags:Ot}),d.jsx(nn,{open:Ce,onOpenChange:ye,children:d.jsxs(sn,{className:"max-w-5xl h-[90vh] p-0 flex flex-col",showCloseButton:!1,children:[d.jsx(an,{className:"p-4 border-b flex flex-row items-center justify-between",children:d.jsxs(rn,{className:"flex items-center gap-2",children:[d.jsx(ba,{className:"h-5 w-5"}),He?.title||""]})}),d.jsx("div",{className:"flex-1 overflow-hidden",children:Ne&&He&&d.jsx(O5,{fileUrl:Ne,book:He,annotations:E(He.id),onAddAnnotation:us,onUpdateAnnotation:A,onDeleteAnnotation:S,onDownloadFile:Gi})})]})}),gt&&He&&d.jsx(mB,{content:Qe,title:He.title,bookId:He.id,onClose:()=>{ve(!1),re("")}}),d.jsx(nn,{open:et,onOpenChange:ut,children:d.jsxs(sn,{children:[d.jsx(an,{children:d.jsx(rn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg text-center",children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:""}),d.jsx("code",{className:"text-2xl font-mono tracking-widest",children:s.syncCode})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pe,{children:""}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ft,{placeholder:"",value:Bt,onChange:ge=>mt(ge.target.value.toUpperCase()),maxLength:6}),d.jsx(ae,{onClick:$e,children:""})]})]})]})]})}),d.jsx(yR,{position:"top-center",toastOptions:{duration:2e3},style:{top:"20%"}})]}):d.jsx("div",{className:"flex items-center justify-center h-screen bg-background",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function LB(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}yT.createRoot(document.getElementById("root")).render(d.jsx(w.StrictMode,{children:d.jsx(OB,{})}));
