var Bb=a=>{throw TypeError(a)};var gm=(a,e,t)=>e.has(a)||Bb("Cannot "+t);var Lt=(a,e,t)=>(gm(a,e,"read from private field"),t?t.call(a):e.get(a)),Js=(a,e,t)=>e.has(a)?Bb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),Kn=(a,e,t,n)=>(gm(a,e,"write to private field"),n?n.call(a,t):e.set(a,t),t),ei=(a,e,t)=>(gm(a,e,"access private method"),t);var zb=(a,e,t,n)=>({set _(i){Kn(a,e,i,t)},get _(){return Lt(a,e,n)}});function rT(a,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in a)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(a,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function kp(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var vm={exports:{}},Ml={};var Fb;function oT(){if(Fb)return Ml;Fb=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:a,type:n,key:l,ref:i!==void 0?i:null,props:o}}return Ml.Fragment=e,Ml.jsx=t,Ml.jsxs=t,Ml}var Hb;function lT(){return Hb||(Hb=1,vm.exports=oT()),vm.exports}var d=lT(),ym={exports:{}},Ye={};var Ub;function cT(){if(Ub)return Ye;Ub=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=y&&j[y]||j["@@iterator"],typeof j=="function"?j:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(j,k,B){this.props=j,this.context=k,this.refs=E,this.updater=B||A}C.prototype.isReactComponent={},C.prototype.setState=function(j,k){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,k,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function T(){}T.prototype=C.prototype;function N(j,k,B){this.props=j,this.context=k,this.refs=E,this.updater=B||A}var M=N.prototype=new T;M.constructor=N,S(M,C.prototype),M.isPureReactComponent=!0;var L=Array.isArray;function I(){}var O={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function F(j,k,B){var X=B.ref;return{$$typeof:a,type:j,key:k,ref:X!==void 0?X:null,props:B}}function $(j,k){return F(j.type,k,j.props)}function W(j){return typeof j=="object"&&j!==null&&j.$$typeof===a}function ie(j){var k={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(B){return k[B]})}var le=/\/+/g;function G(j,k){return typeof j=="object"&&j!==null&&j.key!=null?ie(""+j.key):k.toString(36)}function fe(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(I,I):(j.status="pending",j.then(function(k){j.status==="pending"&&(j.status="fulfilled",j.value=k)},function(k){j.status==="pending"&&(j.status="rejected",j.reason=k)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function R(j,k,B,X,K){var oe=typeof j;(oe==="undefined"||oe==="boolean")&&(j=null);var J=!1;if(j===null)J=!0;else switch(oe){case"bigint":case"string":case"number":J=!0;break;case"object":switch(j.$$typeof){case a:case e:J=!0;break;case p:return J=j._init,R(J(j._payload),k,B,X,K)}}if(J)return K=K(j),J=X===""?"."+G(j,0):X,L(K)?(B="",J!=null&&(B=J.replace(le,"$&/")+"/"),R(K,k,B,"",function(pe){return pe})):K!=null&&(W(K)&&(K=$(K,B+(K.key==null||j&&j.key===K.key?"":(""+K.key).replace(le,"$&/")+"/")+J)),k.push(K)),1;J=0;var Y=X===""?".":X+":";if(L(j))for(var se=0;se<j.length;se++)X=j[se],oe=Y+G(X,se),J+=R(X,k,B,oe,K);else if(se=w(j),typeof se=="function")for(j=se.call(j),se=0;!(X=j.next()).done;)X=X.value,oe=Y+G(X,se++),J+=R(X,k,B,oe,K);else if(oe==="object"){if(typeof j.then=="function")return R(fe(j),k,B,X,K);throw k=String(j),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return J}function U(j,k,B){if(j==null)return j;var X=[],K=0;return R(j,X,"","",function(oe){return k.call(B,oe,K++)}),X}function H(j){if(j._status===-1){var k=j._result;k=k(),k.then(function(B){(j._status===0||j._status===-1)&&(j._status=1,j._result=B)},function(B){(j._status===0||j._status===-1)&&(j._status=2,j._result=B)}),j._status===-1&&(j._status=0,j._result=k)}if(j._status===1)return j._result.default;throw j._result}var z=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},ce={map:U,forEach:function(j,k,B){U(j,function(){k.apply(this,arguments)},B)},count:function(j){var k=0;return U(j,function(){k++}),k},toArray:function(j){return U(j,function(k){return k})||[]},only:function(j){if(!W(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Ye.Activity=g,Ye.Children=ce,Ye.Component=C,Ye.Fragment=t,Ye.Profiler=i,Ye.PureComponent=N,Ye.StrictMode=n,Ye.Suspense=h,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(j){return O.H.useMemoCache(j)}},Ye.cache=function(j){return function(){return j.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(j,k,B){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var X=S({},j.props),K=j.key;if(k!=null)for(oe in k.key!==void 0&&(K=""+k.key),k)!P.call(k,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&k.ref===void 0||(X[oe]=k[oe]);var oe=arguments.length-2;if(oe===1)X.children=B;else if(1<oe){for(var J=Array(oe),Y=0;Y<oe;Y++)J[Y]=arguments[Y+2];X.children=J}return F(j.type,K,X)},Ye.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},Ye.createElement=function(j,k,B){var X,K={},oe=null;if(k!=null)for(X in k.key!==void 0&&(oe=""+k.key),k)P.call(k,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(K[X]=k[X]);var J=arguments.length-2;if(J===1)K.children=B;else if(1<J){for(var Y=Array(J),se=0;se<J;se++)Y[se]=arguments[se+2];K.children=Y}if(j&&j.defaultProps)for(X in J=j.defaultProps,J)K[X]===void 0&&(K[X]=J[X]);return F(j,oe,K)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(j){return{$$typeof:u,render:j}},Ye.isValidElement=W,Ye.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:H}},Ye.memo=function(j,k){return{$$typeof:m,type:j,compare:k===void 0?null:k}},Ye.startTransition=function(j){var k=O.T,B={};O.T=B;try{var X=j(),K=O.S;K!==null&&K(B,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(I,z)}catch(oe){z(oe)}finally{k!==null&&B.types!==null&&(k.types=B.types),O.T=k}},Ye.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ye.use=function(j){return O.H.use(j)},Ye.useActionState=function(j,k,B){return O.H.useActionState(j,k,B)},Ye.useCallback=function(j,k){return O.H.useCallback(j,k)},Ye.useContext=function(j){return O.H.useContext(j)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(j,k){return O.H.useDeferredValue(j,k)},Ye.useEffect=function(j,k){return O.H.useEffect(j,k)},Ye.useEffectEvent=function(j){return O.H.useEffectEvent(j)},Ye.useId=function(){return O.H.useId()},Ye.useImperativeHandle=function(j,k,B){return O.H.useImperativeHandle(j,k,B)},Ye.useInsertionEffect=function(j,k){return O.H.useInsertionEffect(j,k)},Ye.useLayoutEffect=function(j,k){return O.H.useLayoutEffect(j,k)},Ye.useMemo=function(j,k){return O.H.useMemo(j,k)},Ye.useOptimistic=function(j,k){return O.H.useOptimistic(j,k)},Ye.useReducer=function(j,k,B){return O.H.useReducer(j,k,B)},Ye.useRef=function(j){return O.H.useRef(j)},Ye.useState=function(j){return O.H.useState(j)},Ye.useSyncExternalStore=function(j,k,B){return O.H.useSyncExternalStore(j,k,B)},Ye.useTransition=function(){return O.H.useTransition()},Ye.version="19.2.3",Ye}var Vb;function Op(){return Vb||(Vb=1,ym.exports=cT()),ym.exports}var x=Op();const ve=kp(x),Lp=rT({__proto__:null,default:ve},[x]);var bm={exports:{}},Rl={},xm={exports:{}},wm={};var $b;function uT(){return $b||($b=1,(function(a){function e(R,U){var H=R.length;R.push(U);e:for(;0<H;){var z=H-1>>>1,ce=R[z];if(0<i(ce,U))R[z]=U,R[H]=ce,H=z;else break e}}function t(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var U=R[0],H=R.pop();if(H!==U){R[0]=H;e:for(var z=0,ce=R.length,j=ce>>>1;z<j;){var k=2*(z+1)-1,B=R[k],X=k+1,K=R[X];if(0>i(B,H))X<ce&&0>i(K,B)?(R[z]=K,R[X]=H,z=X):(R[z]=B,R[k]=H,z=k);else if(X<ce&&0>i(K,H))R[z]=K,R[X]=H,z=X;else break e}}return U}function i(R,U){var H=R.sortIndex-U.sortIndex;return H!==0?H:R.id-U.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();a.unstable_now=function(){return l.now()-u}}var h=[],m=[],p=1,g=null,y=3,w=!1,A=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function M(R){for(var U=t(m);U!==null;){if(U.callback===null)n(m);else if(U.startTime<=R)n(m),U.sortIndex=U.expirationTime,e(h,U);else break;U=t(m)}}function L(R){if(S=!1,M(R),!A)if(t(h)!==null)A=!0,I||(I=!0,ie());else{var U=t(m);U!==null&&fe(L,U.startTime-R)}}var I=!1,O=-1,P=5,F=-1;function $(){return E?!0:!(a.unstable_now()-F<P)}function W(){if(E=!1,I){var R=a.unstable_now();F=R;var U=!0;try{e:{A=!1,S&&(S=!1,T(O),O=-1),w=!0;var H=y;try{t:{for(M(R),g=t(h);g!==null&&!(g.expirationTime>R&&$());){var z=g.callback;if(typeof z=="function"){g.callback=null,y=g.priorityLevel;var ce=z(g.expirationTime<=R);if(R=a.unstable_now(),typeof ce=="function"){g.callback=ce,M(R),U=!0;break t}g===t(h)&&n(h),M(R)}else n(h);g=t(h)}if(g!==null)U=!0;else{var j=t(m);j!==null&&fe(L,j.startTime-R),U=!1}}break e}finally{g=null,y=H,w=!1}U=void 0}}finally{U?ie():I=!1}}}var ie;if(typeof N=="function")ie=function(){N(W)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,G=le.port2;le.port1.onmessage=W,ie=function(){G.postMessage(null)}}else ie=function(){C(W,0)};function fe(R,U){O=C(function(){R(a.unstable_now())},U)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(R){R.callback=null},a.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<R?Math.floor(1e3/R):5},a.unstable_getCurrentPriorityLevel=function(){return y},a.unstable_next=function(R){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var H=y;y=U;try{return R()}finally{y=H}},a.unstable_requestPaint=function(){E=!0},a.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=y;y=R;try{return U()}finally{y=H}},a.unstable_scheduleCallback=function(R,U,H){var z=a.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?z+H:z):H=z,R){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=H+ce,R={id:p++,callback:U,priorityLevel:R,startTime:H,expirationTime:ce,sortIndex:-1},H>z?(R.sortIndex=H,e(m,R),t(h)===null&&R===t(m)&&(S?(T(O),O=-1):S=!0,fe(L,H-z))):(R.sortIndex=ce,e(h,R),A||w||(A=!0,I||(I=!0,ie()))),R},a.unstable_shouldYield=$,a.unstable_wrapCallback=function(R){var U=y;return function(){var H=y;y=U;try{return R.apply(this,arguments)}finally{y=H}}}})(wm)),wm}var Gb;function dT(){return Gb||(Gb=1,xm.exports=uT()),xm.exports}var Sm={exports:{}},kn={};var Yb;function hT(){if(Yb)return kn;Yb=1;var a=Op();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,m,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:h,containerInfo:m,implementation:p}}var l=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,kn.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(h,m,null,p)},kn.flushSync=function(h){var m=l.T,p=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=m,n.p=p,n.d.f()}},kn.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(h,m))},kn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},kn.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,g=u(p,m.crossOrigin),y=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?n.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:w}):p==="script"&&n.d.X(h,{crossOrigin:g,integrity:y,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},kn.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=u(m.as,m.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(h)},kn.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,g=u(p,m.crossOrigin);n.d.L(h,p,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},kn.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=u(m.as,m.crossOrigin);n.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(h)},kn.requestFormReset=function(h){n.d.r(h)},kn.unstable_batchedUpdates=function(h,m){return h(m)},kn.useFormState=function(h,m,p){return l.H.useFormState(h,m,p)},kn.useFormStatus=function(){return l.H.useHostTransitionStatus()},kn.version="19.2.3",kn}var qb;function Gw(){if(qb)return Sm.exports;qb=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Sm.exports=hT(),Sm.exports}var Xb;function fT(){if(Xb)return Rl;Xb=1;var a=dT(),e=Op(),t=Gw();function n(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,c=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(c=r.return),s=r.return;while(s)}return r.tag===3?c:null}function l(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function u(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(n(188))}function m(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(n(188));return r!==s?null:s}for(var c=s,f=r;;){var v=c.return;if(v===null)break;var b=v.alternate;if(b===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===c)return h(v),s;if(b===f)return h(v),r;b=b.sibling}throw Error(n(188))}if(c.return!==f.return)c=v,f=b;else{for(var _=!1,D=v.child;D;){if(D===c){_=!0,c=v,f=b;break}if(D===f){_=!0,f=v,c=b;break}D=D.sibling}if(!_){for(D=b.child;D;){if(D===c){_=!0,c=b,f=v;break}if(D===f){_=!0,f=b,c=v;break}D=D.sibling}if(!_)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?s:r}function p(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=p(s),r!==null)return r;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ie(s){return s===null||typeof s!="object"?null:(s=W&&s[W]||s["@@iterator"],typeof s=="function"?s:null)}var le=Symbol.for("react.client.reference");function G(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===le?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case I:return"SuspenseList";case F:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case N:return s.displayName||"Context";case T:return(s._context.displayName||"Context")+".Consumer";case M:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return r=s.displayName||null,r!==null?r:G(s.type)||"Memo";case P:r=s._payload,s=s._init;try{return G(s(r))}catch{}}return null}var fe=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},z=[],ce=-1;function j(s){return{current:s}}function k(s){0>ce||(s.current=z[ce],z[ce]=null,ce--)}function B(s,r){ce++,z[ce]=s.current,s.current=r}var X=j(null),K=j(null),oe=j(null),J=j(null);function Y(s,r){switch(B(oe,r),B(K,s),B(X,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?ob(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=ob(r),s=lb(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}k(X),B(X,s)}function se(){k(X),k(K),k(oe)}function pe(s){s.memoizedState!==null&&B(J,s);var r=X.current,c=lb(r,s.type);r!==c&&(B(K,s),B(X,c))}function xe(s){K.current===s&&(k(X),k(K)),J.current===s&&(k(J),_l._currentValue=H)}var ge,Ve;function Oe(s){if(ge===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);ge=r&&r[1]||"",Ve=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+s+Ve}var Z=!1;function Ae(s,r){if(!s||Z)return"";Z=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ae){var ne=ae}Reflect.construct(s,[],me)}else{try{me.call()}catch(ae){ne=ae}s.call(me.prototype)}}else{try{throw Error()}catch(ae){ne=ae}(me=s())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ae){if(ae&&ne&&typeof ae.stack=="string")return[ae.stack,ne.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),_=b[0],D=b[1];if(_&&D){var V=_.split(`
`),te=D.split(`
`);for(v=f=0;f<V.length&&!V[f].includes("DetermineComponentFrameRoot");)f++;for(;v<te.length&&!te[v].includes("DetermineComponentFrameRoot");)v++;if(f===V.length||v===te.length)for(f=V.length-1,v=te.length-1;1<=f&&0<=v&&V[f]!==te[v];)v--;for(;1<=f&&0<=v;f--,v--)if(V[f]!==te[v]){if(f!==1||v!==1)do if(f--,v--,0>v||V[f]!==te[v]){var ue=`
`+V[f].replace(" at new "," at ");return s.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",s.displayName)),ue}while(1<=f&&0<=v);break}}}finally{Z=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Oe(c):""}function Ge(s,r){switch(s.tag){case 26:case 27:case 5:return Oe(s.type);case 16:return Oe("Lazy");case 13:return s.child!==r&&r!==null?Oe("Suspense Fallback"):Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return Ae(s.type,!1);case 11:return Ae(s.type.render,!1);case 1:return Ae(s.type,!0);case 31:return Oe("Activity");default:return""}}function $e(s){try{var r="",c=null;do r+=Ge(s,c),c=s,s=s.return;while(s);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var ut=Object.prototype.hasOwnProperty,rn=a.unstable_scheduleCallback,Tt=a.unstable_cancelCallback,At=a.unstable_shouldYield,Ut=a.unstable_requestPaint,Mt=a.unstable_now,ps=a.unstable_getCurrentPriorityLevel,Zt=a.unstable_ImmediatePriority,Rt=a.unstable_UserBlockingPriority,Pn=a.unstable_NormalPriority,Jt=a.unstable_LowPriority,Vt=a.unstable_IdlePriority,Sn=a.log,cn=a.unstable_setDisableYieldValue,Ds=null,re=null;function ye(s){if(typeof Sn=="function"&&cn(s),re&&typeof re.setStrictMode=="function")try{re.setStrictMode(Ds,s)}catch{}}var Ee=Math.clz32?Math.clz32:tt,et=Math.log,pt=Math.LN2;function tt(s){return s>>>=0,s===0?32:31-(et(s)/pt|0)|0}var Dt=256,kt=262144,un=4194304;function Un(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Fe(s,r,c){var f=s.pendingLanes;if(f===0)return 0;var v=0,b=s.suspendedLanes,_=s.pingedLanes;s=s.warmLanes;var D=f&134217727;return D!==0?(f=D&~b,f!==0?v=Un(f):(_&=D,_!==0?v=Un(_):c||(c=D&~s,c!==0&&(v=Un(c))))):(D=f&~b,D!==0?v=Un(D):_!==0?v=Un(_):c||(c=f&~s,c!==0&&(v=Un(c)))),v===0?0:r!==0&&r!==v&&(r&b)===0&&(b=v&-v,c=r&-r,b>=c||b===32&&(c&4194048)!==0)?r:v}function be(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Ie(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function He(){var s=un;return un<<=1,(un&62914560)===0&&(un=4194304),s}function gt(s){for(var r=[],c=0;31>c;c++)r.push(s);return r}function ot(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Dn(s,r,c,f,v,b){var _=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var D=s.entanglements,V=s.expirationTimes,te=s.hiddenUpdates;for(c=_&~c;0<c;){var ue=31-Ee(c),me=1<<ue;D[ue]=0,V[ue]=-1;var ne=te[ue];if(ne!==null)for(te[ue]=null,ue=0;ue<ne.length;ue++){var ae=ne[ue];ae!==null&&(ae.lane&=-536870913)}c&=~me}f!==0&&Xs(s,f,0),b!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=b&~(_&~r))}function Xs(s,r,c){s.pendingLanes|=r,s.suspendedLanes&=~r;var f=31-Ee(r);s.entangledLanes|=r,s.entanglements[f]=s.entanglements[f]|1073741824|c&261930}function dn(s,r){var c=s.entangledLanes|=r;for(s=s.entanglements;c;){var f=31-Ee(c),v=1<<f;v&r|s[f]&r&&(s[f]|=r),c&=~v}}function $t(s,r){var c=r&-r;return c=(c&42)!==0?1:ks(c),(c&(s.suspendedLanes|r))!==0?0:c}function ks(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Os(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ah(){var s=U.p;return s!==0?s:(s=window.event,s===void 0?32:Rb(s.type))}function qg(s,r){var c=U.p;try{return U.p=s,r()}finally{U.p=c}}var Xi=Math.random().toString(36).slice(2),An="__reactFiber$"+Xi,Vn="__reactProps$"+Xi,hr="__reactContainer$"+Xi,rh="__reactEvents$"+Xi,WE="__reactListeners$"+Xi,KE="__reactHandles$"+Xi,Xg="__reactResources$"+Xi,Ho="__reactMarker$"+Xi;function oh(s){delete s[An],delete s[Vn],delete s[rh],delete s[WE],delete s[KE]}function fr(s){var r=s[An];if(r)return r;for(var c=s.parentNode;c;){if(r=c[hr]||c[An]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(s=pb(s);s!==null;){if(c=s[An])return c;s=pb(s)}return r}s=c,c=s.parentNode}return null}function mr(s){if(s=s[An]||s[hr]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Uo(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(n(33))}function pr(s){var r=s[Xg];return r||(r=s[Xg]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function hn(s){s[Ho]=!0}var Wg=new Set,Kg={};function Ra(s,r){gr(s,r),gr(s+"Capture",r)}function gr(s,r){for(Kg[s]=r,s=0;s<r.length;s++)Wg.add(r[s])}var QE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qg={},Zg={};function ZE(s){return ut.call(Zg,s)?!0:ut.call(Qg,s)?!1:QE.test(s)?Zg[s]=!0:(Qg[s]=!0,!1)}function xc(s,r,c){if(ZE(r))if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+c)}}function wc(s,r,c){if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+c)}}function gi(s,r,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(r,c,""+f)}}function gs(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Jg(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function JE(s,r,c){var f=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,b=f.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return v.call(this)},set:function(_){c=""+_,b.call(this,_)}}),Object.defineProperty(s,r,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function lh(s){if(!s._valueTracker){var r=Jg(s)?"checked":"value";s._valueTracker=JE(s,r,""+s[r])}}function ev(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var c=r.getValue(),f="";return s&&(f=Jg(s)?s.checked?"true":"false":s.value),s=f,s!==c?(r.setValue(s),!0):!1}function Sc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var e2=/[\n"\\]/g;function vs(s){return s.replace(e2,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ch(s,r,c,f,v,b,_,D){s.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.type=_:s.removeAttribute("type"),r!=null?_==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+gs(r)):s.value!==""+gs(r)&&(s.value=""+gs(r)):_!=="submit"&&_!=="reset"||s.removeAttribute("value"),r!=null?uh(s,_,gs(r)):c!=null?uh(s,_,gs(c)):f!=null&&s.removeAttribute("value"),v==null&&b!=null&&(s.defaultChecked=!!b),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.name=""+gs(D):s.removeAttribute("name")}function tv(s,r,c,f,v,b,_,D){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),r!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){lh(s);return}c=c!=null?""+gs(c):"",r=r!=null?""+gs(r):c,D||r===s.value||(s.value=r),s.defaultValue=r}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=D?s.checked:!!f,s.defaultChecked=!!f,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.name=_),lh(s)}function uh(s,r,c){r==="number"&&Sc(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function vr(s,r,c,f){if(s=s.options,r){r={};for(var v=0;v<c.length;v++)r["$"+c[v]]=!0;for(c=0;c<s.length;c++)v=r.hasOwnProperty("$"+s[c].value),s[c].selected!==v&&(s[c].selected=v),v&&f&&(s[c].defaultSelected=!0)}else{for(c=""+gs(c),r=null,v=0;v<s.length;v++){if(s[v].value===c){s[v].selected=!0,f&&(s[v].defaultSelected=!0);return}r!==null||s[v].disabled||(r=s[v])}r!==null&&(r.selected=!0)}}function nv(s,r,c){if(r!=null&&(r=""+gs(r),r!==s.value&&(s.value=r),c==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=c!=null?""+gs(c):""}function sv(s,r,c,f){if(r==null){if(f!=null){if(c!=null)throw Error(n(92));if(fe(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),r=c}c=gs(r),s.defaultValue=c,f=s.textContent,f===c&&f!==""&&f!==null&&(s.value=f),lh(s)}function yr(s,r){if(r){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=r;return}}s.textContent=r}var t2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iv(s,r,c){var f=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":f?s.setProperty(r,c):typeof c!="number"||c===0||t2.has(r)?r==="float"?s.cssFloat=c:s[r]=(""+c).trim():s[r]=c+"px"}function av(s,r,c){if(r!=null&&typeof r!="object")throw Error(n(62));if(s=s.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var v in r)f=r[v],r.hasOwnProperty(v)&&c[v]!==f&&iv(s,v,f)}else for(var b in r)r.hasOwnProperty(b)&&iv(s,b,r[b])}function dh(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),s2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ac(s){return s2.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function vi(){}var hh=null;function fh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var br=null,xr=null;function rv(s){var r=mr(s);if(r&&(s=r.stateNode)){var c=s[Vn]||null;e:switch(s=r.stateNode,r.type){case"input":if(ch(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+vs(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var f=c[r];if(f!==s&&f.form===s.form){var v=f[Vn]||null;if(!v)throw Error(n(90));ch(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<c.length;r++)f=c[r],f.form===s.form&&ev(f)}break e;case"textarea":nv(s,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&vr(s,!!c.multiple,r,!1)}}}var mh=!1;function ov(s,r,c){if(mh)return s(r,c);mh=!0;try{var f=s(r);return f}finally{if(mh=!1,(br!==null||xr!==null)&&(uu(),br&&(r=br,s=xr,xr=br=null,rv(r),s)))for(r=0;r<s.length;r++)rv(s[r])}}function Vo(s,r){var c=s.stateNode;if(c===null)return null;var f=c[Vn]||null;if(f===null)return null;c=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(n(231,r,typeof c));return c}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=!1;if(yi)try{var $o={};Object.defineProperty($o,"passive",{get:function(){ph=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{ph=!1}var Wi=null,gh=null,Cc=null;function lv(){if(Cc)return Cc;var s,r=gh,c=r.length,f,v="value"in Wi?Wi.value:Wi.textContent,b=v.length;for(s=0;s<c&&r[s]===v[s];s++);var _=c-s;for(f=1;f<=_&&r[c-f]===v[b-f];f++);return Cc=v.slice(s,1<f?1-f:void 0)}function Ec(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function _c(){return!0}function cv(){return!1}function $n(s){function r(c,f,v,b,_){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(c=s[D],this[D]=c?c(b):b[D]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?_c:cv,this.isPropagationStopped=cv,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=_c)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=_c)},persist:function(){},isPersistent:_c}),r}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tc=$n(Da),Go=g({},Da,{view:0,detail:0}),i2=$n(Go),vh,yh,Yo,Nc=g({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Yo&&(Yo&&s.type==="mousemove"?(vh=s.screenX-Yo.screenX,yh=s.screenY-Yo.screenY):yh=vh=0,Yo=s),vh)},movementY:function(s){return"movementY"in s?s.movementY:yh}}),uv=$n(Nc),a2=g({},Nc,{dataTransfer:0}),r2=$n(a2),o2=g({},Go,{relatedTarget:0}),bh=$n(o2),l2=g({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),c2=$n(l2),u2=g({},Da,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),d2=$n(u2),h2=g({},Da,{data:0}),dv=$n(h2),f2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g2(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=p2[s])?!!r[s]:!1}function xh(){return g2}var v2=g({},Go,{key:function(s){if(s.key){var r=f2[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Ec(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?m2[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xh,charCode:function(s){return s.type==="keypress"?Ec(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ec(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),y2=$n(v2),b2=g({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hv=$n(b2),x2=g({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xh}),w2=$n(x2),S2=g({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),A2=$n(S2),C2=g({},Nc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),E2=$n(C2),_2=g({},Da,{newState:0,oldState:0}),T2=$n(_2),N2=[9,13,27,32],wh=yi&&"CompositionEvent"in window,qo=null;yi&&"documentMode"in document&&(qo=document.documentMode);var j2=yi&&"TextEvent"in window&&!qo,fv=yi&&(!wh||qo&&8<qo&&11>=qo),mv=" ",pv=!1;function gv(s,r){switch(s){case"keyup":return N2.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var wr=!1;function M2(s,r){switch(s){case"compositionend":return vv(r);case"keypress":return r.which!==32?null:(pv=!0,mv);case"textInput":return s=r.data,s===mv&&pv?null:s;default:return null}}function R2(s,r){if(wr)return s==="compositionend"||!wh&&gv(s,r)?(s=lv(),Cc=gh=Wi=null,wr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return fv&&r.locale!=="ko"?null:r.data;default:return null}}var D2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yv(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!D2[s.type]:r==="textarea"}function bv(s,r,c,f){br?xr?xr.push(f):xr=[f]:br=f,r=vu(r,"onChange"),0<r.length&&(c=new Tc("onChange","change",null,c,f),s.push({event:c,listeners:r}))}var Xo=null,Wo=null;function k2(s){tb(s,0)}function jc(s){var r=Uo(s);if(ev(r))return s}function xv(s,r){if(s==="change")return r}var wv=!1;if(yi){var Sh;if(yi){var Ah="oninput"in document;if(!Ah){var Sv=document.createElement("div");Sv.setAttribute("oninput","return;"),Ah=typeof Sv.oninput=="function"}Sh=Ah}else Sh=!1;wv=Sh&&(!document.documentMode||9<document.documentMode)}function Av(){Xo&&(Xo.detachEvent("onpropertychange",Cv),Wo=Xo=null)}function Cv(s){if(s.propertyName==="value"&&jc(Wo)){var r=[];bv(r,Wo,s,fh(s)),ov(k2,r)}}function O2(s,r,c){s==="focusin"?(Av(),Xo=r,Wo=c,Xo.attachEvent("onpropertychange",Cv)):s==="focusout"&&Av()}function L2(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return jc(Wo)}function P2(s,r){if(s==="click")return jc(r)}function I2(s,r){if(s==="input"||s==="change")return jc(r)}function B2(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var ns=typeof Object.is=="function"?Object.is:B2;function Ko(s,r){if(ns(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var c=Object.keys(s),f=Object.keys(r);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!ut.call(r,v)||!ns(s[v],r[v]))return!1}return!0}function Ev(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function _v(s,r){var c=Ev(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=r&&f>=r)return{node:c,offset:r-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ev(c)}}function Tv(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Tv(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Nv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Sc(s.document);r instanceof s.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)s=r.contentWindow;else break;r=Sc(s.document)}return r}function Ch(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var z2=yi&&"documentMode"in document&&11>=document.documentMode,Sr=null,Eh=null,Qo=null,_h=!1;function jv(s,r,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;_h||Sr==null||Sr!==Sc(f)||(f=Sr,"selectionStart"in f&&Ch(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Qo&&Ko(Qo,f)||(Qo=f,f=vu(Eh,"onSelect"),0<f.length&&(r=new Tc("onSelect","select",null,r,c),s.push({event:r,listeners:f}),r.target=Sr)))}function ka(s,r){var c={};return c[s.toLowerCase()]=r.toLowerCase(),c["Webkit"+s]="webkit"+r,c["Moz"+s]="moz"+r,c}var Ar={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionrun:ka("Transition","TransitionRun"),transitionstart:ka("Transition","TransitionStart"),transitioncancel:ka("Transition","TransitionCancel"),transitionend:ka("Transition","TransitionEnd")},Th={},Mv={};yi&&(Mv=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);function Oa(s){if(Th[s])return Th[s];if(!Ar[s])return s;var r=Ar[s],c;for(c in r)if(r.hasOwnProperty(c)&&c in Mv)return Th[s]=r[c];return s}var Rv=Oa("animationend"),Dv=Oa("animationiteration"),kv=Oa("animationstart"),F2=Oa("transitionrun"),H2=Oa("transitionstart"),U2=Oa("transitioncancel"),Ov=Oa("transitionend"),Lv=new Map,Nh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nh.push("scrollEnd");function Ls(s,r){Lv.set(s,r),Ra(r,[s])}var Mc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ys=[],Cr=0,jh=0;function Rc(){for(var s=Cr,r=jh=Cr=0;r<s;){var c=ys[r];ys[r++]=null;var f=ys[r];ys[r++]=null;var v=ys[r];ys[r++]=null;var b=ys[r];if(ys[r++]=null,f!==null&&v!==null){var _=f.pending;_===null?v.next=v:(v.next=_.next,_.next=v),f.pending=v}b!==0&&Pv(c,v,b)}}function Dc(s,r,c,f){ys[Cr++]=s,ys[Cr++]=r,ys[Cr++]=c,ys[Cr++]=f,jh|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function Mh(s,r,c,f){return Dc(s,r,c,f),kc(s)}function La(s,r){return Dc(s,null,null,r),kc(s)}function Pv(s,r,c){s.lanes|=c;var f=s.alternate;f!==null&&(f.lanes|=c);for(var v=!1,b=s.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(v=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,v&&r!==null&&(v=31-Ee(c),s=b.hiddenUpdates,f=s[v],f===null?s[v]=[r]:f.push(r),r.lane=c|536870912),b):null}function kc(s){if(50<bl)throw bl=0,Ff=null,Error(n(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Er={};function V2(s,r,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(s,r,c,f){return new V2(s,r,c,f)}function Rh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function bi(s,r){var c=s.alternate;return c===null?(c=ss(s.tag,r,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=r,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,r=s.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Iv(s,r){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,r=c.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Oc(s,r,c,f,v,b){var _=0;if(f=s,typeof s=="function")Rh(s)&&(_=1);else if(typeof s=="string")_=X_(s,c,X.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case F:return s=ss(31,c,r,v),s.elementType=F,s.lanes=b,s;case S:return Pa(c.children,v,b,r);case E:_=8,v|=24;break;case C:return s=ss(12,c,r,v|2),s.elementType=C,s.lanes=b,s;case L:return s=ss(13,c,r,v),s.elementType=L,s.lanes=b,s;case I:return s=ss(19,c,r,v),s.elementType=I,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case N:_=10;break e;case T:_=9;break e;case M:_=11;break e;case O:_=14;break e;case P:_=16,f=null;break e}_=29,c=Error(n(130,s===null?"null":typeof s,"")),f=null}return r=ss(_,c,r,v),r.elementType=s,r.type=f,r.lanes=b,r}function Pa(s,r,c,f){return s=ss(7,s,f,r),s.lanes=c,s}function Dh(s,r,c){return s=ss(6,s,null,r),s.lanes=c,s}function Bv(s){var r=ss(18,null,null,0);return r.stateNode=s,r}function kh(s,r,c){return r=ss(4,s.children!==null?s.children:[],s.key,r),r.lanes=c,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var zv=new WeakMap;function bs(s,r){if(typeof s=="object"&&s!==null){var c=zv.get(s);return c!==void 0?c:(r={value:s,source:r,stack:$e(r)},zv.set(s,r),r)}return{value:s,source:r,stack:$e(r)}}var _r=[],Tr=0,Lc=null,Zo=0,xs=[],ws=0,Ki=null,Ws=1,Ks="";function xi(s,r){_r[Tr++]=Zo,_r[Tr++]=Lc,Lc=s,Zo=r}function Fv(s,r,c){xs[ws++]=Ws,xs[ws++]=Ks,xs[ws++]=Ki,Ki=s;var f=Ws;s=Ks;var v=32-Ee(f)-1;f&=~(1<<v),c+=1;var b=32-Ee(r)+v;if(30<b){var _=v-v%5;b=(f&(1<<_)-1).toString(32),f>>=_,v-=_,Ws=1<<32-Ee(r)+v|c<<v|f,Ks=b+s}else Ws=1<<b|c<<v|f,Ks=s}function Oh(s){s.return!==null&&(xi(s,1),Fv(s,1,0))}function Lh(s){for(;s===Lc;)Lc=_r[--Tr],_r[Tr]=null,Zo=_r[--Tr],_r[Tr]=null;for(;s===Ki;)Ki=xs[--ws],xs[ws]=null,Ks=xs[--ws],xs[ws]=null,Ws=xs[--ws],xs[ws]=null}function Hv(s,r){xs[ws++]=Ws,xs[ws++]=Ks,xs[ws++]=Ki,Ws=r.id,Ks=r.overflow,Ki=s}var Cn=null,Nt=null,lt=!1,Qi=null,Ss=!1,Ph=Error(n(519));function Zi(s){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jo(bs(r,s)),Ph}function Uv(s){var r=s.stateNode,c=s.type,f=s.memoizedProps;switch(r[An]=s,r[Vn]=f,c){case"dialog":st("cancel",r),st("close",r);break;case"iframe":case"object":case"embed":st("load",r);break;case"video":case"audio":for(c=0;c<wl.length;c++)st(wl[c],r);break;case"source":st("error",r);break;case"img":case"image":case"link":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"input":st("invalid",r),tv(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":st("invalid",r);break;case"textarea":st("invalid",r),sv(r,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||f.suppressHydrationWarning===!0||ab(r.textContent,c)?(f.popover!=null&&(st("beforetoggle",r),st("toggle",r)),f.onScroll!=null&&st("scroll",r),f.onScrollEnd!=null&&st("scrollend",r),f.onClick!=null&&(r.onclick=vi),r=!0):r=!1,r||Zi(s,!0)}function Vv(s){for(Cn=s.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:Ss=!1;return;case 27:case 3:Ss=!0;return;default:Cn=Cn.return}}function Nr(s){if(s!==Cn)return!1;if(!lt)return Vv(s),lt=!0,!1;var r=s.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||tm(s.type,s.memoizedProps)),c=!c),c&&Nt&&Zi(s),Vv(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Nt=mb(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Nt=mb(s)}else r===27?(r=Nt,ha(s.type)?(s=rm,rm=null,Nt=s):Nt=r):Nt=Cn?Cs(s.stateNode.nextSibling):null;return!0}function Ia(){Nt=Cn=null,lt=!1}function Ih(){var s=Qi;return s!==null&&(Xn===null?Xn=s:Xn.push.apply(Xn,s),Qi=null),s}function Jo(s){Qi===null?Qi=[s]:Qi.push(s)}var Bh=j(null),Ba=null,wi=null;function Ji(s,r,c){B(Bh,r._currentValue),r._currentValue=c}function Si(s){s._currentValue=Bh.current,k(Bh)}function zh(s,r,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),s===c)break;s=s.return}}function Fh(s,r,c,f){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var b=v.dependencies;if(b!==null){var _=v.child;b=b.firstContext;e:for(;b!==null;){var D=b;b=v;for(var V=0;V<r.length;V++)if(D.context===r[V]){b.lanes|=c,D=b.alternate,D!==null&&(D.lanes|=c),zh(b.return,c,s),f||(_=null);break e}b=D.next}}else if(v.tag===18){if(_=v.return,_===null)throw Error(n(341));_.lanes|=c,b=_.alternate,b!==null&&(b.lanes|=c),zh(_,c,s),_=null}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===s){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}}function jr(s,r,c,f){s=null;for(var v=r,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var _=v.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var D=v.type;ns(v.pendingProps.value,_.value)||(s!==null?s.push(D):s=[D])}}else if(v===J.current){if(_=v.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(_l):s=[_l])}v=v.return}s!==null&&Fh(r,s,c,f),r.flags|=262144}function Pc(s){for(s=s.firstContext;s!==null;){if(!ns(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function za(s){Ba=s,wi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function En(s){return $v(Ba,s)}function Ic(s,r){return Ba===null&&za(s),$v(s,r)}function $v(s,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},wi===null){if(s===null)throw Error(n(308));wi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else wi=wi.next=r;return c}var $2=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(c,f){s.push(f)}};this.abort=function(){r.aborted=!0,s.forEach(function(c){return c()})}},G2=a.unstable_scheduleCallback,Y2=a.unstable_NormalPriority,en={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hh(){return{controller:new $2,data:new Map,refCount:0}}function el(s){s.refCount--,s.refCount===0&&G2(Y2,function(){s.controller.abort()})}var tl=null,Uh=0,Mr=0,Rr=null;function q2(s,r){if(tl===null){var c=tl=[];Uh=0,Mr=Yf(),Rr={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Uh++,r.then(Gv,Gv),r}function Gv(){if(--Uh===0&&tl!==null){Rr!==null&&(Rr.status="fulfilled");var s=tl;tl=null,Mr=0,Rr=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function X2(s,r){var c=[],f={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return s.then(function(){f.status="fulfilled",f.value=r;for(var v=0;v<c.length;v++)(0,c[v])(r)},function(v){for(f.status="rejected",f.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),f}var Yv=R.S;R.S=function(s,r){j0=Mt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&q2(s,r),Yv!==null&&Yv(s,r)};var Fa=j(null);function Vh(){var s=Fa.current;return s!==null?s:Ct.pooledCache}function Bc(s,r){r===null?B(Fa,Fa.current):B(Fa,r.pool)}function qv(){var s=Vh();return s===null?null:{parent:en._currentValue,pool:s}}var Dr=Error(n(460)),$h=Error(n(474)),zc=Error(n(542)),Fc={then:function(){}};function Xv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Wv(s,r,c){switch(c=s[c],c===void 0?s.push(r):c!==r&&(r.then(vi,vi),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Qv(s),s;default:if(typeof r.status=="string")r.then(vi,vi);else{if(s=Ct,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=r,s.status="pending",s.then(function(f){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=f}},function(f){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Qv(s),s}throw Ua=r,Dr}}function Ha(s){try{var r=s._init;return r(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ua=c,Dr):c}}var Ua=null;function Kv(){if(Ua===null)throw Error(n(459));var s=Ua;return Ua=null,s}function Qv(s){if(s===Dr||s===zc)throw Error(n(483))}var kr=null,nl=0;function Hc(s){var r=nl;return nl+=1,kr===null&&(kr=[]),Wv(kr,s,r)}function sl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Uc(s,r){throw r.$$typeof===y?Error(n(525)):(s=Object.prototype.toString.call(r),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Zv(s){function r(Q,q){if(s){var ee=Q.deletions;ee===null?(Q.deletions=[q],Q.flags|=16):ee.push(q)}}function c(Q,q){if(!s)return null;for(;q!==null;)r(Q,q),q=q.sibling;return null}function f(Q){for(var q=new Map;Q!==null;)Q.key!==null?q.set(Q.key,Q):q.set(Q.index,Q),Q=Q.sibling;return q}function v(Q,q){return Q=bi(Q,q),Q.index=0,Q.sibling=null,Q}function b(Q,q,ee){return Q.index=ee,s?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<q?(Q.flags|=67108866,q):ee):(Q.flags|=67108866,q)):(Q.flags|=1048576,q)}function _(Q){return s&&Q.alternate===null&&(Q.flags|=67108866),Q}function D(Q,q,ee,de){return q===null||q.tag!==6?(q=Dh(ee,Q.mode,de),q.return=Q,q):(q=v(q,ee),q.return=Q,q)}function V(Q,q,ee,de){var De=ee.type;return De===S?ue(Q,q,ee.props.children,de,ee.key):q!==null&&(q.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===P&&Ha(De)===q.type)?(q=v(q,ee.props),sl(q,ee),q.return=Q,q):(q=Oc(ee.type,ee.key,ee.props,null,Q.mode,de),sl(q,ee),q.return=Q,q)}function te(Q,q,ee,de){return q===null||q.tag!==4||q.stateNode.containerInfo!==ee.containerInfo||q.stateNode.implementation!==ee.implementation?(q=kh(ee,Q.mode,de),q.return=Q,q):(q=v(q,ee.children||[]),q.return=Q,q)}function ue(Q,q,ee,de,De){return q===null||q.tag!==7?(q=Pa(ee,Q.mode,de,De),q.return=Q,q):(q=v(q,ee),q.return=Q,q)}function me(Q,q,ee){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Dh(""+q,Q.mode,ee),q.return=Q,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return ee=Oc(q.type,q.key,q.props,null,Q.mode,ee),sl(ee,q),ee.return=Q,ee;case A:return q=kh(q,Q.mode,ee),q.return=Q,q;case P:return q=Ha(q),me(Q,q,ee)}if(fe(q)||ie(q))return q=Pa(q,Q.mode,ee,null),q.return=Q,q;if(typeof q.then=="function")return me(Q,Hc(q),ee);if(q.$$typeof===N)return me(Q,Ic(Q,q),ee);Uc(Q,q)}return null}function ne(Q,q,ee,de){var De=q!==null?q.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return De!==null?null:D(Q,q,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return ee.key===De?V(Q,q,ee,de):null;case A:return ee.key===De?te(Q,q,ee,de):null;case P:return ee=Ha(ee),ne(Q,q,ee,de)}if(fe(ee)||ie(ee))return De!==null?null:ue(Q,q,ee,de,null);if(typeof ee.then=="function")return ne(Q,q,Hc(ee),de);if(ee.$$typeof===N)return ne(Q,q,Ic(Q,ee),de);Uc(Q,ee)}return null}function ae(Q,q,ee,de,De){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Q=Q.get(ee)||null,D(q,Q,""+de,De);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case w:return Q=Q.get(de.key===null?ee:de.key)||null,V(q,Q,de,De);case A:return Q=Q.get(de.key===null?ee:de.key)||null,te(q,Q,de,De);case P:return de=Ha(de),ae(Q,q,ee,de,De)}if(fe(de)||ie(de))return Q=Q.get(ee)||null,ue(q,Q,de,De,null);if(typeof de.then=="function")return ae(Q,q,ee,Hc(de),De);if(de.$$typeof===N)return ae(Q,q,ee,Ic(q,de),De);Uc(q,de)}return null}function Ne(Q,q,ee,de){for(var De=null,dt=null,Re=q,Qe=q=0,at=null;Re!==null&&Qe<ee.length;Qe++){Re.index>Qe?(at=Re,Re=null):at=Re.sibling;var ht=ne(Q,Re,ee[Qe],de);if(ht===null){Re===null&&(Re=at);break}s&&Re&&ht.alternate===null&&r(Q,Re),q=b(ht,q,Qe),dt===null?De=ht:dt.sibling=ht,dt=ht,Re=at}if(Qe===ee.length)return c(Q,Re),lt&&xi(Q,Qe),De;if(Re===null){for(;Qe<ee.length;Qe++)Re=me(Q,ee[Qe],de),Re!==null&&(q=b(Re,q,Qe),dt===null?De=Re:dt.sibling=Re,dt=Re);return lt&&xi(Q,Qe),De}for(Re=f(Re);Qe<ee.length;Qe++)at=ae(Re,Q,Qe,ee[Qe],de),at!==null&&(s&&at.alternate!==null&&Re.delete(at.key===null?Qe:at.key),q=b(at,q,Qe),dt===null?De=at:dt.sibling=at,dt=at);return s&&Re.forEach(function(va){return r(Q,va)}),lt&&xi(Q,Qe),De}function Be(Q,q,ee,de){if(ee==null)throw Error(n(151));for(var De=null,dt=null,Re=q,Qe=q=0,at=null,ht=ee.next();Re!==null&&!ht.done;Qe++,ht=ee.next()){Re.index>Qe?(at=Re,Re=null):at=Re.sibling;var va=ne(Q,Re,ht.value,de);if(va===null){Re===null&&(Re=at);break}s&&Re&&va.alternate===null&&r(Q,Re),q=b(va,q,Qe),dt===null?De=va:dt.sibling=va,dt=va,Re=at}if(ht.done)return c(Q,Re),lt&&xi(Q,Qe),De;if(Re===null){for(;!ht.done;Qe++,ht=ee.next())ht=me(Q,ht.value,de),ht!==null&&(q=b(ht,q,Qe),dt===null?De=ht:dt.sibling=ht,dt=ht);return lt&&xi(Q,Qe),De}for(Re=f(Re);!ht.done;Qe++,ht=ee.next())ht=ae(Re,Q,Qe,ht.value,de),ht!==null&&(s&&ht.alternate!==null&&Re.delete(ht.key===null?Qe:ht.key),q=b(ht,q,Qe),dt===null?De=ht:dt.sibling=ht,dt=ht);return s&&Re.forEach(function(aT){return r(Q,aT)}),lt&&xi(Q,Qe),De}function wt(Q,q,ee,de){if(typeof ee=="object"&&ee!==null&&ee.type===S&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:e:{for(var De=ee.key;q!==null;){if(q.key===De){if(De=ee.type,De===S){if(q.tag===7){c(Q,q.sibling),de=v(q,ee.props.children),de.return=Q,Q=de;break e}}else if(q.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===P&&Ha(De)===q.type){c(Q,q.sibling),de=v(q,ee.props),sl(de,ee),de.return=Q,Q=de;break e}c(Q,q);break}else r(Q,q);q=q.sibling}ee.type===S?(de=Pa(ee.props.children,Q.mode,de,ee.key),de.return=Q,Q=de):(de=Oc(ee.type,ee.key,ee.props,null,Q.mode,de),sl(de,ee),de.return=Q,Q=de)}return _(Q);case A:e:{for(De=ee.key;q!==null;){if(q.key===De)if(q.tag===4&&q.stateNode.containerInfo===ee.containerInfo&&q.stateNode.implementation===ee.implementation){c(Q,q.sibling),de=v(q,ee.children||[]),de.return=Q,Q=de;break e}else{c(Q,q);break}else r(Q,q);q=q.sibling}de=kh(ee,Q.mode,de),de.return=Q,Q=de}return _(Q);case P:return ee=Ha(ee),wt(Q,q,ee,de)}if(fe(ee))return Ne(Q,q,ee,de);if(ie(ee)){if(De=ie(ee),typeof De!="function")throw Error(n(150));return ee=De.call(ee),Be(Q,q,ee,de)}if(typeof ee.then=="function")return wt(Q,q,Hc(ee),de);if(ee.$$typeof===N)return wt(Q,q,Ic(Q,ee),de);Uc(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,q!==null&&q.tag===6?(c(Q,q.sibling),de=v(q,ee),de.return=Q,Q=de):(c(Q,q),de=Dh(ee,Q.mode,de),de.return=Q,Q=de),_(Q)):c(Q,q)}return function(Q,q,ee,de){try{nl=0;var De=wt(Q,q,ee,de);return kr=null,De}catch(Re){if(Re===Dr||Re===zc)throw Re;var dt=ss(29,Re,null,Q.mode);return dt.lanes=de,dt.return=Q,dt}}}var Va=Zv(!0),Jv=Zv(!1),ea=!1;function Gh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ta(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function na(s,r,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(mt&2)!==0){var v=f.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),f.pending=r,r=kc(s),Pv(s,null,c),r}return Dc(s,f,r,c),kc(s)}function il(s,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var f=r.lanes;f&=s.pendingLanes,c|=f,r.lanes=c,dn(s,c)}}function qh(s,r){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var _={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?v=b=_:b=b.next=_,c=c.next}while(c!==null);b===null?v=b=r:b=b.next=r}else v=b=r;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=r:s.next=r,c.lastBaseUpdate=r}var Xh=!1;function al(){if(Xh){var s=Rr;if(s!==null)throw s}}function rl(s,r,c,f){Xh=!1;var v=s.updateQueue;ea=!1;var b=v.firstBaseUpdate,_=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var V=D,te=V.next;V.next=null,_===null?b=te:_.next=te,_=V;var ue=s.alternate;ue!==null&&(ue=ue.updateQueue,D=ue.lastBaseUpdate,D!==_&&(D===null?ue.firstBaseUpdate=te:D.next=te,ue.lastBaseUpdate=V))}if(b!==null){var me=v.baseState;_=0,ue=te=V=null,D=b;do{var ne=D.lane&-536870913,ae=ne!==D.lane;if(ae?(it&ne)===ne:(f&ne)===ne){ne!==0&&ne===Mr&&(Xh=!0),ue!==null&&(ue=ue.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ne=s,Be=D;ne=r;var wt=c;switch(Be.tag){case 1:if(Ne=Be.payload,typeof Ne=="function"){me=Ne.call(wt,me,ne);break e}me=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Be.payload,ne=typeof Ne=="function"?Ne.call(wt,me,ne):Ne,ne==null)break e;me=g({},me,ne);break e;case 2:ea=!0}}ne=D.callback,ne!==null&&(s.flags|=64,ae&&(s.flags|=8192),ae=v.callbacks,ae===null?v.callbacks=[ne]:ae.push(ne))}else ae={lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ue===null?(te=ue=ae,V=me):ue=ue.next=ae,_|=ne;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;ae=D,D=ae.next,ae.next=null,v.lastBaseUpdate=ae,v.shared.pending=null}}while(!0);ue===null&&(V=me),v.baseState=V,v.firstBaseUpdate=te,v.lastBaseUpdate=ue,b===null&&(v.shared.lanes=0),oa|=_,s.lanes=_,s.memoizedState=me}}function ey(s,r){if(typeof s!="function")throw Error(n(191,s));s.call(r)}function ty(s,r){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)ey(c[s],r)}var Or=j(null),Vc=j(0);function ny(s,r){s=Ri,B(Vc,s),B(Or,r),Ri=s|r.baseLanes}function Wh(){B(Vc,Ri),B(Or,Or.current)}function Kh(){Ri=Vc.current,k(Or),k(Vc)}var is=j(null),As=null;function sa(s){var r=s.alternate;B(Gt,Gt.current&1),B(is,s),As===null&&(r===null||Or.current!==null||r.memoizedState!==null)&&(As=s)}function Qh(s){B(Gt,Gt.current),B(is,s),As===null&&(As=s)}function sy(s){s.tag===22?(B(Gt,Gt.current),B(is,s),As===null&&(As=s)):ia()}function ia(){B(Gt,Gt.current),B(is,is.current)}function as(s){k(is),As===s&&(As=null),k(Gt)}var Gt=j(0);function $c(s){for(var r=s;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||im(c)||am(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ai=0,Ke=null,bt=null,tn=null,Gc=!1,Lr=!1,$a=!1,Yc=0,ol=0,Pr=null,W2=0;function Ft(){throw Error(n(321))}function Zh(s,r){if(r===null)return!1;for(var c=0;c<r.length&&c<s.length;c++)if(!ns(s[c],r[c]))return!1;return!0}function Jh(s,r,c,f,v,b){return Ai=b,Ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,R.H=s===null||s.memoizedState===null?Fy:pf,$a=!1,b=c(f,v),$a=!1,Lr&&(b=ay(r,c,f,v)),iy(s),b}function iy(s){R.H=ul;var r=bt!==null&&bt.next!==null;if(Ai=0,tn=bt=Ke=null,Gc=!1,ol=0,Pr=null,r)throw Error(n(300));s===null||nn||(s=s.dependencies,s!==null&&Pc(s)&&(nn=!0))}function ay(s,r,c,f){Ke=s;var v=0;do{if(Lr&&(Pr=null),ol=0,Lr=!1,25<=v)throw Error(n(301));if(v+=1,tn=bt=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}R.H=Hy,b=r(c,f)}while(Lr);return b}function K2(){var s=R.H,r=s.useState()[0];return r=typeof r.then=="function"?ll(r):r,s=s.useState()[0],(bt!==null?bt.memoizedState:null)!==s&&(Ke.flags|=1024),r}function ef(){var s=Yc!==0;return Yc=0,s}function tf(s,r,c){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~c}function nf(s){if(Gc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Gc=!1}Ai=0,tn=bt=Ke=null,Lr=!1,ol=Yc=0,Pr=null}function In(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Ke.memoizedState=tn=s:tn=tn.next=s,tn}function Yt(){if(bt===null){var s=Ke.alternate;s=s!==null?s.memoizedState:null}else s=bt.next;var r=tn===null?Ke.memoizedState:tn.next;if(r!==null)tn=r,bt=s;else{if(s===null)throw Ke.alternate===null?Error(n(467)):Error(n(310));bt=s,s={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},tn===null?Ke.memoizedState=tn=s:tn=tn.next=s}return tn}function qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(s){var r=ol;return ol+=1,Pr===null&&(Pr=[]),s=Wv(Pr,s,r),r=Ke,(tn===null?r.memoizedState:tn.next)===null&&(r=r.alternate,R.H=r===null||r.memoizedState===null?Fy:pf),s}function Xc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ll(s);if(s.$$typeof===N)return En(s)}throw Error(n(438,String(s)))}function sf(s){var r=null,c=Ke.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var f=Ke.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=qc(),Ke.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(s),f=0;f<s;f++)c[f]=$;return r.index++,c}function Ci(s,r){return typeof r=="function"?r(s):r}function Wc(s){var r=Yt();return af(r,bt,s)}function af(s,r,c){var f=s.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=c;var v=s.baseQueue,b=f.pending;if(b!==null){if(v!==null){var _=v.next;v.next=b.next,b.next=_}r.baseQueue=v=b,f.pending=null}if(b=s.baseState,v===null)s.memoizedState=b;else{r=v.next;var D=_=null,V=null,te=r,ue=!1;do{var me=te.lane&-536870913;if(me!==te.lane?(it&me)===me:(Ai&me)===me){var ne=te.revertLane;if(ne===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),me===Mr&&(ue=!0);else if((Ai&ne)===ne){te=te.next,ne===Mr&&(ue=!0);continue}else me={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},V===null?(D=V=me,_=b):V=V.next=me,Ke.lanes|=ne,oa|=ne;me=te.action,$a&&c(b,me),b=te.hasEagerState?te.eagerState:c(b,me)}else ne={lane:me,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},V===null?(D=V=ne,_=b):V=V.next=ne,Ke.lanes|=me,oa|=me;te=te.next}while(te!==null&&te!==r);if(V===null?_=b:V.next=D,!ns(b,s.memoizedState)&&(nn=!0,ue&&(c=Rr,c!==null)))throw c;s.memoizedState=b,s.baseState=_,s.baseQueue=V,f.lastRenderedState=b}return v===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function rf(s){var r=Yt(),c=r.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var f=c.dispatch,v=c.pending,b=r.memoizedState;if(v!==null){c.pending=null;var _=v=v.next;do b=s(b,_.action),_=_.next;while(_!==v);ns(b,r.memoizedState)||(nn=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),c.lastRenderedState=b}return[b,f]}function ry(s,r,c){var f=Ke,v=Yt(),b=lt;if(b){if(c===void 0)throw Error(n(407));c=c()}else c=r();var _=!ns((bt||v).memoizedState,c);if(_&&(v.memoizedState=c,nn=!0),v=v.queue,cf(cy.bind(null,f,v,s),[s]),v.getSnapshot!==r||_||tn!==null&&tn.memoizedState.tag&1){if(f.flags|=2048,Ir(9,{destroy:void 0},ly.bind(null,f,v,c,r),null),Ct===null)throw Error(n(349));b||(Ai&127)!==0||oy(f,r,c)}return c}function oy(s,r,c){s.flags|=16384,s={getSnapshot:r,value:c},r=Ke.updateQueue,r===null?(r=qc(),Ke.updateQueue=r,r.stores=[s]):(c=r.stores,c===null?r.stores=[s]:c.push(s))}function ly(s,r,c,f){r.value=c,r.getSnapshot=f,uy(r)&&dy(s)}function cy(s,r,c){return c(function(){uy(r)&&dy(s)})}function uy(s){var r=s.getSnapshot;s=s.value;try{var c=r();return!ns(s,c)}catch{return!0}}function dy(s){var r=La(s,2);r!==null&&Wn(r,s,2)}function of(s){var r=In();if(typeof s=="function"){var c=s;if(s=c(),$a){ye(!0);try{c()}finally{ye(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:s},r}function hy(s,r,c,f){return s.baseState=c,af(s,bt,typeof f=="function"?f:Ci)}function Q2(s,r,c,f,v){if(Zc(s))throw Error(n(485));if(s=r.action,s!==null){var b={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){b.listeners.push(_)}};R.T!==null?c(!0):b.isTransition=!1,f(b),c=r.pending,c===null?(b.next=r.pending=b,fy(r,b)):(b.next=c.next,r.pending=c.next=b)}}function fy(s,r){var c=r.action,f=r.payload,v=s.state;if(r.isTransition){var b=R.T,_={};R.T=_;try{var D=c(v,f),V=R.S;V!==null&&V(_,D),my(s,r,D)}catch(te){lf(s,r,te)}finally{b!==null&&_.types!==null&&(b.types=_.types),R.T=b}}else try{b=c(v,f),my(s,r,b)}catch(te){lf(s,r,te)}}function my(s,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){py(s,r,f)},function(f){return lf(s,r,f)}):py(s,r,c)}function py(s,r,c){r.status="fulfilled",r.value=c,gy(r),s.state=c,r=s.pending,r!==null&&(c=r.next,c===r?s.pending=null:(c=c.next,r.next=c,fy(s,c)))}function lf(s,r,c){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=c,gy(r),r=r.next;while(r!==f)}s.action=null}function gy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function vy(s,r){return r}function yy(s,r){if(lt){var c=Ct.formState;if(c!==null){e:{var f=Ke;if(lt){if(Nt){t:{for(var v=Nt,b=Ss;v.nodeType!==8;){if(!b){v=null;break t}if(v=Cs(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){Nt=Cs(v.nextSibling),f=v.data==="F!";break e}}Zi(f)}f=!1}f&&(r=c[0])}}return c=In(),c.memoizedState=c.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:r},c.queue=f,c=Iy.bind(null,Ke,f),f.dispatch=c,f=of(!1),b=mf.bind(null,Ke,!1,f.queue),f=In(),v={state:r,dispatch:null,action:s,pending:null},f.queue=v,c=Q2.bind(null,Ke,v,b,c),v.dispatch=c,f.memoizedState=s,[r,c,!1]}function by(s){var r=Yt();return xy(r,bt,s)}function xy(s,r,c){if(r=af(s,r,vy)[0],s=Wc(Ci)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=ll(r)}catch(_){throw _===Dr?zc:_}else f=r;r=Yt();var v=r.queue,b=v.dispatch;return c!==r.memoizedState&&(Ke.flags|=2048,Ir(9,{destroy:void 0},Z2.bind(null,v,c),null)),[f,b,s]}function Z2(s,r){s.action=r}function wy(s){var r=Yt(),c=bt;if(c!==null)return xy(r,c,s);Yt(),r=r.memoizedState,c=Yt();var f=c.queue.dispatch;return c.memoizedState=s,[r,f,!1]}function Ir(s,r,c,f){return s={tag:s,create:c,deps:f,inst:r,next:null},r=Ke.updateQueue,r===null&&(r=qc(),Ke.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,r.lastEffect=s),s}function Sy(){return Yt().memoizedState}function Kc(s,r,c,f){var v=In();Ke.flags|=s,v.memoizedState=Ir(1|r,{destroy:void 0},c,f===void 0?null:f)}function Qc(s,r,c,f){var v=Yt();f=f===void 0?null:f;var b=v.memoizedState.inst;bt!==null&&f!==null&&Zh(f,bt.memoizedState.deps)?v.memoizedState=Ir(r,b,c,f):(Ke.flags|=s,v.memoizedState=Ir(1|r,b,c,f))}function Ay(s,r){Kc(8390656,8,s,r)}function cf(s,r){Qc(2048,8,s,r)}function J2(s){Ke.flags|=4;var r=Ke.updateQueue;if(r===null)r=qc(),Ke.updateQueue=r,r.events=[s];else{var c=r.events;c===null?r.events=[s]:c.push(s)}}function Cy(s){var r=Yt().memoizedState;return J2({ref:r,nextImpl:s}),function(){if((mt&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function Ey(s,r){return Qc(4,2,s,r)}function _y(s,r){return Qc(4,4,s,r)}function Ty(s,r){if(typeof r=="function"){s=s();var c=r(s);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Ny(s,r,c){c=c!=null?c.concat([s]):null,Qc(4,4,Ty.bind(null,r,s),c)}function uf(){}function jy(s,r){var c=Yt();r=r===void 0?null:r;var f=c.memoizedState;return r!==null&&Zh(r,f[1])?f[0]:(c.memoizedState=[s,r],s)}function My(s,r){var c=Yt();r=r===void 0?null:r;var f=c.memoizedState;if(r!==null&&Zh(r,f[1]))return f[0];if(f=s(),$a){ye(!0);try{s()}finally{ye(!1)}}return c.memoizedState=[f,r],f}function df(s,r,c){return c===void 0||(Ai&1073741824)!==0&&(it&261930)===0?s.memoizedState=r:(s.memoizedState=c,s=R0(),Ke.lanes|=s,oa|=s,c)}function Ry(s,r,c,f){return ns(c,r)?c:Or.current!==null?(s=df(s,c,f),ns(s,r)||(nn=!0),s):(Ai&42)===0||(Ai&1073741824)!==0&&(it&261930)===0?(nn=!0,s.memoizedState=c):(s=R0(),Ke.lanes|=s,oa|=s,r)}function Dy(s,r,c,f,v){var b=U.p;U.p=b!==0&&8>b?b:8;var _=R.T,D={};R.T=D,mf(s,!1,r,c);try{var V=v(),te=R.S;if(te!==null&&te(D,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ue=X2(V,f);cl(s,r,ue,ls(s))}else cl(s,r,f,ls(s))}catch(me){cl(s,r,{then:function(){},status:"rejected",reason:me},ls())}finally{U.p=b,_!==null&&D.types!==null&&(_.types=D.types),R.T=_}}function e_(){}function hf(s,r,c,f){if(s.tag!==5)throw Error(n(476));var v=ky(s).queue;Dy(s,v,r,H,c===null?e_:function(){return Oy(s),c(f)})}function ky(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:H},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:c},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Oy(s){var r=ky(s);r.next===null&&(r=s.alternate.memoizedState),cl(s,r.next.queue,{},ls())}function ff(){return En(_l)}function Ly(){return Yt().memoizedState}function Py(){return Yt().memoizedState}function t_(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var c=ls();s=ta(c);var f=na(r,s,c);f!==null&&(Wn(f,r,c),il(f,r,c)),r={cache:Hh()},s.payload=r;return}r=r.return}}function n_(s,r,c){var f=ls();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Zc(s)?By(r,c):(c=Mh(s,r,c,f),c!==null&&(Wn(c,s,f),zy(c,r,f)))}function Iy(s,r,c){var f=ls();cl(s,r,c,f)}function cl(s,r,c,f){var v={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Zc(s))By(r,v);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var _=r.lastRenderedState,D=b(_,c);if(v.hasEagerState=!0,v.eagerState=D,ns(D,_))return Dc(s,r,v,0),Ct===null&&Rc(),!1}catch{}if(c=Mh(s,r,v,f),c!==null)return Wn(c,s,f),zy(c,r,f),!0}return!1}function mf(s,r,c,f){if(f={lane:2,revertLane:Yf(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Zc(s)){if(r)throw Error(n(479))}else r=Mh(s,c,f,2),r!==null&&Wn(r,s,2)}function Zc(s){var r=s.alternate;return s===Ke||r!==null&&r===Ke}function By(s,r){Lr=Gc=!0;var c=s.pending;c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r}function zy(s,r,c){if((c&4194048)!==0){var f=r.lanes;f&=s.pendingLanes,c|=f,r.lanes=c,dn(s,c)}}var ul={readContext:En,use:Xc,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};ul.useEffectEvent=Ft;var Fy={readContext:En,use:Xc,useCallback:function(s,r){return In().memoizedState=[s,r===void 0?null:r],s},useContext:En,useEffect:Ay,useImperativeHandle:function(s,r,c){c=c!=null?c.concat([s]):null,Kc(4194308,4,Ty.bind(null,r,s),c)},useLayoutEffect:function(s,r){return Kc(4194308,4,s,r)},useInsertionEffect:function(s,r){Kc(4,2,s,r)},useMemo:function(s,r){var c=In();r=r===void 0?null:r;var f=s();if($a){ye(!0);try{s()}finally{ye(!1)}}return c.memoizedState=[f,r],f},useReducer:function(s,r,c){var f=In();if(c!==void 0){var v=c(r);if($a){ye(!0);try{c(r)}finally{ye(!1)}}}else v=r;return f.memoizedState=f.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},f.queue=s,s=s.dispatch=n_.bind(null,Ke,s),[f.memoizedState,s]},useRef:function(s){var r=In();return s={current:s},r.memoizedState=s},useState:function(s){s=of(s);var r=s.queue,c=Iy.bind(null,Ke,r);return r.dispatch=c,[s.memoizedState,c]},useDebugValue:uf,useDeferredValue:function(s,r){var c=In();return df(c,s,r)},useTransition:function(){var s=of(!1);return s=Dy.bind(null,Ke,s.queue,!0,!1),In().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,c){var f=Ke,v=In();if(lt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=r(),Ct===null)throw Error(n(349));(it&127)!==0||oy(f,r,c)}v.memoizedState=c;var b={value:c,getSnapshot:r};return v.queue=b,Ay(cy.bind(null,f,b,s),[s]),f.flags|=2048,Ir(9,{destroy:void 0},ly.bind(null,f,b,c,r),null),c},useId:function(){var s=In(),r=Ct.identifierPrefix;if(lt){var c=Ks,f=Ws;c=(f&~(1<<32-Ee(f)-1)).toString(32)+c,r="_"+r+"R_"+c,c=Yc++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=W2++,r="_"+r+"r_"+c.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:ff,useFormState:yy,useActionState:yy,useOptimistic:function(s){var r=In();r.memoizedState=r.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=mf.bind(null,Ke,!0,c),c.dispatch=r,[s,r]},useMemoCache:sf,useCacheRefresh:function(){return In().memoizedState=t_.bind(null,Ke)},useEffectEvent:function(s){var r=In(),c={impl:s};return r.memoizedState=c,function(){if((mt&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},pf={readContext:En,use:Xc,useCallback:jy,useContext:En,useEffect:cf,useImperativeHandle:Ny,useInsertionEffect:Ey,useLayoutEffect:_y,useMemo:My,useReducer:Wc,useRef:Sy,useState:function(){return Wc(Ci)},useDebugValue:uf,useDeferredValue:function(s,r){var c=Yt();return Ry(c,bt.memoizedState,s,r)},useTransition:function(){var s=Wc(Ci)[0],r=Yt().memoizedState;return[typeof s=="boolean"?s:ll(s),r]},useSyncExternalStore:ry,useId:Ly,useHostTransitionStatus:ff,useFormState:by,useActionState:by,useOptimistic:function(s,r){var c=Yt();return hy(c,bt,s,r)},useMemoCache:sf,useCacheRefresh:Py};pf.useEffectEvent=Cy;var Hy={readContext:En,use:Xc,useCallback:jy,useContext:En,useEffect:cf,useImperativeHandle:Ny,useInsertionEffect:Ey,useLayoutEffect:_y,useMemo:My,useReducer:rf,useRef:Sy,useState:function(){return rf(Ci)},useDebugValue:uf,useDeferredValue:function(s,r){var c=Yt();return bt===null?df(c,s,r):Ry(c,bt.memoizedState,s,r)},useTransition:function(){var s=rf(Ci)[0],r=Yt().memoizedState;return[typeof s=="boolean"?s:ll(s),r]},useSyncExternalStore:ry,useId:Ly,useHostTransitionStatus:ff,useFormState:wy,useActionState:wy,useOptimistic:function(s,r){var c=Yt();return bt!==null?hy(c,bt,s,r):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:sf,useCacheRefresh:Py};Hy.useEffectEvent=Cy;function gf(s,r,c,f){r=s.memoizedState,c=c(f,r),c=c==null?r:g({},r,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var vf={enqueueSetState:function(s,r,c){s=s._reactInternals;var f=ls(),v=ta(f);v.payload=r,c!=null&&(v.callback=c),r=na(s,v,f),r!==null&&(Wn(r,s,f),il(r,s,f))},enqueueReplaceState:function(s,r,c){s=s._reactInternals;var f=ls(),v=ta(f);v.tag=1,v.payload=r,c!=null&&(v.callback=c),r=na(s,v,f),r!==null&&(Wn(r,s,f),il(r,s,f))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var c=ls(),f=ta(c);f.tag=2,r!=null&&(f.callback=r),r=na(s,f,c),r!==null&&(Wn(r,s,c),il(r,s,c))}};function Uy(s,r,c,f,v,b,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,b,_):r.prototype&&r.prototype.isPureReactComponent?!Ko(c,f)||!Ko(v,b):!0}function Vy(s,r,c,f){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,f),r.state!==s&&vf.enqueueReplaceState(r,r.state,null)}function Ga(s,r){var c=r;if("ref"in r){c={};for(var f in r)f!=="ref"&&(c[f]=r[f])}if(s=s.defaultProps){c===r&&(c=g({},c));for(var v in s)c[v]===void 0&&(c[v]=s[v])}return c}function $y(s){Mc(s)}function Gy(s){console.error(s)}function Yy(s){Mc(s)}function Jc(s,r){try{var c=s.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function qy(s,r,c){try{var f=s.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function yf(s,r,c){return c=ta(c),c.tag=3,c.payload={element:null},c.callback=function(){Jc(s,r)},c}function Xy(s){return s=ta(s),s.tag=3,s}function Wy(s,r,c,f){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var b=f.value;s.payload=function(){return v(b)},s.callback=function(){qy(r,c,f)}}var _=c.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){qy(r,c,f),typeof v!="function"&&(la===null?la=new Set([this]):la.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function s_(s,r,c,f,v){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=c.alternate,r!==null&&jr(r,c,v,!0),c=is.current,c!==null){switch(c.tag){case 31:case 13:return As===null?du():c.alternate===null&&Ht===0&&(Ht=3),c.flags&=-257,c.flags|=65536,c.lanes=v,f===Fc?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([f]):r.add(f),Vf(s,f,v)),!1;case 22:return c.flags|=65536,f===Fc?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([f]):c.add(f)),Vf(s,f,v)),!1}throw Error(n(435,c.tag))}return Vf(s,f,v),du(),!1}if(lt)return r=is.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,f!==Ph&&(s=Error(n(422),{cause:f}),Jo(bs(s,c)))):(f!==Ph&&(r=Error(n(423),{cause:f}),Jo(bs(r,c))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,f=bs(f,c),v=yf(s.stateNode,f,v),qh(s,v),Ht!==4&&(Ht=2)),!1;var b=Error(n(520),{cause:f});if(b=bs(b,c),yl===null?yl=[b]:yl.push(b),Ht!==4&&(Ht=2),r===null)return!0;f=bs(f,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,s=v&-v,c.lanes|=s,s=yf(c.stateNode,f,s),qh(c,s),!1;case 1:if(r=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(la===null||!la.has(b))))return c.flags|=65536,v&=-v,c.lanes|=v,v=Xy(v),Wy(v,s,c,f),qh(c,v),!1}c=c.return}while(c!==null);return!1}var bf=Error(n(461)),nn=!1;function _n(s,r,c,f){r.child=s===null?Jv(r,null,c,f):Va(r,s.child,c,f)}function Ky(s,r,c,f,v){c=c.render;var b=r.ref;if("ref"in f){var _={};for(var D in f)D!=="ref"&&(_[D]=f[D])}else _=f;return za(r),f=Jh(s,r,c,_,b,v),D=ef(),s!==null&&!nn?(tf(s,r,v),Ei(s,r,v)):(lt&&D&&Oh(r),r.flags|=1,_n(s,r,f,v),r.child)}function Qy(s,r,c,f,v){if(s===null){var b=c.type;return typeof b=="function"&&!Rh(b)&&b.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=b,Zy(s,r,b,f,v)):(s=Oc(c.type,null,f,r,r.mode,v),s.ref=r.ref,s.return=r,r.child=s)}if(b=s.child,!Tf(s,v)){var _=b.memoizedProps;if(c=c.compare,c=c!==null?c:Ko,c(_,f)&&s.ref===r.ref)return Ei(s,r,v)}return r.flags|=1,s=bi(b,f),s.ref=r.ref,s.return=r,r.child=s}function Zy(s,r,c,f,v){if(s!==null){var b=s.memoizedProps;if(Ko(b,f)&&s.ref===r.ref)if(nn=!1,r.pendingProps=f=b,Tf(s,v))(s.flags&131072)!==0&&(nn=!0);else return r.lanes=s.lanes,Ei(s,r,v)}return xf(s,r,c,f,v)}function Jy(s,r,c,f){var v=f.children,b=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,s!==null){for(f=r.child=s.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~b}else f=0,r.child=null;return e0(s,r,b,c,f)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Bc(r,b!==null?b.cachePool:null),b!==null?ny(r,b):Wh(),sy(r);else return f=r.lanes=536870912,e0(s,r,b!==null?b.baseLanes|c:c,c,f)}else b!==null?(Bc(r,b.cachePool),ny(r,b),ia(),r.memoizedState=null):(s!==null&&Bc(r,null),Wh(),ia());return _n(s,r,v,c),r.child}function dl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function e0(s,r,c,f,v){var b=Vh();return b=b===null?null:{parent:en._currentValue,pool:b},r.memoizedState={baseLanes:c,cachePool:b},s!==null&&Bc(r,null),Wh(),sy(r),s!==null&&jr(s,r,f,!0),r.childLanes=v,null}function eu(s,r){return r=nu({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function t0(s,r,c){return Va(r,s.child,null,c),s=eu(r,r.pendingProps),s.flags|=2,as(r),r.memoizedState=null,s}function i_(s,r,c){var f=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(lt){if(f.mode==="hidden")return s=eu(r,f),r.lanes=536870912,dl(null,s);if(Qh(r),(s=Nt)?(s=fb(s,Ss),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Ki!==null?{id:Ws,overflow:Ks}:null,retryLane:536870912,hydrationErrors:null},c=Bv(s),c.return=r,r.child=c,Cn=r,Nt=null)):s=null,s===null)throw Zi(r);return r.lanes=536870912,null}return eu(r,f)}var b=s.memoizedState;if(b!==null){var _=b.dehydrated;if(Qh(r),v)if(r.flags&256)r.flags&=-257,r=t0(s,r,c);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(n(558));else if(nn||jr(s,r,c,!1),v=(c&s.childLanes)!==0,nn||v){if(f=Ct,f!==null&&(_=$t(f,c),_!==0&&_!==b.retryLane))throw b.retryLane=_,La(s,_),Wn(f,s,_),bf;du(),r=t0(s,r,c)}else s=b.treeContext,Nt=Cs(_.nextSibling),Cn=r,lt=!0,Qi=null,Ss=!1,s!==null&&Hv(r,s),r=eu(r,f),r.flags|=4096;return r}return s=bi(s.child,{mode:f.mode,children:f.children}),s.ref=r.ref,r.child=s,s.return=r,s}function tu(s,r){var c=r.ref;if(c===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(s===null||s.ref!==c)&&(r.flags|=4194816)}}function xf(s,r,c,f,v){return za(r),c=Jh(s,r,c,f,void 0,v),f=ef(),s!==null&&!nn?(tf(s,r,v),Ei(s,r,v)):(lt&&f&&Oh(r),r.flags|=1,_n(s,r,c,v),r.child)}function n0(s,r,c,f,v,b){return za(r),r.updateQueue=null,c=ay(r,f,c,v),iy(s),f=ef(),s!==null&&!nn?(tf(s,r,b),Ei(s,r,b)):(lt&&f&&Oh(r),r.flags|=1,_n(s,r,c,b),r.child)}function s0(s,r,c,f,v){if(za(r),r.stateNode===null){var b=Er,_=c.contextType;typeof _=="object"&&_!==null&&(b=En(_)),b=new c(f,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=vf,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=f,b.state=r.memoizedState,b.refs={},Gh(r),_=c.contextType,b.context=typeof _=="object"&&_!==null?En(_):Er,b.state=r.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(gf(r,c,_,f),b.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(_=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),_!==b.state&&vf.enqueueReplaceState(b,b.state,null),rl(r,f,b,v),al(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(s===null){b=r.stateNode;var D=r.memoizedProps,V=Ga(c,D);b.props=V;var te=b.context,ue=c.contextType;_=Er,typeof ue=="object"&&ue!==null&&(_=En(ue));var me=c.getDerivedStateFromProps;ue=typeof me=="function"||typeof b.getSnapshotBeforeUpdate=="function",D=r.pendingProps!==D,ue||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(D||te!==_)&&Vy(r,b,f,_),ea=!1;var ne=r.memoizedState;b.state=ne,rl(r,f,b,v),al(),te=r.memoizedState,D||ne!==te||ea?(typeof me=="function"&&(gf(r,c,me,f),te=r.memoizedState),(V=ea||Uy(r,c,V,f,ne,te,_))?(ue||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=te),b.props=f,b.state=te,b.context=_,f=V):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{b=r.stateNode,Yh(s,r),_=r.memoizedProps,ue=Ga(c,_),b.props=ue,me=r.pendingProps,ne=b.context,te=c.contextType,V=Er,typeof te=="object"&&te!==null&&(V=En(te)),D=c.getDerivedStateFromProps,(te=typeof D=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==me||ne!==V)&&Vy(r,b,f,V),ea=!1,ne=r.memoizedState,b.state=ne,rl(r,f,b,v),al();var ae=r.memoizedState;_!==me||ne!==ae||ea||s!==null&&s.dependencies!==null&&Pc(s.dependencies)?(typeof D=="function"&&(gf(r,c,D,f),ae=r.memoizedState),(ue=ea||Uy(r,c,ue,f,ne,ae,V)||s!==null&&s.dependencies!==null&&Pc(s.dependencies))?(te||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,ae,V),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,ae,V)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||_===s.memoizedProps&&ne===s.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&ne===s.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=ae),b.props=f,b.state=ae,b.context=V,f=ue):(typeof b.componentDidUpdate!="function"||_===s.memoizedProps&&ne===s.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&ne===s.memoizedState||(r.flags|=1024),f=!1)}return b=f,tu(s,r),f=(r.flags&128)!==0,b||f?(b=r.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,s!==null&&f?(r.child=Va(r,s.child,null,v),r.child=Va(r,null,c,v)):_n(s,r,c,v),r.memoizedState=b.state,s=r.child):s=Ei(s,r,v),s}function i0(s,r,c,f){return Ia(),r.flags|=256,_n(s,r,c,f),r.child}var wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sf(s){return{baseLanes:s,cachePool:qv()}}function Af(s,r,c){return s=s!==null?s.childLanes&~c:0,r&&(s|=os),s}function a0(s,r,c){var f=r.pendingProps,v=!1,b=(r.flags&128)!==0,_;if((_=b)||(_=s!==null&&s.memoizedState===null?!1:(Gt.current&2)!==0),_&&(v=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,s===null){if(lt){if(v?sa(r):ia(),(s=Nt)?(s=fb(s,Ss),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Ki!==null?{id:Ws,overflow:Ks}:null,retryLane:536870912,hydrationErrors:null},c=Bv(s),c.return=r,r.child=c,Cn=r,Nt=null)):s=null,s===null)throw Zi(r);return am(s)?r.lanes=32:r.lanes=536870912,null}var D=f.children;return f=f.fallback,v?(ia(),v=r.mode,D=nu({mode:"hidden",children:D},v),f=Pa(f,v,c,null),D.return=r,f.return=r,D.sibling=f,r.child=D,f=r.child,f.memoizedState=Sf(c),f.childLanes=Af(s,_,c),r.memoizedState=wf,dl(null,f)):(sa(r),Cf(r,D))}var V=s.memoizedState;if(V!==null&&(D=V.dehydrated,D!==null)){if(b)r.flags&256?(sa(r),r.flags&=-257,r=Ef(s,r,c)):r.memoizedState!==null?(ia(),r.child=s.child,r.flags|=128,r=null):(ia(),D=f.fallback,v=r.mode,f=nu({mode:"visible",children:f.children},v),D=Pa(D,v,c,null),D.flags|=2,f.return=r,D.return=r,f.sibling=D,r.child=f,Va(r,s.child,null,c),f=r.child,f.memoizedState=Sf(c),f.childLanes=Af(s,_,c),r.memoizedState=wf,r=dl(null,f));else if(sa(r),am(D)){if(_=D.nextSibling&&D.nextSibling.dataset,_)var te=_.dgst;_=te,f=Error(n(419)),f.stack="",f.digest=_,Jo({value:f,source:null,stack:null}),r=Ef(s,r,c)}else if(nn||jr(s,r,c,!1),_=(c&s.childLanes)!==0,nn||_){if(_=Ct,_!==null&&(f=$t(_,c),f!==0&&f!==V.retryLane))throw V.retryLane=f,La(s,f),Wn(_,s,f),bf;im(D)||du(),r=Ef(s,r,c)}else im(D)?(r.flags|=192,r.child=s.child,r=null):(s=V.treeContext,Nt=Cs(D.nextSibling),Cn=r,lt=!0,Qi=null,Ss=!1,s!==null&&Hv(r,s),r=Cf(r,f.children),r.flags|=4096);return r}return v?(ia(),D=f.fallback,v=r.mode,V=s.child,te=V.sibling,f=bi(V,{mode:"hidden",children:f.children}),f.subtreeFlags=V.subtreeFlags&65011712,te!==null?D=bi(te,D):(D=Pa(D,v,c,null),D.flags|=2),D.return=r,f.return=r,f.sibling=D,r.child=f,dl(null,f),f=r.child,D=s.child.memoizedState,D===null?D=Sf(c):(v=D.cachePool,v!==null?(V=en._currentValue,v=v.parent!==V?{parent:V,pool:V}:v):v=qv(),D={baseLanes:D.baseLanes|c,cachePool:v}),f.memoizedState=D,f.childLanes=Af(s,_,c),r.memoizedState=wf,dl(s.child,f)):(sa(r),c=s.child,s=c.sibling,c=bi(c,{mode:"visible",children:f.children}),c.return=r,c.sibling=null,s!==null&&(_=r.deletions,_===null?(r.deletions=[s],r.flags|=16):_.push(s)),r.child=c,r.memoizedState=null,c)}function Cf(s,r){return r=nu({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function nu(s,r){return s=ss(22,s,null,r),s.lanes=0,s}function Ef(s,r,c){return Va(r,s.child,null,c),s=Cf(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function r0(s,r,c){s.lanes|=r;var f=s.alternate;f!==null&&(f.lanes|=r),zh(s.return,r,c)}function _f(s,r,c,f,v,b){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v,treeForkCount:b}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=c,_.tailMode=v,_.treeForkCount=b)}function o0(s,r,c){var f=r.pendingProps,v=f.revealOrder,b=f.tail;f=f.children;var _=Gt.current,D=(_&2)!==0;if(D?(_=_&1|2,r.flags|=128):_&=1,B(Gt,_),_n(s,r,f,c),f=lt?Zo:0,!D&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&r0(s,c,r);else if(s.tag===19)r0(s,c,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(v){case"forwards":for(c=r.child,v=null;c!==null;)s=c.alternate,s!==null&&$c(s)===null&&(v=c),c=c.sibling;c=v,c===null?(v=r.child,r.child=null):(v=c.sibling,c.sibling=null),_f(r,!1,v,c,b,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=r.child,r.child=null;v!==null;){if(s=v.alternate,s!==null&&$c(s)===null){r.child=v;break}s=v.sibling,v.sibling=c,c=v,v=s}_f(r,!0,c,null,b,f);break;case"together":_f(r,!1,null,null,void 0,f);break;default:r.memoizedState=null}return r.child}function Ei(s,r,c){if(s!==null&&(r.dependencies=s.dependencies),oa|=r.lanes,(c&r.childLanes)===0)if(s!==null){if(jr(s,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(n(153));if(r.child!==null){for(s=r.child,c=bi(s,s.pendingProps),r.child=c,c.return=r;s.sibling!==null;)s=s.sibling,c=c.sibling=bi(s,s.pendingProps),c.return=r;c.sibling=null}return r.child}function Tf(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Pc(s)))}function a_(s,r,c){switch(r.tag){case 3:Y(r,r.stateNode.containerInfo),Ji(r,en,s.memoizedState.cache),Ia();break;case 27:case 5:pe(r);break;case 4:Y(r,r.stateNode.containerInfo);break;case 10:Ji(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Qh(r),null;break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(sa(r),r.flags|=128,null):(c&r.child.childLanes)!==0?a0(s,r,c):(sa(r),s=Ei(s,r,c),s!==null?s.sibling:null);sa(r);break;case 19:var v=(s.flags&128)!==0;if(f=(c&r.childLanes)!==0,f||(jr(s,r,c,!1),f=(c&r.childLanes)!==0),v){if(f)return o0(s,r,c);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),B(Gt,Gt.current),f)break;return null;case 22:return r.lanes=0,Jy(s,r,c,r.pendingProps);case 24:Ji(r,en,s.memoizedState.cache)}return Ei(s,r,c)}function l0(s,r,c){if(s!==null)if(s.memoizedProps!==r.pendingProps)nn=!0;else{if(!Tf(s,c)&&(r.flags&128)===0)return nn=!1,a_(s,r,c);nn=(s.flags&131072)!==0}else nn=!1,lt&&(r.flags&1048576)!==0&&Fv(r,Zo,r.index);switch(r.lanes=0,r.tag){case 16:e:{var f=r.pendingProps;if(s=Ha(r.elementType),r.type=s,typeof s=="function")Rh(s)?(f=Ga(s,f),r.tag=1,r=s0(null,r,s,f,c)):(r.tag=0,r=xf(null,r,s,f,c));else{if(s!=null){var v=s.$$typeof;if(v===M){r.tag=11,r=Ky(null,r,s,f,c);break e}else if(v===O){r.tag=14,r=Qy(null,r,s,f,c);break e}}throw r=G(s)||s,Error(n(306,r,""))}}return r;case 0:return xf(s,r,r.type,r.pendingProps,c);case 1:return f=r.type,v=Ga(f,r.pendingProps),s0(s,r,f,v,c);case 3:e:{if(Y(r,r.stateNode.containerInfo),s===null)throw Error(n(387));f=r.pendingProps;var b=r.memoizedState;v=b.element,Yh(s,r),rl(r,f,null,c);var _=r.memoizedState;if(f=_.cache,Ji(r,en,f),f!==b.cache&&Fh(r,[en],c,!0),al(),f=_.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=i0(s,r,f,c);break e}else if(f!==v){v=bs(Error(n(424)),r),Jo(v),r=i0(s,r,f,c);break e}else for(s=r.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Nt=Cs(s.firstChild),Cn=r,lt=!0,Qi=null,Ss=!0,c=Jv(r,null,f,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ia(),f===v){r=Ei(s,r,c);break e}_n(s,r,f,c)}r=r.child}return r;case 26:return tu(s,r),s===null?(c=bb(r.type,null,r.pendingProps,null))?r.memoizedState=c:lt||(c=r.type,s=r.pendingProps,f=yu(oe.current).createElement(c),f[An]=r,f[Vn]=s,Tn(f,c,s),hn(f),r.stateNode=f):r.memoizedState=bb(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return pe(r),s===null&&lt&&(f=r.stateNode=gb(r.type,r.pendingProps,oe.current),Cn=r,Ss=!0,v=Nt,ha(r.type)?(rm=v,Nt=Cs(f.firstChild)):Nt=v),_n(s,r,r.pendingProps.children,c),tu(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&lt&&((v=f=Nt)&&(f=L_(f,r.type,r.pendingProps,Ss),f!==null?(r.stateNode=f,Cn=r,Nt=Cs(f.firstChild),Ss=!1,v=!0):v=!1),v||Zi(r)),pe(r),v=r.type,b=r.pendingProps,_=s!==null?s.memoizedProps:null,f=b.children,tm(v,b)?f=null:_!==null&&tm(v,_)&&(r.flags|=32),r.memoizedState!==null&&(v=Jh(s,r,K2,null,null,c),_l._currentValue=v),tu(s,r),_n(s,r,f,c),r.child;case 6:return s===null&&lt&&((s=c=Nt)&&(c=P_(c,r.pendingProps,Ss),c!==null?(r.stateNode=c,Cn=r,Nt=null,s=!0):s=!1),s||Zi(r)),null;case 13:return a0(s,r,c);case 4:return Y(r,r.stateNode.containerInfo),f=r.pendingProps,s===null?r.child=Va(r,null,f,c):_n(s,r,f,c),r.child;case 11:return Ky(s,r,r.type,r.pendingProps,c);case 7:return _n(s,r,r.pendingProps,c),r.child;case 8:return _n(s,r,r.pendingProps.children,c),r.child;case 12:return _n(s,r,r.pendingProps.children,c),r.child;case 10:return f=r.pendingProps,Ji(r,r.type,f.value),_n(s,r,f.children,c),r.child;case 9:return v=r.type._context,f=r.pendingProps.children,za(r),v=En(v),f=f(v),r.flags|=1,_n(s,r,f,c),r.child;case 14:return Qy(s,r,r.type,r.pendingProps,c);case 15:return Zy(s,r,r.type,r.pendingProps,c);case 19:return o0(s,r,c);case 31:return i_(s,r,c);case 22:return Jy(s,r,c,r.pendingProps);case 24:return za(r),f=En(en),s===null?(v=Vh(),v===null&&(v=Ct,b=Hh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=c),v=b),r.memoizedState={parent:f,cache:v},Gh(r),Ji(r,en,v)):((s.lanes&c)!==0&&(Yh(s,r),rl(r,null,null,c),al()),v=s.memoizedState,b=r.memoizedState,v.parent!==f?(v={parent:f,cache:f},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),Ji(r,en,f)):(f=b.cache,Ji(r,en,f),f!==v.cache&&Fh(r,[en],c,!0))),_n(s,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function _i(s){s.flags|=4}function Nf(s,r,c,f,v){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(v&335544128)===v)if(s.stateNode.complete)s.flags|=8192;else if(L0())s.flags|=8192;else throw Ua=Fc,$h}else s.flags&=-16777217}function c0(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Cb(r))if(L0())s.flags|=8192;else throw Ua=Fc,$h}function su(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?He():536870912,s.lanes|=r,Hr|=r)}function hl(s,r){if(!lt)switch(s.tailMode){case"hidden":r=s.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function jt(s){var r=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(r)for(var v=s.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=f,s.childLanes=c,r}function r_(s,r,c){var f=r.pendingProps;switch(Lh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(r),null;case 1:return jt(r),null;case 3:return c=r.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),Si(en),se(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Nr(r)?_i(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ih())),jt(r),null;case 26:var v=r.type,b=r.memoizedState;return s===null?(_i(r),b!==null?(jt(r),c0(r,b)):(jt(r),Nf(r,v,null,f,c))):b?b!==s.memoizedState?(_i(r),jt(r),c0(r,b)):(jt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==f&&_i(r),jt(r),Nf(r,v,s,f,c)),null;case 27:if(xe(r),c=oe.current,v=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==f&&_i(r);else{if(!f){if(r.stateNode===null)throw Error(n(166));return jt(r),null}s=X.current,Nr(r)?Uv(r):(s=gb(v,f,c),r.stateNode=s,_i(r))}return jt(r),null;case 5:if(xe(r),v=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==f&&_i(r);else{if(!f){if(r.stateNode===null)throw Error(n(166));return jt(r),null}if(b=X.current,Nr(r))Uv(r);else{var _=yu(oe.current);switch(b){case 1:b=_.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=_.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=_.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?_.createElement("select",{is:f.is}):_.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?_.createElement(v,{is:f.is}):_.createElement(v)}}b[An]=r,b[Vn]=f;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)b.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=b;e:switch(Tn(b,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&_i(r)}}return jt(r),Nf(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,c),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==f&&_i(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(n(166));if(s=oe.current,Nr(r)){if(s=r.stateNode,c=r.memoizedProps,f=null,v=Cn,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}s[An]=r,s=!!(s.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||ab(s.nodeValue,c)),s||Zi(r,!0)}else s=yu(s).createTextNode(f),s[An]=r,r.stateNode=s}return jt(r),null;case 31:if(c=r.memoizedState,s===null||s.memoizedState!==null){if(f=Nr(r),c!==null){if(s===null){if(!f)throw Error(n(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[An]=r}else Ia(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;jt(r),s=!1}else c=Ih(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return r.flags&256?(as(r),r):(as(r),null);if((r.flags&128)!==0)throw Error(n(558))}return jt(r),null;case 13:if(f=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=Nr(r),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(n(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[An]=r}else Ia(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;jt(r),v=!1}else v=Ih(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(as(r),r):(as(r),null)}return as(r),(r.flags&128)!==0?(r.lanes=c,r):(c=f!==null,s=s!==null&&s.memoizedState!==null,c&&(f=r.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048)),c!==s&&c&&(r.child.flags|=8192),su(r,r.updateQueue),jt(r),null);case 4:return se(),s===null&&Kf(r.stateNode.containerInfo),jt(r),null;case 10:return Si(r.type),jt(r),null;case 19:if(k(Gt),f=r.memoizedState,f===null)return jt(r),null;if(v=(r.flags&128)!==0,b=f.rendering,b===null)if(v)hl(f,!1);else{if(Ht!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(b=$c(s),b!==null){for(r.flags|=128,hl(f,!1),s=b.updateQueue,r.updateQueue=s,su(r,s),r.subtreeFlags=0,s=c,c=r.child;c!==null;)Iv(c,s),c=c.sibling;return B(Gt,Gt.current&1|2),lt&&xi(r,f.treeForkCount),r.child}s=s.sibling}f.tail!==null&&Mt()>lu&&(r.flags|=128,v=!0,hl(f,!1),r.lanes=4194304)}else{if(!v)if(s=$c(b),s!==null){if(r.flags|=128,v=!0,s=s.updateQueue,r.updateQueue=s,su(r,s),hl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!lt)return jt(r),null}else 2*Mt()-f.renderingStartTime>lu&&c!==536870912&&(r.flags|=128,v=!0,hl(f,!1),r.lanes=4194304);f.isBackwards?(b.sibling=r.child,r.child=b):(s=f.last,s!==null?s.sibling=b:r.child=b,f.last=b)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Mt(),s.sibling=null,c=Gt.current,B(Gt,v?c&1|2:c&1),lt&&xi(r,f.treeForkCount),s):(jt(r),null);case 22:case 23:return as(r),Kh(),f=r.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(c&536870912)!==0&&(r.flags&128)===0&&(jt(r),r.subtreeFlags&6&&(r.flags|=8192)):jt(r),c=r.updateQueue,c!==null&&su(r,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==c&&(r.flags|=2048),s!==null&&k(Fa),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Si(en),jt(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function o_(s,r){switch(Lh(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Si(en),se(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return xe(r),null;case 31:if(r.memoizedState!==null){if(as(r),r.alternate===null)throw Error(n(340));Ia()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(as(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Ia()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return k(Gt),null;case 4:return se(),null;case 10:return Si(r.type),null;case 22:case 23:return as(r),Kh(),s!==null&&k(Fa),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Si(en),null;case 25:return null;default:return null}}function u0(s,r){switch(Lh(r),r.tag){case 3:Si(en),se();break;case 26:case 27:case 5:xe(r);break;case 4:se();break;case 31:r.memoizedState!==null&&as(r);break;case 13:as(r);break;case 19:k(Gt);break;case 10:Si(r.type);break;case 22:case 23:as(r),Kh(),s!==null&&k(Fa);break;case 24:Si(en)}}function fl(s,r){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var v=f.next;c=v;do{if((c.tag&s)===s){f=void 0;var b=c.create,_=c.inst;f=b(),_.destroy=f}c=c.next}while(c!==v)}}catch(D){yt(r,r.return,D)}}function aa(s,r,c){try{var f=r.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var b=v.next;f=b;do{if((f.tag&s)===s){var _=f.inst,D=_.destroy;if(D!==void 0){_.destroy=void 0,v=r;var V=c,te=D;try{te()}catch(ue){yt(v,V,ue)}}}f=f.next}while(f!==b)}}catch(ue){yt(r,r.return,ue)}}function d0(s){var r=s.updateQueue;if(r!==null){var c=s.stateNode;try{ty(r,c)}catch(f){yt(s,s.return,f)}}}function h0(s,r,c){c.props=Ga(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(f){yt(s,r,f)}}function ml(s,r){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof c=="function"?s.refCleanup=c(f):c.current=f}}catch(v){yt(s,r,v)}}function Qs(s,r){var c=s.ref,f=s.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(v){yt(s,r,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){yt(s,r,v)}else c.current=null}function f0(s){var r=s.type,c=s.memoizedProps,f=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(v){yt(s,s.return,v)}}function jf(s,r,c){try{var f=s.stateNode;j_(f,s.type,c,r),f[Vn]=r}catch(v){yt(s,s.return,v)}}function m0(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ha(s.type)||s.tag===4}function Mf(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||m0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ha(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Rf(s,r,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(s),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=vi));else if(f!==4&&(f===27&&ha(s.type)&&(c=s.stateNode,r=null),s=s.child,s!==null))for(Rf(s,r,c),s=s.sibling;s!==null;)Rf(s,r,c),s=s.sibling}function iu(s,r,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,r?c.insertBefore(s,r):c.appendChild(s);else if(f!==4&&(f===27&&ha(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(iu(s,r,c),s=s.sibling;s!==null;)iu(s,r,c),s=s.sibling}function p0(s){var r=s.stateNode,c=s.memoizedProps;try{for(var f=s.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Tn(r,f,c),r[An]=s,r[Vn]=c}catch(b){yt(s,s.return,b)}}var Ti=!1,sn=!1,Df=!1,g0=typeof WeakSet=="function"?WeakSet:Set,fn=null;function l_(s,r){if(s=s.containerInfo,Jf=Eu,s=Nv(s),Ch(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var _=0,D=-1,V=-1,te=0,ue=0,me=s,ne=null;t:for(;;){for(var ae;me!==c||v!==0&&me.nodeType!==3||(D=_+v),me!==b||f!==0&&me.nodeType!==3||(V=_+f),me.nodeType===3&&(_+=me.nodeValue.length),(ae=me.firstChild)!==null;)ne=me,me=ae;for(;;){if(me===s)break t;if(ne===c&&++te===v&&(D=_),ne===b&&++ue===f&&(V=_),(ae=me.nextSibling)!==null)break;me=ne,ne=me.parentNode}me=ae}c=D===-1||V===-1?null:{start:D,end:V}}else c=null}c=c||{start:0,end:0}}else c=null;for(em={focusedElem:s,selectionRange:c},Eu=!1,fn=r;fn!==null;)if(r=fn,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,fn=s;else for(;fn!==null;){switch(r=fn,b=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)v=s[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,c=r,v=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var Ne=Ga(c.type,v);s=f.getSnapshotBeforeUpdate(Ne,b),f.__reactInternalSnapshotBeforeUpdate=s}catch(Be){yt(c,c.return,Be)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,c=s.nodeType,c===9)sm(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":sm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=r.sibling,s!==null){s.return=r.return,fn=s;break}fn=r.return}}function v0(s,r,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:ji(s,c),f&4&&fl(5,c);break;case 1:if(ji(s,c),f&4)if(s=c.stateNode,r===null)try{s.componentDidMount()}catch(_){yt(c,c.return,_)}else{var v=Ga(c.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(v,r,s.__reactInternalSnapshotBeforeUpdate)}catch(_){yt(c,c.return,_)}}f&64&&d0(c),f&512&&ml(c,c.return);break;case 3:if(ji(s,c),f&64&&(s=c.updateQueue,s!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{ty(s,r)}catch(_){yt(c,c.return,_)}}break;case 27:r===null&&f&4&&p0(c);case 26:case 5:ji(s,c),r===null&&f&4&&f0(c),f&512&&ml(c,c.return);break;case 12:ji(s,c);break;case 31:ji(s,c),f&4&&x0(s,c);break;case 13:ji(s,c),f&4&&w0(s,c),f&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=v_.bind(null,c),I_(s,c))));break;case 22:if(f=c.memoizedState!==null||Ti,!f){r=r!==null&&r.memoizedState!==null||sn,v=Ti;var b=sn;Ti=f,(sn=r)&&!b?Mi(s,c,(c.subtreeFlags&8772)!==0):ji(s,c),Ti=v,sn=b}break;case 30:break;default:ji(s,c)}}function y0(s){var r=s.alternate;r!==null&&(s.alternate=null,y0(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&oh(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ot=null,Gn=!1;function Ni(s,r,c){for(c=c.child;c!==null;)b0(s,r,c),c=c.sibling}function b0(s,r,c){if(re&&typeof re.onCommitFiberUnmount=="function")try{re.onCommitFiberUnmount(Ds,c)}catch{}switch(c.tag){case 26:sn||Qs(c,r),Ni(s,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:sn||Qs(c,r);var f=Ot,v=Gn;ha(c.type)&&(Ot=c.stateNode,Gn=!1),Ni(s,r,c),Al(c.stateNode),Ot=f,Gn=v;break;case 5:sn||Qs(c,r);case 6:if(f=Ot,v=Gn,Ot=null,Ni(s,r,c),Ot=f,Gn=v,Ot!==null)if(Gn)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(c.stateNode)}catch(b){yt(c,r,b)}else try{Ot.removeChild(c.stateNode)}catch(b){yt(c,r,b)}break;case 18:Ot!==null&&(Gn?(s=Ot,db(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),Wr(s)):db(Ot,c.stateNode));break;case 4:f=Ot,v=Gn,Ot=c.stateNode.containerInfo,Gn=!0,Ni(s,r,c),Ot=f,Gn=v;break;case 0:case 11:case 14:case 15:aa(2,c,r),sn||aa(4,c,r),Ni(s,r,c);break;case 1:sn||(Qs(c,r),f=c.stateNode,typeof f.componentWillUnmount=="function"&&h0(c,r,f)),Ni(s,r,c);break;case 21:Ni(s,r,c);break;case 22:sn=(f=sn)||c.memoizedState!==null,Ni(s,r,c),sn=f;break;default:Ni(s,r,c)}}function x0(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Wr(s)}catch(c){yt(r,r.return,c)}}}function w0(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Wr(s)}catch(c){yt(r,r.return,c)}}function c_(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new g0),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new g0),r;default:throw Error(n(435,s.tag))}}function au(s,r){var c=c_(s);r.forEach(function(f){if(!c.has(f)){c.add(f);var v=y_.bind(null,s,f);f.then(v,v)}})}function Yn(s,r){var c=r.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f],b=s,_=r,D=_;e:for(;D!==null;){switch(D.tag){case 27:if(ha(D.type)){Ot=D.stateNode,Gn=!1;break e}break;case 5:Ot=D.stateNode,Gn=!1;break e;case 3:case 4:Ot=D.stateNode.containerInfo,Gn=!0;break e}D=D.return}if(Ot===null)throw Error(n(160));b0(b,_,v),Ot=null,Gn=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)S0(r,s),r=r.sibling}var Ps=null;function S0(s,r){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Yn(r,s),qn(s),f&4&&(aa(3,s,s.return),fl(3,s),aa(5,s,s.return));break;case 1:Yn(r,s),qn(s),f&512&&(sn||c===null||Qs(c,c.return)),f&64&&Ti&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var v=Ps;if(Yn(r,s),qn(s),f&512&&(sn||c===null||Qs(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=s.memoizedState,c===null)if(f===null)if(s.stateNode===null){e:{f=s.type,c=s.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Ho]||b[An]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(f),v.head.insertBefore(b,v.querySelector("head > title"))),Tn(b,f,c),b[An]=s,hn(b),f=b;break e;case"link":var _=Sb("link","href",v).get(f+(c.href||""));if(_){for(var D=0;D<_.length;D++)if(b=_[D],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){_.splice(D,1);break t}}b=v.createElement(f),Tn(b,f,c),v.head.appendChild(b);break;case"meta":if(_=Sb("meta","content",v).get(f+(c.content||""))){for(D=0;D<_.length;D++)if(b=_[D],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){_.splice(D,1);break t}}b=v.createElement(f),Tn(b,f,c),v.head.appendChild(b);break;default:throw Error(n(468,f))}b[An]=s,hn(b),f=b}s.stateNode=f}else Ab(v,s.type,s.stateNode);else s.stateNode=wb(v,f,s.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?Ab(v,s.type,s.stateNode):wb(v,f,s.memoizedProps)):f===null&&s.stateNode!==null&&jf(s,s.memoizedProps,c.memoizedProps)}break;case 27:Yn(r,s),qn(s),f&512&&(sn||c===null||Qs(c,c.return)),c!==null&&f&4&&jf(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Yn(r,s),qn(s),f&512&&(sn||c===null||Qs(c,c.return)),s.flags&32){v=s.stateNode;try{yr(v,"")}catch(Ne){yt(s,s.return,Ne)}}f&4&&s.stateNode!=null&&(v=s.memoizedProps,jf(s,v,c!==null?c.memoizedProps:v)),f&1024&&(Df=!0);break;case 6:if(Yn(r,s),qn(s),f&4){if(s.stateNode===null)throw Error(n(162));f=s.memoizedProps,c=s.stateNode;try{c.nodeValue=f}catch(Ne){yt(s,s.return,Ne)}}break;case 3:if(wu=null,v=Ps,Ps=bu(r.containerInfo),Yn(r,s),Ps=v,qn(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Wr(r.containerInfo)}catch(Ne){yt(s,s.return,Ne)}Df&&(Df=!1,A0(s));break;case 4:f=Ps,Ps=bu(s.stateNode.containerInfo),Yn(r,s),qn(s),Ps=f;break;case 12:Yn(r,s),qn(s);break;case 31:Yn(r,s),qn(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,au(s,f)));break;case 13:Yn(r,s),qn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(ou=Mt()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,au(s,f)));break;case 22:v=s.memoizedState!==null;var V=c!==null&&c.memoizedState!==null,te=Ti,ue=sn;if(Ti=te||v,sn=ue||V,Yn(r,s),sn=ue,Ti=te,qn(s),f&8192)e:for(r=s.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(c===null||V||Ti||sn||Ya(s)),c=null,r=s;;){if(r.tag===5||r.tag===26){if(c===null){V=c=r;try{if(b=V.stateNode,v)_=b.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{D=V.stateNode;var me=V.memoizedProps.style,ne=me!=null&&me.hasOwnProperty("display")?me.display:null;D.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Ne){yt(V,V.return,Ne)}}}else if(r.tag===6){if(c===null){V=r;try{V.stateNode.nodeValue=v?"":V.memoizedProps}catch(Ne){yt(V,V.return,Ne)}}}else if(r.tag===18){if(c===null){V=r;try{var ae=V.stateNode;v?hb(ae,!0):hb(V.stateNode,!1)}catch(Ne){yt(V,V.return,Ne)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=s.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,au(s,c))));break;case 19:Yn(r,s),qn(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,au(s,f)));break;case 30:break;case 21:break;default:Yn(r,s),qn(s)}}function qn(s){var r=s.flags;if(r&2){try{for(var c,f=s.return;f!==null;){if(m0(f)){c=f;break}f=f.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var v=c.stateNode,b=Mf(s);iu(s,b,v);break;case 5:var _=c.stateNode;c.flags&32&&(yr(_,""),c.flags&=-33);var D=Mf(s);iu(s,D,_);break;case 3:case 4:var V=c.stateNode.containerInfo,te=Mf(s);Rf(s,te,V);break;default:throw Error(n(161))}}catch(ue){yt(s,s.return,ue)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function A0(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;A0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ji(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)v0(s,r.alternate,r),r=r.sibling}function Ya(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:aa(4,r,r.return),Ya(r);break;case 1:Qs(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&h0(r,r.return,c),Ya(r);break;case 27:Al(r.stateNode);case 26:case 5:Qs(r,r.return),Ya(r);break;case 22:r.memoizedState===null&&Ya(r);break;case 30:Ya(r);break;default:Ya(r)}s=s.sibling}}function Mi(s,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,v=s,b=r,_=b.flags;switch(b.tag){case 0:case 11:case 15:Mi(v,b,c),fl(4,b);break;case 1:if(Mi(v,b,c),f=b,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(te){yt(f,f.return,te)}if(f=b,v=f.updateQueue,v!==null){var D=f.stateNode;try{var V=v.shared.hiddenCallbacks;if(V!==null)for(v.shared.hiddenCallbacks=null,v=0;v<V.length;v++)ey(V[v],D)}catch(te){yt(f,f.return,te)}}c&&_&64&&d0(b),ml(b,b.return);break;case 27:p0(b);case 26:case 5:Mi(v,b,c),c&&f===null&&_&4&&f0(b),ml(b,b.return);break;case 12:Mi(v,b,c);break;case 31:Mi(v,b,c),c&&_&4&&x0(v,b);break;case 13:Mi(v,b,c),c&&_&4&&w0(v,b);break;case 22:b.memoizedState===null&&Mi(v,b,c),ml(b,b.return);break;case 30:break;default:Mi(v,b,c)}r=r.sibling}}function kf(s,r){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&el(c))}function Of(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&el(s))}function Is(s,r,c,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)C0(s,r,c,f),r=r.sibling}function C0(s,r,c,f){var v=r.flags;switch(r.tag){case 0:case 11:case 15:Is(s,r,c,f),v&2048&&fl(9,r);break;case 1:Is(s,r,c,f);break;case 3:Is(s,r,c,f),v&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&el(s)));break;case 12:if(v&2048){Is(s,r,c,f),s=r.stateNode;try{var b=r.memoizedProps,_=b.id,D=b.onPostCommit;typeof D=="function"&&D(_,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){yt(r,r.return,V)}}else Is(s,r,c,f);break;case 31:Is(s,r,c,f);break;case 13:Is(s,r,c,f);break;case 23:break;case 22:b=r.stateNode,_=r.alternate,r.memoizedState!==null?b._visibility&2?Is(s,r,c,f):pl(s,r):b._visibility&2?Is(s,r,c,f):(b._visibility|=2,Br(s,r,c,f,(r.subtreeFlags&10256)!==0||!1)),v&2048&&kf(_,r);break;case 24:Is(s,r,c,f),v&2048&&Of(r.alternate,r);break;default:Is(s,r,c,f)}}function Br(s,r,c,f,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=s,_=r,D=c,V=f,te=_.flags;switch(_.tag){case 0:case 11:case 15:Br(b,_,D,V,v),fl(8,_);break;case 23:break;case 22:var ue=_.stateNode;_.memoizedState!==null?ue._visibility&2?Br(b,_,D,V,v):pl(b,_):(ue._visibility|=2,Br(b,_,D,V,v)),v&&te&2048&&kf(_.alternate,_);break;case 24:Br(b,_,D,V,v),v&&te&2048&&Of(_.alternate,_);break;default:Br(b,_,D,V,v)}r=r.sibling}}function pl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=s,f=r,v=f.flags;switch(f.tag){case 22:pl(c,f),v&2048&&kf(f.alternate,f);break;case 24:pl(c,f),v&2048&&Of(f.alternate,f);break;default:pl(c,f)}r=r.sibling}}var gl=8192;function zr(s,r,c){if(s.subtreeFlags&gl)for(s=s.child;s!==null;)E0(s,r,c),s=s.sibling}function E0(s,r,c){switch(s.tag){case 26:zr(s,r,c),s.flags&gl&&s.memoizedState!==null&&W_(c,Ps,s.memoizedState,s.memoizedProps);break;case 5:zr(s,r,c);break;case 3:case 4:var f=Ps;Ps=bu(s.stateNode.containerInfo),zr(s,r,c),Ps=f;break;case 22:s.memoizedState===null&&(f=s.alternate,f!==null&&f.memoizedState!==null?(f=gl,gl=16777216,zr(s,r,c),gl=f):zr(s,r,c));break;default:zr(s,r,c)}}function _0(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function vl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];fn=f,N0(f,s)}_0(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)T0(s),s=s.sibling}function T0(s){switch(s.tag){case 0:case 11:case 15:vl(s),s.flags&2048&&aa(9,s,s.return);break;case 3:vl(s);break;case 12:vl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,ru(s)):vl(s);break;default:vl(s)}}function ru(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];fn=f,N0(f,s)}_0(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:aa(8,r,r.return),ru(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,ru(r));break;default:ru(r)}s=s.sibling}}function N0(s,r){for(;fn!==null;){var c=fn;switch(c.tag){case 0:case 11:case 15:aa(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:el(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,fn=f;else e:for(c=s;fn!==null;){f=fn;var v=f.sibling,b=f.return;if(y0(f),f===c){fn=null;break e}if(v!==null){v.return=b,fn=v;break e}fn=b}}}var u_={getCacheForType:function(s){var r=En(en),c=r.data.get(s);return c===void 0&&(c=s(),r.data.set(s,c)),c},cacheSignal:function(){return En(en).controller.signal}},d_=typeof WeakMap=="function"?WeakMap:Map,mt=0,Ct=null,nt=null,it=0,vt=0,rs=null,ra=!1,Fr=!1,Lf=!1,Ri=0,Ht=0,oa=0,qa=0,Pf=0,os=0,Hr=0,yl=null,Xn=null,If=!1,ou=0,j0=0,lu=1/0,cu=null,la=null,on=0,ca=null,Ur=null,Di=0,Bf=0,zf=null,M0=null,bl=0,Ff=null;function ls(){return(mt&2)!==0&&it!==0?it&-it:R.T!==null?Yf():ah()}function R0(){if(os===0)if((it&536870912)===0||lt){var s=kt;kt<<=1,(kt&3932160)===0&&(kt=262144),os=s}else os=536870912;return s=is.current,s!==null&&(s.flags|=32),os}function Wn(s,r,c){(s===Ct&&(vt===2||vt===9)||s.cancelPendingCommit!==null)&&(Vr(s,0),ua(s,it,os,!1)),ot(s,c),((mt&2)===0||s!==Ct)&&(s===Ct&&((mt&2)===0&&(qa|=c),Ht===4&&ua(s,it,os,!1)),Zs(s))}function D0(s,r,c){if((mt&6)!==0)throw Error(n(327));var f=!c&&(r&127)===0&&(r&s.expiredLanes)===0||be(s,r),v=f?m_(s,r):Uf(s,r,!0),b=f;do{if(v===0){Fr&&!f&&ua(s,r,0,!1);break}else{if(c=s.current.alternate,b&&!h_(c)){v=Uf(s,r,!1),b=!1;continue}if(v===2){if(b=r,s.errorRecoveryDisabledLanes&b)var _=0;else _=s.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var D=s;v=yl;var V=D.current.memoizedState.isDehydrated;if(V&&(Vr(D,_).flags|=256),_=Uf(D,_,!1),_!==2){if(Lf&&!V){D.errorRecoveryDisabledLanes|=b,qa|=b,v=4;break e}b=Xn,Xn=v,b!==null&&(Xn===null?Xn=b:Xn.push.apply(Xn,b))}v=_}if(b=!1,v!==2)continue}}if(v===1){Vr(s,0),ua(s,r,0,!0);break}e:{switch(f=s,b=v,b){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:ua(f,r,os,!ra);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(v=ou+300-Mt(),10<v)){if(ua(f,r,os,!ra),Fe(f,0,!0)!==0)break e;Di=r,f.timeoutHandle=cb(k0.bind(null,f,c,Xn,cu,If,r,os,qa,Hr,ra,b,"Throttled",-0,0),v);break e}k0(f,c,Xn,cu,If,r,os,qa,Hr,ra,b,null,-0,0)}}break}while(!0);Zs(s)}function k0(s,r,c,f,v,b,_,D,V,te,ue,me,ne,ae){if(s.timeoutHandle=-1,me=r.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vi},E0(r,b,me);var Ne=(b&62914560)===b?ou-Mt():(b&4194048)===b?j0-Mt():0;if(Ne=K_(me,Ne),Ne!==null){Di=b,s.cancelPendingCommit=Ne(H0.bind(null,s,r,b,c,f,v,_,D,V,ue,me,null,ne,ae)),ua(s,b,_,!te);return}}H0(s,r,b,c,f,v,_,D,V)}function h_(s){for(var r=s;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var v=c[f],b=v.getSnapshot;v=v.value;try{if(!ns(b(),v))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ua(s,r,c,f){r&=~Pf,r&=~qa,s.suspendedLanes|=r,s.pingedLanes&=~r,f&&(s.warmLanes|=r),f=s.expirationTimes;for(var v=r;0<v;){var b=31-Ee(v),_=1<<b;f[b]=-1,v&=~_}c!==0&&Xs(s,c,r)}function uu(){return(mt&6)===0?(xl(0),!1):!0}function Hf(){if(nt!==null){if(vt===0)var s=nt.return;else s=nt,wi=Ba=null,nf(s),kr=null,nl=0,s=nt;for(;s!==null;)u0(s.alternate,s),s=s.return;nt=null}}function Vr(s,r){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,D_(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Di=0,Hf(),Ct=s,nt=c=bi(s.current,null),it=r,vt=0,rs=null,ra=!1,Fr=be(s,r),Lf=!1,Hr=os=Pf=qa=oa=Ht=0,Xn=yl=null,If=!1,(r&8)!==0&&(r|=r&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=r;0<f;){var v=31-Ee(f),b=1<<v;r|=s[v],f&=~b}return Ri=r,Rc(),c}function O0(s,r){Ke=null,R.H=ul,r===Dr||r===zc?(r=Kv(),vt=3):r===$h?(r=Kv(),vt=4):vt=r===bf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,rs=r,nt===null&&(Ht=1,Jc(s,bs(r,s.current)))}function L0(){var s=is.current;return s===null?!0:(it&4194048)===it?As===null:(it&62914560)===it||(it&536870912)!==0?s===As:!1}function P0(){var s=R.H;return R.H=ul,s===null?ul:s}function I0(){var s=R.A;return R.A=u_,s}function du(){Ht=4,ra||(it&4194048)!==it&&is.current!==null||(Fr=!0),(oa&134217727)===0&&(qa&134217727)===0||Ct===null||ua(Ct,it,os,!1)}function Uf(s,r,c){var f=mt;mt|=2;var v=P0(),b=I0();(Ct!==s||it!==r)&&(cu=null,Vr(s,r)),r=!1;var _=Ht;e:do try{if(vt!==0&&nt!==null){var D=nt,V=rs;switch(vt){case 8:Hf(),_=6;break e;case 3:case 2:case 9:case 6:is.current===null&&(r=!0);var te=vt;if(vt=0,rs=null,$r(s,D,V,te),c&&Fr){_=0;break e}break;default:te=vt,vt=0,rs=null,$r(s,D,V,te)}}f_(),_=Ht;break}catch(ue){O0(s,ue)}while(!0);return r&&s.shellSuspendCounter++,wi=Ba=null,mt=f,R.H=v,R.A=b,nt===null&&(Ct=null,it=0,Rc()),_}function f_(){for(;nt!==null;)B0(nt)}function m_(s,r){var c=mt;mt|=2;var f=P0(),v=I0();Ct!==s||it!==r?(cu=null,lu=Mt()+500,Vr(s,r)):Fr=be(s,r);e:do try{if(vt!==0&&nt!==null){r=nt;var b=rs;t:switch(vt){case 1:vt=0,rs=null,$r(s,r,b,1);break;case 2:case 9:if(Xv(b)){vt=0,rs=null,z0(r);break}r=function(){vt!==2&&vt!==9||Ct!==s||(vt=7),Zs(s)},b.then(r,r);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:Xv(b)?(vt=0,rs=null,z0(r)):(vt=0,rs=null,$r(s,r,b,7));break;case 5:var _=null;switch(nt.tag){case 26:_=nt.memoizedState;case 5:case 27:var D=nt;if(_?Cb(_):D.stateNode.complete){vt=0,rs=null;var V=D.sibling;if(V!==null)nt=V;else{var te=D.return;te!==null?(nt=te,hu(te)):nt=null}break t}}vt=0,rs=null,$r(s,r,b,5);break;case 6:vt=0,rs=null,$r(s,r,b,6);break;case 8:Hf(),Ht=6;break e;default:throw Error(n(462))}}p_();break}catch(ue){O0(s,ue)}while(!0);return wi=Ba=null,R.H=f,R.A=v,mt=c,nt!==null?0:(Ct=null,it=0,Rc(),Ht)}function p_(){for(;nt!==null&&!At();)B0(nt)}function B0(s){var r=l0(s.alternate,s,Ri);s.memoizedProps=s.pendingProps,r===null?hu(s):nt=r}function z0(s){var r=s,c=r.alternate;switch(r.tag){case 15:case 0:r=n0(c,r,r.pendingProps,r.type,void 0,it);break;case 11:r=n0(c,r,r.pendingProps,r.type.render,r.ref,it);break;case 5:nf(r);default:u0(c,r),r=nt=Iv(r,Ri),r=l0(c,r,Ri)}s.memoizedProps=s.pendingProps,r===null?hu(s):nt=r}function $r(s,r,c,f){wi=Ba=null,nf(r),kr=null,nl=0;var v=r.return;try{if(s_(s,v,r,c,it)){Ht=1,Jc(s,bs(c,s.current)),nt=null;return}}catch(b){if(v!==null)throw nt=v,b;Ht=1,Jc(s,bs(c,s.current)),nt=null;return}r.flags&32768?(lt||f===1?s=!0:Fr||(it&536870912)!==0?s=!1:(ra=s=!0,(f===2||f===9||f===3||f===6)&&(f=is.current,f!==null&&f.tag===13&&(f.flags|=16384))),F0(r,s)):hu(r)}function hu(s){var r=s;do{if((r.flags&32768)!==0){F0(r,ra);return}s=r.return;var c=r_(r.alternate,r,Ri);if(c!==null){nt=c;return}if(r=r.sibling,r!==null){nt=r;return}nt=r=s}while(r!==null);Ht===0&&(Ht=5)}function F0(s,r){do{var c=o_(s.alternate,s);if(c!==null){c.flags&=32767,nt=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(s=s.sibling,s!==null)){nt=s;return}nt=s=c}while(s!==null);Ht=6,nt=null}function H0(s,r,c,f,v,b,_,D,V){s.cancelPendingCommit=null;do fu();while(on!==0);if((mt&6)!==0)throw Error(n(327));if(r!==null){if(r===s.current)throw Error(n(177));if(b=r.lanes|r.childLanes,b|=jh,Dn(s,c,b,_,D,V),s===Ct&&(nt=Ct=null,it=0),Ur=r,ca=s,Di=c,Bf=b,zf=v,M0=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,b_(Pn,function(){return Y0(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=R.T,R.T=null,v=U.p,U.p=2,_=mt,mt|=4;try{l_(s,r,c)}finally{mt=_,U.p=v,R.T=f}}on=1,U0(),V0(),$0()}}function U0(){if(on===1){on=0;var s=ca,r=Ur,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=R.T,R.T=null;var f=U.p;U.p=2;var v=mt;mt|=4;try{S0(r,s);var b=em,_=Nv(s.containerInfo),D=b.focusedElem,V=b.selectionRange;if(_!==D&&D&&D.ownerDocument&&Tv(D.ownerDocument.documentElement,D)){if(V!==null&&Ch(D)){var te=V.start,ue=V.end;if(ue===void 0&&(ue=te),"selectionStart"in D)D.selectionStart=te,D.selectionEnd=Math.min(ue,D.value.length);else{var me=D.ownerDocument||document,ne=me&&me.defaultView||window;if(ne.getSelection){var ae=ne.getSelection(),Ne=D.textContent.length,Be=Math.min(V.start,Ne),wt=V.end===void 0?Be:Math.min(V.end,Ne);!ae.extend&&Be>wt&&(_=wt,wt=Be,Be=_);var Q=_v(D,Be),q=_v(D,wt);if(Q&&q&&(ae.rangeCount!==1||ae.anchorNode!==Q.node||ae.anchorOffset!==Q.offset||ae.focusNode!==q.node||ae.focusOffset!==q.offset)){var ee=me.createRange();ee.setStart(Q.node,Q.offset),ae.removeAllRanges(),Be>wt?(ae.addRange(ee),ae.extend(q.node,q.offset)):(ee.setEnd(q.node,q.offset),ae.addRange(ee))}}}}for(me=[],ae=D;ae=ae.parentNode;)ae.nodeType===1&&me.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<me.length;D++){var de=me[D];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Eu=!!Jf,em=Jf=null}finally{mt=v,U.p=f,R.T=c}}s.current=r,on=2}}function V0(){if(on===2){on=0;var s=ca,r=Ur,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=R.T,R.T=null;var f=U.p;U.p=2;var v=mt;mt|=4;try{v0(s,r.alternate,r)}finally{mt=v,U.p=f,R.T=c}}on=3}}function $0(){if(on===4||on===3){on=0,Ut();var s=ca,r=Ur,c=Di,f=M0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?on=5:(on=0,Ur=ca=null,G0(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(la=null),Os(c),r=r.stateNode,re&&typeof re.onCommitFiberRoot=="function")try{re.onCommitFiberRoot(Ds,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=R.T,v=U.p,U.p=2,R.T=null;try{for(var b=s.onRecoverableError,_=0;_<f.length;_++){var D=f[_];b(D.value,{componentStack:D.stack})}}finally{R.T=r,U.p=v}}(Di&3)!==0&&fu(),Zs(s),v=s.pendingLanes,(c&261930)!==0&&(v&42)!==0?s===Ff?bl++:(bl=0,Ff=s):bl=0,xl(0)}}function G0(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,el(r)))}function fu(){return U0(),V0(),$0(),Y0()}function Y0(){if(on!==5)return!1;var s=ca,r=Bf;Bf=0;var c=Os(Di),f=R.T,v=U.p;try{U.p=32>c?32:c,R.T=null,c=zf,zf=null;var b=ca,_=Di;if(on=0,Ur=ca=null,Di=0,(mt&6)!==0)throw Error(n(331));var D=mt;if(mt|=4,T0(b.current),C0(b,b.current,_,c),mt=D,xl(0,!1),re&&typeof re.onPostCommitFiberRoot=="function")try{re.onPostCommitFiberRoot(Ds,b)}catch{}return!0}finally{U.p=v,R.T=f,G0(s,r)}}function q0(s,r,c){r=bs(c,r),r=yf(s.stateNode,r,2),s=na(s,r,2),s!==null&&(ot(s,2),Zs(s))}function yt(s,r,c){if(s.tag===3)q0(s,s,c);else for(;r!==null;){if(r.tag===3){q0(r,s,c);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(la===null||!la.has(f))){s=bs(c,s),c=Xy(2),f=na(r,c,2),f!==null&&(Wy(c,f,r,s),ot(f,2),Zs(f));break}}r=r.return}}function Vf(s,r,c){var f=s.pingCache;if(f===null){f=s.pingCache=new d_;var v=new Set;f.set(r,v)}else v=f.get(r),v===void 0&&(v=new Set,f.set(r,v));v.has(c)||(Lf=!0,v.add(c),s=g_.bind(null,s,r,c),r.then(s,s))}function g_(s,r,c){var f=s.pingCache;f!==null&&f.delete(r),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,Ct===s&&(it&c)===c&&(Ht===4||Ht===3&&(it&62914560)===it&&300>Mt()-ou?(mt&2)===0&&Vr(s,0):Pf|=c,Hr===it&&(Hr=0)),Zs(s)}function X0(s,r){r===0&&(r=He()),s=La(s,r),s!==null&&(ot(s,r),Zs(s))}function v_(s){var r=s.memoizedState,c=0;r!==null&&(c=r.retryLane),X0(s,c)}function y_(s,r){var c=0;switch(s.tag){case 31:case 13:var f=s.stateNode,v=s.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(r),X0(s,c)}function b_(s,r){return rn(s,r)}var mu=null,Gr=null,$f=!1,pu=!1,Gf=!1,da=0;function Zs(s){s!==Gr&&s.next===null&&(Gr===null?mu=Gr=s:Gr=Gr.next=s),pu=!0,$f||($f=!0,w_())}function xl(s,r){if(!Gf&&pu){Gf=!0;do for(var c=!1,f=mu;f!==null;){if(s!==0){var v=f.pendingLanes;if(v===0)var b=0;else{var _=f.suspendedLanes,D=f.pingedLanes;b=(1<<31-Ee(42|s)+1)-1,b&=v&~(_&~D),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Z0(f,b))}else b=it,b=Fe(f,f===Ct?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||be(f,b)||(c=!0,Z0(f,b));f=f.next}while(c);Gf=!1}}function x_(){W0()}function W0(){pu=$f=!1;var s=0;da!==0&&R_()&&(s=da);for(var r=Mt(),c=null,f=mu;f!==null;){var v=f.next,b=K0(f,r);b===0?(f.next=null,c===null?mu=v:c.next=v,v===null&&(Gr=c)):(c=f,(s!==0||(b&3)!==0)&&(pu=!0)),f=v}on!==0&&on!==5||xl(s),da!==0&&(da=0)}function K0(s,r){for(var c=s.suspendedLanes,f=s.pingedLanes,v=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var _=31-Ee(b),D=1<<_,V=v[_];V===-1?((D&c)===0||(D&f)!==0)&&(v[_]=Ie(D,r)):V<=r&&(s.expiredLanes|=D),b&=~D}if(r=Ct,c=it,c=Fe(s,s===r?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,c===0||s===r&&(vt===2||vt===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&Tt(f),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||be(s,c)){if(r=c&-c,r===s.callbackPriority)return r;switch(f!==null&&Tt(f),Os(c)){case 2:case 8:c=Rt;break;case 32:c=Pn;break;case 268435456:c=Vt;break;default:c=Pn}return f=Q0.bind(null,s),c=rn(c,f),s.callbackPriority=r,s.callbackNode=c,r}return f!==null&&f!==null&&Tt(f),s.callbackPriority=2,s.callbackNode=null,2}function Q0(s,r){if(on!==0&&on!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(fu()&&s.callbackNode!==c)return null;var f=it;return f=Fe(s,s===Ct?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(D0(s,f,r),K0(s,Mt()),s.callbackNode!=null&&s.callbackNode===c?Q0.bind(null,s):null)}function Z0(s,r){if(fu())return null;D0(s,r,!0)}function w_(){k_(function(){(mt&6)!==0?rn(Zt,x_):W0()})}function Yf(){if(da===0){var s=Mr;s===0&&(s=Dt,Dt<<=1,(Dt&261888)===0&&(Dt=256)),da=s}return da}function J0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ac(""+s)}function eb(s,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,s.id&&c.setAttribute("form",s.id),r.parentNode.insertBefore(c,r),s=new FormData(s),c.parentNode.removeChild(c),s}function S_(s,r,c,f,v){if(r==="submit"&&c&&c.stateNode===v){var b=J0((v[Vn]||null).action),_=f.submitter;_&&(r=(r=_[Vn]||null)?J0(r.formAction):_.getAttribute("formAction"),r!==null&&(b=r,_=null));var D=new Tc("action","action",null,f,v);s.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(da!==0){var V=_?eb(v,_):new FormData(v);hf(c,{pending:!0,data:V,method:v.method,action:b},null,V)}}else typeof b=="function"&&(D.preventDefault(),V=_?eb(v,_):new FormData(v),hf(c,{pending:!0,data:V,method:v.method,action:b},b,V))},currentTarget:v}]})}}for(var qf=0;qf<Nh.length;qf++){var Xf=Nh[qf],A_=Xf.toLowerCase(),C_=Xf[0].toUpperCase()+Xf.slice(1);Ls(A_,"on"+C_)}Ls(Rv,"onAnimationEnd"),Ls(Dv,"onAnimationIteration"),Ls(kv,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(F2,"onTransitionRun"),Ls(H2,"onTransitionStart"),Ls(U2,"onTransitionCancel"),Ls(Ov,"onTransitionEnd"),gr("onMouseEnter",["mouseout","mouseover"]),gr("onMouseLeave",["mouseout","mouseover"]),gr("onPointerEnter",["pointerout","pointerover"]),gr("onPointerLeave",["pointerout","pointerover"]),Ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ra("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wl));function tb(s,r){r=(r&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],v=f.event;f=f.listeners;e:{var b=void 0;if(r)for(var _=f.length-1;0<=_;_--){var D=f[_],V=D.instance,te=D.currentTarget;if(D=D.listener,V!==b&&v.isPropagationStopped())break e;b=D,v.currentTarget=te;try{b(v)}catch(ue){Mc(ue)}v.currentTarget=null,b=V}else for(_=0;_<f.length;_++){if(D=f[_],V=D.instance,te=D.currentTarget,D=D.listener,V!==b&&v.isPropagationStopped())break e;b=D,v.currentTarget=te;try{b(v)}catch(ue){Mc(ue)}v.currentTarget=null,b=V}}}}function st(s,r){var c=r[rh];c===void 0&&(c=r[rh]=new Set);var f=s+"__bubble";c.has(f)||(nb(r,s,2,!1),c.add(f))}function Wf(s,r,c){var f=0;r&&(f|=4),nb(c,s,f,r)}var gu="_reactListening"+Math.random().toString(36).slice(2);function Kf(s){if(!s[gu]){s[gu]=!0,Wg.forEach(function(c){c!=="selectionchange"&&(E_.has(c)||Wf(c,!1,s),Wf(c,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[gu]||(r[gu]=!0,Wf("selectionchange",!1,r))}}function nb(s,r,c,f){switch(Rb(r)){case 2:var v=J_;break;case 8:v=eT;break;default:v=dm}c=v.bind(null,r,c,s),v=void 0,!ph||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),f?v!==void 0?s.addEventListener(r,c,{capture:!0,passive:v}):s.addEventListener(r,c,!0):v!==void 0?s.addEventListener(r,c,{passive:v}):s.addEventListener(r,c,!1)}function Qf(s,r,c,f,v){var b=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var _=f.tag;if(_===3||_===4){var D=f.stateNode.containerInfo;if(D===v)break;if(_===4)for(_=f.return;_!==null;){var V=_.tag;if((V===3||V===4)&&_.stateNode.containerInfo===v)return;_=_.return}for(;D!==null;){if(_=fr(D),_===null)return;if(V=_.tag,V===5||V===6||V===26||V===27){f=b=_;continue e}D=D.parentNode}}f=f.return}ov(function(){var te=b,ue=fh(c),me=[];e:{var ne=Lv.get(s);if(ne!==void 0){var ae=Tc,Ne=s;switch(s){case"keypress":if(Ec(c)===0)break e;case"keydown":case"keyup":ae=y2;break;case"focusin":Ne="focus",ae=bh;break;case"focusout":Ne="blur",ae=bh;break;case"beforeblur":case"afterblur":ae=bh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=uv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=r2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=w2;break;case Rv:case Dv:case kv:ae=c2;break;case Ov:ae=A2;break;case"scroll":case"scrollend":ae=i2;break;case"wheel":ae=E2;break;case"copy":case"cut":case"paste":ae=d2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=hv;break;case"toggle":case"beforetoggle":ae=T2}var Be=(r&4)!==0,wt=!Be&&(s==="scroll"||s==="scrollend"),Q=Be?ne!==null?ne+"Capture":null:ne;Be=[];for(var q=te,ee;q!==null;){var de=q;if(ee=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ee===null||Q===null||(de=Vo(q,Q),de!=null&&Be.push(Sl(q,de,ee))),wt)break;q=q.return}0<Be.length&&(ne=new ae(ne,Ne,null,c,ue),me.push({event:ne,listeners:Be}))}}if((r&7)===0){e:{if(ne=s==="mouseover"||s==="pointerover",ae=s==="mouseout"||s==="pointerout",ne&&c!==hh&&(Ne=c.relatedTarget||c.fromElement)&&(fr(Ne)||Ne[hr]))break e;if((ae||ne)&&(ne=ue.window===ue?ue:(ne=ue.ownerDocument)?ne.defaultView||ne.parentWindow:window,ae?(Ne=c.relatedTarget||c.toElement,ae=te,Ne=Ne?fr(Ne):null,Ne!==null&&(wt=o(Ne),Be=Ne.tag,Ne!==wt||Be!==5&&Be!==27&&Be!==6)&&(Ne=null)):(ae=null,Ne=te),ae!==Ne)){if(Be=uv,de="onMouseLeave",Q="onMouseEnter",q="mouse",(s==="pointerout"||s==="pointerover")&&(Be=hv,de="onPointerLeave",Q="onPointerEnter",q="pointer"),wt=ae==null?ne:Uo(ae),ee=Ne==null?ne:Uo(Ne),ne=new Be(de,q+"leave",ae,c,ue),ne.target=wt,ne.relatedTarget=ee,de=null,fr(ue)===te&&(Be=new Be(Q,q+"enter",Ne,c,ue),Be.target=ee,Be.relatedTarget=wt,de=Be),wt=de,ae&&Ne)t:{for(Be=__,Q=ae,q=Ne,ee=0,de=Q;de;de=Be(de))ee++;de=0;for(var De=q;De;De=Be(De))de++;for(;0<ee-de;)Q=Be(Q),ee--;for(;0<de-ee;)q=Be(q),de--;for(;ee--;){if(Q===q||q!==null&&Q===q.alternate){Be=Q;break t}Q=Be(Q),q=Be(q)}Be=null}else Be=null;ae!==null&&sb(me,ne,ae,Be,!1),Ne!==null&&wt!==null&&sb(me,wt,Ne,Be,!0)}}e:{if(ne=te?Uo(te):window,ae=ne.nodeName&&ne.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ne.type==="file")var dt=xv;else if(yv(ne))if(wv)dt=I2;else{dt=L2;var Re=O2}else ae=ne.nodeName,!ae||ae.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&dh(te.elementType)&&(dt=xv):dt=P2;if(dt&&(dt=dt(s,te))){bv(me,dt,c,ue);break e}Re&&Re(s,ne,te),s==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&uh(ne,"number",ne.value)}switch(Re=te?Uo(te):window,s){case"focusin":(yv(Re)||Re.contentEditable==="true")&&(Sr=Re,Eh=te,Qo=null);break;case"focusout":Qo=Eh=Sr=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,jv(me,c,ue);break;case"selectionchange":if(z2)break;case"keydown":case"keyup":jv(me,c,ue)}var Qe;if(wh)e:{switch(s){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else wr?gv(s,c)&&(at="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(at="onCompositionStart");at&&(fv&&c.locale!=="ko"&&(wr||at!=="onCompositionStart"?at==="onCompositionEnd"&&wr&&(Qe=lv()):(Wi=ue,gh="value"in Wi?Wi.value:Wi.textContent,wr=!0)),Re=vu(te,at),0<Re.length&&(at=new dv(at,s,null,c,ue),me.push({event:at,listeners:Re}),Qe?at.data=Qe:(Qe=vv(c),Qe!==null&&(at.data=Qe)))),(Qe=j2?M2(s,c):R2(s,c))&&(at=vu(te,"onBeforeInput"),0<at.length&&(Re=new dv("onBeforeInput","beforeinput",null,c,ue),me.push({event:Re,listeners:at}),Re.data=Qe)),S_(me,s,te,c,ue)}tb(me,r)})}function Sl(s,r,c){return{instance:s,listener:r,currentTarget:c}}function vu(s,r){for(var c=r+"Capture",f=[];s!==null;){var v=s,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=Vo(s,c),v!=null&&f.unshift(Sl(s,v,b)),v=Vo(s,r),v!=null&&f.push(Sl(s,v,b))),s.tag===3)return f;s=s.return}return[]}function __(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function sb(s,r,c,f,v){for(var b=r._reactName,_=[];c!==null&&c!==f;){var D=c,V=D.alternate,te=D.stateNode;if(D=D.tag,V!==null&&V===f)break;D!==5&&D!==26&&D!==27||te===null||(V=te,v?(te=Vo(c,b),te!=null&&_.unshift(Sl(c,te,V))):v||(te=Vo(c,b),te!=null&&_.push(Sl(c,te,V)))),c=c.return}_.length!==0&&s.push({event:r,listeners:_})}var T_=/\r\n?/g,N_=/\u0000|\uFFFD/g;function ib(s){return(typeof s=="string"?s:""+s).replace(T_,`
`).replace(N_,"")}function ab(s,r){return r=ib(r),ib(s)===r}function xt(s,r,c,f,v,b){switch(c){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||yr(s,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&yr(s,""+f);break;case"className":wc(s,"class",f);break;case"tabIndex":wc(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":wc(s,c,f);break;case"style":av(s,f,b);break;case"data":if(r!=="object"){wc(s,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||c!=="href")){s.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=Ac(""+f),s.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(r!=="input"&&xt(s,r,"name",v.name,v,null),xt(s,r,"formEncType",v.formEncType,v,null),xt(s,r,"formMethod",v.formMethod,v,null),xt(s,r,"formTarget",v.formTarget,v,null)):(xt(s,r,"encType",v.encType,v,null),xt(s,r,"method",v.method,v,null),xt(s,r,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=Ac(""+f),s.setAttribute(c,f);break;case"onClick":f!=null&&(s.onclick=vi);break;case"onScroll":f!=null&&st("scroll",s);break;case"onScrollEnd":f!=null&&st("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}c=Ac(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""+f):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":f===!0?s.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,f):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(c,f):s.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(c):s.setAttribute(c,f);break;case"popover":st("beforetoggle",s),st("toggle",s),xc(s,"popover",f);break;case"xlinkActuate":gi(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":gi(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":gi(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":gi(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":gi(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":gi(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":gi(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":gi(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":gi(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":xc(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=n2.get(c)||c,xc(s,c,f))}}function Zf(s,r,c,f,v,b){switch(c){case"style":av(s,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"children":typeof f=="string"?yr(s,f):(typeof f=="number"||typeof f=="bigint")&&yr(s,""+f);break;case"onScroll":f!=null&&st("scroll",s);break;case"onScrollEnd":f!=null&&st("scrollend",s);break;case"onClick":f!=null&&(s.onclick=vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kg.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),r=c.slice(2,v?c.length-7:void 0),b=s[Vn]||null,b=b!=null?b[c]:null,typeof b=="function"&&s.removeEventListener(r,b,v),typeof f=="function")){typeof b!="function"&&b!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(r,f,v);break e}c in s?s[c]=f:f===!0?s.setAttribute(c,""):xc(s,c,f)}}}function Tn(s,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",s),st("load",s);var f=!1,v=!1,b;for(b in c)if(c.hasOwnProperty(b)){var _=c[b];if(_!=null)switch(b){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:xt(s,r,b,_,c,null)}}v&&xt(s,r,"srcSet",c.srcSet,c,null),f&&xt(s,r,"src",c.src,c,null);return;case"input":st("invalid",s);var D=b=_=v=null,V=null,te=null;for(f in c)if(c.hasOwnProperty(f)){var ue=c[f];if(ue!=null)switch(f){case"name":v=ue;break;case"type":_=ue;break;case"checked":V=ue;break;case"defaultChecked":te=ue;break;case"value":b=ue;break;case"defaultValue":D=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(n(137,r));break;default:xt(s,r,f,ue,c,null)}}tv(s,b,D,V,te,_,v,!1);return;case"select":st("invalid",s),f=_=b=null;for(v in c)if(c.hasOwnProperty(v)&&(D=c[v],D!=null))switch(v){case"value":b=D;break;case"defaultValue":_=D;break;case"multiple":f=D;default:xt(s,r,v,D,c,null)}r=b,c=_,s.multiple=!!f,r!=null?vr(s,!!f,r,!1):c!=null&&vr(s,!!f,c,!0);return;case"textarea":st("invalid",s),b=v=f=null;for(_ in c)if(c.hasOwnProperty(_)&&(D=c[_],D!=null))switch(_){case"value":f=D;break;case"defaultValue":v=D;break;case"children":b=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:xt(s,r,_,D,c,null)}sv(s,f,v,b);return;case"option":for(V in c)c.hasOwnProperty(V)&&(f=c[V],f!=null)&&(V==="selected"?s.selected=f&&typeof f!="function"&&typeof f!="symbol":xt(s,r,V,f,c,null));return;case"dialog":st("beforetoggle",s),st("toggle",s),st("cancel",s),st("close",s);break;case"iframe":case"object":st("load",s);break;case"video":case"audio":for(f=0;f<wl.length;f++)st(wl[f],s);break;case"image":st("error",s),st("load",s);break;case"details":st("toggle",s);break;case"embed":case"source":case"link":st("error",s),st("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in c)if(c.hasOwnProperty(te)&&(f=c[te],f!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:xt(s,r,te,f,c,null)}return;default:if(dh(r)){for(ue in c)c.hasOwnProperty(ue)&&(f=c[ue],f!==void 0&&Zf(s,r,ue,f,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(f=c[D],f!=null&&xt(s,r,D,f,c,null))}function j_(s,r,c,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,_=null,D=null,V=null,te=null,ue=null;for(ae in c){var me=c[ae];if(c.hasOwnProperty(ae)&&me!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":V=me;default:f.hasOwnProperty(ae)||xt(s,r,ae,null,f,me)}}for(var ne in f){var ae=f[ne];if(me=c[ne],f.hasOwnProperty(ne)&&(ae!=null||me!=null))switch(ne){case"type":b=ae;break;case"name":v=ae;break;case"checked":te=ae;break;case"defaultChecked":ue=ae;break;case"value":_=ae;break;case"defaultValue":D=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(n(137,r));break;default:ae!==me&&xt(s,r,ne,ae,f,me)}}ch(s,_,D,V,te,ue,b,v);return;case"select":ae=_=D=ne=null;for(b in c)if(V=c[b],c.hasOwnProperty(b)&&V!=null)switch(b){case"value":break;case"multiple":ae=V;default:f.hasOwnProperty(b)||xt(s,r,b,null,f,V)}for(v in f)if(b=f[v],V=c[v],f.hasOwnProperty(v)&&(b!=null||V!=null))switch(v){case"value":ne=b;break;case"defaultValue":D=b;break;case"multiple":_=b;default:b!==V&&xt(s,r,v,b,f,V)}r=D,c=_,f=ae,ne!=null?vr(s,!!c,ne,!1):!!f!=!!c&&(r!=null?vr(s,!!c,r,!0):vr(s,!!c,c?[]:"",!1));return;case"textarea":ae=ne=null;for(D in c)if(v=c[D],c.hasOwnProperty(D)&&v!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:xt(s,r,D,null,f,v)}for(_ in f)if(v=f[_],b=c[_],f.hasOwnProperty(_)&&(v!=null||b!=null))switch(_){case"value":ne=v;break;case"defaultValue":ae=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==b&&xt(s,r,_,v,f,b)}nv(s,ne,ae);return;case"option":for(var Ne in c)ne=c[Ne],c.hasOwnProperty(Ne)&&ne!=null&&!f.hasOwnProperty(Ne)&&(Ne==="selected"?s.selected=!1:xt(s,r,Ne,null,f,ne));for(V in f)ne=f[V],ae=c[V],f.hasOwnProperty(V)&&ne!==ae&&(ne!=null||ae!=null)&&(V==="selected"?s.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":xt(s,r,V,ne,f,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in c)ne=c[Be],c.hasOwnProperty(Be)&&ne!=null&&!f.hasOwnProperty(Be)&&xt(s,r,Be,null,f,ne);for(te in f)if(ne=f[te],ae=c[te],f.hasOwnProperty(te)&&ne!==ae&&(ne!=null||ae!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(n(137,r));break;default:xt(s,r,te,ne,f,ae)}return;default:if(dh(r)){for(var wt in c)ne=c[wt],c.hasOwnProperty(wt)&&ne!==void 0&&!f.hasOwnProperty(wt)&&Zf(s,r,wt,void 0,f,ne);for(ue in f)ne=f[ue],ae=c[ue],!f.hasOwnProperty(ue)||ne===ae||ne===void 0&&ae===void 0||Zf(s,r,ue,ne,f,ae);return}}for(var Q in c)ne=c[Q],c.hasOwnProperty(Q)&&ne!=null&&!f.hasOwnProperty(Q)&&xt(s,r,Q,null,f,ne);for(me in f)ne=f[me],ae=c[me],!f.hasOwnProperty(me)||ne===ae||ne==null&&ae==null||xt(s,r,me,ne,f,ae)}function rb(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M_(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var v=c[f],b=v.transferSize,_=v.initiatorType,D=v.duration;if(b&&D&&rb(_)){for(_=0,D=v.responseEnd,f+=1;f<c.length;f++){var V=c[f],te=V.startTime;if(te>D)break;var ue=V.transferSize,me=V.initiatorType;ue&&rb(me)&&(V=V.responseEnd,_+=ue*(V<D?1:(D-te)/(V-te)))}if(--f,r+=8*(b+_)/(v.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Jf=null,em=null;function yu(s){return s.nodeType===9?s:s.ownerDocument}function ob(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lb(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function tm(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var nm=null;function R_(){var s=window.event;return s&&s.type==="popstate"?s===nm?!1:(nm=s,!0):(nm=null,!1)}var cb=typeof setTimeout=="function"?setTimeout:void 0,D_=typeof clearTimeout=="function"?clearTimeout:void 0,ub=typeof Promise=="function"?Promise:void 0,k_=typeof queueMicrotask=="function"?queueMicrotask:typeof ub<"u"?function(s){return ub.resolve(null).then(s).catch(O_)}:cb;function O_(s){setTimeout(function(){throw s})}function ha(s){return s==="head"}function db(s,r){var c=r,f=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(f===0){s.removeChild(v),Wr(r);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Al(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,Al(c);for(var b=c.firstChild;b;){var _=b.nextSibling,D=b.nodeName;b[Ho]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=_}}else c==="body"&&Al(s.ownerDocument.body);c=v}while(c);Wr(r)}function hb(s,r){var c=s;s=0;do{var f=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=f}while(c)}function sm(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":sm(c),oh(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function L_(s,r,c,f){for(;s.nodeType===1;){var v=c;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[Ho])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=Cs(s.nextSibling),s===null)break}return null}function P_(s,r,c){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Cs(s.nextSibling),s===null))return null;return s}function fb(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Cs(s.nextSibling),s===null))return null;return s}function im(s){return s.data==="$?"||s.data==="$~"}function am(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function I_(s,r){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||c.readyState!=="loading")r();else{var f=function(){r(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function Cs(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var rm=null;function mb(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(r===0)return Cs(s.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}s=s.nextSibling}return null}function pb(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return s;r--}else c!=="/$"&&c!=="/&"||r++}s=s.previousSibling}return null}function gb(s,r,c){switch(r=yu(c),s){case"html":if(s=r.documentElement,!s)throw Error(n(452));return s;case"head":if(s=r.head,!s)throw Error(n(453));return s;case"body":if(s=r.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Al(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);oh(s)}var Es=new Map,vb=new Set;function bu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ki=U.d;U.d={f:B_,r:z_,D:F_,C:H_,L:U_,m:V_,X:G_,S:$_,M:Y_};function B_(){var s=ki.f(),r=uu();return s||r}function z_(s){var r=mr(s);r!==null&&r.tag===5&&r.type==="form"?Oy(r):ki.r(s)}var Yr=typeof document>"u"?null:document;function yb(s,r,c){var f=Yr;if(f&&typeof r=="string"&&r){var v=vs(r);v='link[rel="'+s+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),vb.has(v)||(vb.add(v),s={rel:s,crossOrigin:c,href:r},f.querySelector(v)===null&&(r=f.createElement("link"),Tn(r,"link",s),hn(r),f.head.appendChild(r)))}}function F_(s){ki.D(s),yb("dns-prefetch",s,null)}function H_(s,r){ki.C(s,r),yb("preconnect",s,r)}function U_(s,r,c){ki.L(s,r,c);var f=Yr;if(f&&s&&r){var v='link[rel="preload"][as="'+vs(r)+'"]';r==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+vs(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+vs(c.imageSizes)+'"]')):v+='[href="'+vs(s)+'"]';var b=v;switch(r){case"style":b=qr(s);break;case"script":b=Xr(s)}Es.has(b)||(s=g({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:s,as:r},c),Es.set(b,s),f.querySelector(v)!==null||r==="style"&&f.querySelector(Cl(b))||r==="script"&&f.querySelector(El(b))||(r=f.createElement("link"),Tn(r,"link",s),hn(r),f.head.appendChild(r)))}}function V_(s,r){ki.m(s,r);var c=Yr;if(c&&s){var f=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+vs(f)+'"][href="'+vs(s)+'"]',b=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Xr(s)}if(!Es.has(b)&&(s=g({rel:"modulepreload",href:s},r),Es.set(b,s),c.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(El(b)))return}f=c.createElement("link"),Tn(f,"link",s),hn(f),c.head.appendChild(f)}}}function $_(s,r,c){ki.S(s,r,c);var f=Yr;if(f&&s){var v=pr(f).hoistableStyles,b=qr(s);r=r||"default";var _=v.get(b);if(!_){var D={loading:0,preload:null};if(_=f.querySelector(Cl(b)))D.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":r},c),(c=Es.get(b))&&om(s,c);var V=_=f.createElement("link");hn(V),Tn(V,"link",s),V._p=new Promise(function(te,ue){V.onload=te,V.onerror=ue}),V.addEventListener("load",function(){D.loading|=1}),V.addEventListener("error",function(){D.loading|=2}),D.loading|=4,xu(_,r,f)}_={type:"stylesheet",instance:_,count:1,state:D},v.set(b,_)}}}function G_(s,r){ki.X(s,r);var c=Yr;if(c&&s){var f=pr(c).hoistableScripts,v=Xr(s),b=f.get(v);b||(b=c.querySelector(El(v)),b||(s=g({src:s,async:!0},r),(r=Es.get(v))&&lm(s,r),b=c.createElement("script"),hn(b),Tn(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function Y_(s,r){ki.M(s,r);var c=Yr;if(c&&s){var f=pr(c).hoistableScripts,v=Xr(s),b=f.get(v);b||(b=c.querySelector(El(v)),b||(s=g({src:s,async:!0,type:"module"},r),(r=Es.get(v))&&lm(s,r),b=c.createElement("script"),hn(b),Tn(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function bb(s,r,c,f){var v=(v=oe.current)?bu(v):null;if(!v)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=qr(c.href),c=pr(v).hoistableStyles,f=c.get(r),f||(f={type:"style",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=qr(c.href);var b=pr(v).hoistableStyles,_=b.get(s);if(_||(v=v.ownerDocument||v,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,_),(b=v.querySelector(Cl(s)))&&!b._p&&(_.instance=b,_.state.loading=5),Es.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Es.set(s,c),b||q_(v,s,c,_.state))),r&&f===null)throw Error(n(528,""));return _}if(r&&f!==null)throw Error(n(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Xr(c),c=pr(v).hoistableScripts,f=c.get(r),f||(f={type:"script",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function qr(s){return'href="'+vs(s)+'"'}function Cl(s){return'link[rel="stylesheet"]['+s+"]"}function xb(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function q_(s,r,c,f){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=s.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Tn(r,"link",c),hn(r),s.head.appendChild(r))}function Xr(s){return'[src="'+vs(s)+'"]'}function El(s){return"script[async]"+s}function wb(s,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var f=s.querySelector('style[data-href~="'+vs(c.href)+'"]');if(f)return r.instance=f,hn(f),f;var v=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),hn(f),Tn(f,"style",v),xu(f,c.precedence,s),r.instance=f;case"stylesheet":v=qr(c.href);var b=s.querySelector(Cl(v));if(b)return r.state.loading|=4,r.instance=b,hn(b),b;f=xb(c),(v=Es.get(v))&&om(f,v),b=(s.ownerDocument||s).createElement("link"),hn(b);var _=b;return _._p=new Promise(function(D,V){_.onload=D,_.onerror=V}),Tn(b,"link",f),r.state.loading|=4,xu(b,c.precedence,s),r.instance=b;case"script":return b=Xr(c.src),(v=s.querySelector(El(b)))?(r.instance=v,hn(v),v):(f=c,(v=Es.get(b))&&(f=g({},c),lm(f,v)),s=s.ownerDocument||s,v=s.createElement("script"),hn(v),Tn(v,"link",f),s.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,xu(f,c.precedence,s));return r.instance}function xu(s,r,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,b=v,_=0;_<f.length;_++){var D=f[_];if(D.dataset.precedence===r)b=D;else if(b!==v)break}b?b.parentNode.insertBefore(s,b.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(s,r.firstChild))}function om(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function lm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var wu=null;function Sb(s,r,c){if(wu===null){var f=new Map,v=wu=new Map;v.set(c,f)}else v=wu,f=v.get(c),f||(f=new Map,v.set(c,f));if(f.has(s))return f;for(f.set(s,null),c=c.getElementsByTagName(s),v=0;v<c.length;v++){var b=c[v];if(!(b[Ho]||b[An]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var _=b.getAttribute(r)||"";_=s+_;var D=f.get(_);D?D.push(b):f.set(_,[b])}}return f}function Ab(s,r,c){s=s.ownerDocument||s,s.head.insertBefore(c,r==="title"?s.querySelector("head > title"):null)}function X_(s,r,c){if(c===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(s=r.disabled,typeof r.precedence=="string"&&s==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Cb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function W_(s,r,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=qr(f.href),b=r.querySelector(Cl(v));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Su.bind(s),r.then(s,s)),c.state.loading|=4,c.instance=b,hn(b);return}b=r.ownerDocument||r,f=xb(f),(v=Es.get(v))&&om(f,v),b=b.createElement("link"),hn(b);var _=b;_._p=new Promise(function(D,V){_.onload=D,_.onerror=V}),Tn(b,"link",f),c.instance=b}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=Su.bind(s),r.addEventListener("load",c),r.addEventListener("error",c))}}var cm=0;function K_(s,r){return s.stylesheets&&s.count===0&&Cu(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var f=setTimeout(function(){if(s.stylesheets&&Cu(s,s.stylesheets),s.unsuspend){var b=s.unsuspend;s.unsuspend=null,b()}},6e4+r);0<s.imgBytes&&cm===0&&(cm=62500*M_());var v=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Cu(s,s.stylesheets),s.unsuspend)){var b=s.unsuspend;s.unsuspend=null,b()}},(s.imgBytes>cm?50:800)+r);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function Su(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cu(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Au=null;function Cu(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Au=new Map,r.forEach(Q_,s),Au=null,Su.call(s))}function Q_(s,r){if(!(r.state.loading&4)){var c=Au.get(s);if(c)var f=c.get(null);else{c=new Map,Au.set(s,c);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var _=v[b];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(c.set(_.dataset.precedence,_),f=_)}f&&c.set(null,f)}v=r.instance,_=v.getAttribute("data-precedence"),b=c.get(_)||f,b===f&&c.set(null,v),c.set(_,v),this.count++,f=Su.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),b?b.parentNode.insertBefore(v,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),r.state.loading|=4}}var _l={$$typeof:N,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function Z_(s,r,c,f,v,b,_,D,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.hiddenUpdates=gt(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Eb(s,r,c,f,v,b,_,D,V,te,ue,me){return s=new Z_(s,r,c,_,V,te,ue,me,D),r=1,b===!0&&(r|=24),b=ss(3,null,null,r),s.current=b,b.stateNode=s,r=Hh(),r.refCount++,s.pooledCache=r,r.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:r},Gh(b),s}function _b(s){return s?(s=Er,s):Er}function Tb(s,r,c,f,v,b){v=_b(v),f.context===null?f.context=v:f.pendingContext=v,f=ta(r),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=na(s,f,r),c!==null&&(Wn(c,s,r),il(c,s,r))}function Nb(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<r?c:r}}function um(s,r){Nb(s,r),(s=s.alternate)&&Nb(s,r)}function jb(s){if(s.tag===13||s.tag===31){var r=La(s,67108864);r!==null&&Wn(r,s,67108864),um(s,67108864)}}function Mb(s){if(s.tag===13||s.tag===31){var r=ls();r=ks(r);var c=La(s,r);c!==null&&Wn(c,s,r),um(s,r)}}var Eu=!0;function J_(s,r,c,f){var v=R.T;R.T=null;var b=U.p;try{U.p=2,dm(s,r,c,f)}finally{U.p=b,R.T=v}}function eT(s,r,c,f){var v=R.T;R.T=null;var b=U.p;try{U.p=8,dm(s,r,c,f)}finally{U.p=b,R.T=v}}function dm(s,r,c,f){if(Eu){var v=hm(f);if(v===null)Qf(s,r,f,_u,c),Db(s,f);else if(nT(v,s,r,c,f))f.stopPropagation();else if(Db(s,f),r&4&&-1<tT.indexOf(s)){for(;v!==null;){var b=mr(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var _=Un(b.pendingLanes);if(_!==0){var D=b;for(D.pendingLanes|=2,D.entangledLanes|=2;_;){var V=1<<31-Ee(_);D.entanglements[1]|=V,_&=~V}Zs(b),(mt&6)===0&&(lu=Mt()+500,xl(0))}}break;case 31:case 13:D=La(b,2),D!==null&&Wn(D,b,2),uu(),um(b,2)}if(b=hm(f),b===null&&Qf(s,r,f,_u,c),b===v)break;v=b}v!==null&&f.stopPropagation()}else Qf(s,r,f,null,c)}}function hm(s){return s=fh(s),fm(s)}var _u=null;function fm(s){if(_u=null,s=fr(s),s!==null){var r=o(s);if(r===null)s=null;else{var c=r.tag;if(c===13){if(s=l(r),s!==null)return s;s=null}else if(c===31){if(s=u(r),s!==null)return s;s=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return _u=s,null}function Rb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ps()){case Zt:return 2;case Rt:return 8;case Pn:case Jt:return 32;case Vt:return 268435456;default:return 32}default:return 32}}var mm=!1,fa=null,ma=null,pa=null,Tl=new Map,Nl=new Map,ga=[],tT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Db(s,r){switch(s){case"focusin":case"focusout":fa=null;break;case"dragenter":case"dragleave":ma=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":Tl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(r.pointerId)}}function jl(s,r,c,f,v,b){return s===null||s.nativeEvent!==b?(s={blockedOn:r,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[v]},r!==null&&(r=mr(r),r!==null&&jb(r)),s):(s.eventSystemFlags|=f,r=s.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),s)}function nT(s,r,c,f,v){switch(r){case"focusin":return fa=jl(fa,s,r,c,f,v),!0;case"dragenter":return ma=jl(ma,s,r,c,f,v),!0;case"mouseover":return pa=jl(pa,s,r,c,f,v),!0;case"pointerover":var b=v.pointerId;return Tl.set(b,jl(Tl.get(b)||null,s,r,c,f,v)),!0;case"gotpointercapture":return b=v.pointerId,Nl.set(b,jl(Nl.get(b)||null,s,r,c,f,v)),!0}return!1}function kb(s){var r=fr(s.target);if(r!==null){var c=o(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){s.blockedOn=r,qg(s.priority,function(){Mb(c)});return}}else if(r===31){if(r=u(c),r!==null){s.blockedOn=r,qg(s.priority,function(){Mb(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Tu(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var c=hm(s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);hh=f,c.target.dispatchEvent(f),hh=null}else return r=mr(c),r!==null&&jb(r),s.blockedOn=c,!1;r.shift()}return!0}function Ob(s,r,c){Tu(s)&&c.delete(r)}function sT(){mm=!1,fa!==null&&Tu(fa)&&(fa=null),ma!==null&&Tu(ma)&&(ma=null),pa!==null&&Tu(pa)&&(pa=null),Tl.forEach(Ob),Nl.forEach(Ob)}function Nu(s,r){s.blockedOn===r&&(s.blockedOn=null,mm||(mm=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,sT)))}var ju=null;function Lb(s){ju!==s&&(ju=s,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ju===s&&(ju=null);for(var r=0;r<s.length;r+=3){var c=s[r],f=s[r+1],v=s[r+2];if(typeof f!="function"){if(fm(f||c)===null)continue;break}var b=mr(c);b!==null&&(s.splice(r,3),r-=3,hf(b,{pending:!0,data:v,method:c.method,action:f},f,v))}}))}function Wr(s){function r(V){return Nu(V,s)}fa!==null&&Nu(fa,s),ma!==null&&Nu(ma,s),pa!==null&&Nu(pa,s),Tl.forEach(r),Nl.forEach(r);for(var c=0;c<ga.length;c++){var f=ga[c];f.blockedOn===s&&(f.blockedOn=null)}for(;0<ga.length&&(c=ga[0],c.blockedOn===null);)kb(c),c.blockedOn===null&&ga.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var v=c[f],b=c[f+1],_=v[Vn]||null;if(typeof b=="function")_||Lb(c);else if(_){var D=null;if(b&&b.hasAttribute("formAction")){if(v=b,_=b[Vn]||null)D=_.formAction;else if(fm(v)!==null)continue}else D=_.action;typeof D=="function"?c[f+1]=D:(c.splice(f,3),f-=3),Lb(c)}}}function Pb(){function s(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(_){return v=_})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function pm(s){this._internalRoot=s}Mu.prototype.render=pm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(n(409));var c=r.current,f=ls();Tb(c,f,s,r,null,null)},Mu.prototype.unmount=pm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Tb(s.current,2,null,s,null,null),uu(),r[hr]=null}};function Mu(s){this._internalRoot=s}Mu.prototype.unstable_scheduleHydration=function(s){if(s){var r=ah();s={blockedOn:null,target:s,priority:r};for(var c=0;c<ga.length&&r!==0&&r<ga[c].priority;c++);ga.splice(c,0,s),c===0&&kb(s)}};var Ib=e.version;if(Ib!=="19.2.3")throw Error(n(527,Ib,"19.2.3"));U.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=m(r),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var iT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{Ds=Ru.inject(iT),re=Ru}catch{}}return Rl.createRoot=function(s,r){if(!i(s))throw Error(n(299));var c=!1,f="",v=$y,b=Gy,_=Yy;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=Eb(s,1,!1,null,null,c,f,null,v,b,_,Pb),s[hr]=r.current,Kf(s),new pm(r)},Rl.hydrateRoot=function(s,r,c){if(!i(s))throw Error(n(299));var f=!1,v="",b=$y,_=Gy,D=Yy,V=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.formState!==void 0&&(V=c.formState)),r=Eb(s,1,!0,r,c??null,f,v,V,b,_,D,Pb),r.context=_b(null),c=r.current,f=ls(),f=ks(f),v=ta(f),v.callback=null,na(c,v,f),c=f,r.current.lanes=c,ot(r,c),Zs(r),s[hr]=r.current,Kf(s),new Mu(r)},Rl.version="19.2.3",Rl}var Wb;function mT(){if(Wb)return bm.exports;Wb=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),bm.exports=fT(),bm.exports}var pT=mT();function Se(a,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(a?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function gT(a,e){const t=x.createContext(e),n=o=>{const{children:l,...u}=o,h=x.useMemo(()=>u,Object.values(u));return d.jsx(t.Provider,{value:h,children:l})};n.displayName=a+"Provider";function i(o){const l=x.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${a}\``)}return[n,i]}function Ms(a,e=[]){let t=[];function n(o,l){const u=x.createContext(l),h=t.length;t=[...t,l];const m=g=>{const{scope:y,children:w,...A}=g,S=y?.[a]?.[h]||u,E=x.useMemo(()=>A,Object.values(A));return d.jsx(S.Provider,{value:E,children:w})};m.displayName=o+"Provider";function p(g,y){const w=y?.[a]?.[h]||u,A=x.useContext(w);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[m,p]}const i=()=>{const o=t.map(l=>x.createContext(l));return function(u){const h=u?.[a]||o;return x.useMemo(()=>({[`__scope${a}`]:{...u,[a]:h}}),[u,h])}};return i.scopeName=a,[n,vT(i,...e)]}function vT(...a){const e=a[0];if(a.length===1)return e;const t=()=>{const n=a.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const l=n.reduce((u,{useScope:h,scopeName:m})=>{const g=h(o)[`__scope${m}`];return{...u,...g}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function Kb(a,e){if(typeof a=="function")return a(e);a!=null&&(a.current=e)}function Yi(...a){return e=>{let t=!1;const n=a.map(i=>{const o=Kb(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<n.length;i++){const o=n[i];typeof o=="function"?o():Kb(a[i],null)}}}}function We(...a){return x.useCallback(Yi(...a),a)}function Qb(a){const e=yT(a),t=x.forwardRef((n,i)=>{const{children:o,...l}=n,u=x.Children.toArray(o),h=u.find(xT);if(h){const m=h.props.children,p=u.map(g=>g===h?x.Children.count(m)>1?x.Children.only(null):x.isValidElement(m)?m.props.children:null:g);return d.jsx(e,{...l,ref:i,children:x.isValidElement(m)?x.cloneElement(m,void 0,p):null})}return d.jsx(e,{...l,ref:i,children:o})});return t.displayName=`${a}.Slot`,t}function yT(a){const e=x.forwardRef((t,n)=>{const{children:i,...o}=t;if(x.isValidElement(i)){const l=ST(i),u=wT(o,i.props);return i.type!==x.Fragment&&(u.ref=n?Yi(n,l):l),x.cloneElement(i,u)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var bT=Symbol("radix.slottable");function xT(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===bT}function wT(a,e){const t={...e};for(const n in e){const i=a[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?t[n]=(...u)=>{const h=o(...u);return i(...u),h}:i&&(t[n]=i):n==="style"?t[n]={...i,...o}:n==="className"&&(t[n]=[i,o].filter(Boolean).join(" "))}return{...a,...t}}function ST(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}function Ed(a){const e=a+"CollectionProvider",[t,n]=Ms(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=S=>{const{scope:E,children:C}=S,T=ve.useRef(null),N=ve.useRef(new Map).current;return d.jsx(i,{scope:E,itemMap:N,collectionRef:T,children:C})};l.displayName=e;const u=a+"CollectionSlot",h=Qb(u),m=ve.forwardRef((S,E)=>{const{scope:C,children:T}=S,N=o(u,C),M=We(E,N.collectionRef);return d.jsx(h,{ref:M,children:T})});m.displayName=u;const p=a+"CollectionItemSlot",g="data-radix-collection-item",y=Qb(p),w=ve.forwardRef((S,E)=>{const{scope:C,children:T,...N}=S,M=ve.useRef(null),L=We(E,M),I=o(p,C);return ve.useEffect(()=>(I.itemMap.set(M,{ref:M,...N}),()=>{I.itemMap.delete(M)})),d.jsx(y,{[g]:"",ref:L,children:T})});w.displayName=p;function A(S){const E=o(a+"CollectionConsumer",S);return ve.useCallback(()=>{const T=E.collectionRef.current;if(!T)return[];const N=Array.from(T.querySelectorAll(`[${g}]`));return Array.from(E.itemMap.values()).sort((I,O)=>N.indexOf(I.ref.current)-N.indexOf(O.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:l,Slot:m,ItemSlot:w},A,n]}var Rn=globalThis?.document?x.useLayoutEffect:()=>{},AT=Lp[" useId ".trim().toString()]||(()=>{}),CT=0;function di(a){const[e,t]=x.useState(AT());return Rn(()=>{t(n=>n??String(CT++))},[a]),a||(e?`radix-${e}`:"")}var jo=Gw();const Yw=kp(jo);function ET(a){const e=_T(a),t=x.forwardRef((n,i)=>{const{children:o,...l}=n,u=x.Children.toArray(o),h=u.find(NT);if(h){const m=h.props.children,p=u.map(g=>g===h?x.Children.count(m)>1?x.Children.only(null):x.isValidElement(m)?m.props.children:null:g);return d.jsx(e,{...l,ref:i,children:x.isValidElement(m)?x.cloneElement(m,void 0,p):null})}return d.jsx(e,{...l,ref:i,children:o})});return t.displayName=`${a}.Slot`,t}function _T(a){const e=x.forwardRef((t,n)=>{const{children:i,...o}=t;if(x.isValidElement(i)){const l=MT(i),u=jT(o,i.props);return i.type!==x.Fragment&&(u.ref=n?Yi(n,l):l),x.cloneElement(i,u)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var TT=Symbol("radix.slottable");function NT(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===TT}function jT(a,e){const t={...e};for(const n in e){const i=a[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?t[n]=(...u)=>{const h=o(...u);return i(...u),h}:i&&(t[n]=i):n==="style"?t[n]={...i,...o}:n==="className"&&(t[n]=[i,o].filter(Boolean).join(" "))}return{...a,...t}}function MT(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}var RT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ze=RT.reduce((a,e)=>{const t=ET(`Primitive.${e}`),n=x.forwardRef((i,o)=>{const{asChild:l,...u}=i,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(h,{...u,ref:o})});return n.displayName=`Primitive.${e}`,{...a,[e]:n}},{});function qw(a,e){a&&jo.flushSync(()=>a.dispatchEvent(e))}function Mn(a){const e=x.useRef(a);return x.useEffect(()=>{e.current=a}),x.useMemo(()=>(...t)=>e.current?.(...t),[])}var DT=Lp[" useInsertionEffect ".trim().toString()]||Rn;function Ca({prop:a,defaultProp:e,onChange:t=()=>{},caller:n}){const[i,o,l]=kT({defaultProp:e,onChange:t}),u=a!==void 0,h=u?a:i;{const p=x.useRef(a!==void 0);x.useEffect(()=>{const g=p.current;g!==u&&console.warn(`${n} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,n])}const m=x.useCallback(p=>{if(u){const g=OT(p)?p(a):p;g!==a&&l.current?.(g)}else o(p)},[u,a,o,l]);return[h,m]}function kT({defaultProp:a,onChange:e}){const[t,n]=x.useState(a),i=x.useRef(t),o=x.useRef(e);return DT(()=>{o.current=e},[e]),x.useEffect(()=>{i.current!==t&&(o.current?.(t),i.current=t)},[t,i]),[t,n,o]}function OT(a){return typeof a=="function"}var LT=x.createContext(void 0);function Mo(a){const e=x.useContext(LT);return a||e||"ltr"}var Am="rovingFocusGroup.onEntryFocus",PT={bubbles:!1,cancelable:!0},oc="RovingFocusGroup",[ep,Xw,IT]=Ed(oc),[BT,_d]=Ms(oc,[IT]),[zT,FT]=BT(oc),Ww=x.forwardRef((a,e)=>d.jsx(ep.Provider,{scope:a.__scopeRovingFocusGroup,children:d.jsx(ep.Slot,{scope:a.__scopeRovingFocusGroup,children:d.jsx(HT,{...a,ref:e})})}));Ww.displayName=oc;var HT=x.forwardRef((a,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:i=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:m,preventScrollOnEntryFocus:p=!1,...g}=a,y=x.useRef(null),w=We(e,y),A=Mo(o),[S,E]=Ca({prop:l,defaultProp:u??null,onChange:h,caller:oc}),[C,T]=x.useState(!1),N=Mn(m),M=Xw(t),L=x.useRef(!1),[I,O]=x.useState(0);return x.useEffect(()=>{const P=y.current;if(P)return P.addEventListener(Am,N),()=>P.removeEventListener(Am,N)},[N]),d.jsx(zT,{scope:t,orientation:n,dir:A,loop:i,currentTabStopId:S,onItemFocus:x.useCallback(P=>E(P),[E]),onItemShiftTab:x.useCallback(()=>T(!0),[]),onFocusableItemAdd:x.useCallback(()=>O(P=>P+1),[]),onFocusableItemRemove:x.useCallback(()=>O(P=>P-1),[]),children:d.jsx(ze.div,{tabIndex:C||I===0?-1:0,"data-orientation":n,...g,ref:w,style:{outline:"none",...a.style},onMouseDown:Se(a.onMouseDown,()=>{L.current=!0}),onFocus:Se(a.onFocus,P=>{const F=!L.current;if(P.target===P.currentTarget&&F&&!C){const $=new CustomEvent(Am,PT);if(P.currentTarget.dispatchEvent($),!$.defaultPrevented){const W=M().filter(R=>R.focusable),ie=W.find(R=>R.active),le=W.find(R=>R.id===S),fe=[ie,le,...W].filter(Boolean).map(R=>R.ref.current);Zw(fe,p)}}L.current=!1}),onBlur:Se(a.onBlur,()=>T(!1))})})}),Kw="RovingFocusGroupItem",Qw=x.forwardRef((a,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:i=!1,tabStopId:o,children:l,...u}=a,h=di(),m=o||h,p=FT(Kw,t),g=p.currentTabStopId===m,y=Xw(t),{onFocusableItemAdd:w,onFocusableItemRemove:A,currentTabStopId:S}=p;return x.useEffect(()=>{if(n)return w(),()=>A()},[n,w,A]),d.jsx(ep.ItemSlot,{scope:t,id:m,focusable:n,active:i,children:d.jsx(ze.span,{tabIndex:g?0:-1,"data-orientation":p.orientation,...u,ref:e,onMouseDown:Se(a.onMouseDown,E=>{n?p.onItemFocus(m):E.preventDefault()}),onFocus:Se(a.onFocus,()=>p.onItemFocus(m)),onKeyDown:Se(a.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){p.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const C=$T(E,p.orientation,p.dir);if(C!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let N=y().filter(M=>M.focusable).map(M=>M.ref.current);if(C==="last")N.reverse();else if(C==="prev"||C==="next"){C==="prev"&&N.reverse();const M=N.indexOf(E.currentTarget);N=p.loop?GT(N,M+1):N.slice(M+1)}setTimeout(()=>Zw(N))}}),children:typeof l=="function"?l({isCurrentTabStop:g,hasTabStop:S!=null}):l})})});Qw.displayName=Kw;var UT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function VT(a,e){return e!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function $T(a,e,t){const n=VT(a.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return UT[n]}function Zw(a,e=!1){const t=document.activeElement;for(const n of a)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function GT(a,e){return a.map((t,n)=>a[(e+n)%a.length])}var Jw=Ww,e1=Qw;function YT(a,e){return x.useReducer((t,n)=>e[t][n]??t,a)}var ts=a=>{const{present:e,children:t}=a,n=qT(e),i=typeof t=="function"?t({present:n.isPresent}):x.Children.only(t),o=We(n.ref,XT(i));return typeof t=="function"||n.isPresent?x.cloneElement(i,{ref:o}):null};ts.displayName="Presence";function qT(a){const[e,t]=x.useState(),n=x.useRef(null),i=x.useRef(a),o=x.useRef("none"),l=a?"mounted":"unmounted",[u,h]=YT(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const m=Du(n.current);o.current=u==="mounted"?m:"none"},[u]),Rn(()=>{const m=n.current,p=i.current;if(p!==a){const y=o.current,w=Du(m);a?h("MOUNT"):w==="none"||m?.display==="none"?h("UNMOUNT"):h(p&&y!==w?"ANIMATION_OUT":"UNMOUNT"),i.current=a}},[a,h]),Rn(()=>{if(e){let m;const p=e.ownerDocument.defaultView??window,g=w=>{const S=Du(n.current).includes(CSS.escape(w.animationName));if(w.target===e&&S&&(h("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",m=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},y=w=>{w.target===e&&(o.current=Du(n.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:x.useCallback(m=>{n.current=m?getComputedStyle(m):null,t(m)},[])}}function Du(a){return a?.animationName||"none"}function XT(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}var Td="Tabs",[WT]=Ms(Td,[_d]),t1=_d(),[KT,Pp]=WT(Td),n1=x.forwardRef((a,e)=>{const{__scopeTabs:t,value:n,onValueChange:i,defaultValue:o,orientation:l="horizontal",dir:u,activationMode:h="automatic",...m}=a,p=Mo(u),[g,y]=Ca({prop:n,onChange:i,defaultProp:o??"",caller:Td});return d.jsx(KT,{scope:t,baseId:di(),value:g,onValueChange:y,orientation:l,dir:p,activationMode:h,children:d.jsx(ze.div,{dir:p,"data-orientation":l,...m,ref:e})})});n1.displayName=Td;var s1="TabsList",i1=x.forwardRef((a,e)=>{const{__scopeTabs:t,loop:n=!0,...i}=a,o=Pp(s1,t),l=t1(t);return d.jsx(Jw,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:n,children:d.jsx(ze.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:e})})});i1.displayName=s1;var a1="TabsTrigger",r1=x.forwardRef((a,e)=>{const{__scopeTabs:t,value:n,disabled:i=!1,...o}=a,l=Pp(a1,t),u=t1(t),h=c1(l.baseId,n),m=u1(l.baseId,n),p=n===l.value;return d.jsx(e1,{asChild:!0,...u,focusable:!i,active:p,children:d.jsx(ze.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":m,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...o,ref:e,onMouseDown:Se(a.onMouseDown,g=>{!i&&g.button===0&&g.ctrlKey===!1?l.onValueChange(n):g.preventDefault()}),onKeyDown:Se(a.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&l.onValueChange(n)}),onFocus:Se(a.onFocus,()=>{const g=l.activationMode!=="manual";!p&&!i&&g&&l.onValueChange(n)})})})});r1.displayName=a1;var o1="TabsContent",l1=x.forwardRef((a,e)=>{const{__scopeTabs:t,value:n,forceMount:i,children:o,...l}=a,u=Pp(o1,t),h=c1(u.baseId,n),m=u1(u.baseId,n),p=n===u.value,g=x.useRef(p);return x.useEffect(()=>{const y=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(y)},[]),d.jsx(ts,{present:i||p,children:({present:y})=>d.jsx(ze.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!y,id:m,tabIndex:0,...l,ref:e,style:{...a.style,animationDuration:g.current?"0s":void 0},children:y&&o})})});l1.displayName=o1;function c1(a,e){return`${a}-trigger-${e}`}function u1(a,e){return`${a}-content-${e}`}var QT=n1,ZT=i1,JT=r1,eN=l1;function d1(a){var e,t,n="";if(typeof a=="string"||typeof a=="number")n+=a;else if(typeof a=="object")if(Array.isArray(a)){var i=a.length;for(e=0;e<i;e++)a[e]&&(t=d1(a[e]))&&(n&&(n+=" "),n+=t)}else for(t in a)a[t]&&(n&&(n+=" "),n+=t);return n}function Ro(){for(var a,e,t=0,n="",i=arguments.length;t<i;t++)(a=arguments[t])&&(e=d1(a))&&(n&&(n+=" "),n+=e);return n}const tN=(a,e)=>{const t=new Array(a.length+e.length);for(let n=0;n<a.length;n++)t[n]=a[n];for(let n=0;n<e.length;n++)t[a.length+n]=e[n];return t},nN=(a,e)=>({classGroupId:a,validator:e}),h1=(a=new Map,e=null,t)=>({nextPart:a,validators:e,classGroupId:t}),od="-",Zb=[],sN="arbitrary..",iN=a=>{const e=rN(a),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=a;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return aN(l);const u=l.split(od),h=u[0]===""&&u.length>1?1:0;return f1(u,h,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const h=n[l],m=t[l];return h?m?tN(m,h):h:m||Zb}return t[l]||Zb}}},f1=(a,e,t)=>{if(a.length-e===0)return t.classGroupId;const i=a[e],o=t.nextPart.get(i);if(o){const m=f1(a,e+1,o);if(m)return m}const l=t.validators;if(l===null)return;const u=e===0?a.join(od):a.slice(e).join(od),h=l.length;for(let m=0;m<h;m++){const p=l[m];if(p.validator(u))return p.classGroupId}},aN=a=>a.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=a.slice(1,-1),t=e.indexOf(":"),n=e.slice(0,t);return n?sN+n:void 0})(),rN=a=>{const{theme:e,classGroups:t}=a;return oN(t,e)},oN=(a,e)=>{const t=h1();for(const n in a){const i=a[n];Ip(i,t,n,e)}return t},Ip=(a,e,t,n)=>{const i=a.length;for(let o=0;o<i;o++){const l=a[o];lN(l,e,t,n)}},lN=(a,e,t,n)=>{if(typeof a=="string"){cN(a,e,t);return}if(typeof a=="function"){uN(a,e,t,n);return}dN(a,e,t,n)},cN=(a,e,t)=>{const n=a===""?e:m1(e,a);n.classGroupId=t},uN=(a,e,t,n)=>{if(hN(a)){Ip(a(n),e,t,n);return}e.validators===null&&(e.validators=[]),e.validators.push(nN(t,a))},dN=(a,e,t,n)=>{const i=Object.entries(a),o=i.length;for(let l=0;l<o;l++){const[u,h]=i[l];Ip(h,m1(e,u),t,n)}},m1=(a,e)=>{let t=a;const n=e.split(od),i=n.length;for(let o=0;o<i;o++){const l=n[o];let u=t.nextPart.get(l);u||(u=h1(),t.nextPart.set(l,u)),t=u}return t},hN=a=>"isThemeGetter"in a&&a.isThemeGetter===!0,fN=a=>{if(a<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),n=Object.create(null);const i=(o,l)=>{t[o]=l,e++,e>a&&(e=0,n=t,t=Object.create(null))};return{get(o){let l=t[o];if(l!==void 0)return l;if((l=n[o])!==void 0)return i(o,l),l},set(o,l){o in t?t[o]=l:i(o,l)}}},tp="!",Jb=":",mN=[],ex=(a,e,t,n,i)=>({modifiers:a,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:n,isExternal:i}),pN=a=>{const{prefix:e,experimentalParseClassName:t}=a;let n=i=>{const o=[];let l=0,u=0,h=0,m;const p=i.length;for(let S=0;S<p;S++){const E=i[S];if(l===0&&u===0){if(E===Jb){o.push(i.slice(h,S)),h=S+1;continue}if(E==="/"){m=S;continue}}E==="["?l++:E==="]"?l--:E==="("?u++:E===")"&&u--}const g=o.length===0?i:i.slice(h);let y=g,w=!1;g.endsWith(tp)?(y=g.slice(0,-1),w=!0):g.startsWith(tp)&&(y=g.slice(1),w=!0);const A=m&&m>h?m-h:void 0;return ex(o,w,y,A)};if(e){const i=e+Jb,o=n;n=l=>l.startsWith(i)?o(l.slice(i.length)):ex(mN,!1,l,void 0,!0)}if(t){const i=n;n=o=>t({className:o,parseClassName:i})}return n},gN=a=>{const e=new Map;return a.orderSensitiveModifiers.forEach((t,n)=>{e.set(t,1e6+n)}),t=>{const n=[];let i=[];for(let o=0;o<t.length;o++){const l=t[o],u=l[0]==="[",h=e.has(l);u||h?(i.length>0&&(i.sort(),n.push(...i),i=[]),n.push(l)):i.push(l)}return i.length>0&&(i.sort(),n.push(...i)),n}},vN=a=>({cache:fN(a.cacheSize),parseClassName:pN(a),sortModifiers:gN(a),...iN(a)}),yN=/\s+/,bN=(a,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:o}=e,l=[],u=a.trim().split(yN);let h="";for(let m=u.length-1;m>=0;m-=1){const p=u[m],{isExternal:g,modifiers:y,hasImportantModifier:w,baseClassName:A,maybePostfixModifierPosition:S}=t(p);if(g){h=p+(h.length>0?" "+h:h);continue}let E=!!S,C=n(E?A.substring(0,S):A);if(!C){if(!E){h=p+(h.length>0?" "+h:h);continue}if(C=n(A),!C){h=p+(h.length>0?" "+h:h);continue}E=!1}const T=y.length===0?"":y.length===1?y[0]:o(y).join(":"),N=w?T+tp:T,M=N+C;if(l.indexOf(M)>-1)continue;l.push(M);const L=i(C,E);for(let I=0;I<L.length;++I){const O=L[I];l.push(N+O)}h=p+(h.length>0?" "+h:h)}return h},xN=(...a)=>{let e=0,t,n,i="";for(;e<a.length;)(t=a[e++])&&(n=p1(t))&&(i&&(i+=" "),i+=n);return i},p1=a=>{if(typeof a=="string")return a;let e,t="";for(let n=0;n<a.length;n++)a[n]&&(e=p1(a[n]))&&(t&&(t+=" "),t+=e);return t},wN=(a,...e)=>{let t,n,i,o;const l=h=>{const m=e.reduce((p,g)=>g(p),a());return t=vN(m),n=t.cache.get,i=t.cache.set,o=u,u(h)},u=h=>{const m=n(h);if(m)return m;const p=bN(h,t);return i(h,p),p};return o=l,(...h)=>o(xN(...h))},SN=[],ln=a=>{const e=t=>t[a]||SN;return e.isThemeGetter=!0,e},g1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,v1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,AN=/^\d+\/\d+$/,CN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,EN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_N=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,TN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kr=a=>AN.test(a),Je=a=>!!a&&!Number.isNaN(Number(a)),ya=a=>!!a&&Number.isInteger(Number(a)),Cm=a=>a.endsWith("%")&&Je(a.slice(0,-1)),Oi=a=>CN.test(a),jN=()=>!0,MN=a=>EN.test(a)&&!_N.test(a),y1=()=>!1,RN=a=>TN.test(a),DN=a=>NN.test(a),kN=a=>!je(a)&&!Me(a),ON=a=>Do(a,w1,y1),je=a=>g1.test(a),Xa=a=>Do(a,S1,MN),Em=a=>Do(a,zN,Je),tx=a=>Do(a,b1,y1),LN=a=>Do(a,x1,DN),ku=a=>Do(a,A1,RN),Me=a=>v1.test(a),Dl=a=>ko(a,S1),PN=a=>ko(a,FN),nx=a=>ko(a,b1),IN=a=>ko(a,w1),BN=a=>ko(a,x1),Ou=a=>ko(a,A1,!0),Do=(a,e,t)=>{const n=g1.exec(a);return n?n[1]?e(n[1]):t(n[2]):!1},ko=(a,e,t=!1)=>{const n=v1.exec(a);return n?n[1]?e(n[1]):t:!1},b1=a=>a==="position"||a==="percentage",x1=a=>a==="image"||a==="url",w1=a=>a==="length"||a==="size"||a==="bg-size",S1=a=>a==="length",zN=a=>a==="number",FN=a=>a==="family-name",A1=a=>a==="shadow",HN=()=>{const a=ln("color"),e=ln("font"),t=ln("text"),n=ln("font-weight"),i=ln("tracking"),o=ln("leading"),l=ln("breakpoint"),u=ln("container"),h=ln("spacing"),m=ln("radius"),p=ln("shadow"),g=ln("inset-shadow"),y=ln("text-shadow"),w=ln("drop-shadow"),A=ln("blur"),S=ln("perspective"),E=ln("aspect"),C=ln("ease"),T=ln("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...M(),Me,je],I=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],P=()=>[Me,je,h],F=()=>[Kr,"full","auto",...P()],$=()=>[ya,"none","subgrid",Me,je],W=()=>["auto",{span:["full",ya,Me,je]},ya,Me,je],ie=()=>[ya,"auto",Me,je],le=()=>["auto","min","max","fr",Me,je],G=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],fe=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...P()],U=()=>[Kr,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],H=()=>[a,Me,je],z=()=>[...M(),nx,tx,{position:[Me,je]}],ce=()=>["no-repeat",{repeat:["","x","y","space","round"]}],j=()=>["auto","cover","contain",IN,ON,{size:[Me,je]}],k=()=>[Cm,Dl,Xa],B=()=>["","none","full",m,Me,je],X=()=>["",Je,Dl,Xa],K=()=>["solid","dashed","dotted","double"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],J=()=>[Je,Cm,nx,tx],Y=()=>["","none",A,Me,je],se=()=>["none",Je,Me,je],pe=()=>["none",Je,Me,je],xe=()=>[Je,Me,je],ge=()=>[Kr,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Oi],breakpoint:[Oi],color:[jN],container:[Oi],"drop-shadow":[Oi],ease:["in","out","in-out"],font:[kN],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Oi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Oi],shadow:[Oi],spacing:["px",Je],text:[Oi],"text-shadow":[Oi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Kr,je,Me,E]}],container:["container"],columns:[{columns:[Je,je,Me,u]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[ya,"auto",Me,je]}],basis:[{basis:[Kr,"full","auto",u,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Je,Kr,"auto","initial","none",je]}],grow:[{grow:["",Je,Me,je]}],shrink:[{shrink:["",Je,Me,je]}],order:[{order:[ya,"first","last","none",Me,je]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":le()}],"auto-rows":[{"auto-rows":le()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...G(),"normal"]}],"justify-items":[{"justify-items":[...fe(),"normal"]}],"justify-self":[{"justify-self":["auto",...fe()]}],"align-content":[{content:["normal",...G()]}],"align-items":[{items:[...fe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...fe(),{baseline:["","last"]}]}],"place-content":[{"place-content":G()}],"place-items":[{"place-items":[...fe(),"baseline"]}],"place-self":[{"place-self":["auto",...fe()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[u,"screen",...U()]}],"min-w":[{"min-w":[u,"screen","none",...U()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",t,Dl,Xa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Me,Em]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cm,je]}],"font-family":[{font:[PN,je,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Me,je]}],"line-clamp":[{"line-clamp":[Je,"none",Me,Em]}],leading:[{leading:[o,...P()]}],"list-image":[{"list-image":["none",Me,je]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Me,je]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:[Je,"from-font","auto",Me,Xa]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[Je,"auto",Me,je]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me,je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me,je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:z()}],"bg-repeat":[{bg:ce()}],"bg-size":[{bg:j()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ya,Me,je],radial:["",Me,je],conic:[ya,Me,je]},BN,LN]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:k()}],"gradient-via-pos":[{via:k()}],"gradient-to-pos":[{to:k()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:B()}],"rounded-s":[{"rounded-s":B()}],"rounded-e":[{"rounded-e":B()}],"rounded-t":[{"rounded-t":B()}],"rounded-r":[{"rounded-r":B()}],"rounded-b":[{"rounded-b":B()}],"rounded-l":[{"rounded-l":B()}],"rounded-ss":[{"rounded-ss":B()}],"rounded-se":[{"rounded-se":B()}],"rounded-ee":[{"rounded-ee":B()}],"rounded-es":[{"rounded-es":B()}],"rounded-tl":[{"rounded-tl":B()}],"rounded-tr":[{"rounded-tr":B()}],"rounded-br":[{"rounded-br":B()}],"rounded-bl":[{"rounded-bl":B()}],"border-w":[{border:X()}],"border-w-x":[{"border-x":X()}],"border-w-y":[{"border-y":X()}],"border-w-s":[{"border-s":X()}],"border-w-e":[{"border-e":X()}],"border-w-t":[{"border-t":X()}],"border-w-r":[{"border-r":X()}],"border-w-b":[{"border-b":X()}],"border-w-l":[{"border-l":X()}],"divide-x":[{"divide-x":X()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":X()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...K(),"hidden","none"]}],"divide-style":[{divide:[...K(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...K(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Je,Me,je]}],"outline-w":[{outline:["",Je,Dl,Xa]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",p,Ou,ku]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",g,Ou,ku]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[Je,Xa]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":X()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",y,Ou,ku]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[Je,Me,je]}],"mix-blend":[{"mix-blend":[...oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Je]}],"mask-image-linear-from-pos":[{"mask-linear-from":J()}],"mask-image-linear-to-pos":[{"mask-linear-to":J()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":J()}],"mask-image-t-to-pos":[{"mask-t-to":J()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":J()}],"mask-image-r-to-pos":[{"mask-r-to":J()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":J()}],"mask-image-b-to-pos":[{"mask-b-to":J()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":J()}],"mask-image-l-to-pos":[{"mask-l-to":J()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":J()}],"mask-image-x-to-pos":[{"mask-x-to":J()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":J()}],"mask-image-y-to-pos":[{"mask-y-to":J()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[Me,je]}],"mask-image-radial-from-pos":[{"mask-radial-from":J()}],"mask-image-radial-to-pos":[{"mask-radial-to":J()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[Je]}],"mask-image-conic-from-pos":[{"mask-conic-from":J()}],"mask-image-conic-to-pos":[{"mask-conic-to":J()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:z()}],"mask-repeat":[{mask:ce()}],"mask-size":[{mask:j()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Me,je]}],filter:[{filter:["","none",Me,je]}],blur:[{blur:Y()}],brightness:[{brightness:[Je,Me,je]}],contrast:[{contrast:[Je,Me,je]}],"drop-shadow":[{"drop-shadow":["","none",w,Ou,ku]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",Je,Me,je]}],"hue-rotate":[{"hue-rotate":[Je,Me,je]}],invert:[{invert:["",Je,Me,je]}],saturate:[{saturate:[Je,Me,je]}],sepia:[{sepia:["",Je,Me,je]}],"backdrop-filter":[{"backdrop-filter":["","none",Me,je]}],"backdrop-blur":[{"backdrop-blur":Y()}],"backdrop-brightness":[{"backdrop-brightness":[Je,Me,je]}],"backdrop-contrast":[{"backdrop-contrast":[Je,Me,je]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Je,Me,je]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Je,Me,je]}],"backdrop-invert":[{"backdrop-invert":["",Je,Me,je]}],"backdrop-opacity":[{"backdrop-opacity":[Je,Me,je]}],"backdrop-saturate":[{"backdrop-saturate":[Je,Me,je]}],"backdrop-sepia":[{"backdrop-sepia":["",Je,Me,je]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Me,je]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Je,"initial",Me,je]}],ease:[{ease:["linear","initial",C,Me,je]}],delay:[{delay:[Je,Me,je]}],animate:[{animate:["none",T,Me,je]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Me,je]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:se()}],"rotate-x":[{"rotate-x":se()}],"rotate-y":[{"rotate-y":se()}],"rotate-z":[{"rotate-z":se()}],scale:[{scale:pe()}],"scale-x":[{"scale-x":pe()}],"scale-y":[{"scale-y":pe()}],"scale-z":[{"scale-z":pe()}],"scale-3d":["scale-3d"],skew:[{skew:xe()}],"skew-x":[{"skew-x":xe()}],"skew-y":[{"skew-y":xe()}],transform:[{transform:[Me,je,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ge()}],"translate-x":[{"translate-x":ge()}],"translate-y":[{"translate-y":ge()}],"translate-z":[{"translate-z":ge()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me,je]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me,je]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[Je,Dl,Xa,Em]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},UN=wN(HN);function Pe(...a){return UN(Ro(a))}function Bp({className:a,...e}){return d.jsx(QT,{"data-slot":"tabs",className:Pe("flex flex-col gap-2",a),...e})}function C1({className:a,...e}){return d.jsx(ZT,{"data-slot":"tabs-list",className:Pe("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...e})}function ro({className:a,...e}){return d.jsx(JT,{"data-slot":"tabs-trigger",className:Pe("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...e})}function Fs({className:a,...e}){return d.jsx(eN,{"data-slot":"tabs-content",className:Pe("flex-1 outline-none",a),...e})}const VN=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$N=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),sx=a=>{const e=$N(a);return e.charAt(0).toUpperCase()+e.slice(1)},E1=(...a)=>a.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),GN=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var YN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qN=x.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:l,...u},h)=>x.createElement("svg",{ref:h,...YN,width:e,height:e,stroke:a,strokeWidth:n?Number(t)*24/Number(e):t,className:E1("lucide",i),...!o&&!GN(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,p])=>x.createElement(m,p)),...Array.isArray(o)?o:[o]]));const Ce=(a,e)=>{const t=x.forwardRef(({className:n,...i},o)=>x.createElement(qN,{ref:o,iconNode:e,className:E1(`lucide-${VN(sx(a))}`,`lucide-${a}`,n),...i}));return t.displayName=sx(a),t};const XN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],np=Ce("arrow-left",XN);const WN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Oo=Ce("book-open",WN);const KN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],QN=Ce("calendar-days",KN);const ZN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yo=Ce("calendar",ZN);const JN=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ej=Ce("chart-pie",JN);const tj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],zp=Ce("check",tj);const nj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_1=Ce("chevron-down",nj);const sj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],bo=Ce("chevron-left",sj);const ij=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ql=Ce("chevron-right",ij);const aj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],rj=Ce("chevron-up",aj);const oj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],T1=Ce("circle-check-big",oj);const lj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],N1=Ce("circle-check",lj);const cj=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uj=Ce("circle-play",cj);const dj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],hj=Ce("clipboard-list",dj);const fj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ix=Ce("clock",fj);const mj=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],ax=Ce("cloud-rain",mj);const pj=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],gj=Ce("cloud-upload",pj);const vj=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],j1=Ce("code-xml",vj);const yj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Xl=Ce("download",yj);const bj=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],xo=Ce("ellipsis-vertical",bj);const xj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rx=Ce("eye",xj);const wj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],ox=Ce("file-code",wj);const Sj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Aj=Ce("file-down",Sj);const Cj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],wa=Ce("file-text",Cj);const Ej=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],M1=Ce("folder-kanban",Ej);const _j=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],R1=Ce("folder",_j);const Tj=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],Nj=Ce("grip-horizontal",Tj);const jj=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],Mj=Ce("highlighter",jj);const Rj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Dj=Ce("image",Rj);const kj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Oj=Ce("info",kj);const Lj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],lx=Ce("layout-grid",Lj);const Pj=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],D1=Ce("library",Pj);const Ij=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],_m=Ce("lightbulb",Ij);const Bj=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],zj=Ce("list-todo",Bj);const Fj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Hj=Ce("loader-circle",Fj);const Uj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],sp=Ce("maximize-2",Uj);const Vj=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],oo=Ce("message-square",Vj);const $j=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Gj=Ce("minimize-2",$j);const Yj=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],qj=Ce("monitor",Yj);const Xj=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],Wj=Ce("move",Xj);const Kj=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Tm=Ce("music",Kj);const Qj=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],Zj=Ce("newspaper",Qj);const Jj=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],eM=Ce("octagon-x",Jj);const tM=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],nM=Ce("pause",tM);const sM=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],cx=Ce("pen-line",sM);const iM=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$l=Ce("pen",iM);const aM=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],rM=Ce("pencil",aM);const oM=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],lM=Ce("play",oM);const cM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ii=Ce("plus",cM);const uM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dM=Ce("refresh-cw",uM);const hM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],fM=Ce("rotate-ccw",hM);const mM=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],pM=Ce("rotate-cw",mM);const gM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ux=Ce("save",gM);const vM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],k1=Ce("search",vM);const yM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fp=Ce("settings",yM);const bM=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],xM=Ce("sliders-horizontal",bM);const wM=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],SM=Ce("smartphone",wM);const AM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],O1=Ce("star",AM);const CM=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],EM=Ce("timer",CM);const _M=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Us=Ce("trash-2",_M);const TM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ju=Ce("triangle-alert",TM);const NM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Wl=Ce("upload",NM);const jM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],MM=Ce("user",jM);const RM=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],dx=Ce("volume-2",RM);const DM=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],hx=Ce("volume-x",DM);const kM=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],fx=Ce("waves",kM);const OM=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],mx=Ce("wind",OM);const LM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fn=Ce("x",LM);const PM=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],IM=Ce("zoom-in",PM);const BM=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],zM=Ce("zoom-out",BM);var FM=(a,e,t,n,i,o,l,u)=>{let h=document.documentElement,m=["light","dark"];function p(w){(Array.isArray(a)?a:[a]).forEach(A=>{let S=A==="class",E=S&&o?i.map(C=>o[C]||C):i;S?(h.classList.remove(...E),h.classList.add(o&&o[w]?o[w]:w)):h.setAttribute(A,w)}),g(w)}function g(w){u&&m.includes(w)&&(h.style.colorScheme=w)}function y(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)p(n);else try{let w=localStorage.getItem(e)||t,A=l&&w==="system"?y():w;p(A)}catch{}},HM=x.createContext(void 0),UM={setTheme:a=>{},themes:[]},VM=()=>{var a;return(a=x.useContext(HM))!=null?a:UM};x.memo(({forcedTheme:a,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:i,defaultTheme:o,value:l,themes:u,nonce:h,scriptProps:m})=>{let p=JSON.stringify([t,e,o,a,u,l,n,i]).slice(1,-1);return x.createElement("script",{...m,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${FM.toString()})(${p})`}})});function $M(a){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=a:t.appendChild(document.createTextNode(a))}const GM=a=>{switch(a){case"success":return XM;case"info":return KM;case"warning":return WM;case"error":return QM;default:return null}},YM=Array(12).fill(0),qM=({visible:a,className:e})=>ve.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":a},ve.createElement("div",{className:"sonner-spinner"},YM.map((t,n)=>ve.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),XM=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),WM=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),KM=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),QM=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ZM=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ve.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ve.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),JM=()=>{const[a,e]=ve.useState(document.hidden);return ve.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),a};let ip=1;class eR{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...i}=e,o=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:ip++,l=this.toasts.find(h=>h.id===o),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(h=>h.id===o?(this.publish({...h,...e,id:o,title:n}),{...h,...e,id:o,dismissible:u,title:n}):h):this.addToast({title:n,...i,dismissible:u,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o=n!==void 0,l;const u=i.then(async m=>{if(l=["resolve",m],ve.isValidElement(m))o=!1,this.create({id:n,type:"default",message:m});else if(nR(m)&&!m.ok){o=!1;const g=typeof t.error=="function"?await t.error(`HTTP error! status: ${m.status}`):t.error,y=typeof t.description=="function"?await t.description(`HTTP error! status: ${m.status}`):t.description,A=typeof g=="object"&&!ve.isValidElement(g)?g:{message:g};this.create({id:n,type:"error",description:y,...A})}else if(m instanceof Error){o=!1;const g=typeof t.error=="function"?await t.error(m):t.error,y=typeof t.description=="function"?await t.description(m):t.description,A=typeof g=="object"&&!ve.isValidElement(g)?g:{message:g};this.create({id:n,type:"error",description:y,...A})}else if(t.success!==void 0){o=!1;const g=typeof t.success=="function"?await t.success(m):t.success,y=typeof t.description=="function"?await t.description(m):t.description,A=typeof g=="object"&&!ve.isValidElement(g)?g:{message:g};this.create({id:n,type:"success",description:y,...A})}}).catch(async m=>{if(l=["reject",m],t.error!==void 0){o=!1;const p=typeof t.error=="function"?await t.error(m):t.error,g=typeof t.description=="function"?await t.description(m):t.description,w=typeof p=="object"&&!ve.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:g,...w})}}).finally(()=>{o&&(this.dismiss(n),n=void 0),t.finally==null||t.finally.call(t)}),h=()=>new Promise((m,p)=>u.then(()=>l[0]==="reject"?p(l[1]):m(l[1])).catch(p));return typeof n!="string"&&typeof n!="number"?{unwrap:h}:Object.assign(n,{unwrap:h})},this.custom=(e,t)=>{const n=t?.id||ip++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Zn=new eR,tR=(a,e)=>{const t=e?.id||ip++;return Zn.addToast({title:a,...e,id:t}),t},nR=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",sR=tR,iR=()=>Zn.toasts,aR=()=>Zn.getActiveToasts(),we=Object.assign(sR,{success:Zn.success,info:Zn.info,warning:Zn.warning,error:Zn.error,custom:Zn.custom,message:Zn.message,promise:Zn.promise,dismiss:Zn.dismiss,loading:Zn.loading},{getHistory:iR,getToasts:aR});$M("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Lu(a){return a.label!==void 0}const rR=3,oR="24px",lR="16px",px=4e3,cR=356,uR=14,dR=45,hR=200;function ti(...a){return a.filter(Boolean).join(" ")}function fR(a){const[e,t]=a.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}const mR=a=>{var e,t,n,i,o,l,u,h,m;const{invert:p,toast:g,unstyled:y,interacting:w,setHeights:A,visibleToasts:S,heights:E,index:C,toasts:T,expanded:N,removeToast:M,defaultRichColors:L,closeButton:I,style:O,cancelButtonStyle:P,actionButtonStyle:F,className:$="",descriptionClassName:W="",duration:ie,position:le,gap:G,expandByDefault:fe,classNames:R,icons:U,closeButtonAriaLabel:H="Close toast"}=a,[z,ce]=ve.useState(null),[j,k]=ve.useState(null),[B,X]=ve.useState(!1),[K,oe]=ve.useState(!1),[J,Y]=ve.useState(!1),[se,pe]=ve.useState(!1),[xe,ge]=ve.useState(!1),[Ve,Oe]=ve.useState(0),[Z,Ae]=ve.useState(0),Ge=ve.useRef(g.duration||ie||px),$e=ve.useRef(null),ut=ve.useRef(null),rn=C===0,Tt=C+1<=S,At=g.type,Ut=g.dismissible!==!1,Mt=g.className||"",ps=g.descriptionClassName||"",Zt=ve.useMemo(()=>E.findIndex(Fe=>Fe.toastId===g.id)||0,[E,g.id]),Rt=ve.useMemo(()=>{var Fe;return(Fe=g.closeButton)!=null?Fe:I},[g.closeButton,I]),Pn=ve.useMemo(()=>g.duration||ie||px,[g.duration,ie]),Jt=ve.useRef(0),Vt=ve.useRef(0),Sn=ve.useRef(0),cn=ve.useRef(null),[Ds,re]=le.split("-"),ye=ve.useMemo(()=>E.reduce((Fe,be,Ie)=>Ie>=Zt?Fe:Fe+be.height,0),[E,Zt]),Ee=JM(),et=g.invert||p,pt=At==="loading";Vt.current=ve.useMemo(()=>Zt*G+ye,[Zt,ye]),ve.useEffect(()=>{Ge.current=Pn},[Pn]),ve.useEffect(()=>{X(!0)},[]),ve.useEffect(()=>{const Fe=ut.current;if(Fe){const be=Fe.getBoundingClientRect().height;return Ae(be),A(Ie=>[{toastId:g.id,height:be,position:g.position},...Ie]),()=>A(Ie=>Ie.filter(He=>He.toastId!==g.id))}},[A,g.id]),ve.useLayoutEffect(()=>{if(!B)return;const Fe=ut.current,be=Fe.style.height;Fe.style.height="auto";const Ie=Fe.getBoundingClientRect().height;Fe.style.height=be,Ae(Ie),A(He=>He.find(ot=>ot.toastId===g.id)?He.map(ot=>ot.toastId===g.id?{...ot,height:Ie}:ot):[{toastId:g.id,height:Ie,position:g.position},...He])},[B,g.title,g.description,A,g.id,g.jsx,g.action,g.cancel]);const tt=ve.useCallback(()=>{oe(!0),Oe(Vt.current),A(Fe=>Fe.filter(be=>be.toastId!==g.id)),setTimeout(()=>{M(g)},hR)},[g,M,A,Vt]);ve.useEffect(()=>{if(g.promise&&At==="loading"||g.duration===1/0||g.type==="loading")return;let Fe;return N||w||Ee?(()=>{if(Sn.current<Jt.current){const He=new Date().getTime()-Jt.current;Ge.current=Ge.current-He}Sn.current=new Date().getTime()})():Ge.current!==1/0&&(Jt.current=new Date().getTime(),Fe=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),tt()},Ge.current)),()=>clearTimeout(Fe)},[N,w,g,At,Ee,tt]),ve.useEffect(()=>{g.delete&&(tt(),g.onDismiss==null||g.onDismiss.call(g,g))},[tt,g.delete]);function Dt(){var Fe;if(U?.loading){var be;return ve.createElement("div",{className:ti(R?.loader,g==null||(be=g.classNames)==null?void 0:be.loader,"sonner-loader"),"data-visible":At==="loading"},U.loading)}return ve.createElement(qM,{className:ti(R?.loader,g==null||(Fe=g.classNames)==null?void 0:Fe.loader),visible:At==="loading"})}const kt=g.icon||U?.[At]||GM(At);var un,Un;return ve.createElement("li",{tabIndex:0,ref:ut,className:ti($,Mt,R?.toast,g==null||(e=g.classNames)==null?void 0:e.toast,R?.default,R?.[At],g==null||(t=g.classNames)==null?void 0:t[At]),"data-sonner-toast":"","data-rich-colors":(un=g.richColors)!=null?un:L,"data-styled":!(g.jsx||g.unstyled||y),"data-mounted":B,"data-promise":!!g.promise,"data-swiped":xe,"data-removed":K,"data-visible":Tt,"data-y-position":Ds,"data-x-position":re,"data-index":C,"data-front":rn,"data-swiping":J,"data-dismissible":Ut,"data-type":At,"data-invert":et,"data-swipe-out":se,"data-swipe-direction":j,"data-expanded":!!(N||fe&&B),"data-testid":g.testId,style:{"--index":C,"--toasts-before":C,"--z-index":T.length-C,"--offset":`${K?Ve:Vt.current}px`,"--initial-height":fe?"auto":`${Z}px`,...O,...g.style},onDragEnd:()=>{Y(!1),ce(null),cn.current=null},onPointerDown:Fe=>{Fe.button!==2&&(pt||!Ut||($e.current=new Date,Oe(Vt.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(Y(!0),cn.current={x:Fe.clientX,y:Fe.clientY})))},onPointerUp:()=>{var Fe,be,Ie;if(se||!Ut)return;cn.current=null;const He=Number(((Fe=ut.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),gt=Number(((be=ut.current)==null?void 0:be.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ot=new Date().getTime()-((Ie=$e.current)==null?void 0:Ie.getTime()),Dn=z==="x"?He:gt,Xs=Math.abs(Dn)/ot;if(Math.abs(Dn)>=dR||Xs>.11){Oe(Vt.current),g.onDismiss==null||g.onDismiss.call(g,g),k(z==="x"?He>0?"right":"left":gt>0?"down":"up"),tt(),pe(!0);return}else{var dn,$t;(dn=ut.current)==null||dn.style.setProperty("--swipe-amount-x","0px"),($t=ut.current)==null||$t.style.setProperty("--swipe-amount-y","0px")}ge(!1),Y(!1),ce(null)},onPointerMove:Fe=>{var be,Ie,He;if(!cn.current||!Ut||((be=window.getSelection())==null?void 0:be.toString().length)>0)return;const ot=Fe.clientY-cn.current.y,Dn=Fe.clientX-cn.current.x;var Xs;const dn=(Xs=a.swipeDirections)!=null?Xs:fR(le);!z&&(Math.abs(Dn)>1||Math.abs(ot)>1)&&ce(Math.abs(Dn)>Math.abs(ot)?"x":"y");let $t={x:0,y:0};const ks=Os=>1/(1.5+Math.abs(Os)/20);if(z==="y"){if(dn.includes("top")||dn.includes("bottom"))if(dn.includes("top")&&ot<0||dn.includes("bottom")&&ot>0)$t.y=ot;else{const Os=ot*ks(ot);$t.y=Math.abs(Os)<Math.abs(ot)?Os:ot}}else if(z==="x"&&(dn.includes("left")||dn.includes("right")))if(dn.includes("left")&&Dn<0||dn.includes("right")&&Dn>0)$t.x=Dn;else{const Os=Dn*ks(Dn);$t.x=Math.abs(Os)<Math.abs(Dn)?Os:Dn}(Math.abs($t.x)>0||Math.abs($t.y)>0)&&ge(!0),(Ie=ut.current)==null||Ie.style.setProperty("--swipe-amount-x",`${$t.x}px`),(He=ut.current)==null||He.style.setProperty("--swipe-amount-y",`${$t.y}px`)}},Rt&&!g.jsx&&At!=="loading"?ve.createElement("button",{"aria-label":H,"data-disabled":pt,"data-close-button":!0,onClick:pt||!Ut?()=>{}:()=>{tt(),g.onDismiss==null||g.onDismiss.call(g,g)},className:ti(R?.closeButton,g==null||(n=g.classNames)==null?void 0:n.closeButton)},(Un=U?.close)!=null?Un:ZM):null,(At||g.icon||g.promise)&&g.icon!==null&&(U?.[At]!==null||g.icon)?ve.createElement("div",{"data-icon":"",className:ti(R?.icon,g==null||(i=g.classNames)==null?void 0:i.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Dt():null,g.type!=="loading"?kt:null):null,ve.createElement("div",{"data-content":"",className:ti(R?.content,g==null||(o=g.classNames)==null?void 0:o.content)},ve.createElement("div",{"data-title":"",className:ti(R?.title,g==null||(l=g.classNames)==null?void 0:l.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?ve.createElement("div",{"data-description":"",className:ti(W,ps,R?.description,g==null||(u=g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),ve.isValidElement(g.cancel)?g.cancel:g.cancel&&Lu(g.cancel)?ve.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||P,onClick:Fe=>{Lu(g.cancel)&&Ut&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,Fe),tt())},className:ti(R?.cancelButton,g==null||(h=g.classNames)==null?void 0:h.cancelButton)},g.cancel.label):null,ve.isValidElement(g.action)?g.action:g.action&&Lu(g.action)?ve.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||F,onClick:Fe=>{Lu(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,Fe),!Fe.defaultPrevented&&tt())},className:ti(R?.actionButton,g==null||(m=g.classNames)==null?void 0:m.actionButton)},g.action.label):null)};function gx(){if(typeof window>"u"||typeof document>"u")return"ltr";const a=document.documentElement.getAttribute("dir");return a==="auto"||!a?window.getComputedStyle(document.documentElement).direction:a}function pR(a,e){const t={};return[a,e].forEach((n,i)=>{const o=i===1,l=o?"--mobile-offset":"--offset",u=o?lR:oR;function h(m){["top","right","bottom","left"].forEach(p=>{t[`${l}-${p}`]=typeof m=="number"?`${m}px`:m})}typeof n=="number"||typeof n=="string"?h(n):typeof n=="object"?["top","right","bottom","left"].forEach(m=>{n[m]===void 0?t[`${l}-${m}`]=u:t[`${l}-${m}`]=typeof n[m]=="number"?`${n[m]}px`:n[m]}):h(u)}),t}const gR=ve.forwardRef(function(e,t){const{id:n,invert:i,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:h,className:m,offset:p,mobileOffset:g,theme:y="light",richColors:w,duration:A,style:S,visibleToasts:E=rR,toastOptions:C,dir:T=gx(),gap:N=uR,icons:M,containerAriaLabel:L="Notifications"}=e,[I,O]=ve.useState([]),P=ve.useMemo(()=>n?I.filter(B=>B.toasterId===n):I.filter(B=>!B.toasterId),[I,n]),F=ve.useMemo(()=>Array.from(new Set([o].concat(P.filter(B=>B.position).map(B=>B.position)))),[P,o]),[$,W]=ve.useState([]),[ie,le]=ve.useState(!1),[G,fe]=ve.useState(!1),[R,U]=ve.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=ve.useRef(null),z=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),ce=ve.useRef(null),j=ve.useRef(!1),k=ve.useCallback(B=>{O(X=>{var K;return(K=X.find(oe=>oe.id===B.id))!=null&&K.delete||Zn.dismiss(B.id),X.filter(({id:oe})=>oe!==B.id)})},[]);return ve.useEffect(()=>Zn.subscribe(B=>{if(B.dismiss){requestAnimationFrame(()=>{O(X=>X.map(K=>K.id===B.id?{...K,delete:!0}:K))});return}setTimeout(()=>{Yw.flushSync(()=>{O(X=>{const K=X.findIndex(oe=>oe.id===B.id);return K!==-1?[...X.slice(0,K),{...X[K],...B},...X.slice(K+1)]:[B,...X]})})})}),[I]),ve.useEffect(()=>{if(y!=="system"){U(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;const B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:X})=>{U(X?"dark":"light")})}catch{B.addListener(({matches:K})=>{try{U(K?"dark":"light")}catch(oe){console.error(oe)}})}},[y]),ve.useEffect(()=>{I.length<=1&&le(!1)},[I]),ve.useEffect(()=>{const B=X=>{var K;if(l.every(Y=>X[Y]||X.code===Y)){var J;le(!0),(J=H.current)==null||J.focus()}X.code==="Escape"&&(document.activeElement===H.current||(K=H.current)!=null&&K.contains(document.activeElement))&&le(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[l]),ve.useEffect(()=>{if(H.current)return()=>{ce.current&&(ce.current.focus({preventScroll:!0}),ce.current=null,j.current=!1)}},[H.current]),ve.createElement("section",{ref:t,"aria-label":`${L} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((B,X)=>{var K;const[oe,J]=B.split("-");return P.length?ve.createElement("ol",{key:B,dir:T==="auto"?gx():T,tabIndex:-1,ref:H,className:m,"data-sonner-toaster":!0,"data-sonner-theme":R,"data-y-position":oe,"data-x-position":J,style:{"--front-toast-height":`${((K=$[0])==null?void 0:K.height)||0}px`,"--width":`${cR}px`,"--gap":`${N}px`,...S,...pR(p,g)},onBlur:Y=>{j.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(j.current=!1,ce.current&&(ce.current.focus({preventScroll:!0}),ce.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||j.current||(j.current=!0,ce.current=Y.relatedTarget)},onMouseEnter:()=>le(!0),onMouseMove:()=>le(!0),onMouseLeave:()=>{G||le(!1)},onDragEnd:()=>le(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||fe(!0)},onPointerUp:()=>fe(!1)},P.filter(Y=>!Y.position&&X===0||Y.position===B).map((Y,se)=>{var pe,xe;return ve.createElement(mR,{key:Y.id,icons:M,index:se,toast:Y,defaultRichColors:w,duration:(pe=C?.duration)!=null?pe:A,className:C?.className,descriptionClassName:C?.descriptionClassName,invert:i,visibleToasts:E,closeButton:(xe=C?.closeButton)!=null?xe:h,interacting:G,position:B,style:C?.style,unstyled:C?.unstyled,classNames:C?.classNames,cancelButtonStyle:C?.cancelButtonStyle,actionButtonStyle:C?.actionButtonStyle,closeButtonAriaLabel:C?.closeButtonAriaLabel,removeToast:k,toasts:P.filter(ge=>ge.position==Y.position),heights:$.filter(ge=>ge.position==Y.position),setHeights:W,expandByDefault:u,gap:N,expanded:ie,swipeDirections:e.swipeDirections})})):null}))}),vR=({...a})=>{const{theme:e="system"}=VM();return d.jsx(gR,{theme:e,className:"toaster group",icons:{success:d.jsx(N1,{className:"size-4"}),info:d.jsx(Oj,{className:"size-4"}),warning:d.jsx(Ju,{className:"size-4"}),error:d.jsx(eM,{className:"size-4"}),loading:d.jsx(Hj,{className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...a})},Nm=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#d946ef","#f43f5e","#6b7280"],yR=[{id:"cat-entertainment",name:"",color:"#f43f5e"},{id:"cat-tech",name:"",color:"#3b82f6"},{id:"cat-academic",name:"",color:"#8b5cf6"},{id:"cat-literature",name:"",color:"#10b981"},{id:"cat-business",name:"",color:"#f59e0b"},{id:"cat-other",name:"",color:"#6b7280"}];function vx(a,e){const t=e.split(".").pop()?.toLowerCase();return a==="application/pdf"||t==="pdf"?"pdf":a.startsWith("text/")||t==="txt"||t==="md"||t==="json"||t==="xml"||t==="csv"?"txt":t==="epub"||a==="application/epub+zip"?"epub":a.startsWith("image/")||["jpg","jpeg","png","gif","webp","bmp","svg"].includes(t||"")?"image":["doc","docx","odt","rtf"].includes(t||"")||a.includes("word")||a==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"?"doc":["ppt","pptx","odp"].includes(t||"")||a.includes("powerpoint")||a==="application/vnd.openxmlformats-officedocument.presentationml.presentation"?"ppt":["zip","7z","rar","tar","gz","bz2"].includes(t||"")||a.includes("zip")||a.includes("compressed")||a==="application/x-7z-compressed"||a==="application/x-rar-compressed"?"archive":a.startsWith("audio/")||["mp3","wav","ogg","flac","aac","m4a"].includes(t||"")?"audio":a.startsWith("video/")||["mp4","avi","mkv","mov","wmv"].includes(t||"")?"video":"other"}function bR(a){switch(a){case"pdf":return"";case"txt":return"";case"epub":return"";case"image":return"";case"doc":return"";case"ppt":return"";case"archive":return"";case"audio":return"";case"video":return"";default:return""}}function xR(a){switch(a){case"pdf":return"PDF";case"txt":return"";case"epub":return"EPUB";case"image":return"";case"doc":return"";case"ppt":return"";case"archive":return"";case"audio":return"";case"video":return"";default:return""}}function wR(a){return["pdf","txt","epub","image"].includes(a)}const yx="jian-v1.1.0",ii=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,SR=()=>{let a=localStorage.getItem("knowledge-library-device-id");return a||(a=ii(),localStorage.setItem("knowledge-library-device-id",a)),a},L1=()=>Math.random().toString(36).substring(2,8).toUpperCase(),ap={lastSyncAt:null,syncStatus:"idle",deviceId:SR(),syncCode:L1()},jm={books:[],categories:yR,pdfAnnotations:[],projects:[],notes:[],sync:ap},AR="KnowledgeLibraryDB",CR=2,Ea="files";async function Hp(){return new Promise((a,e)=>{const t=indexedDB.open(AR,CR);t.onerror=()=>e(t.error),t.onsuccess=()=>a(t.result),t.onupgradeneeded=n=>{const i=n.target.result;i.objectStoreNames.contains(Ea)||i.createObjectStore(Ea,{keyPath:"id"})}})}async function bx(a){const e=await Hp();return new Promise((t,n)=>{const l=e.transaction([Ea],"readwrite").objectStore(Ea).put(a);l.onsuccess=()=>t(),l.onerror=()=>n(l.error)})}async function xx(a){const e=await Hp();return new Promise((t,n)=>{const l=e.transaction([Ea],"readonly").objectStore(Ea).get(a);l.onsuccess=()=>t(l.result||null),l.onerror=()=>n(l.error)})}async function Mm(a){const e=await Hp();return new Promise((t,n)=>{const l=e.transaction([Ea],"readwrite").objectStore(Ea).delete(a);l.onsuccess=()=>t(),l.onerror=()=>n(l.error)})}function ER(){const[a,e]=x.useState(jm),[t,n]=x.useState(!1);x.useEffect(()=>{try{const j=localStorage.getItem(yx);if(j){const k=JSON.parse(j);e({...jm,...k,sync:{...ap,...k.sync}})}}catch(j){console.error("Failed to load data:",j)}n(!0)},[]),x.useEffect(()=>{t&&localStorage.setItem(yx,JSON.stringify(a))},[a,t]);const i=x.useCallback(j=>{const k={...j,id:ii(),annotations:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(B=>({...B,books:[k,...B.books]})),k},[]),o=x.useCallback((j,k)=>{e(B=>({...B,books:B.books.map(X=>X.id===j?{...X,...k,updatedAt:new Date().toISOString()}:X)}))},[]),l=x.useCallback(async j=>{const k=a.books.find(B=>B.id===j);k?.fileId&&await Mm(k.fileId),e(B=>({...B,books:B.books.filter(X=>X.id!==j),pdfAnnotations:B.pdfAnnotations.filter(X=>X.bookId!==j)}))},[a.books]),u=x.useCallback(j=>a.books.find(k=>k.id===j),[a.books]),h=x.useCallback(async(j,k)=>{const B=await k.arrayBuffer(),X=ii(),K=vx(k.type,k.name),oe={id:X,name:k.name,type:k.type,fileType:K,size:k.size,data:B,createdAt:new Date().toISOString()};return await bx(oe),o(j,{fileId:X,fileType:K,fileName:k.name}),oe},[o]),m=x.useCallback(async j=>await xx(j),[]),p=x.useCallback(async j=>{const k=u(j);k?.fileId&&(await Mm(k.fileId),o(j,{fileId:void 0,fileType:void 0,fileName:void 0}))},[u,o]),g=x.useCallback(j=>{const k={...j,id:ii(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(B=>({...B,pdfAnnotations:[k,...B.pdfAnnotations]})),k},[]),y=x.useCallback((j,k)=>{e(B=>({...B,pdfAnnotations:B.pdfAnnotations.map(X=>X.id===j?{...X,content:k,updatedAt:new Date().toISOString()}:X)}))},[]),w=x.useCallback(j=>{e(k=>({...k,pdfAnnotations:k.pdfAnnotations.filter(B=>B.id!==j)}))},[]),A=x.useCallback(j=>a.pdfAnnotations.filter(k=>k.bookId===j),[a.pdfAnnotations]),S=x.useCallback(j=>{const k={...j,id:ii(),knowledge:[],lessons:[],files:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(B=>({...B,projects:[k,...B.projects]})),k},[]),E=x.useCallback(j=>{e(k=>({...k,projects:k.projects.filter(B=>B.id!==j)}))},[]),C=x.useCallback((j,k)=>{const B={...k,id:ii(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(X=>({...X,projects:X.projects.map(K=>K.id===j?{...K,knowledge:[B,...K.knowledge],updatedAt:new Date().toISOString()}:K)})),B},[]),T=x.useCallback((j,k)=>{const B={...k,id:ii(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(X=>({...X,projects:X.projects.map(K=>K.id===j?{...K,lessons:[B,...K.lessons],updatedAt:new Date().toISOString()}:K)})),B},[]),N=x.useCallback(async(j,k,B)=>{const X=await k.arrayBuffer(),K=ii(),oe=vx(k.type,k.name),J={id:K,name:k.name,type:k.type,fileType:oe,size:k.size,data:X,createdAt:new Date().toISOString()};await bx(J);const Y={id:K,name:k.name,type:k.type,fileType:oe,size:k.size,description:B,createdAt:new Date().toISOString()};return e(se=>({...se,projects:se.projects.map(pe=>pe.id===j?{...pe,files:[Y,...pe.files],updatedAt:new Date().toISOString()}:pe)})),Y},[]),M=x.useCallback(async(j,k)=>{await Mm(k),e(B=>({...B,projects:B.projects.map(X=>X.id===j?{...X,files:X.files.filter(K=>K.id!==k),updatedAt:new Date().toISOString()}:X)}))},[]),L=x.useCallback(async j=>await xx(j),[]),I=x.useCallback(j=>{const k={...j,id:ii(),completed:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(B=>({...B,notes:[k,...B.notes]})),k},[]),O=x.useCallback((j,k)=>{e(B=>({...B,notes:B.notes.map(X=>X.id===j?{...X,...k,completedAt:k.completed?new Date().toISOString():X.completedAt,updatedAt:new Date().toISOString()}:X)}))},[]),P=x.useCallback(j=>{e(k=>({...k,notes:k.notes.filter(B=>B.id!==j)}))},[]),F=x.useCallback(j=>{e(k=>({...k,notes:k.notes.map(B=>B.id===j?{...B,completed:!B.completed,completedAt:B.completed?void 0:new Date().toISOString(),updatedAt:new Date().toISOString()}:B)}))},[]),$=x.useCallback((j,k)=>{const B={id:ii(),name:j,color:k};return e(X=>({...X,categories:[...X.categories,B]})),B},[]),W=x.useCallback(j=>{e(k=>({...k,categories:k.categories.filter(B=>B.id!==j),books:k.books.map(B=>B.categoryId===j?{...B,categoryId:"cat-other",updatedAt:new Date().toISOString()}:B)}))},[]),ie=x.useCallback(j=>a.books.filter(k=>{if(j.categoryId&&k.categoryId!==j.categoryId||j.status&&k.status!==j.status||j.type&&k.type!==j.type||j.tags?.length&&!j.tags.some(B=>k.tags.includes(B)))return!1;if(j.searchQuery){const B=j.searchQuery.toLowerCase();if(!(k.title.toLowerCase().includes(B)||k.author.toLowerCase().includes(B)||k.description?.toLowerCase().includes(B)||k.tags.some(K=>K.toLowerCase().includes(B))))return!1}return!0}),[a.books]),le=x.useCallback(()=>{const j=new Set;return a.books.forEach(k=>k.tags.forEach(B=>j.add(B))),Array.from(j).sort()},[a.books]),G=x.useCallback(()=>{const j=a.books;return{total:j.length,completed:j.filter(k=>k.status==="completed").length,reading:j.filter(k=>k.status==="reading").length,unread:j.filter(k=>k.status==="unread").length,totalAnnotations:j.reduce((k,B)=>k+B.annotations.length,0),categoryStats:a.categories.map(k=>({...k,count:j.filter(B=>B.categoryId===k.id).length})),projectCount:a.projects.length,noteCount:a.notes.length,pendingNotes:a.notes.filter(k=>!k.completed&&k.type==="todo").length}},[a.books,a.categories,a.projects,a.notes]),fe=x.useCallback((j,k)=>{try{const B={data:k,timestamp:Date.now(),deviceId:k.sync.deviceId};return localStorage.setItem(`knowledge-sync-${j}`,JSON.stringify(B)),e(X=>({...X,sync:{...X.sync,lastSyncAt:new Date().toISOString(),syncStatus:"idle"}})),!0}catch(B){return console.error("Sync to cloud failed:",B),!1}},[]),R=x.useCallback(j=>{try{const k=localStorage.getItem(`knowledge-sync-${j}`);return k?JSON.parse(k).data:null}catch(k){return console.error("Sync from cloud failed:",k),null}},[]),U=x.useCallback(j=>{e(k=>{const B=new Map;[...k.books,...j.books].forEach(Y=>{const se=B.get(Y.id);(!se||new Date(Y.updatedAt)>new Date(se.updatedAt))&&B.set(Y.id,Y)});const X=new Map;[...k.categories,...j.categories].forEach(Y=>{X.has(Y.id)||X.set(Y.id,Y)});const K=new Map;[...k.pdfAnnotations,...j.pdfAnnotations].forEach(Y=>{const se=K.get(Y.id);(!se||new Date(Y.updatedAt)>new Date(se.updatedAt))&&K.set(Y.id,Y)});const oe=new Map;[...k.projects,...j.projects].forEach(Y=>{const se=oe.get(Y.id);(!se||new Date(Y.updatedAt)>new Date(se.updatedAt))&&oe.set(Y.id,Y)});const J=new Map;return[...k.notes,...j.notes].forEach(Y=>{const se=J.get(Y.id);(!se||new Date(Y.updatedAt)>new Date(se.updatedAt))&&J.set(Y.id,Y)}),{books:Array.from(B.values()),categories:Array.from(X.values()),pdfAnnotations:Array.from(K.values()),projects:Array.from(oe.values()),notes:Array.from(J.values()),sync:{...k.sync,lastSyncAt:new Date().toISOString()}}})},[]),H=x.useCallback(()=>JSON.stringify(a,null,2),[a]),z=x.useCallback(j=>{try{const k=JSON.parse(j);return e({...jm,...k,sync:{...ap,...k.sync}}),!0}catch{return!1}},[]),ce=x.useCallback(()=>{const j=L1();return e(k=>({...k,sync:{...k.sync,syncCode:j}})),j},[]);return{books:a.books,categories:a.categories,projects:a.projects,notes:a.notes,sync:a.sync,isLoaded:t,addBook:i,updateBook:o,deleteBook:l,getBook:u,filterBooks:ie,uploadFile:h,downloadFile:m,deleteBookFile:p,addPDFAnnotation:g,updatePDFAnnotation:y,deletePDFAnnotation:w,getBookPDFAnnotations:A,addProject:S,deleteProject:E,addProjectKnowledge:C,addProjectLesson:T,addProjectFile:N,deleteProjectFile:M,downloadProjectFile:L,addNote:I,updateNote:O,deleteNote:P,toggleNoteComplete:F,addCategory:$,deleteCategory:W,getAllTags:le,getStats:G,exportData:H,importData:z,regenerateSyncCode:ce,syncDataToCloud:fe,syncDataFromCloud:R,mergeData:U}}var _R=Symbol.for("react.lazy"),ld=Lp[" use ".trim().toString()];function TR(a){return typeof a=="object"&&a!==null&&"then"in a}function P1(a){return a!=null&&typeof a=="object"&&"$$typeof"in a&&a.$$typeof===_R&&"_payload"in a&&TR(a._payload)}function Up(a){const e=NR(a),t=x.forwardRef((n,i)=>{let{children:o,...l}=n;P1(o)&&typeof ld=="function"&&(o=ld(o._payload));const u=x.Children.toArray(o),h=u.find(MR);if(h){const m=h.props.children,p=u.map(g=>g===h?x.Children.count(m)>1?x.Children.only(null):x.isValidElement(m)?m.props.children:null:g);return d.jsx(e,{...l,ref:i,children:x.isValidElement(m)?x.cloneElement(m,void 0,p):null})}return d.jsx(e,{...l,ref:i,children:o})});return t.displayName=`${a}.Slot`,t}var I1=Up("Slot");function NR(a){const e=x.forwardRef((t,n)=>{let{children:i,...o}=t;if(P1(i)&&typeof ld=="function"&&(i=ld(i._payload)),x.isValidElement(i)){const l=DR(i),u=RR(o,i.props);return i.type!==x.Fragment&&(u.ref=n?Yi(n,l):l),x.cloneElement(i,u)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var jR=Symbol("radix.slottable");function MR(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===jR}function RR(a,e){const t={...e};for(const n in e){const i=a[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?t[n]=(...u)=>{const h=o(...u);return i(...u),h}:i&&(t[n]=i):n==="style"?t[n]={...i,...o}:n==="className"&&(t[n]=[i,o].filter(Boolean).join(" "))}return{...a,...t}}function DR(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}const wx=a=>typeof a=="boolean"?`${a}`:a===0?"0":a,Sx=Ro,B1=(a,e)=>t=>{var n;if(e?.variants==null)return Sx(a,t?.class,t?.className);const{variants:i,defaultVariants:o}=e,l=Object.keys(i).map(m=>{const p=t?.[m],g=o?.[m];if(p===null)return null;const y=wx(p)||wx(g);return i[m][y]}),u=t&&Object.entries(t).reduce((m,p)=>{let[g,y]=p;return y===void 0||(m[g]=y),m},{}),h=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((m,p)=>{let{class:g,className:y,...w}=p;return Object.entries(w).every(A=>{let[S,E]=A;return Array.isArray(E)?E.includes({...o,...u}[S]):{...o,...u}[S]===E})?[...m,g,y]:m},[]);return Sx(a,l,h,t?.class,t?.className)},Vp=B1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function he({className:a,variant:e="default",size:t="default",asChild:n=!1,...i}){const o=n?I1:"button";return d.jsx(o,{"data-slot":"button","data-variant":e,"data-size":t,className:Pe(Vp({variant:e,size:t,className:a})),...i})}const kR=B1("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function gn({className:a,variant:e,asChild:t=!1,...n}){const i=t?I1:"span";return d.jsx(i,{"data-slot":"badge",className:Pe(kR({variant:e}),a),...n})}function OR(a,e=globalThis?.document){const t=Mn(a);x.useEffect(()=>{const n=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var LR="DismissableLayer",rp="dismissableLayer.update",PR="dismissableLayer.pointerDownOutside",IR="dismissableLayer.focusOutside",Ax,z1=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nd=x.forwardRef((a,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...h}=a,m=x.useContext(z1),[p,g]=x.useState(null),y=p?.ownerDocument??globalThis?.document,[,w]=x.useState({}),A=We(e,O=>g(O)),S=Array.from(m.layers),[E]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),C=S.indexOf(E),T=p?S.indexOf(p):-1,N=m.layersWithOutsidePointerEventsDisabled.size>0,M=T>=C,L=FR(O=>{const P=O.target,F=[...m.branches].some($=>$.contains(P));!M||F||(i?.(O),l?.(O),O.defaultPrevented||u?.())},y),I=HR(O=>{const P=O.target;[...m.branches].some($=>$.contains(P))||(o?.(O),l?.(O),O.defaultPrevented||u?.())},y);return OR(O=>{T===m.layers.size-1&&(n?.(O),!O.defaultPrevented&&u&&(O.preventDefault(),u()))},y),x.useEffect(()=>{if(p)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Ax=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),Cx(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Ax)}},[p,y,t,m]),x.useEffect(()=>()=>{p&&(m.layers.delete(p),m.layersWithOutsidePointerEventsDisabled.delete(p),Cx())},[p,m]),x.useEffect(()=>{const O=()=>w({});return document.addEventListener(rp,O),()=>document.removeEventListener(rp,O)},[]),d.jsx(ze.div,{...h,ref:A,style:{pointerEvents:N?M?"auto":"none":void 0,...a.style},onFocusCapture:Se(a.onFocusCapture,I.onFocusCapture),onBlurCapture:Se(a.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Se(a.onPointerDownCapture,L.onPointerDownCapture)})});Nd.displayName=LR;var BR="DismissableLayerBranch",zR=x.forwardRef((a,e)=>{const t=x.useContext(z1),n=x.useRef(null),i=We(e,n);return x.useEffect(()=>{const o=n.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),d.jsx(ze.div,{...a,ref:i})});zR.displayName=BR;function FR(a,e=globalThis?.document){const t=Mn(a),n=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const o=u=>{if(u.target&&!n.current){let h=function(){F1(PR,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=h,e.addEventListener("click",i.current,{once:!0})):h()}else e.removeEventListener("click",i.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function HR(a,e=globalThis?.document){const t=Mn(a),n=x.useRef(!1);return x.useEffect(()=>{const i=o=>{o.target&&!n.current&&F1(IR,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Cx(){const a=new CustomEvent(rp);document.dispatchEvent(a)}function F1(a,e,t,{discrete:n}){const i=t.originalEvent.target,o=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(a,e,{once:!0}),n?qw(i,o):i.dispatchEvent(o)}var Rm="focusScope.autoFocusOnMount",Dm="focusScope.autoFocusOnUnmount",Ex={bubbles:!1,cancelable:!0},UR="FocusScope",jd=x.forwardRef((a,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...l}=a,[u,h]=x.useState(null),m=Mn(i),p=Mn(o),g=x.useRef(null),y=We(e,S=>h(S)),w=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let S=function(N){if(w.paused||!u)return;const M=N.target;u.contains(M)?g.current=M:ba(g.current,{select:!0})},E=function(N){if(w.paused||!u)return;const M=N.relatedTarget;M!==null&&(u.contains(M)||ba(g.current,{select:!0}))},C=function(N){if(document.activeElement===document.body)for(const L of N)L.removedNodes.length>0&&ba(u)};document.addEventListener("focusin",S),document.addEventListener("focusout",E);const T=new MutationObserver(C);return u&&T.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",E),T.disconnect()}}},[n,u,w.paused]),x.useEffect(()=>{if(u){Tx.add(w);const S=document.activeElement;if(!u.contains(S)){const C=new CustomEvent(Rm,Ex);u.addEventListener(Rm,m),u.dispatchEvent(C),C.defaultPrevented||(VR(XR(H1(u)),{select:!0}),document.activeElement===S&&ba(u))}return()=>{u.removeEventListener(Rm,m),setTimeout(()=>{const C=new CustomEvent(Dm,Ex);u.addEventListener(Dm,p),u.dispatchEvent(C),C.defaultPrevented||ba(S??document.body,{select:!0}),u.removeEventListener(Dm,p),Tx.remove(w)},0)}}},[u,m,p,w]);const A=x.useCallback(S=>{if(!t&&!n||w.paused)return;const E=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,C=document.activeElement;if(E&&C){const T=S.currentTarget,[N,M]=$R(T);N&&M?!S.shiftKey&&C===M?(S.preventDefault(),t&&ba(N,{select:!0})):S.shiftKey&&C===N&&(S.preventDefault(),t&&ba(M,{select:!0})):C===T&&S.preventDefault()}},[t,n,w.paused]);return d.jsx(ze.div,{tabIndex:-1,...l,ref:y,onKeyDown:A})});jd.displayName=UR;function VR(a,{select:e=!1}={}){const t=document.activeElement;for(const n of a)if(ba(n,{select:e}),document.activeElement!==t)return}function $R(a){const e=H1(a),t=_x(e,a),n=_x(e.reverse(),a);return[t,n]}function H1(a){const e=[],t=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function _x(a,e){for(const t of a)if(!GR(t,{upTo:e}))return t}function GR(a,{upTo:e}){if(getComputedStyle(a).visibility==="hidden")return!0;for(;a;){if(e!==void 0&&a===e)return!1;if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}function YR(a){return a instanceof HTMLInputElement&&"select"in a}function ba(a,{select:e=!1}={}){if(a&&a.focus){const t=document.activeElement;a.focus({preventScroll:!0}),a!==t&&YR(a)&&e&&a.select()}}var Tx=qR();function qR(){let a=[];return{add(e){const t=a[0];e!==t&&t?.pause(),a=Nx(a,e),a.unshift(e)},remove(e){a=Nx(a,e),a[0]?.resume()}}}function Nx(a,e){const t=[...a],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function XR(a){return a.filter(e=>e.tagName!=="A")}var WR="Portal",Md=x.forwardRef((a,e)=>{const{container:t,...n}=a,[i,o]=x.useState(!1);Rn(()=>o(!0),[]);const l=t||i&&globalThis?.document?.body;return l?Yw.createPortal(d.jsx(ze.div,{...n,ref:e}),l):null});Md.displayName=WR;var km=0;function $p(){x.useEffect(()=>{const a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??jx()),document.body.insertAdjacentElement("beforeend",a[1]??jx()),km++,()=>{km===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),km--}},[])}function jx(){const a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var li=function(){return li=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},li.apply(this,arguments)};function U1(a,e){var t={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&e.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(a);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(a,n[i])&&(t[n[i]]=a[n[i]]);return t}function KR(a,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return a.concat(o||Array.prototype.slice.call(e))}var ed="right-scroll-bar-position",td="width-before-scroll-bar",QR="with-scroll-bars-hidden",ZR="--removed-body-scroll-bar-size";function Om(a,e){return typeof a=="function"?a(e):a&&(a.current=e),a}function JR(a,e){var t=x.useState(function(){return{value:a,callback:e,facade:{get current(){return t.value},set current(n){var i=t.value;i!==n&&(t.value=n,t.callback(n,i))}}}})[0];return t.callback=e,t.facade}var eD=typeof window<"u"?x.useLayoutEffect:x.useEffect,Mx=new WeakMap;function tD(a,e){var t=JR(null,function(n){return a.forEach(function(i){return Om(i,n)})});return eD(function(){var n=Mx.get(t);if(n){var i=new Set(n),o=new Set(a),l=t.current;i.forEach(function(u){o.has(u)||Om(u,null)}),o.forEach(function(u){i.has(u)||Om(u,l)})}Mx.set(t,a)},[a]),t}function nD(a){return a}function sD(a,e){e===void 0&&(e=nD);var t=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:a},useMedium:function(o){var l=e(o,n);return t.push(l),function(){t=t.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(n=!0;t.length;){var l=t;t=[],l.forEach(o)}t={push:function(u){return o(u)},filter:function(){return t}}},assignMedium:function(o){n=!0;var l=[];if(t.length){var u=t;t=[],u.forEach(o),l=t}var h=function(){var p=l;l=[],p.forEach(o)},m=function(){return Promise.resolve().then(h)};m(),t={push:function(p){l.push(p),m()},filter:function(p){return l=l.filter(p),t}}}};return i}function iD(a){a===void 0&&(a={});var e=sD(null);return e.options=li({async:!0,ssr:!1},a),e}var V1=function(a){var e=a.sideCar,t=U1(a,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,li({},t))};V1.isSideCarExport=!0;function aD(a,e){return a.useMedium(e),V1}var $1=iD(),Lm=function(){},Rd=x.forwardRef(function(a,e){var t=x.useRef(null),n=x.useState({onScrollCapture:Lm,onWheelCapture:Lm,onTouchMoveCapture:Lm}),i=n[0],o=n[1],l=a.forwardProps,u=a.children,h=a.className,m=a.removeScrollBar,p=a.enabled,g=a.shards,y=a.sideCar,w=a.noRelative,A=a.noIsolation,S=a.inert,E=a.allowPinchZoom,C=a.as,T=C===void 0?"div":C,N=a.gapMode,M=U1(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=y,I=tD([t,e]),O=li(li({},M),i);return x.createElement(x.Fragment,null,p&&x.createElement(L,{sideCar:$1,removeScrollBar:m,shards:g,noRelative:w,noIsolation:A,inert:S,setCallbacks:o,allowPinchZoom:!!E,lockRef:t,gapMode:N}),l?x.cloneElement(x.Children.only(u),li(li({},O),{ref:I})):x.createElement(T,li({},O,{className:h,ref:I}),u))});Rd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rd.classNames={fullWidth:td,zeroRight:ed};var rD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function oD(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var e=rD();return e&&a.setAttribute("nonce",e),a}function lD(a,e){a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}function cD(a){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(a)}var uD=function(){var a=0,e=null;return{add:function(t){a==0&&(e=oD())&&(lD(e,t),cD(e)),a++},remove:function(){a--,!a&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},dD=function(){var a=uD();return function(e,t){x.useEffect(function(){return a.add(e),function(){a.remove()}},[e&&t])}},G1=function(){var a=dD(),e=function(t){var n=t.styles,i=t.dynamic;return a(n,i),null};return e},hD={left:0,top:0,right:0,gap:0},Pm=function(a){return parseInt(a||"",10)||0},fD=function(a){var e=window.getComputedStyle(document.body),t=e[a==="padding"?"paddingLeft":"marginLeft"],n=e[a==="padding"?"paddingTop":"marginTop"],i=e[a==="padding"?"paddingRight":"marginRight"];return[Pm(t),Pm(n),Pm(i)]},mD=function(a){if(a===void 0&&(a="margin"),typeof window>"u")return hD;var e=fD(a),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},pD=G1(),lo="data-scroll-locked",gD=function(a,e,t,n){var i=a.left,o=a.top,l=a.right,u=a.gap;return t===void 0&&(t="margin"),`
  .`.concat(QR,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(u,"px ").concat(n,`;
  }
  body[`).concat(lo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ed,` {
    right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(td,` {
    margin-right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(ed," .").concat(ed,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(td," .").concat(td,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(lo,`] {
    `).concat(ZR,": ").concat(u,`px;
  }
`)},Rx=function(){var a=parseInt(document.body.getAttribute(lo)||"0",10);return isFinite(a)?a:0},vD=function(){x.useEffect(function(){return document.body.setAttribute(lo,(Rx()+1).toString()),function(){var a=Rx()-1;a<=0?document.body.removeAttribute(lo):document.body.setAttribute(lo,a.toString())}},[])},yD=function(a){var e=a.noRelative,t=a.noImportant,n=a.gapMode,i=n===void 0?"margin":n;vD();var o=x.useMemo(function(){return mD(i)},[i]);return x.createElement(pD,{styles:gD(o,!e,i,t?"":"!important")})},op=!1;if(typeof window<"u")try{var Pu=Object.defineProperty({},"passive",{get:function(){return op=!0,!0}});window.addEventListener("test",Pu,Pu),window.removeEventListener("test",Pu,Pu)}catch{op=!1}var Qr=op?{passive:!1}:!1,bD=function(a){return a.tagName==="TEXTAREA"},Y1=function(a,e){if(!(a instanceof Element))return!1;var t=window.getComputedStyle(a);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!bD(a)&&t[e]==="visible")},xD=function(a){return Y1(a,"overflowY")},wD=function(a){return Y1(a,"overflowX")},Dx=function(a,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=q1(a,n);if(i){var o=X1(a,n),l=o[1],u=o[2];if(l>u)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},SD=function(a){var e=a.scrollTop,t=a.scrollHeight,n=a.clientHeight;return[e,t,n]},AD=function(a){var e=a.scrollLeft,t=a.scrollWidth,n=a.clientWidth;return[e,t,n]},q1=function(a,e){return a==="v"?xD(e):wD(e)},X1=function(a,e){return a==="v"?SD(e):AD(e)},CD=function(a,e){return a==="h"&&e==="rtl"?-1:1},ED=function(a,e,t,n,i){var o=CD(a,window.getComputedStyle(e).direction),l=o*n,u=t.target,h=e.contains(u),m=!1,p=l>0,g=0,y=0;do{if(!u)break;var w=X1(a,u),A=w[0],S=w[1],E=w[2],C=S-E-o*A;(A||C)&&q1(a,u)&&(g+=C,y+=A);var T=u.parentNode;u=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(p&&Math.abs(g)<1||!p&&Math.abs(y)<1)&&(m=!0),m},Iu=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},kx=function(a){return[a.deltaX,a.deltaY]},Ox=function(a){return a&&"current"in a?a.current:a},_D=function(a,e){return a[0]===e[0]&&a[1]===e[1]},TD=function(a){return`
  .block-interactivity-`.concat(a,` {pointer-events: none;}
  .allow-interactivity-`).concat(a,` {pointer-events: all;}
`)},ND=0,Zr=[];function jD(a){var e=x.useRef([]),t=x.useRef([0,0]),n=x.useRef(),i=x.useState(ND++)[0],o=x.useState(G1)[0],l=x.useRef(a);x.useEffect(function(){l.current=a},[a]),x.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(i));var S=KR([a.lockRef.current],(a.shards||[]).map(Ox),!0).filter(Boolean);return S.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),S.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[a.inert,a.lockRef.current,a.shards]);var u=x.useCallback(function(S,E){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!l.current.allowPinchZoom;var C=Iu(S),T=t.current,N="deltaX"in S?S.deltaX:T[0]-C[0],M="deltaY"in S?S.deltaY:T[1]-C[1],L,I=S.target,O=Math.abs(N)>Math.abs(M)?"h":"v";if("touches"in S&&O==="h"&&I.type==="range")return!1;var P=window.getSelection(),F=P&&P.anchorNode,$=F?F===I||F.contains(I):!1;if($)return!1;var W=Dx(O,I);if(!W)return!0;if(W?L=O:(L=O==="v"?"h":"v",W=Dx(O,I)),!W)return!1;if(!n.current&&"changedTouches"in S&&(N||M)&&(n.current=L),!L)return!0;var ie=n.current||L;return ED(ie,E,S,ie==="h"?N:M)},[]),h=x.useCallback(function(S){var E=S;if(!(!Zr.length||Zr[Zr.length-1]!==o)){var C="deltaY"in E?kx(E):Iu(E),T=e.current.filter(function(L){return L.name===E.type&&(L.target===E.target||E.target===L.shadowParent)&&_D(L.delta,C)})[0];if(T&&T.should){E.cancelable&&E.preventDefault();return}if(!T){var N=(l.current.shards||[]).map(Ox).filter(Boolean).filter(function(L){return L.contains(E.target)}),M=N.length>0?u(E,N[0]):!l.current.noIsolation;M&&E.cancelable&&E.preventDefault()}}},[]),m=x.useCallback(function(S,E,C,T){var N={name:S,delta:E,target:C,should:T,shadowParent:MD(C)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(M){return M!==N})},1)},[]),p=x.useCallback(function(S){t.current=Iu(S),n.current=void 0},[]),g=x.useCallback(function(S){m(S.type,kx(S),S.target,u(S,a.lockRef.current))},[]),y=x.useCallback(function(S){m(S.type,Iu(S),S.target,u(S,a.lockRef.current))},[]);x.useEffect(function(){return Zr.push(o),a.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Qr),document.addEventListener("touchmove",h,Qr),document.addEventListener("touchstart",p,Qr),function(){Zr=Zr.filter(function(S){return S!==o}),document.removeEventListener("wheel",h,Qr),document.removeEventListener("touchmove",h,Qr),document.removeEventListener("touchstart",p,Qr)}},[]);var w=a.removeScrollBar,A=a.inert;return x.createElement(x.Fragment,null,A?x.createElement(o,{styles:TD(i)}):null,w?x.createElement(yD,{noRelative:a.noRelative,gapMode:a.gapMode}):null)}function MD(a){for(var e=null;a!==null;)a instanceof ShadowRoot&&(e=a.host,a=a.host),a=a.parentNode;return e}const RD=aD($1,jD);var Dd=x.forwardRef(function(a,e){return x.createElement(Rd,li({},a,{ref:e,sideCar:RD}))});Dd.classNames=Rd.classNames;var DD=function(a){if(typeof document>"u")return null;var e=Array.isArray(a)?a[0]:a;return e.ownerDocument.body},Jr=new WeakMap,Bu=new WeakMap,zu={},Im=0,W1=function(a){return a&&(a.host||W1(a.parentNode))},kD=function(a,e){return e.map(function(t){if(a.contains(t))return t;var n=W1(t);return n&&a.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",a,". Doing nothing"),null)}).filter(function(t){return!!t})},OD=function(a,e,t,n){var i=kD(e,Array.isArray(a)?a:[a]);zu[t]||(zu[t]=new WeakMap);var o=zu[t],l=[],u=new Set,h=new Set(i),m=function(g){!g||u.has(g)||(u.add(g),m(g.parentNode))};i.forEach(m);var p=function(g){!g||h.has(g)||Array.prototype.forEach.call(g.children,function(y){if(u.has(y))p(y);else try{var w=y.getAttribute(n),A=w!==null&&w!=="false",S=(Jr.get(y)||0)+1,E=(o.get(y)||0)+1;Jr.set(y,S),o.set(y,E),l.push(y),S===1&&A&&Bu.set(y,!0),E===1&&y.setAttribute(t,"true"),A||y.setAttribute(n,"true")}catch(C){console.error("aria-hidden: cannot operate on ",y,C)}})};return p(e),u.clear(),Im++,function(){l.forEach(function(g){var y=Jr.get(g)-1,w=o.get(g)-1;Jr.set(g,y),o.set(g,w),y||(Bu.has(g)||g.removeAttribute(n),Bu.delete(g)),w||g.removeAttribute(t)}),Im--,Im||(Jr=new WeakMap,Jr=new WeakMap,Bu=new WeakMap,zu={})}},Gp=function(a,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(a)?a:[a]),i=DD(a);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),OD(n,i,t,"aria-hidden")):function(){return null}};function LD(a){const e=PD(a),t=x.forwardRef((n,i)=>{const{children:o,...l}=n,u=x.Children.toArray(o),h=u.find(BD);if(h){const m=h.props.children,p=u.map(g=>g===h?x.Children.count(m)>1?x.Children.only(null):x.isValidElement(m)?m.props.children:null:g);return d.jsx(e,{...l,ref:i,children:x.isValidElement(m)?x.cloneElement(m,void 0,p):null})}return d.jsx(e,{...l,ref:i,children:o})});return t.displayName=`${a}.Slot`,t}function PD(a){const e=x.forwardRef((t,n)=>{const{children:i,...o}=t;if(x.isValidElement(i)){const l=FD(i),u=zD(o,i.props);return i.type!==x.Fragment&&(u.ref=n?Yi(n,l):l),x.cloneElement(i,u)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var ID=Symbol("radix.slottable");function BD(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===ID}function zD(a,e){const t={...e};for(const n in e){const i=a[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?t[n]=(...u)=>{const h=o(...u);return i(...u),h}:i&&(t[n]=i):n==="style"?t[n]={...i,...o}:n==="className"&&(t[n]=[i,o].filter(Boolean).join(" "))}return{...a,...t}}function FD(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}var kd="Dialog",[K1,Q1]=Ms(kd),[HD,qs]=K1(kd),Z1=a=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:i,onOpenChange:o,modal:l=!0}=a,u=x.useRef(null),h=x.useRef(null),[m,p]=Ca({prop:n,defaultProp:i??!1,onChange:o,caller:kd});return d.jsx(HD,{scope:e,triggerRef:u,contentRef:h,contentId:di(),titleId:di(),descriptionId:di(),open:m,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(g=>!g),[p]),modal:l,children:t})};Z1.displayName=kd;var J1="DialogTrigger",eS=x.forwardRef((a,e)=>{const{__scopeDialog:t,...n}=a,i=qs(J1,t),o=We(e,i.triggerRef);return d.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Xp(i.open),...n,ref:o,onClick:Se(a.onClick,i.onOpenToggle)})});eS.displayName=J1;var Yp="DialogPortal",[UD,tS]=K1(Yp,{forceMount:void 0}),nS=a=>{const{__scopeDialog:e,forceMount:t,children:n,container:i}=a,o=qs(Yp,e);return d.jsx(UD,{scope:e,forceMount:t,children:x.Children.map(n,l=>d.jsx(ts,{present:t||o.open,children:d.jsx(Md,{asChild:!0,container:i,children:l})}))})};nS.displayName=Yp;var cd="DialogOverlay",sS=x.forwardRef((a,e)=>{const t=tS(cd,a.__scopeDialog),{forceMount:n=t.forceMount,...i}=a,o=qs(cd,a.__scopeDialog);return o.modal?d.jsx(ts,{present:n||o.open,children:d.jsx($D,{...i,ref:e})}):null});sS.displayName=cd;var VD=LD("DialogOverlay.RemoveScroll"),$D=x.forwardRef((a,e)=>{const{__scopeDialog:t,...n}=a,i=qs(cd,t);return d.jsx(Dd,{as:VD,allowPinchZoom:!0,shards:[i.contentRef],children:d.jsx(ze.div,{"data-state":Xp(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),tr="DialogContent",iS=x.forwardRef((a,e)=>{const t=tS(tr,a.__scopeDialog),{forceMount:n=t.forceMount,...i}=a,o=qs(tr,a.__scopeDialog);return d.jsx(ts,{present:n||o.open,children:o.modal?d.jsx(GD,{...i,ref:e}):d.jsx(YD,{...i,ref:e})})});iS.displayName=tr;var GD=x.forwardRef((a,e)=>{const t=qs(tr,a.__scopeDialog),n=x.useRef(null),i=We(e,t.contentRef,n);return x.useEffect(()=>{const o=n.current;if(o)return Gp(o)},[]),d.jsx(aS,{...a,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(a.onCloseAutoFocus,o=>{o.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Se(a.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&o.preventDefault()}),onFocusOutside:Se(a.onFocusOutside,o=>o.preventDefault())})}),YD=x.forwardRef((a,e)=>{const t=qs(tr,a.__scopeDialog),n=x.useRef(!1),i=x.useRef(!1);return d.jsx(aS,{...a,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{a.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||t.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:o=>{a.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=o.target;t.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),aS=x.forwardRef((a,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,...l}=a,u=qs(tr,t),h=x.useRef(null),m=We(e,h);return $p(),d.jsxs(d.Fragment,{children:[d.jsx(jd,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:o,children:d.jsx(Nd,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Xp(u.open),...l,ref:m,onDismiss:()=>u.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(XD,{titleId:u.titleId}),d.jsx(KD,{contentRef:h,descriptionId:u.descriptionId})]})]})}),qp="DialogTitle",rS=x.forwardRef((a,e)=>{const{__scopeDialog:t,...n}=a,i=qs(qp,t);return d.jsx(ze.h2,{id:i.titleId,...n,ref:e})});rS.displayName=qp;var oS="DialogDescription",lS=x.forwardRef((a,e)=>{const{__scopeDialog:t,...n}=a,i=qs(oS,t);return d.jsx(ze.p,{id:i.descriptionId,...n,ref:e})});lS.displayName=oS;var cS="DialogClose",uS=x.forwardRef((a,e)=>{const{__scopeDialog:t,...n}=a,i=qs(cS,t);return d.jsx(ze.button,{type:"button",...n,ref:e,onClick:Se(a.onClick,()=>i.onOpenChange(!1))})});uS.displayName=cS;function Xp(a){return a?"open":"closed"}var dS="DialogTitleWarning",[qD,hS]=gT(dS,{contentName:tr,titleName:qp,docsSlug:"dialog"}),XD=({titleId:a})=>{const e=hS(dS),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{a&&(document.getElementById(a)||console.error(t))},[t,a]),null},WD="DialogDescriptionWarning",KD=({contentRef:a,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hS(WD).contentName}}.`;return x.useEffect(()=>{const i=a.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,a,e]),null},Wp=Z1,fS=eS,Kp=nS,Qp=sS,Zp=iS,Jp=rS,mS=lS,Od=uS;function pS({...a}){return d.jsx(Wp,{"data-slot":"sheet",...a})}function gS({...a}){return d.jsx(fS,{"data-slot":"sheet-trigger",...a})}function QD({...a}){return d.jsx(Kp,{"data-slot":"sheet-portal",...a})}function ZD({className:a,...e}){return d.jsx(Qp,{"data-slot":"sheet-overlay",className:Pe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...e})}function vS({className:a,children:e,side:t="right",...n}){return d.jsxs(QD,{children:[d.jsx(ZD,{}),d.jsxs(Zp,{"data-slot":"sheet-content",className:Pe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",t==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",t==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",t==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",t==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",a),...n,children:[e,d.jsxs(Od,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[d.jsx(Fn,{className:"size-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function yS({className:a,...e}){return d.jsx("div",{"data-slot":"sheet-header",className:Pe("flex flex-col gap-1.5 p-4",a),...e})}function bS({className:a,...e}){return d.jsx(Jp,{"data-slot":"sheet-title",className:Pe("text-foreground font-semibold",a),...e})}function Kl(a,[e,t]){return Math.min(t,Math.max(e,a))}const JD=["top","right","bottom","left"],_a=Math.min,hs=Math.max,ud=Math.round,Fu=Math.floor,hi=a=>({x:a,y:a}),ek={left:"right",right:"left",bottom:"top",top:"bottom"},tk={start:"end",end:"start"};function lp(a,e,t){return hs(a,_a(e,t))}function Ui(a,e){return typeof a=="function"?a(e):a}function Vi(a){return a.split("-")[0]}function Lo(a){return a.split("-")[1]}function eg(a){return a==="x"?"y":"x"}function tg(a){return a==="y"?"height":"width"}const nk=new Set(["top","bottom"]);function ui(a){return nk.has(Vi(a))?"y":"x"}function ng(a){return eg(ui(a))}function sk(a,e,t){t===void 0&&(t=!1);const n=Lo(a),i=ng(a),o=tg(i);let l=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=dd(l)),[l,dd(l)]}function ik(a){const e=dd(a);return[cp(a),e,cp(e)]}function cp(a){return a.replace(/start|end/g,e=>tk[e])}const Lx=["left","right"],Px=["right","left"],ak=["top","bottom"],rk=["bottom","top"];function ok(a,e,t){switch(a){case"top":case"bottom":return t?e?Px:Lx:e?Lx:Px;case"left":case"right":return e?ak:rk;default:return[]}}function lk(a,e,t,n){const i=Lo(a);let o=ok(Vi(a),t==="start",n);return i&&(o=o.map(l=>l+"-"+i),e&&(o=o.concat(o.map(cp)))),o}function dd(a){return a.replace(/left|right|bottom|top/g,e=>ek[e])}function ck(a){return{top:0,right:0,bottom:0,left:0,...a}}function xS(a){return typeof a!="number"?ck(a):{top:a,right:a,bottom:a,left:a}}function hd(a){const{x:e,y:t,width:n,height:i}=a;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function Ix(a,e,t){let{reference:n,floating:i}=a;const o=ui(e),l=ng(e),u=tg(l),h=Vi(e),m=o==="y",p=n.x+n.width/2-i.width/2,g=n.y+n.height/2-i.height/2,y=n[u]/2-i[u]/2;let w;switch(h){case"top":w={x:p,y:n.y-i.height};break;case"bottom":w={x:p,y:n.y+n.height};break;case"right":w={x:n.x+n.width,y:g};break;case"left":w={x:n.x-i.width,y:g};break;default:w={x:n.x,y:n.y}}switch(Lo(e)){case"start":w[l]-=y*(t&&m?-1:1);break;case"end":w[l]+=y*(t&&m?-1:1);break}return w}const uk=async(a,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:l}=t,u=o.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(e));let m=await l.getElementRects({reference:a,floating:e,strategy:i}),{x:p,y:g}=Ix(m,n,h),y=n,w={},A=0;for(let S=0;S<u.length;S++){const{name:E,fn:C}=u[S],{x:T,y:N,data:M,reset:L}=await C({x:p,y:g,initialPlacement:n,placement:y,strategy:i,middlewareData:w,rects:m,platform:l,elements:{reference:a,floating:e}});p=T??p,g=N??g,w={...w,[E]:{...w[E],...M}},L&&A<=50&&(A++,typeof L=="object"&&(L.placement&&(y=L.placement),L.rects&&(m=L.rects===!0?await l.getElementRects({reference:a,floating:e,strategy:i}):L.rects),{x:p,y:g}=Ix(m,y,h)),S=-1)}return{x:p,y:g,placement:y,strategy:i,middlewareData:w}};async function Ql(a,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:o,rects:l,elements:u,strategy:h}=a,{boundary:m="clippingAncestors",rootBoundary:p="viewport",elementContext:g="floating",altBoundary:y=!1,padding:w=0}=Ui(e,a),A=xS(w),E=u[y?g==="floating"?"reference":"floating":g],C=hd(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(E)))==null||t?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:m,rootBoundary:p,strategy:h})),T=g==="floating"?{x:n,y:i,width:l.floating.width,height:l.floating.height}:l.reference,N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),M=await(o.isElement==null?void 0:o.isElement(N))?await(o.getScale==null?void 0:o.getScale(N))||{x:1,y:1}:{x:1,y:1},L=hd(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:T,offsetParent:N,strategy:h}):T);return{top:(C.top-L.top+A.top)/M.y,bottom:(L.bottom-C.bottom+A.bottom)/M.y,left:(C.left-L.left+A.left)/M.x,right:(L.right-C.right+A.right)/M.x}}const dk=a=>({name:"arrow",options:a,async fn(e){const{x:t,y:n,placement:i,rects:o,platform:l,elements:u,middlewareData:h}=e,{element:m,padding:p=0}=Ui(a,e)||{};if(m==null)return{};const g=xS(p),y={x:t,y:n},w=ng(i),A=tg(w),S=await l.getDimensions(m),E=w==="y",C=E?"top":"left",T=E?"bottom":"right",N=E?"clientHeight":"clientWidth",M=o.reference[A]+o.reference[w]-y[w]-o.floating[A],L=y[w]-o.reference[w],I=await(l.getOffsetParent==null?void 0:l.getOffsetParent(m));let O=I?I[N]:0;(!O||!await(l.isElement==null?void 0:l.isElement(I)))&&(O=u.floating[N]||o.floating[A]);const P=M/2-L/2,F=O/2-S[A]/2-1,$=_a(g[C],F),W=_a(g[T],F),ie=$,le=O-S[A]-W,G=O/2-S[A]/2+P,fe=lp(ie,G,le),R=!h.arrow&&Lo(i)!=null&&G!==fe&&o.reference[A]/2-(G<ie?$:W)-S[A]/2<0,U=R?G<ie?G-ie:G-le:0;return{[w]:y[w]+U,data:{[w]:fe,centerOffset:G-fe-U,...R&&{alignmentOffset:U}},reset:R}}}),hk=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(e){var t,n;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:h,elements:m}=e,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:S=!0,...E}=Ui(a,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const C=Vi(i),T=ui(u),N=Vi(u)===u,M=await(h.isRTL==null?void 0:h.isRTL(m.floating)),L=y||(N||!S?[dd(u)]:ik(u)),I=A!=="none";!y&&I&&L.push(...lk(u,S,A,M));const O=[u,...L],P=await Ql(e,E),F=[];let $=((n=o.flip)==null?void 0:n.overflows)||[];if(p&&F.push(P[C]),g){const G=sk(i,l,M);F.push(P[G[0]],P[G[1]])}if($=[...$,{placement:i,overflows:F}],!F.every(G=>G<=0)){var W,ie;const G=(((W=o.flip)==null?void 0:W.index)||0)+1,fe=O[G];if(fe&&(!(g==="alignment"?T!==ui(fe):!1)||$.every(H=>ui(H.placement)===T?H.overflows[0]>0:!0)))return{data:{index:G,overflows:$},reset:{placement:fe}};let R=(ie=$.filter(U=>U.overflows[0]<=0).sort((U,H)=>U.overflows[1]-H.overflows[1])[0])==null?void 0:ie.placement;if(!R)switch(w){case"bestFit":{var le;const U=(le=$.filter(H=>{if(I){const z=ui(H.placement);return z===T||z==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(z=>z>0).reduce((z,ce)=>z+ce,0)]).sort((H,z)=>H[1]-z[1])[0])==null?void 0:le[0];U&&(R=U);break}case"initialPlacement":R=u;break}if(i!==R)return{reset:{placement:R}}}return{}}}};function Bx(a,e){return{top:a.top-e.height,right:a.right-e.width,bottom:a.bottom-e.height,left:a.left-e.width}}function zx(a){return JD.some(e=>a[e]>=0)}const fk=function(a){return a===void 0&&(a={}),{name:"hide",options:a,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...i}=Ui(a,e);switch(n){case"referenceHidden":{const o=await Ql(e,{...i,elementContext:"reference"}),l=Bx(o,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:zx(l)}}}case"escaped":{const o=await Ql(e,{...i,altBoundary:!0}),l=Bx(o,t.floating);return{data:{escapedOffsets:l,escaped:zx(l)}}}default:return{}}}}},wS=new Set(["left","top"]);async function mk(a,e){const{placement:t,platform:n,elements:i}=a,o=await(n.isRTL==null?void 0:n.isRTL(i.floating)),l=Vi(t),u=Lo(t),h=ui(t)==="y",m=wS.has(l)?-1:1,p=o&&h?-1:1,g=Ui(e,a);let{mainAxis:y,crossAxis:w,alignmentAxis:A}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof A=="number"&&(w=u==="end"?A*-1:A),h?{x:w*p,y:y*m}:{x:y*m,y:w*p}}const pk=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(e){var t,n;const{x:i,y:o,placement:l,middlewareData:u}=e,h=await mk(e,a);return l===((t=u.offset)==null?void 0:t.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:i+h.x,y:o+h.y,data:{...h,placement:l}}}}},gk=function(a){return a===void 0&&(a={}),{name:"shift",options:a,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:E=>{let{x:C,y:T}=E;return{x:C,y:T}}},...h}=Ui(a,e),m={x:t,y:n},p=await Ql(e,h),g=ui(Vi(i)),y=eg(g);let w=m[y],A=m[g];if(o){const E=y==="y"?"top":"left",C=y==="y"?"bottom":"right",T=w+p[E],N=w-p[C];w=lp(T,w,N)}if(l){const E=g==="y"?"top":"left",C=g==="y"?"bottom":"right",T=A+p[E],N=A-p[C];A=lp(T,A,N)}const S=u.fn({...e,[y]:w,[g]:A});return{...S,data:{x:S.x-t,y:S.y-n,enabled:{[y]:o,[g]:l}}}}}},vk=function(a){return a===void 0&&(a={}),{options:a,fn(e){const{x:t,y:n,placement:i,rects:o,middlewareData:l}=e,{offset:u=0,mainAxis:h=!0,crossAxis:m=!0}=Ui(a,e),p={x:t,y:n},g=ui(i),y=eg(g);let w=p[y],A=p[g];const S=Ui(u,e),E=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(h){const N=y==="y"?"height":"width",M=o.reference[y]-o.floating[N]+E.mainAxis,L=o.reference[y]+o.reference[N]-E.mainAxis;w<M?w=M:w>L&&(w=L)}if(m){var C,T;const N=y==="y"?"width":"height",M=wS.has(Vi(i)),L=o.reference[g]-o.floating[N]+(M&&((C=l.offset)==null?void 0:C[g])||0)+(M?0:E.crossAxis),I=o.reference[g]+o.reference[N]+(M?0:((T=l.offset)==null?void 0:T[g])||0)-(M?E.crossAxis:0);A<L?A=L:A>I&&(A=I)}return{[y]:w,[g]:A}}}},yk=function(a){return a===void 0&&(a={}),{name:"size",options:a,async fn(e){var t,n;const{placement:i,rects:o,platform:l,elements:u}=e,{apply:h=()=>{},...m}=Ui(a,e),p=await Ql(e,m),g=Vi(i),y=Lo(i),w=ui(i)==="y",{width:A,height:S}=o.floating;let E,C;g==="top"||g==="bottom"?(E=g,C=y===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(C=g,E=y==="end"?"top":"bottom");const T=S-p.top-p.bottom,N=A-p.left-p.right,M=_a(S-p[E],T),L=_a(A-p[C],N),I=!e.middlewareData.shift;let O=M,P=L;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=N),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(O=T),I&&!y){const $=hs(p.left,0),W=hs(p.right,0),ie=hs(p.top,0),le=hs(p.bottom,0);w?P=A-2*($!==0||W!==0?$+W:hs(p.left,p.right)):O=S-2*(ie!==0||le!==0?ie+le:hs(p.top,p.bottom))}await h({...e,availableWidth:P,availableHeight:O});const F=await l.getDimensions(u.floating);return A!==F.width||S!==F.height?{reset:{rects:!0}}:{}}}};function Ld(){return typeof window<"u"}function Po(a){return SS(a)?(a.nodeName||"").toLowerCase():"#document"}function fs(a){var e;return(a==null||(e=a.ownerDocument)==null?void 0:e.defaultView)||window}function mi(a){var e;return(e=(SS(a)?a.ownerDocument:a.document)||window.document)==null?void 0:e.documentElement}function SS(a){return Ld()?a instanceof Node||a instanceof fs(a).Node:!1}function $s(a){return Ld()?a instanceof Element||a instanceof fs(a).Element:!1}function fi(a){return Ld()?a instanceof HTMLElement||a instanceof fs(a).HTMLElement:!1}function Fx(a){return!Ld()||typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof fs(a).ShadowRoot}const bk=new Set(["inline","contents"]);function lc(a){const{overflow:e,overflowX:t,overflowY:n,display:i}=Gs(a);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!bk.has(i)}const xk=new Set(["table","td","th"]);function wk(a){return xk.has(Po(a))}const Sk=[":popover-open",":modal"];function Pd(a){return Sk.some(e=>{try{return a.matches(e)}catch{return!1}})}const Ak=["transform","translate","scale","rotate","perspective"],Ck=["transform","translate","scale","rotate","perspective","filter"],Ek=["paint","layout","strict","content"];function sg(a){const e=ig(),t=$s(a)?Gs(a):a;return Ak.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||Ck.some(n=>(t.willChange||"").includes(n))||Ek.some(n=>(t.contain||"").includes(n))}function _k(a){let e=Ta(a);for(;fi(e)&&!wo(e);){if(sg(e))return e;if(Pd(e))return null;e=Ta(e)}return null}function ig(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Tk=new Set(["html","body","#document"]);function wo(a){return Tk.has(Po(a))}function Gs(a){return fs(a).getComputedStyle(a)}function Id(a){return $s(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function Ta(a){if(Po(a)==="html")return a;const e=a.assignedSlot||a.parentNode||Fx(a)&&a.host||mi(a);return Fx(e)?e.host:e}function AS(a){const e=Ta(a);return wo(e)?a.ownerDocument?a.ownerDocument.body:a.body:fi(e)&&lc(e)?e:AS(e)}function Zl(a,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=AS(a),o=i===((n=a.ownerDocument)==null?void 0:n.body),l=fs(i);if(o){const u=up(l);return e.concat(l,l.visualViewport||[],lc(i)?i:[],u&&t?Zl(u):[])}return e.concat(i,Zl(i,[],t))}function up(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function CS(a){const e=Gs(a);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=fi(a),o=i?a.offsetWidth:t,l=i?a.offsetHeight:n,u=ud(t)!==o||ud(n)!==l;return u&&(t=o,n=l),{width:t,height:n,$:u}}function ag(a){return $s(a)?a:a.contextElement}function co(a){const e=ag(a);if(!fi(e))return hi(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:o}=CS(e);let l=(o?ud(t.width):t.width)/n,u=(o?ud(t.height):t.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const Nk=hi(0);function ES(a){const e=fs(a);return!ig()||!e.visualViewport?Nk:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jk(a,e,t){return e===void 0&&(e=!1),!t||e&&t!==fs(a)?!1:e}function nr(a,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=a.getBoundingClientRect(),o=ag(a);let l=hi(1);e&&(n?$s(n)&&(l=co(n)):l=co(a));const u=jk(o,t,n)?ES(o):hi(0);let h=(i.left+u.x)/l.x,m=(i.top+u.y)/l.y,p=i.width/l.x,g=i.height/l.y;if(o){const y=fs(o),w=n&&$s(n)?fs(n):n;let A=y,S=up(A);for(;S&&n&&w!==A;){const E=co(S),C=S.getBoundingClientRect(),T=Gs(S),N=C.left+(S.clientLeft+parseFloat(T.paddingLeft))*E.x,M=C.top+(S.clientTop+parseFloat(T.paddingTop))*E.y;h*=E.x,m*=E.y,p*=E.x,g*=E.y,h+=N,m+=M,A=fs(S),S=up(A)}}return hd({width:p,height:g,x:h,y:m})}function Bd(a,e){const t=Id(a).scrollLeft;return e?e.left+t:nr(mi(a)).left+t}function _S(a,e){const t=a.getBoundingClientRect(),n=t.left+e.scrollLeft-Bd(a,t),i=t.top+e.scrollTop;return{x:n,y:i}}function Mk(a){let{elements:e,rect:t,offsetParent:n,strategy:i}=a;const o=i==="fixed",l=mi(n),u=e?Pd(e.floating):!1;if(n===l||u&&o)return t;let h={scrollLeft:0,scrollTop:0},m=hi(1);const p=hi(0),g=fi(n);if((g||!g&&!o)&&((Po(n)!=="body"||lc(l))&&(h=Id(n)),fi(n))){const w=nr(n);m=co(n),p.x=w.x+n.clientLeft,p.y=w.y+n.clientTop}const y=l&&!g&&!o?_S(l,h):hi(0);return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-h.scrollLeft*m.x+p.x+y.x,y:t.y*m.y-h.scrollTop*m.y+p.y+y.y}}function Rk(a){return Array.from(a.getClientRects())}function Dk(a){const e=mi(a),t=Id(a),n=a.ownerDocument.body,i=hs(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=hs(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let l=-t.scrollLeft+Bd(a);const u=-t.scrollTop;return Gs(n).direction==="rtl"&&(l+=hs(e.clientWidth,n.clientWidth)-i),{width:i,height:o,x:l,y:u}}const Hx=25;function kk(a,e){const t=fs(a),n=mi(a),i=t.visualViewport;let o=n.clientWidth,l=n.clientHeight,u=0,h=0;if(i){o=i.width,l=i.height;const p=ig();(!p||p&&e==="fixed")&&(u=i.offsetLeft,h=i.offsetTop)}const m=Bd(n);if(m<=0){const p=n.ownerDocument,g=p.body,y=getComputedStyle(g),w=p.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,A=Math.abs(n.clientWidth-g.clientWidth-w);A<=Hx&&(o-=A)}else m<=Hx&&(o+=m);return{width:o,height:l,x:u,y:h}}const Ok=new Set(["absolute","fixed"]);function Lk(a,e){const t=nr(a,!0,e==="fixed"),n=t.top+a.clientTop,i=t.left+a.clientLeft,o=fi(a)?co(a):hi(1),l=a.clientWidth*o.x,u=a.clientHeight*o.y,h=i*o.x,m=n*o.y;return{width:l,height:u,x:h,y:m}}function Ux(a,e,t){let n;if(e==="viewport")n=kk(a,t);else if(e==="document")n=Dk(mi(a));else if($s(e))n=Lk(e,t);else{const i=ES(a);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return hd(n)}function TS(a,e){const t=Ta(a);return t===e||!$s(t)||wo(t)?!1:Gs(t).position==="fixed"||TS(t,e)}function Pk(a,e){const t=e.get(a);if(t)return t;let n=Zl(a,[],!1).filter(u=>$s(u)&&Po(u)!=="body"),i=null;const o=Gs(a).position==="fixed";let l=o?Ta(a):a;for(;$s(l)&&!wo(l);){const u=Gs(l),h=sg(l);!h&&u.position==="fixed"&&(i=null),(o?!h&&!i:!h&&u.position==="static"&&!!i&&Ok.has(i.position)||lc(l)&&!h&&TS(a,l))?n=n.filter(p=>p!==l):i=u,l=Ta(l)}return e.set(a,n),n}function Ik(a){let{element:e,boundary:t,rootBoundary:n,strategy:i}=a;const l=[...t==="clippingAncestors"?Pd(e)?[]:Pk(e,this._c):[].concat(t),n],u=l[0],h=l.reduce((m,p)=>{const g=Ux(e,p,i);return m.top=hs(g.top,m.top),m.right=_a(g.right,m.right),m.bottom=_a(g.bottom,m.bottom),m.left=hs(g.left,m.left),m},Ux(e,u,i));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function Bk(a){const{width:e,height:t}=CS(a);return{width:e,height:t}}function zk(a,e,t){const n=fi(e),i=mi(e),o=t==="fixed",l=nr(a,!0,o,e);let u={scrollLeft:0,scrollTop:0};const h=hi(0);function m(){h.x=Bd(i)}if(n||!n&&!o)if((Po(e)!=="body"||lc(i))&&(u=Id(e)),n){const w=nr(e,!0,o,e);h.x=w.x+e.clientLeft,h.y=w.y+e.clientTop}else i&&m();o&&!n&&i&&m();const p=i&&!n&&!o?_S(i,u):hi(0),g=l.left+u.scrollLeft-h.x-p.x,y=l.top+u.scrollTop-h.y-p.y;return{x:g,y,width:l.width,height:l.height}}function Bm(a){return Gs(a).position==="static"}function Vx(a,e){if(!fi(a)||Gs(a).position==="fixed")return null;if(e)return e(a);let t=a.offsetParent;return mi(a)===t&&(t=t.ownerDocument.body),t}function NS(a,e){const t=fs(a);if(Pd(a))return t;if(!fi(a)){let i=Ta(a);for(;i&&!wo(i);){if($s(i)&&!Bm(i))return i;i=Ta(i)}return t}let n=Vx(a,e);for(;n&&wk(n)&&Bm(n);)n=Vx(n,e);return n&&wo(n)&&Bm(n)&&!sg(n)?t:n||_k(a)||t}const Fk=async function(a){const e=this.getOffsetParent||NS,t=this.getDimensions,n=await t(a.floating);return{reference:zk(a.reference,await e(a.floating),a.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Hk(a){return Gs(a).direction==="rtl"}const Uk={convertOffsetParentRelativeRectToViewportRelativeRect:Mk,getDocumentElement:mi,getClippingRect:Ik,getOffsetParent:NS,getElementRects:Fk,getClientRects:Rk,getDimensions:Bk,getScale:co,isElement:$s,isRTL:Hk};function jS(a,e){return a.x===e.x&&a.y===e.y&&a.width===e.width&&a.height===e.height}function Vk(a,e){let t=null,n;const i=mi(a);function o(){var u;clearTimeout(n),(u=t)==null||u.disconnect(),t=null}function l(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),o();const m=a.getBoundingClientRect(),{left:p,top:g,width:y,height:w}=m;if(u||e(),!y||!w)return;const A=Fu(g),S=Fu(i.clientWidth-(p+y)),E=Fu(i.clientHeight-(g+w)),C=Fu(p),N={rootMargin:-A+"px "+-S+"px "+-E+"px "+-C+"px",threshold:hs(0,_a(1,h))||1};let M=!0;function L(I){const O=I[0].intersectionRatio;if(O!==h){if(!M)return l();O?l(!1,O):n=setTimeout(()=>{l(!1,1e-7)},1e3)}O===1&&!jS(m,a.getBoundingClientRect())&&l(),M=!1}try{t=new IntersectionObserver(L,{...N,root:i.ownerDocument})}catch{t=new IntersectionObserver(L,N)}t.observe(a)}return l(!0),o}function $k(a,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=n,m=ag(a),p=i||o?[...m?Zl(m):[],...Zl(e)]:[];p.forEach(C=>{i&&C.addEventListener("scroll",t,{passive:!0}),o&&C.addEventListener("resize",t)});const g=m&&u?Vk(m,t):null;let y=-1,w=null;l&&(w=new ResizeObserver(C=>{let[T]=C;T&&T.target===m&&w&&(w.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var N;(N=w)==null||N.observe(e)})),t()}),m&&!h&&w.observe(m),w.observe(e));let A,S=h?nr(a):null;h&&E();function E(){const C=nr(a);S&&!jS(S,C)&&t(),S=C,A=requestAnimationFrame(E)}return t(),()=>{var C;p.forEach(T=>{i&&T.removeEventListener("scroll",t),o&&T.removeEventListener("resize",t)}),g?.(),(C=w)==null||C.disconnect(),w=null,h&&cancelAnimationFrame(A)}}const Gk=pk,Yk=gk,qk=hk,Xk=yk,Wk=fk,$x=dk,Kk=vk,Qk=(a,e,t)=>{const n=new Map,i={platform:Uk,...t},o={...i.platform,_c:n};return uk(a,e,{...i,platform:o})};var Zk=typeof document<"u",Jk=function(){},nd=Zk?x.useLayoutEffect:Jk;function fd(a,e){if(a===e)return!0;if(typeof a!=typeof e)return!1;if(typeof a=="function"&&a.toString()===e.toString())return!0;let t,n,i;if(a&&e&&typeof a=="object"){if(Array.isArray(a)){if(t=a.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!fd(a[n],e[n]))return!1;return!0}if(i=Object.keys(a),t=i.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=t;n--!==0;){const o=i[n];if(!(o==="_owner"&&a.$$typeof)&&!fd(a[o],e[o]))return!1}return!0}return a!==a&&e!==e}function MS(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function Gx(a,e){const t=MS(a);return Math.round(e*t)/t}function zm(a){const e=x.useRef(a);return nd(()=>{e.current=a}),e}function eO(a){a===void 0&&(a={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:h,open:m}=a,[p,g]=x.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,w]=x.useState(n);fd(y,n)||w(n);const[A,S]=x.useState(null),[E,C]=x.useState(null),T=x.useCallback(H=>{H!==I.current&&(I.current=H,S(H))},[]),N=x.useCallback(H=>{H!==O.current&&(O.current=H,C(H))},[]),M=o||A,L=l||E,I=x.useRef(null),O=x.useRef(null),P=x.useRef(p),F=h!=null,$=zm(h),W=zm(i),ie=zm(m),le=x.useCallback(()=>{if(!I.current||!O.current)return;const H={placement:e,strategy:t,middleware:y};W.current&&(H.platform=W.current),Qk(I.current,O.current,H).then(z=>{const ce={...z,isPositioned:ie.current!==!1};G.current&&!fd(P.current,ce)&&(P.current=ce,jo.flushSync(()=>{g(ce)}))})},[y,e,t,W,ie]);nd(()=>{m===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,g(H=>({...H,isPositioned:!1})))},[m]);const G=x.useRef(!1);nd(()=>(G.current=!0,()=>{G.current=!1}),[]),nd(()=>{if(M&&(I.current=M),L&&(O.current=L),M&&L){if($.current)return $.current(M,L,le);le()}},[M,L,le,$,F]);const fe=x.useMemo(()=>({reference:I,floating:O,setReference:T,setFloating:N}),[T,N]),R=x.useMemo(()=>({reference:M,floating:L}),[M,L]),U=x.useMemo(()=>{const H={position:t,left:0,top:0};if(!R.floating)return H;const z=Gx(R.floating,p.x),ce=Gx(R.floating,p.y);return u?{...H,transform:"translate("+z+"px, "+ce+"px)",...MS(R.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:ce}},[t,u,R.floating,p.x,p.y]);return x.useMemo(()=>({...p,update:le,refs:fe,elements:R,floatingStyles:U}),[p,le,fe,R,U])}const tO=a=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:a,fn(t){const{element:n,padding:i}=typeof a=="function"?a(t):a;return n&&e(n)?n.current!=null?$x({element:n.current,padding:i}).fn(t):{}:n?$x({element:n,padding:i}).fn(t):{}}}},nO=(a,e)=>({...Gk(a),options:[a,e]}),sO=(a,e)=>({...Yk(a),options:[a,e]}),iO=(a,e)=>({...Kk(a),options:[a,e]}),aO=(a,e)=>({...qk(a),options:[a,e]}),rO=(a,e)=>({...Xk(a),options:[a,e]}),oO=(a,e)=>({...Wk(a),options:[a,e]}),lO=(a,e)=>({...tO(a),options:[a,e]});var cO="Arrow",RS=x.forwardRef((a,e)=>{const{children:t,width:n=10,height:i=5,...o}=a;return d.jsx(ze.svg,{...o,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?t:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});RS.displayName=cO;var uO=RS;function rg(a){const[e,t]=x.useState(void 0);return Rn(()=>{if(a){t({width:a.offsetWidth,height:a.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let l,u;if("borderBoxSize"in o){const h=o.borderBoxSize,m=Array.isArray(h)?h[0]:h;l=m.inlineSize,u=m.blockSize}else l=a.offsetWidth,u=a.offsetHeight;t({width:l,height:u})});return n.observe(a,{box:"border-box"}),()=>n.unobserve(a)}else t(void 0)},[a]),e}var og="Popper",[DS,zd]=Ms(og),[dO,kS]=DS(og),OS=a=>{const{__scopePopper:e,children:t}=a,[n,i]=x.useState(null);return d.jsx(dO,{scope:e,anchor:n,onAnchorChange:i,children:t})};OS.displayName=og;var LS="PopperAnchor",PS=x.forwardRef((a,e)=>{const{__scopePopper:t,virtualRef:n,...i}=a,o=kS(LS,t),l=x.useRef(null),u=We(e,l),h=x.useRef(null);return x.useEffect(()=>{const m=h.current;h.current=n?.current||l.current,m!==h.current&&o.onAnchorChange(h.current)}),n?null:d.jsx(ze.div,{...i,ref:u})});PS.displayName=LS;var lg="PopperContent",[hO,fO]=DS(lg),IS=x.forwardRef((a,e)=>{const{__scopePopper:t,side:n="bottom",sideOffset:i=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:m=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:y=!1,updatePositionStrategy:w="optimized",onPlaced:A,...S}=a,E=kS(lg,t),[C,T]=x.useState(null),N=We(e,J=>T(J)),[M,L]=x.useState(null),I=rg(M),O=I?.width??0,P=I?.height??0,F=n+(o!=="center"?"-"+o:""),$=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},W=Array.isArray(m)?m:[m],ie=W.length>0,le={padding:$,boundary:W.filter(pO),altBoundary:ie},{refs:G,floatingStyles:fe,placement:R,isPositioned:U,middlewareData:H}=eO({strategy:"fixed",placement:F,whileElementsMounted:(...J)=>$k(...J,{animationFrame:w==="always"}),elements:{reference:E.anchor},middleware:[nO({mainAxis:i+P,alignmentAxis:l}),h&&sO({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?iO():void 0,...le}),h&&aO({...le}),rO({...le,apply:({elements:J,rects:Y,availableWidth:se,availableHeight:pe})=>{const{width:xe,height:ge}=Y.reference,Ve=J.floating.style;Ve.setProperty("--radix-popper-available-width",`${se}px`),Ve.setProperty("--radix-popper-available-height",`${pe}px`),Ve.setProperty("--radix-popper-anchor-width",`${xe}px`),Ve.setProperty("--radix-popper-anchor-height",`${ge}px`)}}),M&&lO({element:M,padding:u}),gO({arrowWidth:O,arrowHeight:P}),y&&oO({strategy:"referenceHidden",...le})]}),[z,ce]=FS(R),j=Mn(A);Rn(()=>{U&&j?.()},[U,j]);const k=H.arrow?.x,B=H.arrow?.y,X=H.arrow?.centerOffset!==0,[K,oe]=x.useState();return Rn(()=>{C&&oe(window.getComputedStyle(C).zIndex)},[C]),d.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...fe,transform:U?fe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:d.jsx(hO,{scope:t,placedSide:z,onArrowChange:L,arrowX:k,arrowY:B,shouldHideArrow:X,children:d.jsx(ze.div,{"data-side":z,"data-align":ce,...S,ref:N,style:{...S.style,animation:U?void 0:"none"}})})})});IS.displayName=lg;var BS="PopperArrow",mO={top:"bottom",right:"left",bottom:"top",left:"right"},zS=x.forwardRef(function(e,t){const{__scopePopper:n,...i}=e,o=fO(BS,n),l=mO[o.placedSide];return d.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:d.jsx(uO,{...i,ref:t,style:{...i.style,display:"block"}})})});zS.displayName=BS;function pO(a){return a!==null}var gO=a=>({name:"transformOrigin",options:a,fn(e){const{placement:t,rects:n,middlewareData:i}=e,l=i.arrow?.centerOffset!==0,u=l?0:a.arrowWidth,h=l?0:a.arrowHeight,[m,p]=FS(t),g={start:"0%",center:"50%",end:"100%"}[p],y=(i.arrow?.x??0)+u/2,w=(i.arrow?.y??0)+h/2;let A="",S="";return m==="bottom"?(A=l?g:`${y}px`,S=`${-h}px`):m==="top"?(A=l?g:`${y}px`,S=`${n.floating.height+h}px`):m==="right"?(A=`${-h}px`,S=l?g:`${w}px`):m==="left"&&(A=`${n.floating.width+h}px`,S=l?g:`${w}px`),{data:{x:A,y:S}}}});function FS(a){const[e,t="center"]=a.split("-");return[e,t]}var HS=OS,US=PS,VS=IS,$S=zS;function vO(a){const e=yO(a),t=x.forwardRef((n,i)=>{const{children:o,...l}=n,u=x.Children.toArray(o),h=u.find(xO);if(h){const m=h.props.children,p=u.map(g=>g===h?x.Children.count(m)>1?x.Children.only(null):x.isValidElement(m)?m.props.children:null:g);return d.jsx(e,{...l,ref:i,children:x.isValidElement(m)?x.cloneElement(m,void 0,p):null})}return d.jsx(e,{...l,ref:i,children:o})});return t.displayName=`${a}.Slot`,t}function yO(a){const e=x.forwardRef((t,n)=>{const{children:i,...o}=t;if(x.isValidElement(i)){const l=SO(i),u=wO(o,i.props);return i.type!==x.Fragment&&(u.ref=n?Yi(n,l):l),x.cloneElement(i,u)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var bO=Symbol("radix.slottable");function xO(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===bO}function wO(a,e){const t={...e};for(const n in e){const i=a[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?t[n]=(...u)=>{const h=o(...u);return i(...u),h}:i&&(t[n]=i):n==="style"?t[n]={...i,...o}:n==="className"&&(t[n]=[i,o].filter(Boolean).join(" "))}return{...a,...t}}function SO(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}function cg(a){const e=x.useRef({value:a,previous:a});return x.useMemo(()=>(e.current.value!==a&&(e.current.previous=e.current.value,e.current.value=a),e.current.previous),[a])}var GS=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),AO="VisuallyHidden",CO=x.forwardRef((a,e)=>d.jsx(ze.span,{...a,ref:e,style:{...GS,...a.style}}));CO.displayName=AO;var EO=[" ","Enter","ArrowUp","ArrowDown"],_O=[" ","Enter"],sr="Select",[Fd,Hd,TO]=Ed(sr),[Io]=Ms(sr,[TO,zd]),Ud=zd(),[NO,ja]=Io(sr),[jO,MO]=Io(sr),YS=a=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:i,onOpenChange:o,value:l,defaultValue:u,onValueChange:h,dir:m,name:p,autoComplete:g,disabled:y,required:w,form:A}=a,S=Ud(e),[E,C]=x.useState(null),[T,N]=x.useState(null),[M,L]=x.useState(!1),I=Mo(m),[O,P]=Ca({prop:n,defaultProp:i??!1,onChange:o,caller:sr}),[F,$]=Ca({prop:l,defaultProp:u,onChange:h,caller:sr}),W=x.useRef(null),ie=E?A||!!E.closest("form"):!0,[le,G]=x.useState(new Set),fe=Array.from(le).map(R=>R.props.value).join(";");return d.jsx(HS,{...S,children:d.jsxs(NO,{required:w,scope:e,trigger:E,onTriggerChange:C,valueNode:T,onValueNodeChange:N,valueNodeHasChildren:M,onValueNodeHasChildrenChange:L,contentId:di(),value:F,onValueChange:$,open:O,onOpenChange:P,dir:I,triggerPointerDownPosRef:W,disabled:y,children:[d.jsx(Fd.Provider,{scope:e,children:d.jsx(jO,{scope:a.__scopeSelect,onNativeOptionAdd:x.useCallback(R=>{G(U=>new Set(U).add(R))},[]),onNativeOptionRemove:x.useCallback(R=>{G(U=>{const H=new Set(U);return H.delete(R),H})},[]),children:t})}),ie?d.jsxs(mA,{"aria-hidden":!0,required:w,tabIndex:-1,name:p,autoComplete:g,value:F,onChange:R=>$(R.target.value),disabled:y,form:A,children:[F===void 0?d.jsx("option",{value:""}):null,Array.from(le)]},fe):null]})})};YS.displayName=sr;var qS="SelectTrigger",XS=x.forwardRef((a,e)=>{const{__scopeSelect:t,disabled:n=!1,...i}=a,o=Ud(t),l=ja(qS,t),u=l.disabled||n,h=We(e,l.onTriggerChange),m=Hd(t),p=x.useRef("touch"),[g,y,w]=gA(S=>{const E=m().filter(N=>!N.disabled),C=E.find(N=>N.value===l.value),T=vA(E,S,C);T!==void 0&&l.onValueChange(T.value)}),A=S=>{u||(l.onOpenChange(!0),w()),S&&(l.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return d.jsx(US,{asChild:!0,...o,children:d.jsx(ze.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":pA(l.value)?"":void 0,...i,ref:h,onClick:Se(i.onClick,S=>{S.currentTarget.focus(),p.current!=="mouse"&&A(S)}),onPointerDown:Se(i.onPointerDown,S=>{p.current=S.pointerType;const E=S.target;E.hasPointerCapture(S.pointerId)&&E.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(A(S),S.preventDefault())}),onKeyDown:Se(i.onKeyDown,S=>{const E=g.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&y(S.key),!(E&&S.key===" ")&&EO.includes(S.key)&&(A(),S.preventDefault())})})})});XS.displayName=qS;var WS="SelectValue",KS=x.forwardRef((a,e)=>{const{__scopeSelect:t,className:n,style:i,children:o,placeholder:l="",...u}=a,h=ja(WS,t),{onValueNodeHasChildrenChange:m}=h,p=o!==void 0,g=We(e,h.onValueNodeChange);return Rn(()=>{m(p)},[m,p]),d.jsx(ze.span,{...u,ref:g,style:{pointerEvents:"none"},children:pA(h.value)?d.jsx(d.Fragment,{children:l}):o})});KS.displayName=WS;var RO="SelectIcon",QS=x.forwardRef((a,e)=>{const{__scopeSelect:t,children:n,...i}=a;return d.jsx(ze.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});QS.displayName=RO;var DO="SelectPortal",ZS=a=>d.jsx(Md,{asChild:!0,...a});ZS.displayName=DO;var ir="SelectContent",JS=x.forwardRef((a,e)=>{const t=ja(ir,a.__scopeSelect),[n,i]=x.useState();if(Rn(()=>{i(new DocumentFragment)},[]),!t.open){const o=n;return o?jo.createPortal(d.jsx(eA,{scope:a.__scopeSelect,children:d.jsx(Fd.Slot,{scope:a.__scopeSelect,children:d.jsx("div",{children:a.children})})}),o):null}return d.jsx(tA,{...a,ref:e})});JS.displayName=ir;var Bs=10,[eA,Ma]=Io(ir),kO="SelectContentImpl",OO=vO("SelectContent.RemoveScroll"),tA=x.forwardRef((a,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:l,side:u,sideOffset:h,align:m,alignOffset:p,arrowPadding:g,collisionBoundary:y,collisionPadding:w,sticky:A,hideWhenDetached:S,avoidCollisions:E,...C}=a,T=ja(ir,t),[N,M]=x.useState(null),[L,I]=x.useState(null),O=We(e,J=>M(J)),[P,F]=x.useState(null),[$,W]=x.useState(null),ie=Hd(t),[le,G]=x.useState(!1),fe=x.useRef(!1);x.useEffect(()=>{if(N)return Gp(N)},[N]),$p();const R=x.useCallback(J=>{const[Y,...se]=ie().map(ge=>ge.ref.current),[pe]=se.slice(-1),xe=document.activeElement;for(const ge of J)if(ge===xe||(ge?.scrollIntoView({block:"nearest"}),ge===Y&&L&&(L.scrollTop=0),ge===pe&&L&&(L.scrollTop=L.scrollHeight),ge?.focus(),document.activeElement!==xe))return},[ie,L]),U=x.useCallback(()=>R([P,N]),[R,P,N]);x.useEffect(()=>{le&&U()},[le,U]);const{onOpenChange:H,triggerPointerDownPosRef:z}=T;x.useEffect(()=>{if(N){let J={x:0,y:0};const Y=pe=>{J={x:Math.abs(Math.round(pe.pageX)-(z.current?.x??0)),y:Math.abs(Math.round(pe.pageY)-(z.current?.y??0))}},se=pe=>{J.x<=10&&J.y<=10?pe.preventDefault():N.contains(pe.target)||H(!1),document.removeEventListener("pointermove",Y),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",se,{capture:!0})}}},[N,H,z]),x.useEffect(()=>{const J=()=>H(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[H]);const[ce,j]=gA(J=>{const Y=ie().filter(xe=>!xe.disabled),se=Y.find(xe=>xe.ref.current===document.activeElement),pe=vA(Y,J,se);pe&&setTimeout(()=>pe.ref.current.focus())}),k=x.useCallback((J,Y,se)=>{const pe=!fe.current&&!se;(T.value!==void 0&&T.value===Y||pe)&&(F(J),pe&&(fe.current=!0))},[T.value]),B=x.useCallback(()=>N?.focus(),[N]),X=x.useCallback((J,Y,se)=>{const pe=!fe.current&&!se;(T.value!==void 0&&T.value===Y||pe)&&W(J)},[T.value]),K=n==="popper"?dp:nA,oe=K===dp?{side:u,sideOffset:h,align:m,alignOffset:p,arrowPadding:g,collisionBoundary:y,collisionPadding:w,sticky:A,hideWhenDetached:S,avoidCollisions:E}:{};return d.jsx(eA,{scope:t,content:N,viewport:L,onViewportChange:I,itemRefCallback:k,selectedItem:P,onItemLeave:B,itemTextRefCallback:X,focusSelectedItem:U,selectedItemText:$,position:n,isPositioned:le,searchRef:ce,children:d.jsx(Dd,{as:OO,allowPinchZoom:!0,children:d.jsx(jd,{asChild:!0,trapped:T.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:Se(i,J=>{T.trigger?.focus({preventScroll:!0}),J.preventDefault()}),children:d.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:d.jsx(K,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:J=>J.preventDefault(),...C,...oe,onPlaced:()=>G(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Se(C.onKeyDown,J=>{const Y=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!Y&&J.key.length===1&&j(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let pe=ie().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(J.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const xe=J.target,ge=pe.indexOf(xe);pe=pe.slice(ge+1)}setTimeout(()=>R(pe)),J.preventDefault()}})})})})})})});tA.displayName=kO;var LO="SelectItemAlignedPosition",nA=x.forwardRef((a,e)=>{const{__scopeSelect:t,onPlaced:n,...i}=a,o=ja(ir,t),l=Ma(ir,t),[u,h]=x.useState(null),[m,p]=x.useState(null),g=We(e,O=>p(O)),y=Hd(t),w=x.useRef(!1),A=x.useRef(!0),{viewport:S,selectedItem:E,selectedItemText:C,focusSelectedItem:T}=l,N=x.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&m&&S&&E&&C){const O=o.trigger.getBoundingClientRect(),P=m.getBoundingClientRect(),F=o.valueNode.getBoundingClientRect(),$=C.getBoundingClientRect();if(o.dir!=="rtl"){const xe=$.left-P.left,ge=F.left-xe,Ve=O.left-ge,Oe=O.width+Ve,Z=Math.max(Oe,P.width),Ae=window.innerWidth-Bs,Ge=Kl(ge,[Bs,Math.max(Bs,Ae-Z)]);u.style.minWidth=Oe+"px",u.style.left=Ge+"px"}else{const xe=P.right-$.right,ge=window.innerWidth-F.right-xe,Ve=window.innerWidth-O.right-ge,Oe=O.width+Ve,Z=Math.max(Oe,P.width),Ae=window.innerWidth-Bs,Ge=Kl(ge,[Bs,Math.max(Bs,Ae-Z)]);u.style.minWidth=Oe+"px",u.style.right=Ge+"px"}const W=y(),ie=window.innerHeight-Bs*2,le=S.scrollHeight,G=window.getComputedStyle(m),fe=parseInt(G.borderTopWidth,10),R=parseInt(G.paddingTop,10),U=parseInt(G.borderBottomWidth,10),H=parseInt(G.paddingBottom,10),z=fe+R+le+H+U,ce=Math.min(E.offsetHeight*5,z),j=window.getComputedStyle(S),k=parseInt(j.paddingTop,10),B=parseInt(j.paddingBottom,10),X=O.top+O.height/2-Bs,K=ie-X,oe=E.offsetHeight/2,J=E.offsetTop+oe,Y=fe+R+J,se=z-Y;if(Y<=X){const xe=W.length>0&&E===W[W.length-1].ref.current;u.style.bottom="0px";const ge=m.clientHeight-S.offsetTop-S.offsetHeight,Ve=Math.max(K,oe+(xe?B:0)+ge+U),Oe=Y+Ve;u.style.height=Oe+"px"}else{const xe=W.length>0&&E===W[0].ref.current;u.style.top="0px";const Ve=Math.max(X,fe+S.offsetTop+(xe?k:0)+oe)+se;u.style.height=Ve+"px",S.scrollTop=Y-X+S.offsetTop}u.style.margin=`${Bs}px 0`,u.style.minHeight=ce+"px",u.style.maxHeight=ie+"px",n?.(),requestAnimationFrame(()=>w.current=!0)}},[y,o.trigger,o.valueNode,u,m,S,E,C,o.dir,n]);Rn(()=>N(),[N]);const[M,L]=x.useState();Rn(()=>{m&&L(window.getComputedStyle(m).zIndex)},[m]);const I=x.useCallback(O=>{O&&A.current===!0&&(N(),T?.(),A.current=!1)},[N,T]);return d.jsx(IO,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:w,onScrollButtonChange:I,children:d.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:d.jsx(ze.div,{...i,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});nA.displayName=LO;var PO="SelectPopperPosition",dp=x.forwardRef((a,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:i=Bs,...o}=a,l=Ud(t);return d.jsx(VS,{...l,...o,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dp.displayName=PO;var[IO,ug]=Io(ir,{}),hp="SelectViewport",sA=x.forwardRef((a,e)=>{const{__scopeSelect:t,nonce:n,...i}=a,o=Ma(hp,t),l=ug(hp,t),u=We(e,o.onViewportChange),h=x.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),d.jsx(Fd.Slot,{scope:t,children:d.jsx(ze.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Se(i.onScroll,m=>{const p=m.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:y}=l;if(y?.current&&g){const w=Math.abs(h.current-p.scrollTop);if(w>0){const A=window.innerHeight-Bs*2,S=parseFloat(g.style.minHeight),E=parseFloat(g.style.height),C=Math.max(S,E);if(C<A){const T=C+w,N=Math.min(A,T),M=T-N;g.style.height=N+"px",g.style.bottom==="0px"&&(p.scrollTop=M>0?M:0,g.style.justifyContent="flex-end")}}}h.current=p.scrollTop})})})]})});sA.displayName=hp;var iA="SelectGroup",[BO,zO]=Io(iA),FO=x.forwardRef((a,e)=>{const{__scopeSelect:t,...n}=a,i=di();return d.jsx(BO,{scope:t,id:i,children:d.jsx(ze.div,{role:"group","aria-labelledby":i,...n,ref:e})})});FO.displayName=iA;var aA="SelectLabel",HO=x.forwardRef((a,e)=>{const{__scopeSelect:t,...n}=a,i=zO(aA,t);return d.jsx(ze.div,{id:i.id,...n,ref:e})});HO.displayName=aA;var md="SelectItem",[UO,rA]=Io(md),oA=x.forwardRef((a,e)=>{const{__scopeSelect:t,value:n,disabled:i=!1,textValue:o,...l}=a,u=ja(md,t),h=Ma(md,t),m=u.value===n,[p,g]=x.useState(o??""),[y,w]=x.useState(!1),A=We(e,T=>h.itemRefCallback?.(T,n,i)),S=di(),E=x.useRef("touch"),C=()=>{i||(u.onValueChange(n),u.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(UO,{scope:t,value:n,disabled:i,textId:S,isSelected:m,onItemTextChange:x.useCallback(T=>{g(N=>N||(T?.textContent??"").trim())},[]),children:d.jsx(Fd.ItemSlot,{scope:t,value:n,disabled:i,textValue:p,children:d.jsx(ze.div,{role:"option","aria-labelledby":S,"data-highlighted":y?"":void 0,"aria-selected":m&&y,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:A,onFocus:Se(l.onFocus,()=>w(!0)),onBlur:Se(l.onBlur,()=>w(!1)),onClick:Se(l.onClick,()=>{E.current!=="mouse"&&C()}),onPointerUp:Se(l.onPointerUp,()=>{E.current==="mouse"&&C()}),onPointerDown:Se(l.onPointerDown,T=>{E.current=T.pointerType}),onPointerMove:Se(l.onPointerMove,T=>{E.current=T.pointerType,i?h.onItemLeave?.():E.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Se(l.onPointerLeave,T=>{T.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:Se(l.onKeyDown,T=>{h.searchRef?.current!==""&&T.key===" "||(_O.includes(T.key)&&C(),T.key===" "&&T.preventDefault())})})})})});oA.displayName=md;var zl="SelectItemText",lA=x.forwardRef((a,e)=>{const{__scopeSelect:t,className:n,style:i,...o}=a,l=ja(zl,t),u=Ma(zl,t),h=rA(zl,t),m=MO(zl,t),[p,g]=x.useState(null),y=We(e,C=>g(C),h.onItemTextChange,C=>u.itemTextRefCallback?.(C,h.value,h.disabled)),w=p?.textContent,A=x.useMemo(()=>d.jsx("option",{value:h.value,disabled:h.disabled,children:w},h.value),[h.disabled,h.value,w]),{onNativeOptionAdd:S,onNativeOptionRemove:E}=m;return Rn(()=>(S(A),()=>E(A)),[S,E,A]),d.jsxs(d.Fragment,{children:[d.jsx(ze.span,{id:h.textId,...o,ref:y}),h.isSelected&&l.valueNode&&!l.valueNodeHasChildren?jo.createPortal(o.children,l.valueNode):null]})});lA.displayName=zl;var cA="SelectItemIndicator",uA=x.forwardRef((a,e)=>{const{__scopeSelect:t,...n}=a;return rA(cA,t).isSelected?d.jsx(ze.span,{"aria-hidden":!0,...n,ref:e}):null});uA.displayName=cA;var fp="SelectScrollUpButton",dA=x.forwardRef((a,e)=>{const t=Ma(fp,a.__scopeSelect),n=ug(fp,a.__scopeSelect),[i,o]=x.useState(!1),l=We(e,n.onScrollButtonChange);return Rn(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollTop>0;o(m)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),i?d.jsx(fA,{...a,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});dA.displayName=fp;var mp="SelectScrollDownButton",hA=x.forwardRef((a,e)=>{const t=Ma(mp,a.__scopeSelect),n=ug(mp,a.__scopeSelect),[i,o]=x.useState(!1),l=We(e,n.onScrollButtonChange);return Rn(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollHeight-h.clientHeight,p=Math.ceil(h.scrollTop)<m;o(p)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),i?d.jsx(fA,{...a,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});hA.displayName=mp;var fA=x.forwardRef((a,e)=>{const{__scopeSelect:t,onAutoScroll:n,...i}=a,o=Ma("SelectScrollButton",t),l=x.useRef(null),u=Hd(t),h=x.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return x.useEffect(()=>()=>h(),[h]),Rn(()=>{u().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),d.jsx(ze.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Se(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:Se(i.onPointerMove,()=>{o.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:Se(i.onPointerLeave,()=>{h()})})}),VO="SelectSeparator",$O=x.forwardRef((a,e)=>{const{__scopeSelect:t,...n}=a;return d.jsx(ze.div,{"aria-hidden":!0,...n,ref:e})});$O.displayName=VO;var pp="SelectArrow",GO=x.forwardRef((a,e)=>{const{__scopeSelect:t,...n}=a,i=Ud(t),o=ja(pp,t),l=Ma(pp,t);return o.open&&l.position==="popper"?d.jsx($S,{...i,...n,ref:e}):null});GO.displayName=pp;var YO="SelectBubbleInput",mA=x.forwardRef(({__scopeSelect:a,value:e,...t},n)=>{const i=x.useRef(null),o=We(n,i),l=cg(e);return x.useEffect(()=>{const u=i.current;if(!u)return;const h=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(h,"value").set;if(l!==e&&p){const g=new Event("change",{bubbles:!0});p.call(u,e),u.dispatchEvent(g)}},[l,e]),d.jsx(ze.select,{...t,style:{...GS,...t.style},ref:o,defaultValue:e})});mA.displayName=YO;function pA(a){return a===""||a===void 0}function gA(a){const e=Mn(a),t=x.useRef(""),n=x.useRef(0),i=x.useCallback(l=>{const u=t.current+l;e(u),(function h(m){t.current=m,window.clearTimeout(n.current),m!==""&&(n.current=window.setTimeout(()=>h(""),1e3))})(u)},[e]),o=x.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,i,o]}function vA(a,e,t){const i=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,o=t?a.indexOf(t):-1;let l=qO(a,Math.max(o,0));i.length===1&&(l=l.filter(m=>m!==t));const h=l.find(m=>m.textValue.toLowerCase().startsWith(i.toLowerCase()));return h!==t?h:void 0}function qO(a,e){return a.map((t,n)=>a[(e+n)%a.length])}var XO=YS,WO=XS,KO=KS,QO=QS,ZO=ZS,JO=JS,eL=sA,tL=oA,nL=lA,sL=uA,iL=dA,aL=hA;function Bi({...a}){return d.jsx(XO,{"data-slot":"select",...a})}function zi({...a}){return d.jsx(KO,{"data-slot":"select-value",...a})}function Fi({className:a,size:e="default",children:t,...n}){return d.jsxs(WO,{"data-slot":"select-trigger","data-size":e,className:Pe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...n,children:[t,d.jsx(QO,{asChild:!0,children:d.jsx(_1,{className:"size-4 opacity-50"})})]})}function Hi({className:a,children:e,position:t="item-aligned",align:n="center",...i}){return d.jsx(ZO,{children:d.jsxs(JO,{"data-slot":"select-content",className:Pe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:t,align:n,...i,children:[d.jsx(rL,{}),d.jsx(eL,{className:Pe("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),d.jsx(oL,{})]})})}function Wt({className:a,children:e,...t}){return d.jsxs(tL,{"data-slot":"select-item",className:Pe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...t,children:[d.jsx("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:d.jsx(sL,{children:d.jsx(zp,{className:"size-4"})})}),d.jsx(nL,{children:e})]})}function rL({className:a,...e}){return d.jsx(iL,{"data-slot":"select-scroll-up-button",className:Pe("flex cursor-default items-center justify-center py-1",a),...e,children:d.jsx(rj,{className:"size-4"})})}function oL({className:a,...e}){return d.jsx(aL,{"data-slot":"select-scroll-down-button",className:Pe("flex cursor-default items-center justify-center py-1",a),...e,children:d.jsx(_1,{className:"size-4"})})}function Kt({className:a,...e}){return d.jsx("div",{"data-slot":"card",className:Pe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...e})}function sd({className:a,...e}){return d.jsx("div",{"data-slot":"card-header",className:Pe("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...e})}function id({className:a,...e}){return d.jsx("div",{"data-slot":"card-title",className:Pe("leading-none font-semibold",a),...e})}function Qt({className:a,...e}){return d.jsx("div",{"data-slot":"card-content",className:Pe("px-6",a),...e})}function lL(a){const e=cL(a),t=x.forwardRef((n,i)=>{const{children:o,...l}=n,u=x.Children.toArray(o),h=u.find(dL);if(h){const m=h.props.children,p=u.map(g=>g===h?x.Children.count(m)>1?x.Children.only(null):x.isValidElement(m)?m.props.children:null:g);return d.jsx(e,{...l,ref:i,children:x.isValidElement(m)?x.cloneElement(m,void 0,p):null})}return d.jsx(e,{...l,ref:i,children:o})});return t.displayName=`${a}.Slot`,t}function cL(a){const e=x.forwardRef((t,n)=>{const{children:i,...o}=t;if(x.isValidElement(i)){const l=fL(i),u=hL(o,i.props);return i.type!==x.Fragment&&(u.ref=n?Yi(n,l):l),x.cloneElement(i,u)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var uL=Symbol("radix.slottable");function dL(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===uL}function hL(a,e){const t={...e};for(const n in e){const i=a[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?t[n]=(...u)=>{const h=o(...u);return i(...u),h}:i&&(t[n]=i):n==="style"?t[n]={...i,...o}:n==="className"&&(t[n]=[i,o].filter(Boolean).join(" "))}return{...a,...t}}function fL(a){let e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}var gp=["Enter"," "],mL=["ArrowDown","PageUp","Home"],yA=["ArrowUp","PageDown","End"],pL=[...mL,...yA],gL={ltr:[...gp,"ArrowRight"],rtl:[...gp,"ArrowLeft"]},vL={ltr:["ArrowLeft"],rtl:["ArrowRight"]},cc="Menu",[Jl,yL,bL]=Ed(cc),[lr,bA]=Ms(cc,[bL,zd,_d]),Vd=zd(),xA=_d(),[xL,cr]=lr(cc),[wL,uc]=lr(cc),wA=a=>{const{__scopeMenu:e,open:t=!1,children:n,dir:i,onOpenChange:o,modal:l=!0}=a,u=Vd(e),[h,m]=x.useState(null),p=x.useRef(!1),g=Mn(o),y=Mo(i);return x.useEffect(()=>{const w=()=>{p.current=!0,document.addEventListener("pointerdown",A,{capture:!0,once:!0}),document.addEventListener("pointermove",A,{capture:!0,once:!0})},A=()=>p.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",A,{capture:!0}),document.removeEventListener("pointermove",A,{capture:!0})}},[]),d.jsx(HS,{...u,children:d.jsx(xL,{scope:e,open:t,onOpenChange:g,content:h,onContentChange:m,children:d.jsx(wL,{scope:e,onClose:x.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:p,dir:y,modal:l,children:n})})})};wA.displayName=cc;var SL="MenuAnchor",dg=x.forwardRef((a,e)=>{const{__scopeMenu:t,...n}=a,i=Vd(t);return d.jsx(US,{...i,...n,ref:e})});dg.displayName=SL;var hg="MenuPortal",[AL,SA]=lr(hg,{forceMount:void 0}),AA=a=>{const{__scopeMenu:e,forceMount:t,children:n,container:i}=a,o=cr(hg,e);return d.jsx(AL,{scope:e,forceMount:t,children:d.jsx(ts,{present:t||o.open,children:d.jsx(Md,{asChild:!0,container:i,children:n})})})};AA.displayName=hg;var js="MenuContent",[CL,fg]=lr(js),CA=x.forwardRef((a,e)=>{const t=SA(js,a.__scopeMenu),{forceMount:n=t.forceMount,...i}=a,o=cr(js,a.__scopeMenu),l=uc(js,a.__scopeMenu);return d.jsx(Jl.Provider,{scope:a.__scopeMenu,children:d.jsx(ts,{present:n||o.open,children:d.jsx(Jl.Slot,{scope:a.__scopeMenu,children:l.modal?d.jsx(EL,{...i,ref:e}):d.jsx(_L,{...i,ref:e})})})})}),EL=x.forwardRef((a,e)=>{const t=cr(js,a.__scopeMenu),n=x.useRef(null),i=We(e,n);return x.useEffect(()=>{const o=n.current;if(o)return Gp(o)},[]),d.jsx(mg,{...a,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Se(a.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),_L=x.forwardRef((a,e)=>{const t=cr(js,a.__scopeMenu);return d.jsx(mg,{...a,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),TL=lL("MenuContent.ScrollLock"),mg=x.forwardRef((a,e)=>{const{__scopeMenu:t,loop:n=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:h,onEscapeKeyDown:m,onPointerDownOutside:p,onFocusOutside:g,onInteractOutside:y,onDismiss:w,disableOutsideScroll:A,...S}=a,E=cr(js,t),C=uc(js,t),T=Vd(t),N=xA(t),M=yL(t),[L,I]=x.useState(null),O=x.useRef(null),P=We(e,O,E.onContentChange),F=x.useRef(0),$=x.useRef(""),W=x.useRef(0),ie=x.useRef(null),le=x.useRef("right"),G=x.useRef(0),fe=A?Dd:x.Fragment,R=A?{as:TL,allowPinchZoom:!0}:void 0,U=z=>{const ce=$.current+z,j=M().filter(J=>!J.disabled),k=document.activeElement,B=j.find(J=>J.ref.current===k)?.textValue,X=j.map(J=>J.textValue),K=zL(X,ce,B),oe=j.find(J=>J.textValue===K)?.ref.current;(function J(Y){$.current=Y,window.clearTimeout(F.current),Y!==""&&(F.current=window.setTimeout(()=>J(""),1e3))})(ce),oe&&setTimeout(()=>oe.focus())};x.useEffect(()=>()=>window.clearTimeout(F.current),[]),$p();const H=x.useCallback(z=>le.current===ie.current?.side&&HL(z,ie.current?.area),[]);return d.jsx(CL,{scope:t,searchRef:$,onItemEnter:x.useCallback(z=>{H(z)&&z.preventDefault()},[H]),onItemLeave:x.useCallback(z=>{H(z)||(O.current?.focus(),I(null))},[H]),onTriggerLeave:x.useCallback(z=>{H(z)&&z.preventDefault()},[H]),pointerGraceTimerRef:W,onPointerGraceIntentChange:x.useCallback(z=>{ie.current=z},[]),children:d.jsx(fe,{...R,children:d.jsx(jd,{asChild:!0,trapped:i,onMountAutoFocus:Se(o,z=>{z.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:d.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:m,onPointerDownOutside:p,onFocusOutside:g,onInteractOutside:y,onDismiss:w,children:d.jsx(Jw,{asChild:!0,...N,dir:C.dir,orientation:"vertical",loop:n,currentTabStopId:L,onCurrentTabStopIdChange:I,onEntryFocus:Se(h,z=>{C.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:d.jsx(VS,{role:"menu","aria-orientation":"vertical","data-state":FA(E.open),"data-radix-menu-content":"",dir:C.dir,...T,...S,ref:P,style:{outline:"none",...S.style},onKeyDown:Se(S.onKeyDown,z=>{const j=z.target.closest("[data-radix-menu-content]")===z.currentTarget,k=z.ctrlKey||z.altKey||z.metaKey,B=z.key.length===1;j&&(z.key==="Tab"&&z.preventDefault(),!k&&B&&U(z.key));const X=O.current;if(z.target!==X||!pL.includes(z.key))return;z.preventDefault();const oe=M().filter(J=>!J.disabled).map(J=>J.ref.current);yA.includes(z.key)&&oe.reverse(),IL(oe)}),onBlur:Se(a.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(F.current),$.current="")}),onPointerMove:Se(a.onPointerMove,ec(z=>{const ce=z.target,j=G.current!==z.clientX;if(z.currentTarget.contains(ce)&&j){const k=z.clientX>G.current?"right":"left";le.current=k,G.current=z.clientX}}))})})})})})})});CA.displayName=js;var NL="MenuGroup",pg=x.forwardRef((a,e)=>{const{__scopeMenu:t,...n}=a;return d.jsx(ze.div,{role:"group",...n,ref:e})});pg.displayName=NL;var jL="MenuLabel",EA=x.forwardRef((a,e)=>{const{__scopeMenu:t,...n}=a;return d.jsx(ze.div,{...n,ref:e})});EA.displayName=jL;var pd="MenuItem",Yx="menu.itemSelect",$d=x.forwardRef((a,e)=>{const{disabled:t=!1,onSelect:n,...i}=a,o=x.useRef(null),l=uc(pd,a.__scopeMenu),u=fg(pd,a.__scopeMenu),h=We(e,o),m=x.useRef(!1),p=()=>{const g=o.current;if(!t&&g){const y=new CustomEvent(Yx,{bubbles:!0,cancelable:!0});g.addEventListener(Yx,w=>n?.(w),{once:!0}),qw(g,y),y.defaultPrevented?m.current=!1:l.onClose()}};return d.jsx(_A,{...i,ref:h,disabled:t,onClick:Se(a.onClick,p),onPointerDown:g=>{a.onPointerDown?.(g),m.current=!0},onPointerUp:Se(a.onPointerUp,g=>{m.current||g.currentTarget?.click()}),onKeyDown:Se(a.onKeyDown,g=>{const y=u.searchRef.current!=="";t||y&&g.key===" "||gp.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});$d.displayName=pd;var _A=x.forwardRef((a,e)=>{const{__scopeMenu:t,disabled:n=!1,textValue:i,...o}=a,l=fg(pd,t),u=xA(t),h=x.useRef(null),m=We(e,h),[p,g]=x.useState(!1),[y,w]=x.useState("");return x.useEffect(()=>{const A=h.current;A&&w((A.textContent??"").trim())},[o.children]),d.jsx(Jl.ItemSlot,{scope:t,disabled:n,textValue:i??y,children:d.jsx(e1,{asChild:!0,...u,focusable:!n,children:d.jsx(ze.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:m,onPointerMove:Se(a.onPointerMove,ec(A=>{n?l.onItemLeave(A):(l.onItemEnter(A),A.defaultPrevented||A.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Se(a.onPointerLeave,ec(A=>l.onItemLeave(A))),onFocus:Se(a.onFocus,()=>g(!0)),onBlur:Se(a.onBlur,()=>g(!1))})})})}),ML="MenuCheckboxItem",TA=x.forwardRef((a,e)=>{const{checked:t=!1,onCheckedChange:n,...i}=a;return d.jsx(DA,{scope:a.__scopeMenu,checked:t,children:d.jsx($d,{role:"menuitemcheckbox","aria-checked":gd(t)?"mixed":t,...i,ref:e,"data-state":vg(t),onSelect:Se(i.onSelect,()=>n?.(gd(t)?!0:!t),{checkForDefaultPrevented:!1})})})});TA.displayName=ML;var NA="MenuRadioGroup",[RL,DL]=lr(NA,{value:void 0,onValueChange:()=>{}}),jA=x.forwardRef((a,e)=>{const{value:t,onValueChange:n,...i}=a,o=Mn(n);return d.jsx(RL,{scope:a.__scopeMenu,value:t,onValueChange:o,children:d.jsx(pg,{...i,ref:e})})});jA.displayName=NA;var MA="MenuRadioItem",RA=x.forwardRef((a,e)=>{const{value:t,...n}=a,i=DL(MA,a.__scopeMenu),o=t===i.value;return d.jsx(DA,{scope:a.__scopeMenu,checked:o,children:d.jsx($d,{role:"menuitemradio","aria-checked":o,...n,ref:e,"data-state":vg(o),onSelect:Se(n.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});RA.displayName=MA;var gg="MenuItemIndicator",[DA,kL]=lr(gg,{checked:!1}),kA=x.forwardRef((a,e)=>{const{__scopeMenu:t,forceMount:n,...i}=a,o=kL(gg,t);return d.jsx(ts,{present:n||gd(o.checked)||o.checked===!0,children:d.jsx(ze.span,{...i,ref:e,"data-state":vg(o.checked)})})});kA.displayName=gg;var OL="MenuSeparator",OA=x.forwardRef((a,e)=>{const{__scopeMenu:t,...n}=a;return d.jsx(ze.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});OA.displayName=OL;var LL="MenuArrow",LA=x.forwardRef((a,e)=>{const{__scopeMenu:t,...n}=a,i=Vd(t);return d.jsx($S,{...i,...n,ref:e})});LA.displayName=LL;var PL="MenuSub",[GB,PA]=lr(PL),Fl="MenuSubTrigger",IA=x.forwardRef((a,e)=>{const t=cr(Fl,a.__scopeMenu),n=uc(Fl,a.__scopeMenu),i=PA(Fl,a.__scopeMenu),o=fg(Fl,a.__scopeMenu),l=x.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:h}=o,m={__scopeMenu:a.__scopeMenu},p=x.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return x.useEffect(()=>p,[p]),x.useEffect(()=>{const g=u.current;return()=>{window.clearTimeout(g),h(null)}},[u,h]),d.jsx(dg,{asChild:!0,...m,children:d.jsx(_A,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":FA(t.open),...a,ref:Yi(e,i.onTriggerChange),onClick:g=>{a.onClick?.(g),!(a.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Se(a.onPointerMove,ec(g=>{o.onItemEnter(g),!g.defaultPrevented&&!a.disabled&&!t.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),p()},100))})),onPointerLeave:Se(a.onPointerLeave,ec(g=>{p();const y=t.content?.getBoundingClientRect();if(y){const w=t.content?.dataset.side,A=w==="right",S=A?-5:5,E=y[A?"left":"right"],C=y[A?"right":"left"];o.onPointerGraceIntentChange({area:[{x:g.clientX+S,y:g.clientY},{x:E,y:y.top},{x:C,y:y.top},{x:C,y:y.bottom},{x:E,y:y.bottom}],side:w}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(g),g.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Se(a.onKeyDown,g=>{const y=o.searchRef.current!=="";a.disabled||y&&g.key===" "||gL[n.dir].includes(g.key)&&(t.onOpenChange(!0),t.content?.focus(),g.preventDefault())})})})});IA.displayName=Fl;var BA="MenuSubContent",zA=x.forwardRef((a,e)=>{const t=SA(js,a.__scopeMenu),{forceMount:n=t.forceMount,...i}=a,o=cr(js,a.__scopeMenu),l=uc(js,a.__scopeMenu),u=PA(BA,a.__scopeMenu),h=x.useRef(null),m=We(e,h);return d.jsx(Jl.Provider,{scope:a.__scopeMenu,children:d.jsx(ts,{present:n||o.open,children:d.jsx(Jl.Slot,{scope:a.__scopeMenu,children:d.jsx(mg,{id:u.contentId,"aria-labelledby":u.triggerId,...i,ref:m,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{l.isUsingKeyboardRef.current&&h.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:Se(a.onFocusOutside,p=>{p.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Se(a.onEscapeKeyDown,p=>{l.onClose(),p.preventDefault()}),onKeyDown:Se(a.onKeyDown,p=>{const g=p.currentTarget.contains(p.target),y=vL[l.dir].includes(p.key);g&&y&&(o.onOpenChange(!1),u.trigger?.focus(),p.preventDefault())})})})})})});zA.displayName=BA;function FA(a){return a?"open":"closed"}function gd(a){return a==="indeterminate"}function vg(a){return gd(a)?"indeterminate":a?"checked":"unchecked"}function IL(a){const e=document.activeElement;for(const t of a)if(t===e||(t.focus(),document.activeElement!==e))return}function BL(a,e){return a.map((t,n)=>a[(e+n)%a.length])}function zL(a,e,t){const i=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,o=t?a.indexOf(t):-1;let l=BL(a,Math.max(o,0));i.length===1&&(l=l.filter(m=>m!==t));const h=l.find(m=>m.toLowerCase().startsWith(i.toLowerCase()));return h!==t?h:void 0}function FL(a,e){const{x:t,y:n}=a;let i=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const u=e[o],h=e[l],m=u.x,p=u.y,g=h.x,y=h.y;p>n!=y>n&&t<(g-m)*(n-p)/(y-p)+m&&(i=!i)}return i}function HL(a,e){if(!e)return!1;const t={x:a.clientX,y:a.clientY};return FL(t,e)}function ec(a){return e=>e.pointerType==="mouse"?a(e):void 0}var UL=wA,VL=dg,$L=AA,GL=CA,YL=pg,qL=EA,XL=$d,WL=TA,KL=jA,QL=RA,ZL=kA,JL=OA,eP=LA,tP=IA,nP=zA,Gd="DropdownMenu",[sP]=Ms(Gd,[bA]),Hn=bA(),[iP,HA]=sP(Gd),UA=a=>{const{__scopeDropdownMenu:e,children:t,dir:n,open:i,defaultOpen:o,onOpenChange:l,modal:u=!0}=a,h=Hn(e),m=x.useRef(null),[p,g]=Ca({prop:i,defaultProp:o??!1,onChange:l,caller:Gd});return d.jsx(iP,{scope:e,triggerId:di(),triggerRef:m,contentId:di(),open:p,onOpenChange:g,onOpenToggle:x.useCallback(()=>g(y=>!y),[g]),modal:u,children:d.jsx(UL,{...h,open:p,onOpenChange:g,dir:n,modal:u,children:t})})};UA.displayName=Gd;var VA="DropdownMenuTrigger",$A=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,disabled:n=!1,...i}=a,o=HA(VA,t),l=Hn(t);return d.jsx(VL,{asChild:!0,...l,children:d.jsx(ze.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:Yi(e,o.triggerRef),onPointerDown:Se(a.onPointerDown,u=>{!n&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:Se(a.onKeyDown,u=>{n||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});$A.displayName=VA;var aP="DropdownMenuPortal",GA=a=>{const{__scopeDropdownMenu:e,...t}=a,n=Hn(e);return d.jsx($L,{...n,...t})};GA.displayName=aP;var YA="DropdownMenuContent",qA=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=HA(YA,t),o=Hn(t),l=x.useRef(!1);return d.jsx(GL,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...n,ref:e,onCloseAutoFocus:Se(a.onCloseAutoFocus,u=>{l.current||i.triggerRef.current?.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:Se(a.onInteractOutside,u=>{const h=u.detail.originalEvent,m=h.button===0&&h.ctrlKey===!0,p=h.button===2||m;(!i.modal||p)&&(l.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qA.displayName=YA;var rP="DropdownMenuGroup",oP=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(YL,{...i,...n,ref:e})});oP.displayName=rP;var lP="DropdownMenuLabel",cP=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(qL,{...i,...n,ref:e})});cP.displayName=lP;var uP="DropdownMenuItem",XA=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(XL,{...i,...n,ref:e})});XA.displayName=uP;var dP="DropdownMenuCheckboxItem",hP=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(WL,{...i,...n,ref:e})});hP.displayName=dP;var fP="DropdownMenuRadioGroup",mP=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(KL,{...i,...n,ref:e})});mP.displayName=fP;var pP="DropdownMenuRadioItem",gP=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(QL,{...i,...n,ref:e})});gP.displayName=pP;var vP="DropdownMenuItemIndicator",yP=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(ZL,{...i,...n,ref:e})});yP.displayName=vP;var bP="DropdownMenuSeparator",xP=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(JL,{...i,...n,ref:e})});xP.displayName=bP;var wP="DropdownMenuArrow",SP=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(eP,{...i,...n,ref:e})});SP.displayName=wP;var AP="DropdownMenuSubTrigger",CP=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(tP,{...i,...n,ref:e})});CP.displayName=AP;var EP="DropdownMenuSubContent",_P=x.forwardRef((a,e)=>{const{__scopeDropdownMenu:t,...n}=a,i=Hn(t);return d.jsx(nP,{...i,...n,ref:e,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_P.displayName=EP;var TP=UA,NP=$A,jP=GA,MP=qA,RP=XA;function So({...a}){return d.jsx(TP,{"data-slot":"dropdown-menu",...a})}function Ao({...a}){return d.jsx(NP,{"data-slot":"dropdown-menu-trigger",...a})}function Co({className:a,sideOffset:e=4,...t}){return d.jsx(jP,{children:d.jsx(MP,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Pe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...t})})}function es({className:a,inset:e,variant:t="default",...n}){return d.jsx(RP,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:Pe("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...n})}const DP={unread:"",reading:"",completed:""},kP={unread:"bg-slate-100 text-slate-700",reading:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700"},OP={book:"",paper:"",article:"",other:""};function LP({book:a,category:e,onClick:t,onEdit:n,onDelete:i}){return d.jsx(Kt,{className:"cursor-pointer hover:shadow-md transition-shadow overflow-hidden",onClick:t,children:d.jsx(Qt,{className:"p-4",children:d.jsxs("div",{className:"flex gap-3",children:[d.jsx("div",{className:"flex-shrink-0",children:a.coverUrl?d.jsx("img",{src:a.coverUrl,alt:a.title,className:"w-20 h-28 object-cover rounded-md bg-muted"}):d.jsxs("div",{className:"w-20 h-28 rounded-md bg-muted flex items-center justify-center relative",children:[d.jsx(Oo,{className:"h-8 w-8 text-muted-foreground"}),a.fileId&&d.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 bg-primary rounded-full flex items-center justify-center",children:d.jsx(wa,{className:"h-3 w-3 text-primary-foreground"})})]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsx("h3",{className:"font-semibold text-sm line-clamp-2 flex-1",children:a.title}),d.jsxs(So,{children:[d.jsx(Ao,{asChild:!0,children:d.jsx(he,{variant:"ghost",size:"icon",className:"h-7 w-7 -mr-2 -mt-1 flex-shrink-0",onClick:o=>o.stopPropagation(),children:d.jsx(xo,{className:"h-4 w-4"})})}),d.jsxs(Co,{align:"end",children:[d.jsx(es,{onClick:o=>{o.stopPropagation(),n?.()},children:""}),d.jsx(es,{className:"text-destructive",onClick:o=>{o.stopPropagation(),i?.()},children:""})]})]})]}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.author}),d.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[d.jsx(gn,{variant:"secondary",className:`text-xs ${kP[a.status]}`,children:DP[a.status]}),d.jsx(gn,{variant:"outline",className:"text-xs",children:OP[a.type]}),e&&d.jsx(gn,{variant:"outline",className:"text-xs",style:{borderColor:e.color,color:e.color},children:e.name})]}),d.jsxs("div",{className:"flex items-center justify-between mt-3",children:[d.jsx("div",{className:"flex items-center gap-1",children:a.rating?d.jsxs(d.Fragment,{children:[d.jsx(O1,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),d.jsx("span",{className:"text-xs",children:a.rating})]}):d.jsx("span",{className:"text-xs text-muted-foreground",children:""})}),d.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.fileId&&d.jsx(wa,{className:"h-3 w-3 text-primary"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(oo,{className:"h-3 w-3"}),d.jsx("span",{className:"text-xs",children:a.annotations.length})]})]})]}),a.currentPage&&a.totalPages&&d.jsxs("div",{className:"mt-2",children:[d.jsx("div",{className:"h-1.5 w-full bg-muted rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${a.currentPage/a.totalPages*100}%`}})}),d.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[a.currentPage," / ",a.totalPages," "]})]})]})]})})})}const qx=[{value:"unread",label:""},{value:"reading",label:""},{value:"completed",label:""}],Xx=[{value:"book",label:""},{value:"paper",label:""},{value:"article",label:""},{value:"other",label:""}];function PP({books:a,categories:e,filter:t,onFilterChange:n,onBookClick:i,allTags:o,onEditBook:l,onDeleteBook:u}){const[h,m]=x.useState(!1),p=w=>e.find(A=>A.id===w),g=t.categoryId||t.status||t.type||t.tags&&t.tags.length>0,y=()=>{n({categoryId:void 0,status:void 0,type:void 0,tags:void 0})};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(pS,{open:h,onOpenChange:m,children:[d.jsx(gS,{asChild:!0,children:d.jsxs(he,{variant:"outline",size:"sm",className:"gap-2",children:[d.jsx(xM,{className:"h-4 w-4"}),"",g&&d.jsx(gn,{variant:"secondary",className:"ml-1",children:"!"})]})}),d.jsxs(vS,{side:"right",className:"w-full sm:max-w-md",children:[d.jsx(yS,{children:d.jsx(bS,{children:""})}),d.jsxs("div",{className:"space-y-6 py-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:""}),d.jsxs(Bi,{value:t.categoryId||"all",onValueChange:w=>n({categoryId:w==="all"?void 0:w}),children:[d.jsx(Fi,{children:d.jsx(zi,{placeholder:""})}),d.jsxs(Hi,{children:[d.jsx(Wt,{value:"all",children:""}),e.map(w=>d.jsx(Wt,{value:w.id,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:w.color}}),w.name]})},w.id))]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:""}),d.jsxs(Bi,{value:t.status||"all",onValueChange:w=>n({status:w==="all"?void 0:w}),children:[d.jsx(Fi,{children:d.jsx(zi,{placeholder:""})}),d.jsxs(Hi,{children:[d.jsx(Wt,{value:"all",children:""}),qx.map(w=>d.jsx(Wt,{value:w.value,children:w.label},w.value))]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:""}),d.jsxs(Bi,{value:t.type||"all",onValueChange:w=>n({type:w==="all"?void 0:w}),children:[d.jsx(Fi,{children:d.jsx(zi,{placeholder:""})}),d.jsxs(Hi,{children:[d.jsx(Wt,{value:"all",children:""}),Xx.map(w=>d.jsx(Wt,{value:w.value,children:w.label},w.value))]})]})]}),o.length>0&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:""}),d.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(w=>d.jsx(gn,{variant:t.tags?.includes(w)?"default":"outline",className:"cursor-pointer",onClick:()=>{const A=t.tags||[],S=A.includes(w)?A.filter(E=>E!==w):[...A,w];n({tags:S.length>0?S:void 0})},children:w},w))})]}),g&&d.jsx(he,{variant:"outline",className:"w-full",onClick:y,children:""})]})]})]}),t.categoryId&&d.jsxs(gn,{variant:"secondary",className:"gap-1",children:[p(t.categoryId)?.name,d.jsx(Fn,{className:"h-3 w-3 cursor-pointer",onClick:()=>n({categoryId:void 0})})]}),t.status&&d.jsxs(gn,{variant:"secondary",className:"gap-1",children:[qx.find(w=>w.value===t.status)?.label,d.jsx(Fn,{className:"h-3 w-3 cursor-pointer",onClick:()=>n({status:void 0})})]}),t.type&&d.jsxs(gn,{variant:"secondary",className:"gap-1",children:[Xx.find(w=>w.value===t.type)?.label,d.jsx(Fn,{className:"h-3 w-3 cursor-pointer",onClick:()=>n({type:void 0})})]})]}),d.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",a.length," "]}),a.length>0?d.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:a.map(w=>d.jsx(LP,{book:w,category:p(w.categoryId),onClick:()=>i(w),onEdit:()=>l?.(w),onDelete:()=>u?.(w.id)},w.id))}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("p",{className:"text-muted-foreground",children:""}),g&&d.jsx(he,{variant:"link",onClick:y,children:""})]})]})}function Vs({className:a,...e}){return d.jsx("textarea",{"data-slot":"textarea",className:Pe("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...e})}function ft({className:a,type:e,...t}){return d.jsx("input",{type:e,"data-slot":"input",className:Pe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...t})}var IP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],BP=IP.reduce((a,e)=>{const t=Up(`Primitive.${e}`),n=x.forwardRef((i,o)=>{const{asChild:l,...u}=i,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(h,{...u,ref:o})});return n.displayName=`Primitive.${e}`,{...a,[e]:n}},{}),zP="Label",WA=x.forwardRef((a,e)=>d.jsx(BP.label,{...a,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(a.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));WA.displayName=zP;var FP=WA;function Le({className:a,...e}){return d.jsx(FP,{"data-slot":"label",className:Pe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...e})}function vn({...a}){return d.jsx(Wp,{"data-slot":"dialog",...a})}function HP({...a}){return d.jsx(Kp,{"data-slot":"dialog-portal",...a})}function UP({className:a,...e}){return d.jsx(Qp,{"data-slot":"dialog-overlay",className:Pe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...e})}function yn({className:a,children:e,showCloseButton:t=!0,...n}){return d.jsxs(HP,{"data-slot":"dialog-portal",children:[d.jsx(UP,{}),d.jsxs(Zp,{"data-slot":"dialog-content",className:Pe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",a),...n,children:[e,t&&d.jsxs(Od,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[d.jsx(Fn,{}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function bn({className:a,...e}){return d.jsx("div",{"data-slot":"dialog-header",className:Pe("flex flex-col gap-2 text-center sm:text-left",a),...e})}function Hs({className:a,...e}){return d.jsx("div",{"data-slot":"dialog-footer",className:Pe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...e})}function xn({className:a,...e}){return d.jsx(Jp,{"data-slot":"dialog-title",className:Pe("text-lg leading-none font-semibold",a),...e})}function KA({className:a,...e}){return d.jsx(mS,{"data-slot":"dialog-description",className:Pe("text-muted-foreground text-sm",a),...e})}const VP={unread:"",reading:"",completed:""};function $P({book:a,categories:e,onBack:t,onUpdate:n,onDelete:i,onAddAnnotation:o,onUpdateAnnotation:l,onDeleteAnnotation:u,onUploadFile:h,onDeleteFile:m,onReadPDF:p,onReadText:g,hasFile:y,onUploadCover:w}){const[A,S]=x.useState(!1),[E,C]=x.useState(!1),[T,N]=x.useState(""),[M,L]=x.useState(""),[I,O]=x.useState(null),[P,F]=x.useState(""),[$,W]=x.useState({title:a.title,author:a.author,description:a.description||"",totalPages:a.totalPages?.toString()||"",currentPage:a.currentPage?.toString()||"",rating:a.rating?.toString()||""}),ie=x.useRef(null),le=x.useRef(null),G=e.find(K=>K.id===a.categoryId),fe=async K=>{const oe=K.target.files?.[0];if(oe&&w){if(!oe.type.startsWith("image/")){we.error("");return}await w(a.id,oe),we.success("")}},R=()=>{n(a.id,{coverUrl:void 0}),we.success("")},U=()=>{if(!$.title.trim()){we.error("");return}n(a.id,{title:$.title.trim(),author:$.author.trim(),description:$.description.trim()||void 0,totalPages:$.totalPages?parseInt($.totalPages):void 0,currentPage:$.currentPage?parseInt($.currentPage):void 0,rating:$.rating?parseInt($.rating):void 0}),S(!1),we.success("")},H=()=>{i(a.id)},z=()=>{if(!T.trim()){we.error("");return}o(a.id,T.trim(),M?parseInt(M):void 0),N(""),L(""),we.success("")},ce=()=>{if(!I||!P.trim()){we.error("");return}l(a.id,I.id,P.trim()),O(null),F(""),we.success("")},j=K=>{u(a.id,K)},k=K=>{const oe=K.target.files?.[0];oe&&h&&h(a.id,oe)},B=async()=>{if(m)try{await m(a.id),we.success("")}catch{we.error("")}},X=a.totalPages&&a.currentPage?Math.round(a.currentPage/a.totalPages*100):0;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(he,{variant:"ghost",size:"icon",onClick:t,children:d.jsx(np,{className:"h-5 w-5"})}),d.jsx("h1",{className:"text-lg font-semibold flex-1 truncate",children:a.title}),d.jsxs(So,{children:[d.jsx(Ao,{asChild:!0,children:d.jsx(he,{variant:"ghost",size:"icon",children:d.jsx(xo,{className:"h-5 w-5"})})}),d.jsxs(Co,{align:"end",children:[d.jsxs(es,{onClick:()=>S(!0),children:[d.jsx($l,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(es,{className:"text-destructive",onClick:()=>C(!0),children:[d.jsx(Us,{className:"h-4 w-4 mr-2"}),""]})]})]})]}),d.jsx(Kt,{children:d.jsxs(Qt,{className:"p-4",children:[d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"flex-shrink-0 relative group",children:[a.coverUrl?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:a.coverUrl,alt:a.title,className:"w-28 h-40 object-cover rounded-lg bg-muted"}),d.jsxs("div",{className:"absolute inset-0 bg-black/50 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[d.jsx(he,{variant:"ghost",size:"icon",className:"text-white hover:text-white hover:bg-white/20",onClick:()=>le.current?.click(),children:d.jsx(Wl,{className:"h-4 w-4"})}),d.jsx(he,{variant:"ghost",size:"icon",className:"text-white hover:text-white hover:bg-white/20",onClick:R,children:d.jsx(Fn,{className:"h-4 w-4"})})]})]}):d.jsxs("div",{className:"w-28 h-40 rounded-lg bg-gradient-to-br from-muted to-muted/50 flex flex-col items-center justify-center cursor-pointer hover:from-muted/80 hover:to-muted/30 transition-colors border-2 border-dashed border-muted-foreground/30",onClick:()=>le.current?.click(),children:[d.jsx(Dj,{className:"h-10 w-10 text-muted-foreground/50 mb-2"}),d.jsx("span",{className:"text-xs text-muted-foreground/70",children:""})]}),d.jsx("input",{ref:le,type:"file",accept:"image/*",className:"hidden",onChange:fe})]}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"font-semibold text-lg",children:a.title}),d.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[d.jsx(MM,{className:"h-3 w-3"}),a.author]})]}),G&&d.jsx(gn,{variant:"outline",style:{borderColor:G.color,color:G.color},children:G.name}),d.jsxs(Bi,{value:a.status,onValueChange:K=>{n(a.id,{status:K,completedAt:K==="completed"?new Date().toISOString():void 0}),we.success("")},children:[d.jsx(Fi,{className:"w-32 h-8",children:d.jsx(zi,{})}),d.jsx(Hi,{children:Object.entries(VP).map(([K,oe])=>d.jsx(Wt,{value:K,children:oe},K))})]}),d.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(K=>d.jsx("button",{onClick:()=>n(a.id,{rating:K}),className:"p-0.5",children:d.jsx(O1,{className:`h-5 w-5 ${(a.rating||0)>=K?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`})},K))})]})]}),d.jsxs("div",{className:"mt-4 pt-4 border-t",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-medium",children:""}),y?d.jsxs("div",{className:"flex gap-2",children:[a.fileType==="txt"&&g&&d.jsxs(he,{size:"sm",variant:"outline",onClick:g,children:[d.jsx(rx,{className:"h-4 w-4 mr-1"}),""]}),a.fileType&&a.fileType!=="txt"&&wR(a.fileType)&&p&&d.jsxs(he,{size:"sm",variant:"outline",onClick:p,children:[d.jsx(rx,{className:"h-4 w-4 mr-1"}),""]}),m&&d.jsxs(he,{size:"sm",variant:"outline",className:"text-destructive",onClick:B,children:[d.jsx(Us,{className:"h-4 w-4 mr-1"}),""]})]}):d.jsxs(he,{size:"sm",variant:"outline",onClick:()=>ie.current?.click(),children:[d.jsx(Wl,{className:"h-4 w-4 mr-1"}),""]})]}),d.jsx("input",{ref:ie,type:"file",className:"hidden",onChange:k}),y&&d.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[d.jsx("span",{className:"text-lg",children:a.fileType?bR(a.fileType):""}),d.jsx("span",{children:a.fileName||""}),a.fileType&&d.jsx(gn,{variant:"secondary",className:"text-xs",children:xR(a.fileType)})]})]}),a.totalPages&&d.jsxs("div",{className:"mt-4 pt-4 border-t",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm",children:""}),d.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.currentPage||0," / ",a.totalPages,"  (",X,"%)"]})]}),d.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${X}%`}})}),d.jsxs("div",{className:"flex gap-2 mt-3",children:[d.jsx(ft,{type:"number",placeholder:"",value:a.currentPage||"",onChange:K=>n(a.id,{currentPage:K.target.value?parseInt(K.target.value):void 0}),className:"w-28"}),d.jsx(he,{variant:"outline",size:"sm",onClick:()=>n(a.id,{currentPage:a.totalPages,status:"completed",completedAt:new Date().toISOString()}),children:""})]})]}),a.description&&d.jsx("div",{className:"mt-4 pt-4 border-t",children:d.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:a.description})}),a.tags.length>0&&d.jsx("div",{className:"mt-4 pt-4 border-t",children:d.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(K=>d.jsx(gn,{variant:"secondary",children:K},K))})}),d.jsxs("div",{className:"mt-4 pt-4 border-t flex items-center gap-4 text-xs text-muted-foreground",children:[d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(yo,{className:"h-3 w-3"})," ",new Date(a.createdAt).toLocaleDateString()]}),a.completedAt&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(yo,{className:"h-3 w-3"})," ",new Date(a.completedAt).toLocaleDateString()]})]})]})}),d.jsxs(Kt,{children:[d.jsx(sd,{children:d.jsxs(id,{className:"text-lg flex items-center gap-2",children:[d.jsx(oo,{className:"h-5 w-5"})," (",a.annotations.length,")"]})}),d.jsxs(Qt,{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Vs,{placeholder:"...",value:T,onChange:K=>N(K.target.value),rows:3}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ft,{type:"number",placeholder:"",value:M,onChange:K=>L(K.target.value),className:"w-32"}),d.jsxs(he,{onClick:z,disabled:!T.trim(),className:"gap-2",children:[d.jsx(Ii,{className:"h-4 w-4"}),""]})]})]}),a.annotations.length>0?d.jsx("div",{className:"space-y-3",children:a.annotations.map(K=>d.jsx("div",{className:"p-3 bg-muted rounded-lg",children:d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsx("div",{className:"flex-1",children:I?.id===K.id?d.jsxs("div",{className:"space-y-2",children:[d.jsx(Vs,{value:P,onChange:oe=>F(oe.target.value),rows:3}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(he,{size:"sm",onClick:ce,children:""}),d.jsx(he,{size:"sm",variant:"outline",onClick:()=>{O(null),F("")},children:""})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-sm whitespace-pre-wrap",children:K.content}),K.page&&d.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",K.page," "]}),d.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(K.createdAt).toLocaleString()})]})}),I?.id!==K.id&&d.jsxs(So,{children:[d.jsx(Ao,{asChild:!0,children:d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8",children:d.jsx(xo,{className:"h-4 w-4"})})}),d.jsxs(Co,{align:"end",children:[d.jsxs(es,{onClick:()=>{O(K),F(K.content)},children:[d.jsx($l,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(es,{className:"text-destructive",onClick:()=>j(K.id),children:[d.jsx(Us,{className:"h-4 w-4 mr-2"}),""]})]})]})]})},K.id))}):d.jsx("p",{className:"text-center text-muted-foreground py-4",children:""})]})]}),d.jsx(vn,{open:A,onOpenChange:S,children:d.jsxs(yn,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[d.jsx(bn,{children:d.jsx(xn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs(Le,{children:[" ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx(ft,{value:$.title,onChange:K=>W({...$,title:K.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:$.author,onChange:K=>W({...$,author:K.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(Vs,{value:$.description,onChange:K=>W({...$,description:K.target.value}),rows:3,placeholder:""})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{type:"number",value:$.totalPages,onChange:K=>W({...$,totalPages:K.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{type:"number",value:$.currentPage,onChange:K=>W({...$,currentPage:K.target.value}),placeholder:""})]})]})]}),d.jsxs(Hs,{children:[d.jsx(he,{variant:"outline",onClick:()=>S(!1),children:""}),d.jsx(he,{onClick:U,children:""})]})]})}),d.jsx(vn,{open:E,onOpenChange:C,children:d.jsxs(yn,{children:[d.jsxs(bn,{children:[d.jsx(xn,{children:""}),d.jsxs(KA,{children:["",a.title,"PDF"]})]}),d.jsxs(Hs,{children:[d.jsx(he,{variant:"outline",onClick:()=>C(!1),children:""}),d.jsx(he,{variant:"destructive",onClick:H,children:""})]})]})})]})}const GP=[{value:"book",label:"",icon:d.jsx(Oo,{className:"h-4 w-4"})},{value:"paper",label:"",icon:d.jsx(wa,{className:"h-4 w-4"})},{value:"article",label:"",icon:d.jsx(Zj,{className:"h-4 w-4"})},{value:"other",label:"",icon:d.jsx(R1,{className:"h-4 w-4"})}];function YP({open:a,onOpenChange:e,categories:t,onAdd:n,allTags:i}){const[o,l]=x.useState({title:"",author:"",description:"",type:"book",categoryId:t[0]?.id||"",status:"unread",totalPages:"",tags:[],newTag:""}),u=()=>{if(!o.title.trim()||!o.author.trim()){we.error("");return}n({title:o.title.trim(),author:o.author.trim(),description:o.description.trim()||void 0,type:o.type,categoryId:o.categoryId,status:o.status,totalPages:o.totalPages?parseInt(o.totalPages):void 0,tags:o.tags,rating:void 0,coverUrl:void 0,currentPage:void 0,completedAt:void 0}),we.success(""),h(),e(!1)},h=()=>{l({title:"",author:"",description:"",type:"book",categoryId:t[0]?.id||"",status:"unread",totalPages:"",tags:[],newTag:""})},m=()=>{o.newTag.trim()&&!o.tags.includes(o.newTag.trim())&&l({...o,tags:[...o.tags,o.newTag.trim()],newTag:""})},p=y=>{l({...o,tags:o.tags.filter(w=>w!==y)})},g=y=>{o.tags.includes(y)||l({...o,tags:[...o.tags,y]})};return d.jsx(vn,{open:a,onOpenChange:e,children:d.jsxs(yn,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[d.jsxs(bn,{children:[d.jsx(xn,{children:"/"}),d.jsx(KA,{children:""})]}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:GP.map(y=>d.jsxs("button",{onClick:()=>l({...o,type:y.value}),className:`flex flex-col items-center gap-1 p-3 rounded-lg border transition-colors ${o.type===y.value?"border-primary bg-primary/5":"border-border hover:bg-accent"}`,children:[y.icon,d.jsx("span",{className:"text-xs",children:y.label})]},y.value))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs(Le,{children:["/ ",d.jsx("span",{className:"text-destructive",children:"*"})]}),d.jsx(ft,{placeholder:"",value:o.title,onChange:y=>l({...o,title:y.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs(Le,{children:[" ",d.jsx("span",{className:"text-destructive",children:"*"})]}),d.jsx(ft,{placeholder:"",value:o.author,onChange:y=>l({...o,author:y.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsxs(Bi,{value:o.categoryId,onValueChange:y=>l({...o,categoryId:y}),children:[d.jsx(Fi,{children:d.jsx(zi,{placeholder:""})}),d.jsx(Hi,{children:t.map(y=>d.jsx(Wt,{value:y.id,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y.color}}),y.name]})},y.id))})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsxs(Bi,{value:o.status,onValueChange:y=>l({...o,status:y}),children:[d.jsx(Fi,{children:d.jsx(zi,{})}),d.jsxs(Hi,{children:[d.jsx(Wt,{value:"unread",children:""}),d.jsx(Wt,{value:"reading",children:""}),d.jsx(Wt,{value:"completed",children:""})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{type:"number",placeholder:"",value:o.totalPages,onChange:y=>l({...o,totalPages:y.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(Vs,{placeholder:"",value:o.description,onChange:y=>l({...o,description:y.target.value}),rows:3})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ft,{placeholder:"",value:o.newTag,onChange:y=>l({...o,newTag:y.target.value}),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),m())}}),d.jsx(he,{type:"button",onClick:m,variant:"outline",children:""})]}),i.length>0&&d.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[d.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:":"}),i.map(y=>d.jsx(gn,{variant:o.tags.includes(y)?"default":"outline",className:"cursor-pointer text-xs",onClick:()=>g(y),children:y},y))]}),o.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.tags.map(y=>d.jsxs(gn,{variant:"secondary",className:"gap-1",children:[y,d.jsx("button",{onClick:()=>p(y),className:"ml-1 hover:text-destructive",children:""})]},y))})]})]}),d.jsxs(Hs,{children:[d.jsx(he,{variant:"outline",onClick:()=>e(!1),children:""}),d.jsx(he,{onClick:u,children:""})]})]})})}function qP(a,e=[]){let t=[];function n(o,l){const u=x.createContext(l);u.displayName=o+"Context";const h=t.length;t=[...t,l];const m=g=>{const{scope:y,children:w,...A}=g,S=y?.[a]?.[h]||u,E=x.useMemo(()=>A,Object.values(A));return d.jsx(S.Provider,{value:E,children:w})};m.displayName=o+"Provider";function p(g,y){const w=y?.[a]?.[h]||u,A=x.useContext(w);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[m,p]}const i=()=>{const o=t.map(l=>x.createContext(l));return function(u){const h=u?.[a]||o;return x.useMemo(()=>({[`__scope${a}`]:{...u,[a]:h}}),[u,h])}};return i.scopeName=a,[n,XP(i,...e)]}function XP(...a){const e=a[0];if(a.length===1)return e;const t=()=>{const n=a.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const l=n.reduce((u,{useScope:h,scopeName:m})=>{const g=h(o)[`__scope${m}`];return{...u,...g}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var WP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],QA=WP.reduce((a,e)=>{const t=Up(`Primitive.${e}`),n=x.forwardRef((i,o)=>{const{asChild:l,...u}=i,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(h,{...u,ref:o})});return n.displayName=`Primitive.${e}`,{...a,[e]:n}},{}),yg="Progress",bg=100,[KP]=qP(yg),[QP,ZP]=KP(yg),ZA=x.forwardRef((a,e)=>{const{__scopeProgress:t,value:n=null,max:i,getValueLabel:o=JP,...l}=a;(i||i===0)&&!Wx(i)&&console.error(e3(`${i}`,"Progress"));const u=Wx(i)?i:bg;n!==null&&!Kx(n,u)&&console.error(t3(`${n}`,"Progress"));const h=Kx(n,u)?n:null,m=vd(h)?o(h,u):void 0;return d.jsx(QP,{scope:t,value:h,max:u,children:d.jsx(QA.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":vd(h)?h:void 0,"aria-valuetext":m,role:"progressbar","data-state":tC(h,u),"data-value":h??void 0,"data-max":u,...l,ref:e})})});ZA.displayName=yg;var JA="ProgressIndicator",eC=x.forwardRef((a,e)=>{const{__scopeProgress:t,...n}=a,i=ZP(JA,t);return d.jsx(QA.div,{"data-state":tC(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:e})});eC.displayName=JA;function JP(a,e){return`${Math.round(a/e*100)}%`}function tC(a,e){return a==null?"indeterminate":a===e?"complete":"loading"}function vd(a){return typeof a=="number"}function Wx(a){return vd(a)&&!isNaN(a)&&a>0}function Kx(a,e){return vd(a)&&!isNaN(a)&&a<=e&&a>=0}function e3(a,e){return`Invalid prop \`max\` of value \`${a}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${bg}\`.`}function t3(a,e){return`Invalid prop \`value\` of value \`${a}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${bg} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var n3=ZA,s3=eC;function i3({className:a,value:e,...t}){return d.jsx(n3,{"data-slot":"progress",className:Pe("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...t,children:d.jsx(s3,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function a3({stats:a}){const e=a.total>0?Math.round(a.completed/a.total*100):0;return d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-lg font-semibold",children:""}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Kt,{children:d.jsx(Qt,{className:"p-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:d.jsx(Oo,{className:"h-5 w-5 text-primary"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold",children:a.total}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})}),d.jsx(Kt,{children:d.jsx(Qt,{className:"p-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:d.jsx(T1,{className:"h-5 w-5 text-green-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold",children:a.completed}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})}),d.jsx(Kt,{children:d.jsx(Qt,{className:"p-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:d.jsx(uj,{className:"h-5 w-5 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold",children:a.reading}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})}),d.jsx(Kt,{children:d.jsx(Qt,{className:"p-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:d.jsx(oo,{className:"h-5 w-5 text-purple-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold",children:a.totalAnnotations}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsx(Kt,{children:d.jsxs(Qt,{className:"p-4 text-center",children:[d.jsx(M1,{className:"h-5 w-5 mx-auto text-orange-500 mb-2"}),d.jsx("p",{className:"text-xl font-bold",children:a.projectCount}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}),d.jsx(Kt,{children:d.jsxs(Qt,{className:"p-4 text-center",children:[d.jsx(hj,{className:"h-5 w-5 mx-auto text-yellow-500 mb-2"}),d.jsx("p",{className:"text-xl font-bold",children:a.pendingNotes}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}),d.jsx(Kt,{children:d.jsxs(Qt,{className:"p-4 text-center",children:[d.jsx(QN,{className:"h-5 w-5 mx-auto text-cyan-500 mb-2"}),d.jsx("p",{className:"text-xl font-bold",children:a.noteCount}),d.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})]}),d.jsxs(Kt,{children:[d.jsx(sd,{children:d.jsx(id,{className:"text-sm font-medium",children:""})}),d.jsx(Qt,{children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsxs("span",{children:[e,"%"]}),d.jsxs("span",{className:"text-muted-foreground",children:[a.completed," / ",a.total]})]}),d.jsx(i3,{value:e,className:"h-2"})]})})]}),d.jsxs(Kt,{children:[d.jsx(sd,{children:d.jsx(id,{className:"text-sm font-medium",children:""})}),d.jsx(Qt,{children:d.jsxs("div",{className:"space-y-3",children:[a.categoryStats.filter(t=>t.count>0).sort((t,n)=>n.count-t.count).map(t=>d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),d.jsx("span",{className:"text-sm flex-1",children:t.name}),d.jsx("span",{className:"text-sm font-medium",children:t.count})]},t.id)),a.categoryStats.filter(t=>t.count>0).length===0&&d.jsx("p",{className:"text-sm text-muted-foreground text-center py-2",children:""})]})})]}),d.jsxs(Kt,{children:[d.jsx(sd,{children:d.jsx(id,{className:"text-sm font-medium",children:""})}),d.jsx(Qt,{children:d.jsxs("div",{className:"space-y-3",children:[a.typeStats?[{key:"book",label:"",count:a.typeStats.book},{key:"paper",label:"",count:a.typeStats.paper},{key:"article",label:"",count:a.typeStats.article},{key:"other",label:"",count:a.typeStats.other}].filter(t=>t.count>0).map(t=>d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-sm flex-1",children:t.label}),d.jsx("span",{className:"text-sm font-medium",children:t.count})]},t.key)):null,(!a.typeStats||a.total===0)&&d.jsx("p",{className:"text-sm text-muted-foreground text-center py-2",children:""})]})})]})]})}var r3=Symbol("radix.slottable");function o3(a){const e=({children:t})=>d.jsx(d.Fragment,{children:t});return e.displayName=`${a}.Slottable`,e.__radixId=r3,e}var nC="AlertDialog",[l3]=Ms(nC,[Q1]),qi=Q1(),sC=a=>{const{__scopeAlertDialog:e,...t}=a,n=qi(e);return d.jsx(Wp,{...n,...t,modal:!0})};sC.displayName=nC;var c3="AlertDialogTrigger",u3=x.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...n}=a,i=qi(t);return d.jsx(fS,{...i,...n,ref:e})});u3.displayName=c3;var d3="AlertDialogPortal",iC=a=>{const{__scopeAlertDialog:e,...t}=a,n=qi(e);return d.jsx(Kp,{...n,...t})};iC.displayName=d3;var h3="AlertDialogOverlay",aC=x.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...n}=a,i=qi(t);return d.jsx(Qp,{...i,...n,ref:e})});aC.displayName=h3;var uo="AlertDialogContent",[f3,m3]=l3(uo),p3=o3("AlertDialogContent"),rC=x.forwardRef((a,e)=>{const{__scopeAlertDialog:t,children:n,...i}=a,o=qi(t),l=x.useRef(null),u=We(e,l),h=x.useRef(null);return d.jsx(qD,{contentName:uo,titleName:oC,docsSlug:"alert-dialog",children:d.jsx(f3,{scope:t,cancelRef:h,children:d.jsxs(Zp,{role:"alertdialog",...o,...i,ref:u,onOpenAutoFocus:Se(i.onOpenAutoFocus,m=>{m.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[d.jsx(p3,{children:n}),d.jsx(v3,{contentRef:l})]})})})});rC.displayName=uo;var oC="AlertDialogTitle",lC=x.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...n}=a,i=qi(t);return d.jsx(Jp,{...i,...n,ref:e})});lC.displayName=oC;var cC="AlertDialogDescription",uC=x.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...n}=a,i=qi(t);return d.jsx(mS,{...i,...n,ref:e})});uC.displayName=cC;var g3="AlertDialogAction",dC=x.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...n}=a,i=qi(t);return d.jsx(Od,{...i,...n,ref:e})});dC.displayName=g3;var hC="AlertDialogCancel",fC=x.forwardRef((a,e)=>{const{__scopeAlertDialog:t,...n}=a,{cancelRef:i}=m3(hC,t),o=qi(t),l=We(e,i);return d.jsx(Od,{...o,...n,ref:l})});fC.displayName=hC;var v3=({contentRef:a})=>{const e=`\`${uo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${uo}\` by passing a \`${cC}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${uo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,a]),null},y3=sC,b3=iC,x3=aC,w3=rC,S3=dC,A3=fC,C3=lC,E3=uC;function _3({...a}){return d.jsx(y3,{"data-slot":"alert-dialog",...a})}function T3({...a}){return d.jsx(b3,{"data-slot":"alert-dialog-portal",...a})}function N3({className:a,...e}){return d.jsx(x3,{"data-slot":"alert-dialog-overlay",className:Pe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...e})}function j3({className:a,...e}){return d.jsxs(T3,{children:[d.jsx(N3,{}),d.jsx(w3,{"data-slot":"alert-dialog-content",className:Pe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...e})]})}function M3({className:a,...e}){return d.jsx("div",{"data-slot":"alert-dialog-header",className:Pe("flex flex-col gap-2 text-center sm:text-left",a),...e})}function R3({className:a,...e}){return d.jsx("div",{"data-slot":"alert-dialog-footer",className:Pe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...e})}function D3({className:a,...e}){return d.jsx(C3,{"data-slot":"alert-dialog-title",className:Pe("text-lg font-semibold",a),...e})}function k3({className:a,...e}){return d.jsx(E3,{"data-slot":"alert-dialog-description",className:Pe("text-muted-foreground text-sm",a),...e})}function O3({className:a,...e}){return d.jsx(S3,{className:Pe(Vp(),a),...e})}function L3({className:a,...e}){return d.jsx(A3,{className:Pe(Vp({variant:"outline"}),a),...e})}function P3({categories:a,onAddCategory:e,onDeleteCategory:t}){const[n,i]=x.useState(!1),[o,l]=x.useState(!1),[u,h]=x.useState(null),[m,p]=x.useState(""),[g,y]=x.useState(Nm[0]),w=()=>{if(!m.trim()){we.error("");return}e(m.trim(),g),p(""),y(Nm[0]),i(!1),we.success("")},A=()=>{u&&(t(u.id),l(!1),h(null),we.success(""))};return d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-sm font-medium",children:""}),d.jsxs(he,{size:"sm",variant:"outline",onClick:()=>i(!0),children:[d.jsx(Ii,{className:"h-4 w-4 mr-1"}),""]})]}),d.jsx("div",{className:"space-y-2",children:a.map(S=>d.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:S.color}}),d.jsx("span",{className:"text-sm",children:S.name})]}),!["cat-entertainment","cat-tech","cat-academic","cat-literature","cat-business","cat-other"].includes(S.id)&&d.jsx(he,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-destructive",onClick:()=>{h(S),l(!0)},children:d.jsx(Fn,{className:"h-4 w-4"})})]},S.id))}),d.jsx(vn,{open:n,onOpenChange:i,children:d.jsxs(yn,{children:[d.jsx(bn,{children:d.jsx(xn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:m,onChange:S=>p(S.target.value),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx("div",{className:"flex flex-wrap gap-2",children:Nm.map(S=>d.jsx("button",{onClick:()=>y(S),className:`w-8 h-8 rounded-full transition-all ${g===S?"ring-2 ring-offset-2 ring-primary scale-110":""}`,style:{backgroundColor:S}},S))})]})]}),d.jsxs(Hs,{children:[d.jsx(he,{variant:"outline",onClick:()=>i(!1),children:""}),d.jsx(he,{onClick:w,children:""})]})]})}),d.jsx(_3,{open:o,onOpenChange:l,children:d.jsxs(j3,{children:[d.jsxs(M3,{children:[d.jsx(D3,{children:""}),d.jsxs(k3,{children:['"',u?.name,'"""']})]}),d.jsxs(R3,{children:[d.jsx(L3,{onClick:()=>h(null),children:""}),d.jsx(O3,{onClick:A,className:"bg-destructive",children:""})]})]})})]})}function I3({value:a,onChange:e,placeholder:t="..."}){return d.jsxs("div",{className:"relative",children:[d.jsx(k1,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),d.jsx(ft,{value:a,onChange:n=>e(n.target.value),placeholder:t,className:"pl-10 pr-10"}),a&&d.jsx(he,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>e(""),children:d.jsx(Fn,{className:"h-4 w-4"})})]})}const Bn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),vp=[.001,0,0,.001,0,0],Fm=1.35,cs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ci={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},tc="pdfjs_internal_editor_",qe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},mC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Nn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Gl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},qt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},no={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},dc={ERRORS:0,WARNINGS:1,INFOS:5},Eo={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Hu={moveTo:0,lineTo:1,curveTo:2,closePath:3},pC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Yd=dc.WARNINGS;function B3(a){Number.isInteger(a)&&(Yd=a)}function z3(){return Yd}function qd(a){Yd>=dc.INFOS&&console.info(`Info: ${a}`)}function Xe(a){Yd>=dc.WARNINGS&&console.warn(`Warning: ${a}`)}function _t(a){throw new Error(a)}function ct(a,e){a||_t(e)}function F3(a){switch(a?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xg(a,e=null,t=null){if(!a)return null;if(t&&typeof a=="string"&&(t.addDefaultProtocol&&a.startsWith("www.")&&a.match(/\./g)?.length>=2&&(a=`http://${a}`),t.tryConvertEncoding))try{a=G3(a)}catch{}const n=e?URL.parse(a,e):URL.parse(a);return F3(n)?n:null}function wg(a,e,t=!1){const n=URL.parse(a);return n?(n.hash=e,n.href):t&&xg(a,"http://example.com")?a.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Ze(a,e,t,n=!1){return Object.defineProperty(a,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const ur=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class Qx extends ur{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Hm extends ur{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class yd extends ur{constructor(e){super(e,"InvalidPDFException")}}class nc extends ur{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class H3 extends ur{constructor(e){super(e,"FormatError")}}class $i extends ur{constructor(e){super(e,"AbortException")}}function gC(a){(typeof a!="object"||a?.length===void 0)&&_t("Invalid argument for bytesToString");const e=a.length,t=8192;if(e<t)return String.fromCharCode.apply(null,a);const n=[];for(let i=0;i<e;i+=t){const o=Math.min(i+t,e),l=a.subarray(i,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function hc(a){typeof a!="string"&&_t("Invalid argument for stringToBytes");const e=a.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=a.charCodeAt(n)&255;return t}function U3(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function V3(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function $3(){try{return new Function(""),!0}catch{return!1}}class wn{static get isLittleEndian(){return Ze(this,"isLittleEndian",V3())}static get isEvalSupported(){return Ze(this,"isEvalSupported",$3())}static get isOffscreenCanvasSupported(){return Ze(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ze(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Ze(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Ze(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Um=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));class Te{static makeHexColor(e,t,n){return`#${Um[e]}${Um[t]}${Um[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const i=e[n],o=e[n+1];e[n]=i*t[0]+o*t[2]+t[4],e[n+1]=i*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const i=t[0],o=t[1],l=t[2],u=t[3],h=t[4],m=t[5];for(let p=0;p<6;p+=2){const g=e[n+p],y=e[n+p+1];e[n+p]=g*i+y*l+h,e[n+p+1]=g*o+y*u+m}}static applyInverseTransform(e,t){const n=e[0],i=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,n){const i=t[0],o=t[1],l=t[2],u=t[3],h=t[4],m=t[5],p=e[0],g=e[1],y=e[2],w=e[3];let A=i*p+h,S=A,E=i*y+h,C=E,T=u*g+m,N=T,M=u*w+m,L=M;if(o!==0||l!==0){const I=o*p,O=o*y,P=l*g,F=l*w;A+=P,C+=P,E+=F,S+=F,T+=I,L+=I,M+=O,N+=O}n[0]=Math.min(n[0],A,E,S,C),n[1]=Math.min(n[1],T,M,N,L),n[2]=Math.max(n[2],A,E,S,C),n[3]=Math.max(n[3],T,M,N,L)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],o=e[2],l=e[3],u=n**2+i**2,h=n*o+i*l,m=o**2+l**2,p=(u+m)/2,g=Math.sqrt(p**2-(u*m-h**2));t[0]=Math.sqrt(p+g||1),t[1]=Math.sqrt(p-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>l?null:[n,o,i,l]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,o){o[0]=Math.min(o[0],e,n),o[1]=Math.min(o[1],t,i),o[2]=Math.max(o[2],e,n),o[3]=Math.max(o[3],t,i)}static#e(e,t,n,i,o,l,u,h,m,p){if(m<=0||m>=1)return;const g=1-m,y=m*m,w=y*m,A=g*(g*(g*e+3*m*t)+3*y*n)+w*i,S=g*(g*(g*o+3*m*l)+3*y*u)+w*h;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],S),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],S)}static#t(e,t,n,i,o,l,u,h,m,p,g,y){if(Math.abs(m)<1e-12){Math.abs(p)>=1e-12&&this.#e(e,t,n,i,o,l,u,h,-g/p,y);return}const w=p**2-4*g*m;if(w<0)return;const A=Math.sqrt(w),S=2*m;this.#e(e,t,n,i,o,l,u,h,(-p+A)/S,y),this.#e(e,t,n,i,o,l,u,h,(-p-A)/S,y)}static bezierBoundingBox(e,t,n,i,o,l,u,h,m){m[0]=Math.min(m[0],e,u),m[1]=Math.min(m[1],t,h),m[2]=Math.max(m[2],e,u),m[3]=Math.max(m[3],t,h),this.#t(e,n,o,u,t,i,l,h,3*(-e+3*(n-o)+u),6*(e-2*n+o),3*(n-e),m),this.#t(e,n,o,u,t,i,l,h,3*(-t+3*(i-l)+h),6*(t-2*i+l),3*(i-t),m)}}function G3(a){return decodeURIComponent(escape(a))}let Vm=null,Zx=null;function vC(a){return Vm||(Vm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Zx=new Map([["","t"]])),a.replaceAll(Vm,(e,t,n)=>t?t.normalize("NFKC"):Zx.get(n))}function Sg(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),gC(a)}const Ag="pdfjs_internal_id_";function Y3(a,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,i,...o]=t;if(!a(n)&&!Number.isInteger(n)||!e(i))return!1;const l=o.length;let u=!0;switch(i.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function On(a,e,t){return Math.min(Math.max(a,e),t)}function yC(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(gC(a))}function q3(a){return Uint8Array.fromBase64?Uint8Array.fromBase64(a):hc(atob(a))}typeof Promise.try!="function"&&(Promise.try=function(a,...e){return new Promise(t=>{t(a(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(a){return a.reduce((e,t)=>e+t,0)});class sc{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(sc.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&t.push({str:l}),!!o.children)for(const h of o.children)i(h)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class Cg{static setupStorage(e,t,n,i,o){const l=i.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),o==="print")break;e.addEventListener("input",u=>{i.setValue(t,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",u=>{i.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),o==="print")break;e.addEventListener("input",u=>{i.setValue(t,{value:u.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const h=u.target.options,m=h.selectedIndex===-1?"":h[h.selectedIndex].value;i.setValue(t,{value:m})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:o}){const{attributes:l}=t,u=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${i}`);for(const[h,m]of Object.entries(l))if(m!=null)switch(h){case"class":m.length&&e.setAttribute(h,m.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",m);break;case"style":Object.assign(e.style,m);break;case"textContent":e.textContent=m;break;default:(!u||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,m)}u&&o.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,o=e.intent||"display",l=document.createElement(i.name);i.attributes&&this.setAttributes({html:l,element:i,intent:o,linkService:n});const u=o!=="richText",h=e.div;if(h.append(l),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=g}u&&h.setAttribute("class","xfaLayer xfaFont");const m=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);l.append(g),u&&sc.shouldBuildText(i.name)&&m.push(g)}return{textDivs:m}}const p=[[i,-1,l]];for(;p.length>0;){const[g,y,w]=p.at(-1);if(y+1===g.children.length){p.pop();continue}const A=g.children[++p.at(-1)[1]];if(A===null)continue;const{name:S}=A;if(S==="#text"){const C=document.createTextNode(A.value);m.push(C),w.append(C);continue}const E=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,S):document.createElement(S);if(w.append(E),A.attributes&&this.setAttributes({html:E,element:A,storage:t,intent:o,linkService:n}),A.children?.length>0)p.push([A,-1,E]);else if(A.value){const C=document.createTextNode(A.value);u&&sc.shouldBuildText(S)&&m.push(C),E.append(C)}}for(const g of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:m}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Li="http://www.w3.org/2000/svg";class ar{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Bo(a,e="text"){if(Hl(a,document.baseURI)){const t=await fetch(a);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",a,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class fc{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=o,this.offsetY=l,n*=t;const h=(e[2]+e[0])/2,m=(e[3]+e[1])/2;let p,g,y,w;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,g=0,y=0,w=1;break;case 90:p=0,g=1,y=1,w=0;break;case 270:p=0,g=-1,y=-1,w=0;break;case 0:p=1,g=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,w=-w);let A,S,E,C;p===0?(A=Math.abs(m-e[1])*n+o,S=Math.abs(h-e[0])*n+l,E=(e[3]-e[1])*n,C=(e[2]-e[0])*n):(A=Math.abs(h-e[0])*n+o,S=Math.abs(m-e[1])*n+l,E=(e[2]-e[0])*n,C=(e[3]-e[1])*n),this.transform=[p*n,g*n,y*n,w*n,A-p*n*h-y*n*m,S-g*n*h-w*n*m],this.width=E,this.height=C}get rawDims(){const e=this.viewBox;return Ze(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new fc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:o})}convertToViewportPoint(e,t){const n=[e,t];return Te.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Te.applyTransform(t,this.transform);const n=[e[2],e[3]];return Te.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Te.applyInverseTransform(n,this.transform),n}}class Xd extends ur{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function mc(a){const e=a.length;let t=0;for(;t<e&&a[t].trim()==="";)t++;return a.substring(t,t+5).toLowerCase()==="data:"}function Wd(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function bC(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function xC(a,e="document.pdf"){if(typeof a!="string")return e;if(mc(a))return Xe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(a);if(!n)return e;const i=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return i(l);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const m of u)if(o.test(m))return i(m);const h=Array.from(n.searchParams.keys()).reverse();for(const m of h)if(o.test(m))return i(m)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return i(h[0])}return e}class Jx{started=Object.create(null);times=[];time(e){e in this.started&&Xe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Xe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-i}ms
`);return e.join("")}}function Hl(a,e){const t=e?URL.parse(a,e):URL.parse(a);return t?.protocol==="http:"||t?.protocol==="https:"}function ms(a){a.preventDefault()}function Bt(a){a.preventDefault(),a.stopPropagation()}function X3(a){console.log("Deprecated API usage: "+a)}class bd{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const m=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,m==="-"?(l+=p,u+=g):m==="+"&&(l-=p,u-=g),new Date(Date.UTC(n,i,o,l,u,h))}}function wC(a,{scale:e=1,rotation:t=0}){const{width:n,height:i}=a.attributes.style,o=[0,0,parseInt(n),parseInt(i)];return new fc({viewBox:o,userUnit:1,scale:e,rotation:t})}function zo(a){if(a.startsWith("#")){const e=parseInt(a.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(e=>parseInt(e)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Xe(`Not a valid color format: "${a}"`),[0,0,0])}function W3(a){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of a.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;a.set(t,zo(n))}e.remove()}function It(a){const{a:e,b:t,c:n,d:i,e:o,f:l}=a.getTransform();return[e,t,n,i,o,l]}function ni(a){const{a:e,b:t,c:n,d:i,e:o,f:l}=a.getTransform().invertSelf();return[e,t,n,i,o,l]}function Na(a,e,t=!1,n=!0){if(e instanceof fc){const{pageWidth:i,pageHeight:o}=e.rawDims,{style:l}=a,u=wn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${i}px`,m=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,g=u?`round(down, ${m}, var(--scale-round-y))`:`calc(${m})`;!t||e.rotation%180===0?(l.width=p,l.height=g):(l.width=g,l.height=p)}n&&a.setAttribute("data-main-rotation",e.rotation)}class Ys{constructor(){const{pixelRatio:e}=Ys;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,o=-1){let l=1/0,u=1/0,h=1/0;n=Ys.capPixels(n,o),n>0&&(l=Math.sqrt(n/(e*t))),i!==-1&&(u=i/e,h=i/t);const m=Math.min(l,u,h);return this.sx>m||this.sy>m?(this.sx=m,this.sy=m,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const xd=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class K3{static get isDarkMode(){return Ze(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class SC{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Ze(this,"commentForegroundColor",zo(n))}}function AC(a,e,t,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return a=Math.round(a*n+i),e=Math.round(e*n+i),t=Math.round(t*n+i),[a,e,t]}function ew(a,e){const t=a[0]/255,n=a[1]/255,i=a[2]/255,o=Math.max(t,n,i),l=Math.min(t,n,i),u=(o+l)/2;if(o===l)e[0]=e[1]=0;else{const h=o-l;switch(e[1]=u<.5?h/(o+l):h/(2-o-l),o){case t:e[0]=((n-i)/h+(n<i?6:0))*60;break;case n:e[0]=((i-t)/h+2)*60;break;case i:e[0]=((t-n)/h+4)*60;break}}e[2]=u}function yp(a,e){const t=a[0],n=a[1],i=a[2],o=(1-Math.abs(2*i-1))*n,l=o*(1-Math.abs(t/60%2-1)),u=i-o/2;switch(Math.floor(t/60)){case 0:e[0]=o+u,e[1]=l+u,e[2]=u;break;case 1:e[0]=l+u,e[1]=o+u,e[2]=u;break;case 2:e[0]=u,e[1]=o+u,e[2]=l+u;break;case 3:e[0]=u,e[1]=l+u,e[2]=o+u;break;case 4:e[0]=l+u,e[1]=u,e[2]=o+u;break;case 5:case 6:e[0]=o+u,e[1]=u,e[2]=l+u;break}}function tw(a){return a<=.03928?a/12.92:((a+.055)/1.055)**2.4}function nw(a,e,t){yp(a,t),t.map(tw);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];yp(e,t),t.map(tw);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const sw=new Map;function CC(a,e){const t=a[0]+a[1]*256+a[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=sw.get(t);if(n)return n;const i=new Float32Array(9),o=i.subarray(0,3),l=i.subarray(3,6);ew(a,l);const u=i.subarray(6,9);ew(e,u);const h=u[2]<.5,m=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),nw(l,u,o)<m){let p,g;h?(p=l[2],g=1):(p=0,g=l[2]);const y=.005;for(;g-p>y;){const w=l[2]=(p+g)/2;h===nw(l,u,o)<m?p=w:g=w}l[2]=h?g:p}return yp(l,o),n=Te.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),sw.set(t,n),n}function Eg({html:a,dir:e,className:t},n){const i=document.createDocumentFragment();if(typeof a=="string"){const o=document.createElement("p");o.dir=e||"auto";const l=a.split(/(?:\r\n?|\n)/);for(let u=0,h=l.length;u<h;++u){const m=l[u];o.append(document.createTextNode(m)),u<h-1&&o.append(document.createElement("br"))}i.append(o)}else Cg.render({xfaHtml:a,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),n.append(i)}class Yl{#e=null;#t=null;#s;#n=null;#r=null;#i=null;#a=null;#o=null;static#c=null;constructor(e){this.#s=e,Yl.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#s._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",ms,{signal:t}),e.addEventListener("pointerdown",Yl.#l,{signal:t}));const n=this.#n=document.createElement("div");n.className="buttons",e.append(n);const i=this.#s.toolbarPosition;if(i){const{style:o}=e,l=this.#s._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#s._focusEventsAllowed=!1,Bt(e)}#d(e){this.#s._focusEventsAllowed=!0,Bt(e)}#f(e){const t=this.#s._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ms,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#s,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Yl.#c[e]),this.#f(n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(n)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#r=e}addComment(e,t=null){if(this.#i)return;const n=e.renderForToolbar();if(!n)return;this.#f(n);const i=this.#a=this.#g;t?(this.#n.insertBefore(n,t),this.#n.insertBefore(i,t)):this.#n.append(n,i),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#s);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#a?.remove(),this.#a=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const i=this.#n.querySelector(n);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Q3{#e=null;#t=null;#s;constructor(e){this.#s=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#s._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",ms,{signal:t});const n=this.#e=document.createElement("div");return n.className="buttons",e.append(n),this.#s.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),e}#r(e,t){let n=0,i=0;for(const o of e){const l=o.y+o.height;if(l<n)continue;const u=o.x+(t?o.width:0);if(l>n){i=u,n=l;continue}t?u>i&&(i=u):u<i&&(i=u)}return[t?1-i:i,n]}show(e,t,n){const[i,o]=this.#r(t,n),{style:l}=this.#t||=this.#n();e.append(this.#t),l.insetInlineEnd=`${100*i}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,t,n,i){const o=document.createElement("button");o.classList.add("basic",e),o.tabIndex=0,o.setAttribute("data-l10n-id",t);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const u=this.#s._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",ms,{signal:u}),o.addEventListener("click",i,{signal:u})),this.#e.append(o)}}function EC(a,e,t){for(const n of t)e.addEventListener(n,a[n].bind(a))}class Z3{#e=0;get id(){return`${tc}${this.#e++}`}}class _g{#e=Sg();#t=0;#s=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const o=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ze(this,"_isSVGFittingCanvas",o)}async#n(e,t){this.#s||=new Map;let n=this.#s.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(n.url=t,i=await Bo(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const o=_g._isSVGFittingCanvas,l=new FileReader,u=new Image,h=new Promise((m,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,m()},l.onload=async()=>{const g=n.svgUrl=l.result;u.src=await o?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=l.onerror=p});l.readAsDataURL(i),await h}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Xe(i),n=null}return this.#s.set(e,n),n&&this.#s.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:i,type:o}=e;return this.#n(`${t}_${n}_${i}_${o}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const n=await t;return this.#n(e,n)}async getFromId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#s||=new Map;let n=this.#s.get(e);if(n?.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#s.set(e,n),this.#s.set(n.id,n),n}getSvgUrl(e){const t=this.#s.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class J3{#e=[];#t=!1;#s;#n=-1;constructor(e=128){this.#s=e}add({cmd:e,undo:t,post:n,mustExec:i,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(i&&e(),this.#t)return;const h={cmd:e,undo:t,post:n,type:o};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(h);return}if(l&&this.#e[this.#n].type===o){u&&(h.undo=this.#e[this.#n].undo),this.#e[this.#n]=h;return}const m=this.#n+1;m===this.#s?this.#e.splice(0,1):(this.#n=m,m<this.#e.length&&this.#e.splice(m)),this.#e.push(h)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class pc{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=wn.platform;for(const[n,i,o={}]of e)for(const l of n){const u=l.startsWith("mac+");t&&u?(this.callbacks.set(l.slice(4),{callback:i,options:o}),this.allKeys.add(l.split("+").at(-1))):!t&&!u&&(this.callbacks.set(l,{callback:i,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#e(t));if(!n)return;const{callback:i,options:{bubbles:o=!1,args:l=[],checker:u=null}}=n;u&&!u(e,t)||(i.bind(e,...l,t)(),o||Bt(t))}}class Tg{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return W3(e),Ze(this,"_colors",e)}convert(e){const t=zo(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((o,l)=>o===t[l]))return Tg._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Te.makeHexColor(...t):e}}class Gi{#e=new AbortController;#t=null;#s=null;#n=new Map;#r=new Map;#i=null;#a=null;#o=null;#c=new J3;#l=null;#h=null;#d=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#v=!1;#b=!1;#y=!1;#E=null;#A=null;#x=null;#T=null;#S=!1;#C=null;#M=new Z3;#N=!1;#j=!1;#I=!1;#D=null;#O=null;#B=null;#L=null;#$=null;#_=qe.NONE;#w=new Set;#k=null;#z=null;#H=null;#q=null;#Y=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#P=null;#G=null;#Z=null;#J=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Gi.prototype,t=l=>l.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ze(this,"_keyboardManager",new pc([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#G.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}constructor(e,t,n,i,o,l,u,h,m,p,g,y,w,A,S,E){const C=this._signal=this.#e.signal;this.#G=e,this.#Z=t,this.#J=n,this.#i=i,this.#l=o,this.#z=l,this.#Y=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:C}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),u._on("setpreference",this.onSetPreference.bind(this),{signal:C}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:C}),window.addEventListener("pointerdown",()=>{this.#j=!0},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{this.#j=!1},{capture:!0,signal:C}),this.#le(),this.#he(),this.#te(),this.#a=h.annotationStorage,this.#E=h.filterFactory,this.#H=m,this.#T=p||null,this.#v=g,this.#b=y,this.#y=w,this.#$=A||null,this.viewParameters={realScale:ar.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=E!==!1,o?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#r.values())e.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#L?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#z?.destroy(),this.#C?.hide(),this.#C=null,this.#B?.destroy(),this.#B=null,this.#s=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#$}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Ze(this,"hcmFilter",this.#H?this.#E.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Ze(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Ze(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Ze(this,"highlightColors",null);const t=new Map,n=!!this.#H;for(const[i,o]of e){const l=i.endsWith("_HCM");if(n&&l){t.set(i.replace("_HCM",""),o);continue}!n&&!l&&t.set(i,o)}return Ze(this,"highlightColors",t)}get highlightColorNames(){return Ze(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#B=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,n,i){this.#l?.showDialog(this,e,t,n,i)}selectComment(e,t){this.#r.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,n=void 0){this.#l?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#r.has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),i=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){this.#z?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#z}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#y=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(const n of this.#r.values()){const{x:i,y:o,width:l,height:u}=n.div.getBoundingClientRect();if(e>=i&&e<=i+l&&t>=o&&t<=o+u)return n}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ar.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of this.#r.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:o,focusNode:l,focusOffset:u}=n,h=n.toString(),p=this.#Q(n).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;n.empty();const y=this.#ee(p),w=this.#_===qe.NONE,A=()=>{const S=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:o,focusNode:l,focusOffset:u,text:h});w&&this.showAllEditors("highlight",!0,!0),t&&S?.editComment()};if(w){this.switchToMode(qe.HIGHLIGHT,A);return}A()}commentSelection(e=""){this.highlightSelection(e,!0)}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#Q(e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(this.#C||=new Q3(this),this.#C.show(n,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#a)return null;const t=`${tc}${e}`,n=this.#a.getRawValue(t);return n&&this.#a.remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#k&&(this.#C?.hide(),this.#k=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#k)return;const i=this.#Q(e).closest(".textLayer");if(!i){this.#k&&(this.#C?.hide(),this.#k=null,this.#R({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#k=t,this.#R({hasSelectedText:!0}),!(this.#_!==qe.HIGHLIGHT&&this.#_!==qe.NONE)&&(this.#_===qe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#_===qe.HIGHLIGHT?this.#ee(i):null;if(o?.toggleDrawing(),this.#j){const l=new AbortController,u=this.combinedSignal(l),h=m=>{m.type==="pointerup"&&m.button!==0||(l.abort(),o?.toggleDrawing(!0),m.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(e=""){this.#_===qe.HIGHLIGHT?this.highlightSelection(e):this.#v&&this.#re()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#x)return;this.#x=new AbortController;const e=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#O=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,t]=this.#O;this.#O=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#D?.abort(),this.#D=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#se(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#se()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#w){const i=n.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Xe(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const o=[];for(const h of n){const m=await i.deserialize(h);if(!m)return;o.push(m)}const l=()=>{for(const h of o)this.#ie(h);this.#ae(o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){Xe(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==qe.NONE&&!this.isEditorHandlingKeyboard&&Gi._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(e){Object.entries(e).some(([n,i])=>this.#X[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,e)}),this.#_===qe.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[rt.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#R({isEditing:this.#_!==qe.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#se(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#V(t.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(e){return this.#r.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#r.set(e.pageIndex,e),this.#N?e.enable():e.disable()}removeLayer(e){this.#r.delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,o=!1){if(this.#_!==e&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#_===qe.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#_=e,e===qe.NONE){this.setEditingState(!1),this.#me();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();e===qe.SIGNATURE&&await this.#z?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const l of this.#r.values())l.updateMode(e);if(e===qe.POPUP){this.#s||=await this.#Y.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const l=new Set,u=[];for(const h of this.#n.values()){const{annotationElementId:m,hasComment:p,deleted:g}=h;m&&l.add(m),p&&!g&&u.push(h.getData())}for(const h of this.#s){const{id:m,popupRef:p,contentsObj:g}=h;p&&g?.str&&!l.has(m)&&!this.#g.has(m)&&u.push(h)}this.#l?.showSidebar(u)}if(!t){n&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const l of this.#n.values())l.uid===t?(this.setSelected(l),o?l.editComment():i?l.enterInEditMode():l.focus()):l.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case rt.CREATE:this.currentLayer.addNewEditor(t);return;case rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of this.#w)n.updateParams(e,t);else for(const n of this.#u)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(const o of this.#n.values())o.editorType===e&&o.show(t);(this.#q?.get(rt.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#V([[rt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#I!==e){this.#I=e;for(const t of this.#r.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#N){this.#N=!0;const e=[];for(const t of this.#r.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#me(){if(this.unselectAll(),this.#N){this.#N=!1;for(const e of this.#r.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#L?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#r.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#pe(){let e=null;for(e of this.#w);return e}updateUI(e){this.#pe===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#d?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],n=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const o of t)this.#ie(o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ae(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#ae(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#_!==qe.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=e,this.#U[1]+=t;const[i,o]=this.#U,l=[...this.#w],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(i,o),h.translationDone())},undo:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(-i,-o),h.translationDone())},mustExec:!1})},u);for(const h of l)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#w)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:i,y:o,pageIndex:l},u]of e)u.newX=i,u.newY=o,u.newPageIndex=l,t||=i!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!t)return!1;const n=(i,o,l,u)=>{if(this.#n.has(i.id)){const h=this.#r.get(u);h?i._setParentAndPosition(h,o,l):(i.pageIndex=u,i.x=o,i.y=l)}};return this.addCommands({cmd:()=>{for(const[i,{newX:o,newY:l,newPageIndex:u}]of e)n(i,o,l,u)},undo:()=>{for(const[i,{savedX:o,savedY:l,savedPageIndex:u}]of e)n(i,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const n of this.#m.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#_}isEditingMode(){return this.#_!==qe.NONE}get imageManager(){return Ze(this,"imageManager",new _g)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let m=0,p=t.rangeCount;m<p;m++)if(!e.contains(t.getRangeAt(m).commonAncestorContainer))return null;const{x:n,y:i,width:o,height:l}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(m,p,g,y)=>({x:(p-i)/l,y:1-(m+g-n)/o,width:y/l,height:g/o});break;case"180":u=(m,p,g,y)=>({x:1-(m+g-n)/o,y:1-(p+y-i)/l,width:g/o,height:y/l});break;case"270":u=(m,p,g,y)=>({x:1-(p+y-i)/l,y:(m-n)/o,width:y/l,height:g/o});break;default:u=(m,p,g,y)=>({x:(m-n)/o,y:(p-i)/l,width:g/o,height:y/l});break}const h=[];for(let m=0,p=t.rangeCount;m<p;m++){const g=t.getRangeAt(m);if(!g.collapsed)for(const{x:y,y:w,width:A,height:S}of g.getClientRects())A===0||S===0||h.push(u(y,w,A,S))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const n=this.#a.getRawValue(t);n&&(this.#_===qe.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){const i=this.#L?.get(e);i&&(i.setCanvas(t,n),this.#L.delete(e))}addMissingCanvas(e,t){(this.#L||=new Map).set(e,t)}}class ri{#e=null;#t=!1;#s=null;#n=null;#r=null;#i=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,ri.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){ri._l10n??=e}async render(){const e=this.#s=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",ri.#f.missing),t.setAttribute("data-l10n-id",ri.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;e.addEventListener("contextmenu",ms,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const i=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#a=!0,i(o))},{signal:n}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await ri._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:o=!1}){n&&(this.#l=n,this.#h=i),!(this.#e===e&&this.#t===t)&&(o||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#s&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#s;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",ri.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",ri.#f[`${this.#g}-label`]),!this.#e){this.#r?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#r?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#r;if(!t){this.#r=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r?.classList.remove("show")},{signal:o})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Uu{#e=null;#t=null;#s=!1;#n=null;#r=null;#i=null;#a=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(n.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:n}=this.#e.getBoundingClientRect(),{x:i,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(e-i)/l,(t+n-o)/u]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",ms,{signal:n}),t&&(e.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,Bt(o)},{capture:!0,signal:n}),e.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,Bt(o)},{capture:!0,signal:n})),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const i=o=>{o.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#s=!0,i(o))},{signal:n}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),e}edit(e){const t=this.commentPopupPositionInLayer;let n,i;if(t)[n,i]=t;else{[n,i]=this.#n.commentButtonPosition;const{width:p,height:g,x:y,y:w}=this.#n;n=y+n*p,i=w+i*g}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:h,height:m}=o;this.#n._uiManager.editComment(this.#n,l+n*h,u+i*m,{...e,parentDimensions:o})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#a&&(this.#i=null),e===null){this.#a="",this.#c=!0;return}this.#a=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#r=e,this.data=e,this.#o=null,this.#i=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#a="",this.#i=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class gc{#e;#t=!1;#s=null;#n;#r;#i;#a;#o=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#e=e,this.#s=n,this.#n=t,this.#r=i,this.#i=o,this.#a=l,this.#h=new AbortController,this.#c=AbortSignal.any([u,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ys.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,o=AbortSignal.any([this.#c,i.signal]),l=this.#e,u={capture:!0,signal:o,passive:!1},h=m=>{m.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Bt(m),h(m))},u),l.addEventListener("pointerup",h,u),l.addEventListener("pointercancel",h,u);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#c,this.#d.signal]),o=this.#e,l={signal:i,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const u=this.#m.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",Bt,l),o.addEventListener("pointermove",Bt,l),o.addEventListener("pointercancel",Bt,l),o.addEventListener("pointerup",Bt,l),this.#r?.()}if(Bt(e),e.touches.length!==2||this.#s?.()){this.#l=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;Bt(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:o}=t,{screenX:l,screenY:u}=n,h=this.#l,{touch0X:m,touch0Y:p,touch1X:g,touch1Y:y}=h,w=g-m,A=y-p,S=l-i,E=u-o,C=Math.hypot(S,E)||1,T=Math.hypot(w,A)||1;if(!this.#t&&Math.abs(T-C)<=gc.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=i,h.touch0Y=o,h.touch1X=l,h.touch1Y=u,!this.#t){this.#t=!0;return}const N=[(i+l)/2,(o+u)/2];this.#i?.(N,T,C)}#m(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#a?.()),this.#l&&(Bt(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class ke{#e=null;#t=null;#s=null;#n=null;#r=null;#i=!1;#a=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#v=!1;#b=!1;#y=null;#E=0;#A=0;#x=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#C=ke._zIndex++;static _borderLineWidth=-1;static _colorManager=new Tg;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=ke.prototype._resizeWithKeyboard,t=Gi.TRANSLATE_SMALL,n=Gi.TRANSLATE_BIG;return Ze(this,"_resizerKeyboardManager",new pc([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],ke.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[o,l];const[u,h]=this.parentDimensions;this.x=e.x/u,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ze(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new e4({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ke._l10n??=e,ke._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ke._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);ke._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){_t("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(e){this.#S=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#P(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[o,l]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/o,this.y=(t+i)/l,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}#M([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#M(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[i,o]}=this;if(this.x+=e/i,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[h,m]=this.getBaseTranslation();l+=h,u+=m;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=ke,i=n/e,o=n/t;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:o,y:l,width:u,height:h}=this;if(u*=n,h*=i,o*=n,l*=i,this._mustFixPosition)switch(e){case 0:o=On(o,0,n-u),l=On(l,0,i-h);break;case 90:o=On(o,0,n-h),l=On(l,u,i);break;case 180:o=On(o,u,n),l=On(l,h,i);break;case 270:o=On(o,h,n),l=On(l,0,i-u);break}this.x=o/=n,this.y=l/=i;const[m,p]=this.getBaseTranslation();o+=m,l+=p,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#N(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return ke.#N(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return ke.#N(e,t,360-this.parentRotation)}#j(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",this.#D.bind(this,n),{signal:t}),i.addEventListener("contextmenu",ms,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#D(e,t){t.preventDefault();const{isMac:n}=wn.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#s?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Bt,{passive:!1,signal:l}),window.addEventListener("contextmenu",ms,{signal:l}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const m=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#B()};window.addEventListener("pointerup",m,{signal:l}),window.addEventListener("blur",m,{signal:l})}#O(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=this.#h;this.#h=null;const o=this.x,l=this.y,u=this.width,h=this.height;o===e&&l===t&&u===n&&h===i||this.addCommands({cmd:this.#O.bind(this,o,l,u,h),undo:this.#O.bind(this,e,t,n,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#L(e,t){const[n,i]=this.parentDimensions,o=this.x,l=this.y,u=this.width,h=this.height,m=ke.MIN_SIZE/n,p=ke.MIN_SIZE/i,g=this.#j(this.rotation),y=(R,U)=>[g[0]*R+g[2]*U,g[1]*R+g[3]*U],w=this.#j(360-this.rotation),A=(R,U)=>[w[0]*R+w[2]*U,w[1]*R+w[3]*U];let S,E,C=!1,T=!1;switch(e){case"topLeft":C=!0,S=(R,U)=>[0,0],E=(R,U)=>[R,U];break;case"topMiddle":S=(R,U)=>[R/2,0],E=(R,U)=>[R/2,U];break;case"topRight":C=!0,S=(R,U)=>[R,0],E=(R,U)=>[0,U];break;case"middleRight":T=!0,S=(R,U)=>[R,U/2],E=(R,U)=>[0,U/2];break;case"bottomRight":C=!0,S=(R,U)=>[R,U],E=(R,U)=>[0,0];break;case"bottomMiddle":S=(R,U)=>[R/2,U],E=(R,U)=>[R/2,0];break;case"bottomLeft":C=!0,S=(R,U)=>[0,U],E=(R,U)=>[R,0];break;case"middleLeft":T=!0,S=(R,U)=>[0,U/2],E=(R,U)=>[R,U/2];break}const N=S(u,h),M=E(u,h);let L=y(...M);const I=ke._round(o+L[0]),O=ke._round(l+L[1]);let P=1,F=1,$,W;if(t.fromKeyboard)({deltaX:$,deltaY:W}=t);else{const{screenX:R,screenY:U}=t,[H,z]=this.#l;[$,W]=this.screenToPageTranslation(R-H,U-z),this.#l[0]=R,this.#l[1]=U}if([$,W]=A($/n,W/i),C){const R=Math.hypot(u,h);P=F=Math.max(Math.min(Math.hypot(M[0]-N[0]-$,M[1]-N[1]-W)/R,1/u,1/h),m/u,p/h)}else T?P=On(Math.abs(M[0]-N[0]-$),m,1)/u:F=On(Math.abs(M[1]-N[1]-W),p,1)/h;const ie=ke._round(u*P),le=ke._round(h*F);L=y(...E(ie,le));const G=I-L[0],fe=O-L[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ie,this.height=le,this.x=G,this.y=fe,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#v)return this._editToolbar;this._editToolbar=new Yl(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(ri.initialize(ke._l10n),this.#s=new ri(this),this.#e&&(this.#s.data=this.#e,this.#e=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(e){this.#s&&(this.#s.data=e)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(e){await this.#s?.setGuessedText(e)}serializeAltText(e){return this.#s?.serialize(e)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Uu(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:i}}=this.#n;return{text:t,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Uu(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(this.#n||=new Uu(this),this.#n.setInitialText(e,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Uu(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,h=i-100,m=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,m,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#H();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[i,o]=this.getInitialTranslation();return this.translate(i,o),EC(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new gc({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#$.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#$(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;const l=this.#j(this.rotation),u=(I,O)=>[l[0]*I+l[2]*O,l[1]*I+l[3]*O],[h,m]=this.parentDimensions,p=this.x,g=this.y,y=this.width,w=this.height,A=ke.MIN_SIZE/h,S=ke.MIN_SIZE/m;o=Math.max(Math.min(o,1/y,1/w),A/y,S/w);const E=ke._round(y*o),C=ke._round(w*o);if(E===y&&C===w)return;this.#u||=[p,g,y,w];const T=u(y/2,w/2),N=ke._round(p+T[0]),M=ke._round(g+T[1]),L=u(E/2,C/2);this.x=N-L[0],this.y=M-L[1],this.width=E,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(e){const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#z(e);return}this.#k(e)}#k(e){const{isMac:t}=wn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,o=this._uiManager.combinedSignal(i),l={capture:!0,passive:!1,signal:o},u=m=>{i.abort(),this.#a=null,this.#m=!1,this._uiManager.endDragSession()||this.#k(m),n&&this._onStopDragging()};t&&(this.#E=e.clientX,this.#A=e.clientY,this.#a=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",m=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:g,pointerId:y}=m;if(y!==this.#a){Bt(m);return}const[w,A]=this.screenToPageTranslation(p-this.#E,g-this.#A);this.#E=p,this.#A=g,this._uiManager.dragSelectedEditors(w,A)},l),window.addEventListener("touchmove",Bt,l),window.addEventListener("pointerdown",m=>{m.pointerType===this.#o&&(this.#T||m.isPrimary)&&u(m),Bt(m)},l));const h=m=>{if(!this.#a||this.#a===m.pointerId){u(m);return}Bt(m)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[o,l]=this.pageDimensions,[u,h]=this.pageTranslation,m=e/i,p=t/i,g=this.x*o,y=this.y*l,w=this.width*o,A=this.height*l;switch(n){case 0:return[g+m+u,l-y-p-A+h,g+m+w+u,l-y-p+h];case 90:return[g+p+u,l-y+m+h,g+p+A+u,l-y+m+w+h];case 180:return[g-m-w+u,l-y+p+h,g-m+u,l-y+p+A+h];case 270:return[g-p-A+u,l-y-m-w+h,g-p+u,l-y-m+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,o,l]=e,u=o-n,h=l-i;switch(this.rotation){case 0:return[n,t-l,u,h];case 90:return[n,t-i,h,u];case 180:return[o,t-i,u,h];case 270:return[o,t-l,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ke._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:i,deleted:o,richText:l},uid:u,pageIndex:h,creationDate:m,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:e},creationDate:m,modificationDate:n||p,popupRef:!o,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#v=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#v=!1,!0):!1}isInEditMode(){return this.#v}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return t<l&&i>0&&e<o&&n>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#H()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[o,l]=i.pageDimensions,[u,h,m,p]=i.getRectInCurrentCoords(e.rect,l);return i.x=u/o,i.y=h/l,i.width=m/o,i.height=p/l,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#P(),this.removeEditToolbar(),this.#x){for(const e of this.#x.values())clearTimeout(e);this.#x=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,i,o,l]=this.getPDFRect();return[ke._round(n+(o-n)*e),ke._round(i+(l-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const l=this.#q.bind(this),u=this.#Y.bind(this),h=this._uiManager._signal;for(const m of this.#t){const p=m.getAttribute("data-resizer-name");m.setAttribute("role","spinbutton"),m.addEventListener("keydown",l,{signal:h}),m.addEventListener("blur",u,{signal:h}),m.addEventListener("focus",this.#X.bind(this,p),{signal:h}),m.setAttribute("data-l10n-id",ke._l10nResizer[p])}}const n=this.#t[0];let i=0;for(const l of t){if(l===n)break;i++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(o!==i){if(o<i)for(let u=0;u<i-o;u++)this.#c.append(this.#c.firstChild);else if(o>i)for(let u=0;u<o-i;u++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const u of t){const m=this.#t[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ke._l10nResizer[m])}}this.#U(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#q(e){ke._resizerKeyboardManager.exec(this,e)}#Y(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#P()}#X(e){this.#g=this.#b?e:""}#U(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#L(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#P(){this.#b=!1,this.#U(-1),this.#B()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#x||=new Map;const{action:n}=e;let i=this.#x.get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#x.delete(n),this.#x.size===0&&(this.#x=null)},ke._telemetryTimeout),this.#x.set(n,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class e4 extends ke{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const iw=3285377520,_s=4294901760,si=65535;class _C{constructor(e){this.h1=e?e&4294967295:iw,this.h2=e?e&4294967295:iw}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let S=0,E=e.length;S<E;S++){const C=e.charCodeAt(S);C<=255?t[n++]=C:(t[n++]=C>>>8,t[n++]=C&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,o=n-i*4,l=new Uint32Array(t.buffer,0,i);let u=0,h=0,m=this.h1,p=this.h2;const g=3432918353,y=461845907,w=g&si,A=y&si;for(let S=0;S<i;S++)S&1?(u=l[S],u=u*g&_s|u*w&si,u=u<<15|u>>>17,u=u*y&_s|u*A&si,m^=u,m=m<<13|m>>>19,m=m*5+3864292196):(h=l[S],h=h*g&_s|h*w&si,h=h<<15|h>>>17,h=h*y&_s|h*A&si,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=t[i*4+2]<<16;case 2:u^=t[i*4+1]<<8;case 1:u^=t[i*4],u=u*g&_s|u*w&si,u=u<<15|u>>>17,u=u*y&_s|u*A&si,i&1?m^=u:p^=u}this.h1=m,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&_s|e*36045&si,t=t*4283543511&_s|((t<<16|e>>>16)*2950163797&_s)>>>16,e^=t>>>1,e=e*444984403&_s|e*60499&si,t=t*3301882366&_s|((t<<16|e>>>16)*3120437893&_s)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const bp=Object.freeze({map:null,hash:"",transfer:void 0});class Ng{#e=!1;#t=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof ke&&this.#s.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof ke)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#n.get(e);let i=!1;if(n!==void 0)for(const[o,l]of Object.entries(t))n[o]!==l&&(i=!0,n[o]=l);else i=!0,this.#n.set(e,t);i&&this.#r(),t instanceof ke&&((this.#s||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new TC(this)}get serializable(){if(this.#n.size===0)return bp;const e=new Map,t=new _C,n=[],i=Object.create(null);let o=!1;for(const[l,u]of this.#n){const h=u instanceof ke?u.serialize(!1,i):u;h&&(e.set(l,h),t.update(`${l}:${JSON.stringify(h)}`),o||=!!h.bitmap)}if(o)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:bp}get editorStats(){let e=null;const t=new Map;let n=0,i=0;for(const o of this.#n.values()){if(!(o instanceof ke)){o.popup&&(o.popup.deleted?i+=1:n+=1);continue}o.isCommentDeleted?i+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;t.has(u)||t.set(u,Object.getPrototypeOf(o).constructor),e||=Object.create(null);const h=e[u]||=new Map;for(const[m,p]of Object.entries(l)){if(m==="type")continue;let g=h.get(m);g||(g=new Map,h.set(m,g));const y=g.get(p)??0;g.set(p,y+1)}}if((i>0||n>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:n}),!e)return null;for(const[o,l]of t)e[o]=l.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const n=this.#s?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#s?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#s)for(const t of this.#s.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class TC extends Ng{#e;constructor(e){super();const{map:t,hash:n,transfer:i}=e.serializable,o=structuredClone(t,i?{transfer:i}:null);this.#e={map:o,hash:n,transfer:i}}get print(){_t("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Ze(this,"modifiedIds",{ids:new Set,hash:""})}}class t4{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(ct(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:o,style:l}=e,u=new FontFace(i,o,l);this.addNativeFontFace(u);try{await u.load(),this.#e.add(i),n?.(e)}catch{Xe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}_t("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Xe(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Ze(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Ze(this,"isSyncFontLoadingSupported",Bn||wn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(ct(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ze(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(M,L){return M.charCodeAt(L)<<24|M.charCodeAt(L+1)<<16|M.charCodeAt(L+2)<<8|M.charCodeAt(L+3)&255}function i(M,L,I,O){const P=M.substring(0,L),F=M.substring(L+I);return P+O+F}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let m=0;function p(M,L){if(++m>30){Xe("Load test font never loaded."),L();return}if(h.font="30px "+M,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(p.bind(null,M,L))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=i(y,976,g.length,g);const A=16,S=1482184792;let E=n(y,A);for(o=0,l=g.length-3;o<l;o+=4)E=E-S+n(g,o)|0;o<g.length&&(E=E-S+n(g+"XXX",o)|0),y=i(y,A,4,U3(E));const C=`url(data:font/opentype;base64,${btoa(y)});`,T=`@font-face {font-family:"${g}";src:${C}}`;this.insertRule(T);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const M of[e.loadedName,g]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=M,N.append(L)}this._document.body.append(N),p(g,()=>{N.remove(),t.complete()})}}class n4{#e;constructor(e,t=null,n,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${yC(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(l){Xe(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function s4(a){if(a instanceof URL)return a.href;if(typeof a=="string"){if(Bn)return a;const e=URL.parse(a,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function i4(a){if(Bn&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return hc(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a?.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Vu(a){if(typeof a!="string")return null;if(a.endsWith("/"))return a;throw new Error(`Invalid factory url: "${a}" must include trailing slash.`)}const xp=a=>typeof a=="object"&&Number.isInteger(a?.num)&&a.num>=0&&Number.isInteger(a?.gen)&&a.gen>=0,a4=a=>typeof a=="object"&&typeof a?.name=="string",NC=Y3.bind(null,xp,a4);class r4{#e=new Map;#t=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Xe("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);i=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const $u={DATA:1,ERROR:2},an={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function aw(){}function Qn(a){if(a instanceof $i||a instanceof yd||a instanceof Qx||a instanceof nc||a instanceof Hm)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||_t('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new $i(a.message);case"InvalidPDFException":return new yd(a.message);case"PasswordException":return new Qx(a.message,a.code);case"ResponseException":return new nc(a.message,a.status,a.missing);case"UnknownErrorException":return new Hm(a.message,a.details)}return new Hm(a.message,a.toString())}class Ul{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===$u.DATA)i.resolve(e.data);else if(e.callback===$u.ERROR)i.reject(Qn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(l){o.postMessage({sourceName:n,targetName:i,callback:$u.DATA,callbackId:e.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:i,callback:$u.ERROR,callbackId:e.callbackId,reason:Qn(l)})});return}if(e.streamId){this.#s(e);return}t(e.data)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(e,t,n,i){const o=this.streamId++,l=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:m=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:m,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:u,action:e,streamId:o,data:t,desiredSize:m.desiredSize},i),p.promise},pull:m=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,h.postMessage({sourceName:l,targetName:u,stream:an.PULL,streamId:o,desiredSize:m.desiredSize}),p.promise},cancel:m=>{ct(m instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:l,targetName:u,stream:an.CANCEL,streamId:o,reason:Qn(m)}),p.promise}},n)}#s(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj,l=this,u=this.actionHandler[e.action],h={enqueue(m,p=1,g){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:i,stream:an.ENQUEUE,streamId:t,chunk:m},g)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:an.CLOSE,streamId:t}),delete l.streamSinks[t])},error(m){ct(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:an.ERROR,streamId:t,reason:Qn(m)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(u,e.data,h).then(function(){o.postMessage({sourceName:n,targetName:i,stream:an.START_COMPLETE,streamId:t,success:!0})},function(m){o.postMessage({sourceName:n,targetName:i,stream:an.START_COMPLETE,streamId:t,reason:Qn(m)})})}#n(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj,l=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case an.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(Qn(e.reason));break;case an.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(Qn(e.reason));break;case an.PULL:if(!u){o.postMessage({sourceName:n,targetName:i,stream:an.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||aw).then(function(){o.postMessage({sourceName:n,targetName:i,stream:an.PULL_COMPLETE,streamId:t,success:!0})},function(m){o.postMessage({sourceName:n,targetName:i,stream:an.PULL_COMPLETE,streamId:t,reason:Qn(m)})});break;case an.ENQUEUE:if(ct(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case an.CLOSE:if(ct(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,t);break;case an.ERROR:ct(l,"error should have stream controller"),l.controller.error(Qn(e.reason)),this.#r(l,t);break;case an.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(Qn(e.reason)),this.#r(l,t);break;case an.CANCEL:if(!u)break;const h=Qn(e.reason);Promise.try(u.onCancel||aw,h).then(function(){o.postMessage({sourceName:n,targetName:i,stream:an.CANCEL_COMPLETE,streamId:t,success:!0})},function(m){o.postMessage({sourceName:n,targetName:i,stream:an.CANCEL_COMPLETE,streamId:t,reason:Qn(m)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#r(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class jC{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){_t("Abstract method `_createCanvas` called.")}}class o4 extends jC{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class MC{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){_t("Abstract method `_fetch` called.")}}class rw extends MC{async _fetch(e){const t=await Bo(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):hc(t)}}class RC{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,o){return"none"}destroy(e=!1){}}class l4 extends RC{#e;#t;#s;#n;#r;#i;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#r=t}get#o(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#s){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#r.createElementNS(Li,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#s=this.#r.createElementNS(Li,"defs"),e.append(n),n.append(this.#s),this.#r.body.append(e)}return this.#s}#h(e){if(e.length===1){const h=e[0],m=new Array(256);for(let g=0;g<256;g++)m[g]=h[g]/255;const p=m.join(",");return[p,p,p]}const[t,n,i]=e,o=new Array(256),l=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=t[h]/255,l[h]=n[h]/255,u[h]=i[h]/255;return[o.join(","),l.join(","),u.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(mc(t)?Xe('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=wg(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[n,i,o]=this.#h(e),l=e.length===1?n:`${n}${i}${o}`;if(t=this.#o.get(l),t)return this.#o.set(e,t),t;const u=`g_${this.#n}_transfer_map_${this.#a++}`,h=this.#d(u);this.#o.set(e,h),this.#o.set(l,h);const m=this.#m(u);return this.#p(n,i,o,m),h}addHCMFilter(e,t){const n=`${e}-${t}`,i="base";let o=this.#c.get(i);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#c.set(i,o)),!e||!t))return o.url;const l=this.#b(e);e=Te.makeHexColor(...l);const u=this.#b(t);if(t=Te.makeHexColor(...u),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return o.url;const h=new Array(256);for(let w=0;w<=255;w++){const A=w/255;h[w]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const m=h.join(","),p=`g_${this.#n}_hcm_filter`,g=o.filter=this.#m(p);this.#p(m,m,m,g),this.#g(g);const y=(w,A)=>{const S=l[w]/255,E=u[w]/255,C=new Array(A+1);for(let T=0;T<=A;T++)C[T]=S+T/A*(E-S);return C.join(",")};return this.#p(y(0,5),y(1,5),y(2,5),g),o.url=this.#d(p),o.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[n]=this.#h([e]),i=`alpha_${n}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#d(o);this.#o.set(e,l),this.#o.set(i,l);const u=this.#m(o);return this.#v(n,u),l}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let n,i;if(e?([n]=this.#h([e]),i=`luminosity_${n}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#d(o);this.#o.set(e,l),this.#o.set(i,l);const u=this.#m(o);return this.#f(u),e&&this.#v(n,u),l}addHighlightHCMFilter(e,t,n,i,o){const l=`${t}-${n}-${i}-${o}`;let u=this.#c.get(e);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(e,u)),!t||!n))return u.url;const[h,m]=[t,n].map(this.#b.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),g=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[y,w]=[i,o].map(this.#b.bind(this));g<p&&([p,g,y,w]=[g,p,w,y]),this.#l.style.color="";const A=(C,T,N)=>{const M=new Array(256),L=(g-p)/N,I=C/255,O=(T-C)/(255*N);let P=0;for(let F=0;F<=N;F++){const $=Math.round(p+F*L),W=I+F*O;for(let ie=P;ie<=$;ie++)M[ie]=W;P=$+1}for(let F=P;F<256;F++)M[F]=M[P-1];return M.join(",")},S=`g_${this.#n}_hcm_${e}_filter`,E=u.filter=this.#m(S);return this.#g(E),this.#p(A(y[0],w[0],5),A(y[1],w[1],5),A(y[2],w[2],5),E),u.url=this.#d(S),u.url}destroy(e=!1){e&&this.#i?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#a=0)}#f(e){const t=this.#r.createElementNS(Li,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#r.createElementNS(Li,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#r.createElementNS(Li,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,n){const i=this.#r.createElementNS(Li,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}#p(e,t,n,i){const o=this.#r.createElementNS(Li,"feComponentTransfer");i.append(o),this.#u(o,"feFuncR",e),this.#u(o,"feFuncG",t),this.#u(o,"feFuncB",n)}#v(e,t){const n=this.#r.createElementNS(Li,"feComponentTransfer");t.append(n),this.#u(n,"feFuncA",e)}#b(e){return this.#l.style.color=e,zo(getComputedStyle(this.#l).getPropertyValue("color"))}}class DC{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){_t("Abstract method `_fetch` called.")}}class ow extends DC{async _fetch(e){const t=await Bo(e,"arraybuffer");return new Uint8Array(t)}}class kC{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){_t("Abstract method `_fetch` called.")}}class lw extends kC{async _fetch(e){const t=await Bo(e,"arraybuffer");return new Uint8Array(t)}}Bn&&Xe("Please use the `legacy` build in Node.js environments.");async function jg(a){const t=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(t)}class c4 extends RC{}class u4 extends jC{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class d4 extends MC{async _fetch(e){return jg(e)}}class h4 extends DC{async _fetch(e){return jg(e)}}class f4 extends kC{async _fetch(e){return jg(e)}}const eo="__forcedDependency",{floor:cw,ceil:uw}=Math;function Gu(a,e,t,n,i,o){a[e*4+0]=Math.min(a[e*4+0],t),a[e*4+1]=Math.min(a[e*4+1],n),a[e*4+2]=Math.max(a[e*4+2],i),a[e*4+3]=Math.max(a[e*4+3],o)}const wp=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class m4{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===wp}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Yu=(a,e)=>{if(!a)return;let t=a.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},a.set(e,t)),t};class p4{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[eo]:[]};#s=new Map;#n=[];#r=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#m;#u;#p;constructor(e,t,n=!1){this.#f=e.width,this.#g=e.height,this.#v(t),n&&(this.#p=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#v(e,this.#u)}#v(e,t){const n=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),t&&t.length>0?(this.#u.set(t),this.#u.fill(wp,t.length)):this.#u.fill(wp)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[eo]:{__proto__:this.#t[eo]}},this.#a={__proto__:this.#a},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#a=Object.getPrototypeOf(this.#a);const n=this.#n.pop();return n!==void 0&&(Yu(this.#p,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(Yu(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#r.push(e),this}endMarkedContent(e){const t=this.#r.pop();return t!==void 0&&(Yu(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#i.push(Te.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#s.set(e,t),this}recordSimpleDataFromNamed(e,t,n){this.#e[e]=this.#s.get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(eo,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(eo,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,n,i,o,l){const u=Te.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform()),h=[1/0,1/0,-1/0,-1/0];Te.axialAlignedBoundingBox([n,o,i,l],u,h);const m=Te.intersect(this.#a,h);return m?(this.#a[0]=m[0],this.#a[1]=m[1],this.#a[2]=m[2],this.#a[3]=m[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(e,t,n,i,o,l){const u=this.#a;if(u[0]===1/0)return this;const h=Te.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform());if(u[0]===-1/0)return Te.axialAlignedBoundingBox([n,o,i,l],h,this.#o),this;const m=[1/0,1/0,-1/0,-1/0];return Te.axialAlignedBoundingBox([n,o,i,l],h,m),this.#o[0]=Math.min(this.#o[0],Math.max(m[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(m[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(m[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(m[3],u[3])),this}recordCharacterBBox(e,t,n,i=1,o=0,l=0,u){const h=n.bbox;let m,p;if(h&&(m=h[2]!==h[0]&&h[3]!==h[1]&&this.#d.get(n),m!==!1&&(p=[0,0,0,0],Te.axialAlignedBoundingBox(h,n.fontMatrix,p),(i!==1||o!==0||l!==0)&&Te.scaleMinMax([i,0,0,-i,o,l],p),m)))return this.recordBBox(e,t,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(e);const g=u();return h&&p&&m===void 0&&(m=p[0]<=o-g.actualBoundingBoxLeft&&p[2]>=o+g.actualBoundingBoxRight&&p[1]<=l-g.actualBoundingBoxAscent&&p[3]>=l+g.actualBoundingBoxDescent,this.#d.set(n,m),m)?this.recordBBox(e,t,p[0],p[2],p[1],p[3]):this.recordBBox(e,t,o-g.actualBoundingBoxLeft,o+g.actualBoundingBoxRight,l-g.actualBoundingBoxAscent,l+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const n=this.#l,i=this.#e,o=this.#t;for(const l of t)l in this.#e?n.add(i[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(e,t){return this.#s.has(t)&&this.#l.add(this.#s.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[eo]),this.#p){const n=Yu(this.#p,e),{dependencies:i}=n;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#r.forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(this.#c===e){const n=cw(this.#o[0]*256/this.#f),i=cw(this.#o[1]*256/this.#g),o=uw(this.#o[2]*256/this.#f),l=uw(this.#o[3]*256/this.#g);Gu(this.#m,e,n,i,o,l);for(const u of this.#l)u!==e&&Gu(this.#m,u,n,i,o,l);for(const u of this.#n)u!==e&&Gu(this.#m,u,n,i,o,l);for(const u of this.#r)u!==e&&Gu(this.#m,u,n,i,o,l);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const n=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new m4(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class wd{#e;#t;#s;#n=0;#r=0;constructor(e,t,n){if(e instanceof wd&&e.#s===!!n)return e;this.#e=e,this.#t=t,this.#s=!!n}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#r++,this.#e.save(this.#t),this}restore(e){return this.#r>0&&(this.#e.restore(this.#t),this.#r--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#s||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,n,i,o,l){return this.#s||this.#e.recordClipBox(this.#t,t,n,i,o,l),this}recordBBox(e,t,n,i,o,l){return this.#s||this.#e.recordBBox(this.#t,t,n,i,o,l),this}recordCharacterBBox(e,t,n,i,o,l,u){return this.#s||this.#e.recordCharacterBBox(this.#t,t,n,i,o,l,u),this}recordFullPageBBox(e){return this.#s||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#s||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Ts={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},jn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Sp(a,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),a.clip(i)}class Mg{isModifyingCurrentTransform(){return!1}getPattern(){_t("Abstract method `getPattern` called.")}}class g4 extends Mg{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let o;if(i===jn.STROKE||i===jn.FILL){const l=t.current.getClippedPathBoundingBox(i,It(e))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,m=t.cachedCanvases.getCanvas("pattern",u,h),p=m.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=Te.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),Sp(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=e.createPattern(m.canvas,"no-repeat");const g=new DOMMatrix(n);o.setTransform(g)}else Sp(e,this._bbox),o=this._createGradient(e);return o}}function $m(a,e,t,n,i,o,l,u){const h=e.coords,m=e.colors,p=a.data,g=a.width*4;let y;h[t+1]>h[n+1]&&(y=t,t=n,n=y,y=o,o=l,l=y),h[n+1]>h[i+1]&&(y=n,n=i,i=y,y=l,l=u,u=y),h[t+1]>h[n+1]&&(y=t,t=n,n=y,y=o,o=l,l=y);const w=(h[t]+e.offsetX)*e.scaleX,A=(h[t+1]+e.offsetY)*e.scaleY,S=(h[n]+e.offsetX)*e.scaleX,E=(h[n+1]+e.offsetY)*e.scaleY,C=(h[i]+e.offsetX)*e.scaleX,T=(h[i+1]+e.offsetY)*e.scaleY;if(A>=T)return;const N=m[o],M=m[o+1],L=m[o+2],I=m[l],O=m[l+1],P=m[l+2],F=m[u],$=m[u+1],W=m[u+2],ie=Math.round(A),le=Math.round(T);let G,fe,R,U,H,z,ce,j;for(let k=ie;k<=le;k++){if(k<E){const J=k<A?0:(A-k)/(A-E);G=w-(w-S)*J,fe=N-(N-I)*J,R=M-(M-O)*J,U=L-(L-P)*J}else{let J;k>T?J=1:E===T?J=0:J=(E-k)/(E-T),G=S-(S-C)*J,fe=I-(I-F)*J,R=O-(O-$)*J,U=P-(P-W)*J}let B;k<A?B=0:k>T?B=1:B=(A-k)/(A-T),H=w-(w-C)*B,z=N-(N-F)*B,ce=M-(M-$)*B,j=L-(L-W)*B;const X=Math.round(Math.min(G,H)),K=Math.round(Math.max(G,H));let oe=g*k+X*4;for(let J=X;J<=K;J++)B=(G-J)/(G-H),B<0?B=0:B>1&&(B=1),p[oe++]=fe-(fe-z)*B|0,p[oe++]=R-(R-ce)*B|0,p[oe++]=U-(U-j)*B|0,p[oe++]=255}}function v4(a,e,t){const n=e.coords,i=e.colors;let o,l;switch(e.type){case"lattice":const u=e.verticesPerRow,h=Math.floor(n.length/u)-1,m=u-1;for(o=0;o<h;o++){let p=o*u;for(let g=0;g<m;g++,p++)$m(a,t,n[p],n[p+1],n[p+u],i[p],i[p+1],i[p+u]),$m(a,t,n[p+u+1],n[p+1],n[p+u],i[p+u+1],i[p+1],i[p+u])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)$m(a,t,n[o],n[o+1],n[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}class y4 extends Mg{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,g=Math.min(Math.ceil(Math.abs(m*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),w=m/g,A=p/y,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/w,scaleY:1/A},E=g+4,C=y+4,T=n.getCanvas("mesh",E,C),N=T.context,M=N.createImageData(g,y);if(t){const I=M.data;for(let O=0,P=I.length;O<P;O+=4)I[O]=t[0],I[O+1]=t[1],I[O+2]=t[2],I[O+3]=255}for(const I of this._figures)v4(M,I,S);return N.putImageData(M,2,2),{canvas:T.canvas,offsetX:u-2*w,offsetY:h-2*A,scaleX:w,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Sp(e,this._bbox);const o=new Float32Array(2);if(i===jn.SHADING)Te.singularValueDecompose2dScale(It(e),o);else if(this.matrix){Te.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;Te.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=u,o[1]*=h}else Te.singularValueDecompose2dScale(t.baseTransform,o);const l=this._createMeshCanvas(o,i===jn.SHADING?null:this._background,t.cachedCanvases);return i!==jn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class b4 extends Mg{getPattern(){return"hotpink"}}function x4(a){switch(a[0]){case"RadialAxial":return new g4(a);case"Mesh":return new y4(a);case"Dummy":return new b4}throw new Error(`Unknown IR type: ${a[0]}`)}const dw={COLORED:1,UNCOLORED:2};class Rg{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:n,operatorList:i,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:h}=this;let{xstep:m,ystep:p}=this;m=Math.abs(m),p=Math.abs(p),qd("TilingType: "+l);const g=n[0],y=n[1],w=n[2],A=n[3],S=w-g,E=A-y,C=new Float32Array(2);Te.singularValueDecompose2dScale(this.matrix,C);const[T,N]=C;Te.singularValueDecompose2dScale(this.baseTransform,C);const M=T*C[0],L=N*C[1];let I=S,O=E,P=!1,F=!1;const $=Math.ceil(m*M),W=Math.ceil(p*L),ie=Math.ceil(S*M),le=Math.ceil(E*L);$>=ie?I=m:P=!0,W>=le?O=p:F=!0;const G=this.getSizeAndScale(I,this.ctx.canvas.width,M),fe=this.getSizeAndScale(O,this.ctx.canvas.height,L),R=e.cachedCanvases.getCanvas("pattern",G.size,fe.size),U=R.context,H=h.createCanvasGraphics(U,t);if(H.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(H,o,u),U.translate(-G.scale*g,-fe.scale*y),H.transform(0,G.scale,0,0,fe.scale,0,0),U.save(),H.dependencyTracker?.save(),this.clipBbox(H,g,y,w,A),H.baseTransform=It(H.ctx),H.executeOperatorList(i),H.endDrawing(),H.dependencyTracker?.restore(),U.restore(),P||F){const z=R.canvas;P&&(I=m),F&&(O=p);const ce=this.getSizeAndScale(I,this.ctx.canvas.width,M),j=this.getSizeAndScale(O,this.ctx.canvas.height,L),k=ce.size,B=j.size,X=e.cachedCanvases.getCanvas("pattern-workaround",k,B),K=X.context,oe=P?Math.floor(S/m):0,J=F?Math.floor(E/p):0;for(let Y=0;Y<=oe;Y++)for(let se=0;se<=J;se++)K.drawImage(z,k*Y,B*se,k,B,0,0,k,B);return{canvas:X.canvas,scaleX:ce.scale,scaleY:j.scale,offsetX:g,offsetY:y}}return{canvas:R.canvas,scaleX:G.scale,scaleY:fe.scale,offsetX:g,offsetY:y}}getSizeAndScale(e,t,n){const i=Math.max(Rg.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*n);return o>=i?o=i:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,i,o){const l=i-t,u=o-n;e.ctx.rect(t,n,l,u),Te.axialAlignedBoundingBox([t,n,i,o],It(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,o=e.current;switch(t){case dw.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;i.fillStyle=o.fillColor=l,i.strokeStyle=o.strokeColor=u;break;case dw.UNCOLORED:i.fillStyle=i.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new H3(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,o){let l=n;i!==jn.SHADING&&(l=Te.transform(l,t.baseTransform),this.matrix&&(l=Te.transform(l,this.matrix)));const u=this.createPatternCanvas(t,o);let h=new DOMMatrix(l);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const m=e.createPattern(u.canvas,"repeat");return m.setTransform(h),m}}function w4({src:a,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=wn.isLittleEndian?4278190080:255,[h,m]=l?[o,u]:[u,o],p=n>>3,g=n&7,y=a.length;t=new Uint32Array(t.buffer);let w=0;for(let A=0;A<i;A++){for(const E=e+p;e<E;e++){const C=e<y?a[e]:255;t[w++]=C&128?m:h,t[w++]=C&64?m:h,t[w++]=C&32?m:h,t[w++]=C&16?m:h,t[w++]=C&8?m:h,t[w++]=C&4?m:h,t[w++]=C&2?m:h,t[w++]=C&1?m:h}if(g===0)continue;const S=e<y?a[e++]:255;for(let E=0;E<g;E++)t[w++]=S&1<<7-E?m:h}return{srcPos:e,destPos:w}}const hw=16,fw=100,S4=15,mw=10,Jn=16,Gm=new DOMMatrix,ds=new Float32Array(2),io=new Float32Array([1/0,1/0,-1/0,-1/0]);function A4(a,e){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){e.save(),this.__originalSave()},a.restore=function(){e.restore(),this.__originalRestore()},a.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},a.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},a.transform=function(t,n,i,o,l,u){e.transform(t,n,i,o,l,u),this.__originalTransform(t,n,i,o,l,u)},a.setTransform=function(t,n,i,o,l,u){e.setTransform(t,n,i,o,l,u),this.__originalSetTransform(t,n,i,o,l,u)},a.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},a.rotate=function(t){e.rotate(t),this.__originalRotate(t)},a.clip=function(t){e.clip(t),this.__originalClip(t)},a.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},a.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},a.bezierCurveTo=function(t,n,i,o,l,u){e.bezierCurveTo(t,n,i,o,l,u),this.__originalBezierCurveTo(t,n,i,o,l,u)},a.rect=function(t,n,i,o){e.rect(t,n,i,o),this.__originalRect(t,n,i,o)},a.closePath=function(){e.closePath(),this.__originalClosePath()},a.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class C4{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function qu(a,e,t,n,i,o,l,u,h,m){const[p,g,y,w,A,S]=It(a);if(g===0&&y===0){const T=l*p+A,N=Math.round(T),M=u*w+S,L=Math.round(M),I=(l+h)*p+A,O=Math.abs(Math.round(I)-N)||1,P=(u+m)*w+S,F=Math.abs(Math.round(P)-L)||1;return a.setTransform(Math.sign(p),0,0,Math.sign(w),N,L),a.drawImage(e,t,n,i,o,0,0,O,F),a.setTransform(p,g,y,w,A,S),[O,F]}if(p===0&&w===0){const T=u*y+A,N=Math.round(T),M=l*g+S,L=Math.round(M),I=(u+m)*y+A,O=Math.abs(Math.round(I)-N)||1,P=(l+h)*g+S,F=Math.abs(Math.round(P)-L)||1;return a.setTransform(0,Math.sign(g),Math.sign(y),0,N,L),a.drawImage(e,t,n,i,o,0,0,F,O),a.setTransform(p,g,y,w,A,S),[F,O]}a.drawImage(e,t,n,i,o,l,u,h,m);const E=Math.hypot(p,g),C=Math.hypot(y,w);return[E*h,C*m]}class pw{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=vp;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Nn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,n){n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=io.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=jn.FILL,t=null){const n=this.minMax.slice();if(e===jn.STROKE){t||_t("Stroke bounding box must include transform."),Te.singularValueDecompose2dScale(t,ds);const i=ds[0]*this.lineWidth/2,o=ds[1]*this.lineWidth/2;n[0]-=i,n[1]-=o,n[2]+=i,n[3]+=o}return n}updateClipFromPath(){const e=Te.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(io,0)}getClippedPathBoundingBox(e=jn.FILL,t=null){return Te.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function gw(a,e){if(e instanceof ImageData){a.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%Jn,o=(t-i)/Jn,l=i===0?o:o+1,u=a.createImageData(n,Jn);let h=0,m;const p=e.data,g=u.data;let y,w,A,S;if(e.kind===Gl.GRAYSCALE_1BPP){const E=p.byteLength,C=new Uint32Array(g.buffer,0,g.byteLength>>2),T=C.length,N=n+7>>3,M=4294967295,L=wn.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(A=y<o?Jn:i,m=0,w=0;w<A;w++){const I=E-h;let O=0;const P=I>N?n:I*8-7,F=P&-8;let $=0,W=0;for(;O<F;O+=8)W=p[h++],C[m++]=W&128?M:L,C[m++]=W&64?M:L,C[m++]=W&32?M:L,C[m++]=W&16?M:L,C[m++]=W&8?M:L,C[m++]=W&4?M:L,C[m++]=W&2?M:L,C[m++]=W&1?M:L;for(;O<P;O++)$===0&&(W=p[h++],$=128),C[m++]=W&$?M:L,$>>=1}for(;m<T;)C[m++]=0;a.putImageData(u,0,y*Jn)}}else if(e.kind===Gl.RGBA_32BPP){for(w=0,S=n*Jn*4,y=0;y<o;y++)g.set(p.subarray(h,h+S)),h+=S,a.putImageData(u,0,w),w+=Jn;y<l&&(S=n*i*4,g.set(p.subarray(h,h+S)),a.putImageData(u,0,w))}else if(e.kind===Gl.RGB_24BPP)for(A=Jn,S=n*A,y=0;y<l;y++){for(y>=o&&(A=i,S=n*A),m=0,w=S;w--;)g[m++]=p[h++],g[m++]=p[h++],g[m++]=p[h++],g[m++]=255;a.putImageData(u,0,y*Jn)}else throw new Error(`bad image kind: ${e.kind}`)}function vw(a,e){if(e.bitmap){a.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%Jn,o=(t-i)/Jn,l=i===0?o:o+1,u=a.createImageData(n,Jn);let h=0;const m=e.data,p=u.data;for(let g=0;g<l;g++){const y=g<o?Jn:i;({srcPos:h}=w4({src:m,srcPos:h,dest:p,width:n,height:y,nonBlackColor:0})),a.putImageData(u,0,g*Jn)}}function kl(a,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)a[n]!==void 0&&(e[n]=a[n]);a.setLineDash!==void 0&&(e.setLineDash(a.getLineDash()),e.lineDashOffset=a.lineDashOffset)}function Xu(a){a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0);const{filter:e}=a;e!=="none"&&e!==""&&(a.filter="none")}function yw(a,e){if(e)return!0;Te.singularValueDecompose2dScale(a,ds);const t=Math.fround(Ys.pixelRatio*ar.PDF_TO_CSS_UNITS);return ds[0]<=t&&ds[1]<=t}const E4=["butt","round","square"],_4=["miter","round","bevel"],T4={},bw={};class ho{constructor(e,t,n,i,o,{optionalContentConfig:l,markedContentStack:u=null},h,m,p){this.ctx=e,this.current=new pw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new C4(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=m,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,n){const h=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...It(this.compositeCtx))}this.ctx.save(),Xu(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=It(this.ctx)}executeOperatorList(e,t,n,i,o){const l=e.argsArray,u=e.fnArray;let h=t||0;const m=l.length;if(m===h)return h;const p=m-h>mw&&typeof n=="function",g=p?Date.now()+S4:0;let y=0;const w=this.commonObjs,A=this.objs;let S,E;for(;;){if(i!==void 0&&h===i.nextBreakPoint)return i.breakIt(h,n),h;if(!o||o(h))if(S=u[h],E=l[h]??null,S!==Eo.dependency)E===null?this[S](h):this[S](h,...E);else for(const C of E){this.dependencyTracker?.recordNamedData(C,h);const T=C.startsWith("g_")?w:A;if(!T.has(C))return T.get(C,n),h}if(h++,h===m)return h;if(p&&++y>mw){if(Date.now()>g)return n(),h;y=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),u=n,h=i,m="prescale1",p,g;for(;o>2&&u>1||l>2&&h>1;){let y=u,w=h;o>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/y),l>2&&h>1&&(w=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/w),p=this.cachedCanvases.getCanvas(m,y,w),g=p.context,g.clearRect(0,0,y,w),g.drawImage(e,0,0,u,h,0,0,y,w),e=p.canvas,u=y,h=w,m=m==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e,t){const n=this.ctx,{width:i,height:o}=t,l=this.current.fillColor,u=this.current.patternFill,h=It(n);let m,p,g,y;if((t.bitmap||t.data)&&t.count>1){const $=t.bitmap||t.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),l]),m=this._cachedBitmapsMap.get($),m||(m=new Map,this._cachedBitmapsMap.set($,m));const W=m.get(p);if(W&&!u){const ie=Math.round(Math.min(h[0],h[2])+h[4]),le=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(e,Ts.transformAndFill),{canvas:W,offsetX:ie,offsetY:le}}g=W}g||(y=this.cachedCanvases.getCanvas("maskCanvas",i,o),vw(y.context,t));let w=Te.transform(h,[1/i,0,0,-1/o,0,0]);w=Te.transform(w,[1,0,0,1,0,-o]);const A=io.slice();Te.axialAlignedBoundingBox([0,0,i,o],w,A);const[S,E,C,T]=A,N=Math.round(C-S)||1,M=Math.round(T-E)||1,L=this.cachedCanvases.getCanvas("fillCanvas",N,M),I=L.context,O=S,P=E;I.translate(-O,-P),I.transform(...w),g||(g=this._scaleImage(y.canvas,ni(I)),g=g.img,m&&u&&m.set(p,g)),I.imageSmoothingEnabled=yw(It(I),t.interpolate),qu(I,g,0,0,g.width,g.height,0,0,i,o),I.globalCompositeOperation="source-in";const F=Te.transform(ni(I),[1,0,0,1,-O,-P]);return I.fillStyle=u?l.getPattern(n,this,F,jn.FILL,e):l,I.fillRect(0,0,i,o),m&&!u&&(this.cachedCanvases.delete("fillCanvas"),m.set(p,L.canvas)),this.dependencyTracker?.recordDependencies(e,Ts.transformAndFill),{canvas:L.canvas,offsetX:Math.round(O),offsetY:Math.round(P)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=E4[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=_4[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[n,i]of t)switch(n){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),kl(this.suspendedCtx,l),A4(l,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),kl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const o=i[0],l=i[1],u=i[2]-o,h=i[3]-l;u===0||h===0||(this.genericComposeSMask(t.context,n,u,h,t.subtype,t.backdrop,t.transferMap,o,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,o,l,u,h,m,p,g){let y=e.canvas,w=h-p,A=m-g;if(l)if(w<0||A<0||w+n>y.width||A+i>y.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,i),C=E.context;C.drawImage(y,-w,-A),C.globalCompositeOperation="destination-atop",C.fillStyle=l,C.fillRect(0,0,n,i),C.globalCompositeOperation="source-over",y=E.canvas,w=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(w,A,n,i),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=l,e.fillRect(w,A,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(h,m,n,i),t.clip(S),t.globalCompositeOperation="destination-in",t.drawImage(y,w,A,n,i,h,m,n,i),t.restore()}save(e){this.inSMaskMode&&kl(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&kl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[o]=n;if(!i){o||=n[0]=new Path2D,this[t](e,o);return}if(this.dependencyTracker!==null){const l=t===Eo.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-l,i[2]+l,i[1]-l,i[3]+l).recordDependencies(e,["transform"])}if(!(o instanceof Path2D)){const l=n[0]=new Path2D;for(let u=0,h=o.length;u<h;)switch(o[u++]){case Hu.moveTo:l.moveTo(o[u++],o[u++]);break;case Hu.lineTo:l.lineTo(o[u++],o[u++]);break;case Hu.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case Hu.closePath:l.closePath();break;default:Xe(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}Te.axialAlignedBoundingBox(i,It(this.ctx),this.current.minMax),this[t](e,o),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){const i=this.ctx,o=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=o.getPattern(i,this,ni(i),jn.STROKE,e),l){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=u}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,Ts.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(jn.STROKE,It(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){const i=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const m=o.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=o.getPattern(i,this,ni(i),jn.FILL,e),m){const p=new Path2D;p.addPath(t,i.getTransform().invertSelf().multiplySelf(m)),t=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,Ts.fill),u&&(i.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,h)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,Ts.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=T4}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=bw}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:u,y:h,fontSize:m,path:p}of t)p&&i.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(u,h).scale(m,-m));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),o=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=i.fontMatrix||vp,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Xe("Invalid font matrix for font "+t),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const l=i.loadedName||"sans-serif",u=i.systemFontInfo?.css||`"${l}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const m=i.italic?"italic":"normal";let p=n;n<hw?p=hw:n>fw&&(p=fw),this.current.fontSizeScale=n/p,this.ctx.font=`${m} ${h} ${p}px ${u}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#s(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}paintChar(e,t,n,i,o,l){const u=this.ctx,h=this.current,m=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,y=p&Nn.FILL_STROKE_MASK,w=!!(p&Nn.ADD_TO_PATH_FLAG),A=h.patternFill&&!m.missingFile,S=h.patternStroke&&!m.missingFile;let E;if((m.disableFontFace||w||A||S)&&!m.missingFile&&(E=m.getPathGenerator(this.commonObjs,t)),E&&(m.disableFontFace||A||S)){u.save(),u.translate(n,i),u.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,u,m);let C;if(y===Nn.FILL||y===Nn.FILL_STROKE)if(o){C=u.getTransform(),u.setTransform(...o);const T=this.#s(E,C,o);u.fill(T)}else u.fill(E);if(y===Nn.STROKE||y===Nn.FILL_STROKE)if(l){C||=u.getTransform(),u.setTransform(...l);const{a:T,b:N,c:M,d:L}=C,I=Te.inverseTransform(l),O=Te.transform([T,N,M,L,0,0],I);Te.singularValueDecompose2dScale(O,ds),u.lineWidth*=Math.max(ds[0],ds[1])/g,u.stroke(this.#s(E,C,l))}else u.lineWidth/=g,u.stroke(E);u.restore()}else(y===Nn.FILL||y===Nn.FILL_STROKE)&&(u.fillText(t,n,i),this.dependencyTracker?.recordCharacterBBox(e,u,m,g,n,i,()=>u.measureText(t))),(y===Nn.STROKE||y===Nn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,u,m,g,n,i,()=>u.measureText(t)).recordDependencies(e,Ts.stroke),u.strokeText(t,n,i));w&&((this.pendingTextPaths||=[]).push({transform:It(u),x:n,y:i,fontSize:g,path:E}),this.dependencyTracker?.recordCharacterBBox(e,u,m,g,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Ze(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Ts.showText).resetBBox(e),this.current.textRenderingMode&Nn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(e);return}const l=this.ctx,u=n.fontSizeScale,h=n.charSpacing,m=n.wordSpacing,p=n.fontDirection,g=n.textHScale*p,y=t.length,w=i.vertical,A=w?1:-1,S=i.defaultVMetrics,E=o*n.fontMatrix[0],C=n.textRenderingMode===Nn.FILL&&!i.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(g,-1):l.scale(g,1);let T,N;if(n.patternFill){l.save();const P=n.fillColor.getPattern(l,this,ni(l),jn.FILL,e);T=It(l),l.restore(),l.fillStyle=P}if(n.patternStroke){l.save();const P=n.strokeColor.getPattern(l,this,ni(l),jn.STROKE,e);N=It(l),l.restore(),l.strokeStyle=P}let M=n.lineWidth;const L=n.textMatrixScale;if(L===0||M===0){const P=n.textRenderingMode&Nn.FILL_STROKE_MASK;(P===Nn.STROKE||P===Nn.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=L;if(u!==1&&(l.scale(u,u),M/=u),l.lineWidth=M,i.isInvalidPDFjsFont){const P=[];let F=0;for(const W of t)P.push(W.unicode),F+=W.width;const $=P.join("");if(l.fillText($,0,0),this.dependencyTracker!==null){const W=l.measureText($);this.dependencyTracker.recordBBox(e,this.ctx,-W.actualBoundingBoxLeft,W.actualBoundingBoxRight,-W.actualBoundingBoxAscent,W.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=F*E*g,l.restore(),this.compose();return}let I=0,O;for(O=0;O<y;++O){const P=t[O];if(typeof P=="number"){I+=A*P*o/1e3;continue}let F=!1;const $=(P.isSpace?m:0)+h,W=P.fontChar,ie=P.accent;let le,G,fe=P.width;if(w){const H=P.vmetric||S,z=-(P.vmetric?H[1]:fe*.5)*E,ce=H[2]*E;fe=H?-H[0]:fe,le=z/u,G=(I+ce)/u}else le=I/u,G=0;let R;if(i.remeasure&&fe>0){R=l.measureText(W);const H=R.width*1e3/o*u;if(fe<H&&this.isFontSubpixelAAEnabled){const z=fe/H;F=!0,l.save(),l.scale(z,1),le/=z}else fe!==H&&(le+=(fe-H)/2e3*o/u)}if(this.contentVisible&&(P.isInFont||i.missingFile)){if(C&&!ie)l.fillText(W,le,G),this.dependencyTracker?.recordCharacterBBox(e,l,R?{bbox:null}:i,o/u,le,G,()=>R??l.measureText(W));else if(this.paintChar(e,W,le,G,T,N),ie){const H=le+o*ie.offset.x/u,z=G-o*ie.offset.y/u;this.paintChar(e,ie.fontChar,H,z,T,N)}}const U=w?fe*E-$*p:fe*E+$*p;I+=U,F&&l.restore()}w?n.y-=I:n.x+=I*g,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,i=this.current,o=i.font,l=i.fontSize,u=i.fontDirection,h=o.vertical?1:-1,m=i.charSpacing,p=i.wordSpacing,g=i.textHScale*u,y=i.fontMatrix||vp,w=t.length,A=i.textRenderingMode===Nn.INVISIBLE;let S,E,C,T;if(A||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(g,u);const N=this.dependencyTracker;for(this.dependencyTracker=N?new wd(N,e):null,S=0;S<w;++S){if(E=t[S],typeof E=="number"){T=h*E*l/1e3,this.ctx.translate(T,0),i.x+=T*g;continue}const M=(E.isSpace?p:0)+m,L=o.charProcOperatorList[E.operatorListId];L?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...y),this.executeOperatorList(L),this.restore()):Xe(`Type3 character "${E.operatorListId}" is not available.`);const I=[E.width,0];Te.applyTransform(I,y),C=I[0]*l+M,n.translate(C,0),i.x+=C*g}n.restore(),N&&(this.dependencyTracker=N)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,o,l,u){const h=new Path2D;h.rect(i,o,l-i,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(e,this.ctx,i,l,o,u).recordClipBox(e,this.ctx,i,l,o,u),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const i=this.baseTransform||It(this.ctx),o={createCanvasGraphics:(l,u)=>new ho(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new wd(this.dependencyTracker,u,!0):null)};n=new Rg(t,this.ctx,o,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=x4(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,ni(n),jn.SHADING,e);const o=ni(n);if(o){const{width:l,height:u}=n.canvas,h=io.slice();Te.axialAlignedBoundingBox([0,0,l,u],o,h);const[m,p,g,y]=h;this.ctx.fillRect(m,p,g-m,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Ts.transform).recordDependencies(e,Ts.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){_t("Should not call beginInlineImage")}beginImageData(){_t("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=It(this.ctx),n)){Te.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,o,l,u]=n,h=new Path2D;h.rect(i,o,l-i,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(e,this.ctx,i,l,o,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||qd("TODO: Support non-isolated groups."),t.knockout&&Xe("Knockout groups not supported.");const i=It(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=io.slice();Te.axialAlignedBoundingBox(t.bbox,It(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=Te.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),m=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,m,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,m,p),w=y.context;w.translate(-u,-h),w.transform(...i);let A=new Path2D;const[S,E,C,T]=t.bbox;if(A.rect(S,E,C-S,T-E),t.matrix){const N=new Path2D;N.addPath(A,new DOMMatrix(t.matrix)),A=N}w.clip(A),t.smask&&this.smaskStack.push({canvas:y.canvas,context:w,offsetX:u,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.save()),kl(n,w),this.ctx=w,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=It(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=io.slice();Te.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,n,i,o,l){if(this.#e(),Xu(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],h=n[3]-n[1];if(l&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=h,Te.singularValueDecompose2dScale(It(this.ctx),ds);const{viewportScale:m}=this,p=Math.ceil(u*this.outputScaleX*m),g=Math.ceil(h*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:y,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(ds[0],0,0,-ds[1],0,h*ds[1]),Xu(this.ctx)}else{Xu(this.ctx),this.endPath(e);const m=new Path2D;m.rect(n[0],n[1],u,h),this.ctx.clip(m)}}this.current=new pw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...o)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const i=this.ctx,o=this._createMaskCanvas(e,t),l=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,o=0,l,u){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const h=this.ctx;h.save();const m=It(h);h.transform(n,i,o,l,0,0);const p=this._createMaskCanvas(e,t);h.setTransform(1,0,0,1,p.offsetX-m[4],p.offsetY-m[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,y=u.length;g<y;g+=2){const w=Te.transform(m,[n,i,o,l,u[g],u[g+1]]);h.drawImage(p.canvas,w[4],w[5]),this.dependencyTracker?.recordBBox(e,this.ctx,w[4],w[4]+p.canvas.width,w[5],w[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Ts.transformAndFill);for(const l of t){const{data:u,width:h,height:m,transform:p}=l,g=this.cachedCanvases.getCanvas("maskCanvas",h,m),y=g.context;y.save();const w=this.getObject(e,u,l);vw(y,w),y.globalCompositeOperation="source-in",y.fillStyle=o?i.getPattern(y,this,ni(n),jn.FILL,e):i,y.fillRect(0,0,h,m),y.restore(),n.save(),n.transform(...p),n.scale(1,-1),qu(n,g.canvas,0,0,h,m,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,h,0,m),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Xe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,o){if(!this.contentVisible)return;const l=this.getObject(e,t);if(!l){Xe("Dependent image isn't ready yet");return}const u=l.width,h=l.height,m=[];for(let p=0,g=o.length;p<g;p+=2)m.push({transform:[n,0,0,i,o[p],o[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(e,l,m)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,i),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",o.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const n=t.width,i=t.height,o=this.ctx;this.save(e);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/i);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,i).context;gw(p,t),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,ni(o));o.imageSmoothingEnabled=yw(It(o),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,o,0,n,-i,0).recordDependencies(e,Ts.imageXObject).recordOperation(e),qu(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;const i=this.ctx;let o;if(t.bitmap)o=t.bitmap;else{const l=t.width,u=t.height,m=this.cachedCanvases.getCanvas("inlineImage",l,u).context;gw(m,t),o=this.applyTransferMapsToCanvas(m)}this.dependencyTracker?.resetBBox(e);for(const l of n)i.save(),i.transform(...l.transform),i.scale(1,-1),qu(i,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Ts.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(i||(this.pendingClip===bw?o.clip(t,"evenodd"):o.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=It(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:o}=this.ctx.getTransform();let l,u;if(n===0&&i===0){const h=Math.abs(t),m=Math.abs(o);if(h===m)if(e===0)l=u=1/h;else{const p=h*e;l=u=p<1?1/p:1}else if(e===0)l=1/h,u=1/m;else{const p=h*e,g=m*e;l=p<1?1/p:1,u=g<1?1/g:1}}else{const h=Math.abs(t*o-n*i),m=Math.hypot(t,n),p=Math.hypot(i,o);if(e===0)l=p/h,u=m/h;else{const g=e*h;l=p>g?p/g:1,u=m>g?m/g:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(i||1)*o,n.stroke(e);return}const u=n.getLineDash();t&&n.save(),n.scale(o,l),Gm.a=1/o,Gm.d=1/l;const h=new Path2D;if(h.addPath(e,Gm),u.length>0){const m=Math.max(o,l);n.setLineDash(u.map(p=>p/m)),n.lineDashOffset/=m}n.lineWidth=i||1,n.stroke(h),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const a in Eo)ho.prototype[a]!==void 0&&(ho.prototype[Eo[a]]=ho.prototype[a]);class fo{#e;#t;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,n={};let i=0;for(const m of fo.strings){const p=t.encode(e[m]);n[m]=p,i+=4+p.length}const o=new ArrayBuffer(i),l=new Uint8Array(o),u=new DataView(o);let h=0;for(const m of fo.strings){const p=n[m],g=p.length;u.setUint32(h,g),l.set(p,h+4),h+=4+g}return ct(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}#n(e){ct(e<fo.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class mo{#e;#t;#s;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,n={};let i=0;for(const y of mo.strings){const w=t.encode(e[y]);n[y]=w,i+=4+w.length}i+=4;let o,l,u=1+i;e.style&&(o=t.encode(e.style.style),l=t.encode(e.style.weight),u+=4+o.length+4+l.length);const h=new ArrayBuffer(u),m=new Uint8Array(h),p=new DataView(h);let g=0;p.setUint8(g++,e.guessFallback?1:0),p.setUint32(g,0),g+=4,i=0;for(const y of mo.strings){const w=n[y],A=w.length;i+=4+A,p.setUint32(g,A),m.set(w,g+4),g+=4+A}return p.setUint32(g-i-4,i),e.style&&(p.setUint32(g,o.length),m.set(o,g+4),g+=4+o.length,p.setUint32(g,l.length),m.set(l,g+4),g+=4+l.length),ct(g<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(g)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){ct(e<mo.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),n=this.#s.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),o=this.#s.decode(new Uint8Array(this.#e,e+4,i));return{style:n,weight:o}}}class St{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#s=this.#t+1+8;static#n=this.#s+1+48;static#r=this.#n+1+6;#i;#a;#o;constructor({data:e,extra:t}){this.#i=e,this.#a=new TextDecoder,this.#o=new DataView(this.#i),t&&Object.assign(this,t)}#c(e){ct(e<St.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,i=this.#o.getUint8(t)>>n&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return ct(e<St.numbers.length,"Invalid number index"),this.#o.getFloat64(St.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=St.#t;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<4;i++)n.push(this.#o.getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=St.#s;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<6;i++)n.push(this.#o.getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=St.#n;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<3;i++)n.push(this.#o.getInt16(e,!0)),e+=2;return n}#h(e){ct(e<St.strings.length,"Invalid string index");let t=St.#r+4;for(let o=0;o<e;o++)t+=this.#o.getUint32(t)+4;const n=this.#o.getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(this.#i,t+4,n)),this.#a.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=St.#r;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const o=this.#o.getUint32(e);if(o!==0)return new Uint8Array(this.#i,e+4,o)}clearData(){let e=St.#r;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const o=this.#o.getUint32(e);new Uint8Array(this.#i,e+4,o).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=St.#r;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);if(i===0)return null;const o=new Uint8Array(i);return o.set(new Uint8Array(this.#i,e+4,i)),new fo(o.buffer)}get systemFontInfo(){let e=St.#r;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(this.#i,e+4,n)),new mo(i.buffer)}static write(e){const t=e.systemFontInfo?mo.write(e.systemFontInfo):null,n=e.cssFontInfo?fo.write(e.cssFontInfo):null,i=new TextEncoder,o={};let l=0;for(const S of St.strings)o[S]=i.encode(e[S]),l+=4+o[S].length;const u=St.#r+4+l+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(u),m=new Uint8Array(h),p=new DataView(h);let g=0;const y=St.bools.length;let w=0,A=0;for(let S=0;S<y;S++){const E=e[St.bools[S]];w|=(E===void 0?0:E?2:1)<<A,A+=2,(A===8||S===y-1)&&(p.setUint8(g++,w),w=0,A=0)}ct(g===St.#e,"FontInfo.write: Boolean properties offset mismatch");for(const S of St.numbers)p.setFloat64(g,e[S]),g+=8;if(ct(g===St.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){p.setUint8(g++,4);for(const S of e.bbox)p.setInt16(g,S,!0),g+=2}else p.setUint8(g++,0),g+=8;if(ct(g===St.#s,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){p.setUint8(g++,6);for(const S of e.fontMatrix)p.setFloat64(g,S,!0),g+=8}else p.setUint8(g++,0),g+=48;if(ct(g===St.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){p.setUint8(g++,1);for(const S of e.defaultVMetrics)p.setInt16(g,S,!0),g+=2}else p.setUint8(g++,0),g+=6;ct(g===St.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(St.#r,0),g+=4;for(const S of St.strings){const E=o[S],C=E.length;p.setUint32(g,C),m.set(E,g+4),g+=4+C}if(p.setUint32(St.#r,g-St.#r-4),!t)p.setUint32(g,0),g+=4;else{const S=t.byteLength;p.setUint32(g,S),ct(g+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),m.set(new Uint8Array(t),g+4),g+=4+S}if(!n)p.setUint32(g,0),g+=4;else{const S=n.byteLength;p.setUint32(g,S),ct(g+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),m.set(new Uint8Array(n),g+4),g+=4+S}return e.data===void 0?(p.setUint32(g,0),g+=4):(p.setUint32(g,e.data.length),m.set(e.data,g+4),g+=4+e.data.length),ct(g<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(g)}}class Sa{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class N4{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const so=Symbol("INTERNAL");class j4{#e=!1;#t=!1;#s=!1;#n=!0;constructor(e,{name:t,intent:n,usage:i,rbGroups:o}){this.#e=!!(e&cs.DISPLAY),this.#t=!!(e&cs.PRINT),this.name=t,this.intent=n,this.usage=i,this.rbGroups=o}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==so&&_t("Internal method `_setVisible` called."),this.#s=n,this.#n=t}}class M4{#e=null;#t=new Map;#s=null;#n=null;constructor(e,t=cs.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const n of e.groups)this.#t.set(n.id,new j4(t,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible(so,!1);for(const n of e.on)this.#t.get(n)._setVisible(so,!0);for(const n of e.off)this.#t.get(n)._setVisible(so,!1);this.#s=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const o=e[i];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#t.has(o))l=this.#t.get(o).visible;else return Xe(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return qd("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Xe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#r(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Xe(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Xe(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Xe(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Xe(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Xe(`Unknown optional content policy ${e.policy}.`),!0}return Xe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){const i=this.#t.get(e);if(!i){Xe(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const l of o)l!==e&&this.#t.get(l)?._setVisible(so,!1,!0);i._setVisible(so,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const o=this.#t.get(i);if(o)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!o.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new _C;for(const[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class R4{constructor(e,{disableRange:t=!1,disableStream:n=!1}){ct(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:o,progressiveDone:l,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,m)=>{this._onReceiveData({begin:h,chunk:m})}),e.addProgressListener((h,m)=>{this._onProgress({loaded:h,total:m})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});ct(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ct(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new D4(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new k4(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class D4{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=Wd(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class k4{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function O4(a){let e=!0,t=n("filename\\*","i").exec(a);if(t){t=t[1];let p=u(t);return p=unescape(p),p=h(p),p=m(p),o(p)}if(t=l(a),t){const p=m(t);return o(p)}if(t=n("filename","i").exec(a),t){t=t[1];let p=u(t);return p=m(p),o(p)}function n(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const y=new TextDecoder(p,{fatal:!0}),w=hc(g);g=y.decode(w),e=!1}catch{}}return g}function o(p){return e&&/[\x80-\xff]/.test(p)&&(p=i("utf-8",p),e&&(p=i("iso-8859-1",p))),p}function l(p){const g=[];let y;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=w.exec(p))!==null;){let[,S,E,C]=y;if(S=parseInt(S,10),S in g){if(S===0)break;continue}g[S]=[E,C]}const A=[];for(let S=0;S<g.length&&S in g;++S){let[E,C]=g[S];C=u(C),E&&(C=unescape(C),S===0&&(C=h(C))),A.push(C)}return A.join("")}function u(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let y=0;y<g.length;++y){const w=g[y].indexOf('"');w!==-1&&(g[y]=g[y].slice(0,w),g.length=y+1),g[y]=g[y].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function h(p){const g=p.indexOf("'");if(g===-1)return p;const y=p.slice(0,g),A=p.slice(g+1).replace(/^[^']*'/,"");return i(y,A)}function m(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,y,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,E){return String.fromCharCode(parseInt(E,16))}),i(y,A);try{A=atob(A)}catch{}return i(y,A)})}return""}function OC(a,e){const t=new Headers;if(!a||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function Kd(a){return URL.parse(a)?.origin??null}function LC({responseHeaders:a,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(a.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*t)||n||!e||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function PC(a){const e=a.get("Content-Disposition");if(e){let t=O4(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Wd(t))return t}return null}function vc(a,e){return new nc(`Unexpected server response (${a}) while retrieving PDF "${e}".`,a,a===404||a===0&&e.startsWith("file:"))}function IC(a){return a===200||a===206}function BC(a,e,t){return{method:"GET",headers:a,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function zC(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(Xe(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class L4{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=OC(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ct(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new P4(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new I4(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class P4{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,BC(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=Kd(o.url),!IC(o.status))throw vc(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:h}=LC({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=PC(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new $i("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:zC(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class I4{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);const l=i.url;fetch(l,BC(o,this._withCredentials,this._abortController)).then(u=>{const h=Kd(u.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!IC(u.status))throw vc(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:zC(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Ym=200,qm=206;function B4(a){const e=a.response;return typeof e!="string"?e:hc(e).buffer}class z4{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=OC(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,l]of this.headers)t.setRequestHeader(o,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=qm):i.expectedStatus=Ym,t.responseType="arraybuffer",ct(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const o=i.status||Ym;if(!(o===Ym&&n.expectedStatus===qm)&&o!==n.expectedStatus){n.onError(i.status);return}const u=B4(i);if(o===qm){const h=i.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);m?n.onDone({begin:parseInt(m[1],10),chunk:u}):(Xe('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class F4{constructor(e){this._source=e,this._manager=new z4(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ct(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new H4(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new U4(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class H4{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Kd(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...m]=u.split(": ");return[h,m.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=LC({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=PC(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=vc(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class U4{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Kd(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=vc(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const V4=/^[a-z][a-z0-9\-+.]+:/i;function $4(a){if(V4.test(a))return new URL(a);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(a))}class G4{constructor(e){this.source=e,this.url=$4(e.url),ct(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ct(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Y4(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new q4(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Y4{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=vc(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new $i("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class q4{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ol=Symbol("INITIAL_DATA");class FC{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Ol}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const n=this.#e[e];if(!n||n.data===Ol)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#e[e];return!!t&&t.data!==Ol}delete(e){const t=this.#e[e];return!t||t.data===Ol?!1:(delete this.#e[e],!0)}resolve(e,t=null){const n=this.#t(e);n.data=t,n.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Ol&&(yield[e,t])}}}const X4=1e5,xw=30;let ic=class Ns{#e=Promise.withResolvers();#t=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#i=null;#a=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#v=null;static#b=new Map;static#y=new Map;static#E=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(h){h.enqueue(e),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=n.scale*Ys.pixelRatio,this.#h=n.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:o,pageX:l,pageY:u}=n.rawDims;this.#v=[1,0,0,-1,-l,u+o],this.#o=i,this.#a=o,Ns.#j(),Na(t,n),this.#e.promise.finally(()=>{Ns.#x.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=wn.platform;return Ze(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#r??=t.lang,Object.assign(this.#f,t.styles),this.#T(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),Ns.#x.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const n=e.scale*Ys.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,Na(this.#l,{rotation:i})),n!==this.#d){t?.(),this.#d=n;const o={div:null,properties:null,ctx:Ns.#M(this.#r)};for(const l of this.#u)o.properties=this.#p.get(l),o.div=l,this.#C(o)}}cancel(){const e=new $i("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(e){if(this.#s)return;this.#i.ctx??=Ns.#M(this.#r);const t=this.#u,n=this.#g;for(const i of e){if(t.length>X4){Xe("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const o=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),o.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(i.str),this.#S(i)}}#S(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const i=Te.transform(this.#v,e.transform);let o=Math.atan2(i[1],i[0]);const l=this.#f[e.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=Ns.fontFamilyMap.get(u)||u;const h=Math.hypot(i[2],i[3]),m=h*Ns.#I(u,l,this.#r);let p,g;o===0?(p=i[4],g=i[5]-m):(p=i[4]+m*Math.sin(o),g=i[5]-m*Math.cos(o));const y="calc(var(--total-scale-factor) *",w=t.style;this.#t===this.#l?(w.left=`${(100*p/this.#o).toFixed(2)}%`,w.top=`${(100*g/this.#a).toFixed(2)}%`):(w.left=`${y}${p.toFixed(2)}px)`,w.top=`${y}${g.toFixed(2)}px)`),w.fontSize=`${y}${(Ns.#A*h).toFixed(2)}px)`,w.fontFamily=u,n.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);S!==E&&Math.max(S,E)/Math.min(S,E)>1.5&&(A=!0)}if(A&&(n.canvasWidth=l.vertical?e.height:e.width),this.#p.set(t,n),this.#i.div=t,this.#i.properties=n,this.#C(this.#i),n.hasText&&this.#t.append(t),n.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#t.append(S)}}#C(e){const{div:t,properties:n,ctx:i}=e,{style:o}=t;let l="";if(Ns.#A>1&&(l=`scale(${1/Ns.#A})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=o,{canvasWidth:h,fontSize:m}=n;Ns.#N(i,m*this.#d,u);const{width:p}=i.measureText(t.textContent);p>0&&(l=`scaleX(${h*this.#d/p}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#M(e=null){let t=this.#y.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#N(e,t,n){const i=this.#E.get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)}static#j(){if(this.#A!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#A=e.getBoundingClientRect().height,e.remove()}static#I(e,t,n){const i=this.#b.get(e);if(i)return i;const o=this.#M(n);o.canvas.width=o.canvas.height=xw,this.#N(o,xw,e);const l=o.measureText(""),u=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let m=.8;return u?m=u/(u+h):(wn.platform.isFirefox&&Xe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?m=t.ascent:t.descent&&(m=1+t.descent)),this.#b.set(e,m),m}};const W4=100;function Dg(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const e=new kg,{docId:t}=e,n=a.url?s4(a.url):null,i=a.data?i4(a.data):null,o=a.httpHeaders||null,l=a.withCredentials===!0,u=a.password??null,h=a.range instanceof Og?a.range:null,m=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:2**16;let p=a.worker instanceof _o?a.worker:null;const g=a.verbosity,y=typeof a.docBaseUrl=="string"&&!mc(a.docBaseUrl)?a.docBaseUrl:null,w=Vu(a.cMapUrl),A=a.cMapPacked!==!1,S=a.CMapReaderFactory||(Bn?d4:rw),E=Vu(a.iccUrl),C=Vu(a.standardFontDataUrl),T=a.StandardFontDataFactory||(Bn?h4:ow),N=Vu(a.wasmUrl),M=a.WasmFactory||(Bn?f4:lw),L=a.stopAtErrors!==!0,I=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,O=a.isEvalSupported!==!1,P=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!Bn,F=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!Bn&&(wn.platform.isFirefox||!globalThis.chrome),$=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,W=typeof a.disableFontFace=="boolean"?a.disableFontFace:Bn,ie=a.fontExtraProperties===!0,le=a.enableXfa===!0,G=a.ownerDocument||globalThis.document,fe=a.disableRange===!0,R=a.disableStream===!0,U=a.disableAutoFetch===!0,H=a.pdfBug===!0,z=a.CanvasFactory||(Bn?u4:o4),ce=a.FilterFactory||(Bn?c4:l4),j=a.enableHWA===!0,k=a.useWasm!==!1,B=h?h.length:a.length??NaN,X=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!Bn&&!W,K=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:!!(S===rw&&T===ow&&M===lw&&w&&C&&N&&Hl(w,document.baseURI)&&Hl(C,document.baseURI)&&Hl(N,document.baseURI)),oe=null;B3(g);const J={canvasFactory:new z({ownerDocument:G,enableHWA:j}),filterFactory:new ce({docId:t,ownerDocument:G}),cMapReaderFactory:K?null:new S({baseUrl:w,isCompressed:A}),standardFontDataFactory:K?null:new T({baseUrl:C}),wasmFactory:K?null:new M({baseUrl:N})};p||(p=_o.create({verbosity:g,port:Sa.workerPort}),e._worker=p);const Y={docId:t,apiVersion:"5.4.296",data:i,password:u,disableAutoFetch:U,rangeChunkSize:m,length:B,docBaseUrl:y,enableXfa:le,evaluatorOptions:{maxImageSize:I,disableFontFace:W,ignoreErrors:L,isEvalSupported:O,isOffscreenCanvasSupported:P,isImageDecoderSupported:F,canvasMaxAreaInBytes:$,fontExtraProperties:ie,useSystemFonts:X,useWasm:k,useWorkerFetch:K,cMapUrl:w,iccUrl:E,standardFontDataUrl:C,wasmUrl:N}},se={ownerDocument:G,pdfBug:H,styleElement:oe,loadingParams:{disableAutoFetch:U,enableXfa:le}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const pe=p.messageHandler.sendWithPromise("GetDocRequest",Y,i?[i.buffer]:null);let xe;if(h)xe=new R4(h,{disableRange:fe,disableStream:R});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const ge=Hl(n)?L4:Bn?G4:F4;xe=new ge({url:n,length:B,httpHeaders:o,withCredentials:l,rangeChunkSize:m,disableRange:fe,disableStream:R})}return pe.then(ge=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ve=new Ul(t,ge,p.port),Oe=new Z4(Ve,e,xe,se,J,j);e._transport=Oe,Ve.send("Ready",null)})}).catch(e._capability.reject),e}class kg{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${kg.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Og=class{#e=Promise.withResolvers();#t=[];#s=[];#n=[];#r=[];constructor(e,t,n=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){this.#r.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#s.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const n of this.#r)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const n of this.#n)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#s)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){_t("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class K4{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ze(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Q4{#e=!1;constructor(e,t,n,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new Jx:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new FC,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:o=!1}={}){return new fc({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ze(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:o=ci.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:m=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1,recordOperations:w=!1,operationsFilter:A=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(i,o,g,y),{renderingIntent:E,cacheKey:C}=S;this.#e=!1,h||=this._transport.getOptionalContentConfig(E);let T=this._intentStates.get(C);T||(T=Object.create(null),this._intentStates.set(C,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const N=!!(E&cs.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const M=!!(this._pdfBug&&globalThis.StepperManager?.enabled),L=!this.recordedBBoxes&&(w||M),I=F=>{if(T.renderTasks.delete(O),L){const $=O.gfx?.dependencyTracker.take();$&&(O.stepper&&O.stepper.setOperatorBBoxes($,O.gfx.dependencyTracker.takeDebugMetadata()),w&&(this.recordedBBoxes=$))}N&&(this.#e=!0),this.#t(),F?(O.capability.reject(F),this._abortOperatorList({intentState:T,reason:F instanceof Error?F:new Error(F)})):O.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},O=new ao({callback:I,params:{canvas:t,canvasContext:e,dependencyTracker:L?new p4(t,T.operatorList.length,M):null,viewport:n,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:m,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:A});(T.renderTasks||=new Set).add(O);const P=O.task;return Promise.all([T.displayReadyCapability.promise,h]).then(([F,$])=>{if(this.destroyed){I();return}if(this._stats?.time("Rendering"),!($.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");O.initializeGraphics({transparency:F,optionalContentConfig:$}),O.operatorListChanged()}).catch(I),P}getOperatorList({intent:e="display",annotationMode:t=ci.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(e,t,n,i,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>sc.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function o(){l.read().then(function({value:h,done:m}){if(m){n(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},i)}const l=t.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new Jx),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:o,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:i},l).getReader(),m=this._intentStates.get(t);m.streamReader=h;const p=()=>{h.read().then(({value:g,done:y})=>{if(y){m.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,m),p())},g=>{if(m.streamReader=null,!this._transport.destroyed){if(m.operatorList){m.operatorList.lastChunk=!0;for(const y of m.renderTasks)y.operatorListChanged();this.#t()}if(m.displayReadyCapability)m.displayReadyCapability.reject(g);else if(m.opListReadCapability)m.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Xd){let i=W4;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new $i(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,o]of this._intentStates)if(o===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var xa,zs,Pi,Za,Cd,Ja,er,zn,ad,HC,UC,Vl,vo,rd;const Pt=class Pt{constructor({name:e=null,port:t=null,verbosity:n=z3()}={}){Js(this,zn);Js(this,xa,Promise.withResolvers());Js(this,zs,null);Js(this,Pi,null);Js(this,Za,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(Lt(Pt,er).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Lt(Pt,er).set(t,this),ei(this,zn,HC).call(this,t)}else ei(this,zn,UC).call(this)}get promise(){return Lt(this,xa).promise}get port(){return Lt(this,Pi)}get messageHandler(){return Lt(this,zs)}destroy(){this.destroyed=!0,Lt(this,Za)?.terminate(),Kn(this,Za,null),Lt(Pt,er).delete(Lt(this,Pi)),Kn(this,Pi,null),Lt(this,zs)?.destroy(),Kn(this,zs,null)}static create(e){const t=Lt(this,er).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Pt(e)}static get workerSrc(){if(Sa.workerSrc)return Sa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ze(this,"_setupFakeWorkerGlobal",(async()=>Lt(this,vo,rd)?Lt(this,vo,rd):(await import(this.workerSrc)).WorkerMessageHandler)())}};xa=new WeakMap,zs=new WeakMap,Pi=new WeakMap,Za=new WeakMap,Cd=new WeakMap,Ja=new WeakMap,er=new WeakMap,zn=new WeakSet,ad=function(){Lt(this,xa).resolve(),Lt(this,zs).send("configure",{verbosity:this.verbosity})},HC=function(e){Kn(this,Pi,e),Kn(this,zs,new Ul("main","worker",e)),Lt(this,zs).on("ready",()=>{}),ei(this,zn,ad).call(this)},UC=function(){if(Lt(Pt,Ja)||Lt(Pt,vo,rd)){ei(this,zn,Vl).call(this);return}let{workerSrc:e}=Pt;try{Pt._isSameOrigin(window.location,e)||(e=Pt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Ul("main","worker",t),i=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?Lt(this,xa).reject(new Error("Worker was destroyed")):ei(this,zn,Vl).call(this)},o=new AbortController;t.addEventListener("error",()=>{Lt(this,Za)||i()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){i();return}Kn(this,zs,n),Kn(this,Pi,t),Kn(this,Za,t),ei(this,zn,ad).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){i();return}try{l()}catch{ei(this,zn,Vl).call(this)}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{qd("The worker has been disabled.")}ei(this,zn,Vl).call(this)},Vl=function(){Lt(Pt,Ja)||(Xe("Setting up fake worker."),Kn(Pt,Ja,!0)),Pt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Lt(this,xa).reject(new Error("Worker was destroyed"));return}const t=new r4;Kn(this,Pi,t);const n=`fake${zb(Pt,Cd)._++}`,i=new Ul(n+"_worker",n,t);e.setup(i,t),Kn(this,zs,new Ul(n,n+"_worker",t)),ei(this,zn,ad).call(this)}).catch(e=>{Lt(this,xa).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},vo=new WeakSet,rd=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Js(Pt,vo),Js(Pt,Cd,0),Js(Pt,Ja,!1),Js(Pt,er,new WeakMap),Bn&&(Kn(Pt,Ja,!0),Sa.workerSrc||="./pdf.worker.mjs"),Pt._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;const i=new URL(t,n);return n.origin===i.origin},Pt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Pt.fromPort=e=>{if(X3("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Pt.create(e)};let _o=Pt;class Z4{#e=new Map;#t=new Map;#s=new Map;#n=new Map;#r=null;constructor(e,t,n,i,o,l){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new FC,this.fontLoader=new t4({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#i(e,t=null){const n=this.#e.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return Ze(this,"annotationStorage",new Ng)}getRenderingIntent(e,t=ci.ENABLE,n=null,i=!1,o=!1){let l=cs.DISPLAY,u=bp;switch(e){case"any":l=cs.ANY;break;case"display":break;case"print":l=cs.PRINT;break;default:Xe(`getRenderingIntent - invalid intent: ${e}`)}const h=l&cs.PRINT&&n instanceof TC?n:this.annotationStorage;switch(t){case ci.DISABLE:l+=cs.ANNOTATIONS_DISABLE;break;case ci.ENABLE:break;case ci.ENABLE_FORMS:l+=cs.ANNOTATIONS_FORMS;break;case ci.ENABLE_STORAGE:l+=cs.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Xe(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(l+=cs.IS_EDITING),o&&(l+=cs.OPLIST);const{ids:m,hash:p}=h.modifiedIds,g=[l,u.hash,p];return{renderingIntent:l,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:m}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),ic.cleanup(),this._networkStream?.cancelAllRequests(new $i("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{ct(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){i.close();return}ct(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:o,contentLength:l}=this._fullReader;return(!i||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{t.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:l}}),e.on("GetRangeReader",(n,i)=>{ct(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){i.close();return}ct(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{i.error(l)})},i.onCancel=l=>{o.cancel(l),i.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new K4(n,this))}),e.on("DocException",n=>{t._capability.reject(Qn(n))}),e.on("PasswordRequest",n=>{this.#r=Promise.withResolvers();try{if(!t.onPassword)throw Qn(n);const i=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};t.onPassword(i,n.code)}catch(i){this.#r.reject(i)}return this.#r.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in o){const p=o.error;Xe(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const l=new St(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,h=new n4(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:m}=o;ct(m,"The imageRef must be defined.");for(const p of this.#t.values())for(const[,g]of p.objs)if(g?.ref===m)return g.dataLen?(this.commonObjs.resolve(n,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,o,l])=>{if(this.destroyed)return;const u=this.#t.get(i);if(!u.objs.has(n)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Xe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#s.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,e);const l=new Q4(t,o,this,this._params.pdfBug);return this.#t.set(t,l),l});return this.#s.set(t,i),i}getPageIndex(e){return xp(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new M4(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new N4(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),ic.cleanup()}}cachedPageNumber(e){if(!xp(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class J4{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class ao{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:h,filterFactory:m,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:y=null,enableHWA:w=!1,operationsFilter:A=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=m,this._pdfBug=g,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new J4(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=w,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(ao.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ao.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ho(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),ao.#t.delete(this._canvas),e||=new Xd(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ao.#t.delete(this._canvas),this.callback())))}}const Lg="5.4.296",VC="f56dc8601";class us{#e=null;#t=null;#s;#n=null;#r=!1;#i=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Ze(this,"_keyboardManager",new pc([[["Escape","mac+Escape"],us.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],us.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],us.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],us.prototype._moveToPrevious],[["Home","mac+Home"],us.prototype._moveToBeginning],[["End","mac+End"],us.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#a=e):this.#i=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#s=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",us.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#a&&(e.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const n=this.#t=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#s,e.append(n),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",ms,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(e.id=`${this.#a.id}_colorpicker_dropdown`);for(const[n,i]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=n,o.setAttribute("data-l10n-id",us.#h[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=i,o.ariaSelected=i===this.#s,o.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(o)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:rt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#n.lastChild?.focus()}#g(e){us._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#r=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#p){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class ac{#e=null;#t=null;#s=null;static#n=null;constructor(e){this.#t=e,this.#s=e._uiManager,ac.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:n}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",ac.#n[e]),i.addEventListener("input",()=>{this.#s.updateParams(t,i.value)},{signal:this.#s._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function ww(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function Ll(a){return Math.max(0,Math.min(255,255*a))}class Sw{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ll(e),[e,e,e]}static G_HTML([e]){const t=ww(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Ll)}static RGB_HTML(e){return`#${e.map(ww).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[Ll(1-Math.min(1,e+i)),Ll(1-Math.min(1,n+i)),Ll(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,o=1-t,l=1-n,u=Math.min(i,o,l);return["CMYK",i,o,l,u]}}class eI{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){_t("Abstract method `_createSVG` called.")}}class rc extends eI{_createSVG(e){return document.createElementNS(Li,e)}}const tI=9,rr=new WeakSet,nI=new Date().getTimezoneOffset()*60*1e3;class Aw{static create(e){switch(e.data.annotationType){case qt.LINK:return new Pg(e);case qt.TEXT:return new iI(e);case qt.WIDGET:switch(e.data.fieldType){case"Tx":return new aI(e);case"Btn":return e.data.radioButton?new $C(e):e.data.checkBox?new oI(e):new lI(e);case"Ch":return new cI(e);case"Sig":return new rI(e)}return new dr(e);case qt.POPUP:return new Ap(e);case qt.FREETEXT:return new GC(e);case qt.LINE:return new dI(e);case qt.SQUARE:return new hI(e);case qt.CIRCLE:return new fI(e);case qt.POLYLINE:return new YC(e);case qt.CARET:return new pI(e);case qt.INK:return new Ig(e);case qt.POLYGON:return new mI(e);case qt.HIGHLIGHT:return new qC(e);case qt.UNDERLINE:return new gI(e);case qt.SQUIGGLY:return new vI(e);case qt.STRIKEOUT:return new yI(e);case qt.STAMP:return new XC(e);case qt.FILEATTACHMENT:return new bI(e);default:return new zt(e)}}}class zt{#e=null;#t=!1;#s=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return zt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:i}=this.data;let o=-1/0,l=-1/0;if(t?.length>=8){for(let u=0;u<t.length;u+=8)t[u+1]>l?(l=t[u+1],o=t[u+2]):t[u+1]===l&&(o=Math.max(o,t[u+2]));return[o,l]}if(n?.length>=1){for(const u of n)for(let h=0,m=u.length;h<m;h+=2)u[h+1]>l?(l=u[h+1],o=u[h]):u[h+1]===l&&(o=Math.max(o,u[h]));if(o!==1/0)return[o,l]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:l}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-o)/n,e[1]=100*(e[1]-l)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${tc}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${tc}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:n}=e;t&&this.#n(t);let i=this.#s?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=this.#s.popup),i&&(i.updateEdited(e),n?.deleted&&(i.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#s?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-u)/o}%`,t.top=`${100*(l-e[3]+h)/l}%`,i===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/l}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),!(this instanceof dr)&&!(this instanceof Pg)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof Ap){const{rotation:S}=t;return!t.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:h}=this;if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const S=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(S>0||E>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof $C){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=T}switch(t.borderStyle.style){case no.SOLID:l.borderStyle="solid";break;case no.DASHED:l.borderStyle="dashed";break;case no.BEVELED:Xe("Unimplemented border style: beveled");break;case no.INSET:Xe("Unimplemented border style: inset");break;case no.UNDERLINE:l.borderBottomStyle="solid";break}const C=t.borderColor||null;C?(this.#t=!0,l.borderColor=Te.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):l.borderWidth=0}const m=Te.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:g,pageX:y,pageY:w}=i.rawDims;l.left=`${100*(m[0]-y)/p}%`,l.top=`${100*(m[1]-w)/g}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(l.width=`${100*u/p}%`,l.height=`${100*h/g}%`):this.setRotation(A,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:o,height:l}=this;e%180!==0&&([o,l]=[l,o]),t.style.width=`${100*o/n}%`,t.style.height=`${100*l/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const o=i.detail[t],l=o[0],u=o.slice(1);i.target.style[n]=Sw[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:Sw[`${l}_rgb`](u)})};return Ze(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||n[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,o]of Object.entries(t)){const l=n[i];if(l){const u={detail:{[i]:o},target:e};l(u),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,o]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,E,C,T]=e.subarray(2,6);if(i===S&&o===E&&t===C&&n===T)return}const{style:l}=this.container;let u;if(this.#t){const{borderColor:S,borderWidth:E}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const h=i-t,m=o-n,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const y=p.createElement("defs");g.append(y);const w=p.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),y.append(w);for(let S=2,E=e.length;S<E;S+=8){const C=e[S],T=e[S+1],N=e[S+2],M=e[S+3],L=p.createElement("rect"),I=(N-t)/h,O=(o-T)/m,P=(C-N)/h,F=(T-M)/m;L.setAttribute("x",I),L.setAttribute("y",O),L.setAttribute("width",P),L.setAttribute("height",F),w.append(L),u?.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${O}" width="${P}" height="${F}"/>`)}this.#t&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${A})`}_createPopup(e=null){const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate);const o=this.#s=new Ap({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){_t("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:o,id:l,exportValues:u}of i){if(o===-1||l===t)continue;const h=typeof u=="string"?u:null,m=document.querySelector(`[data-element-id="${l}"]`);if(m&&!rr.has(m)){Xe(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:m})}return n}for(const i of document.getElementsByName(e)){const{exportValue:o}=i,l=i.getAttribute("data-element-id");l!==t&&rr.has(i)&&n.push({id:l,exportValue:o,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class sI extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Pg extends zt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#s(n,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,n=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),this.#e()}#t(e,t,n="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#s(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const o=n.get(i);o&&(e[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Xe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:i,refs:o,include:l}=t,u=[];if(i.length!==0||o.length!==0){const p=new Set(o);for(const g of i){const y=this._fieldObjects[g]||[];for(const{id:w}of y)p.add(w)}for(const g of Object.values(this._fieldObjects))for(const y of g)p.has(y.id)===l&&u.push(y)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,m=[];for(const p of u){const{id:g}=p;switch(m.push(g),p.type){case"text":{const w=p.defaultValue||"";h.setValue(g,{value:w});break}case"checkbox":case"radiobutton":{const w=p.defaultValue===p.exportValues;h.setValue(g,{value:w});break}case"combobox":case"listbox":{const w=p.defaultValue||"";h.setValue(g,{value:w});break}default:continue}const y=document.querySelector(`[data-element-id="${g}"]`);if(y){if(!rr.has(y)){Xe(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}}),!1}}}class iI extends zt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class dr extends zt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return wn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,o){n.includes("mouse")?e.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(l)}})})}_setEventListeners(e,t,n,i){for(const[o,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,o,l,i),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Te.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||tI,o=e.style;let l;const u=2,h=m=>Math.round(10*m)/10;if(this.data.multiLine){const m=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(m/(Fm*i))||1,g=m/p;l=Math.min(i,h(g/Fm))}else{const m=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(i,h(m/Fm))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=Te.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class aI extends dr{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const o=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),o.setValue(l.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let o=i.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=i.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),rr.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:m,datetimeType:p,timeStep:g}=this.data,y=!!p&&this.enableScripting;m&&(n.title=m),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",A=>{const S=this.data.defaultFieldValue??"";n.value=h.userValue=S,h.formattedValue=null});let w=A=>{const{formattedValue:S}=h;S!=null&&(A.target.value=S),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",S=>{if(h.focused)return;const{target:E}=S;if(y&&(E.type=p,g&&(E.step=g)),h.userValue){const C=h.userValue;if(y)if(p==="time"){const T=new Date(C),N=[T.getHours(),T.getMinutes(),T.getSeconds()];E.value=N.map(M=>M.toString().padStart(2,"0")).join(":")}else E.value=new Date(C-nI).toISOString().split(p==="date"?"T":".",1)[0];else E.value=C}h.lastCommittedValue=E.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const E={value(C){h.userValue=C.detail.value??"",y||e.setValue(t,{value:h.userValue.toString()}),C.target.value=h.userValue},formattedValue(C){const{formattedValue:T}=C.detail;h.formattedValue=T,T!=null&&C.target!==document.activeElement&&(C.target.value=T);const N={formattedValue:T};y&&(N.value=T),e.setValue(t,N)},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{const{charLimit:T}=C.detail,{target:N}=C;if(T===0){N.removeAttribute("maxLength");return}N.setAttribute("maxLength",T);let M=h.userValue;!M||M.length<=T||(M=M.slice(0,T),N.value=h.userValue=M,e.setValue(t,{value:M}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:N.selectionStart,selEnd:N.selectionEnd}}))}};this._dispatchEventFromSandbox(E,S)}),n.addEventListener("keydown",S=>{h.commitKey=1;let E=-1;if(S.key==="Escape"?E=0:S.key==="Enter"&&!this.data.multiLine?E=2:S.key==="Tab"&&(h.commitKey=3),E===-1)return;const{value:C}=S.target;h.lastCommittedValue!==C&&(h.lastCommittedValue=C,h.userValue=C,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:E,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const A=w;w=null,n.addEventListener("blur",S=>{if(!h.focused||!S.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:E}=S;let{value:C}=E;if(y){if(C&&p==="time"){const T=C.split(":").map(N=>parseInt(N,10));C=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),E.step=""}else C.includes("T")||(C=`${C}T00:00`),C=new Date(C).valueOf();E.type="text"}h.userValue=C,h.lastCommittedValue!==C&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:h.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),A(S)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",S=>{h.lastCommittedValue=null;const{data:E,target:C}=S,{value:T,selectionStart:N,selectionEnd:M}=C;let L=N,I=M;switch(S.inputType){case"deleteWordBackward":{const O=T.substring(0,N).match(/\w*[^\w]*$/);O&&(L-=O[0].length);break}case"deleteWordForward":{const O=T.substring(N).match(/^[^\w]*\w*/);O&&(I+=O[0].length);break}case"deleteContentBackward":N===M&&(L-=1);break;case"deleteContentForward":N===M&&(I+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,change:E||"",willCommit:!1,selStart:L,selEnd:I}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(w&&n.addEventListener("blur",w),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class rI extends dr{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class oI extends dr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return rr.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const m of this._getElementsByName(u,n)){const p=h&&m.exportValue===t.exportValue;m.domElement&&(m.domElement.checked=p),e.setValue(m.id,{value:p})}e.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const u=t.defaultFieldValue||"Off";l.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class $C extends dr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const o=document.createElement("input");if(rr.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const m of this._getElementsByName(u,n))e.setValue(m.id,{value:!1});e.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const u=t.defaultFieldValue;l.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:m=>{const p=l===m.detail.value;for(const g of this._getElementsByName(m.target.name)){const y=p&&g.id===n;g.domElement&&(g.domElement.checked=y),e.setValue(g.id,{value:y})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class lI extends Pg{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class cI extends dr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");rr.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const y of i.options)y.selected=y.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,n.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),o=!1),i.append(g)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),i.prepend(p),l=()=>{p.remove(),i.removeEventListener("input",l),l=null},i.addEventListener("input",l)}const u=p=>{const g=p?"value":"textContent",{options:y,multiple:w}=i;return w?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[g]):y.selectedIndex===-1?null:y[y.selectedIndex][g]};let h=u(!1);const m=p=>{const g=p.target.options;return Array.prototype.map.call(g,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",p=>{const g={value(y){l?.();const w=y.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const S of i.options)S.selected=A.has(S.value);e.setValue(t,{value:u(!0)}),h=u(!1)},multipleSelection(y){i.multiple=!0},remove(y){const w=i.options,A=y.detail.remove;w[A].selected=!1,i.remove(A),w.length>0&&Array.prototype.findIndex.call(w,E=>E.selected)===-1&&(w[0].selected=!0),e.setValue(t,{value:u(!0),items:m(y)}),h=u(!1)},clear(y){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),h=u(!1)},insert(y){const{index:w,displayValue:A,exportValue:S}=y.detail.insert,E=i.children[w],C=document.createElement("option");C.textContent=A,C.value=S,E?E.before(C):i.append(C),e.setValue(t,{value:u(!0),items:m(y)}),h=u(!1)},items(y){const{items:w}=y.detail;for(;i.length!==0;)i.remove(0);for(const A of w){const{displayValue:S,exportValue:E}=A,C=document.createElement("option");C.textContent=S,C.value=E,i.append(C)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:u(!0),items:m(y)}),h=u(!1)},indices(y){const w=new Set(y.detail.indices);for(const A of y.target.options)A.selected=w.has(A.index);e.setValue(t,{value:u(!0)}),h=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(g,p)}),i.addEventListener("input",p=>{const g=u(!0),y=u(!1);e.setValue(t,{value:g}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:y,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):i.addEventListener("input",function(p){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Ap extends zt{constructor(e){const{data:t,elements:n,parent:i}=e,o=!!i._commentManager;if(super(e,{isRenderable:!o&&zt._hasPopupData(t)}),this.elements=n,o&&zt._hasPopupData(t)){const l=this.popup=this.#e();for(const u of n)u.popup=l}else this.popup=null}#e(){return new uI({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${Ag}${i}`).join(",")),this.container}}class uI{#e=null;#t=this.#$.bind(this);#s=this.#z.bind(this);#n=this.#k.bind(this);#r=this.#w.bind(this);#i=null;#a=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#v=null;#b=null;#y=null;#E=null;#A=null;#x=null;#T=!1;#S=null;#C=null;constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:o,contentsObj:l,richText:u,parent:h,rect:m,parentRect:p,open:g,commentManager:y=null}){this.#a=e,this.#A=i,this.#o=l,this.#E=u,this.#h=h,this.#i=t,this.#y=m,this.#d=p,this.#l=n,this.#e=y,this.#S=n[0],this.#c=bd.toDateObject(o),this.trigger=n.flatMap(w=>w.getElementsToTriggerPopup()),y?this.renderCommentButton():(this.#M(),this.#a.hidden=!0,g&&this.#w())}#M(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#r,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#s,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#N(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#v=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#v||this.#N(),!this.#v))return;const{signal:e}=this.#m=new AbortController,t=!!this.#S.extraPopupElement,n=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},o=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#S.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",i,{signal:e}),l.addEventListener("pointerleave",o,{signal:e}),l.classList.add("popupTriggerArea")}else{const l=this.#p=document.createElement("button");l.className="annotationCommentButton";const u=this.#S.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#j(),l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",i,{signal:e}),l.addEventListener("pointerleave",o,{signal:e}),u.after(l)}}#j(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[e,t]=this.#v,{style:n}=this.#p;n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`}#I(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#S.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:i,modificationDate:o}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#C||=this.#S.commentText,this.#C}set comment(e){e!==this.comment&&(this.#S.commentText=this.#C=e)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:n}=this.#p.getBoundingClientRect(),{x:i,y:o,width:l,height:u}=this.#S.layer.getBoundingClientRect();return[(e-i)/l,(t+n-o)/u]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#v}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=this.#b||this.commentButtonPosition.map(m=>m/100),i=this.parentBoundingClientRect,{x:o,y:l,width:u,height:h}=i;this.#e.showDialog(null,this,o+t*u,l+n*h,{...e,parentDimensions:i})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#i){const n=e.style.outlineColor=Te.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#A?.str){const n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=this.#A}if(e.append(t),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),t.append(n)}Eg({html:this.#D||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#a.append(e)}get#D(){const e=this.#E,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#E.html||null}get#O(){return this.#D?.attributes?.style?.fontSize||0}get#B(){return this.#D?.attributes?.style?.color||null}#L(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#B,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:i});return n}#$(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:t,deleted:n}){if(this.#e){n?(this.remove(),this.#C=null):t&&(t.deleted?this.remove():(this.#I(),this.#C=t.text)),e&&(this.#v=null,this.#N(),this.#j());return}if(n||t?.deleted){this.remove();return}this.#M(),this.#x||={contentsObj:this.#o,richText:this.#E},e&&(this.#u=null),t&&t.text&&(this.#E=this.#L(t.text),this.#c=bd.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#E}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#_(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:o}}}=this.#h;let l=!!this.#d,u=l?this.#d:this.#y;for(const A of this.#l)if(!u||Te.intersect(A.data.rect,u)!==null){u=A.data.rect,l=!0;break}const h=Te.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),p=l?u[2]-u[0]+5:0,g=h[0]+p,y=h[1];this.#u=[100*(g-i)/t,100*(y-o)/n];const{style:w}=this.#a;w.left=`${this.#u[0]}%`,w.top=`${this.#u[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#k(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#t)):(this.#z(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#t))}#k(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#_(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#z(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#a.hidden=!0)}maybeShow(){this.#e||(this.#M(),this.#T&&(this.#g||this.#k(),this.#T=!1,this.#a.hidden=!1))}get isVisible(){return this.#e?!1:this.#a.hidden===!1}}class GC extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=qe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class dI extends zt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),o=this.#e=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class hI extends zt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),o=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",t-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class fI extends zt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),o=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",t/2),l.setAttribute("cy",n/2),l.setAttribute("rx",t/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class YC extends zt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:o,height:l}=this;if(!t)return this.container;const u=this.svgFactory.create(o,l,!0);let h=[];for(let p=0,g=t.length;p<g;p+=2){const y=t[p]-e[0],w=e[3]-t[p+1];h.push(`${y},${w}`)}h=h.join(" ");const m=this.#e=this.svgFactory.createElement(this.svgElementName);return m.setAttribute("points",h),m.setAttribute("stroke-width",n.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m),this.container.append(u),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class mI extends YC{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pI extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ig extends zt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?qe.HIGHLIGHT:qe.INK}#s(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:o}}=this,{transform:l,width:u,height:h}=this.#s(t,e),m=this.svgFactory.create(u,h,!0),p=this.#e=this.svgFactory.createElement("svg:g");m.append(p),p.setAttribute("stroke-width",i.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let g=0,y=n.length;g<y;g++){const w=this.svgFactory.createElement(this.svgElementName);this.#t.push(w),w.setAttribute("points",n[g].join(",")),p.append(w)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,o=this.#e;if(t>=0&&o.setAttribute("stroke-width",t||1),n)for(let l=0,u=this.#t.length;l<u;l++)this.#t[l].setAttribute("points",n[l].join(","));if(i){const{transform:l,width:u,height:h}=this.#s(this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class qC extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=qe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class gI extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class vI extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class yI extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class XC extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=qe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class bI extends zt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:i}=wn.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Bg=class WC{#e=null;#t=null;#s=null;#n=new Map;#r=null;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:o,viewport:l,structTreeLayer:u,commentManager:h,linkService:m,annotationStorage:p}){this.div=e,this.#e=t,this.#t=n,this.#r=u||null,this.#i=m||null,this.#s=p||new Ng,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=h||null}hasEditableAnnotations(){return this.#n.size>0}async#a(e,t,n){const i=e.firstChild||e,o=i.id=`${Ag}${t}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[u,h]of l)i.setAttribute(u,h);n?n.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,n=this.div;Na(n,this.viewport);const i=new Map,o={data:null,layer:n,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new rc,annotationStorage:this.#s,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const u=l.annotationType===qt.POPUP;if(u){const p=i.get(l.id);if(!p)continue;o.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const h=Aw.create(o);if(!h.isRenderable)continue;if(!u&&l.popupRef){const p=i.get(l.popupRef);p?p.push(h):i.set(l.popupRef,[h])}const m=h.render();l.hidden&&(m.style.visibility="hidden"),await this.#a(m,l.id,o.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#i,svgFactory:new rc,parent:this};for(const n of e){n.borderStyle||=WC._defaultBorderStyle,t.data=n;const i=Aw.create(t);if(!i.isRenderable)continue;const o=i.render();await this.#a(o,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Na(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,n]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):i.append(n);const l=this.#n.get(t);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:i}=e,o=new sI({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#s}),l=o.render();return t.append(l),this.#e?.moveElementInDOM(t,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return Ze(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:no.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Wu=/\r\n?|\n/g;class mn extends ke{#e="";#t=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=mn.prototype,t=o=>o.isEmpty(),n=Gi.TRANSLATE_SMALL,i=Gi.TRANSLATE_BIG;return Ze(this,"_keyboardManager",new pc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=qe.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||mn._defaultColor||ke._defaultLineColor,this.#n=e.fontSize||mn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){ke.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case rt.FREETEXT_SIZE:mn._defaultFontSize=t;break;case rt.FREETEXT_COLOR:mn._defaultColor=t;break}}updateParams(e,t){switch(e){case rt.FREETEXT_SIZE:this.#r(t);break;case rt.FREETEXT_COLOR:this.#i(t);break}}static get defaultPropertiesToUpdate(){return[[rt.FREETEXT_SIZE,mn._defaultFontSize],[rt.FREETEXT_COLOR,mn._defaultColor||ke._defaultLineColor]]}get propertiesToUpdate(){return[[rt.FREETEXT_SIZE,this.#n],[rt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new ac(this),[["colorPicker",this._colorPicker]]}get colorType(){return rt.FREETEXT_COLOR}#r(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},n=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const t=i=>{this.color=i,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-mn._internalPadding*e,-(mn._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(mn.#c(n)),t=n);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#a().trimEnd();if(e===t)return;const n=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){mn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[m,p]=this.pageDimensions,[g,y]=this.pageTranslation;let w,A;switch(this.rotation){case 0:w=e+(l[0]-g)/m,A=t+this.height-(l[1]-y)/p;break;case 90:w=e+(l[0]-g)/m,A=t-(l[1]-y)/p,[u,h]=[h,-u];break;case 180:w=e-this.width+(l[0]-g)/m,A=t-(l[1]-y)/p,[u,h]=[-u,-h];break;case 270:w=e+(l[0]-g-this.height*p)/m,A=t+(l[1]-y-this.width*m)/p,[u,h]=[-h,u];break}this.setAt(w*i,A*o,u,h)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Wu,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const i=mn.#d(t.getData("text")||"").replaceAll(Wu,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=l,m=[],p=[];if(u.nodeType===Node.TEXT_NODE){const w=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(Wu,"")),w!==this.editorDiv){let A=m;for(const S of this.editorDiv.childNodes){if(S===w){A=p;continue}A.push(mn.#c(S))}}m.push(u.nodeValue.slice(0,h).replaceAll(Wu,""))}else if(u===this.editorDiv){let w=m,A=0;for(const S of this.editorDiv.childNodes)A++===h&&(w=p),w.push(mn.#c(S))}this.#e=`${m.join(`
`)}${i}${p.join(`
`)}`,this.#l();const g=new Range;let y=Math.sumPrecise(m.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const A=w.nodeValue.length;if(y<=A){g.setStart(w,y),g.setEnd(w,y);break}y-=A}o.removeAllRanges(),o.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=mn._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let i=null;if(e instanceof GC){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:m,id:p,popupRef:g,richText:y,contentsObj:w,creationDate:A,modificationDate:S},textContent:E,textPosition:C,parent:{page:{pageNumber:T}}}=e;if(!E||E.length===0)return null;i=e={annotationType:qe.FREETEXT,color:Array.from(u),fontSize:l,value:E.join(`
`),position:C,pageIndex:T-1,rect:h.slice(0),rotation:m,annotationElementId:p,id:p,deleted:!1,popupRef:g,comment:w?.str||null,richText:y,creationDate:A,modificationDate:S}}const o=await super.deserialize(e,t,n);return o.#n=e.fontSize,o.color=Te.makeHexColor(...e.color),o.#e=mn.#d(e.value),o._initialData=i,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=ke._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(e){const{value:t,fontSize:n,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((l,u)=>l!==i[u])||e.pageIndex!==o}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),t.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class _e{static PRECISION=1e-4;toSVGPath(){_t("Abstract method `toSVGPath` must be implemented.")}get box(){_t("Abstract getter `box` must be implemented.")}serialize(e,t){_t("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,o,l){l||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)l[u]=t+e[u]*i,l[u+1]=n+e[u+1]*o;return l}static _rescaleAndSwap(e,t,n,i,o,l){l||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)l[u]=t+e[u+1]*i,l[u+1]=n+e[u]*o;return l}static _translate(e,t,n,i){i||=new Float32Array(e.length);for(let o=0,l=e.length;o<l;o+=2)i[o]=t+e[o],i[o+1]=n+e[o+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,o){switch(o){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,o,l){return[(e+5*n)/6,(t+5*i)/6,(5*n+o)/6,(5*i+l)/6,(n+o)/2,(i+l)/2]}}class Qa{#e;#t=[];#s;#n;#r=[];#i=new Float32Array(18);#a;#o;#c;#l;#h;#d;#f=[];static#g=8;static#m=2;static#u=Qa.#g+Qa.#m;constructor({x:e,y:t},n,i,o,l,u=0){this.#e=n,this.#d=o*i,this.#n=l,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#s=u,this.#l=Qa.#g*i,this.#c=Qa.#u*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#p(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[n,i,o,l]=this.#e;return[(this.#a+(e[0]-t[0])/2-n)/o,(this.#o+(e[1]-t[1])/2-i)/l,(this.#a+(t[0]-e[0])/2-n)/o,(this.#o+(t[1]-e[1])/2-i)/l]}add({x:e,y:t}){this.#a=e,this.#o=t;const[n,i,o,l]=this.#e;let[u,h,m,p]=this.#i.subarray(8,12);const g=e-m,y=t-p,w=Math.hypot(g,y);if(w<this.#c)return!1;const A=w-this.#l,S=A/w,E=S*g,C=S*y;let T=u,N=h;u=m,h=p,m+=E,p+=C,this.#f?.push(e,t);const M=-C/A,L=E/A,I=M*this.#d,O=L*this.#d;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([m+I,p+O],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([m-I,p-O],16),isNaN(this.#i[6])?(this.#r.length===0&&(this.#i.set([u+I,h+O],2),this.#r.push(NaN,NaN,NaN,NaN,(u+I-n)/o,(h+O-i)/l),this.#i.set([u-I,h-O],14),this.#t.push(NaN,NaN,NaN,NaN,(u-I-n)/o,(h-O-i)/l)),this.#i.set([T,N,u,h,m,p],6),!this.isEmpty()):(this.#i.set([T,N,u,h,m,p],6),Math.abs(Math.atan2(N-h,T-u)-Math.atan2(C,E))<Math.PI/2?([u,h,m,p]=this.#i.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+m)/2-n)/o,((h+p)/2-i)/l),[u,h,T,N]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((T+u)/2-n)/o,((N+h)/2-i)/l),!0):([T,N,u,h,m,p]=this.#i.subarray(0,6),this.#r.push(((T+5*u)/6-n)/o,((N+5*h)/6-i)/l,((5*u+m)/6-n)/o,((5*h+p)/6-i)/l,((u+m)/2-n)/o,((h+p)/2-i)/l),[m,p,u,h,T,N]=this.#i.subarray(12,18),this.#t.push(((T+5*u)/6-n)/o,((N+5*h)/6-i)/l,((5*u+m)/6-n)/o,((5*h+p)/6-i)/l,((u+m)/2-n)/o,((h+p)/2-i)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#v();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#y(n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#b(n),n.join(" ")}#v(){const[e,t,n,i]=this.#e,[o,l,u,h]=this.#p();return`M${(this.#i[2]-e)/n} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/n} ${(this.#i[5]-t)/i} L${o} ${l} L${u} ${h} L${(this.#i[16]-e)/n} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/n} ${(this.#i[15]-t)/i} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){const[t,n,i,o]=this.#e,l=this.#i.subarray(4,6),u=this.#i.subarray(16,18),[h,m,p,g]=this.#p();e.push(`L${(l[0]-t)/i} ${(l[1]-n)/o} L${h} ${m} L${p} ${g} L${(u[0]-t)/i} ${(u[1]-n)/o}`)}newFreeDrawOutline(e,t,n,i,o,l){return new KC(e,t,n,i,o,l)}getOutlines(){const e=this.#r,t=this.#t,n=this.#i,[i,o,l,u]=this.#e,h=new Float32Array((this.#f?.length??0)+2);for(let g=0,y=h.length-2;g<y;g+=2)h[g]=(this.#f[g]-i)/l,h[g+1]=(this.#f[g+1]-o)/u;if(h[h.length-2]=(this.#a-i)/l,h[h.length-1]=(this.#o-o)/u,isNaN(n[6])&&!this.isEmpty())return this.#E(h);const m=new Float32Array(this.#r.length+24+this.#t.length);let p=e.length;for(let g=0;g<p;g+=2){if(isNaN(e[g])){m[g]=m[g+1]=NaN;continue}m[g]=e[g],m[g+1]=e[g+1]}p=this.#x(m,p);for(let g=t.length-6;g>=6;g-=6)for(let y=0;y<6;y+=2){if(isNaN(t[g+y])){m[p]=m[p+1]=NaN,p+=2;continue}m[p]=t[g+y],m[p+1]=t[g+y+1],p+=2}return this.#A(m,p),this.newFreeDrawOutline(m,h,this.#e,this.#h,this.#s,this.#n)}#E(e){const t=this.#i,[n,i,o,l]=this.#e,[u,h,m,p]=this.#p(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-i)/l,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-i)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,m,p,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-i)/l,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-i)/l],0),this.newFreeDrawOutline(g,e,this.#e,this.#h,this.#s,this.#n)}#A(e,t){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#x(e,t){const n=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[o,l,u,h]=this.#e,[m,p,g,y]=this.#p();return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-l)/h,NaN,NaN,NaN,NaN,m,p,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-l)/h],t),t+=24}}class KC extends _e{#e;#t=new Float32Array(4);#s;#n;#r;#i;#a;constructor(e,t,n,i,o,l){super(),this.#a=e,this.#r=t,this.#e=n,this.#i=i,this.#s=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,h,m,p]=this.#t;for(let g=0,y=e.length;g<y;g+=2)e[g]=(e[g]-u)/m,e[g+1]=(e[g+1]-h)/p;for(let g=0,y=t.length;g<y;g+=2)t[g]=(t[g]-u)/m,t[g+1]=(t[g+1]-h)/p}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,n=this.#a.length;t<n;t+=6){if(isNaN(this.#a[t])){e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`);continue}e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,i],o){const l=n-e,u=i-t;let h,m;switch(o){case 0:h=_e._rescale(this.#a,e,i,l,-u),m=_e._rescale(this.#r,e,i,l,-u);break;case 90:h=_e._rescaleAndSwap(this.#a,e,t,l,u),m=_e._rescaleAndSwap(this.#r,e,t,l,u);break;case 180:h=_e._rescale(this.#a,n,t,-l,u),m=_e._rescale(this.#r,n,t,-l,u);break;case 270:h=_e._rescaleAndSwap(this.#a,n,i,-l,-u),m=_e._rescaleAndSwap(this.#r,n,i,-l,-u);break}return{outline:Array.from(h),points:[Array.from(m)]}}#o(e){const t=this.#a;let n=t[4],i=t[5];const o=[n,i,n,i];let l=n,u=i,h=n,m=i;const p=e?Math.max:Math.min,g=new Float32Array(4);for(let w=6,A=t.length;w<A;w+=6){const S=t[w+4],E=t[w+5];isNaN(t[w])?(Te.pointBoundingBox(S,E,o),u>E?(l=S,u=E):u===E&&(l=p(l,S)),m<E?(h=S,m=E):m===E&&(h=p(h,S))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,Te.bezierBoundingBox(n,i,...t.slice(w,w+6),g),Te.rectBoundingBox(g[0],g[1],g[2],g[3],o),u>g[1]?(l=g[0],u=g[1]):u===g[1]&&(l=p(l,g[0])),m<g[3]?(h=g[2],m=g[3]):m===g[3]&&(h=p(h,g[2]))),n=S,i=E}const y=this.#t;y[0]=o[0]-this.#s,y[1]=o[1]-this.#s,y[2]=o[2]-o[0]+2*this.#s,y[3]=o[3]-o[1]+2*this.#s,this.firstPoint=[l,u],this.lastPoint=[h,m]}get box(){return this.#t}newOutliner(e,t,n,i,o,l=0){return new Qa(e,t,n,i,o,l)}getNewOutline(e,t){const[n,i,o,l]=this.#t,[u,h,m,p]=this.#e,g=o*m,y=l*p,w=n*m+u,A=i*p+h,S=this.newOutliner({x:this.#r[0]*g+w,y:this.#r[1]*y+A},this.#e,this.#i,e,this.#n,t??this.#s);for(let E=2;E<this.#r.length;E+=2)S.add({x:this.#r[E]*g+w,y:this.#r[E+1]*y+A});return S.getOutlines()}}class Cp{#e;#t;#s;#n=[];#r=[];constructor(e,t=0,n=0,i=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:E,width:C,height:T}of e){const N=Math.floor((S-t)/l)*l,M=Math.ceil((S+C+t)/l)*l,L=Math.floor((E-t)/l)*l,I=Math.ceil((E+T+t)/l)*l,O=[N,L,I,!0],P=[M,L,I,!1];this.#n.push(O,P),Te.rectBoundingBox(N,L,M,I,o)}const u=o[2]-o[0]+2*n,h=o[3]-o[1]+2*n,m=o[0]-n,p=o[1]-n;let g=i?-1/0:1/0,y=1/0;const w=this.#n.at(i?-1:-2),A=[w[0],w[2]];for(const S of this.#n){const[E,C,T,N]=S;!N&&i?C<y?(y=C,g=E):C===y&&(g=Math.max(g,E)):N&&!i&&(C<y?(y=C,g=E):C===y&&(g=Math.min(g,E))),S[0]=(E-m)/u,S[1]=(C-p)/h,S[2]=(T-p)/h}this.#e=new Float32Array([m,p,u,h]),this.#t=[g,y],this.#s=A}getOutlines(){this.#n.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],n=new Set;for(const l of e){const[u,h,m]=l;t.push([u,h,l],[u,m,l])}t.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=t.length;l<u;l+=2){const h=t[l][2],m=t[l+1][2];h.push(m),m.push(h),n.add(h),n.add(m)}const i=[];let o;for(;n.size>0;){const l=n.values().next().value;let[u,h,m,p,g]=l;n.delete(l);let y=u,w=h;for(o=[u,m],i.push(o);;){let A;if(n.has(p))A=p;else if(n.has(g))A=g;else break;n.delete(A),[u,h,m,p,g]=A,y!==u&&(o.push(y,w,u,w===h?h:m),y=u),w=w===h?m:h}o.push(y,w)}return new xI(i,this.#e,this.#t,this.#s)}#a(e){const t=this.#r;let n=0,i=t.length-1;for(;n<=i;){const o=n+i>>1,l=t[o][0];if(l===e)return o;l<e?n=o+1:i=o-1}return i+1}#o([,e,t]){const n=this.#a(e);this.#r.splice(n,0,[e,t])}#c([,e,t]){const n=this.#a(e);for(let i=n;i<this.#r.length;i++){const[o,l]=this.#r[i];if(o!==e)break;if(o===e&&l===t){this.#r.splice(i,1);return}}for(let i=n-1;i>=0;i--){const[o,l]=this.#r[i];if(o!==e)break;if(o===e&&l===t){this.#r.splice(i,1);return}}}#l(e){const[t,n,i]=e,o=[[t,n,i]],l=this.#a(i);for(let u=0;u<l;u++){const[h,m]=this.#r[u];for(let p=0,g=o.length;p<g;p++){const[,y,w]=o[p];if(!(m<=y||w<=h)){if(y>=h){if(w>m)o[p][1]=m;else{if(g===1)return[];o.splice(p,1),p--,g--}continue}o[p][2]=h,w>m&&o.push([t,m,w])}}}return o}}class xI extends _e{#e;#t;constructor(e,t,n,i){super(),this.#t=e,this.#e=t,this.firstPoint=n,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[n,i]=t;e.push(`M${n} ${i}`);for(let o=2;o<t.length;o+=2){const l=t[o],u=t[o+1];l===n?(e.push(`V${u}`),i=u):u===i&&(e.push(`H${l}`),n=l)}e.push("Z")}return e.join(" ")}serialize([e,t,n,i],o){const l=[],u=n-e,h=i-t;for(const m of this.#t){const p=new Array(m.length);for(let g=0;g<m.length;g+=2)p[g]=e+m[g]*u,p[g+1]=i-m[g+1]*h;l.push(p)}return l}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class Ep extends Qa{newFreeDrawOutline(e,t,n,i,o,l){return new wI(e,t,n,i,o,l)}}class wI extends KC{newOutliner(e,t,n,i,o,l=0){return new Ep(e,t,n,i,o,l)}}class Xt extends ke{#e=null;#t=0;#s;#n=null;#r=null;#i=null;#a=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#m=null;#u="";#p;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=qe.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Xt.prototype;return Ze(this,"_keyboardManager",new pc([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Xt._defaultColor,this.#p=e.thickness||Xt._defaultThickness,this.opacity=e.opacity||Xt._defaultOpacity,this.#s=e.boxes||null,this.#v=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#y(e),this.#S()):this.#s&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new Cp(this.#s,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new Cp(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:i}=this.#i;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#l=e;const i=1.5;if(this.#i=e.getNewOutline(this.#p/2+i,.0025),t>=0)this.#h=t,this.#n=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Xt.#C(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:Xt.#C(this.#i.box,g),path:{d:this.#i.toSVGPath()}})}const[o,l,u,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=h;break;case 90:{const[g,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*y/g,this.height=h*g/y;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=h;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*y/g,this.height=h*g/y;break}}const{firstPoint:m}=e;this.#f=[(m[0]-o)/u,(m[1]-l)/h];const{lastPoint:p}=this.#i;this.#g=[(p[0]-o)/u,(p[1]-l)/h]}static initialize(e,t){ke.initialize(e,t),Xt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case rt.HIGHLIGHT_COLOR:Xt._defaultColor=t;break;case rt.HIGHLIGHT_THICKNESS:Xt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case rt.HIGHLIGHT_COLOR:this.#E(t);break;case rt.HIGHLIGHT_THICKNESS:this.#A(t);break}}static get defaultPropertiesToUpdate(){return[[rt.HIGHLIGHT_COLOR,Xt._defaultColor],[rt.HIGHLIGHT_THICKNESS,Xt._defaultThickness]]}get propertiesToUpdate(){return[[rt.HIGHLIGHT_COLOR,this.color||Xt._defaultColor],[rt.HIGHLIGHT_THICKNESS,this.#p||Xt._defaultThickness],[rt.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#E(e){const t=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,Xt._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#A(e){const t=this.#p,n=i=>{this.#p=i,this.#x(i)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new us({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#j())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#j())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#T():e&&(this.#S(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#x(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#S(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#C([e,t,n,i],o){switch(o){case 90:return[1-t-i,e,i,n];case 180:return[1-e-n,1-t-i,n,i];case 270:return[t,1-e-n,i,n]}return[e,t,n,i]}rotate(e){const{drawLayer:t}=this.parent;let n;this.#d?(e=(e-this.rotation+360)%360,n=Xt.#C(this.#l.box,e)):n=Xt.#C([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:Xt.#C(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),EC(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#M(e){Xt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#N(!0);break;case 1:case 3:this.#N(!1);break}}#N(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#d||this.#N(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#j(){return this.#d?this.rotation:0}#I(){if(this.#d)return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,o=this.#s,l=new Float32Array(o.length*8);let u=0;for(const{x:h,y:m,width:p,height:g}of o){const y=h*e+n,w=(1-m)*t+i;l[u]=l[u+4]=y,l[u+1]=l[u+3]=w,l[u+2]=l[u+6]=y+p*e,l[u+5]=l[u+7]=w-g*t,u+=8}return l}#D(e){return this.#l.serialize(e,this.#j())}static startHighlighting(e,t,{target:n,x:i,y:o}){const{x:l,y:u,width:h,height:m}=n.getBoundingClientRect(),p=new AbortController,g=e.combinedSignal(p),y=w=>{p.abort(),this.#B(e,w)};window.addEventListener("blur",y,{signal:g}),window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("pointerdown",Bt,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",ms,{signal:g}),n.addEventListener("pointermove",this.#O.bind(this,e),{signal:g}),this._freeHighlight=new Ep({x:i,y:o},[l,u,h,m],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,n){let i=null;if(e instanceof qC){const{data:{quadPoints:A,rect:S,rotation:E,id:C,color:T,opacity:N,popupRef:M,richText:L,contentsObj:I,creationDate:O,modificationDate:P},parent:{page:{pageNumber:F}}}=e;i=e={annotationType:qe.HIGHLIGHT,color:Array.from(T),opacity:N,quadPoints:A,boxes:null,pageIndex:F-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:M,richText:L,comment:I?.str||null,creationDate:O,modificationDate:P}}else if(e instanceof Ig){const{data:{inkLists:A,rect:S,rotation:E,id:C,color:T,borderStyle:{rawWidth:N},popupRef:M,richText:L,contentsObj:I,creationDate:O,modificationDate:P},parent:{page:{pageNumber:F}}}=e;i=e={annotationType:qe.HIGHLIGHT,color:Array.from(T),thickness:N,inkLists:A,boxes:null,pageIndex:F-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:M,richText:L,comment:I?.str||null,creationDate:O,modificationDate:P}}const{color:o,quadPoints:l,inkLists:u,opacity:h}=e,m=await super.deserialize(e,t,n);m.color=Te.makeHexColor(...o),m.opacity=h||1,u&&(m.#p=e.thickness),m._initialData=i,e.comment&&m.setCommentData(e);const[p,g]=m.pageDimensions,[y,w]=m.pageTranslation;if(l){const A=m.#s=[];for(let S=0;S<l.length;S+=8)A.push({x:(l[S]-y)/p,y:1-(l[S+1]-w)/g,width:(l[S+2]-l[S])/p,height:(l[S+1]-l[S+5])/g});m.#b(),m.#S(),m.rotate(m.rotation)}else if(u){m.#d=!0;const A=u[0],S={x:A[0]-y,y:g-(A[1]-w)},E=new Ep(S,[0,0,p,g],1,m.#p/2,!0,.001);for(let N=0,M=A.length;N<M;N+=2)S.x=A[N]-y,S.y=g-(A[N+1]-w),E.add(S);const{id:C,clipPathId:T}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);m.#y({highlightOutlines:E.getOutlines(),highlightId:C,clipPathId:T}),m.#S(),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=ke._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#I(),outlines:this.#D(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#L(n)?null:(n.id=this.annotationElementId,n)}#L(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((n,i)=>n!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class QC{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){_t("Not implemented")}}class Ue extends ke{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#r=null;static#i=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#u(e.box)}#h(e,t){const{id:n}=t.drawLayer.draw(Ue._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,o]of Object.entries(t))n.has(i)?Object.assign(e[i],o):e[i]=o;return e}static getDefaultDrawingOptions(e){_t("Not implemented")}static get typesMap(){_t("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(Ue.#s.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,o=i[t],l=u=>{i.updateProperty(t,u);const h=this.#e.updateProperty(t,u);h&&this.#u(h),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ue._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#m()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ue._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#m()),{bbox:this.#p()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ue._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,t,n,i]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[t,1-e,n*(l/o),i*(o/l)];case 180:return[1-e,1-t,n,i];case 270:return[1-t,e,n*(l/o),i*(o/l)];default:return[e,t,n,i]}}#m(){const{x:e,y:t,width:n,height:i,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-t,e,n*(o/l),i*(l/o)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(o/l),i*(l/o)];default:return[e,t,n,i]}}#u(e){[this.x,this.y,this.width,this.height]=this.#g(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:e,y:t,width:n,height:i,rotation:o,parentRotation:l,parentDimensions:[u,h]}=this;switch((o*4+l)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(u/h),i*(h/u),n*(u/h)];case 5:return[1-t,e,n*(u/h),i*(h/u)];case 6:return[1-e-i*(h/u),1-t,i*(h/u),n*(u/h)];case 7:return[t-n*(u/h),1-e-i*(h/u),n*(u/h),i*(h/u)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(h/u),t,i*(h/u),n*(u/h)];case 13:return[1-t-n*(u/h),e-i*(h/u),n*(u/h),i*(h/u)];case 14:return[1-e,1-t-n*(u/h),i*(h/u),n*(u/h)];case 15:return[t,1-e,n*(u/h),i*(h/u)];default:return[e,t,n,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ue._mergeSVGProperties({bbox:this.#p()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,o){_t("Not implemented")}static startDrawing(e,t,n,i){const{target:o,offsetX:l,offsetY:u,pointerId:h,pointerType:m}=i;if(Ue.#a&&Ue.#a!==m)return;const{viewport:{rotation:p}}=e,{width:g,height:y}=o.getBoundingClientRect(),w=Ue.#n=new AbortController,A=e.combinedSignal(w);if(Ue.#i||=h,Ue.#a??=m,window.addEventListener("pointerup",S=>{Ue.#i===S.pointerId?this._endDraw(S):Ue.#o?.delete(S.pointerId)},{signal:A}),window.addEventListener("pointercancel",S=>{Ue.#i===S.pointerId?this._currentParent.endDrawingSession():Ue.#o?.delete(S.pointerId)},{signal:A}),window.addEventListener("pointerdown",S=>{Ue.#a===S.pointerType&&((Ue.#o||=new Set).add(S.pointerId),Ue.#s.isCancellable()&&(Ue.#s.removeLastElement(),Ue.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",ms,{signal:A}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),o.addEventListener("touchmove",S=>{S.timeStamp===Ue.#c&&Bt(S)},{signal:A}),e.toggleDrawing(),t._editorUndoBar?.hide(),Ue.#s){e.drawLayer.updateProperties(this._currentDrawId,Ue.#s.startNew(l,u,g,y,p));return}t.updateUIForDefaultProperties(this),Ue.#s=this.createDrawerInstance(l,u,g,y,p),Ue.#r=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Ue.#r.toSVGProperties(),Ue.#s.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ue.#c=-1,!Ue.#s)return;const{offsetX:t,offsetY:n,pointerId:i}=e;if(Ue.#i===i){if(Ue.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ue.#s.add(t,n)),Ue.#c=e.timeStamp,Bt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Ue.#s=null,Ue.#r=null,Ue.#a=null,Ue.#c=NaN),Ue.#n&&(Ue.#n.abort(),Ue.#n=null,Ue.#i=NaN,Ue.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Ue.#s.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=Ue.#s,i=this._currentDrawId,o=n.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,n.setLastElement(o))},undo:()=>{t.drawLayer.updateProperties(i,n.removeLastElement())},mustExec:!1,type:rt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(rt.DRAW_STEP),!Ue.#s.isEmpty()){const{pageDimensions:[n,i],scale:o}=t,l=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ue.#s.getOutlines(n*o,i*o,o,this._INNER_MARGIN),drawingOptions:Ue.#r,mustBeCommitted:!e});return this._cleanup(!0),l}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,o,l){_t("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:u}}=t.viewport,h=this.deserializeDraw(l,u,i,o,this._INNER_MARGIN,e),m=await super.deserialize(e,t,n);return m.createDrawingOptions(e),m.#l({drawOutlines:h}),m.#f(),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[t,n]=this.pageTranslation,[i,o]=this.pageDimensions;return this.#e.serialize([t,n,i,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class SI{#e=new Float64Array(6);#t;#s;#n;#r;#i;#a="";#o=0;#c=new yc;#l;#h;constructor(e,t,n,i,o,l){this.#l=n,this.#h=i,this.#n=o,this.#r=l,[e,t]=this.#d(e,t);const u=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#s=[{line:u,points:this.#i}],this.#e.set(u,0)}updateProperty(e,t){e==="stroke-width"&&(this.#r=t)}#d(e,t){return _e._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#d(e,t);const[n,i,o,l]=this.#e.subarray(2,6),u=e-o,h=t-l;return Math.hypot(this.#l*u,this.#h*h)<=2?null:(this.#i.push(e,t),isNaN(n)?(this.#e.set([o,l,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,i,o,l,e,t],0),this.#t.push(..._e.createBezierPoints(n,i,o,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,o){this.#l=n,this.#h=i,this.#n=o,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const u=this.#s.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#s.push({line:l,points:this.#i}),this.#e.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(e){return this.#s?(this.#s.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#a="";for(let e=0,t=this.#s.length;e<t;e++){const{line:n,points:i}=this.#s[e];this.#t=n,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const e=_e.svgRound(this.#t[4]),t=_e.svgRound(this.#t[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${e} ${t} Z`,this.#a;if(this.#i.length<=6){const i=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const i=_e.svgRound(this.#t[10]),o=_e.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${i} ${o}`,this.#o=12,this.#a}const n=[];this.#o===0&&(n.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,o=this.#t.length;i<o;i+=6){const[l,u,h,m,p,g]=this.#t.slice(i,i+6).map(_e.svgRound);n.push(`C${l} ${u} ${h} ${m} ${p} ${g}`)}return this.#a+=n.join(" "),this.#o=this.#t.length,this.#a}getOutlines(e,t,n,i){const o=this.#s.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#s,e,t,n,this.#n,this.#r,i),this.#e=null,this.#t=null,this.#s=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class yc extends _e{#e;#t=0;#s;#n;#r;#i;#a;#o;#c;build(e,t,n,i,o,l,u){this.#r=t,this.#i=n,this.#a=i,this.#o=o,this.#c=l,this.#s=u??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${_e.svgRound(t[4])} ${_e.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${_e.svgRound(t[10])} ${_e.svgRound(t[11])}`);continue}for(let n=6,i=t.length;n<i;n+=6){const[o,l,u,h,m,p]=t.subarray(n,n+6).map(_e.svgRound);e.push(`C${o} ${l} ${u} ${h} ${m} ${p}`)}}return e.join("")}serialize([e,t,n,i],o){const l=[],u=[],[h,m,p,g]=this.#h();let y,w,A,S,E,C,T,N,M;switch(this.#o){case 0:M=_e._rescale,y=e,w=t+i,A=n,S=-i,E=e+h*n,C=t+(1-m-g)*i,T=e+(h+p)*n,N=t+(1-m)*i;break;case 90:M=_e._rescaleAndSwap,y=e,w=t,A=n,S=i,E=e+m*n,C=t+h*i,T=e+(m+g)*n,N=t+(h+p)*i;break;case 180:M=_e._rescale,y=e+n,w=t,A=-n,S=i,E=e+(1-h-p)*n,C=t+m*i,T=e+(1-h)*n,N=t+(m+g)*i;break;case 270:M=_e._rescaleAndSwap,y=e+n,w=t+i,A=-n,S=-i,E=e+(1-m-g)*n,C=t+(1-h-p)*i,T=e+(1-m)*n,N=t+(1-h)*i;break}for(const{line:L,points:I}of this.#n)l.push(M(L,y,w,A,S,o?new Array(L.length):null)),u.push(M(I,y,w,A,S,o?new Array(I.length):null));return{lines:l,points:u,rect:[E,C,T,N]}}static deserialize(e,t,n,i,o,{paths:{lines:l,points:u},rotation:h,thickness:m}){const p=[];let g,y,w,A,S;switch(h){case 0:S=_e._rescale,g=-e/n,y=t/i+1,w=1/n,A=-1/i;break;case 90:S=_e._rescaleAndSwap,g=-t/i,y=-e/n,w=1/i,A=1/n;break;case 180:S=_e._rescale,g=e/n+1,y=-t/i,w=-1/n,A=1/i;break;case 270:S=_e._rescaleAndSwap,g=t/i+1,y=e/n+1,w=-1/i,A=-1/n;break}if(!l){l=[];for(const C of u){const T=C.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const N=new Float32Array(3*(T-2));l.push(N);let[M,L,I,O]=C.subarray(0,4);N.set([NaN,NaN,NaN,NaN,M,L],0);for(let P=4;P<T;P+=2){const F=C[P],$=C[P+1];N.set(_e.createBezierPoints(M,L,I,O,F,$),(P-2)*3),[M,L,I,O]=[I,O,F,$]}}}for(let C=0,T=l.length;C<T;C++)p.push({line:S(l[C].map(N=>N??NaN),g,y,w,A),points:S(u[C].map(N=>N??NaN),g,y,w,A)});const E=new this.prototype.constructor;return E.build(p,n,i,1,h,m,o),E}#l(e=this.#c){const t=this.#s+e/2*this.#a;return this.#o%180===0?[t/this.#r,t/this.#i]:[t/this.#i,t/this.#r]}#h(){const[e,t,n,i]=this.#e,[o,l]=this.#l(0);return[e+o,t+l,n-2*o,i-2*l]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let u=4,h=i.length;u<h;u+=6)Te.pointBoundingBox(i[u],i[u+1],e);continue}let o=i[4],l=i[5];for(let u=6,h=i.length;u<h;u+=6){const[m,p,g,y,w,A]=i.subarray(u,u+6);Te.bezierBoundingBox(o,l,m,p,g,y,w,A,e),o=w,l=A}}const[t,n]=this.#l();e[0]=On(e[0]-t,0,1),e[1]=On(e[1]-n,0,1),e[2]=On(e[2]+t,0,1),e[3]=On(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,n]=this.#l();this.#c=e;const[i,o]=this.#l(),[l,u]=[i-t,o-n],h=this.#e;return h[0]-=l,h[1]-=u,h[2]+=2*l,h[3]+=2*u,h}updateParentDimensions([e,t],n){const[i,o]=this.#l();this.#r=e,this.#i=t,this.#a=n;const[l,u]=this.#l(),h=l-i,m=u-o,p=this.#e;return p[0]-=h,p[1]-=m,p[2]+=2*h,p[3]+=2*m,p}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(_e.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${_e.svgRound(e)} ${_e.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let n=0,i=0,o=0,l=0,u=0,h=0;switch(this.#t){case 90:i=t/e,o=-e/t,u=e;break;case 180:n=-1,l=-1,u=e,h=t;break;case 270:i=-t/e,o=e/t,h=t;break;default:return""}return`matrix(${n} ${i} ${o} ${l} ${_e.svgRound(u)} ${_e.svgRound(h)})`}getPathResizingSVGProperties([e,t,n,i]){const[o,l]=this.#l(),[u,h,m,p]=this.#e;if(Math.abs(m-o)<=_e.PRECISION||Math.abs(p-l)<=_e.PRECISION){const S=e+n/2-(u+m/2),E=t+i/2-(h+p/2);return{path:{"transform-origin":`${_e.svgRound(e)} ${_e.svgRound(t)}`,transform:`${this.rotationTransform} translate(${S} ${E})`}}}const g=(n-2*o)/(m-2*o),y=(i-2*l)/(p-2*l),w=m/n,A=p/i;return{path:{"transform-origin":`${_e.svgRound(u)} ${_e.svgRound(h)}`,transform:`${this.rotationTransform} scale(${w} ${A}) translate(${_e.svgRound(o)} ${_e.svgRound(l)}) scale(${g} ${y}) translate(${_e.svgRound(-o)} ${_e.svgRound(-l)})`}}}getPathResizedSVGProperties([e,t,n,i]){const[o,l]=this.#l(),u=this.#e,[h,m,p,g]=u;if(u[0]=e,u[1]=t,u[2]=n,u[3]=i,Math.abs(p-o)<=_e.PRECISION||Math.abs(g-l)<=_e.PRECISION){const E=e+n/2-(h+p/2),C=t+i/2-(m+g/2);for(const{line:T,points:N}of this.#n)_e._translate(T,E,C,T),_e._translate(N,E,C,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${_e.svgRound(e)} ${_e.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(n-2*o)/(p-2*o),w=(i-2*l)/(g-2*l),A=-y*(h+o)+e+o,S=-w*(m+l)+t+l;if(y!==1||w!==1||A!==0||S!==0)for(const{line:E,points:C}of this.#n)_e._rescale(E,A,S,y,w,E),_e._rescale(C,A,S,y,w,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${_e.svgRound(e)} ${_e.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[i,o]=n,l=this.#e,u=e-l[0],h=t-l[1];if(this.#r===i&&this.#i===o)for(const{line:m,points:p}of this.#n)_e._translate(m,u,h,m),_e._translate(p,u,h,p);else{const m=this.#r/i,p=this.#i/o;this.#r=i,this.#i=o;for(const{line:g,points:y}of this.#n)_e._rescale(g,u,h,m,p,g),_e._rescale(y,u,h,m,p,y);l[2]*=m,l[3]*=p}return l[0]=e,l[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${_e.svgRound(e)} ${_e.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${_e.svgRound(e[0])} ${_e.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Qd extends QC{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ke._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Qd(this._viewParameters);return e.updateAll(this),e}}class zg extends Ue{static _type="ink";static _editorType=qe.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){ke.initialize(e,t),this._defaultDrawingOptions=new Qd(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ze(this,"typesMap",new Map([[rt.INK_THICKNESS,"stroke-width"],[rt.INK_COLOR,"stroke"],[rt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,o){return new SI(e,t,n,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,o,l){return yc.deserialize(e,t,n,i,o,l)}static async deserialize(e,t,n){let i=null;if(e instanceof Ig){const{data:{inkLists:l,rect:u,rotation:h,id:m,color:p,opacity:g,borderStyle:{rawWidth:y},popupRef:w,richText:A,contentsObj:S,creationDate:E,modificationDate:C},parent:{page:{pageNumber:T}}}=e;i=e={annotationType:qe.INK,color:Array.from(p),thickness:y,opacity:g,paths:{points:l},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:h,annotationElementId:m,id:m,deleted:!1,popupRef:w,richText:A,comment:S?.str||null,creationDate:E,modificationDate:C}}const o=await super.deserialize(e,t,n);return o._initialData=i,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||=new ac(this),[["colorPicker",this._colorPicker]]}get colorType(){return rt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=zg.getDefaultDrawingOptions({stroke:Te.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(e),{color:ke._colorManager.convert(i),opacity:o,thickness:l,paths:{lines:t,points:n}});return this.addComment(u),e?(u.isCopy=!0,u):this.annotationElementId&&!this.#e(u)?null:(u.id=this.annotationElementId,u)}#e(e){const{color:t,thickness:n,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,u)=>l!==t[u])||e.thickness!==n||e.opacity!==i||e.pageIndex!==o}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class _p extends yc{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Ku=8,Pl=3;class Ka{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,n,i,o,l,u){const h=this.#t(n,i,o,l);for(let m=0;m<8;m++){const p=(-m+h-u+16)%8,g=this.#s[2*p],y=this.#s[2*p+1];if(e[(n+g)*t+(i+y)]!==0)return p}return-1}static#r(e,t,n,i,o,l,u){const h=this.#t(n,i,o,l);for(let m=0;m<8;m++){const p=(m+h+u+16)%8,g=this.#s[2*p],y=this.#s[2*p+1];if(e[(n+g)*t+(i+y)]!==0)return p}return-1}static#i(e,t,n,i){const o=e.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=e[p]<=i?1:0;for(let p=1;p<n-1;p++)l[p*t]=l[p*t+t-1]=0;for(let p=0;p<t;p++)l[p]=l[t*n-1-p]=0;let u=1,h;const m=[];for(let p=1;p<n-1;p++){h=1;for(let g=1;g<t-1;g++){const y=p*t+g,w=l[y];if(w===0)continue;let A=p,S=g;if(w===1&&l[y-1]===0)u+=1,S-=1;else if(w>=1&&l[y+1]===0)u+=1,S+=1,w>1&&(h=w);else{w!==1&&(h=Math.abs(w));continue}const E=[g,p],C=S===g+1,T={isHole:C,points:E,id:u,parent:0};m.push(T);let N;for(const W of m)if(W.id===h){N=W;break}N?N.isHole?T.parent=C?N.parent:h:T.parent=C?h:N.parent:T.parent=C?h:0;const M=this.#n(l,t,p,g,A,S,0);if(M===-1){l[y]=-u,l[y]!==1&&(h=Math.abs(l[y]));continue}let L=this.#s[2*M],I=this.#s[2*M+1];const O=p+L,P=g+I;A=O,S=P;let F=p,$=g;for(;;){const W=this.#r(l,t,F,$,A,S,1);L=this.#s[2*W],I=this.#s[2*W+1];const ie=F+L,le=$+I;E.push(le,ie);const G=F*t+$;if(l[G+1]===0?l[G]=-u:l[G]===1&&(l[G]=u),ie===p&&le===g&&F===O&&$===P){l[y]!==1&&(h=Math.abs(l[y]));break}else A=F,S=$,F=ie,$=le}}}return m}static#a(e,t,n,i){if(n-t<=4){for(let O=t;O<n-2;O+=2)i.push(e[O],e[O+1]);return}const o=e[t],l=e[t+1],u=e[n-4]-o,h=e[n-3]-l,m=Math.hypot(u,h),p=u/m,g=h/m,y=p*l-g*o,w=h/u,A=1/m,S=Math.atan(w),E=Math.cos(S),C=Math.sin(S),T=A*(Math.abs(E)+Math.abs(C)),N=A*(1-T+T**2),M=Math.max(Math.atan(Math.abs(C+E)*N),Math.atan(Math.abs(C-E)*N));let L=0,I=t;for(let O=t+2;O<n-2;O+=2){const P=Math.abs(y-p*e[O+1]+g*e[O]);P>L&&(I=O,L=P)}L>(m*M)**2?(this.#a(e,t,I+2,i),this.#a(e,I,n,i)):i.push(o,l)}static#o(e){const t=[],n=e.length;return this.#a(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#c(e,t,n,i,o,l){const u=new Float32Array(l**2),h=-2*i**2,m=l>>1;for(let S=0;S<l;S++){const E=(S-m)**2;for(let C=0;C<l;C++)u[S*l+C]=Math.exp((E+(C-m)**2)/h)}const p=new Float32Array(256),g=-2*o**2;for(let S=0;S<256;S++)p[S]=Math.exp(S**2/g);const y=e.length,w=new Uint8Array(y),A=new Uint32Array(256);for(let S=0;S<n;S++)for(let E=0;E<t;E++){const C=S*t+E,T=e[C];let N=0,M=0;for(let I=0;I<l;I++){const O=S+I-m;if(!(O<0||O>=n))for(let P=0;P<l;P++){const F=E+P-m;if(F<0||F>=t)continue;const $=e[O*t+F],W=u[I*l+P]*p[Math.abs($-T)];N+=$*W,M+=W}}const L=w[C]=Math.round(N/M);A[L]++}return[w,A]}static#l(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}static#h(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,o=1/0;for(let u=0,h=n.length;u<h;u++){const m=n[u]=e[u<<2];i=Math.max(i,m),o=Math.min(o,m)}const l=255/(i-o);for(let u=0,h=n.length;u<h;u++)n[u]=(n[u]-o)*l;return n}static#d(e){let t,n=-1/0,i=-1/0;const o=e.findIndex(h=>h!==0);let l=o,u=o;for(t=o;t<256;t++){const h=e[t];h>n&&(t-l>i&&(i=t-l,u=t-1),n=h,l=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:n,height:i}=e,{maxDim:o}=this.#e;let l=n,u=i;if(n>o||i>o){let y=n,w=i,A=Math.log2(Math.max(n,i)/o);const S=Math.floor(A);A=A===S?S-1:S;for(let C=0;C<A;C++){l=Math.ceil(y/2),u=Math.ceil(w/2);const T=new OffscreenCanvas(l,u);T.getContext("2d").drawImage(e,0,0,y,w,0,0,l,u),y=l,w=u,e!==t&&e.close(),e=T.transferToImageBitmap()}const E=Math.min(o/l,o/u);l=Math.round(l*E),u=Math.round(u*E)}const m=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});m.fillStyle="white",m.fillRect(0,0,l,u),m.filter="grayscale(1)",m.drawImage(e,0,0,e.width,e.height,0,0,l,u);const p=m.getImageData(0,0,l,u).data;return[this.#h(p),l,u]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},o,l,u,h){let m=new OffscreenCanvas(1,1),p=m.getContext("2d",{alpha:!1});const g=200,y=p.font=`${n} ${i} ${g}px ${t}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:A,actualBoundingBoxAscent:S,actualBoundingBoxDescent:E,fontBoundingBoxAscent:C,fontBoundingBoxDescent:T,width:N}=p.measureText(e),M=1.5,L=Math.ceil(Math.max(Math.abs(w)+Math.abs(A)||0,N)*M),I=Math.ceil(Math.max(Math.abs(S)+Math.abs(E)||g,Math.abs(C)+Math.abs(T)||g)*M);m=new OffscreenCanvas(L,I),p=m.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,L,I),p.fillStyle="black",p.fillText(e,L*(M-1)/2,I*(3-M)/2);const O=this.#h(p.getImageData(0,0,L,I).data),P=this.#l(O),F=this.#d(P),$=this.#i(O,L,I,F);return this.processDrawnLines({lines:{curves:$,width:L,height:I},pageWidth:o,pageHeight:l,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,o){const[l,u,h]=this.#f(e),[m,p]=this.#c(l,u,h,Math.hypot(u,h)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),g=this.#d(p),y=this.#i(m,u,h,g);return this.processDrawnLines({lines:{curves:y,width:u,height:h},pageWidth:t,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:l,areContours:u}){i%180!==0&&([t,n]=[n,t]);const{curves:h,width:m,height:p}=e,g=e.thickness??0,y=[],w=Math.min(t/m,n/p),A=w/t,S=w/n,E=[];for(const{points:T}of h){const N=l?this.#o(T):T;if(!N)continue;E.push(N);const M=N.length,L=new Float32Array(M),I=new Float32Array(3*(M===2?2:M-2));if(y.push({line:I,points:L}),M===2){L[0]=N[0]*A,L[1]=N[1]*S,I.set([NaN,NaN,NaN,NaN,L[0],L[1]],0);continue}let[O,P,F,$]=N;O*=A,P*=S,F*=A,$*=S,L.set([O,P,F,$],0),I.set([NaN,NaN,NaN,NaN,O,P],0);for(let W=4;W<M;W+=2){const ie=L[W]=N[W]*A,le=L[W+1]=N[W+1]*S;I.set(_e.createBezierPoints(O,P,F,$,ie,le),(W-2)*3),[O,P,F,$]=[F,$,ie,le]}}if(y.length===0)return null;const C=u?new _p:new yc;return C.build(y,t,n,1,i,u?0:g,o),{outline:C,newCurves:E,areContours:u,thickness:g,width:m,height:p}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:o}){let l=1/0,u=-1/0,h=0;for(const N of e){h+=N.length;for(let M=2,L=N.length;M<L;M++){const I=N[M]-N[M-2];l=Math.min(l,I),u=Math.max(u,I)}}let m;l>=-128&&u<=127?m=Int8Array:l>=-32768&&u<=32767?m=Int16Array:m=Int32Array;const p=e.length,g=Ku+Pl*p,y=new Uint32Array(g);let w=0;y[w++]=g*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*m.BYTES_PER_ELEMENT,y[w++]=0,y[w++]=i,y[w++]=o,y[w++]=t?0:1,y[w++]=Math.max(0,Math.floor(n??0)),y[w++]=p,y[w++]=m.BYTES_PER_ELEMENT;for(const N of e)y[w++]=N.length-2,y[w++]=N[0],y[w++]=N[1];const A=new CompressionStream("deflate-raw"),S=A.writable.getWriter();await S.ready,S.write(y);const E=m.prototype.constructor;for(const N of e){const M=new E(N.length-2);for(let L=2,I=N.length;L<I;L++)M[L-2]=N[L]-N[L-2];S.write(M)}S.close();const C=await new Response(A.readable).arrayBuffer(),T=new Uint8Array(C);return yC(T)}static async decompressSignature(e){try{const t=q3(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),o=i.getWriter();await o.ready,o.write(t).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const N of n)l||=new Uint8Array(new Uint32Array(N.buffer,0,4)[0]),l.set(N,u),u+=N.length;const h=new Uint32Array(l.buffer,0,l.length>>2),m=h[1];if(m!==0)throw new Error(`Invalid version: ${m}`);const p=h[2],g=h[3],y=h[4]===0,w=h[5],A=h[6],S=h[7],E=[],C=(Ku+Pl*A)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,C);break}u=0;for(let N=0;N<A;N++){const M=h[Pl*N+Ku],L=new Float32Array(M+2);E.push(L);for(let I=0;I<Pl-1;I++)L[I]=h[Pl*N+Ku+I+1];for(let I=0;I<M;I++)L[I+2]=L[I]+T[u++]}return{areContours:y,thickness:w,outlines:E,width:p,height:g}}catch(t){return Xe(`decompressSignature: ${t}`),null}}}class Fg extends QC{constructor(){super(),super.updateProperties({fill:ke._defaultLineColor,"stroke-width":0})}clone(){const e=new Fg;return e.updateAll(this),e}}class Hg extends Qd{constructor(e){super(e),super.updateProperties({stroke:ke._defaultLineColor,"stroke-width":1})}clone(){const e=new Hg(this._viewParameters);return e.updateAll(this),e}}class ai extends Ue{#e=!1;#t=null;#s=null;#n=null;static _type="signature";static _editorType=qe.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){ke.initialize(e,t),this._defaultDrawingOptions=new Fg,this._defaultDrawnSignatureOptions=new Hg(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ze(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:i,mustSmooth:o,areContours:l,description:u,uuid:h,heightInPage:m}=this.#s,{rawDims:{pageWidth:p,pageHeight:g},rotation:y}=this.parent.viewport,w=Ka.processDrawnLines({lines:i,pageWidth:p,pageHeight:g,rotation:y,innerMargin:ai._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(w,m,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:o}=this.#s,l=Math.max(i,o),u=Ka.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:n,width:i,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,i){const{x:o,y:l}=this,{outline:u}=this.#s=e;this.#e=u instanceof _p,this.description=n;let h;this.#e?h=ai.getDefaultDrawingOptions():(h=ai._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,m]=this.pageDimensions;let p=t/m;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return Ka.process(e,t,n,i,ai._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return Ka.extractContoursFromText(e,t,n,i,o,ai._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return Ka.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:ai._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=ai.getDefaultDrawingOptions():(this._drawingOptions=ai._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(o),e?(o.paths={lines:t,points:n},o.uuid=this.#n,o.isCopy=!0):o.lines=t,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(e,t,n,i,o,l){return l.areContours?_p.deserialize(e,t,n,i,o,l):yc.deserialize(e,t,n,i,o,l)}static async deserialize(e,t,n){const i=await super.deserialize(e,t,n);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class AI extends ke{#e=null;#t=null;#s=null;#n=null;#r=null;#i="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=qe.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#r=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){ke.initialize(e,t)}static isHandlingMimeForPasting(e){return xd.includes(e)}static paste(e,t){t.pasteEditor({mode:qe.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#m()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,u=await n.guess({name:"altText",request:{data:i,width:o,height:l,channels:i.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),t&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#d(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(n).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(n).then(i=>this.#d(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=xd.join(",");const t=this._uiManager._signal;this.#s=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#s||this.#e||this.#n||this.#r||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,i&&(this.#e=i),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},e)}#m(){const{div:e}=this;let{width:t,height:n}=this.#e;const[i,o]=this.pageDimensions,l=.75;if(this.width)t=this.width*i,n=this.height*o;else if(t>l*i||n>l*o){const h=Math.min(l*i/t,l*o/n);t*=h,n*=h}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=t/i,this.height=n/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,n=!1){e||(e=224);const{width:i,height:o}=this.#e,l=new Ys;let u=this.#e,h=i,m=o,p=null;if(t){if(i>t||o>t){const I=Math.min(t/i,t/o);h=Math.floor(i*I),m=Math.floor(o*I)}p=document.createElement("canvas");const y=p.width=Math.ceil(h*l.sx),w=p.height=Math.ceil(m*l.sy);this.#l||(u=this.#u(y,w));const A=p.getContext("2d");A.filter=this._uiManager.hcmFilter;let S="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":K3.isDarkMode&&(S="#8f8f9d",E="#42414d");const C=15,T=C*l.sx,N=C*l.sy,M=new OffscreenCanvas(T*2,N*2),L=M.getContext("2d");L.fillStyle=S,L.fillRect(0,0,T*2,N*2),L.fillStyle=E,L.fillRect(0,0,T,N),L.fillRect(T,N,T,N),A.fillStyle=A.createPattern(M,"repeat"),A.fillRect(0,0,y,w),A.drawImage(u,0,0,u.width,u.height,0,0,y,w)}let g=null;if(n){let y,w;if(l.symmetric&&u.width<e&&u.height<e)y=u.width,w=u.height;else if(u=this.#e,i>e||o>e){const E=Math.min(e/i,e/o);y=Math.floor(i*E),w=Math.floor(o*E),this.#l||(u=this.#u(y,w))}const S=new OffscreenCanvas(y,w).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,y,w),g={width:y,height:w,data:S.getImageData(0,0,y,w).data}}return{canvas:p,width:h,height:m,imageData:g}}#u(e,t){const{width:n,height:i}=this.#e;let o=n,l=i,u=this.#e;for(;o>2*e||l>2*t;){const h=o,m=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(o,l);p.getContext("2d").drawImage(u,0,0,h,m,0,0,o,l),u=p.transferToImageBitmap()}return u}#p(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,o=new Ys,l=Math.ceil(n*e*o.sx),u=Math.ceil(i*t*o.sy),h=this.#a;if(!h||h.width===l&&h.height===u)return;h.width=l,h.height=u;const m=this.#l?this.#e:this.#u(l,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(m,0,0,m.width,m.height,0,0,l,u)}#v(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,n]=this.pageDimensions,i=Math.round(this.width*t*ar.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*ar.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,o);return l.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,o),l.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let i=null,o=!1;if(e instanceof XC){const{data:{rect:S,rotation:E,id:C,structParent:T,popupRef:N,richText:M,contentsObj:L,creationDate:I,modificationDate:O},container:P,parent:{page:{pageNumber:F}},canvas:$}=e;let W,ie;$?(delete e.canvas,{id:W,bitmap:ie}=n.imageManager.getFromCanvas(P.id,$),$.remove()):(o=!0,e._hasNoCanvas=!0);const le=(await t._structTree.getAriaAttributes(`${Ag}${C}`))?.get("aria-label")||"";i=e={annotationType:qe.STAMP,bitmapId:W,bitmap:ie,pageIndex:F-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:le},isSvg:!1,structParent:T,popupRef:N,richText:M,comment:L?.str||null,creationDate:I,modificationDate:O}}const l=await super.deserialize(e,t,n),{rect:u,bitmap:h,bitmapUrl:m,bitmapId:p,isSvg:g,accessibilityData:y}=e;o?(n.addMissingCanvas(e.id,l),l.#o=!0):p&&n.imageManager.isValidId(p)?(l.#t=p,h&&(l.#e=h)):l.#n=m,l.#l=g;const[w,A]=l.pageDimensions;return l.width=(u[2]-u[0])/w,l.height=(u[3]-u[1])/A,y&&(l.altTextData=y),l._initialData=i,e.comment&&l.setCommentData(e),l.#h=!!i,l}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(n),e)return n.bitmapUrl=this.#v(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#b(n);return u.isSame?null:(u.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(t===null)return n;t.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:l,serialized:n}),n.bitmap=this.#v(!1);else if(this.#l){const u=t.stamps.get(this.#t);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#v(!1))}return n}#b(e){const{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,i=e.pageIndex===t,o=(e.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class oi{#e;#t=!1;#s=null;#n=null;#r=null;#i=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([mn,zg,AI,Xt,ai].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:h,viewport:m,l10n:p}){const g=[...oi.#p.values()];if(!oi._initialized){oi._initialized=!0;for(const y of g)y.initialize(p,e)}e.registerEditorTypes(g),this.#u=e,this.pageIndex=t,this.div=n,this.#e=o,this.#s=l,this.viewport=m,this.#d=h,this.drawLayer=u,this._structTree=i,this.#u.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===qe.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#x(),e){case qe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case qe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case qe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===qe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of oi.#p.values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#s?.div.classList.toggle("disabled",!e)}get#v(){return this.#i.size!==0?this.#i.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const n of this.#v)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));const t=this.#s;if(t)for(const n of t.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const n=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",i=>{const{clientX:l,clientY:u,timeStamp:h}=i,m=this.#m;if(h-m>500){this.#m=h;return}this.#m=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const g=document.elementsFromPoint(l,u);if(p.toggle("getElements",!1),!this.div.contains(g[0]))return;let y;const w=new RegExp(`^${tc}[0-9]+$`);for(const S of g)if(w.test(S.id)){y=S.id;break}if(!y)return;const A=this.#i.get(y);A?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),A.dblclick(i))},{signal:n,capture:!0})}const e=this.#s;if(e){const n=new Map,i=new Map;for(const l of this.#v){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){n.set(l.annotationElementId,l);continue}else i.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let h=i.get(u);if(h){h.resetAnnotationElement(l),h.show(!1),l.show();continue}h=n.get(u),h&&(this.#u.addChangedExistingAnnotation(h),h.renderAnnotationElement(l)&&h.show(!1)),l.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const n of oi.#p.values())t.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#s?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:n}=wn.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Xt.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),ke.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#r&&(e._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of this.#i.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#y(){return oi.#p.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#E(e){const t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:n,offsetY:i}=this.#A(),o=this.getNextId(),l=this.#E({parent:this,id:o,x:n,y:i,uiManager:this.#u,isCentered:!0,...t});l&&this.add(l)}async deserialize(e){return await oi.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),o=this.#E({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:e,y:t,width:n,height:i}=this.boundingClientRect,o=Math.max(0,e),l=Math.max(0,t),u=Math.min(window.innerWidth,e+n),h=Math.min(window.innerHeight,t+i),m=(o+u)/2-e,p=(l+h)/2-t,[g,y]=this.viewport.rotation%180===0?[m,p]:[p,m];return{offsetX:g,offsetY:y}}addNewEditor(e={}){this.createAndAddNewEditor(this.#A(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#a||(this.#a=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const n=this.#u.getMode();if(n===qe.STAMP||n===qe.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===qe.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#a=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const n=this.#u.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,t,n){const i=this.#u.findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#u.removeLayer(this)}#x(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Na(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#x();const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Na(this.div,{rotation:n}),t!==n)for(const i of this.#i.values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class pn{#e=null;#t=new Map;#s=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Ze(this,"_svgFactory",new rc)}static#r(e,[t,n,i,o]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*i}%`,l.height=`${100*o}%`}#i(){const e=pn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,t){const n=pn._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const o=pn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),i}#o(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)}draw(e,t=!1,n=!1){const i=pn.#n++,o=this.#i(),l=pn._svgFactory.createElement("defs");o.append(l);const u=pn._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(i,u);const m=n?this.#a(l,h):null,p=pn._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(o,e),this.#t.set(i,o),{id:i,clipPathId:`url(#${m})`}}drawOutline(e,t){const n=pn.#n++,i=this.#i(),o=pn._svgFactory.createElement("defs");i.append(o);const l=pn._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const g=pn._svgFactory.createElement("mask");o.append(g),h=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",h),g.setAttribute("maskUnits","objectBoundingBox");const y=pn._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const w=pn._svgFactory.createElement("use");g.append(w),w.setAttribute("href",`#${u}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const m=pn._svgFactory.createElement("use");i.append(m),m.setAttribute("href",`#${u}`),h&&m.setAttribute("mask",`url(#${h})`);const p=m.cloneNode();return i.append(p),m.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(n,i),n}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:o,path:l}=t,u=typeof e=="number"?this.#t.get(e):e;if(u){if(n&&this.#o(u,n),i&&pn.#r(u,i),o){const{classList:h}=u;for(const[m,p]of Object.entries(o))h.toggle(m,p)}if(l){const m=u.firstChild.firstChild;this.#o(m,l)}}}updateParent(e,t){if(t===this)return;const n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Cp};globalThis.pdfjsLib={AbortException:$i,AnnotationEditorLayer:oi,AnnotationEditorParamsType:rt,AnnotationEditorType:qe,AnnotationEditorUIManager:Gi,AnnotationLayer:Bg,AnnotationMode:ci,AnnotationType:qt,applyOpacity:AC,build:VC,ColorPicker:us,createValidAbsoluteUrl:xg,CSSConstants:SC,DOMSVGFactory:rc,DrawLayer:pn,FeatureTest:wn,fetchData:Bo,findContrastColor:CC,getDocument:Dg,getFilenameFromUrl:bC,getPdfFilenameFromUrl:xC,getRGB:zo,getUuid:Sg,getXfaPageViewport:wC,GlobalWorkerOptions:Sa,ImageKind:Gl,InvalidPDFException:yd,isDataScheme:mc,isPdfFile:Wd,isValidExplicitDest:NC,MathClamp:On,noContextMenu:ms,normalizeUnicode:vC,OPS:Eo,OutputScale:Ys,PasswordResponses:pC,PDFDataRangeTransport:Og,PDFDateString:bd,PDFWorker:_o,PermissionFlag:mC,PixelsPerInch:ar,RenderingCancelledException:Xd,renderRichText:Eg,ResponseException:nc,setLayerDimensions:Na,shadow:Ze,SignatureExtractor:Ka,stopEvent:Bt,SupportedImageMimeTypes:xd,TextLayer:ic,TouchManager:gc,updateUrlHash:wg,Util:Te,VerbosityLevel:dc,version:Lg,XfaLayer:Cg};const CI=Object.freeze(Object.defineProperty({__proto__:null,AbortException:$i,AnnotationEditorLayer:oi,AnnotationEditorParamsType:rt,AnnotationEditorType:qe,AnnotationEditorUIManager:Gi,AnnotationLayer:Bg,AnnotationMode:ci,AnnotationType:qt,CSSConstants:SC,ColorPicker:us,DOMSVGFactory:rc,DrawLayer:pn,FeatureTest:wn,GlobalWorkerOptions:Sa,ImageKind:Gl,InvalidPDFException:yd,MathClamp:On,OPS:Eo,OutputScale:Ys,PDFDataRangeTransport:Og,PDFDateString:bd,PDFWorker:_o,PasswordResponses:pC,PermissionFlag:mC,PixelsPerInch:ar,RenderingCancelledException:Xd,ResponseException:nc,SignatureExtractor:Ka,SupportedImageMimeTypes:xd,TextLayer:ic,TouchManager:gc,Util:Te,VerbosityLevel:dc,XfaLayer:Cg,applyOpacity:AC,build:VC,createValidAbsoluteUrl:xg,fetchData:Bo,findContrastColor:CC,getDocument:Dg,getFilenameFromUrl:bC,getPdfFilenameFromUrl:xC,getRGB:zo,getUuid:Sg,getXfaPageViewport:wC,isDataScheme:mc,isPdfFile:Wd,isValidExplicitDest:NC,noContextMenu:ms,normalizeUnicode:vC,renderRichText:Eg,setLayerDimensions:Na,shadow:Ze,stopEvent:Bt,updateUrlHash:wg,version:Lg},Symbol.toStringTag,{value:"Module"}));var Cw=Object.prototype.hasOwnProperty;function Ew(a,e,t){for(t of a.keys())if(po(t,e))return t}function po(a,e){var t,n,i;if(a===e)return!0;if(a&&e&&(t=a.constructor)===e.constructor){if(t===Date)return a.getTime()===e.getTime();if(t===RegExp)return a.toString()===e.toString();if(t===Array){if((n=a.length)===e.length)for(;n--&&po(a[n],e[n]););return n===-1}if(t===Set){if(a.size!==e.size)return!1;for(n of a)if(i=n,i&&typeof i=="object"&&(i=Ew(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(a.size!==e.size)return!1;for(n of a)if(i=n[0],i&&typeof i=="object"&&(i=Ew(e,i),!i)||!po(n[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)a=new Uint8Array(a),e=new Uint8Array(e);else if(t===DataView){if((n=a.byteLength)===e.byteLength)for(;n--&&a.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(a)){if((n=a.byteLength)===e.byteLength)for(;n--&&a[n]===e[n];);return n===-1}if(!t||typeof a=="object"){n=0;for(t in a)if(Cw.call(a,t)&&++n&&!Cw.call(e,t)||!(t in e)||!po(a[t],e[t]))return!1;return Object.keys(e).length===n}}return a!==a&&e!==e}function bc(a){let e=!1;return{promise:new Promise((n,i)=>{a.then(o=>!e&&n(o)).catch(o=>!e&&i(o))}),cancel(){e=!0}}}const EI=["onCopy","onCut","onPaste"],_I=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],TI=["onFocus","onBlur"],NI=["onInput","onInvalid","onReset","onSubmit"],jI=["onLoad","onError"],MI=["onKeyDown","onKeyPress","onKeyUp"],RI=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],DI=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],kI=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],OI=["onSelect"],LI=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],PI=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],II=["onScroll"],BI=["onWheel"],zI=["onAnimationStart","onAnimationEnd","onAnimationIteration"],FI=["onTransitionEnd"],HI=["onToggle"],UI=["onChange"],VI=[...EI,..._I,...TI,...NI,...jI,...MI,...RI,...DI,...kI,...OI,...LI,...PI,...II,...BI,...zI,...FI,...UI,...HI];function ZC(a,e){const t={};for(const n of VI){const i=a[n];i&&(e?t[n]=(o=>i(o,e(n))):t[n]=i)}return t}var $I="Invariant failed";function Et(a,e){if(!a)throw new Error($I)}var Xm,_w;function GI(){if(_w)return Xm;_w=1;var a=function(){};return Xm=a,Xm}var YI=GI();const Ln=kp(YI),JC=x.createContext(null),qI="noopener noreferrer nofollow";class XI{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Et(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Et(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||qI,e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{Et(this.pdfDocument),Et(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Et(Array.isArray(t));const n=t[0];new Promise(i=>{Et(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{i(o)}).catch(()=>{Et(!1)}):typeof n=="number"?i(n):Et(!1)}).then(i=>{const o=i+1;Et(this.pdfViewer),Et(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:o})})})}goToPage(e){const t=e-1;Et(this.pdfViewer),Et(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function go({children:a,type:e}){return d.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:a})}const Tw={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function WI(a,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return a}}function To(){return x.useReducer(WI,{value:void 0,error:void 0})}const Zd=typeof window<"u",eE=Zd&&window.location.protocol==="file:";function KI(a){return typeof a<"u"}function Wa(a){return KI(a)&&a!==null}function QI(a){return typeof a=="string"}function ZI(a){return a instanceof ArrayBuffer}function JI(a){return Et(Zd),a instanceof Blob}function Tp(a){return QI(a)&&/^data:/.test(a)}function Nw(a){Et(Tp(a));const[e="",t=""]=a.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function e5(){return Zd&&window.devicePixelRatio||1}const tE="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function jw(){Ln(!eE,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${tE}`)}function t5(){Ln(!eE,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${tE}`)}function or(a){a?.cancel&&a.cancel()}function Np(a,e){return Object.defineProperty(a,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(a,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(a,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(a,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),a}function nE(a){return a.name==="AbortException"||a.name==="RenderingCancelledException"}function n5(a){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:o}=i.target;if(!o)return t(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(a)})}const{PDFDataRangeTransport:s5}=CI,i5=(a,e)=>{switch(e){case Tw.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");a(t);break}case Tw.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");a(t);break}}};function Mw(a){return typeof a=="object"&&a!==null&&("data"in a||"range"in a||"url"in a)}const Wm=x.forwardRef(function({children:e,className:t,error:n="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:o,file:l,inputRef:u,imageResourcesPath:h,loading:m="Loading PDF",noData:p="No PDF file specified.",onItemClick:g,onLoadError:y,onLoadProgress:w,onLoadSuccess:A,onPassword:S=i5,onSourceError:E,onSourceSuccess:C,options:T,renderMode:N,rotate:M,scale:L,...I},O){const[P,F]=To(),{value:$,error:W}=P,[ie,le]=To(),{value:G,error:fe}=ie,R=x.useRef(new XI),U=x.useRef([]),H=x.useRef(void 0),z=x.useRef(void 0);l&&l!==H.current&&Mw(l)&&(Ln(!po(l,H.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),H.current=l),T&&T!==z.current&&(Ln(!po(T,z.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),z.current=T);const ce=x.useRef({scrollPageIntoView:Ve=>{const{dest:Oe,pageNumber:Z,pageIndex:Ae=Z-1}=Ve;if(g){g({dest:Oe,pageIndex:Ae,pageNumber:Z});return}const Ge=U.current[Ae];if(Ge){Ge.scrollIntoView();return}Ln(!1,`An internal link leading to page ${Z} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});x.useImperativeHandle(O,()=>({linkService:R,pages:U,viewer:ce}),[]);function j(){C&&C()}function k(){W&&(Ln(!1,W.toString()),E&&E(W))}function B(){F({type:"RESET"})}x.useEffect(B,[l,F]);const X=x.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Tp(l)?{data:Nw(l)}:(jw(),{url:l});if(l instanceof s5)return{range:l};if(ZI(l))return{data:l};if(Zd&&JI(l))return{data:await n5(l)};if(Et(typeof l=="object"),Et(Mw(l)),"url"in l&&typeof l.url=="string"){if(Tp(l.url)){const{url:Ve,...Oe}=l;return{data:Nw(Ve),...Oe}}jw()}return l},[l]);x.useEffect(()=>{const Ve=bc(X());return Ve.promise.then(Oe=>{F({type:"RESOLVE",value:Oe})}).catch(Oe=>{F({type:"REJECT",error:Oe})}),()=>{or(Ve)}},[X,F]),x.useEffect(()=>{if(!(typeof $>"u")){if($===!1){k();return}j()}},[$]);function K(){G&&(A&&A(G),U.current=new Array(G.numPages),R.current.setDocument(G))}function oe(){fe&&(Ln(!1,fe.toString()),y&&y(fe))}x.useEffect(function(){le({type:"RESET"})},[le,$]),x.useEffect(function(){if(!$)return;const Oe=T?{...$,...T}:$,Z=Dg(Oe);w&&(Z.onProgress=w),S&&(Z.onPassword=S);const Ae=Z;return Ae.promise.then(Ge=>{Ae.destroyed||le({type:"RESOLVE",value:Ge})}).catch(Ge=>{Ae.destroyed||le({type:"REJECT",error:Ge})}),()=>{Ae.destroy()}},[T,le,$]),x.useEffect(()=>{if(!(typeof G>"u")){if(G===!1){oe();return}K()}},[G]),x.useEffect(function(){R.current.setViewer(ce.current),R.current.setExternalLinkRel(i),R.current.setExternalLinkTarget(o)},[i,o]);const J=x.useCallback((Ve,Oe)=>{U.current[Ve]=Oe},[]),Y=x.useCallback(Ve=>{delete U.current[Ve]},[]),se=x.useMemo(()=>({imageResourcesPath:h,linkService:R.current,onItemClick:g,pdf:G,registerPage:J,renderMode:N,rotate:M,scale:L,unregisterPage:Y}),[h,g,G,J,N,M,L,Y]),pe=x.useMemo(()=>ZC(I,()=>G),[I,G]);function xe(){function Ve(Z){return!!Z?.pdf}if(!Ve(se))throw new Error("pdf is undefined");const Oe=typeof e=="function"?e(se):e;return d.jsx(JC.Provider,{value:se,children:Oe})}function ge(){return l?G==null?d.jsx(go,{type:"loading",children:typeof m=="function"?m():m}):G===!1?d.jsx(go,{type:"error",children:typeof n=="function"?n():n}):xe():d.jsx(go,{type:"no-data",children:typeof p=="function"?p():p})}return d.jsx("div",{className:Ro("react-pdf__Document",t),ref:u,...pe,children:ge()})});function sE(){return x.useContext(JC)}function iE(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];var t=a.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(o){for(var l=0,u=t;l<u.length;l++){var h=u[l];typeof h=="function"?h(o):h&&(h.current=o)}}}const aE=x.createContext(null);function Jd(){return x.useContext(aE)}function a5(){const a=sE(),e=Jd();Et(e);const t={...a,...e},{filterAnnotations:n,imageResourcesPath:i,linkService:o,onGetAnnotationsError:l,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:m,page:p,pdf:g,renderForms:y,rotate:w,scale:A=1}=t;Et(g),Et(p),Et(o);const[S,E]=To(),{value:C,error:T}=S,N=x.useRef(null);Ln(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function M(){C&&u&&u(C)}function L(){T&&(Ln(!1,T.toString()),l&&l(T))}x.useEffect(function(){E({type:"RESET"})},[E,p]),x.useEffect(function(){if(!p)return;const $=bc(p.getAnnotations()),W=$;return $.promise.then(ie=>{E({type:"RESOLVE",value:ie})}).catch(ie=>{E({type:"REJECT",error:ie})}),()=>{or(W)}},[E,p]),x.useEffect(()=>{if(C!==void 0){if(C===!1){L();return}M()}},[C]);function I(){m&&m()}function O(F){Ln(!1,`${F}`),h&&h(F)}const P=x.useMemo(()=>p.getViewport({scale:A,rotation:w}),[p,w,A]);return x.useEffect(function(){if(!g||!p||!o||!C)return;const{current:$}=N;if(!$)return;const W=P.clone({dontFlip:!0}),ie={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:g.annotationStorage,commentManager:null,div:$,l10n:null,linkService:o,page:p,structTreeLayer:null,viewport:W},le={annotations:n?n({annotations:C}):C,annotationStorage:g.annotationStorage,div:$,imageResourcesPath:i,linkService:o,page:p,renderForms:y,viewport:W};$.innerHTML="";try{new Bg(ie).render(le),I()}catch(G){O(G)}return()=>{}},[C,n,i,o,p,g,y,P]),d.jsx("div",{className:Ro("react-pdf__Page__annotations","annotationLayer"),ref:N})}const rE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},r5=/^H(\d+)$/;function o5(a){return a in rE}function eh(a){return"children"in a}function oE(a){return eh(a)?a.children.length===1&&0 in a.children&&"id"in a.children[0]:!1}function l5(a){const e={};if(eh(a)){const{role:t}=a,n=t.match(r5);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(o5(t)){const i=rE[t];i&&(e.role=i)}}return e}function lE(a){const e={};if(eh(a)){if(a.alt!==void 0&&(e["aria-label"]=a.alt),a.lang!==void 0&&(e.lang=a.lang),oE(a)){const[t]=a.children;if(t){const n=lE(t);return{...e,...n}}}}else"id"in a&&(e["aria-owns"]=a.id);return e}function c5(a){return a?{...l5(a),...lE(a)}:null}function cE({className:a,node:e}){const t=x.useMemo(()=>c5(e),[e]),n=x.useMemo(()=>!eh(e)||oE(e)?null:e.children.map((i,o)=>d.jsx(cE,{node:i},o)),[e]);return d.jsx("span",{className:a,...t,children:n})}function u5(){const a=Jd();Et(a);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=a,[n,i]=To(),{value:o,error:l}=n,{customTextRenderer:u,page:h}=a;function m(){o&&t&&t(o)}function p(){l&&(Ln(!1,l.toString()),e&&e(l))}return x.useEffect(function(){i({type:"RESET"})},[i,h]),x.useEffect(function(){if(u||!h)return;const y=bc(h.getStructTree()),w=y;return y.promise.then(A=>{i({type:"RESOLVE",value:A})}).catch(A=>{i({type:"REJECT",error:A})}),()=>or(w)},[u,h,i]),x.useEffect(()=>{if(o!==void 0){if(o===!1){p();return}m()}},[o]),o?d.jsx(cE,{className:"react-pdf__Page__structTree structTree",node:o}):null}const Rw=ci;function d5(a){const e=Jd();Et(e);const t={...e,...a},{_className:n,canvasBackground:i,devicePixelRatio:o=e5(),onRenderError:l,onRenderSuccess:u,page:h,renderForms:m,renderTextLayer:p,pageColors:g,rotate:y,scale:w}=t,{canvasRef:A}=a;Et(h);const S=x.useRef(null);function E(){h&&u&&u(Np(h,w))}function C(L){nE(L)||(Ln(!1,L.toString()),l&&l(L))}const T=x.useMemo(()=>h.getViewport({scale:w*o,rotation:y}),[o,h,y,w]),N=x.useMemo(()=>h.getViewport({scale:w,rotation:y}),[h,y,w]);x.useEffect(function(){if(!h)return;h.cleanup();const{current:I}=S;if(!I)return;I.width=T.width,I.height=T.height,I.style.width=`${Math.floor(N.width)}px`,I.style.height=`${Math.floor(N.height)}px`,I.style.visibility="hidden";const O={annotationMode:m?Rw.ENABLE_FORMS:Rw.ENABLE,canvas:I,canvasContext:I.getContext("2d",{alpha:!1}),pageColors:g,viewport:T};i&&(O.background=i);const P=h.render(O),F=P;return P.promise.then(()=>{I.style.visibility="",E()}).catch(C),()=>or(F)},[i,h,g,m,T,N]);const M=x.useCallback(()=>{const{current:L}=S;L&&(L.width=0,L.height=0)},[]);return x.useEffect(()=>M,[M]),d.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:iE(A,S),style:{display:"block",userSelect:"none"},children:p?d.jsx(u5,{}):null})}function h5(a){return"str"in a}const f5=new Set(["base","embed","iframe","link","meta","object","script","style","template"]),m5=new Set(["action","formaction","href","poster","src","xlink:href"]);function p5(a){let e="";for(const t of a){const n=t.charCodeAt(0);n<=32||n===127||(e+=t.toLowerCase())}return e.startsWith("javascript:")||e.startsWith("vbscript:")}function g5(a){return a.nodeType===Node.ELEMENT_NODE}function uE(a){return g5(a)&&a instanceof HTMLElement}function v5(a){return uE(a)&&f5.has(a.tagName.toLowerCase())}function y5(a){const e=document.createElement(a.tagName.toLowerCase());return Array.from(a.attributes).forEach(t=>{const n=t.name.toLowerCase();n.startsWith("on")||n==="srcdoc"||m5.has(n)&&p5(t.value)||e.setAttribute(t.name,t.value)}),Array.from(a.childNodes).forEach(t=>{e.append(dE(t))}),e}function dE(a){var e;return uE(a)&&!v5(a)?y5(a):document.createTextNode((e=a.textContent)!==null&&e!==void 0?e:"")}function b5(a,e){const t=document.createElement("template");t.innerHTML=e;const n=document.createDocumentFragment();Array.from(t.content.childNodes).forEach(i=>{n.append(dE(i))}),a.replaceChildren(n)}function x5(){const a=Jd();Et(a);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:o,page:l,pageIndex:u,pageNumber:h,rotate:m,scale:p}=a;Et(l);const[g,y]=To(),{value:w,error:A}=g,S=x.useRef(null);Ln(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){w&&n&&n(w)}function C(){A&&(Ln(!1,A.toString()),t&&t(A))}x.useEffect(function(){y({type:"RESET"})},[l,y]),x.useEffect(function(){if(!l)return;const P=bc(l.getTextContent()),F=P;return P.promise.then($=>{y({type:"RESOLVE",value:$})}).catch($=>{y({type:"REJECT",error:$})}),()=>or(F)},[l,y]),x.useEffect(()=>{if(w!==void 0){if(w===!1){C();return}E()}},[w]);const T=x.useCallback(()=>{o&&o()},[o]),N=x.useCallback(O=>{nE(O)||(Ln(!1,O.toString()),i&&i(O))},[i]);function M(){const O=S.current;O&&O.classList.add("selecting")}function L(){const O=S.current;O&&O.classList.remove("selecting")}const I=x.useMemo(()=>l.getViewport({scale:p,rotation:m}),[l,m,p]);return x.useLayoutEffect(function(){if(!l||!w)return;const{current:P}=S;if(!P)return;P.innerHTML="";const F=l.streamTextContent({includeMarkedContent:!0}),$={container:P,textContentSource:F,viewport:I},W=new ic($),ie=W;return W.render().then(()=>{const le=document.createElement("div");le.className="endOfContent",P.append(le);const G=P.querySelectorAll('[role="presentation"]');if(e){let fe=0;w.items.forEach((R,U)=>{if(!h5(R))return;const H=G[fe];if(!H)return;const z=e({pageIndex:u,pageNumber:h,itemIndex:U,...R});b5(H,z),fe+=R.str&&R.hasEOL?2:1})}T()}).catch(N),()=>or(ie)},[e,N,T,l,u,h,w,I]),d.jsx("div",{className:Ro("react-pdf__Page__textContent","textLayer"),onMouseUp:L,onMouseDown:M,ref:S})}const Dw=1;function Km(a){const t={...sE(),...a},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:o,canvasRef:l,children:u,className:h,customRenderer:m,customTextRenderer:p,devicePixelRatio:g,error:y="Failed to load the page.",filterAnnotations:w,height:A,inputRef:S,loading:E="Loading page",noData:C="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:N,onGetStructTreeError:M,onGetStructTreeSuccess:L,onGetTextError:I,onGetTextSuccess:O,onLoadError:P,onLoadSuccess:F,onRenderAnnotationLayerError:$,onRenderAnnotationLayerSuccess:W,onRenderError:ie,onRenderSuccess:le,onRenderTextLayerError:G,onRenderTextLayerSuccess:fe,pageColors:R,pageIndex:U,pageNumber:H,pdf:z,registerPage:ce,renderAnnotationLayer:j=!0,renderForms:k=!1,renderMode:B="canvas",renderTextLayer:X=!0,rotate:K,scale:oe=Dw,unregisterPage:J,width:Y,...se}=t,[pe,xe]=To(),{value:ge,error:Ve}=pe,Oe=x.useRef(null);Et(z);const Z=Wa(H)?H-1:U??null,Ae=H??(Wa(U)?U+1:null),Ge=K??(ge?ge.rotate:null),$e=x.useMemo(()=>{if(!ge)return null;let Jt=1;const Vt=oe??Dw;if(Y||A){const Sn=ge.getViewport({scale:1,rotation:Ge});Y?Jt=Y/Sn.width:A&&(Jt=A/Sn.height)}return Vt*Jt},[A,ge,Ge,oe,Y]);x.useEffect(function(){return()=>{Wa(Z)&&i&&J&&J(Z)}},[i,z,Z,J]);function ut(){if(F){if(!ge||!$e)return;F(Np(ge,$e))}if(i&&ce){if(!Wa(Z)||!Oe.current)return;ce(Z,Oe.current)}}function rn(){Ve&&(Ln(!1,Ve.toString()),P&&P(Ve))}x.useEffect(function(){xe({type:"RESET"})},[xe,z,Z]),x.useEffect(function(){if(!z||!Ae)return;const Vt=bc(z.getPage(Ae)),Sn=Vt;return Vt.promise.then(cn=>{xe({type:"RESOLVE",value:cn})}).catch(cn=>{xe({type:"REJECT",error:cn})}),()=>or(Sn)},[xe,z,Ae]),x.useEffect(()=>{if(ge!==void 0){if(ge===!1){rn();return}ut()}},[ge,$e]);const Tt=x.useMemo(()=>Wa(Z)&&Ae&&Wa(Ge)&&Wa($e)?{_className:n,canvasBackground:o,customTextRenderer:p,devicePixelRatio:g,filterAnnotations:w,onGetAnnotationsError:T,onGetAnnotationsSuccess:N,onGetStructTreeError:M,onGetStructTreeSuccess:L,onGetTextError:I,onGetTextSuccess:O,onRenderAnnotationLayerError:$,onRenderAnnotationLayerSuccess:W,onRenderError:ie,onRenderSuccess:le,onRenderTextLayerError:G,onRenderTextLayerSuccess:fe,page:ge,pageColors:R,pageIndex:Z,pageNumber:Ae,renderForms:k,renderTextLayer:X,rotate:Ge,scale:$e}:null,[n,o,p,g,w,T,N,M,L,I,O,$,W,ie,le,G,fe,ge,R,Z,Ae,k,X,Ge,$e]),At=x.useMemo(()=>ZC(se,()=>ge&&($e?Np(ge,$e):void 0)),[se,ge,$e]),Ut=`${Z}@${$e}/${Ge}`;function Mt(){switch(B){case"custom":return Et(m),d.jsx(m,{},`${Ut}_custom`);case"none":return null;default:return d.jsx(d5,{canvasRef:l},`${Ut}_canvas`)}}function ps(){return X?d.jsx(x5,{},`${Ut}_text`):null}function Zt(){return j?d.jsx(a5,{},`${Ut}_annotations`):null}function Rt(){function Jt(Sn){return!!Sn?.page}if(!Jt(Tt))throw new Error("page is undefined");const Vt=typeof u=="function"?u(Tt):u;return d.jsxs(aE.Provider,{value:Tt,children:[Mt(),ps(),Zt(),Vt]})}function Pn(){return Ae?z===null||ge===void 0||ge===null?d.jsx(go,{type:"loading",children:typeof E=="function"?E():E}):z===!1||ge===!1?d.jsx(go,{type:"error",children:typeof y=="function"?y():y}):Rt():d.jsx(go,{type:"no-data",children:typeof C=="function"?C():C})}return d.jsx("div",{className:Ro(n,h),"data-page-number":Ae,ref:iE(S,Oe),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${$e}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...At,children:Pn()})}t5();Sa.workerSrc="pdf.worker.mjs";var th="Checkbox",[w5]=Ms(th),[S5,Ug]=w5(th);function A5(a){const{__scopeCheckbox:e,checked:t,children:n,defaultChecked:i,disabled:o,form:l,name:u,onCheckedChange:h,required:m,value:p="on",internal_do_not_use_render:g}=a,[y,w]=Ca({prop:t,defaultProp:i??!1,onChange:h,caller:th}),[A,S]=x.useState(null),[E,C]=x.useState(null),T=x.useRef(!1),N=A?!!l||!!A.closest("form"):!0,M={checked:y,disabled:o,setChecked:w,control:A,setControl:S,name:u,form:l,value:p,hasConsumerStoppedPropagationRef:T,required:m,defaultChecked:Aa(i)?!1:i,isFormControl:N,bubbleInput:E,setBubbleInput:C};return d.jsx(S5,{scope:e,...M,children:C5(g)?g(M):n})}var hE="CheckboxTrigger",fE=x.forwardRef(({__scopeCheckbox:a,onKeyDown:e,onClick:t,...n},i)=>{const{control:o,value:l,disabled:u,checked:h,required:m,setControl:p,setChecked:g,hasConsumerStoppedPropagationRef:y,isFormControl:w,bubbleInput:A}=Ug(hE,a),S=We(i,p),E=x.useRef(h);return x.useEffect(()=>{const C=o?.form;if(C){const T=()=>g(E.current);return C.addEventListener("reset",T),()=>C.removeEventListener("reset",T)}},[o,g]),d.jsx(ze.button,{type:"button",role:"checkbox","aria-checked":Aa(h)?"mixed":h,"aria-required":m,"data-state":bE(h),"data-disabled":u?"":void 0,disabled:u,value:l,...n,ref:S,onKeyDown:Se(e,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Se(t,C=>{g(T=>Aa(T)?!0:!T),A&&w&&(y.current=C.isPropagationStopped(),y.current||C.stopPropagation())})})});fE.displayName=hE;var mE=x.forwardRef((a,e)=>{const{__scopeCheckbox:t,name:n,checked:i,defaultChecked:o,required:l,disabled:u,value:h,onCheckedChange:m,form:p,...g}=a;return d.jsx(A5,{__scopeCheckbox:t,checked:i,defaultChecked:o,disabled:u,required:l,onCheckedChange:m,name:n,form:p,value:h,internal_do_not_use_render:({isFormControl:y})=>d.jsxs(d.Fragment,{children:[d.jsx(fE,{...g,ref:e,__scopeCheckbox:t}),y&&d.jsx(yE,{__scopeCheckbox:t})]})})});mE.displayName=th;var pE="CheckboxIndicator",gE=x.forwardRef((a,e)=>{const{__scopeCheckbox:t,forceMount:n,...i}=a,o=Ug(pE,t);return d.jsx(ts,{present:n||Aa(o.checked)||o.checked===!0,children:d.jsx(ze.span,{"data-state":bE(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...a.style}})})});gE.displayName=pE;var vE="CheckboxBubbleInput",yE=x.forwardRef(({__scopeCheckbox:a,...e},t)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:l,required:u,disabled:h,name:m,value:p,form:g,bubbleInput:y,setBubbleInput:w}=Ug(vE,a),A=We(t,w),S=cg(o),E=rg(n);x.useEffect(()=>{const T=y;if(!T)return;const N=window.HTMLInputElement.prototype,L=Object.getOwnPropertyDescriptor(N,"checked").set,I=!i.current;if(S!==o&&L){const O=new Event("click",{bubbles:I});T.indeterminate=Aa(o),L.call(T,Aa(o)?!1:o),T.dispatchEvent(O)}},[y,S,o,i]);const C=x.useRef(Aa(o)?!1:o);return d.jsx(ze.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??C.current,required:u,disabled:h,name:m,value:p,form:g,...e,tabIndex:-1,ref:A,style:{...e.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});yE.displayName=vE;function C5(a){return typeof a=="function"}function Aa(a){return a==="indeterminate"}function bE(a){return Aa(a)?"indeterminate":a?"checked":"unchecked"}function jp({className:a,...e}){return d.jsx(mE,{"data-slot":"checkbox",className:Pe("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...e,children:d.jsx(gE,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:d.jsx(zp,{className:"size-3.5"})})})}function E5(a,e){return x.useReducer((t,n)=>e[t][n]??t,a)}var Vg="ScrollArea",[xE]=Ms(Vg),[_5,Rs]=xE(Vg),wE=x.forwardRef((a,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:i,scrollHideDelay:o=600,...l}=a,[u,h]=x.useState(null),[m,p]=x.useState(null),[g,y]=x.useState(null),[w,A]=x.useState(null),[S,E]=x.useState(null),[C,T]=x.useState(0),[N,M]=x.useState(0),[L,I]=x.useState(!1),[O,P]=x.useState(!1),F=We(e,W=>h(W)),$=Mo(i);return d.jsx(_5,{scope:t,type:n,dir:$,scrollHideDelay:o,scrollArea:u,viewport:m,onViewportChange:p,content:g,onContentChange:y,scrollbarX:w,onScrollbarXChange:A,scrollbarXEnabled:L,onScrollbarXEnabledChange:I,scrollbarY:S,onScrollbarYChange:E,scrollbarYEnabled:O,onScrollbarYEnabledChange:P,onCornerWidthChange:T,onCornerHeightChange:M,children:d.jsx(ze.div,{dir:$,...l,ref:F,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":N+"px",...a.style}})})});wE.displayName=Vg;var SE="ScrollAreaViewport",AE=x.forwardRef((a,e)=>{const{__scopeScrollArea:t,children:n,nonce:i,...o}=a,l=Rs(SE,t),u=x.useRef(null),h=We(e,u,l.onViewportChange);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),d.jsx(ze.div,{"data-radix-scroll-area-viewport":"",...o,ref:h,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...a.style},children:d.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});AE.displayName=SE;var pi="ScrollAreaScrollbar",CE=x.forwardRef((a,e)=>{const{forceMount:t,...n}=a,i=Rs(pi,a.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=i,u=a.orientation==="horizontal";return x.useEffect(()=>(u?o(!0):l(!0),()=>{u?o(!1):l(!1)}),[u,o,l]),i.type==="hover"?d.jsx(T5,{...n,ref:e,forceMount:t}):i.type==="scroll"?d.jsx(N5,{...n,ref:e,forceMount:t}):i.type==="auto"?d.jsx(EE,{...n,ref:e,forceMount:t}):i.type==="always"?d.jsx($g,{...n,ref:e}):null});CE.displayName=pi;var T5=x.forwardRef((a,e)=>{const{forceMount:t,...n}=a,i=Rs(pi,a.__scopeScrollArea),[o,l]=x.useState(!1);return x.useEffect(()=>{const u=i.scrollArea;let h=0;if(u){const m=()=>{window.clearTimeout(h),l(!0)},p=()=>{h=window.setTimeout(()=>l(!1),i.scrollHideDelay)};return u.addEventListener("pointerenter",m),u.addEventListener("pointerleave",p),()=>{window.clearTimeout(h),u.removeEventListener("pointerenter",m),u.removeEventListener("pointerleave",p)}}},[i.scrollArea,i.scrollHideDelay]),d.jsx(ts,{present:t||o,children:d.jsx(EE,{"data-state":o?"visible":"hidden",...n,ref:e})})}),N5=x.forwardRef((a,e)=>{const{forceMount:t,...n}=a,i=Rs(pi,a.__scopeScrollArea),o=a.orientation==="horizontal",l=sh(()=>h("SCROLL_END"),100),[u,h]=E5("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(u==="idle"){const m=window.setTimeout(()=>h("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(m)}},[u,i.scrollHideDelay,h]),x.useEffect(()=>{const m=i.viewport,p=o?"scrollLeft":"scrollTop";if(m){let g=m[p];const y=()=>{const w=m[p];g!==w&&(h("SCROLL"),l()),g=w};return m.addEventListener("scroll",y),()=>m.removeEventListener("scroll",y)}},[i.viewport,o,h,l]),d.jsx(ts,{present:t||u!=="hidden",children:d.jsx($g,{"data-state":u==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Se(a.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:Se(a.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),EE=x.forwardRef((a,e)=>{const t=Rs(pi,a.__scopeScrollArea),{forceMount:n,...i}=a,[o,l]=x.useState(!1),u=a.orientation==="horizontal",h=sh(()=>{if(t.viewport){const m=t.viewport.offsetWidth<t.viewport.scrollWidth,p=t.viewport.offsetHeight<t.viewport.scrollHeight;l(u?m:p)}},10);return No(t.viewport,h),No(t.content,h),d.jsx(ts,{present:n||o,children:d.jsx($g,{"data-state":o?"visible":"hidden",...i,ref:e})})}),$g=x.forwardRef((a,e)=>{const{orientation:t="vertical",...n}=a,i=Rs(pi,a.__scopeScrollArea),o=x.useRef(null),l=x.useRef(0),[u,h]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=ME(u.viewport,u.content),p={...n,sizes:u,onSizesChange:h,hasThumb:m>0&&m<1,onThumbChange:y=>o.current=y,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:y=>l.current=y};function g(y,w){return O5(y,l.current,u,w)}return t==="horizontal"?d.jsx(j5,{...p,ref:e,onThumbPositionChange:()=>{if(i.viewport&&o.current){const y=i.viewport.scrollLeft,w=kw(y,u,i.dir);o.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollLeft=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollLeft=g(y,i.dir))}}):t==="vertical"?d.jsx(M5,{...p,ref:e,onThumbPositionChange:()=>{if(i.viewport&&o.current){const y=i.viewport.scrollTop,w=kw(y,u);o.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollTop=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollTop=g(y))}}):null}),j5=x.forwardRef((a,e)=>{const{sizes:t,onSizesChange:n,...i}=a,o=Rs(pi,a.__scopeScrollArea),[l,u]=x.useState(),h=x.useRef(null),m=We(e,h,o.onScrollbarXChange);return x.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),d.jsx(TE,{"data-orientation":"horizontal",...i,ref:m,sizes:t,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":nh(t)+"px",...a.style},onThumbPointerDown:p=>a.onThumbPointerDown(p.x),onDragScroll:p=>a.onDragScroll(p.x),onWheelScroll:(p,g)=>{if(o.viewport){const y=o.viewport.scrollLeft+p.deltaX;a.onWheelScroll(y),DE(y,g)&&p.preventDefault()}},onResize:()=>{h.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Ad(l.paddingLeft),paddingEnd:Ad(l.paddingRight)}})}})}),M5=x.forwardRef((a,e)=>{const{sizes:t,onSizesChange:n,...i}=a,o=Rs(pi,a.__scopeScrollArea),[l,u]=x.useState(),h=x.useRef(null),m=We(e,h,o.onScrollbarYChange);return x.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),d.jsx(TE,{"data-orientation":"vertical",...i,ref:m,sizes:t,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":nh(t)+"px",...a.style},onThumbPointerDown:p=>a.onThumbPointerDown(p.y),onDragScroll:p=>a.onDragScroll(p.y),onWheelScroll:(p,g)=>{if(o.viewport){const y=o.viewport.scrollTop+p.deltaY;a.onWheelScroll(y),DE(y,g)&&p.preventDefault()}},onResize:()=>{h.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Ad(l.paddingTop),paddingEnd:Ad(l.paddingBottom)}})}})}),[R5,_E]=xE(pi),TE=x.forwardRef((a,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:i,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:h,onDragScroll:m,onWheelScroll:p,onResize:g,...y}=a,w=Rs(pi,t),[A,S]=x.useState(null),E=We(e,F=>S(F)),C=x.useRef(null),T=x.useRef(""),N=w.viewport,M=n.content-n.viewport,L=Mn(p),I=Mn(h),O=sh(g,10);function P(F){if(C.current){const $=F.clientX-C.current.left,W=F.clientY-C.current.top;m({x:$,y:W})}}return x.useEffect(()=>{const F=$=>{const W=$.target;A?.contains(W)&&L($,M)};return document.addEventListener("wheel",F,{passive:!1}),()=>document.removeEventListener("wheel",F,{passive:!1})},[N,A,M,L]),x.useEffect(I,[n,I]),No(A,O),No(w.content,O),d.jsx(R5,{scope:t,scrollbar:A,hasThumb:i,onThumbChange:Mn(o),onThumbPointerUp:Mn(l),onThumbPositionChange:I,onThumbPointerDown:Mn(u),children:d.jsx(ze.div,{...y,ref:E,style:{position:"absolute",...y.style},onPointerDown:Se(a.onPointerDown,F=>{F.button===0&&(F.target.setPointerCapture(F.pointerId),C.current=A.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),P(F))}),onPointerMove:Se(a.onPointerMove,P),onPointerUp:Se(a.onPointerUp,F=>{const $=F.target;$.hasPointerCapture(F.pointerId)&&$.releasePointerCapture(F.pointerId),document.body.style.webkitUserSelect=T.current,w.viewport&&(w.viewport.style.scrollBehavior=""),C.current=null})})})}),Sd="ScrollAreaThumb",NE=x.forwardRef((a,e)=>{const{forceMount:t,...n}=a,i=_E(Sd,a.__scopeScrollArea);return d.jsx(ts,{present:t||i.hasThumb,children:d.jsx(D5,{ref:e,...n})})}),D5=x.forwardRef((a,e)=>{const{__scopeScrollArea:t,style:n,...i}=a,o=Rs(Sd,t),l=_E(Sd,t),{onThumbPositionChange:u}=l,h=We(e,g=>l.onThumbChange(g)),m=x.useRef(void 0),p=sh(()=>{m.current&&(m.current(),m.current=void 0)},100);return x.useEffect(()=>{const g=o.viewport;if(g){const y=()=>{if(p(),!m.current){const w=L5(g,u);m.current=w,u()}};return u(),g.addEventListener("scroll",y),()=>g.removeEventListener("scroll",y)}},[o.viewport,p,u]),d.jsx(ze.div,{"data-state":l.hasThumb?"visible":"hidden",...i,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Se(a.onPointerDownCapture,g=>{const w=g.target.getBoundingClientRect(),A=g.clientX-w.left,S=g.clientY-w.top;l.onThumbPointerDown({x:A,y:S})}),onPointerUp:Se(a.onPointerUp,l.onThumbPointerUp)})});NE.displayName=Sd;var Gg="ScrollAreaCorner",jE=x.forwardRef((a,e)=>{const t=Rs(Gg,a.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?d.jsx(k5,{...a,ref:e}):null});jE.displayName=Gg;var k5=x.forwardRef((a,e)=>{const{__scopeScrollArea:t,...n}=a,i=Rs(Gg,t),[o,l]=x.useState(0),[u,h]=x.useState(0),m=!!(o&&u);return No(i.scrollbarX,()=>{const p=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(p),h(p)}),No(i.scrollbarY,()=>{const p=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(p),l(p)}),m?d.jsx(ze.div,{...n,ref:e,style:{width:o,height:u,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...a.style}}):null});function Ad(a){return a?parseInt(a,10):0}function ME(a,e){const t=a/e;return isNaN(t)?0:t}function nh(a){const e=ME(a.viewport,a.content),t=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,n=(a.scrollbar.size-t)*e;return Math.max(n,18)}function O5(a,e,t,n="ltr"){const i=nh(t),o=i/2,l=e||o,u=i-l,h=t.scrollbar.paddingStart+l,m=t.scrollbar.size-t.scrollbar.paddingEnd-u,p=t.content-t.viewport,g=n==="ltr"?[0,p]:[p*-1,0];return RE([h,m],g)(a)}function kw(a,e,t="ltr"){const n=nh(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-i,l=e.content-e.viewport,u=o-n,h=t==="ltr"?[0,l]:[l*-1,0],m=Kl(a,h);return RE([0,l],[0,u])(m)}function RE(a,e){return t=>{if(a[0]===a[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(a[1]-a[0]);return e[0]+n*(t-a[0])}}function DE(a,e){return a>0&&a<e}var L5=(a,e=()=>{})=>{let t={left:a.scrollLeft,top:a.scrollTop},n=0;return(function i(){const o={left:a.scrollLeft,top:a.scrollTop},l=t.left!==o.left,u=t.top!==o.top;(l||u)&&e(),t=o,n=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(n)};function sh(a,e){const t=Mn(a),n=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),x.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function No(a,e){const t=Mn(e);Rn(()=>{let n=0;if(a){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return i.observe(a),()=>{window.cancelAnimationFrame(n),i.unobserve(a)}}},[a,t])}var P5=wE,I5=AE,B5=jE;function Ow({className:a,children:e,...t}){return d.jsxs(P5,{"data-slot":"scroll-area",className:Pe("relative",a),...t,children:[d.jsx(I5,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),d.jsx(z5,{}),d.jsx(B5,{})]})}function z5({className:a,orientation:e="vertical",...t}){return d.jsx(CE,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Pe("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",a),...t,children:d.jsx(NE,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}Sa.workerSrc=`https://unpkg.com/pdfjs-dist@ ${Lg}/build/pdf.worker.min.mjs`;function F5({fileUrl:a,book:e,annotations:t,onAddAnnotation:n,onUpdateAnnotation:i,onDeleteAnnotation:o,onDownloadFile:l,onClose:u}){const[h,m]=x.useState(0),[p,g]=x.useState(1),[y,w]=x.useState(0),[A,S]=x.useState(!1),[E,C]=x.useState(!1),[T,N]=x.useState(!0),[M,L]=x.useState("single"),[I,O]=x.useState(!1),[P,F]=x.useState({scale:1,panX:0,panY:0}),[$,W]=x.useState(!1),[ie,le]=x.useState(!1),[G,fe]=x.useState("select"),[R,U]=x.useState(null),[H,z]=x.useState(null),[ce,j]=x.useState(null),[k,B]=x.useState(!1),[X,K]=x.useState(!0),[oe,J]=x.useState(!1),Y=x.useRef(null),se=x.useRef(null),pe=x.useRef(null),xe=x.useRef(null),ge=x.useRef(null),Ve=x.useRef(0),Oe=x.useRef(null),Z=x.useRef(null);x.useEffect(()=>{const re=()=>{const Ee=window.innerWidth<768;B(Ee),O(!Ee),Ee&&P.scale===1&&F({scale:.9,panX:0,panY:0})};re(),window.addEventListener("resize",re);const ye=localStorage.getItem(`pdf-progress-${e.id}`);return ye&&g(parseInt(ye,10)),()=>{window.removeEventListener("resize",re),Oe.current&&cancelAnimationFrame(Oe.current)}},[e.id,P.scale]);const Ae=x.useCallback(()=>{Z.current&&clearTimeout(Z.current),K(!0),Z.current=setTimeout(()=>{!$&&!ie&&G!=="note"&&K(!1)},3e3)},[$,ie,G]);x.useEffect(()=>{const re=()=>{const ye=!!document.fullscreenElement;S(ye),ye&&!oe&&(J(!0),we.success("",{duration:3e3})),Ae()};return document.addEventListener("fullscreenchange",re),()=>document.removeEventListener("fullscreenchange",re)},[oe,Ae]);const Ge=x.useCallback((re,ye,Ee)=>{if(!Y.current||!se.current)return{x:re,y:ye};const et=Y.current.getBoundingClientRect(),pt=se.current.offsetWidth*Ee,tt=se.current.offsetHeight*Ee,Dt=Math.max(0,(pt-et.width)/2+50),kt=Math.max(0,(tt-et.height)/2+50);return pt<=et.width?re=0:re=Math.max(-Dt,Math.min(Dt,re)),tt<=et.height?ye=0:ye=Math.max(-kt,Math.min(kt,ye)),{x:re,y:ye}},[]),$e=x.useCallback(({numPages:re})=>{m(re)},[]),ut=x.useCallback(()=>{we.error("PDF ")},[]),rn=x.useCallback(re=>{const ye=Math.max(1,Math.min(re,h));g(ye),localStorage.setItem(`pdf-progress-${e.id}`,String(ye)),F(Ee=>({...Ee,panX:0,panY:0}))},[h,e.id]),Tt=()=>rn(p-1),At=()=>rn(p+1),Ut=()=>F({scale:k?.9:1,panX:0,panY:0}),Mt=x.useCallback(async()=>{try{document.fullscreenElement?await document.exitFullscreen():await Y.current?.requestFullscreen()}catch{we.error("")}},[]),ps=re=>{if(Ae(),re.touches.length===2){W(!0);const ye=re.touches[0].pageX-re.touches[1].pageX,Ee=re.touches[0].pageY-re.touches[1].pageY;Ve.current=Math.hypot(ye,Ee),xe.current={x:(re.touches[0].pageX+re.touches[1].pageX)/2,y:(re.touches[0].pageY+re.touches[1].pageY)/2,time:Date.now(),scale:P.scale,panX:P.panX,panY:P.panY}}else if(re.touches.length===1){const ye=re.touches[0];if(xe.current={x:ye.clientX,y:ye.clientY,time:Date.now(),scale:P.scale,panX:P.panX,panY:P.panY},ge.current={x:ye.clientX,y:ye.clientY},G==="note"&&se.current){const Ee=se.current.getBoundingClientRect(),et=(ye.clientX-Ee.left-P.panX)/(Ee.width*P.scale),pt=(ye.clientY-Ee.top-P.panY)/(Ee.height*P.scale);et>=0&&et<=1&&pt>=0&&pt<=1&&j({x:et,y:pt,content:""})}}},Zt=re=>{if(re.touches.length>1&&re.preventDefault(),re.touches.length===2&&xe.current){const ye=re.touches[0].pageX-re.touches[1].pageX,Ee=re.touches[0].pageY-re.touches[1].pageY,pt=Math.hypot(ye,Ee)/Ve.current,tt=Math.max(.5,Math.min(5,xe.current.scale*pt)),Dt=(re.touches[0].pageX+re.touches[1].pageX)/2,kt=(re.touches[0].pageY+re.touches[1].pageY)/2,un=tt/P.scale,Un=Dt-(Dt-P.panX)*un,Fe=kt-(kt-P.panY)*un;Oe.current&&cancelAnimationFrame(Oe.current),Oe.current=requestAnimationFrame(()=>{F({scale:tt,panX:Un,panY:Fe})})}else if(re.touches.length===1&&xe.current&&ge.current&&G!=="note"&&G!=="highlight"){const ye=re.touches[0],Ee=ye.clientX-ge.current.x,et=ye.clientY-ge.current.y;if((Math.abs(ye.clientX-xe.current.x)>5||Math.abs(ye.clientY-xe.current.y)>5)&&le(!0),ie||Math.abs(Ee)>0||Math.abs(et)>0){const pt=P.panX+Ee,tt=P.panY+et;Oe.current&&cancelAnimationFrame(Oe.current),Oe.current=requestAnimationFrame(()=>{F(Dt=>({...Dt,panX:pt,panY:tt}))}),ge.current={x:ye.clientX,y:ye.clientY}}}},Rt=re=>{if(re.touches.length===0){const ye=$,Ee=ie,et=xe.current;if(W(!1),le(!1),G==="highlight"){setTimeout(()=>{Vt()},50),xe.current=null,ge.current=null;return}if(G==="note"&&et&&!ye&&!Ee){const pt=Date.now()-et.time,tt=re.changedTouches[0],Dt=Math.abs(tt.clientX-et.x),kt=Math.abs(tt.clientY-et.y);pt<300&&Dt<10&&kt<10&&ce&&fe("select")}if(!G||G==="select"||G==="move"){if(et&&!ye&&!Ee){const pt=Date.now()-et.time,tt=re.changedTouches[0],Dt=Math.abs(tt.clientX-et.x),kt=Math.abs(tt.clientY-et.y);if(pt<300&&Dt<20&&kt<20){const un=Date.now();window.lastClickTime&&un-window.lastClickTime<300?(re.preventDefault(),P.scale>1.2?F({scale:1,panX:0,panY:0}):F({scale:2.5,panX:0,panY:0}),window.lastClickTime=0):window.lastClickTime=un}if(pt<300&&Dt<10&&kt<10){const un=window.innerWidth;tt.clientX<un*.15&&p>1?Tt():tt.clientX>un*.85&&p<h&&At()}}if(!ye){const pt=Ge(P.panX,P.panY,P.scale);(pt.x!==P.panX||pt.y!==P.panY)&&F(tt=>({...tt,panX:pt.x,panY:pt.y}))}}xe.current=null,ge.current=null}else if(re.touches.length===1&&$){W(!1);const ye=re.touches[0];xe.current={x:ye.clientX,y:ye.clientY,time:Date.now(),scale:P.scale,panX:P.panX,panY:P.panY},ge.current={x:ye.clientX,y:ye.clientY}}},Pn=re=>{if(re.ctrlKey||re.metaKey){re.preventDefault();const ye=re.deltaY>0?-.1:.1,Ee=Math.max(.5,Math.min(5,P.scale+ye));F(et=>({...et,scale:Ee}))}},Jt=()=>{ce&&ce.content.trim()&&(n({bookId:e.id,page:p,x:ce.x,y:ce.y,content:ce.content.trim(),color:"#fbbf24",type:"note"}),j(null),we.success(""))},Vt=x.useCallback(()=>{if(G!=="highlight")return;const re=window.getSelection();if(!re||re.rangeCount===0)return;const ye=re.getRangeAt(0),Ee=re.toString().trim();if(!Ee||Ee.length<1)return;const et=ye.startContainer.parentElement?.closest("[data-page-number]");if(!et)return;const pt=parseInt(et.getAttribute("data-page-number")||String(p),10),tt=et.getBoundingClientRect(),Dt=Array.from(ye.getClientRects()).map(kt=>({left:(kt.left-tt.left)/tt.width*100,top:(kt.top-tt.top)/tt.height*100,width:kt.width/tt.width*100,height:kt.height/tt.height*100}));Dt.length!==0&&(n({bookId:e.id,page:pt,type:"highlight",content:"",color:"#fef08a",rects:Dt,quote:Ee,x:0,y:0}),re.removeAllRanges(),fe("select"),we.success(""))},[G,p,e.id,n]),Sn=x.useCallback(re=>{o(re),U(null),we.success("")},[o]);x.useEffect(()=>{const re=ye=>{if(ye.target instanceof HTMLTextAreaElement){ye.key==="Escape"&&ye.target.blur();return}switch(ye.key){case"ArrowRight":case" ":ye.preventDefault(),At();break;case"ArrowLeft":ye.preventDefault(),Tt();break;case"+":case"=":ye.preventDefault(),F(Ee=>({...Ee,scale:Math.min(5,Ee.scale+.2)}));break;case"-":ye.preventDefault(),F(Ee=>({...Ee,scale:Math.max(.5,Ee.scale-.2)}));break;case"0":ye.preventDefault(),Ut();break;case"Escape":document.fullscreenElement?document.exitFullscreen():u&&u();break}};return window.addEventListener("keydown",re),()=>window.removeEventListener("keydown",re)},[At,Tt,u]);const cn=x.useMemo(()=>t.filter(re=>re.page===p),[t,p]),Ds=Pe("flex h-full w-full overflow-hidden relative bg-background touch-manipulation",A&&"fixed inset-0 z-50 bg-black",G!=="highlight"&&"select-none");return M==="thumbnails"?d.jsxs("div",{className:"flex flex-col h-full bg-background",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 border-b h-14 shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[u&&d.jsx(he,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:u,children:d.jsx(np,{className:"h-5 w-5"})}),d.jsxs(he,{variant:"outline",size:"sm",onClick:()=>L("single"),className:"h-9",children:[d.jsx(Oo,{className:"h-4 w-4 mr-2"}),""]})]}),d.jsx("span",{className:"font-medium text-sm truncate max-w-[200px]",children:e.title}),d.jsxs("span",{className:"text-xs text-muted-foreground",children:[h," "]})]}),d.jsx(Ow,{className:"flex-1 bg-muted/20",children:d.jsx("div",{className:"p-4 pb-20",children:d.jsx(Wm,{file:a,onLoadSuccess:$e,onLoadError:ut,children:d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:Array.from({length:h},(re,ye)=>ye+1).map(re=>d.jsxs("button",{onClick:()=>{g(re),L("single")},className:"relative aspect-[3/4] rounded-lg overflow-hidden bg-white shadow-sm hover:shadow-md hover:ring-2 hover:ring-primary transition-all active:scale-95",children:[d.jsx(Km,{pageNumber:re,scale:.15,renderTextLayer:!1,renderAnnotationLayer:!1}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity flex items-end justify-center pb-2",children:d.jsx("span",{className:"text-white text-xs font-medium",children:re})}),p===re&&d.jsx("div",{className:"absolute inset-0 ring-2 ring-primary ring-inset"})]},re))})})})})]}):d.jsxs("div",{ref:Y,className:Ds,onClick:Ae,children:[d.jsx("div",{className:Pe("absolute top-0 left-0 right-0 z-40 bg-background/95 backdrop-blur-md border-b transition-transform duration-300 ease-out",A||X?"translate-y-0":"-translate-y-full",A&&"bg-black/90 border-white/10 text-white"),children:d.jsxs("div",{className:"flex items-center justify-between h-14 px-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[u&&!A&&d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-white/10",onClick:u,children:d.jsx(np,{className:"h-4 w-4"})}),d.jsxs(he,{variant:"ghost",size:"sm",className:"h-8 gap-1 hover:bg-white/10",onClick:()=>L("thumbnails"),children:[d.jsx(lx,{className:"h-4 w-4"}),!k&&""]})]}),d.jsx("div",{className:"flex items-center gap-4",children:d.jsxs("div",{className:"flex items-center gap-1 bg-muted/50 rounded-full px-3 py-1",children:[d.jsx(he,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-white/20",onClick:Tt,disabled:p<=1,children:d.jsx(bo,{className:"h-4 w-4"})}),d.jsxs("span",{className:"text-sm font-medium tabular-nums min-w-[60px] text-center",children:[p,"/",h]}),d.jsx(he,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-white/20",onClick:At,disabled:p>=h,children:d.jsx(ql,{className:"h-4 w-4"})})]})}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("div",{className:"flex items-center gap-1 bg-muted/50 rounded-full px-2 py-1 mr-2",children:[d.jsx(he,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-white/20",onClick:()=>F(re=>({...re,scale:Math.max(.5,re.scale-.2)})),children:d.jsx(zM,{className:"h-4 w-4"})}),d.jsxs("span",{className:"text-xs w-10 text-center font-mono",children:[Math.round(P.scale*100),"%"]}),d.jsx(he,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-white/20",onClick:()=>F(re=>({...re,scale:Math.min(5,re.scale+.2)})),children:d.jsx(IM,{className:"h-4 w-4"})})]}),d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-white/10",onClick:Mt,children:A?d.jsx(Gj,{className:"h-4 w-4"}):d.jsx(sp,{className:"h-4 w-4"})})]})]})}),d.jsxs("div",{className:Pe("absolute bottom-6 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-background/95 backdrop-blur-md border rounded-full shadow-lg px-4 py-2 transition-all duration-300 ease-out",X||G!=="select"?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none",A&&"bg-black/90 border-white/10 text-white bottom-10"),children:[d.jsx(he,{variant:G==="move"?"default":"ghost",size:"icon",className:"h-9 w-9 rounded-full",onClick:()=>fe(G==="move"?"select":"move"),title:"/",children:d.jsx(Wj,{className:"h-4 w-4"})}),d.jsx(he,{variant:G==="highlight"?"default":"ghost",size:"icon",className:Pe("h-9 w-9 rounded-full relative",G==="highlight"&&"ring-2 ring-primary ring-offset-2"),onClick:()=>fe(G==="highlight"?"select":"highlight"),title:"",children:d.jsx(Mj,{className:"h-4 w-4"})}),d.jsx(he,{variant:G==="note"?"default":"ghost",size:"icon",className:Pe("h-9 w-9 rounded-full relative",G==="note"&&"ring-2 ring-primary ring-offset-2"),onClick:()=>fe(G==="note"?"select":"note"),title:"",children:d.jsx(oo,{className:"h-4 w-4"})}),d.jsx("div",{className:"w-px h-4 bg-border mx-1"}),d.jsx(he,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full",onClick:Ut,title:"",children:d.jsx(Nj,{className:"h-4 w-4"})}),d.jsx(he,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full",onClick:()=>w(re=>(re+90)%360),children:d.jsx(pM,{className:"h-4 w-4"})})]}),G==="highlight"&&d.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-30 bg-primary text-primary-foreground px-4 py-2 rounded-full text-sm shadow-lg flex items-center gap-2 animate-in fade-in slide-in-from-top-2",children:[d.jsx("span",{children:""}),d.jsx("button",{onClick:()=>fe("select"),className:"hover:opacity-80 p-1",children:d.jsx(Fn,{className:"h-3 w-3"})})]}),G==="note"&&d.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-30 bg-amber-500 text-white px-4 py-2 rounded-full text-sm shadow-lg flex items-center gap-2 animate-in fade-in slide-in-from-top-2",children:[d.jsx("span",{children:""}),d.jsx("button",{onClick:()=>{fe("select"),j(null)},className:"hover:opacity-80 p-1",children:d.jsx(Fn,{className:"h-3 w-3"})})]}),d.jsx("div",{ref:pe,className:Pe("flex-1 overflow-hidden relative bg-muted/30",G==="note"?"cursor-crosshair":G==="highlight"?"cursor-text select-text":"cursor-grab active:cursor-grabbing",A&&"bg-black"),onTouchStart:ps,onTouchMove:Zt,onTouchEnd:Rt,onMouseUp:G==="highlight"?Vt:void 0,onWheel:Pn,children:d.jsx("div",{className:"w-full h-full flex items-center justify-center will-change-transform",style:{transform:`translate3d(${P.panX}px, ${P.panY}px, 0) scale(${P.scale})`,transformOrigin:"center center",transition:$?"none":"transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:d.jsx(Wm,{file:a,onLoadSuccess:$e,onLoadError:ut,loading:d.jsx("div",{className:"flex items-center justify-center h-[50vh]",children:d.jsx("div",{className:"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),children:d.jsxs("div",{ref:se,className:"relative shadow-2xl bg-white",style:{transform:`rotate(${y}deg)`,transformOrigin:"center center"},onClick:re=>{if(G==="note"&&!ie){const ye=re.currentTarget.getBoundingClientRect(),Ee=(re.clientX-ye.left)/ye.width,et=(re.clientY-ye.top)/ye.height;j({x:Ee,y:et,content:""})}},"data-page-number":p,children:[d.jsx(Km,{pageNumber:p,scale:1.5,rotate:y,renderTextLayer:G==="highlight",renderAnnotationLayer:!1,className:"shadow-2xl",canvasBackground:"white"}),G!=="highlight"&&d.jsx("div",{className:"absolute inset-0 z-10"}),cn.map(re=>{if(re.type==="highlight"&&re.rects)return d.jsx("div",{className:"absolute inset-0 pointer-events-none",children:re.rects.map((ye,Ee)=>d.jsx("div",{className:"absolute bg-yellow-300/60 pointer-events-auto cursor-pointer hover:bg-yellow-400/70 transition-all border-b-2 border-yellow-500/50",style:{left:`${ye.left}%`,top:`${ye.top}%`,width:`${ye.width}%`,height:`${ye.height}%`},onClick:et=>{et.stopPropagation(),U(re)}},Ee))},re.id);if(re.type==="note"){const ye=H===re.id;return d.jsx("div",{className:"absolute z-20",style:{left:`${re.x*100}%`,top:`${re.y*100}%`,transform:"translate(-50%, -50%)"},children:ye?d.jsxs("div",{className:"bg-white border-2 border-primary rounded-lg shadow-xl p-2 w-48 animate-in zoom-in-95",onClick:Ee=>Ee.stopPropagation(),children:[d.jsx(Vs,{autoFocus:!0,defaultValue:re.content,className:"min-h-[80px] text-sm resize-none border-0 focus-visible:ring-1",onBlur:Ee=>{i(re.id,Ee.target.value),z(null)},onKeyDown:Ee=>{Ee.key==="Enter"&&Ee.metaKey&&(i(re.id,Ee.target.value),z(null))}}),d.jsx("div",{className:"flex justify-end mt-2",children:d.jsxs(he,{size:"sm",className:"h-7",onClick:()=>z(null),children:[d.jsx(zp,{className:"h-3 w-3 mr-1"}),""]})})]}):d.jsxs("div",{className:"group relative",onClick:Ee=>{Ee.stopPropagation(),z(re.id)},children:[d.jsx("div",{className:"w-8 h-8 bg-amber-400 rounded-full shadow-lg flex items-center justify-center cursor-pointer hover:scale-110 transition-transform border-2 border-white ring-2 ring-amber-400/30",children:d.jsx(oo,{className:"h-4 w-4 text-amber-900"})}),re.content&&d.jsx("div",{className:"absolute left-10 top-0 bg-white border shadow-lg rounded-lg p-2 w-48 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-30",children:d.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:re.content})})]})},re.id)}return null}),ce&&d.jsx("div",{className:"absolute z-30",style:{left:`${ce.x*100}%`,top:`${ce.y*100}%`,transform:"translate(-50%, -50%)"},onClick:re=>re.stopPropagation(),children:d.jsxs("div",{className:"bg-white border-2 border-amber-400 rounded-lg shadow-xl p-3 w-56 animate-in zoom-in-95",children:[d.jsx(Vs,{autoFocus:!0,placeholder:"...",className:"min-h-[100px] text-sm resize-none border-0 focus-visible:ring-1",value:ce.content,onChange:re=>j({...ce,content:re.target.value}),onKeyDown:re=>{re.key==="Enter"&&re.metaKey&&Jt(),re.key==="Escape"&&(j(null),fe("select"))}}),d.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[d.jsx(he,{size:"sm",variant:"ghost",className:"h-7",onClick:()=>{j(null),fe("select")},children:""}),d.jsx(he,{size:"sm",className:"h-7 bg-amber-500 hover:bg-amber-600",onClick:Jt,children:""})]})]})})]})})})}),!k&&I&&d.jsxs("div",{className:"w-56 border-l bg-background/95 backdrop-blur-md flex flex-col shrink-0 h-full absolute right-0 top-14 bottom-0 z-30 shadow-xl",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[d.jsx("span",{className:"font-semibold text-sm",children:""}),d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>O(!1),children:d.jsx(Fn,{className:"h-4 w-4"})})]}),d.jsx(Ow,{className:"flex-1",children:d.jsx(Wm,{file:a,children:d.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:h},(re,ye)=>ye+1).map(re=>d.jsxs("button",{onClick:()=>rn(re),className:Pe("w-full relative aspect-[3/4] rounded-lg overflow-hidden transition-all border-2 hover:opacity-100",p===re?"border-primary opacity-100 ring-1 ring-primary":"border-transparent opacity-60"),children:[d.jsx(Km,{pageNumber:re,scale:.12,renderTextLayer:!1,renderAnnotationLayer:!1}),d.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-black/60 text-white text-[10px] py-0.5 text-center font-medium",children:re})]},re))})})})]}),k&&!A&&d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-background/95 backdrop-blur-lg border-t flex items-center justify-around z-30 pb-safe",children:[d.jsxs("button",{onClick:()=>L("thumbnails"),className:"flex flex-col items-center gap-1 text-muted-foreground active:scale-95 transition-transform",children:[d.jsx(lx,{className:"h-5 w-5"}),d.jsx("span",{className:"text-[10px]",children:""})]}),d.jsx("button",{onClick:Tt,disabled:p<=1,className:"p-3 disabled:opacity-30 active:scale-95 transition-transform",children:d.jsx(bo,{className:"h-6 w-6"})}),d.jsxs("button",{onClick:()=>O(!0),className:"flex flex-col items-center px-4 active:scale-95 transition-transform",children:[d.jsx("span",{className:"text-lg font-bold tabular-nums leading-none",children:p}),d.jsxs("span",{className:"text-[10px] text-muted-foreground leading-tight",children:["/",h]})]}),d.jsx("button",{onClick:At,disabled:p>=h,className:"p-3 disabled:opacity-30 active:scale-95 transition-transform",children:d.jsx(ql,{className:"h-6 w-6"})}),d.jsxs("button",{onClick:Mt,className:"flex flex-col items-center gap-1 text-muted-foreground active:scale-95 transition-transform",children:[d.jsx(sp,{className:"h-5 w-5"}),d.jsx("span",{className:"text-[10px]",children:""})]})]}),d.jsx(vn,{open:!!R,onOpenChange:()=>U(null),children:d.jsxs(yn,{className:"sm:max-w-md",children:[d.jsx(bn,{children:d.jsxs(xn,{className:"flex items-center gap-2",children:[d.jsx(oo,{className:"h-5 w-5 text-amber-500"}),""]})}),d.jsxs("div",{className:"mt-4",children:[d.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[" ",R?.page," "]}),R?.quote&&d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4 rounded-r-lg",children:d.jsxs("p",{className:"text-sm text-yellow-900 italic line-clamp-3",children:['"',R.quote,'"']})}),d.jsx("div",{className:"bg-muted p-4 rounded-lg mb-4",children:d.jsx("p",{className:"whitespace-pre-wrap text-sm",children:R?.content||""})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(he,{variant:"outline",className:"flex-1",onClick:()=>{z(R?.id||null),U(null)},children:[d.jsx(rM,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(he,{variant:"destructive",className:"flex-1",onClick:()=>R&&Sn(R.id),children:[d.jsx(Us,{className:"h-4 w-4 mr-2"}),""]})]})]})]})}),d.jsx(vn,{open:E,onOpenChange:C,children:d.jsxs(yn,{children:[d.jsx(bn,{children:d.jsxs(xn,{className:"flex items-center gap-2",children:[d.jsx(Aj,{className:"h-5 w-5"}),""]})}),d.jsxs("div",{className:"py-4 space-y-4",children:[d.jsxs("p",{className:"text-sm text-muted-foreground",children:["",e.title,""]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(jp,{id:"include-annotations",checked:T,onCheckedChange:re=>N(re)}),d.jsxs("label",{htmlFor:"include-annotations",className:"text-sm font-medium",children:[" (",t.length,")"]})]})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx(he,{variant:"outline",onClick:()=>C(!1),children:""}),d.jsxs(he,{onClick:()=>{l?.(T),C(!1)},children:[d.jsx(Xl,{className:"h-4 w-4 mr-2"}),""]})]})]})})]})}function to(a,e,t){let n=t.initialDeps??[],i,o=!0;function l(){var u,h,m;let p;t.key&&((u=t.debug)!=null&&u.call(t))&&(p=Date.now());const g=a();if(!(g.length!==n.length||g.some((A,S)=>n[S]!==A)))return i;n=g;let w;if(t.key&&((h=t.debug)!=null&&h.call(t))&&(w=Date.now()),i=e(...g),t.key&&((m=t.debug)!=null&&m.call(t))){const A=Math.round((Date.now()-p)*100)/100,S=Math.round((Date.now()-w)*100)/100,E=S/16,C=(T,N)=>{for(T=String(T);T.length<N;)T=" "+T;return T};console.info(`%c ${C(S,5)} /${C(A,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*E,120))}deg 100% 31%);`,t?.key)}return t?.onChange&&!(o&&t.skipInitialOnChange)&&t.onChange(i),o=!1,i}return l.updateDeps=u=>{n=u},l}function Lw(a,e){if(a===void 0)throw new Error("Unexpected undefined");return a}const H5=(a,e)=>Math.abs(a-e)<1.01,U5=(a,e,t)=>{let n;return function(...i){a.clearTimeout(n),n=a.setTimeout(()=>e.apply(this,i),t)}},Pw=a=>{const{offsetWidth:e,offsetHeight:t}=a;return{width:e,height:t}},V5=a=>a,$5=a=>{const e=Math.max(a.startIndex-a.overscan,0),t=Math.min(a.endIndex+a.overscan,a.count-1),n=[];for(let i=e;i<=t;i++)n.push(i);return n},G5=(a,e)=>{const t=a.scrollElement;if(!t)return;const n=a.targetWindow;if(!n)return;const i=l=>{const{width:u,height:h}=l;e({width:Math.round(u),height:Math.round(h)})};if(i(Pw(t)),!n.ResizeObserver)return()=>{};const o=new n.ResizeObserver(l=>{const u=()=>{const h=l[0];if(h?.borderBoxSize){const m=h.borderBoxSize[0];if(m){i({width:m.inlineSize,height:m.blockSize});return}}i(Pw(t))};a.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(u):u()});return o.observe(t,{box:"border-box"}),()=>{o.unobserve(t)}},Iw={passive:!0},Bw=typeof window>"u"?!0:"onscrollend"in window,Y5=(a,e)=>{const t=a.scrollElement;if(!t)return;const n=a.targetWindow;if(!n)return;let i=0;const o=a.options.useScrollendEvent&&Bw?()=>{}:U5(n,()=>{e(i,!1)},a.options.isScrollingResetDelay),l=p=>()=>{const{horizontal:g,isRtl:y}=a.options;i=g?t.scrollLeft*(y&&-1||1):t.scrollTop,o(),e(i,p)},u=l(!0),h=l(!1);t.addEventListener("scroll",u,Iw);const m=a.options.useScrollendEvent&&Bw;return m&&t.addEventListener("scrollend",h,Iw),()=>{t.removeEventListener("scroll",u),m&&t.removeEventListener("scrollend",h)}},q5=(a,e,t)=>{if(e?.borderBoxSize){const n=e.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return a[t.options.horizontal?"offsetWidth":"offsetHeight"]},X5=(a,{adjustments:e=0,behavior:t},n)=>{var i,o;const l=a+e;(o=(i=n.scrollElement)==null?void 0:i.scrollTo)==null||o.call(i,{[n.options.horizontal?"left":"top"]:l,behavior:t})};class W5{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(i=>{i.forEach(o=>{const l=()=>{this._measureElement(o.target,o)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var i;(i=n())==null||i.disconnect(),t=null},observe:i=>{var o;return(o=n())==null?void 0:o.observe(i,{box:"border-box"})},unobserve:i=>{var o;return(o=n())==null?void 0:o.unobserve(i)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,i])=>{typeof i>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:V5,rangeExtractor:$5,onChange:()=>{},measureElement:q5,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var n,i;(i=(n=this.options).onChange)==null||i.call(n,this,t)},this.maybeNotify=to(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=o,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const i=new Map,o=new Map;for(let l=n-1;l>=0;l--){const u=t[l];if(i.has(u.lane))continue;const h=o.get(u.lane);if(h==null||u.end>h.end?o.set(u.lane,u):u.end<h.end&&i.set(u.lane,!0),i.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((l,u)=>l.end===u.end?l.index-u.index:l.end-u.end)[0]:void 0},this.getMeasurementOptions=to(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(t,n,i,o,l,u)=>(this.prevLanes!==void 0&&this.prevLanes!==u&&(this.lanesChangedFlag=!0),this.prevLanes=u,this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:i,getItemKey:o,enabled:l,lanes:u}),{key:!1}),this.getMeasurements=to(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:i,getItemKey:o,enabled:l,lanes:u},h)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>t)for(const y of this.laneAssignments.keys())y>=t&&this.laneAssignments.delete(y);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(y=>{this.itemSizeCache.set(y.key,y.size)}));const m=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===t&&(this.lanesSettling=!1);const p=this.measurementsCache.slice(0,m),g=new Array(u).fill(void 0);for(let y=0;y<m;y++){const w=p[y];w&&(g[w.lane]=y)}for(let y=m;y<t;y++){const w=o(y),A=this.laneAssignments.get(y);let S,E;if(A!==void 0&&this.options.lanes>1){S=A;const M=g[S],L=M!==void 0?p[M]:void 0;E=L?L.end+this.options.gap:n+i}else{const M=this.options.lanes===1?p[y-1]:this.getFurthestMeasurement(p,y);E=M?M.end+this.options.gap:n+i,S=M?M.lane:y%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(y,S)}const C=h.get(w),T=typeof C=="number"?C:this.options.estimateSize(y),N=E+T;p[y]={index:y,start:E,size:T,end:N,key:w,lane:S},g[S]=y}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=to(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,n,i,o)=>this.range=t.length>0&&n>0?K5({measurements:t,outerSize:n,scrollOffset:i,lanes:o}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=to(()=>{let t=null,n=null;const i=this.calculateRange();return i&&(t=i.startIndex,n=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,n]},(t,n,i,o,l)=>o===null||l===null?[]:t({startIndex:o,endIndex:l,overscan:n,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,i=t.getAttribute(n);return i?parseInt(i,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const i=this.indexFromElement(t),o=this.measurementsCache[i];if(!o)return;const l=o.key,u=this.elementsCache.get(l);u!==t&&(u&&this.observer.unobserve(u),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(i,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const i=this.measurementsCache[t];if(!i)return;const o=this.itemSizeCache.get(i.key)??i.size,l=n-o;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,l,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,i)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(i))});return}this._measureElement(t,void 0)},this.getVirtualItems=to(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,n)=>{const i=[];for(let o=0,l=t.length;o<l;o++){const u=t[o],h=n[u];i.push(h)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return Lw(n[kE(0,n.length-1,i=>Lw(n[i]).start,t)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const t=this.scrollElement.document.documentElement;return this.options.horizontal?t.scrollWidth-this.scrollElement.innerWidth:t.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(t,n,i=0)=>{if(!this.scrollElement)return 0;const o=this.getSize(),l=this.getScrollOffset();n==="auto"&&(n=t>=l+o?"end":"start"),n==="center"?t+=(i-o)/2:n==="end"&&(t-=o);const u=this.getMaxScrollOffset();return Math.max(Math.min(u,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const i=this.measurementsCache[t];if(!i)return;const o=this.getSize(),l=this.getScrollOffset();if(n==="auto")if(i.end>=l+o-this.options.scrollPaddingEnd)n="end";else if(i.start<=l+this.options.scrollPaddingStart)n="start";else return[l,n];if(n==="end"&&t===this.options.count-1)return[this.getMaxScrollOffset(),n];const u=n==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(u,n,i.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:n="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:i})},this.scrollToIndex=(t,{align:n="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1)),this.currentScrollToIndex=t;let o=0;const l=10,u=m=>{if(!this.targetWindow)return;const p=this.getOffsetForIndex(t,m);if(!p){console.warn("Failed to get offset for index:",t);return}const[g,y]=p;this._scrollToOffset(g,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{if(!this.targetWindow)return;const w=()=>{if(this.currentScrollToIndex!==t)return;const A=this.getScrollOffset(),S=this.getOffsetForIndex(t,y);if(!S){console.warn("Failed to get offset for index:",t);return}H5(S[0],A)||h(y)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(w):w()})},h=m=>{this.targetWindow&&this.currentScrollToIndex===t&&(o++,o<l?this.targetWindow.requestAnimationFrame(()=>u(m)):console.warn(`Failed to scroll to index ${t} after ${l} attempts.`))};u(n)},this.scrollBy=(t,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let i;if(n.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((t=n[n.length-1])==null?void 0:t.end)??0;else{const o=Array(this.options.lanes).fill(null);let l=n.length-1;for(;l>=0&&o.some(u=>u===null);){const u=n[l];o[u.lane]===null&&(o[u.lane]=u.end),l--}i=Math.max(...o.filter(u=>u!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:i})=>{this.options.scrollToFn(t,{behavior:i,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(e)}}const kE=(a,e,t,n)=>{for(;a<=e;){const i=(a+e)/2|0,o=t(i);if(o<n)a=i+1;else if(o>n)e=i-1;else return i}return a>0?a-1:0};function K5({measurements:a,outerSize:e,scrollOffset:t,lanes:n}){const i=a.length-1,o=h=>a[h].start;if(a.length<=n)return{startIndex:0,endIndex:i};let l=kE(0,i,o,t),u=l;if(n===1)for(;u<i&&a[u].end<t+e;)u++;else if(n>1){const h=Array(n).fill(0);for(;u<i&&h.some(p=>p<t+e);){const p=a[u];h[p.lane]=p.end,u++}const m=Array(n).fill(t+e);for(;l>=0&&m.some(p=>p>=t);){const p=a[l];m[p.lane]=p.start,l--}l=Math.max(0,l-l%n),u=Math.min(i,u+(n-1-u%n))}return{startIndex:l,endIndex:u}}const zw=typeof document<"u"?x.useLayoutEffect:x.useEffect;function Q5({useFlushSync:a=!0,...e}){const t=x.useReducer(()=>({}),{})[1],n={...e,onChange:(o,l)=>{var u;a&&l?jo.flushSync(t):t(),(u=e.onChange)==null||u.call(e,o,l)}},[i]=x.useState(()=>new W5(n));return i.setOptions(n),zw(()=>i._didMount(),[]),zw(()=>i._willUpdate()),i}function Z5(a){return Q5({observeElementRect:G5,observeElementOffset:Y5,scrollToFn:X5,...a})}const J5=[{name:"",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans SC", sans-serif'},{name:"",value:'"Noto Serif SC", "Source Han Serif SC", "SimSun", "STSong", "Songti SC", serif'},{name:"",value:'"Noto Sans SC", "Source Han Sans SC", "SimHei", "STHeiti", "Heiti SC", sans-serif'},{name:"",value:'"KaiTi", "Kaiti SC", "STKaiti", "", serif'},{name:"",value:'"FangSong", "FangSong SC", "STFangsong", serif'}],Qm=[{name:"",bg:"#ffffff",text:"#1f2937",accent:"#3b82f6",border:"#f3f4f6",secondaryBg:"#fafafa"},{name:"",bg:"#fafafa",text:"#374151",accent:"#2563eb",border:"#e5e7eb",secondaryBg:"#f3f4f6"},{name:"",bg:"#0f172a",text:"#e2e8f0",accent:"#60a5fa",border:"#1e293b",secondaryBg:"#1e293b"},{name:"",bg:"#f4f1ea",text:"#2d3748",accent:"#48bb78",border:"#e8e4dc",secondaryBg:"#ebe7df"},{name:"",bg:"#f5f0e6",text:"#5c4b37",accent:"#8b6914",border:"#e5ddd0",secondaryBg:"#efe8db"}],eB=(a,e)=>{const t=new Uint8Array(a);if(e&&e!=="auto")try{return new TextDecoder(e,{fatal:!1}).decode(t)}catch{console.warn(` ${e} `)}if(t.length>=3&&t[0]===239&&t[1]===187&&t[2]===191)return new TextDecoder("utf-8").decode(t.slice(3));if(t.length>=2&&t[0]===255&&t[1]===254)return new TextDecoder("utf-16le").decode(t.slice(2));try{const i=new TextDecoder("utf-8",{fatal:!0}).decode(t);if(!/[\u0000-\u0008\u000b\u000c\u000e-\u001f]/.test(i))return i}catch{}try{return new TextDecoder("gb18030",{fatal:!1}).decode(t)}catch{}return new TextDecoder("utf-8",{fatal:!1}).decode(t)},tB=a=>{try{const e=/[]+/,t=(a.match(/[\x80-\xff]/g)||[]).length/a.length;if(e.test(a)||t>.2){console.log(" GBK ...");const n=new Uint8Array(a.length);let i=!0;for(let o=0;o<a.length;o++){const l=a.charCodeAt(o);if(l>255){i=!1;break}n[o]=l}if(i)try{const l=new TextDecoder("gb18030",{fatal:!1}).decode(n);if((l.match(/[]/g)||[]).length<l.length*.01)return console.log("GBK "),l}catch{}}}catch{}return a},nB=a=>{if(!a)return"";let e=a;return e=tB(e),e=e.replace(/^\uFEFF|^\uFFFE/g,""),e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e=e.replace(/[ \t]+$/gm,""),e=e.replace(/[\x00-\x08\x0b\x0c\x0e-\x1f\x7f]/g,""),e=e.replace(/\n{3,}/g,`

`),e=e.trim(),e},sB=a=>{const e=a.split(`
`),t=[];let n=-1,i=0;const o=/^([\d]+[]|[][]|\d+[.]\s*|.*?|Chapter\s+\d+|Prologue|Epilogue|Preface|Introduction)/i;return e.forEach(l=>{const u=l.trim();u&&(o.test(u)&&u.length<100?(n++,t.push({type:"title",content:u,chapterIndex:n,globalIndex:i++})):(n===-1&&(n=0,t.push({type:"title",content:"",chapterIndex:0,globalIndex:i++})),t.push({type:"paragraph",content:u,chapterIndex:n,globalIndex:i++})))}),t.length>0?t:[{type:"paragraph",content:a,chapterIndex:0,globalIndex:0}]},Il={loadSettings:()=>({fontSize:18,fontFamily:J5[0].value,theme:0,lineHeight:1.8,letterSpacing:0,textAlign:"justify",paragraphSpacing:1,autoHideHeader:!0}),saveSettings:a=>{try{localStorage.setItem("reader-settings-v4",JSON.stringify(a))}catch{}},loadProgress:a=>{try{const e=JSON.parse(localStorage.getItem(`reader-progress-v4-${a}`)||"{}");return typeof e.index=="number"?e.index:0}catch{return 0}},saveProgress:(a,e)=>{try{localStorage.setItem(`reader-progress-v4-${a}`,JSON.stringify({index:e,time:Date.now()}))}catch{}}},iB=({content:a="",title:e,bookId:t,onClose:n,rawBuffer:i,encoding:o="auto"})=>{const l=x.useMemo(()=>{let Y;return i?Y=eB(i,o):Y=a,nB(Y)},[a,i,o]),u=x.useMemo(()=>sB(l),[l]),[h,m]=x.useState(Il.loadSettings()),[p,g]=x.useState(0),[y,w]=x.useState(!0),[A,S]=x.useState(!1),[E,C]=x.useState(!1),[T,N]=x.useState(!1),[M,L]=x.useState(!1),[I,O]=x.useState(0),[P,F]=x.useState(0),$=x.useRef(null),W=x.useRef(void 0),ie=x.useRef(0),le=x.useRef(0),G=Qm[h.theme]||Qm[0];x.useEffect(()=>{const Y=()=>{const se=document.createElement("div");se.style.position="fixed",se.style.paddingTop="env(safe-area-inset-top)",se.style.paddingBottom="env(safe-area-inset-bottom)",se.style.paddingLeft="env(safe-area-inset-left)",se.style.paddingRight="env(safe-area-inset-right)",document.body.appendChild(se);const pe=getComputedStyle(se),xe=parseInt(pe.paddingTop)||0,ge=parseInt(pe.paddingBottom)||0;document.body.removeChild(se),O(xe),F(ge)};return Y(),window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[]);const fe=x.useCallback(Y=>{const se=u[Y];if(!se)return h.fontSize*h.lineHeight;const pe=h.fontSize*h.lineHeight;if(se.type==="title")return pe*1.5+48;const xe=Math.max(20,Math.floor(600/(h.fontSize*.8))),ge=Math.ceil(se.content.length/xe);return Math.max(pe,ge*pe*h.lineHeight)},[h.fontSize,h.lineHeight,u]),R=Z5({count:u.length,getScrollElement:()=>$.current,estimateSize:fe,overscan:5,measureElement:x.useCallback((Y,se,pe)=>Y?Y.getBoundingClientRect().height:0,[]),getItemKey:x.useCallback(Y=>u[Y]?.globalIndex??Y,[u])});x.useEffect(()=>{if(u.length===0)return;const Y=Il.loadProgress(t);ie.current=Y,le.current=Y;const se=setTimeout(()=>{if(Y>0&&Y<u.length){R.scrollToIndex(Y,{align:"start",behavior:"auto"});const pe=u[Y];pe&&g(pe.chapterIndex)}L(!0)},100);return()=>clearTimeout(se)},[u,t,R]),x.useEffect(()=>{const Y=R.getVirtualItems();if(Y.length===0)return;const se=Y[0];if(!se)return;const pe=se.index;ie.current=pe;const xe=u[pe];xe&&(g(xe.chapterIndex),(Math.abs(pe-le.current)>10||xe.chapterIndex!==p)&&(Il.saveProgress(t,pe),le.current=pe))},[R.getVirtualItems(),u,t,p]),x.useEffect(()=>{if(!h.autoHideHeader||A||E){clearTimeout(W.current);return}return W.current=setTimeout(()=>{!A&&!E&&w(!1)},4e3),()=>clearTimeout(W.current)},[h.autoHideHeader,A,E,y]),x.useEffect(()=>{const Y=()=>{N(!!document.fullscreenElement),setTimeout(()=>{const se=new Event("resize");window.dispatchEvent(se)},100)};return document.addEventListener("fullscreenchange",Y),()=>document.removeEventListener("fullscreenchange",Y)},[]),x.useEffect(()=>{const Y=se=>{A||E||(se.key==="ArrowLeft"||se.key==="ArrowUp"||se.key==="PageUp"?(se.preventDefault(),$.current?.scrollBy({top:-window.innerHeight*.85,behavior:"smooth"})):se.key==="ArrowRight"||se.key==="ArrowDown"||se.key===" "||se.key==="PageDown"?(se.preventDefault(),$.current?.scrollBy({top:window.innerHeight*.85,behavior:"smooth"})):se.key==="Escape"&&(T?document.exitFullscreen():A?S(!1):E?C(!1):w(pe=>!pe)))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[A,E,T]);const U=x.useCallback(async()=>{try{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()}catch{}},[]),H=x.useMemo(()=>{const Y=[];return u.forEach((se,pe)=>{se.type==="title"&&Y.push({index:se.chapterIndex,title:se.content,itemIndex:pe})}),Y.length>0?Y:[{index:0,title:"",itemIndex:0}]},[u]),z=x.useCallback(Y=>{const se=u.find(pe=>pe.chapterIndex===Y&&pe.type==="title");if(se){const pe=u.findIndex(xe=>xe.globalIndex===se.globalIndex);pe!==-1&&(R.scrollToIndex(pe,{align:"start",behavior:"smooth"}),g(Y),C(!1),w(!0),ie.current=pe,Il.saveProgress(t,pe),le.current=pe)}},[u,R,t]),ce=x.useCallback(()=>{p>0&&z(p-1)},[p,z]),j=x.useCallback(()=>{p<H.length-1&&z(p+1)},[p,H.length,z]),k=x.useCallback(Y=>{if(Y.target.closest(".panel")||Y.target.closest("button")||Y.target.closest("input"))return;const se=Y.currentTarget.getBoundingClientRect(),pe=Y.clientX-se.left,xe=se.width;pe<xe*.2?$.current?.scrollBy({top:-window.innerHeight*.85,behavior:"smooth"}):pe>xe*.8?$.current?.scrollBy({top:window.innerHeight*.85,behavior:"smooth"}):!A&&!E&&w(ge=>!ge)},[A,E]),B=x.useCallback((Y,se)=>{const pe={...h,[Y]:se};m(pe),Il.saveSettings(pe),requestAnimationFrame(()=>R.measure())},[h,R]),X=x.useCallback(Y=>{const se=u[Y.index];if(!se)return null;const pe=se.type==="title";return d.jsx("div",{ref:R.measureElement,"data-index":Y.index,className:`px-6 ${pe?"pt-12 pb-8":"py-0"}`,style:{fontSize:pe?`${h.fontSize*1.3}px`:`${h.fontSize}px`,fontFamily:h.fontFamily,lineHeight:pe?1.4:h.lineHeight,letterSpacing:`${h.letterSpacing}px`,textAlign:pe?"center":h.textAlign,color:pe?G.accent:G.text,fontWeight:pe?"700":"400",marginBottom:pe?"2rem":`${h.paragraphSpacing}em`,textIndent:!pe&&h.textAlign!=="center"?"2em":"0",willChange:"transform",contain:"layout style paint",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap",minHeight:"1em"},children:se.content},Y.key)},[u,h,G,R]),K=x.useMemo(()=>{const Y=R.scrollOffset||0,se=R.getTotalSize(),pe=$.current?.clientHeight||0;return se===0||se<=pe?0:Math.min(100,Math.max(0,Math.round(Y/(se-pe)*100)))},[R.scrollOffset,R.getTotalSize()]);if(!u.length)return null;const oe=T?Math.max(I,0):0,J=T?Math.max(P,0):0;return d.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col overflow-hidden",style:{backgroundColor:G.bg,fontFamily:h.fontFamily,WebkitFontSmoothing:"antialiased",paddingTop:oe,paddingBottom:J},children:[T&&d.jsx("div",{className:"fixed top-0 left-0 right-0 z-[60] pointer-events-none",style:{height:I>0?I:0,backgroundColor:G.bg}}),!M&&d.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center",style:{backgroundColor:G.bg},children:d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:`${G.accent}40`,borderTopColor:G.accent}}),d.jsx("span",{style:{color:G.text},children:"..."})]})}),d.jsx("header",{className:`absolute left-0 right-0 z-40 transition-all duration-300 ${y?"opacity-100 translate-y-0":"opacity-0 -translate-y-full pointer-events-none"}`,style:{top:oe,backgroundColor:`${G.bg}f0`,backdropFilter:"blur(12px)",borderBottom:`1px solid ${G.border}`},children:d.jsxs("div",{className:"h-14 px-4 flex items-center justify-between max-w-3xl mx-auto",children:[d.jsx("button",{onClick:n,className:"p-2 -ml-2 rounded-full active:opacity-60",style:{color:G.text},children:d.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",children:d.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),d.jsxs("div",{className:"flex-1 text-center px-4 overflow-hidden",children:[d.jsx("h1",{className:"text-[15px] font-semibold truncate",style:{color:G.text},children:e}),d.jsx("p",{className:"text-[11px] opacity-60 truncate",style:{color:G.text},children:H[p]?.title||""})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>C(!0),className:"p-2.5 rounded-full active:opacity-60",style:{color:G.text},children:d.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),d.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),d.jsx("button",{onClick:U,className:"p-2.5 rounded-full active:opacity-60",style:{color:G.text},children:d.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:T?d.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"}):d.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})}),d.jsx("button",{onClick:()=>S(!0),className:"p-2.5 rounded-full active:opacity-60",style:{color:G.text},children:d.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("circle",{cx:"12",cy:"12",r:"3"}),d.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]})]})}),d.jsx("div",{ref:$,className:"flex-1 overflow-y-auto relative w-full h-full",onClick:k,style:{paddingTop:y?56+oe:24+oe,paddingBottom:y?64+J:40+J},children:d.jsx("div",{style:{height:`${R.getTotalSize()}px`,width:"100%",position:"relative"},children:R.getVirtualItems().map(Y=>d.jsx("div",{className:"absolute top-0 left-0 w-full",style:{transform:`translateY(${Y.start}px)`},children:X(Y)},Y.key))})}),d.jsx("footer",{className:`absolute left-0 right-0 z-40 transition-all duration-300 ${y?"opacity-100 translate-y-0":"opacity-0 translate-y-full pointer-events-none"}`,style:{bottom:J,backgroundColor:`${G.bg}f0`,backdropFilter:"blur(12px)",borderTop:`1px solid ${G.border}`},children:d.jsxs("div",{className:"h-16 px-6 flex items-center gap-4 max-w-3xl mx-auto",children:[d.jsx("button",{onClick:ce,disabled:p===0,className:"text-[13px] font-semibold disabled:opacity-30 active:opacity-60",style:{color:G.text},children:""}),d.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[d.jsxs("div",{className:"flex justify-between text-[11px] opacity-50",style:{color:G.text},children:[d.jsxs("span",{children:[K,"%"]}),d.jsxs("span",{children:[p+1," / ",H.length]})]}),d.jsxs("div",{className:"relative h-1.5 rounded-full overflow-hidden",style:{backgroundColor:G.border},children:[d.jsx("div",{className:"absolute left-0 top-0 h-full rounded-full transition-all",style:{width:`${K}%`,backgroundColor:G.accent}}),d.jsx("input",{type:"range",min:0,max:u.length-1,value:ie.current,onChange:Y=>{const se=parseInt(Y.target.value);ie.current=se,R.scrollToIndex(se,{align:"start",behavior:"smooth"})},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]}),d.jsx("button",{onClick:j,disabled:p>=H.length-1,className:"text-[13px] font-semibold disabled:opacity-30 active:opacity-60",style:{color:G.text},children:""})]})}),E&&d.jsxs("div",{className:"absolute inset-0 z-50 flex",children:[d.jsxs("div",{className:"w-[min(320px,85vw)] h-full shadow-2xl flex flex-col",style:{backgroundColor:G.bg,paddingTop:oe},children:[d.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{borderColor:G.border},children:[d.jsx("h2",{className:"font-bold text-lg",style:{color:G.text},children:""}),d.jsx("button",{onClick:()=>C(!1),style:{color:G.text},className:"p-2",children:""})]}),d.jsx("div",{className:"flex-1 overflow-y-auto",children:H.map(Y=>d.jsx("button",{onClick:()=>z(Y.index),className:"w-full text-left px-6 py-4 border-b active:opacity-60",style:{borderColor:G.border,color:p===Y.index?G.accent:G.text,backgroundColor:p===Y.index?`${G.accent}10`:"transparent"},children:d.jsx("span",{className:"text-[15px] block truncate",children:Y.title})},Y.index))})]}),d.jsx("div",{className:"flex-1 bg-black/30",onClick:()=>C(!1)})]}),A&&d.jsxs("div",{className:"absolute inset-0 z-50 flex justify-end",children:[d.jsx("div",{className:"flex-1 bg-black/30",onClick:()=>S(!1)}),d.jsxs("div",{className:"w-[min(360px,90vw)] h-full shadow-2xl p-6 overflow-y-auto",style:{backgroundColor:G.bg,paddingTop:24+oe},children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"font-bold text-lg",style:{color:G.text},children:""}),d.jsx("button",{onClick:()=>S(!1),style:{color:G.text},className:"p-2",children:""})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsxs("span",{style:{color:G.text},children:[": ",h.fontSize,"px"]}),d.jsx("input",{type:"range",min:"12",max:"32",value:h.fontSize,onChange:Y=>B("fontSize",parseInt(Y.target.value)),className:"w-full mt-2"})]}),d.jsxs("div",{children:[d.jsxs("span",{style:{color:G.text},children:[": ",h.lineHeight]}),d.jsx("input",{type:"range",min:"1.2",max:"2.8",step:"0.1",value:h.lineHeight,onChange:Y=>B("lineHeight",parseFloat(Y.target.value)),className:"w-full mt-2"})]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:G.text},children:""}),d.jsx("div",{className:"grid grid-cols-5 gap-2 mt-2",children:Qm.map((Y,se)=>d.jsx("button",{onClick:()=>B("theme",se),className:"aspect-square rounded-lg border-2",style:{backgroundColor:Y.bg,borderColor:h.theme===se?Y.accent:"transparent"}},se))})]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:G.text},children:""}),d.jsx("div",{className:"flex gap-2 mt-2",children:["left","justify","center"].map(Y=>d.jsx("button",{onClick:()=>B("textAlign",Y),className:"flex-1 py-2 rounded text-sm",style:{backgroundColor:h.textAlign===Y?G.accent:G.secondaryBg,color:h.textAlign===Y?"#fff":G.text},children:Y==="left"?"":Y==="justify"?"":""},Y))})]})]})]})]})]})},aB={ongoing:"",completed:"",archived:""},rB={ongoing:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700",archived:"bg-gray-100 text-gray-700"},Fw=a=>a<1024?a+" B":a<1024*1024?(a/1024).toFixed(1)+" KB":(a/(1024*1024)).toFixed(1)+" MB";function oB({projects:a,onAddProject:e,onDeleteProject:t,onAddKnowledge:n,onAddLesson:i,onAddFile:o,onDeleteFile:l,onDownloadFile:u}){const[h,m]=x.useState(!1),[p,g]=x.useState(null),[y,w]=x.useState(!1),[A,S]=x.useState(!1),[E,C]=x.useState(!1),T=x.useRef(null),[N,M]=x.useState({name:"",description:"",status:"ongoing",startDate:new Date().toISOString().split("T")[0],tags:[],newTag:""}),[L,I]=x.useState({title:"",content:"",category:"technical"}),[O,P]=x.useState({title:"",content:"",type:"success"}),[F,$]=x.useState({description:"",selectedFile:null}),W=()=>{if(!N.name.trim()){we.error("");return}e({name:N.name.trim(),description:N.description.trim(),status:N.status,startDate:N.startDate,tags:N.tags}),M({name:"",description:"",status:"ongoing",startDate:new Date().toISOString().split("T")[0],tags:[],newTag:""}),m(!1),we.success("")},ie=()=>{if(!p||!L.title.trim()||!L.content.trim()){we.error("");return}n(p.id,{title:L.title.trim(),content:L.content.trim(),category:L.category}),I({title:"",content:"",category:"technical"}),w(!1),we.success("")},le=()=>{if(!p||!O.title.trim()||!O.content.trim()){we.error("");return}i(p.id,{title:O.title.trim(),content:O.content.trim(),type:O.type}),P({title:"",content:"",type:"success"}),S(!1),we.success("")},G=z=>{const ce=z.target.files?.[0];ce&&$({...F,selectedFile:ce})},fe=async()=>{!p||!F.selectedFile||!o||(await o(p.id,F.selectedFile,F.description),$({description:"",selectedFile:null}),C(!1),T.current&&(T.current.value=""),we.success(""))},R=async z=>{if(!u)return;const ce=await u(z.id);if(ce){const j=new Blob([ce.data],{type:ce.type}),k=URL.createObjectURL(j),B=document.createElement("a");B.href=k,B.download=ce.name,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(k),we.success("")}else we.error("")},U=async z=>{!p||!l||(await l(p.id,z),we.success(""))},H=()=>{N.newTag.trim()&&!N.tags.includes(N.newTag.trim())&&M({...N,tags:[...N.tags,N.newTag.trim()],newTag:""})};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-lg font-semibold",children:""}),d.jsxs(he,{size:"sm",onClick:()=>m(!0),children:[d.jsx(Ii,{className:"h-4 w-4 mr-1"}),""]})]}),a.length===0?d.jsx(Kt,{children:d.jsxs(Qt,{className:"p-8 text-center",children:[d.jsx(R1,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),d.jsx("p",{className:"text-muted-foreground",children:""}),d.jsx(he,{variant:"outline",className:"mt-4",onClick:()=>m(!0),children:""})]})}):d.jsx("div",{className:"space-y-3",children:a.map(z=>d.jsx(Kt,{className:"cursor-pointer hover:shadow-md transition-all duration-200",children:d.jsx(Qt,{className:"p-4",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",onClick:()=>g(z),children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("h3",{className:"font-semibold",children:z.name}),d.jsx(gn,{className:rB[z.status],children:aB[z.status]})]}),d.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:z.description}),d.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(yo,{className:"h-3 w-3"}),new Date(z.startDate).toLocaleDateString()]}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(_m,{className:"h-3 w-3"}),z.knowledge.length," "]}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(Ju,{className:"h-3 w-3"}),z.lessons.length," "]}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(wa,{className:"h-3 w-3"}),z.files.length," "]})]}),z.tags.length>0&&d.jsx("div",{className:"flex gap-1 mt-2",children:z.tags.map(ce=>d.jsx(gn,{variant:"secondary",className:"text-xs",children:ce},ce))})]}),d.jsxs(So,{children:[d.jsx(Ao,{asChild:!0,children:d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8",children:d.jsx(xo,{className:"h-4 w-4"})})}),d.jsxs(Co,{align:"end",children:[d.jsxs(es,{onClick:()=>g(z),children:[d.jsx(ql,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(es,{className:"text-destructive",onClick:()=>t(z.id),children:[d.jsx(Us,{className:"h-4 w-4 mr-2"}),""]})]})]})]})})},z.id))}),d.jsx(vn,{open:!!p,onOpenChange:()=>g(null),children:d.jsx(yn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:p&&d.jsxs(d.Fragment,{children:[d.jsx(bn,{children:d.jsx(xn,{children:p.name})}),d.jsxs(Bp,{defaultValue:"knowledge",className:"w-full",children:[d.jsxs(C1,{className:"grid w-full grid-cols-3",children:[d.jsxs(ro,{value:"knowledge",children:[d.jsx(_m,{className:"h-4 w-4 mr-1"})," (",p.knowledge.length,")"]}),d.jsxs(ro,{value:"lessons",children:[d.jsx(Ju,{className:"h-4 w-4 mr-1"})," (",p.lessons.length,")"]}),d.jsxs(ro,{value:"files",children:[d.jsx(wa,{className:"h-4 w-4 mr-1"})," (",p.files.length,")"]})]}),d.jsxs(Fs,{value:"knowledge",className:"space-y-4 mt-4",children:[d.jsxs(he,{size:"sm",onClick:()=>w(!0),className:"w-full",children:[d.jsx(Ii,{className:"h-4 w-4 mr-1"}),""]}),p.knowledge.length===0?d.jsx("p",{className:"text-center text-muted-foreground py-8",children:""}):d.jsx("div",{className:"space-y-3",children:p.knowledge.map(z=>d.jsx(Kt,{className:"transition-all duration-200 hover:shadow-sm",children:d.jsx(Qt,{className:"p-4",children:d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(_m,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-medium text-sm",children:z.title}),d.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:z.content}),d.jsxs(gn,{variant:"outline",className:"mt-2 text-xs",children:[z.category==="technical"&&"",z.category==="process"&&"",z.category==="communication"&&"",z.category==="other"&&""]})]})]})})},z.id))})]}),d.jsxs(Fs,{value:"lessons",className:"space-y-4 mt-4",children:[d.jsxs(he,{size:"sm",onClick:()=>S(!0),className:"w-full",children:[d.jsx(Ii,{className:"h-4 w-4 mr-1"}),""]}),p.lessons.length===0?d.jsx("p",{className:"text-center text-muted-foreground py-8",children:""}):d.jsx("div",{className:"space-y-3",children:p.lessons.map(z=>d.jsx(Kt,{className:"transition-all duration-200 hover:shadow-sm",children:d.jsx(Qt,{className:"p-4",children:d.jsxs("div",{className:"flex items-start gap-2",children:[z.type==="success"&&d.jsx(T1,{className:"h-4 w-4 text-green-500 mt-0.5"}),z.type==="failure"&&d.jsx(Fn,{className:"h-4 w-4 text-red-500 mt-0.5"}),z.type==="warning"&&d.jsx(Ju,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-medium text-sm",children:z.title}),d.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:z.content}),d.jsxs(gn,{variant:"outline",className:`mt-2 text-xs ${z.type==="success"?"border-green-500 text-green-600":z.type==="failure"?"border-red-500 text-red-600":"border-yellow-500 text-yellow-600"}`,children:[z.type==="success"&&"",z.type==="failure"&&"",z.type==="warning"&&""]})]})]})})},z.id))})]}),d.jsxs(Fs,{value:"files",className:"space-y-4 mt-4",children:[d.jsxs(he,{size:"sm",onClick:()=>C(!0),className:"w-full",children:[d.jsx(Wl,{className:"h-4 w-4 mr-1"}),""]}),p.files.length===0?d.jsx("p",{className:"text-center text-muted-foreground py-8",children:""}):d.jsx("div",{className:"space-y-2",children:p.files.map(z=>d.jsx(Kt,{className:"transition-all duration-200 hover:shadow-sm",children:d.jsx(Qt,{className:"p-3",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(wa,{className:"h-5 w-5 text-primary"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium",children:z.name}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[Fw(z.size),z.description&&`  ${z.description}`]})]})]}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>R(z),children:d.jsx(Xl,{className:"h-4 w-4"})}),d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>U(z.id),children:d.jsx(Us,{className:"h-4 w-4"})})]})]})})},z.id))})]})]})]})})}),d.jsx(vn,{open:h,onOpenChange:m,children:d.jsxs(yn,{className:"max-w-md",children:[d.jsx(bn,{children:d.jsx(xn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:N.name,onChange:z=>M({...N,name:z.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(Vs,{value:N.description,onChange:z=>M({...N,description:z.target.value}),placeholder:"",rows:3})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsxs(Bi,{value:N.status,onValueChange:z=>M({...N,status:z}),children:[d.jsx(Fi,{children:d.jsx(zi,{})}),d.jsxs(Hi,{children:[d.jsx(Wt,{value:"ongoing",children:""}),d.jsx(Wt,{value:"completed",children:""}),d.jsx(Wt,{value:"archived",children:""})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{type:"date",value:N.startDate,onChange:z=>M({...N,startDate:z.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ft,{value:N.newTag,onChange:z=>M({...N,newTag:z.target.value}),placeholder:"",onKeyDown:z=>z.key==="Enter"&&H()}),d.jsx(he,{type:"button",variant:"outline",onClick:H,children:""})]}),N.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:N.tags.map(z=>d.jsxs(gn,{variant:"secondary",className:"gap-1",children:[z,d.jsx("button",{onClick:()=>M({...N,tags:N.tags.filter(ce=>ce!==z)}),children:d.jsx(Fn,{className:"h-3 w-3"})})]},z))})]})]}),d.jsxs(Hs,{children:[d.jsx(he,{variant:"outline",onClick:()=>m(!1),children:""}),d.jsx(he,{onClick:W,children:""})]})]})}),d.jsx(vn,{open:y,onOpenChange:w,children:d.jsxs(yn,{children:[d.jsx(bn,{children:d.jsx(xn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:L.title,onChange:z=>I({...L,title:z.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(Vs,{value:L.content,onChange:z=>I({...L,content:z.target.value}),placeholder:"",rows:4})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsxs(Bi,{value:L.category,onValueChange:z=>I({...L,category:z}),children:[d.jsx(Fi,{children:d.jsx(zi,{})}),d.jsxs(Hi,{children:[d.jsx(Wt,{value:"technical",children:""}),d.jsx(Wt,{value:"process",children:""}),d.jsx(Wt,{value:"communication",children:""}),d.jsx(Wt,{value:"other",children:""})]})]})]})]}),d.jsxs(Hs,{children:[d.jsx(he,{variant:"outline",onClick:()=>w(!1),children:""}),d.jsx(he,{onClick:ie,children:""})]})]})}),d.jsx(vn,{open:A,onOpenChange:S,children:d.jsxs(yn,{children:[d.jsx(bn,{children:d.jsx(xn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:O.title,onChange:z=>P({...O,title:z.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(Vs,{value:O.content,onChange:z=>P({...O,content:z.target.value}),placeholder:"",rows:4})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsxs(Bi,{value:O.type,onValueChange:z=>P({...O,type:z}),children:[d.jsx(Fi,{children:d.jsx(zi,{})}),d.jsxs(Hi,{children:[d.jsx(Wt,{value:"success",children:""}),d.jsx(Wt,{value:"failure",children:""}),d.jsx(Wt,{value:"warning",children:""})]})]})]})]}),d.jsxs(Hs,{children:[d.jsx(he,{variant:"outline",onClick:()=>S(!1),children:""}),d.jsx(he,{onClick:le,children:""})]})]})}),d.jsx(vn,{open:E,onOpenChange:C,children:d.jsxs(yn,{children:[d.jsx(bn,{children:d.jsx(xn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{ref:T,type:"file",onChange:G})]}),F.selectedFile&&d.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[d.jsx("p",{className:"text-sm font-medium",children:F.selectedFile.name}),d.jsx("p",{className:"text-xs text-muted-foreground",children:Fw(F.selectedFile.size)})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:F.description,onChange:z=>$({...F,description:z.target.value}),placeholder:""})]})]}),d.jsxs(Hs,{children:[d.jsx(he,{variant:"outline",onClick:()=>C(!1),children:""}),d.jsx(he,{onClick:fe,disabled:!F.selectedFile,children:""})]})]})})]})}const lB=["","","","","","",""],Zm=["","","","","","",""],cB=["","","","","","","","","","","",""],Bl=[{bg:"bg-blue-100",border:"border-blue-300",text:"text-blue-800"},{bg:"bg-green-100",border:"border-green-300",text:"text-green-800"},{bg:"bg-yellow-100",border:"border-yellow-300",text:"text-yellow-800"},{bg:"bg-red-100",border:"border-red-300",text:"text-red-800"},{bg:"bg-purple-100",border:"border-purple-300",text:"text-purple-800"},{bg:"bg-pink-100",border:"border-pink-300",text:"text-pink-800"},{bg:"bg-indigo-100",border:"border-indigo-300",text:"text-indigo-800"},{bg:"bg-orange-100",border:"border-orange-300",text:"text-orange-800"}],Qu=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"];function Hw(a,e){return new Date(a,e+1,0).getDate()}function uB(a,e){return new Date(a,e,1).getDay()}function Uw(a,e){return a.getFullYear()===e.getFullYear()&&a.getMonth()===e.getMonth()&&a.getDate()===e.getDate()}function Zu(a){return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}function dB(){try{const a=localStorage.getItem("schedule-courses");if(a)return JSON.parse(a)}catch{}return[]}function hB(a){try{localStorage.setItem("schedule-courses",JSON.stringify(a))}catch{}}function fB({notes:a,onAddNote:e,onUpdateNote:t,onDeleteNote:n,onToggleComplete:i}){const[o,l]=x.useState(new Date),[u,h]=x.useState(null),[m,p]=x.useState(!1),[g,y]=x.useState(!1),[w,A]=x.useState(null),[S,E]=x.useState("calendar"),[C,T]=x.useState(dB()),[N,M]=x.useState(1),[L,I]=x.useState(!1),[O,P]=x.useState(null),[F,$]=x.useState({name:"",location:"",day:1,startTime:"08:00",endTime:"09:40",color:"0",weekType:"all"}),W=o.getFullYear(),ie=o.getMonth();x.useEffect(()=>{hB(C)},[C]);const le=Hw(W,ie),G=uB(W,ie),fe=Hw(W,ie-1),R=x.useMemo(()=>{const Z={};return a.forEach(Ae=>{if(Ae.dueDate){const Ge=new Date(Ae.dueDate),$e=Zu(Ge);Z[$e]||(Z[$e]=[]),Z[$e].push(Ae)}}),Z},[a]),U=x.useMemo(()=>{if(!u)return[];const Z=Zu(u);return R[Z]||[]},[u,R]),H=x.useMemo(()=>a.filter(Z=>!Z.completed&&Z.type==="todo"),[a]),[z,ce]=x.useState({title:"",content:"",type:"todo",dueDate:"",dueTime:""}),j=Z=>{l(new Date(W,ie+Z,1))},k=()=>{const Z=new Date;l(Z),h(Z)},B=()=>{if(!z.title.trim()){we.error("");return}e({title:z.title,content:z.content,type:z.type,dueDate:z.dueDate||void 0,dueTime:z.dueTime||void 0,tags:[],priority:"medium"}),ce({title:"",content:"",type:"todo",dueDate:"",dueTime:""}),p(!1),we.success("")},X=()=>{!w||!z.title.trim()||(t(w.id,{title:z.title,content:z.content,type:z.type,dueDate:z.dueDate||void 0,dueTime:z.dueTime||void 0}),y(!1),A(null),we.success(""))},K=Z=>{A(Z),ce({title:Z.title,content:Z.content,type:Z.type==="todo"||Z.type==="note"?Z.type:"todo",dueDate:Z.dueDate||"",dueTime:Z.dueTime||""}),y(!0)},oe=Z=>{n(Z),we.success("")},J=()=>{if(!F.name.trim()){we.error("");return}const Z={id:Date.now().toString(),name:F.name,location:F.location,day:F.day,startTime:F.startTime,endTime:F.endTime,color:F.color,weekType:F.weekType};T([...C,Z]),$({name:"",location:"",day:1,startTime:"08:00",endTime:"09:40",color:"0",weekType:"all"}),I(!1),we.success("")},Y=()=>{!O||!F.name.trim()||(T(C.map(Z=>Z.id===O.id?{...Z,...F}:Z)),I(!1),P(null),we.success(""))},se=Z=>{T(C.filter(Ae=>Ae.id!==Z)),we.success("")},pe=Z=>{P(Z),$({name:Z.name,location:Z.location,day:Z.day,startTime:Z.startTime,endTime:Z.endTime,color:Z.color,weekType:Z.weekType}),I(!0)},xe=()=>{P(null),$({name:"",location:"",day:1,startTime:"08:00",endTime:"09:40",color:"0",weekType:"all"}),I(!0)},ge=Z=>C.filter(Ae=>Ae.day===Z).filter(Ae=>Ae.weekType==="all"?!0:Ae.weekType==="odd"?N%2===1:Ae.weekType==="even"?N%2===0:!0).sort((Ae,Ge)=>Ae.startTime.localeCompare(Ge.startTime)),Ve=Z=>{const Ae=Qu.findIndex(Tt=>Tt>=Z.startTime),Ge=Qu.findIndex(Tt=>Tt>=Z.endTime),$e=Ae>=0?Ae*32:0,ut=Math.max(32,(Ge-Ae)*32),rn=Bl[parseInt(Z.color)%Bl.length];return{top:`${$e}px`,height:`${ut}px`,colorSet:rn}},Oe=()=>{const Z=[],Ae=new Date;for(let $e=G-1;$e>=0;$e--){const ut=fe-$e;Z.push(d.jsx("div",{className:"p-2 text-center text-muted-foreground opacity-50",children:ut},`prev-${ut}`))}for(let $e=1;$e<=le;$e++){const ut=new Date(W,ie,$e),rn=Zu(ut),Tt=R[rn]||[],At=Tt.length>0,Ut=Uw(ut,Ae),Mt=u&&Uw(ut,u);Z.push(d.jsxs("button",{onClick:()=>h(ut),className:`p-2 text-center rounded-lg transition-all relative ${Mt?"bg-primary text-primary-foreground":Ut?"bg-primary/20 text-primary font-semibold":"hover:bg-muted"}`,children:[d.jsx("span",{children:$e}),At&&d.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 flex gap-0.5",children:Tt.slice(0,3).map((ps,Zt)=>d.jsx("div",{className:`w-1 h-1 rounded-full ${ps.completed?"bg-green-500":"bg-orange-500"}`},Zt))})]},`current-${$e}`))}const Ge=42-Z.length;for(let $e=1;$e<=Ge;$e++)Z.push(d.jsx("div",{className:"p-2 text-center text-muted-foreground opacity-50",children:$e},`next-${$e}`));return Z};return d.jsxs("div",{className:"space-y-4 pb-20",children:[d.jsxs(Bp,{value:S,onValueChange:E,className:"w-full",children:[d.jsxs(C1,{className:"grid w-full grid-cols-3",children:[d.jsxs(ro,{value:"calendar",className:"flex items-center gap-1.5",children:[d.jsx(yo,{className:"h-4 w-4"}),""]}),d.jsxs(ro,{value:"schedule",className:"flex items-center gap-1.5",children:[d.jsx(Oo,{className:"h-4 w-4"}),""]}),d.jsxs(ro,{value:"todos",className:"flex items-center gap-1.5",children:[d.jsx(zj,{className:"h-4 w-4"}),""]})]}),d.jsxs(Fs,{value:"calendar",className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(he,{variant:"outline",size:"icon",onClick:()=>j(-1),children:d.jsx(bo,{className:"h-4 w-4"})}),d.jsxs("span",{className:"text-lg font-semibold min-w-[120px] text-center",children:[W," ",cB[ie]]}),d.jsx(he,{variant:"outline",size:"icon",onClick:()=>j(1),children:d.jsx(ql,{className:"h-4 w-4"})})]}),d.jsx(he,{variant:"outline",size:"sm",onClick:k,children:""})]}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:lB.map(Z=>d.jsxs("div",{className:"text-center text-sm font-medium text-muted-foreground py-2",children:["",Z]},Z))}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:Oe()}),u&&d.jsx(Kt,{children:d.jsxs(Qt,{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("h3",{className:"font-semibold",children:[u.getMonth()+1,"",u.getDate(),""]}),d.jsxs(he,{size:"sm",onClick:()=>{ce({...z,dueDate:Zu(u)}),p(!0)},children:[d.jsx(Ii,{className:"h-4 w-4 mr-1"}),""]})]}),d.jsx("div",{className:"space-y-2",children:U.length===0?d.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""}):U.map(Z=>d.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-muted group",children:[d.jsx(jp,{checked:Z.completed,onCheckedChange:()=>i(Z.id),className:"mt-0.5"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`text-sm font-medium ${Z.completed?"line-through text-muted-foreground":""}`,children:Z.title}),Z.dueTime&&d.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[d.jsx(ix,{className:"h-3 w-3"}),Z.dueTime]})]}),d.jsxs(So,{children:[d.jsx(Ao,{asChild:!0,children:d.jsx(he,{variant:"ghost",size:"icon",className:"h-7 w-7 opacity-0 group-hover:opacity-100",children:d.jsx(xo,{className:"h-4 w-4"})})}),d.jsxs(Co,{align:"end",children:[d.jsxs(es,{onClick:()=>K(Z),children:[d.jsx($l,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(es,{onClick:()=>oe(Z.id),className:"text-red-600",children:[d.jsx(Us,{className:"h-4 w-4 mr-2"}),""]})]})]})]},Z.id))})]})})]}),d.jsxs(Fs,{value:"schedule",className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("h2",{className:"text-lg font-semibold",children:""}),d.jsxs("div",{className:"flex items-center gap-1 bg-muted rounded-lg p-1",children:[d.jsx("button",{onClick:()=>M(Math.max(1,N-1)),className:"p-1.5 rounded hover:bg-background transition-colors",children:d.jsx(bo,{className:"h-4 w-4"})}),d.jsxs("div",{className:"px-3 py-1 text-sm font-medium min-w-[80px] text-center",children:[" ",N," "]}),d.jsx("button",{onClick:()=>M(N+1),className:"p-1.5 rounded hover:bg-background transition-colors",children:d.jsx(ql,{className:"h-4 w-4"})})]}),d.jsx("span",{className:"text-xs text-muted-foreground",children:N%2===1?"":""})]}),d.jsxs(he,{size:"sm",onClick:xe,children:[d.jsx(Ii,{className:"h-4 w-4 mr-1"}),""]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("div",{className:"min-w-[800px]",children:[d.jsxs("div",{className:"grid grid-cols-8 gap-1 mb-1",children:[d.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground py-2",children:""}),Zm.map(Z=>d.jsx("div",{className:"text-center text-sm font-medium py-2 bg-muted rounded",children:Z},Z))]}),d.jsxs("div",{className:"grid grid-cols-8 gap-1 relative",children:[d.jsx("div",{className:"space-y-0",children:Qu.map((Z,Ae)=>d.jsx("div",{className:"h-8 text-xs text-muted-foreground text-right pr-2 flex items-center justify-end",children:Ae%2===0?Z:""},Z))}),[1,2,3,4,5,6,0].map(Z=>d.jsxs("div",{className:"relative bg-muted/30 rounded min-h-[832px]",children:[Qu.map((Ae,Ge)=>d.jsx("div",{className:"h-8 border-b border-dashed border-border/50"},Ge)),ge(Z).map(Ae=>{const Ge=Ve(Ae),$e=Ge.colorSet;return d.jsxs("div",{onClick:()=>pe(Ae),className:`absolute left-1 right-1 rounded px-2 py-1 cursor-pointer hover:brightness-95 transition-all border ${$e.bg} ${$e.border}`,style:{top:Ge.top,height:Ge.height},children:[d.jsx("p",{className:`text-xs font-medium truncate ${$e.text}`,children:Ae.name}),d.jsx("p",{className:`text-[10px] truncate ${$e.text} opacity-80`,children:Ae.location})]},Ae.id)})]},Z))]})]})}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:""}),C.length===0?d.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""}):d.jsx("div",{className:"space-y-2",children:C.map(Z=>{const Ae=Bl[parseInt(Z.color)%Bl.length],Ge={all:"",odd:"",even:""}[Z.weekType||"all"];return d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-3 h-3 rounded-full ${Ae.bg.replace("bg-","bg-").replace("100","400")}`}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("p",{className:"font-medium",children:Z.name}),d.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:Ge})]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[Zm[Z.day===0?6:Z.day-1]," ",Z.startTime,"-",Z.endTime,"  ",Z.location]})]})]}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>pe(Z),children:d.jsx($l,{className:"h-4 w-4"})}),d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500",onClick:()=>se(Z.id),children:d.jsx(Us,{className:"h-4 w-4"})})]})]},Z.id)})})]})]}),d.jsxs(Fs,{value:"todos",className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("h2",{className:"text-lg font-semibold",children:["",H.length>0&&d.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",H.length,")"]})]}),d.jsxs(he,{size:"sm",onClick:()=>p(!0),children:[d.jsx(Ii,{className:"h-4 w-4 mr-1"}),""]})]}),d.jsx("div",{className:"space-y-2",children:H.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(N1,{className:"h-12 w-12 mx-auto text-green-500 mb-3"}),d.jsx("p",{className:"text-muted-foreground",children:""})]}):H.map(Z=>d.jsx(Kt,{className:"group",children:d.jsx(Qt,{className:"p-3",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(jp,{checked:Z.completed,onCheckedChange:()=>i(Z.id),className:"mt-1"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-medium",children:Z.title}),Z.content&&d.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:Z.content}),(Z.dueDate||Z.dueTime)&&d.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[Z.dueDate&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(yo,{className:"h-3 w-3"}),Z.dueDate]}),Z.dueTime&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(ix,{className:"h-3 w-3"}),Z.dueTime]})]})]}),d.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>K(Z),children:d.jsx($l,{className:"h-4 w-4"})}),d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500",onClick:()=>oe(Z.id),children:d.jsx(Us,{className:"h-4 w-4"})})]})]})})},Z.id))})]})]}),d.jsx(vn,{open:m||g,onOpenChange:Z=>{Z||(p(!1),y(!1),A(null))},children:d.jsxs(yn,{className:"sm:max-w-md",children:[d.jsx(bn,{children:d.jsx(xn,{children:w?"":""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:z.title,onChange:Z=>ce({...z,title:Z.target.value}),placeholder:"..."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(Vs,{value:z.content,onChange:Z=>ce({...z,content:Z.target.value}),placeholder:"...",rows:3})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{type:"date",value:z.dueDate,onChange:Z=>ce({...z,dueDate:Z.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{type:"time",value:z.dueTime,onChange:Z=>ce({...z,dueTime:Z.target.value})})]})]})]}),d.jsxs(Hs,{children:[d.jsx(he,{variant:"outline",onClick:()=>{p(!1),y(!1),A(null)},children:""}),d.jsx(he,{onClick:w?X:B,children:w?"":""})]})]})}),d.jsx(vn,{open:L,onOpenChange:I,children:d.jsxs(yn,{className:"sm:max-w-md",children:[d.jsx(bn,{children:d.jsx(xn,{children:O?"":""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:F.name,onChange:Z=>$({...F,name:Z.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:F.location,onChange:Z=>$({...F,location:Z.target.value}),placeholder:" A301"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:Zm.map((Z,Ae)=>d.jsx("button",{onClick:()=>$({...F,day:Ae===6?0:Ae+1}),className:`p-2 text-xs rounded transition-colors ${(F.day===0?6:F.day-1)===Ae?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:Z.replace("","")},Z))})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{type:"time",value:F.startTime,onChange:Z=>$({...F,startTime:Z.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{type:"time",value:F.endTime,onChange:Z=>$({...F,endTime:Z.target.value})})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx("div",{className:"flex gap-2 flex-wrap",children:Bl.map((Z,Ae)=>d.jsx("button",{onClick:()=>$({...F,color:Ae.toString()}),className:`w-8 h-8 rounded-full ${Z.bg} border-2 ${Z.border} transition-all ${F.color===Ae.toString()?"ring-2 ring-primary ring-offset-2 scale-110":""}`},Ae))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx("div",{className:"flex gap-2",children:[{value:"all",label:""},{value:"odd",label:""},{value:"even",label:""}].map(Z=>d.jsx("button",{onClick:()=>$({...F,weekType:Z.value}),className:`flex-1 p-2 text-sm rounded transition-colors ${F.weekType===Z.value?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:Z.label},Z.value))})]})]}),d.jsxs(Hs,{children:[O&&d.jsx(he,{variant:"destructive",onClick:()=>{se(O.id),I(!1),P(null)},children:""}),d.jsx("div",{className:"flex-1"}),d.jsx(he,{variant:"outline",onClick:()=>{I(!1),P(null)},children:""}),d.jsx(he,{onClick:O?Y:J,children:O?"":""})]})]})})]})}var OE=["PageUp","PageDown"],LE=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],PE={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Fo="Slider",[Mp,mB,pB]=Ed(Fo),[IE]=Ms(Fo,[pB]),[gB,ih]=IE(Fo),BE=x.forwardRef((a,e)=>{const{name:t,min:n=0,max:i=100,step:o=1,orientation:l="horizontal",disabled:u=!1,minStepsBetweenThumbs:h=0,defaultValue:m=[n],value:p,onValueChange:g=()=>{},onValueCommit:y=()=>{},inverted:w=!1,form:A,...S}=a,E=x.useRef(new Set),C=x.useRef(0),N=l==="horizontal"?vB:yB,[M=[],L]=Ca({prop:p,defaultProp:m,onChange:W=>{[...E.current][C.current]?.focus(),g(W)}}),I=x.useRef(M);function O(W){const ie=AB(M,W);$(W,ie)}function P(W){$(W,C.current)}function F(){const W=I.current[C.current];M[C.current]!==W&&y(M)}function $(W,ie,{commit:le}={commit:!1}){const G=TB(o),fe=NB(Math.round((W-n)/o)*o+n,G),R=Kl(fe,[n,i]);L((U=[])=>{const H=wB(U,R,ie);if(_B(H,h*o)){C.current=H.indexOf(R);const z=String(H)!==String(U);return z&&le&&y(H),z?H:U}else return U})}return d.jsx(gB,{scope:a.__scopeSlider,name:t,disabled:u,min:n,max:i,valueIndexToChangeRef:C,thumbs:E.current,values:M,orientation:l,form:A,children:d.jsx(Mp.Provider,{scope:a.__scopeSlider,children:d.jsx(Mp.Slot,{scope:a.__scopeSlider,children:d.jsx(N,{"aria-disabled":u,"data-disabled":u?"":void 0,...S,ref:e,onPointerDown:Se(S.onPointerDown,()=>{u||(I.current=M)}),min:n,max:i,inverted:w,onSlideStart:u?void 0:O,onSlideMove:u?void 0:P,onSlideEnd:u?void 0:F,onHomeKeyDown:()=>!u&&$(n,0,{commit:!0}),onEndKeyDown:()=>!u&&$(i,M.length-1,{commit:!0}),onStepKeyDown:({event:W,direction:ie})=>{if(!u){const fe=OE.includes(W.key)||W.shiftKey&&LE.includes(W.key)?10:1,R=C.current,U=M[R],H=o*fe*ie;$(U+H,R,{commit:!0})}}})})})})});BE.displayName=Fo;var[zE,FE]=IE(Fo,{startEdge:"left",endEdge:"right",size:"width",direction:1}),vB=x.forwardRef((a,e)=>{const{min:t,max:n,dir:i,inverted:o,onSlideStart:l,onSlideMove:u,onSlideEnd:h,onStepKeyDown:m,...p}=a,[g,y]=x.useState(null),w=We(e,N=>y(N)),A=x.useRef(void 0),S=Mo(i),E=S==="ltr",C=E&&!o||!E&&o;function T(N){const M=A.current||g.getBoundingClientRect(),L=[0,M.width],O=Yg(L,C?[t,n]:[n,t]);return A.current=M,O(N-M.left)}return d.jsx(zE,{scope:a.__scopeSlider,startEdge:C?"left":"right",endEdge:C?"right":"left",direction:C?1:-1,size:"width",children:d.jsx(HE,{dir:S,"data-orientation":"horizontal",...p,ref:w,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const M=T(N.clientX);l?.(M)},onSlideMove:N=>{const M=T(N.clientX);u?.(M)},onSlideEnd:()=>{A.current=void 0,h?.()},onStepKeyDown:N=>{const L=PE[C?"from-left":"from-right"].includes(N.key);m?.({event:N,direction:L?-1:1})}})})}),yB=x.forwardRef((a,e)=>{const{min:t,max:n,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:u,onStepKeyDown:h,...m}=a,p=x.useRef(null),g=We(e,p),y=x.useRef(void 0),w=!i;function A(S){const E=y.current||p.current.getBoundingClientRect(),C=[0,E.height],N=Yg(C,w?[n,t]:[t,n]);return y.current=E,N(S-E.top)}return d.jsx(zE,{scope:a.__scopeSlider,startEdge:w?"bottom":"top",endEdge:w?"top":"bottom",size:"height",direction:w?1:-1,children:d.jsx(HE,{"data-orientation":"vertical",...m,ref:g,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const E=A(S.clientY);o?.(E)},onSlideMove:S=>{const E=A(S.clientY);l?.(E)},onSlideEnd:()=>{y.current=void 0,u?.()},onStepKeyDown:S=>{const C=PE[w?"from-bottom":"from-top"].includes(S.key);h?.({event:S,direction:C?-1:1})}})})}),HE=x.forwardRef((a,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:l,onEndKeyDown:u,onStepKeyDown:h,...m}=a,p=ih(Fo,t);return d.jsx(ze.span,{...m,ref:e,onKeyDown:Se(a.onKeyDown,g=>{g.key==="Home"?(l(g),g.preventDefault()):g.key==="End"?(u(g),g.preventDefault()):OE.concat(LE).includes(g.key)&&(h(g),g.preventDefault())}),onPointerDown:Se(a.onPointerDown,g=>{const y=g.target;y.setPointerCapture(g.pointerId),g.preventDefault(),p.thumbs.has(y)?y.focus():n(g)}),onPointerMove:Se(a.onPointerMove,g=>{g.target.hasPointerCapture(g.pointerId)&&i(g)}),onPointerUp:Se(a.onPointerUp,g=>{const y=g.target;y.hasPointerCapture(g.pointerId)&&(y.releasePointerCapture(g.pointerId),o(g))})})}),UE="SliderTrack",VE=x.forwardRef((a,e)=>{const{__scopeSlider:t,...n}=a,i=ih(UE,t);return d.jsx(ze.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:e})});VE.displayName=UE;var Rp="SliderRange",$E=x.forwardRef((a,e)=>{const{__scopeSlider:t,...n}=a,i=ih(Rp,t),o=FE(Rp,t),l=x.useRef(null),u=We(e,l),h=i.values.length,m=i.values.map(y=>qE(y,i.min,i.max)),p=h>1?Math.min(...m):0,g=100-Math.max(...m);return d.jsx(ze.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:u,style:{...a.style,[o.startEdge]:p+"%",[o.endEdge]:g+"%"}})});$E.displayName=Rp;var Dp="SliderThumb",GE=x.forwardRef((a,e)=>{const t=mB(a.__scopeSlider),[n,i]=x.useState(null),o=We(e,u=>i(u)),l=x.useMemo(()=>n?t().findIndex(u=>u.ref.current===n):-1,[t,n]);return d.jsx(bB,{...a,ref:o,index:l})}),bB=x.forwardRef((a,e)=>{const{__scopeSlider:t,index:n,name:i,...o}=a,l=ih(Dp,t),u=FE(Dp,t),[h,m]=x.useState(null),p=We(e,T=>m(T)),g=h?l.form||!!h.closest("form"):!0,y=rg(h),w=l.values[n],A=w===void 0?0:qE(w,l.min,l.max),S=SB(n,l.values.length),E=y?.[u.size],C=E?CB(E,A,u.direction):0;return x.useEffect(()=>{if(h)return l.thumbs.add(h),()=>{l.thumbs.delete(h)}},[h,l.thumbs]),d.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${A}% + ${C}px)`},children:[d.jsx(Mp.ItemSlot,{scope:a.__scopeSlider,children:d.jsx(ze.span,{role:"slider","aria-label":a["aria-label"]||S,"aria-valuemin":l.min,"aria-valuenow":w,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...o,ref:p,style:w===void 0?{display:"none"}:a.style,onFocus:Se(a.onFocus,()=>{l.valueIndexToChangeRef.current=n})})}),g&&d.jsx(YE,{name:i??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:w},n)]})});GE.displayName=Dp;var xB="RadioBubbleInput",YE=x.forwardRef(({__scopeSlider:a,value:e,...t},n)=>{const i=x.useRef(null),o=We(i,n),l=cg(e);return x.useEffect(()=>{const u=i.current;if(!u)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"value").set;if(l!==e&&p){const g=new Event("input",{bubbles:!0});p.call(u,e),u.dispatchEvent(g)}},[l,e]),d.jsx(ze.input,{style:{display:"none"},...t,ref:o,defaultValue:e})});YE.displayName=xB;function wB(a=[],e,t){const n=[...a];return n[t]=e,n.sort((i,o)=>i-o)}function qE(a,e,t){const o=100/(t-e)*(a-e);return Kl(o,[0,100])}function SB(a,e){return e>2?`Value ${a+1} of ${e}`:e===2?["Minimum","Maximum"][a]:void 0}function AB(a,e){if(a.length===1)return 0;const t=a.map(i=>Math.abs(i-e)),n=Math.min(...t);return t.indexOf(n)}function CB(a,e,t){const n=a/2,o=Yg([0,50],[0,n]);return(n-o(e)*t)*t}function EB(a){return a.slice(0,-1).map((e,t)=>a[t+1]-e)}function _B(a,e){if(e>0){const t=EB(a);return Math.min(...t)>=e}return!0}function Yg(a,e){return t=>{if(a[0]===a[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(a[1]-a[0]);return e[0]+n*(t-a[0])}}function TB(a){return(String(a).split(".")[1]||"").length}function NB(a,e){const t=Math.pow(10,e);return Math.round(a*t)/t}var jB=BE,MB=VE,RB=$E,DB=GE;function XE({className:a,defaultValue:e,value:t,min:n=0,max:i=100,...o}){const l=x.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[n,i],[t,e,n,i]);return d.jsxs(jB,{"data-slot":"slider",defaultValue:e,value:t,min:n,max:i,className:Pe("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a),...o,children:[d.jsx(MB,{"data-slot":"slider-track",className:Pe("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:d.jsx(RB,{"data-slot":"slider-range",className:Pe("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(u,h)=>d.jsx(DB,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},h))]})}const Jm=[{value:"javascript",label:"JavaScript",icon:"JS",color:"#f7df1e"},{value:"typescript",label:"TypeScript",icon:"TS",color:"#3178c6"},{value:"python",label:"Python",icon:"PY",color:"#3776ab"},{value:"java",label:"Java",icon:"JV",color:"#b07219"},{value:"cpp",label:"C++",icon:"C++",color:"#f34b7d"},{value:"c",label:"C",icon:"C",color:"#555555"},{value:"html",label:"HTML",icon:"HT",color:"#e34c26"},{value:"css",label:"CSS",icon:"CS",color:"#563d7c"},{value:"sql",label:"SQL",icon:"SQ",color:"#336791"},{value:"rust",label:"Rust",icon:"RS",color:"#dea584"},{value:"go",label:"Go",icon:"GO",color:"#00add8"},{value:"other",label:"",icon:"..",color:"#888888"}],Vw=[{name:"Darcula",bg:"#2b2b2b",sidebar:"#3c3f41",text:"#a9b7c6",keyword:"#cc7832",string:"#6a8759",comment:"#808080",number:"#6897bb",function:"#ffc66d",lineNumber:"#606366",selection:"#214283"},{name:"Light",bg:"#ffffff",sidebar:"#f5f5f5",text:"#000000",keyword:"#000080",string:"#008000",comment:"#808080",number:"#0000ff",function:"#795e26",lineNumber:"#237893",selection:"#add6ff"},{name:"Monokai",bg:"#272822",sidebar:"#3e3d32",text:"#f8f8f2",keyword:"#f92672",string:"#e6db74",comment:"#75715e",number:"#ae81ff",function:"#a6e22e",lineNumber:"#90908a",selection:"#49483e"},{name:"Oceanic",bg:"#1e2b35",sidebar:"#263740",text:"#d8dee9",keyword:"#c695c6",string:"#99c794",comment:"#65737e",number:"#f99157",function:"#6699cc",lineNumber:"#5f7885",selection:"#344a55"}];function kB(){try{const a=localStorage.getItem("coding-projects-v2");if(a)return JSON.parse(a)}catch{}return[]}function OB(a){try{localStorage.setItem("coding-projects-v2",JSON.stringify(a))}catch{}}function LB(){try{const a=localStorage.getItem("coding-editor-settings");if(a)return JSON.parse(a)}catch{}return{theme:0,fontSize:14}}function PB(a){try{localStorage.setItem("coding-editor-settings",JSON.stringify(a))}catch{}}function IB(){const[a,e]=x.useState(kB()),[t,n]=x.useState(""),[i,o]=x.useState(null),[l,u]=x.useState(!1),[h,m]=x.useState(!1),[p,g]=x.useState(!1),[y,w]=x.useState(!1),[A,S]=x.useState(LB()),[E,C]=x.useState(!1),[T,N]=x.useState({name:"",description:"",language:"javascript",code:""}),M=Vw[A.theme],L=x.useRef(null),I=x.useRef(null);x.useEffect(()=>{OB(a)},[a]),x.useEffect(()=>{PB(A)},[A]);const O=x.useMemo(()=>{if(!t.trim())return a;const j=t.toLowerCase();return a.filter(k=>k.name.toLowerCase().includes(j)||k.description.toLowerCase().includes(j)||k.language.toLowerCase().includes(j))},[a,t]),P=x.useMemo(()=>{const j={};return O.forEach(k=>{j[k.language]||(j[k.language]=[]),j[k.language].push(k)}),j},[O]),F=()=>{if(!T.name.trim()){we.error("");return}const j={id:Date.now().toString(),name:T.name,description:T.description,language:T.language,code:T.code,createdAt:Date.now(),updatedAt:Date.now()};e([j,...a]),N({name:"",description:"",language:"javascript",code:""}),u(!1),we.success("")},$=()=>{if(!i||!T.name.trim())return;const j=a.map(B=>B.id===i.id?{...B,...T,updatedAt:Date.now()}:B);e(j);const k={...i,...T,updatedAt:Date.now()};o(k),m(!1),C(!1),we.success("")},W=j=>{e(a.filter(k=>k.id!==j)),i?.id===j&&(o(null),g(!1)),we.success("")},ie=j=>{i&&(o({...i,code:j}),C(!0))},le=()=>{i&&(e(a.map(j=>j.id===i.id?{...j,code:i.code,updatedAt:Date.now()}:j)),C(!1),we.success(""))},G=()=>{i&&(N({name:i.name,description:i.description,language:i.language,code:i.code}),m(!0))},fe=()=>{N({name:"",description:"",language:"javascript",code:""}),u(!0)},R=j=>{const k=new Blob([j.code],{type:"text/plain"}),B=URL.createObjectURL(k),X=document.createElement("a");X.href=B,X.download=`${j.name}.${H(j.language)}`,X.click(),URL.revokeObjectURL(B),we.success("")},U=j=>{const k=j.target.files?.[0];if(!k)return;const B=new FileReader;B.onload=X=>{const K=X.target?.result,oe=z(k.name);N({name:k.name.replace(/\.[^/.]+$/,""),description:` ${k.name} `,language:oe,code:K}),u(!0)},B.readAsText(k),j.target.value=""},H=j=>({javascript:"js",typescript:"ts",python:"py",java:"java",cpp:"cpp",c:"c",html:"html",css:"css",sql:"sql",rust:"rs",go:"go"})[j]||"txt",z=j=>{const k=j.split(".").pop()?.toLowerCase()||"";return{js:"javascript",ts:"typescript",py:"python",java:"java",cpp:"cpp",c:"c",h:"c",html:"html",htm:"html",css:"css",sql:"sql",rs:"rust",go:"go"}[k]||"other"},ce=j=>Jm.find(k=>k.value===j)||Jm[11];return p&&i?d.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col animate-in fade-in duration-200",style:{backgroundColor:M.bg},children:[d.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b select-none",style:{backgroundColor:M.sidebar,borderColor:`${M.text}15`},children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:()=>{E&&le(),g(!1)},className:"flex items-center gap-1.5 px-2 py-1.5 rounded text-sm transition-all hover:brightness-110",style:{backgroundColor:`${M.text}15`,color:M.text},children:[d.jsx(bo,{className:"h-4 w-4"}),""]}),d.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded",style:{backgroundColor:`${M.text}08`},children:[d.jsx(ox,{className:"h-4 w-4",style:{color:ce(i.language).color}}),d.jsx("span",{style:{color:M.text,fontSize:"13px"},children:i.name}),E&&d.jsx("span",{className:"text-amber-400 text-xs",children:""})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:le,className:"flex items-center gap-1.5 px-3 py-1.5 rounded text-sm transition-all hover:brightness-110",style:{backgroundColor:E?"#365880":`${M.text}15`,color:E?"#fff":M.text},children:[d.jsx(ux,{className:"h-4 w-4"}),""]}),d.jsx("button",{onClick:()=>w(!0),className:"p-2 rounded transition-all hover:brightness-110",style:{backgroundColor:`${M.text}15`,color:M.text},children:d.jsx(Fp,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>{E&&le(),g(!1)},className:"p-2 rounded transition-all hover:brightness-110",style:{backgroundColor:`${M.text}15`,color:M.text},children:d.jsx(Fn,{className:"h-4 w-4"})})]})]}),d.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[d.jsx("div",{className:"w-12 flex-shrink-0 py-4 text-right pr-2 select-none overflow-hidden",style:{backgroundColor:M.bg,color:M.lineNumber,fontSize:`${A.fontSize}px`,lineHeight:"1.6",fontFamily:'"JetBrains Mono", "Fira Code", monospace'},children:i.code.split(`
`).map((j,k)=>d.jsx("div",{className:"h-[1.6em]",children:k+1},k))}),d.jsx("div",{className:"flex-1 relative overflow-auto",ref:I,children:d.jsx("textarea",{ref:L,value:i.code,onChange:j=>ie(j.target.value),className:"w-full min-h-full p-4 resize-none outline-none border-0",style:{backgroundColor:M.bg,color:M.text,fontSize:`${A.fontSize}px`,lineHeight:"1.6",fontFamily:'"JetBrains Mono", "Fira Code", monospace',tabSize:2},spellCheck:!1,placeholder:"// ..."})})]}),d.jsxs("div",{className:"flex items-center justify-between px-3 py-1 text-xs select-none",style:{backgroundColor:M.sidebar,color:M.text},children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{children:ce(i.language).label}),d.jsx("span",{children:"UTF-8"}),d.jsxs("span",{children:[i.code.length," "]}),d.jsxs("span",{children:[i.code.split(`
`).length," "]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("span",{children:[": ",A.fontSize,"px"]}),d.jsxs("span",{children:[": ",M.name]})]})]}),y&&d.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 animate-in fade-in duration-150",onClick:()=>w(!1),children:d.jsxs("div",{className:"w-full max-w-sm rounded-lg overflow-hidden shadow-2xl animate-in zoom-in-95 duration-200",style:{backgroundColor:M.sidebar},onClick:j=>j.stopPropagation(),children:[d.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",style:{borderColor:`${M.text}15`},children:[d.jsx("h3",{className:"font-semibold",style:{color:M.text},children:""}),d.jsx("button",{onClick:()=>w(!1),className:"p-1.5 rounded hover:brightness-110 transition-all",style:{color:M.text},children:d.jsx(Fn,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"p-4 space-y-5",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{style:{color:M.text},children:""}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:Vw.map((j,k)=>d.jsx("button",{onClick:()=>S({...A,theme:k}),className:`p-3 rounded-lg text-sm font-medium transition-all ${A.theme===k?"ring-2 ring-primary scale-[1.02]":"hover:scale-[1.02]"}`,style:{backgroundColor:j.bg,color:j.text,border:`1px solid ${A.theme===k?"var(--primary)":"transparent"}`},children:j.name},k))})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(Le,{style:{color:M.text},children:""}),d.jsxs("span",{className:"text-sm font-mono px-2 py-0.5 rounded",style:{backgroundColor:`${M.text}15`,color:M.text},children:[A.fontSize,"px"]})]}),d.jsx(XE,{value:[A.fontSize],onValueChange:j=>S({...A,fontSize:j[0]}),min:10,max:24,step:1})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{style:{color:M.text},children:""}),d.jsxs("div",{className:"p-3 rounded-lg font-mono text-sm",style:{backgroundColor:M.bg,color:M.text,fontSize:`${A.fontSize}px`},children:[d.jsx("span",{style:{color:M.keyword},children:"function"}),d.jsx("span",{children:" hello"}),d.jsx("span",{style:{color:M.function},children:"()"}),d.jsxs("span",{children:[" ","{"]}),d.jsx("br",{}),d.jsx("span",{children:"  "}),d.jsx("span",{style:{color:M.keyword},children:"return"}),d.jsx("span",{style:{color:M.string},children:' "Hello World"'}),d.jsx("span",{children:";"}),d.jsx("br",{}),d.jsx("span",{children:"}"})]})]})]})]})})]}):i?d.jsxs("div",{className:"h-full flex flex-col animate-in fade-in duration-200",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-muted/30",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs(he,{variant:"ghost",size:"sm",onClick:()=>{E&&le(),o(null)},children:[d.jsx(bo,{className:"h-4 w-4 mr-1"}),""]}),d.jsx("div",{className:"h-6 w-px bg-border"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ox,{className:"h-5 w-5",style:{color:ce(i.language).color}}),d.jsx("span",{className:"font-medium",children:i.name}),E&&d.jsx("span",{className:"text-amber-500 text-xs",children:" "})]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(he,{variant:"ghost",size:"icon",onClick:le,title:"",children:d.jsx(ux,{className:"h-4 w-4"})}),d.jsx(he,{variant:"ghost",size:"icon",onClick:()=>g(!0),title:"",children:d.jsx(sp,{className:"h-4 w-4"})}),d.jsx(he,{variant:"ghost",size:"icon",onClick:G,title:"",children:d.jsx(cx,{className:"h-4 w-4"})}),d.jsx(he,{variant:"ghost",size:"icon",onClick:()=>R(i),title:"",children:d.jsx(Xl,{className:"h-4 w-4"})}),d.jsx(he,{variant:"ghost",size:"icon",onClick:()=>W(i.id),title:"",className:"text-red-500 hover:text-red-600",children:d.jsx(Us,{className:"h-4 w-4"})})]})]}),d.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[d.jsx("div",{className:"w-10 flex-shrink-0 py-4 text-right pr-2 select-none bg-muted/20 text-muted-foreground text-sm font-mono",children:i.code.split(`
`).map((j,k)=>d.jsx("div",{className:"h-6",children:k+1},k))}),d.jsx("textarea",{value:i.code,onChange:j=>ie(j.target.value),className:"flex-1 w-full p-4 resize-none outline-none font-mono text-sm",style:{lineHeight:"1.5",backgroundColor:"#1e1e1e",color:"#d4d4d4"},placeholder:"// ...",spellCheck:!1})]})]}):d.jsxs("div",{className:"space-y-4 pb-20 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold",children:""}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," "]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(Le,{htmlFor:"import-file",className:"cursor-pointer",children:[d.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 rounded-md bg-muted hover:bg-muted/80 transition-all text-sm",children:[d.jsx(Wl,{className:"h-4 w-4"}),""]}),d.jsx(ft,{id:"import-file",type:"file",accept:".js,.ts,.py,.java,.cpp,.c,.html,.css,.sql,.rs,.go,.txt",className:"hidden",onChange:U})]}),d.jsxs(he,{size:"sm",onClick:fe,children:[d.jsx(Ii,{className:"h-4 w-4 mr-1"}),""]})]})]}),d.jsxs("div",{className:"relative",children:[d.jsx(k1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),d.jsx(ft,{placeholder:"...",value:t,onChange:j=>n(j.target.value),className:"pl-9"})]}),a.length===0?d.jsxs("div",{className:"text-center py-16 animate-in fade-in duration-500",children:[d.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl bg-primary/10 flex items-center justify-center",children:d.jsx(j1,{className:"h-10 w-10 text-primary"})}),d.jsx("p",{className:"text-muted-foreground mb-1",children:""}),d.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}):O.length===0?d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-muted-foreground",children:""})}):d.jsx("div",{className:"space-y-6",children:Object.entries(P).map(([j,k])=>{const B=ce(j);return d.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-300",children:[d.jsxs("h3",{className:"text-sm font-medium text-muted-foreground mb-3 flex items-center gap-2",children:[d.jsx("span",{className:"w-6 h-6 rounded-md flex items-center justify-center text-[10px] font-bold",style:{backgroundColor:`${B.color}20`,color:B.color},children:B.icon}),B.label,d.jsxs("span",{className:"text-xs",children:["(",k.length,")"]})]}),d.jsx("div",{className:"grid gap-2",children:k.map((X,K)=>d.jsx(Kt,{className:"cursor-pointer hover:border-primary/50 hover:shadow-sm transition-all duration-200 group animate-in fade-in slide-in-from-bottom-2",style:{animationDelay:`${K*50}ms`},onClick:()=>o(X),children:d.jsx(Qt,{className:"p-3",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(wa,{className:"h-4 w-4 text-primary"}),d.jsx("p",{className:"font-medium truncate",children:X.name})]}),X.description&&d.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-1",children:X.description}),d.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",new Date(X.updatedAt).toLocaleDateString("zh-CN")]})]}),d.jsxs(So,{children:[d.jsx(Ao,{asChild:!0,children:d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:oe=>oe.stopPropagation(),children:d.jsx(xo,{className:"h-4 w-4"})})}),d.jsxs(Co,{align:"end",children:[d.jsxs(es,{onClick:oe=>{oe.stopPropagation(),o(X),g(!0)},children:[d.jsx(qj,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(es,{onClick:oe=>{oe.stopPropagation(),o(X),G()},children:[d.jsx(cx,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(es,{onClick:oe=>{oe.stopPropagation(),R(X)},children:[d.jsx(Xl,{className:"h-4 w-4 mr-2"}),""]}),d.jsxs(es,{onClick:oe=>{oe.stopPropagation(),W(X.id)},className:"text-red-600",children:[d.jsx(Us,{className:"h-4 w-4 mr-2"}),""]})]})]})]})})},X.id))})]},j)})}),d.jsx(vn,{open:l||h,onOpenChange:j=>{j||(u(!1),m(!1))},children:d.jsxs(yn,{className:"sm:max-w-md",children:[d.jsx(bn,{children:d.jsx(xn,{children:h?"":""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:T.name,onChange:j=>N({...T,name:j.target.value}),placeholder:""})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{value:T.description,onChange:j=>N({...T,description:j.target.value}),placeholder:"..."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:Jm.map(j=>d.jsx("button",{onClick:()=>N({...T,language:j.value}),className:`p-2 rounded-md text-xs font-medium transition-all ${T.language===j.value?"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2":"bg-muted hover:bg-muted/80"}`,children:j.label},j.value))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(Vs,{value:T.code,onChange:j=>N({...T,code:j.target.value}),placeholder:"...",rows:5,className:"font-mono text-sm"})]})]}),d.jsxs(Hs,{children:[d.jsx(he,{variant:"outline",onClick:()=>{u(!1),m(!1)},children:""}),d.jsx(he,{onClick:h?$:F,children:h?"":""})]})]})})]})}const BB=()=>{const a=new(window.AudioContext||window.webkitAudioContext),e=a.createOscillator(),t=a.createGain();e.connect(t),t.connect(a.destination),e.frequency.value=800,e.type="sine",t.gain.setValueAtTime(.3,a.currentTime),t.gain.exponentialRampToValueAtTime(.01,a.currentTime+.5),e.start(a.currentTime),e.stop(a.currentTime+.5),setTimeout(()=>{const n=a.createOscillator(),i=a.createGain();n.connect(i),i.connect(a.destination),n.frequency.value=1e3,n.type="sine",i.gain.setValueAtTime(.3,a.currentTime),i.gain.exponentialRampToValueAtTime(.01,a.currentTime+.5),n.start(a.currentTime),n.stop(a.currentTime+.5)},200),setTimeout(()=>{const n=a.createOscillator(),i=a.createGain();n.connect(i),i.connect(a.destination),n.frequency.value=1200,n.type="sine",i.gain.setValueAtTime(.3,a.currentTime),i.gain.exponentialRampToValueAtTime(.01,a.currentTime+1),n.start(a.currentTime),n.stop(a.currentTime+1)},400)},zB=a=>{if(a==="none")return null;const e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate,n=t*2,i=e.createBuffer(1,n,t),o=i.getChannelData(0);for(let h=0;h<n;h++)if(a==="rain"){const m=Math.random()*2-1;o[h]=($w+.02*m)/1.02,$w=o[h],o[h]*=3.5}else if(a==="wind"){const m=Math.random()*2-1;o[h]=m*.3}else if(a==="waves"){const m=h/t,p=.1+Math.sin(m*.5)*.05;o[h]=Math.sin(m*p*Math.PI*2)*.3}const l=e.createBufferSource();l.buffer=i,l.loop=!0;const u=e.createGain();if(u.gain.value=.3,a==="wind"){const h=e.createBiquadFilter();h.type="lowpass",h.frequency.value=400,l.connect(h),h.connect(u)}else l.connect(u);return u.connect(e.destination),l.start(),{audioContext:e,noiseNode:l,gainNode:u}};let $w=0;function FB(){const[a,e]=x.useState(!1),[t,n]=x.useState(!1),[i,o]=x.useState(!1),[l,u]=x.useState(0),[h,m]=x.useState({mode:"countdown",minutes:25,soundEnabled:!0,ambientSound:"none",ambientVolume:30}),[p,g]=x.useState(25),[y,w]=x.useState(null),[A,S]=x.useState(""),E=x.useRef(null),C=x.useRef(null),T=x.useRef(null);x.useEffect(()=>()=>{N(),E.current&&clearInterval(E.current)},[]);const N=()=>{if(C.current){try{C.current.noiseNode.stop(),C.current.audioContext.close()}catch{}C.current=null}T.current&&(T.current.pause(),T.current=null)},M=()=>{if(N(),y){const R=new Audio(y);R.loop=!0,R.volume=h.ambientVolume/100,R.play().catch(()=>{we.error("")}),T.current=R}else if(h.ambientSound!=="none"){const R=zB(h.ambientSound);R&&(R.gainNode.gain.value=h.ambientVolume/100,C.current=R)}},L=x.useCallback(()=>{h.soundEnabled&&BB()},[h.soundEnabled]),I=x.useCallback(()=>{h.mode==="countdown"||h.mode==="custom"?u(h.minutes*60):u(0),o(!0),M()},[h.mode,h.minutes,y,h.ambientSound,h.ambientVolume]),O=x.useCallback(()=>{o(!1),N(),E.current&&(clearInterval(E.current),E.current=null)},[]),P=x.useCallback(()=>{O(),h.mode==="countdown"||h.mode==="custom"?u(h.minutes*60):u(0)},[h.mode,h.minutes,O]),F=x.useCallback(()=>{O(),u(0)},[O]);x.useEffect(()=>(i&&(E.current=setInterval(()=>{u(R=>h.mode==="countdown"||h.mode==="custom"?R<=1?(O(),L(),we.success(" ",{duration:5e3,icon:""}),0):R-1:R+1)},1e3)),()=>{E.current&&clearInterval(E.current)}),[i,h.mode,O,L]);const $=R=>{const U=Math.floor(R/3600),H=Math.floor(R%3600/60),z=R%60;return U>0?`${U}:${H.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}`:`${H.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}`},W=()=>!i&&l===0&&(h.mode==="countdown"||h.mode==="custom")?$(h.minutes*60):$(l),ie=()=>{if(h.mode==="countup")return 0;const R=h.minutes*60;return R===0?0:(R-l)/R*100},le=()=>{m(R=>({...R,minutes:p})),i||u(p*60),n(!1),we.success("")},G=R=>{const U=R.target.files?.[0];if(U){const H=URL.createObjectURL(U);w(H),S(U.name),we.success("")}},fe=()=>{y&&URL.revokeObjectURL(y),w(null),S(""),we.success("")};return d.jsxs(d.Fragment,{children:[d.jsxs(he,{variant:"ghost",size:"sm",onClick:()=>e(!0),className:"gap-2",children:[d.jsx(EM,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:""}),i&&d.jsx("span",{className:"ml-1 text-xs font-mono",children:W()})]}),d.jsx(vn,{open:a,onOpenChange:R=>{e(!R&&i?!1:R)},children:d.jsxs(yn,{className:"max-w-sm",children:[d.jsx(bn,{children:d.jsxs(xn,{className:"flex items-center justify-between",children:[d.jsx("span",{children:""}),d.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>n(!0),children:d.jsx(Fp,{className:"h-4 w-4"})})]})}),d.jsxs("div",{className:"py-6",children:[d.jsxs("div",{className:"relative flex items-center justify-center mb-8",children:[d.jsxs("svg",{className:"w-56 h-56 transform -rotate-90",children:[d.jsx("circle",{cx:"112",cy:"112",r:"100",fill:"none",stroke:"currentColor",strokeWidth:"12",className:"text-muted"}),d.jsx("circle",{cx:"112",cy:"112",r:"100",fill:"none",stroke:"currentColor",strokeWidth:"12",strokeLinecap:"round",className:"text-primary transition-all duration-1000",strokeDasharray:`${2*Math.PI*100}`,strokeDashoffset:`${2*Math.PI*100*(1-ie()/100)}`})]}),d.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[d.jsx("span",{className:"text-5xl font-mono font-bold",children:W()}),d.jsxs("span",{className:"text-sm text-muted-foreground mt-2",children:[h.mode==="countdown"&&"",h.mode==="countup"&&"",h.mode==="custom"&&` ${h.minutes}`]}),h.ambientSound!=="none"&&d.jsxs("span",{className:"text-xs text-primary mt-1 flex items-center gap-1",children:[h.ambientSound==="rain"&&d.jsx(ax,{className:"h-3 w-3"}),h.ambientSound==="wind"&&d.jsx(mx,{className:"h-3 w-3"}),h.ambientSound==="waves"&&d.jsx(fx,{className:"h-3 w-3"}),""]}),y&&d.jsxs("span",{className:"text-xs text-primary mt-1 flex items-center gap-1",children:[d.jsx(Tm,{className:"h-3 w-3"}),""]})]})]}),d.jsxs("div",{className:"flex items-center justify-center gap-3",children:[i?d.jsxs(he,{size:"lg",variant:"outline",onClick:O,className:"gap-2 px-8",children:[d.jsx(nM,{className:"h-5 w-5"}),""]}):d.jsxs(he,{size:"lg",onClick:I,className:"gap-2 px-8",children:[d.jsx(lM,{className:"h-5 w-5"}),""]}),d.jsxs(he,{size:"lg",variant:"outline",onClick:P,disabled:l===0&&!i,className:"gap-2",children:[d.jsx(fM,{className:"h-5 w-5"}),""]}),d.jsx(he,{size:"lg",variant:"ghost",onClick:()=>m(R=>({...R,soundEnabled:!R.soundEnabled})),className:"gap-2",children:h.soundEnabled?d.jsx(dx,{className:"h-5 w-5"}):d.jsx(hx,{className:"h-5 w-5"})})]}),d.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[d.jsx(he,{variant:h.mode==="countdown"?"default":"outline",size:"sm",onClick:()=>{m(R=>({...R,mode:"countdown",minutes:25})),g(25),F()},children:"25"}),d.jsx(he,{variant:h.mode==="countup"?"default":"outline",size:"sm",onClick:()=>{m(R=>({...R,mode:"countup"})),F()},children:""}),d.jsx(he,{variant:h.mode==="custom"?"default":"outline",size:"sm",onClick:()=>{m(R=>({...R,mode:"custom",minutes:p})),F()},children:""})]})]})]})}),d.jsx(vn,{open:t,onOpenChange:n,children:d.jsxs(yn,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[d.jsx(bn,{children:d.jsx(xn,{children:""})}),d.jsxs("div",{className:"space-y-6 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsx(ft,{type:"number",min:1,max:180,value:p,onChange:R=>g(Math.max(1,Math.min(180,parseInt(R.target.value)||1)))})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(Le,{children:""}),d.jsx(he,{variant:"ghost",size:"sm",onClick:()=>m(R=>({...R,soundEnabled:!R.soundEnabled})),children:h.soundEnabled?d.jsx(dx,{className:"h-4 w-4"}):d.jsx(hx,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(Le,{children:""}),d.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[d.jsx(he,{variant:h.ambientSound==="none"?"default":"outline",size:"sm",onClick:()=>m(R=>({...R,ambientSound:"none"})),children:""}),d.jsxs(he,{variant:h.ambientSound==="rain"?"default":"outline",size:"sm",onClick:()=>m(R=>({...R,ambientSound:"rain"})),className:"gap-1",children:[d.jsx(ax,{className:"h-3 w-3"}),""]}),d.jsxs(he,{variant:h.ambientSound==="wind"?"default":"outline",size:"sm",onClick:()=>m(R=>({...R,ambientSound:"wind"})),className:"gap-1",children:[d.jsx(mx,{className:"h-3 w-3"}),""]}),d.jsxs(he,{variant:h.ambientSound==="waves"?"default":"outline",size:"sm",onClick:()=>m(R=>({...R,ambientSound:"waves"})),className:"gap-1",children:[d.jsx(fx,{className:"h-3 w-3"}),""]})]})]}),h.ambientSound!=="none"&&d.jsxs("div",{className:"space-y-2",children:[d.jsxs(Le,{children:[" (",h.ambientVolume,"%)"]}),d.jsx(XE,{value:[h.ambientVolume],onValueChange:R=>m(U=>({...U,ambientVolume:R[0]})),min:0,max:100,step:5})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(Le,{children:""}),y?d.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[d.jsx(Tm,{className:"h-4 w-4 text-primary"}),d.jsx("span",{className:"flex-1 text-sm truncate",children:A}),d.jsx(he,{variant:"ghost",size:"sm",onClick:fe,children:""})]}):d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"file",accept:"audio/*",onChange:G,className:"hidden",id:"music-upload"}),d.jsx("label",{htmlFor:"music-upload",className:"flex-1",children:d.jsx(he,{variant:"outline",className:"w-full gap-2",asChild:!0,children:d.jsxs("span",{children:[d.jsx(Tm,{className:"h-4 w-4"}),""]})})})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:" MP3, WAV, OGG "})]})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx(he,{variant:"outline",onClick:()=>n(!1),children:""}),d.jsx(he,{onClick:le,children:""})]})]})})]})}const HB=[{id:"schedule",label:"",icon:yo},{id:"coding",label:"",icon:j1},{id:"library",label:"",icon:D1},{id:"projects",label:"",icon:M1}];function UB(){const{categories:a,projects:e,notes:t,sync:n,isLoaded:i,addBook:o,updateBook:l,deleteBook:u,getBook:h,filterBooks:m,uploadFile:p,downloadFile:g,deleteBookFile:y,addPDFAnnotation:w,updatePDFAnnotation:A,deletePDFAnnotation:S,getBookPDFAnnotations:E,addProject:C,deleteProject:T,addProjectKnowledge:N,addProjectLesson:M,addProjectFile:L,deleteProjectFile:I,downloadProjectFile:O,addNote:P,updateNote:F,deleteNote:$,toggleNoteComplete:W,addCategory:ie,deleteCategory:le,getAllTags:G,getStats:fe,exportData:R,importData:U,regenerateSyncCode:H,syncDataToCloud:z,syncDataFromCloud:ce,mergeData:j}=ER(),[k,B]=x.useState(null),[X,K]=x.useState(!1),[oe,J]=x.useState({}),[Y,se]=x.useState("schedule"),[pe,xe]=x.useState(!1),[ge,Ve]=x.useState(null),[Oe,Z]=x.useState(null),[Ae,Ge]=x.useState(!1),[$e,ut]=x.useState(!1),[rn,Tt]=x.useState(""),[At,Ut]=x.useState(!1),[Mt,ps]=x.useState(""),Zt=k?h(k):null,Rt=Oe?h(Oe):null,Pn=m(oe),Jt=G(),Vt=fe();x.useEffect(()=>()=>{ge&&URL.revokeObjectURL(ge)},[ge]);const Sn=be=>{B(be.id)},cn=()=>{B(null)},Ds=be=>{J(Ie=>({...Ie,searchQuery:be}))},re=be=>{J(Ie=>({...Ie,...be}))},ye=async(be,Ie)=>{if(Ie.size>104857600){we.error("100MB");return}await p(be,Ie),we.success("")},Ee=async be=>{const Ie=h(be);if(!Ie?.fileId){we.error("");return}try{const He=await g(Ie.fileId);if(He){ge&&URL.revokeObjectURL(ge);const gt=new Blob([He.data],{type:He.type}),ot=URL.createObjectURL(gt);Ve(ot),Z(be),xe(!0)}else we.error("")}catch{we.error("")}},et=async be=>{const Ie=h(be);if(!Ie?.fileId){we.error("");return}try{const He=await g(Ie.fileId);if(He){const ot=new TextDecoder("utf-8").decode(He.data);ps(ot),Z(be),Ut(!0)}else we.error("")}catch{we.error("")}},pt=async(be,Ie)=>{try{const He=await Ie.arrayBuffer(),gt=new Blob([He],{type:Ie.type}),ot=URL.createObjectURL(gt);return l(be,{coverUrl:ot}),Promise.resolve()}catch(He){return we.error(""),Promise.reject(He)}},tt=be=>{Rt&&w({...be,bookId:Rt.id})},Dt=be=>{if(ge&&Rt?.fileName){const Ie=document.createElement("a");if(Ie.href=ge,Ie.download=Rt.fileName,Ie.click(),be){const He=E(Rt.id);if(He.length>0){const gt=He.sort(($t,ks)=>$t.page-ks.page||new Date($t.createdAt).getTime()-new Date(ks.createdAt).getTime()).map(($t,ks)=>`[${ks+1}] ${$t.page}
${$t.content}
: ${new Date($t.createdAt).toLocaleString()}
`).join(`
---

`),ot=`${Rt.title}
: ${Rt.author}
: ${new Date().toLocaleString()}
 ${He.length} 

==================

${gt}`,Dn=new Blob([ot],{type:"text/plain;charset=utf-8"}),Xs=URL.createObjectURL(Dn),dn=document.createElement("a");dn.href=Xs,dn.download=`${Rt.title}_.txt`,dn.click(),URL.revokeObjectURL(Xs)}}we.success("")}},kt=()=>{const be=R(),Ie=new Blob([be],{type:"application/json"}),He=URL.createObjectURL(Ie),gt=document.createElement("a");gt.href=He,gt.download=`knowledge-library-backup-${new Date().toISOString().split("T")[0]}.json`,gt.click(),URL.revokeObjectURL(He),we.success("")},un=be=>U(be)?(we.success(""),!0):(we.error(""),!1),Un=()=>{const be=n.syncCode||H();z(be,{books:Pn,categories:a,pdfAnnotations:[],projects:e,notes:t,sync:{...n,syncCode:be}})?we.success(""):we.error(""),ut(!0)},Fe=()=>{if(!rn.trim()){we.error("");return}const be=ce(rn.toUpperCase());be?(j(be),we.success(""),ut(!1),Tt("")):we.error("")};return i?d.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[d.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:d.jsxs("div",{className:"container mx-auto max-w-6xl px-4 flex h-14 items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Oo,{className:"h-6 w-6 text-primary"}),d.jsx("h1",{className:"text-lg font-semibold",children:""}),d.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"v1.4.0"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(he,{variant:"ghost",size:"icon",onClick:()=>se("stats"),className:Y==="stats"?"text-primary":"",title:"",children:d.jsx(ej,{className:"h-5 w-5"})}),d.jsx(FB,{}),d.jsxs(he,{variant:"ghost",size:"sm",onClick:Un,className:"gap-2",children:[d.jsx(dM,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:""})]}),d.jsxs(pS,{open:Ae,onOpenChange:Ge,children:[d.jsx(gS,{asChild:!0,children:d.jsx(he,{variant:"ghost",size:"icon",children:d.jsx(Fp,{className:"h-5 w-5"})})}),d.jsxs(vS,{side:"right",className:"w-full sm:max-w-md",children:[d.jsx(yS,{children:d.jsx(bS,{children:""})}),d.jsxs("div",{className:"py-4 space-y-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[d.jsx(SM,{className:"h-4 w-4"}),""]}),d.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[d.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:""}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("code",{className:"flex-1 p-2 bg-background rounded text-lg font-mono tracking-wider",children:n.syncCode}),d.jsx(he,{size:"sm",variant:"outline",onClick:()=>{const be=H();we.success(": "+be)},children:""})]}),d.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-sm font-medium",children:""}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs(he,{variant:"outline",className:"w-full gap-2",onClick:kt,children:[d.jsx(Xl,{className:"h-4 w-4"}),""]}),d.jsxs("label",{className:"flex",children:[d.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:be=>{const Ie=be.target.files?.[0];if(Ie){const He=new FileReader;He.onload=gt=>{un(gt.target?.result)},He.readAsText(Ie)}}}),d.jsx(he,{variant:"outline",className:"w-full gap-2",asChild:!0,children:d.jsxs("span",{children:[d.jsx(gj,{className:"h-4 w-4"}),""]})})]})]})]}),d.jsx(P3,{categories:a,onAddCategory:ie,onDeleteCategory:le}),d.jsxs("div",{className:"pt-4 border-t text-center",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:" v1.4.0"}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]})]})]})]})]})}),d.jsxs("main",{className:"flex-1 container mx-auto max-w-6xl px-4 py-6 pb-28",children:[d.jsxs(Bp,{value:Y,onValueChange:se,className:"w-full",children:[d.jsx(Fs,{value:"schedule",className:"mt-0",children:d.jsx(fB,{notes:t,onAddNote:P,onUpdateNote:F,onDeleteNote:$,onToggleComplete:W})}),d.jsx(Fs,{value:"coding",className:"mt-0",children:d.jsx(IB,{})}),d.jsx(Fs,{value:"library",className:"mt-0",children:Zt?d.jsx($P,{book:Zt,categories:a,onBack:cn,onUpdate:l,onDelete:be=>{u(be),cn(),we.success("")},onAddAnnotation:(be,Ie,He)=>{const gt=h(be);gt&&(l(be,{annotations:[...gt.annotations,{id:VB(),content:Ie,page:He,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]}),we.success(""))},onUpdateAnnotation:(be,Ie,He)=>{const gt=h(be);gt&&(l(be,{annotations:gt.annotations.map(ot=>ot.id===Ie?{...ot,content:He,updatedAt:new Date().toISOString()}:ot)}),we.success(""))},onDeleteAnnotation:(be,Ie)=>{const He=h(be);He&&(l(be,{annotations:He.annotations.filter(gt=>gt.id!==Ie)}),we.success(""))},onUploadFile:ye,onDeleteFile:y,onReadPDF:()=>Ee(Zt.id),onReadText:()=>et(Zt.id),hasFile:!!Zt.fileId,onUploadCover:pt}):d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"max-w-2xl mx-auto w-full",children:d.jsx(I3,{value:oe.searchQuery||"",onChange:Ds,placeholder:"..."})}),Pn.length===0?d.jsxs("div",{className:"text-center py-16 space-y-4 max-w-md mx-auto",children:[d.jsx(D1,{className:"mx-auto h-12 w-12 text-muted-foreground"}),d.jsx("p",{className:"text-lg text-muted-foreground",children:""}),d.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}):d.jsx(PP,{books:Pn,categories:a,filter:oe,onFilterChange:re,onBookClick:Sn,allTags:Jt,onEditBook:be=>B(be.id),onDeleteBook:be=>{u(be),we.success("")}})]})}),d.jsx(Fs,{value:"projects",className:"mt-0",children:d.jsx(oB,{projects:e,onAddProject:C,onDeleteProject:T,onAddKnowledge:N,onAddLesson:M,onAddFile:L,onDeleteFile:I,onDownloadFile:O})}),d.jsx(Fs,{value:"stats",className:"mt-0",children:d.jsx(a3,{stats:Vt})})]}),Y==="library"&&!Zt&&d.jsx("button",{onClick:()=>K(!0),className:"fixed bottom-20 right-6 z-40 w-12 h-12 rounded-full bg-primary text-primary-foreground shadow-lg hover:shadow-xl hover:bg-primary/90 transition-all duration-200 flex items-center justify-center","aria-label":"",children:d.jsx(Wl,{className:"h-6 w-6"})})]}),d.jsx("nav",{className:"fixed bottom-0 left-0 right-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 z-50",children:d.jsx("div",{className:"container mx-auto max-w-6xl px-4",children:d.jsx("div",{className:"flex justify-around h-16 items-center",children:HB.map(be=>{const Ie=be.icon,He=Y===be.id;return d.jsxs("button",{onClick:()=>{se(be.id),cn()},className:`flex flex-col items-center gap-1 px-2 py-2 transition-colors duration-200 ${He?"text-primary":"text-muted-foreground"}`,children:[d.jsx(Ie,{className:"h-5 w-5"}),d.jsx("span",{className:"text-xs font-medium leading-none",children:be.label}),He&&d.jsx("div",{className:"absolute bottom-1 w-6 h-0.5 bg-primary rounded-full"})]},be.id)})})})}),d.jsx(YP,{open:X,onOpenChange:K,categories:a,onAdd:o,allTags:Jt}),d.jsx(vn,{open:pe,onOpenChange:xe,children:d.jsxs(yn,{className:"max-w-5xl h-[90vh] p-0 flex flex-col",showCloseButton:!1,children:[d.jsx(bn,{className:"p-4 border-b flex flex-row items-center justify-between",children:d.jsxs(xn,{className:"flex items-center gap-2",children:[d.jsx(wa,{className:"h-5 w-5"}),Rt?.title||""]})}),d.jsx("div",{className:"flex-1 overflow-hidden",children:ge&&Rt&&d.jsx(F5,{fileUrl:ge,book:Rt,annotations:E(Rt.id),onAddAnnotation:tt,onUpdateAnnotation:A,onDeleteAnnotation:S,onDownloadFile:Dt})})]})}),At&&Rt&&d.jsx(iB,{content:Mt,title:Rt.title,bookId:Rt.id,onClose:()=>{Ut(!1),ps("")}}),d.jsx(vn,{open:$e,onOpenChange:ut,children:d.jsxs(yn,{children:[d.jsx(bn,{children:d.jsx(xn,{children:""})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg text-center",children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:""}),d.jsx("code",{className:"text-2xl font-mono tracking-widest",children:n.syncCode})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Le,{children:""}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ft,{placeholder:"",value:rn,onChange:be=>Tt(be.target.value.toUpperCase()),maxLength:6}),d.jsx(he,{onClick:Fe,children:""})]})]})]})]})}),d.jsx(vR,{position:"top-center",toastOptions:{duration:2e3},style:{top:"20%"}})]}):d.jsx("div",{className:"flex items-center justify-center h-screen bg-background",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function VB(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}pT.createRoot(document.getElementById("root")).render(d.jsx(x.StrictMode,{children:d.jsx(UB,{})}));
