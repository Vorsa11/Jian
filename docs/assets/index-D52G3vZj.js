var mw=s=>{throw TypeError(s)};var Nm=(s,e,t)=>e.has(s)||mw("Cannot "+t);var Mt=(s,e,t)=>(Nm(s,e,"read from private field"),t?t.call(s):e.get(s)),ui=(s,e,t)=>e.has(s)?mw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),ns=(s,e,t,n)=>(Nm(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),di=(s,e,t)=>(Nm(s,e,"access private method"),t);var gw=(s,e,t,n)=>({set _(i){ns(s,e,i,t)},get _(){return Mt(s,e,n)}});function wk(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in s)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(s,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function cv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var km={exports:{}},gc={};var vw;function Sk(){if(vw)return gc;vw=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:s,type:n,key:l,ref:i!==void 0?i:null,props:a}}return gc.Fragment=e,gc.jsx=t,gc.jsxs=t,gc}var yw;function _k(){return yw||(yw=1,km.exports=Sk()),km.exports}var h=_k(),jm={exports:{}},Ye={};var bw;function Ak(){if(bw)return Ye;bw=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function b(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function A(k,O,B){this.props=k,this.context=O,this.refs=E,this.updater=B||_}A.prototype.isReactComponent={},A.prototype.setState=function(k,O){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,O,"setState")},A.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function N(){}N.prototype=A.prototype;function T(k,O,B){this.props=k,this.context=O,this.refs=E,this.updater=B||_}var j=T.prototype=new N;j.constructor=T,w(j,A.prototype),j.isPureReactComponent=!0;var P=Array.isArray;function L(){}var M={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function F(k,O,B){var q=B.ref;return{$$typeof:s,type:k,key:O,ref:q!==void 0?q:null,props:B}}function G(k,O){return F(k.type,O,k.props)}function K(k){return typeof k=="object"&&k!==null&&k.$$typeof===s}function ae(k){var O={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(B){return O[B]})}var X=/\/+/g;function H(k,O){return typeof k=="object"&&k!==null&&k.key!=null?ae(""+k.key):O.toString(36)}function ie(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(L,L):(k.status="pending",k.then(function(O){k.status==="pending"&&(k.status="fulfilled",k.value=O)},function(O){k.status==="pending"&&(k.status="rejected",k.reason=O)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function R(k,O,B,q,J){var ue=typeof k;(ue==="undefined"||ue==="boolean")&&(k=null);var ee=!1;if(k===null)ee=!0;else switch(ue){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(k.$$typeof){case s:case e:ee=!0;break;case m:return ee=k._init,R(ee(k._payload),O,B,q,J)}}if(ee)return J=J(k),ee=q===""?"."+H(k,0):q,P(J)?(B="",ee!=null&&(B=ee.replace(X,"$&/")+"/"),R(J,O,B,"",function(ge){return ge})):J!=null&&(K(J)&&(J=G(J,B+(J.key==null||k&&k.key===J.key?"":(""+J.key).replace(X,"$&/")+"/")+ee)),O.push(J)),1;ee=0;var Y=q===""?".":q+":";if(P(k))for(var oe=0;oe<k.length;oe++)q=k[oe],ue=Y+H(q,oe),ee+=R(q,O,B,ue,J);else if(oe=b(k),typeof oe=="function")for(k=oe.call(k),oe=0;!(q=k.next()).done;)q=q.value,ue=Y+H(q,oe++),ee+=R(q,O,B,ue,J);else if(ue==="object"){if(typeof k.then=="function")return R(ie(k),O,B,q,J);throw O=String(k),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return ee}function $(k,O,B){if(k==null)return k;var q=[],J=0;return R(k,q,"","",function(ue){return O.call(B,ue,J++)}),q}function U(k){if(k._status===-1){var O=k._result;O=O(),O.then(function(B){(k._status===0||k._status===-1)&&(k._status=1,k._result=B)},function(B){(k._status===0||k._status===-1)&&(k._status=2,k._result=B)}),k._status===-1&&(k._status=0,k._result=O)}if(k._status===1)return k._result.default;throw k._result}var z=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},le={map:$,forEach:function(k,O,B){$(k,function(){O.apply(this,arguments)},B)},count:function(k){var O=0;return $(k,function(){O++}),O},toArray:function(k){return $(k,function(O){return O})||[]},only:function(k){if(!K(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Ye.Activity=g,Ye.Children=le,Ye.Component=A,Ye.Fragment=t,Ye.Profiler=i,Ye.PureComponent=T,Ye.StrictMode=n,Ye.Suspense=d,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(k){return M.H.useMemoCache(k)}},Ye.cache=function(k){return function(){return k.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(k,O,B){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var q=w({},k.props),J=k.key;if(O!=null)for(ue in O.key!==void 0&&(J=""+O.key),O)!I.call(O,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&O.ref===void 0||(q[ue]=O[ue]);var ue=arguments.length-2;if(ue===1)q.children=B;else if(1<ue){for(var ee=Array(ue),Y=0;Y<ue;Y++)ee[Y]=arguments[Y+2];q.children=ee}return F(k.type,J,q)},Ye.createContext=function(k){return k={$$typeof:l,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:a,_context:k},k},Ye.createElement=function(k,O,B){var q,J={},ue=null;if(O!=null)for(q in O.key!==void 0&&(ue=""+O.key),O)I.call(O,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(J[q]=O[q]);var ee=arguments.length-2;if(ee===1)J.children=B;else if(1<ee){for(var Y=Array(ee),oe=0;oe<ee;oe++)Y[oe]=arguments[oe+2];J.children=Y}if(k&&k.defaultProps)for(q in ee=k.defaultProps,ee)J[q]===void 0&&(J[q]=ee[q]);return F(k,ue,J)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(k){return{$$typeof:c,render:k}},Ye.isValidElement=K,Ye.lazy=function(k){return{$$typeof:m,_payload:{_status:-1,_result:k},_init:U}},Ye.memo=function(k,O){return{$$typeof:f,type:k,compare:O===void 0?null:O}},Ye.startTransition=function(k){var O=M.T,B={};M.T=B;try{var q=k(),J=M.S;J!==null&&J(B,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(L,z)}catch(ue){z(ue)}finally{O!==null&&B.types!==null&&(O.types=B.types),M.T=O}},Ye.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ye.use=function(k){return M.H.use(k)},Ye.useActionState=function(k,O,B){return M.H.useActionState(k,O,B)},Ye.useCallback=function(k,O){return M.H.useCallback(k,O)},Ye.useContext=function(k){return M.H.useContext(k)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(k,O){return M.H.useDeferredValue(k,O)},Ye.useEffect=function(k,O){return M.H.useEffect(k,O)},Ye.useEffectEvent=function(k){return M.H.useEffectEvent(k)},Ye.useId=function(){return M.H.useId()},Ye.useImperativeHandle=function(k,O,B){return M.H.useImperativeHandle(k,O,B)},Ye.useInsertionEffect=function(k,O){return M.H.useInsertionEffect(k,O)},Ye.useLayoutEffect=function(k,O){return M.H.useLayoutEffect(k,O)},Ye.useMemo=function(k,O){return M.H.useMemo(k,O)},Ye.useOptimistic=function(k,O){return M.H.useOptimistic(k,O)},Ye.useReducer=function(k,O,B){return M.H.useReducer(k,O,B)},Ye.useRef=function(k){return M.H.useRef(k)},Ye.useState=function(k){return M.H.useState(k)},Ye.useSyncExternalStore=function(k,O,B){return M.H.useSyncExternalStore(k,O,B)},Ye.useTransition=function(){return M.H.useTransition()},Ye.version="19.2.3",Ye}var xw;function uv(){return xw||(xw=1,jm.exports=Ak()),jm.exports}var S=uv();const ye=cv(S),dv=wk({__proto__:null,default:ye},[S]);var Rm={exports:{}},vc={},Dm={exports:{}},Mm={};var ww;function Ek(){return ww||(ww=1,(function(s){function e(R,$){var U=R.length;R.push($);e:for(;0<U;){var z=U-1>>>1,le=R[z];if(0<i(le,$))R[z]=$,R[U]=le,U=z;else break e}}function t(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var $=R[0],U=R.pop();if(U!==$){R[0]=U;e:for(var z=0,le=R.length,k=le>>>1;z<k;){var O=2*(z+1)-1,B=R[O],q=O+1,J=R[q];if(0>i(B,U))q<le&&0>i(J,B)?(R[z]=J,R[q]=U,z=q):(R[z]=B,R[O]=U,z=O);else if(q<le&&0>i(J,U))R[z]=J,R[q]=U,z=q;else break e}}return $}function i(R,$){var U=R.sortIndex-$.sortIndex;return U!==0?U:R.id-$.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;s.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();s.unstable_now=function(){return l.now()-c}}var d=[],f=[],m=1,g=null,v=3,b=!1,_=!1,w=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function j(R){for(var $=t(f);$!==null;){if($.callback===null)n(f);else if($.startTime<=R)n(f),$.sortIndex=$.expirationTime,e(d,$);else break;$=t(f)}}function P(R){if(w=!1,j(R),!_)if(t(d)!==null)_=!0,L||(L=!0,ae());else{var $=t(f);$!==null&&ie(P,$.startTime-R)}}var L=!1,M=-1,I=5,F=-1;function G(){return E?!0:!(s.unstable_now()-F<I)}function K(){if(E=!1,L){var R=s.unstable_now();F=R;var $=!0;try{e:{_=!1,w&&(w=!1,N(M),M=-1),b=!0;var U=v;try{t:{for(j(R),g=t(d);g!==null&&!(g.expirationTime>R&&G());){var z=g.callback;if(typeof z=="function"){g.callback=null,v=g.priorityLevel;var le=z(g.expirationTime<=R);if(R=s.unstable_now(),typeof le=="function"){g.callback=le,j(R),$=!0;break t}g===t(d)&&n(d),j(R)}else n(d);g=t(d)}if(g!==null)$=!0;else{var k=t(f);k!==null&&ie(P,k.startTime-R),$=!1}}break e}finally{g=null,v=U,b=!1}$=void 0}}finally{$?ae():L=!1}}}var ae;if(typeof T=="function")ae=function(){T(K)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,H=X.port2;X.port1.onmessage=K,ae=function(){H.postMessage(null)}}else ae=function(){A(K,0)};function ie(R,$){M=A(function(){R(s.unstable_now())},$)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(R){R.callback=null},s.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<R?Math.floor(1e3/R):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_next=function(R){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var U=v;v=$;try{return R()}finally{v=U}},s.unstable_requestPaint=function(){E=!0},s.unstable_runWithPriority=function(R,$){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var U=v;v=R;try{return $()}finally{v=U}},s.unstable_scheduleCallback=function(R,$,U){var z=s.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?z+U:z):U=z,R){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=U+le,R={id:m++,callback:$,priorityLevel:R,startTime:U,expirationTime:le,sortIndex:-1},U>z?(R.sortIndex=U,e(f,R),t(d)===null&&R===t(f)&&(w?(N(M),M=-1):w=!0,ie(P,U-z))):(R.sortIndex=le,e(d,R),_||b||(_=!0,L||(L=!0,ae()))),R},s.unstable_shouldYield=G,s.unstable_wrapCallback=function(R){var $=v;return function(){var U=v;v=$;try{return R.apply(this,arguments)}finally{v=U}}}})(Mm)),Mm}var Sw;function Ck(){return Sw||(Sw=1,Dm.exports=Ek()),Dm.exports}var Om={exports:{}},In={};var _w;function Tk(){if(_w)return In;_w=1;var s=uv();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:d,containerInfo:f,implementation:m}}var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return In.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,In.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,m)},In.flushSync=function(d){var f=l.T,m=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=f,n.p=m,n.d.f()}},In.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},In.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},In.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,g=c(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:b}):m==="script"&&n.d.X(d,{crossOrigin:g,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},In.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},In.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=c(m,f.crossOrigin);n.d.L(d,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},In.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=c(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},In.requestFormReset=function(d){n.d.r(d)},In.unstable_batchedUpdates=function(d,f){return d(f)},In.useFormState=function(d,f,m){return l.H.useFormState(d,f,m)},In.useFormStatus=function(){return l.H.useHostTransitionStatus()},In.version="19.2.3",In}var Aw;function X1(){if(Aw)return Om.exports;Aw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Om.exports=Tk(),Om.exports}var Ew;function Nk(){if(Ew)return vc;Ew=1;var s=Ck(),e=uv(),t=X1();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(n(188))}function f(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(n(188));return o!==r?null:r}for(var u=r,p=o;;){var y=u.return;if(y===null)break;var x=y.alternate;if(x===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===u)return d(y),r;if(x===p)return d(y),o;x=x.sibling}throw Error(n(188))}if(u.return!==p.return)u=y,p=x;else{for(var C=!1,D=y.child;D;){if(D===u){C=!0,u=y,p=x;break}if(D===p){C=!0,p=y,u=x;break}D=D.sibling}if(!C){for(D=x.child;D;){if(D===u){C=!0,u=x,p=y;break}if(D===p){C=!0,p=x,u=y;break}D=D.sibling}if(!C)throw Error(n(189))}}if(u.alternate!==p)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?r:o}function m(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=m(r),o!==null)return o;r=r.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),T=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function ae(r){return r===null||typeof r!="object"?null:(r=K&&r[K]||r["@@iterator"],typeof r=="function"?r:null)}var X=Symbol.for("react.client.reference");function H(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===X?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case w:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case _:return"Portal";case T:return r.displayName||"Context";case N:return(r._context.displayName||"Context")+".Consumer";case j:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return o=r.displayName||null,o!==null?o:H(r.type)||"Memo";case I:o=r._payload,r=r._init;try{return H(r(o))}catch{}}return null}var ie=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},z=[],le=-1;function k(r){return{current:r}}function O(r){0>le||(r.current=z[le],z[le]=null,le--)}function B(r,o){le++,z[le]=r.current,r.current=o}var q=k(null),J=k(null),ue=k(null),ee=k(null);function Y(r,o){switch(B(ue,o),B(J,r),B(q,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Bx(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Bx(o),r=zx(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}O(q),B(q,r)}function oe(){O(q),O(J),O(ue)}function ge(r){r.memoizedState!==null&&B(ee,r);var o=q.current,u=zx(o,r.type);o!==u&&(B(J,r),B(q,u))}function xe(r){J.current===r&&(O(q),O(J)),ee.current===r&&(O(ee),hc._currentValue=U)}var be,Ge;function Ie(r){if(be===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);be=o&&o[1]||"",Ge=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+r+Ge}var te=!1;function Se(r,o){if(!r||te)return"";te=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ce){var re=ce}Reflect.construct(r,[],pe)}else{try{pe.call()}catch(ce){re=ce}r.call(pe.prototype)}}else{try{throw Error()}catch(ce){re=ce}(pe=r())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ce){if(ce&&re&&typeof ce.stack=="string")return[ce.stack,re.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=p.DetermineComponentFrameRoot(),C=x[0],D=x[1];if(C&&D){var V=C.split(`
`),se=D.split(`
`);for(y=p=0;p<V.length&&!V[p].includes("DetermineComponentFrameRoot");)p++;for(;y<se.length&&!se[y].includes("DetermineComponentFrameRoot");)y++;if(p===V.length||y===se.length)for(p=V.length-1,y=se.length-1;1<=p&&0<=y&&V[p]!==se[y];)y--;for(;1<=p&&0<=y;p--,y--)if(V[p]!==se[y]){if(p!==1||y!==1)do if(p--,y--,0>y||V[p]!==se[y]){var de=`
`+V[p].replace(" at new "," at ");return r.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",r.displayName)),de}while(1<=p&&0<=y);break}}}finally{te=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Ie(u):""}function $e(r,o){switch(r.tag){case 26:case 27:case 5:return Ie(r.type);case 16:return Ie("Lazy");case 13:return r.child!==o&&o!==null?Ie("Suspense Fallback"):Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 15:return Se(r.type,!1);case 11:return Se(r.type.render,!1);case 1:return Se(r.type,!0);case 31:return Ie("Activity");default:return""}}function Re(r){try{var o="",u=null;do o+=$e(r,u),u=r,r=r.return;while(r);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var ht=Object.prototype.hasOwnProperty,un=s.unstable_scheduleCallback,Nt=s.unstable_cancelCallback,wt=s.unstable_shouldYield,Ut=s.unstable_requestPaint,kt=s.unstable_now,Fs=s.unstable_getCurrentPriorityLevel,Fn=s.unstable_ImmediatePriority,ri=s.unstable_UserBlockingPriority,ls=s.unstable_NormalPriority,an=s.unstable_LowPriority,Gt=s.unstable_IdlePriority,Sn=s.log,Pn=s.unstable_setDisableYieldValue,Us=null,Q=null;function fe(r){if(typeof Sn=="function"&&Pn(r),Q&&typeof Q.setStrictMode=="function")try{Q.setStrictMode(Us,r)}catch{}}var ve=Math.clz32?Math.clz32:ct,Ee=Math.log,We=Math.LN2;function ct(r){return r>>>=0,r===0?32:31-(Ee(r)/We|0)|0}var Pt=256,jt=262144,Lt=4194304;function _n(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function qe(r,o,u){var p=r.pendingLanes;if(p===0)return 0;var y=0,x=r.suspendedLanes,C=r.pingedLanes;r=r.warmLanes;var D=p&134217727;return D!==0?(p=D&~x,p!==0?y=_n(p):(C&=D,C!==0?y=_n(C):u||(u=D&~r,u!==0&&(y=_n(u))))):(D=p&~x,D!==0?y=_n(D):C!==0?y=_n(C):u||(u=p&~r,u!==0&&(y=_n(u)))),y===0?0:o!==0&&o!==y&&(o&x)===0&&(x=y&-y,u=o&-o,x>=u||x===32&&(u&4194048)!==0)?o:y}function Rt(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function dn(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ln(){var r=Lt;return Lt<<=1,(Lt&62914560)===0&&(Lt=4194304),r}function cr(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function It(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function qn(r,o,u,p,y,x){var C=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var D=r.entanglements,V=r.expirationTimes,se=r.hiddenUpdates;for(u=C&~u;0<u;){var de=31-ve(u),pe=1<<de;D[de]=0,V[de]=-1;var re=se[de];if(re!==null)for(se[de]=null,de=0;de<re.length;de++){var ce=re[de];ce!==null&&(ce.lane&=-536870913)}u&=~pe}p!==0&&Xr(r,p,0),x!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=x&~(C&~o))}function Xr(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var p=31-ve(o);r.entangledLanes|=o,r.entanglements[p]=r.entanglements[p]|1073741824|u&261930}function Wn(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var p=31-ve(u),y=1<<p;y&o|r[p]&o&&(r[p]|=o),u&=~y}}function Yn(r,o){var u=o&-o;return u=(u&42)!==0?1:za(u),(u&(r.suspendedLanes|o))!==0?0:u}function za(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function $s(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function yf(){var r=$.p;return r!==0?r:(r=window.event,r===void 0?32:lw(r.type))}function Ay(r,o){var u=$.p;try{return $.p=r,o()}finally{$.p=u}}var ur=Math.random().toString(36).slice(2),An="__reactFiber$"+ur,Xn="__reactProps$"+ur,Fa="__reactContainer$"+ur,bf="__reactEvents$"+ur,u2="__reactListeners$"+ur,d2="__reactHandles$"+ur,Ey="__reactResources$"+ur,Tl="__reactMarker$"+ur;function xf(r){delete r[An],delete r[Xn],delete r[bf],delete r[u2],delete r[d2]}function Ua(r){var o=r[An];if(o)return o;for(var u=r.parentNode;u;){if(o=u[Fa]||u[An]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=qx(r);r!==null;){if(u=r[An])return u;r=qx(r)}return o}r=u,u=r.parentNode}return null}function $a(r){if(r=r[An]||r[Fa]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Nl(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function Ha(r){var o=r[Ey];return o||(o=r[Ey]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function hn(r){r[Tl]=!0}var Cy=new Set,Ty={};function Kr(r,o){Va(r,o),Va(r+"Capture",o)}function Va(r,o){for(Ty[r]=o,r=0;r<o.length;r++)Cy.add(o[r])}var h2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ny={},ky={};function f2(r){return ht.call(ky,r)?!0:ht.call(Ny,r)?!1:h2.test(r)?ky[r]=!0:(Ny[r]=!0,!1)}function vu(r,o,u){if(f2(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function yu(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function Ti(r,o,u,p){if(p===null)r.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+p)}}function As(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function jy(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function p2(r,o,u){var p=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,x=p.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return y.call(this)},set:function(C){u=""+C,x.call(this,C)}}),Object.defineProperty(r,o,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function wf(r){if(!r._valueTracker){var o=jy(r)?"checked":"value";r._valueTracker=p2(r,o,""+r[o])}}function Ry(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return r&&(p=jy(r)?r.checked?"true":"false":r.value),r=p,r!==u?(o.setValue(r),!0):!1}function bu(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var m2=/[\n"\\]/g;function Es(r){return r.replace(m2,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Sf(r,o,u,p,y,x,C,D){r.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.type=C:r.removeAttribute("type"),o!=null?C==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+As(o)):r.value!==""+As(o)&&(r.value=""+As(o)):C!=="submit"&&C!=="reset"||r.removeAttribute("value"),o!=null?_f(r,C,As(o)):u!=null?_f(r,C,As(u)):p!=null&&r.removeAttribute("value"),y==null&&x!=null&&(r.defaultChecked=!!x),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.name=""+As(D):r.removeAttribute("name")}function Dy(r,o,u,p,y,x,C,D){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.type=x),o!=null||u!=null){if(!(x!=="submit"&&x!=="reset"||o!=null)){wf(r);return}u=u!=null?""+As(u):"",o=o!=null?""+As(o):u,D||o===r.value||(r.value=o),r.defaultValue=o}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,r.checked=D?r.checked:!!p,r.defaultChecked=!!p,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.name=C),wf(r)}function _f(r,o,u){o==="number"&&bu(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function Ga(r,o,u,p){if(r=r.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<r.length;u++)y=o.hasOwnProperty("$"+r[u].value),r[u].selected!==y&&(r[u].selected=y),y&&p&&(r[u].defaultSelected=!0)}else{for(u=""+As(u),o=null,y=0;y<r.length;y++){if(r[y].value===u){r[y].selected=!0,p&&(r[y].defaultSelected=!0);return}o!==null||r[y].disabled||(o=r[y])}o!==null&&(o.selected=!0)}}function My(r,o,u){if(o!=null&&(o=""+As(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+As(u):""}function Oy(r,o,u,p){if(o==null){if(p!=null){if(u!=null)throw Error(n(92));if(ie(p)){if(1<p.length)throw Error(n(93));p=p[0]}u=p}u==null&&(u=""),o=u}u=As(o),r.defaultValue=u,p=r.textContent,p===u&&p!==""&&p!==null&&(r.value=p),wf(r)}function qa(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var g2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Py(r,o,u){var p=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":p?r.setProperty(o,u):typeof u!="number"||u===0||g2.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function Ly(r,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?r.setProperty(p,""):p==="float"?r.cssFloat="":r[p]="");for(var y in o)p=o[y],o.hasOwnProperty(y)&&u[y]!==p&&Py(r,y,p)}else for(var x in o)o.hasOwnProperty(x)&&Py(r,x,o[x])}function Af(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),y2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xu(r){return y2.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ni(){}var Ef=null;function Cf(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Wa=null,Ya=null;function Iy(r){var o=$a(r);if(o&&(r=o.stateNode)){var u=r[Xn]||null;e:switch(r=o.stateNode,o.type){case"input":if(Sf(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Es(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==r&&p.form===r.form){var y=p[Xn]||null;if(!y)throw Error(n(90));Sf(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<u.length;o++)p=u[o],p.form===r.form&&Ry(p)}break e;case"textarea":My(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Ga(r,!!u.multiple,o,!1)}}}var Tf=!1;function By(r,o,u){if(Tf)return r(o,u);Tf=!0;try{var p=r(o);return p}finally{if(Tf=!1,(Wa!==null||Ya!==null)&&(od(),Wa&&(o=Wa,r=Ya,Ya=Wa=null,Iy(o),r)))for(o=0;o<r.length;o++)Iy(r[o])}}function kl(r,o){var u=r.stateNode;if(u===null)return null;var p=u[Xn]||null;if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nf=!1;if(ki)try{var jl={};Object.defineProperty(jl,"passive",{get:function(){Nf=!0}}),window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{Nf=!1}var dr=null,kf=null,wu=null;function zy(){if(wu)return wu;var r,o=kf,u=o.length,p,y="value"in dr?dr.value:dr.textContent,x=y.length;for(r=0;r<u&&o[r]===y[r];r++);var C=u-r;for(p=1;p<=C&&o[u-p]===y[x-p];p++);return wu=y.slice(r,1<p?1-p:void 0)}function Su(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function _u(){return!0}function Fy(){return!1}function Kn(r){function o(u,p,y,x,C){this._reactName=u,this._targetInst=y,this.type=p,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var D in r)r.hasOwnProperty(D)&&(u=r[D],this[D]=u?u(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?_u:Fy,this.isPropagationStopped=Fy,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=_u)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=_u)},persist:function(){},isPersistent:_u}),o}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Au=Kn(Jr),Rl=g({},Jr,{view:0,detail:0}),b2=Kn(Rl),jf,Rf,Dl,Eu=g({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dl&&(Dl&&r.type==="mousemove"?(jf=r.screenX-Dl.screenX,Rf=r.screenY-Dl.screenY):Rf=jf=0,Dl=r),jf)},movementY:function(r){return"movementY"in r?r.movementY:Rf}}),Uy=Kn(Eu),x2=g({},Eu,{dataTransfer:0}),w2=Kn(x2),S2=g({},Rl,{relatedTarget:0}),Df=Kn(S2),_2=g({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),A2=Kn(_2),E2=g({},Jr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),C2=Kn(E2),T2=g({},Jr,{data:0}),$y=Kn(T2),N2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R2(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=j2[r])?!!o[r]:!1}function Mf(){return R2}var D2=g({},Rl,{key:function(r){if(r.key){var o=N2[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Su(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?k2[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mf,charCode:function(r){return r.type==="keypress"?Su(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Su(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),M2=Kn(D2),O2=g({},Eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hy=Kn(O2),P2=g({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mf}),L2=Kn(P2),I2=g({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),B2=Kn(I2),z2=g({},Eu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),F2=Kn(z2),U2=g({},Jr,{newState:0,oldState:0}),$2=Kn(U2),H2=[9,13,27,32],Of=ki&&"CompositionEvent"in window,Ml=null;ki&&"documentMode"in document&&(Ml=document.documentMode);var V2=ki&&"TextEvent"in window&&!Ml,Vy=ki&&(!Of||Ml&&8<Ml&&11>=Ml),Gy=" ",qy=!1;function Wy(r,o){switch(r){case"keyup":return H2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yy(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xa=!1;function G2(r,o){switch(r){case"compositionend":return Yy(o);case"keypress":return o.which!==32?null:(qy=!0,Gy);case"textInput":return r=o.data,r===Gy&&qy?null:r;default:return null}}function q2(r,o){if(Xa)return r==="compositionend"||!Of&&Wy(r,o)?(r=zy(),wu=kf=dr=null,Xa=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vy&&o.locale!=="ko"?null:o.data;default:return null}}var W2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xy(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!W2[r.type]:o==="textarea"}function Ky(r,o,u,p){Wa?Ya?Ya.push(p):Ya=[p]:Wa=p,o=pd(o,"onChange"),0<o.length&&(u=new Au("onChange","change",null,u,p),r.push({event:u,listeners:o}))}var Ol=null,Pl=null;function Y2(r){Dx(r,0)}function Cu(r){var o=Nl(r);if(Ry(o))return r}function Jy(r,o){if(r==="change")return o}var Qy=!1;if(ki){var Pf;if(ki){var Lf="oninput"in document;if(!Lf){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),Lf=typeof Zy.oninput=="function"}Pf=Lf}else Pf=!1;Qy=Pf&&(!document.documentMode||9<document.documentMode)}function eb(){Ol&&(Ol.detachEvent("onpropertychange",tb),Pl=Ol=null)}function tb(r){if(r.propertyName==="value"&&Cu(Pl)){var o=[];Ky(o,Pl,r,Cf(r)),By(Y2,o)}}function X2(r,o,u){r==="focusin"?(eb(),Ol=o,Pl=u,Ol.attachEvent("onpropertychange",tb)):r==="focusout"&&eb()}function K2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Cu(Pl)}function J2(r,o){if(r==="click")return Cu(o)}function Q2(r,o){if(r==="input"||r==="change")return Cu(o)}function Z2(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var cs=typeof Object.is=="function"?Object.is:Z2;function Ll(r,o){if(cs(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!ht.call(o,y)||!cs(r[y],o[y]))return!1}return!0}function nb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function sb(r,o){var u=nb(r);r=0;for(var p;u;){if(u.nodeType===3){if(p=r+u.textContent.length,r<=o&&p>=o)return{node:u,offset:o-r};r=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=nb(u)}}function ib(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?ib(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function rb(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=bu(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=bu(r.document)}return o}function If(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var eN=ki&&"documentMode"in document&&11>=document.documentMode,Ka=null,Bf=null,Il=null,zf=!1;function ab(r,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;zf||Ka==null||Ka!==bu(p)||(p=Ka,"selectionStart"in p&&If(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Il&&Ll(Il,p)||(Il=p,p=pd(Bf,"onSelect"),0<p.length&&(o=new Au("onSelect","select",null,o,u),r.push({event:o,listeners:p}),o.target=Ka)))}function Qr(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Ja={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionrun:Qr("Transition","TransitionRun"),transitionstart:Qr("Transition","TransitionStart"),transitioncancel:Qr("Transition","TransitionCancel"),transitionend:Qr("Transition","TransitionEnd")},Ff={},ob={};ki&&(ob=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function Zr(r){if(Ff[r])return Ff[r];if(!Ja[r])return r;var o=Ja[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in ob)return Ff[r]=o[u];return r}var lb=Zr("animationend"),cb=Zr("animationiteration"),ub=Zr("animationstart"),tN=Zr("transitionrun"),nN=Zr("transitionstart"),sN=Zr("transitioncancel"),db=Zr("transitionend"),hb=new Map,Uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uf.push("scrollEnd");function Hs(r,o){hb.set(r,o),Kr(o,[r])}var Tu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Cs=[],Qa=0,$f=0;function Nu(){for(var r=Qa,o=$f=Qa=0;o<r;){var u=Cs[o];Cs[o++]=null;var p=Cs[o];Cs[o++]=null;var y=Cs[o];Cs[o++]=null;var x=Cs[o];if(Cs[o++]=null,p!==null&&y!==null){var C=p.pending;C===null?y.next=y:(y.next=C.next,C.next=y),p.pending=y}x!==0&&fb(u,y,x)}}function ku(r,o,u,p){Cs[Qa++]=r,Cs[Qa++]=o,Cs[Qa++]=u,Cs[Qa++]=p,$f|=p,r.lanes|=p,r=r.alternate,r!==null&&(r.lanes|=p)}function Hf(r,o,u,p){return ku(r,o,u,p),ju(r)}function ea(r,o){return ku(r,null,null,o),ju(r)}function fb(r,o,u){r.lanes|=u;var p=r.alternate;p!==null&&(p.lanes|=u);for(var y=!1,x=r.return;x!==null;)x.childLanes|=u,p=x.alternate,p!==null&&(p.childLanes|=u),x.tag===22&&(r=x.stateNode,r===null||r._visibility&1||(y=!0)),r=x,x=x.return;return r.tag===3?(x=r.stateNode,y&&o!==null&&(y=31-ve(u),r=x.hiddenUpdates,p=r[y],p===null?r[y]=[o]:p.push(o),o.lane=u|536870912),x):null}function ju(r){if(50<rc)throw rc=0,Qp=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Za={};function iN(r,o,u,p){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(r,o,u,p){return new iN(r,o,u,p)}function Vf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ji(r,o){var u=r.alternate;return u===null?(u=us(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function pb(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Ru(r,o,u,p,y,x){var C=0;if(p=r,typeof r=="function")Vf(r)&&(C=1);else if(typeof r=="string")C=ck(r,u,q.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case F:return r=us(31,u,o,y),r.elementType=F,r.lanes=x,r;case w:return ta(u.children,y,x,o);case E:C=8,y|=24;break;case A:return r=us(12,u,o,y|2),r.elementType=A,r.lanes=x,r;case P:return r=us(13,u,o,y),r.elementType=P,r.lanes=x,r;case L:return r=us(19,u,o,y),r.elementType=L,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case T:C=10;break e;case N:C=9;break e;case j:C=11;break e;case M:C=14;break e;case I:C=16,p=null;break e}C=29,u=Error(n(130,r===null?"null":typeof r,"")),p=null}return o=us(C,u,o,y),o.elementType=r,o.type=p,o.lanes=x,o}function ta(r,o,u,p){return r=us(7,r,p,o),r.lanes=u,r}function Gf(r,o,u){return r=us(6,r,null,o),r.lanes=u,r}function mb(r){var o=us(18,null,null,0);return o.stateNode=r,o}function qf(r,o,u){return o=us(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var gb=new WeakMap;function Ts(r,o){if(typeof r=="object"&&r!==null){var u=gb.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Re(o)},gb.set(r,o),o)}return{value:r,source:o,stack:Re(o)}}var eo=[],to=0,Du=null,Bl=0,Ns=[],ks=0,hr=null,ai=1,oi="";function Ri(r,o){eo[to++]=Bl,eo[to++]=Du,Du=r,Bl=o}function vb(r,o,u){Ns[ks++]=ai,Ns[ks++]=oi,Ns[ks++]=hr,hr=r;var p=ai;r=oi;var y=32-ve(p)-1;p&=~(1<<y),u+=1;var x=32-ve(o)+y;if(30<x){var C=y-y%5;x=(p&(1<<C)-1).toString(32),p>>=C,y-=C,ai=1<<32-ve(o)+y|u<<y|p,oi=x+r}else ai=1<<x|u<<y|p,oi=r}function Wf(r){r.return!==null&&(Ri(r,1),vb(r,1,0))}function Yf(r){for(;r===Du;)Du=eo[--to],eo[to]=null,Bl=eo[--to],eo[to]=null;for(;r===hr;)hr=Ns[--ks],Ns[ks]=null,oi=Ns[--ks],Ns[ks]=null,ai=Ns[--ks],Ns[ks]=null}function yb(r,o){Ns[ks++]=ai,Ns[ks++]=oi,Ns[ks++]=hr,ai=o.id,oi=o.overflow,hr=r}var En=null,Ct=null,ot=!1,fr=null,js=!1,Xf=Error(n(519));function pr(r){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zl(Ts(o,r)),Xf}function bb(r){var o=r.stateNode,u=r.type,p=r.memoizedProps;switch(o[An]=r,o[Xn]=p,u){case"dialog":st("cancel",o),st("close",o);break;case"iframe":case"object":case"embed":st("load",o);break;case"video":case"audio":for(u=0;u<oc.length;u++)st(oc[u],o);break;case"source":st("error",o);break;case"img":case"image":case"link":st("error",o),st("load",o);break;case"details":st("toggle",o);break;case"input":st("invalid",o),Dy(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":st("invalid",o);break;case"textarea":st("invalid",o),Oy(o,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||p.suppressHydrationWarning===!0||Lx(o.textContent,u)?(p.popover!=null&&(st("beforetoggle",o),st("toggle",o)),p.onScroll!=null&&st("scroll",o),p.onScrollEnd!=null&&st("scrollend",o),p.onClick!=null&&(o.onclick=Ni),o=!0):o=!1,o||pr(r,!0)}function xb(r){for(En=r.return;En;)switch(En.tag){case 5:case 31:case 13:js=!1;return;case 27:case 3:js=!0;return;default:En=En.return}}function no(r){if(r!==En)return!1;if(!ot)return xb(r),ot=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||fm(r.type,r.memoizedProps)),u=!u),u&&Ct&&pr(r),xb(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));Ct=Gx(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));Ct=Gx(r)}else o===27?(o=Ct,Nr(r.type)?(r=ym,ym=null,Ct=r):Ct=o):Ct=En?Ds(r.stateNode.nextSibling):null;return!0}function na(){Ct=En=null,ot=!1}function Kf(){var r=fr;return r!==null&&(es===null?es=r:es.push.apply(es,r),fr=null),r}function zl(r){fr===null?fr=[r]:fr.push(r)}var Jf=k(null),sa=null,Di=null;function mr(r,o,u){B(Jf,o._currentValue),o._currentValue=u}function Mi(r){r._currentValue=Jf.current,O(Jf)}function Qf(r,o,u){for(;r!==null;){var p=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),r===u)break;r=r.return}}function Zf(r,o,u,p){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var x=y.dependencies;if(x!==null){var C=y.child;x=x.firstContext;e:for(;x!==null;){var D=x;x=y;for(var V=0;V<o.length;V++)if(D.context===o[V]){x.lanes|=u,D=x.alternate,D!==null&&(D.lanes|=u),Qf(x.return,u,r),p||(C=null);break e}x=D.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(n(341));C.lanes|=u,x=C.alternate,x!==null&&(x.lanes|=u),Qf(C,u,r),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===r){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function so(r,o,u,p){r=null;for(var y=o,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(n(387));if(C=C.memoizedProps,C!==null){var D=y.type;cs(y.pendingProps.value,C.value)||(r!==null?r.push(D):r=[D])}}else if(y===ee.current){if(C=y.alternate,C===null)throw Error(n(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(hc):r=[hc])}y=y.return}r!==null&&Zf(o,r,u,p),o.flags|=262144}function Mu(r){for(r=r.firstContext;r!==null;){if(!cs(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ia(r){sa=r,Di=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Cn(r){return wb(sa,r)}function Ou(r,o){return sa===null&&ia(r),wb(r,o)}function wb(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Di===null){if(r===null)throw Error(n(308));Di=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Di=Di.next=o;return u}var rN=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,p){r.push(p)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},aN=s.unstable_scheduleCallback,oN=s.unstable_NormalPriority,Zt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ep(){return{controller:new rN,data:new Map,refCount:0}}function Fl(r){r.refCount--,r.refCount===0&&aN(oN,function(){r.controller.abort()})}var Ul=null,tp=0,io=0,ro=null;function lN(r,o){if(Ul===null){var u=Ul=[];tp=0,io=im(),ro={status:"pending",value:void 0,then:function(p){u.push(p)}}}return tp++,o.then(Sb,Sb),o}function Sb(){if(--tp===0&&Ul!==null){ro!==null&&(ro.status="fulfilled");var r=Ul;Ul=null,io=0,ro=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function cN(r,o){var u=[],p={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return r.then(function(){p.status="fulfilled",p.value=o;for(var y=0;y<u.length;y++)(0,u[y])(o)},function(y){for(p.status="rejected",p.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),p}var _b=R.S;R.S=function(r,o){ax=kt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&lN(r,o),_b!==null&&_b(r,o)};var ra=k(null);function np(){var r=ra.current;return r!==null?r:St.pooledCache}function Pu(r,o){o===null?B(ra,ra.current):B(ra,o.pool)}function Ab(){var r=np();return r===null?null:{parent:Zt._currentValue,pool:r}}var ao=Error(n(460)),sp=Error(n(474)),Lu=Error(n(542)),Iu={then:function(){}};function Eb(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Cb(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Ni,Ni),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Nb(r),r;default:if(typeof o.status=="string")o.then(Ni,Ni);else{if(r=St,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(p){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=p}},function(p){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Nb(r),r}throw oa=o,ao}}function aa(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(oa=u,ao):u}}var oa=null;function Tb(){if(oa===null)throw Error(n(459));var r=oa;return oa=null,r}function Nb(r){if(r===ao||r===Lu)throw Error(n(483))}var oo=null,$l=0;function Bu(r){var o=$l;return $l+=1,oo===null&&(oo=[]),Cb(oo,r,o)}function Hl(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function zu(r,o){throw o.$$typeof===v?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function kb(r){function o(Z,W){if(r){var ne=Z.deletions;ne===null?(Z.deletions=[W],Z.flags|=16):ne.push(W)}}function u(Z,W){if(!r)return null;for(;W!==null;)o(Z,W),W=W.sibling;return null}function p(Z){for(var W=new Map;Z!==null;)Z.key!==null?W.set(Z.key,Z):W.set(Z.index,Z),Z=Z.sibling;return W}function y(Z,W){return Z=ji(Z,W),Z.index=0,Z.sibling=null,Z}function x(Z,W,ne){return Z.index=ne,r?(ne=Z.alternate,ne!==null?(ne=ne.index,ne<W?(Z.flags|=67108866,W):ne):(Z.flags|=67108866,W)):(Z.flags|=1048576,W)}function C(Z){return r&&Z.alternate===null&&(Z.flags|=67108866),Z}function D(Z,W,ne,he){return W===null||W.tag!==6?(W=Gf(ne,Z.mode,he),W.return=Z,W):(W=y(W,ne),W.return=Z,W)}function V(Z,W,ne,he){var Pe=ne.type;return Pe===w?de(Z,W,ne.props.children,he,ne.key):W!==null&&(W.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===I&&aa(Pe)===W.type)?(W=y(W,ne.props),Hl(W,ne),W.return=Z,W):(W=Ru(ne.type,ne.key,ne.props,null,Z.mode,he),Hl(W,ne),W.return=Z,W)}function se(Z,W,ne,he){return W===null||W.tag!==4||W.stateNode.containerInfo!==ne.containerInfo||W.stateNode.implementation!==ne.implementation?(W=qf(ne,Z.mode,he),W.return=Z,W):(W=y(W,ne.children||[]),W.return=Z,W)}function de(Z,W,ne,he,Pe){return W===null||W.tag!==7?(W=ta(ne,Z.mode,he,Pe),W.return=Z,W):(W=y(W,ne),W.return=Z,W)}function pe(Z,W,ne){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Gf(""+W,Z.mode,ne),W.return=Z,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return ne=Ru(W.type,W.key,W.props,null,Z.mode,ne),Hl(ne,W),ne.return=Z,ne;case _:return W=qf(W,Z.mode,ne),W.return=Z,W;case I:return W=aa(W),pe(Z,W,ne)}if(ie(W)||ae(W))return W=ta(W,Z.mode,ne,null),W.return=Z,W;if(typeof W.then=="function")return pe(Z,Bu(W),ne);if(W.$$typeof===T)return pe(Z,Ou(Z,W),ne);zu(Z,W)}return null}function re(Z,W,ne,he){var Pe=W!==null?W.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Pe!==null?null:D(Z,W,""+ne,he);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:return ne.key===Pe?V(Z,W,ne,he):null;case _:return ne.key===Pe?se(Z,W,ne,he):null;case I:return ne=aa(ne),re(Z,W,ne,he)}if(ie(ne)||ae(ne))return Pe!==null?null:de(Z,W,ne,he,null);if(typeof ne.then=="function")return re(Z,W,Bu(ne),he);if(ne.$$typeof===T)return re(Z,W,Ou(Z,ne),he);zu(Z,ne)}return null}function ce(Z,W,ne,he,Pe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Z=Z.get(ne)||null,D(W,Z,""+he,Pe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case b:return Z=Z.get(he.key===null?ne:he.key)||null,V(W,Z,he,Pe);case _:return Z=Z.get(he.key===null?ne:he.key)||null,se(W,Z,he,Pe);case I:return he=aa(he),ce(Z,W,ne,he,Pe)}if(ie(he)||ae(he))return Z=Z.get(ne)||null,de(W,Z,he,Pe,null);if(typeof he.then=="function")return ce(Z,W,ne,Bu(he),Pe);if(he.$$typeof===T)return ce(Z,W,ne,Ou(W,he),Pe);zu(W,he)}return null}function Ne(Z,W,ne,he){for(var Pe=null,ut=null,De=W,Ze=W=0,rt=null;De!==null&&Ze<ne.length;Ze++){De.index>Ze?(rt=De,De=null):rt=De.sibling;var dt=re(Z,De,ne[Ze],he);if(dt===null){De===null&&(De=rt);break}r&&De&&dt.alternate===null&&o(Z,De),W=x(dt,W,Ze),ut===null?Pe=dt:ut.sibling=dt,ut=dt,De=rt}if(Ze===ne.length)return u(Z,De),ot&&Ri(Z,Ze),Pe;if(De===null){for(;Ze<ne.length;Ze++)De=pe(Z,ne[Ze],he),De!==null&&(W=x(De,W,Ze),ut===null?Pe=De:ut.sibling=De,ut=De);return ot&&Ri(Z,Ze),Pe}for(De=p(De);Ze<ne.length;Ze++)rt=ce(De,Z,Ze,ne[Ze],he),rt!==null&&(r&&rt.alternate!==null&&De.delete(rt.key===null?Ze:rt.key),W=x(rt,W,Ze),ut===null?Pe=rt:ut.sibling=rt,ut=rt);return r&&De.forEach(function(Mr){return o(Z,Mr)}),ot&&Ri(Z,Ze),Pe}function ze(Z,W,ne,he){if(ne==null)throw Error(n(151));for(var Pe=null,ut=null,De=W,Ze=W=0,rt=null,dt=ne.next();De!==null&&!dt.done;Ze++,dt=ne.next()){De.index>Ze?(rt=De,De=null):rt=De.sibling;var Mr=re(Z,De,dt.value,he);if(Mr===null){De===null&&(De=rt);break}r&&De&&Mr.alternate===null&&o(Z,De),W=x(Mr,W,Ze),ut===null?Pe=Mr:ut.sibling=Mr,ut=Mr,De=rt}if(dt.done)return u(Z,De),ot&&Ri(Z,Ze),Pe;if(De===null){for(;!dt.done;Ze++,dt=ne.next())dt=pe(Z,dt.value,he),dt!==null&&(W=x(dt,W,Ze),ut===null?Pe=dt:ut.sibling=dt,ut=dt);return ot&&Ri(Z,Ze),Pe}for(De=p(De);!dt.done;Ze++,dt=ne.next())dt=ce(De,Z,Ze,dt.value,he),dt!==null&&(r&&dt.alternate!==null&&De.delete(dt.key===null?Ze:dt.key),W=x(dt,W,Ze),ut===null?Pe=dt:ut.sibling=dt,ut=dt);return r&&De.forEach(function(xk){return o(Z,xk)}),ot&&Ri(Z,Ze),Pe}function bt(Z,W,ne,he){if(typeof ne=="object"&&ne!==null&&ne.type===w&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:e:{for(var Pe=ne.key;W!==null;){if(W.key===Pe){if(Pe=ne.type,Pe===w){if(W.tag===7){u(Z,W.sibling),he=y(W,ne.props.children),he.return=Z,Z=he;break e}}else if(W.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===I&&aa(Pe)===W.type){u(Z,W.sibling),he=y(W,ne.props),Hl(he,ne),he.return=Z,Z=he;break e}u(Z,W);break}else o(Z,W);W=W.sibling}ne.type===w?(he=ta(ne.props.children,Z.mode,he,ne.key),he.return=Z,Z=he):(he=Ru(ne.type,ne.key,ne.props,null,Z.mode,he),Hl(he,ne),he.return=Z,Z=he)}return C(Z);case _:e:{for(Pe=ne.key;W!==null;){if(W.key===Pe)if(W.tag===4&&W.stateNode.containerInfo===ne.containerInfo&&W.stateNode.implementation===ne.implementation){u(Z,W.sibling),he=y(W,ne.children||[]),he.return=Z,Z=he;break e}else{u(Z,W);break}else o(Z,W);W=W.sibling}he=qf(ne,Z.mode,he),he.return=Z,Z=he}return C(Z);case I:return ne=aa(ne),bt(Z,W,ne,he)}if(ie(ne))return Ne(Z,W,ne,he);if(ae(ne)){if(Pe=ae(ne),typeof Pe!="function")throw Error(n(150));return ne=Pe.call(ne),ze(Z,W,ne,he)}if(typeof ne.then=="function")return bt(Z,W,Bu(ne),he);if(ne.$$typeof===T)return bt(Z,W,Ou(Z,ne),he);zu(Z,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,W!==null&&W.tag===6?(u(Z,W.sibling),he=y(W,ne),he.return=Z,Z=he):(u(Z,W),he=Gf(ne,Z.mode,he),he.return=Z,Z=he),C(Z)):u(Z,W)}return function(Z,W,ne,he){try{$l=0;var Pe=bt(Z,W,ne,he);return oo=null,Pe}catch(De){if(De===ao||De===Lu)throw De;var ut=us(29,De,null,Z.mode);return ut.lanes=he,ut.return=Z,ut}}}var la=kb(!0),jb=kb(!1),gr=!1;function ip(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rp(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function vr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function yr(r,o,u){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,(ft&2)!==0){var y=p.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),p.pending=o,o=ju(r),fb(r,null,u),o}return ku(r,p,o,u),ju(r)}function Vl(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var p=o.lanes;p&=r.pendingLanes,u|=p,o.lanes=u,Wn(r,u)}}function ap(r,o){var u=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};x===null?y=x=C:x=x.next=C,u=u.next}while(u!==null);x===null?y=x=o:x=x.next=o}else y=x=o;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:p.shared,callbacks:p.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var op=!1;function Gl(){if(op){var r=ro;if(r!==null)throw r}}function ql(r,o,u,p){op=!1;var y=r.updateQueue;gr=!1;var x=y.firstBaseUpdate,C=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var V=D,se=V.next;V.next=null,C===null?x=se:C.next=se,C=V;var de=r.alternate;de!==null&&(de=de.updateQueue,D=de.lastBaseUpdate,D!==C&&(D===null?de.firstBaseUpdate=se:D.next=se,de.lastBaseUpdate=V))}if(x!==null){var pe=y.baseState;C=0,de=se=V=null,D=x;do{var re=D.lane&-536870913,ce=re!==D.lane;if(ce?(it&re)===re:(p&re)===re){re!==0&&re===io&&(op=!0),de!==null&&(de=de.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ne=r,ze=D;re=o;var bt=u;switch(ze.tag){case 1:if(Ne=ze.payload,typeof Ne=="function"){pe=Ne.call(bt,pe,re);break e}pe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=ze.payload,re=typeof Ne=="function"?Ne.call(bt,pe,re):Ne,re==null)break e;pe=g({},pe,re);break e;case 2:gr=!0}}re=D.callback,re!==null&&(r.flags|=64,ce&&(r.flags|=8192),ce=y.callbacks,ce===null?y.callbacks=[re]:ce.push(re))}else ce={lane:re,tag:D.tag,payload:D.payload,callback:D.callback,next:null},de===null?(se=de=ce,V=pe):de=de.next=ce,C|=re;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;ce=D,D=ce.next,ce.next=null,y.lastBaseUpdate=ce,y.shared.pending=null}}while(!0);de===null&&(V=pe),y.baseState=V,y.firstBaseUpdate=se,y.lastBaseUpdate=de,x===null&&(y.shared.lanes=0),_r|=C,r.lanes=C,r.memoizedState=pe}}function Rb(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function Db(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Rb(u[r],o)}var lo=k(null),Fu=k(0);function Mb(r,o){r=$i,B(Fu,r),B(lo,o),$i=r|o.baseLanes}function lp(){B(Fu,$i),B(lo,lo.current)}function cp(){$i=Fu.current,O(lo),O(Fu)}var ds=k(null),Rs=null;function br(r){var o=r.alternate;B(qt,qt.current&1),B(ds,r),Rs===null&&(o===null||lo.current!==null||o.memoizedState!==null)&&(Rs=r)}function up(r){B(qt,qt.current),B(ds,r),Rs===null&&(Rs=r)}function Ob(r){r.tag===22?(B(qt,qt.current),B(ds,r),Rs===null&&(Rs=r)):xr()}function xr(){B(qt,qt.current),B(ds,ds.current)}function hs(r){O(ds),Rs===r&&(Rs=null),O(qt)}var qt=k(0);function Uu(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||gm(u)||vm(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Oi=0,Qe=null,vt=null,en=null,$u=!1,co=!1,ca=!1,Hu=0,Wl=0,uo=null,uN=0;function $t(){throw Error(n(321))}function dp(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!cs(r[u],o[u]))return!1;return!0}function hp(r,o,u,p,y,x){return Oi=x,Qe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=r===null||r.memoizedState===null?v0:Tp,ca=!1,x=u(p,y),ca=!1,co&&(x=Lb(o,u,p,y)),Pb(r),x}function Pb(r){R.H=Kl;var o=vt!==null&&vt.next!==null;if(Oi=0,en=vt=Qe=null,$u=!1,Wl=0,uo=null,o)throw Error(n(300));r===null||tn||(r=r.dependencies,r!==null&&Mu(r)&&(tn=!0))}function Lb(r,o,u,p){Qe=r;var y=0;do{if(co&&(uo=null),Wl=0,co=!1,25<=y)throw Error(n(301));if(y+=1,en=vt=null,r.updateQueue!=null){var x=r.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}R.H=y0,x=o(u,p)}while(co);return x}function dN(){var r=R.H,o=r.useState()[0];return o=typeof o.then=="function"?Yl(o):o,r=r.useState()[0],(vt!==null?vt.memoizedState:null)!==r&&(Qe.flags|=1024),o}function fp(){var r=Hu!==0;return Hu=0,r}function pp(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function mp(r){if($u){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}$u=!1}Oi=0,en=vt=Qe=null,co=!1,Wl=Hu=0,uo=null}function Un(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?Qe.memoizedState=en=r:en=en.next=r,en}function Wt(){if(vt===null){var r=Qe.alternate;r=r!==null?r.memoizedState:null}else r=vt.next;var o=en===null?Qe.memoizedState:en.next;if(o!==null)en=o,vt=r;else{if(r===null)throw Qe.alternate===null?Error(n(467)):Error(n(310));vt=r,r={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},en===null?Qe.memoizedState=en=r:en=en.next=r}return en}function Vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(r){var o=Wl;return Wl+=1,uo===null&&(uo=[]),r=Cb(uo,r,o),o=Qe,(en===null?o.memoizedState:en.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?v0:Tp),r}function Gu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Yl(r);if(r.$$typeof===T)return Cn(r)}throw Error(n(438,String(r)))}function gp(r){var o=null,u=Qe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var p=Qe.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Vu(),Qe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),p=0;p<r;p++)u[p]=G;return o.index++,u}function Pi(r,o){return typeof o=="function"?o(r):o}function qu(r){var o=Wt();return vp(o,vt,r)}function vp(r,o,u){var p=r.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=u;var y=r.baseQueue,x=p.pending;if(x!==null){if(y!==null){var C=y.next;y.next=x.next,x.next=C}o.baseQueue=y=x,p.pending=null}if(x=r.baseState,y===null)r.memoizedState=x;else{o=y.next;var D=C=null,V=null,se=o,de=!1;do{var pe=se.lane&-536870913;if(pe!==se.lane?(it&pe)===pe:(Oi&pe)===pe){var re=se.revertLane;if(re===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),pe===io&&(de=!0);else if((Oi&re)===re){se=se.next,re===io&&(de=!0);continue}else pe={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},V===null?(D=V=pe,C=x):V=V.next=pe,Qe.lanes|=re,_r|=re;pe=se.action,ca&&u(x,pe),x=se.hasEagerState?se.eagerState:u(x,pe)}else re={lane:pe,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},V===null?(D=V=re,C=x):V=V.next=re,Qe.lanes|=pe,_r|=pe;se=se.next}while(se!==null&&se!==o);if(V===null?C=x:V.next=D,!cs(x,r.memoizedState)&&(tn=!0,de&&(u=ro,u!==null)))throw u;r.memoizedState=x,r.baseState=C,r.baseQueue=V,p.lastRenderedState=x}return y===null&&(p.lanes=0),[r.memoizedState,p.dispatch]}function yp(r){var o=Wt(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var p=u.dispatch,y=u.pending,x=o.memoizedState;if(y!==null){u.pending=null;var C=y=y.next;do x=r(x,C.action),C=C.next;while(C!==y);cs(x,o.memoizedState)||(tn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),u.lastRenderedState=x}return[x,p]}function Ib(r,o,u){var p=Qe,y=Wt(),x=ot;if(x){if(u===void 0)throw Error(n(407));u=u()}else u=o();var C=!cs((vt||y).memoizedState,u);if(C&&(y.memoizedState=u,tn=!0),y=y.queue,wp(Fb.bind(null,p,y,r),[r]),y.getSnapshot!==o||C||en!==null&&en.memoizedState.tag&1){if(p.flags|=2048,ho(9,{destroy:void 0},zb.bind(null,p,y,u,o),null),St===null)throw Error(n(349));x||(Oi&127)!==0||Bb(p,o,u)}return u}function Bb(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=Qe.updateQueue,o===null?(o=Vu(),Qe.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function zb(r,o,u,p){o.value=u,o.getSnapshot=p,Ub(o)&&$b(r)}function Fb(r,o,u){return u(function(){Ub(o)&&$b(r)})}function Ub(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!cs(r,u)}catch{return!0}}function $b(r){var o=ea(r,2);o!==null&&ts(o,r,2)}function bp(r){var o=Un();if(typeof r=="function"){var u=r;if(r=u(),ca){fe(!0);try{u()}finally{fe(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:r},o}function Hb(r,o,u,p){return r.baseState=u,vp(r,vt,typeof p=="function"?p:Pi)}function hN(r,o,u,p,y){if(Xu(r))throw Error(n(485));if(r=o.action,r!==null){var x={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){x.listeners.push(C)}};R.T!==null?u(!0):x.isTransition=!1,p(x),u=o.pending,u===null?(x.next=o.pending=x,Vb(o,x)):(x.next=u.next,o.pending=u.next=x)}}function Vb(r,o){var u=o.action,p=o.payload,y=r.state;if(o.isTransition){var x=R.T,C={};R.T=C;try{var D=u(y,p),V=R.S;V!==null&&V(C,D),Gb(r,o,D)}catch(se){xp(r,o,se)}finally{x!==null&&C.types!==null&&(x.types=C.types),R.T=x}}else try{x=u(y,p),Gb(r,o,x)}catch(se){xp(r,o,se)}}function Gb(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){qb(r,o,p)},function(p){return xp(r,o,p)}):qb(r,o,u)}function qb(r,o,u){o.status="fulfilled",o.value=u,Wb(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,Vb(r,u)))}function xp(r,o,u){var p=r.pending;if(r.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=u,Wb(o),o=o.next;while(o!==p)}r.action=null}function Wb(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Yb(r,o){return o}function Xb(r,o){if(ot){var u=St.formState;if(u!==null){e:{var p=Qe;if(ot){if(Ct){t:{for(var y=Ct,x=js;y.nodeType!==8;){if(!x){y=null;break t}if(y=Ds(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){Ct=Ds(y.nextSibling),p=y.data==="F!";break e}}pr(p)}p=!1}p&&(o=u[0])}}return u=Un(),u.memoizedState=u.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yb,lastRenderedState:o},u.queue=p,u=p0.bind(null,Qe,p),p.dispatch=u,p=bp(!1),x=Cp.bind(null,Qe,!1,p.queue),p=Un(),y={state:o,dispatch:null,action:r,pending:null},p.queue=y,u=hN.bind(null,Qe,y,x,u),y.dispatch=u,p.memoizedState=r,[o,u,!1]}function Kb(r){var o=Wt();return Jb(o,vt,r)}function Jb(r,o,u){if(o=vp(r,o,Yb)[0],r=qu(Pi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=Yl(o)}catch(C){throw C===ao?Lu:C}else p=o;o=Wt();var y=o.queue,x=y.dispatch;return u!==o.memoizedState&&(Qe.flags|=2048,ho(9,{destroy:void 0},fN.bind(null,y,u),null)),[p,x,r]}function fN(r,o){r.action=o}function Qb(r){var o=Wt(),u=vt;if(u!==null)return Jb(o,u,r);Wt(),o=o.memoizedState,u=Wt();var p=u.queue.dispatch;return u.memoizedState=r,[o,p,!1]}function ho(r,o,u,p){return r={tag:r,create:u,deps:p,inst:o,next:null},o=Qe.updateQueue,o===null&&(o=Vu(),Qe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(p=u.next,u.next=r,r.next=p,o.lastEffect=r),r}function Zb(){return Wt().memoizedState}function Wu(r,o,u,p){var y=Un();Qe.flags|=r,y.memoizedState=ho(1|o,{destroy:void 0},u,p===void 0?null:p)}function Yu(r,o,u,p){var y=Wt();p=p===void 0?null:p;var x=y.memoizedState.inst;vt!==null&&p!==null&&dp(p,vt.memoizedState.deps)?y.memoizedState=ho(o,x,u,p):(Qe.flags|=r,y.memoizedState=ho(1|o,x,u,p))}function e0(r,o){Wu(8390656,8,r,o)}function wp(r,o){Yu(2048,8,r,o)}function pN(r){Qe.flags|=4;var o=Qe.updateQueue;if(o===null)o=Vu(),Qe.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function t0(r){var o=Wt().memoizedState;return pN({ref:o,nextImpl:r}),function(){if((ft&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function n0(r,o){return Yu(4,2,r,o)}function s0(r,o){return Yu(4,4,r,o)}function i0(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function r0(r,o,u){u=u!=null?u.concat([r]):null,Yu(4,4,i0.bind(null,o,r),u)}function Sp(){}function a0(r,o){var u=Wt();o=o===void 0?null:o;var p=u.memoizedState;return o!==null&&dp(o,p[1])?p[0]:(u.memoizedState=[r,o],r)}function o0(r,o){var u=Wt();o=o===void 0?null:o;var p=u.memoizedState;if(o!==null&&dp(o,p[1]))return p[0];if(p=r(),ca){fe(!0);try{r()}finally{fe(!1)}}return u.memoizedState=[p,o],p}function _p(r,o,u){return u===void 0||(Oi&1073741824)!==0&&(it&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=lx(),Qe.lanes|=r,_r|=r,u)}function l0(r,o,u,p){return cs(u,o)?u:lo.current!==null?(r=_p(r,u,p),cs(r,o)||(tn=!0),r):(Oi&42)===0||(Oi&1073741824)!==0&&(it&261930)===0?(tn=!0,r.memoizedState=u):(r=lx(),Qe.lanes|=r,_r|=r,o)}function c0(r,o,u,p,y){var x=$.p;$.p=x!==0&&8>x?x:8;var C=R.T,D={};R.T=D,Cp(r,!1,o,u);try{var V=y(),se=R.S;if(se!==null&&se(D,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var de=cN(V,p);Xl(r,o,de,ms(r))}else Xl(r,o,p,ms(r))}catch(pe){Xl(r,o,{then:function(){},status:"rejected",reason:pe},ms())}finally{$.p=x,C!==null&&D.types!==null&&(C.types=D.types),R.T=C}}function mN(){}function Ap(r,o,u,p){if(r.tag!==5)throw Error(n(476));var y=u0(r).queue;c0(r,y,o,U,u===null?mN:function(){return d0(r),u(p)})}function u0(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:U},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function d0(r){var o=u0(r);o.next===null&&(o=r.alternate.memoizedState),Xl(r,o.next.queue,{},ms())}function Ep(){return Cn(hc)}function h0(){return Wt().memoizedState}function f0(){return Wt().memoizedState}function gN(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=ms();r=vr(u);var p=yr(o,r,u);p!==null&&(ts(p,o,u),Vl(p,o,u)),o={cache:ep()},r.payload=o;return}o=o.return}}function vN(r,o,u){var p=ms();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Xu(r)?m0(o,u):(u=Hf(r,o,u,p),u!==null&&(ts(u,r,p),g0(u,o,p)))}function p0(r,o,u){var p=ms();Xl(r,o,u,p)}function Xl(r,o,u,p){var y={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Xu(r))m0(o,y);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var C=o.lastRenderedState,D=x(C,u);if(y.hasEagerState=!0,y.eagerState=D,cs(D,C))return ku(r,o,y,0),St===null&&Nu(),!1}catch{}if(u=Hf(r,o,y,p),u!==null)return ts(u,r,p),g0(u,o,p),!0}return!1}function Cp(r,o,u,p){if(p={lane:2,revertLane:im(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Xu(r)){if(o)throw Error(n(479))}else o=Hf(r,u,p,2),o!==null&&ts(o,r,2)}function Xu(r){var o=r.alternate;return r===Qe||o!==null&&o===Qe}function m0(r,o){co=$u=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function g0(r,o,u){if((u&4194048)!==0){var p=o.lanes;p&=r.pendingLanes,u|=p,o.lanes=u,Wn(r,u)}}var Kl={readContext:Cn,use:Gu,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};Kl.useEffectEvent=$t;var v0={readContext:Cn,use:Gu,useCallback:function(r,o){return Un().memoizedState=[r,o===void 0?null:o],r},useContext:Cn,useEffect:e0,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Wu(4194308,4,i0.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Wu(4194308,4,r,o)},useInsertionEffect:function(r,o){Wu(4,2,r,o)},useMemo:function(r,o){var u=Un();o=o===void 0?null:o;var p=r();if(ca){fe(!0);try{r()}finally{fe(!1)}}return u.memoizedState=[p,o],p},useReducer:function(r,o,u){var p=Un();if(u!==void 0){var y=u(o);if(ca){fe(!0);try{u(o)}finally{fe(!1)}}}else y=o;return p.memoizedState=p.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},p.queue=r,r=r.dispatch=vN.bind(null,Qe,r),[p.memoizedState,r]},useRef:function(r){var o=Un();return r={current:r},o.memoizedState=r},useState:function(r){r=bp(r);var o=r.queue,u=p0.bind(null,Qe,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Sp,useDeferredValue:function(r,o){var u=Un();return _p(u,r,o)},useTransition:function(){var r=bp(!1);return r=c0.bind(null,Qe,r.queue,!0,!1),Un().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var p=Qe,y=Un();if(ot){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),St===null)throw Error(n(349));(it&127)!==0||Bb(p,o,u)}y.memoizedState=u;var x={value:u,getSnapshot:o};return y.queue=x,e0(Fb.bind(null,p,x,r),[r]),p.flags|=2048,ho(9,{destroy:void 0},zb.bind(null,p,x,u,o),null),u},useId:function(){var r=Un(),o=St.identifierPrefix;if(ot){var u=oi,p=ai;u=(p&~(1<<32-ve(p)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Hu++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=uN++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Ep,useFormState:Xb,useActionState:Xb,useOptimistic:function(r){var o=Un();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Cp.bind(null,Qe,!0,u),u.dispatch=o,[r,o]},useMemoCache:gp,useCacheRefresh:function(){return Un().memoizedState=gN.bind(null,Qe)},useEffectEvent:function(r){var o=Un(),u={impl:r};return o.memoizedState=u,function(){if((ft&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},Tp={readContext:Cn,use:Gu,useCallback:a0,useContext:Cn,useEffect:wp,useImperativeHandle:r0,useInsertionEffect:n0,useLayoutEffect:s0,useMemo:o0,useReducer:qu,useRef:Zb,useState:function(){return qu(Pi)},useDebugValue:Sp,useDeferredValue:function(r,o){var u=Wt();return l0(u,vt.memoizedState,r,o)},useTransition:function(){var r=qu(Pi)[0],o=Wt().memoizedState;return[typeof r=="boolean"?r:Yl(r),o]},useSyncExternalStore:Ib,useId:h0,useHostTransitionStatus:Ep,useFormState:Kb,useActionState:Kb,useOptimistic:function(r,o){var u=Wt();return Hb(u,vt,r,o)},useMemoCache:gp,useCacheRefresh:f0};Tp.useEffectEvent=t0;var y0={readContext:Cn,use:Gu,useCallback:a0,useContext:Cn,useEffect:wp,useImperativeHandle:r0,useInsertionEffect:n0,useLayoutEffect:s0,useMemo:o0,useReducer:yp,useRef:Zb,useState:function(){return yp(Pi)},useDebugValue:Sp,useDeferredValue:function(r,o){var u=Wt();return vt===null?_p(u,r,o):l0(u,vt.memoizedState,r,o)},useTransition:function(){var r=yp(Pi)[0],o=Wt().memoizedState;return[typeof r=="boolean"?r:Yl(r),o]},useSyncExternalStore:Ib,useId:h0,useHostTransitionStatus:Ep,useFormState:Qb,useActionState:Qb,useOptimistic:function(r,o){var u=Wt();return vt!==null?Hb(u,vt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:gp,useCacheRefresh:f0};y0.useEffectEvent=t0;function Np(r,o,u,p){o=r.memoizedState,u=u(p,o),u=u==null?o:g({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var kp={enqueueSetState:function(r,o,u){r=r._reactInternals;var p=ms(),y=vr(p);y.payload=o,u!=null&&(y.callback=u),o=yr(r,y,p),o!==null&&(ts(o,r,p),Vl(o,r,p))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var p=ms(),y=vr(p);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=yr(r,y,p),o!==null&&(ts(o,r,p),Vl(o,r,p))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=ms(),p=vr(u);p.tag=2,o!=null&&(p.callback=o),o=yr(r,p,u),o!==null&&(ts(o,r,u),Vl(o,r,u))}};function b0(r,o,u,p,y,x,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,x,C):o.prototype&&o.prototype.isPureReactComponent?!Ll(u,p)||!Ll(y,x):!0}function x0(r,o,u,p){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==r&&kp.enqueueReplaceState(o,o.state,null)}function ua(r,o){var u=o;if("ref"in o){u={};for(var p in o)p!=="ref"&&(u[p]=o[p])}if(r=r.defaultProps){u===o&&(u=g({},u));for(var y in r)u[y]===void 0&&(u[y]=r[y])}return u}function w0(r){Tu(r)}function S0(r){console.error(r)}function _0(r){Tu(r)}function Ku(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function A0(r,o,u){try{var p=r.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function jp(r,o,u){return u=vr(u),u.tag=3,u.payload={element:null},u.callback=function(){Ku(r,o)},u}function E0(r){return r=vr(r),r.tag=3,r}function C0(r,o,u,p){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var x=p.value;r.payload=function(){return y(x)},r.callback=function(){A0(o,u,p)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(r.callback=function(){A0(o,u,p),typeof y!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var D=p.stack;this.componentDidCatch(p.value,{componentStack:D!==null?D:""})})}function yN(r,o,u,p,y){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=u.alternate,o!==null&&so(o,u,y,!0),u=ds.current,u!==null){switch(u.tag){case 31:case 13:return Rs===null?ld():u.alternate===null&&Ht===0&&(Ht=3),u.flags&=-257,u.flags|=65536,u.lanes=y,p===Iu?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([p]):o.add(p),tm(r,p,y)),!1;case 22:return u.flags|=65536,p===Iu?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([p]):u.add(p)),tm(r,p,y)),!1}throw Error(n(435,u.tag))}return tm(r,p,y),ld(),!1}if(ot)return o=ds.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,p!==Xf&&(r=Error(n(422),{cause:p}),zl(Ts(r,u)))):(p!==Xf&&(o=Error(n(423),{cause:p}),zl(Ts(o,u))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,p=Ts(p,u),y=jp(r.stateNode,p,y),ap(r,y),Ht!==4&&(Ht=2)),!1;var x=Error(n(520),{cause:p});if(x=Ts(x,u),ic===null?ic=[x]:ic.push(x),Ht!==4&&(Ht=2),o===null)return!0;p=Ts(p,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=y&-y,u.lanes|=r,r=jp(u.stateNode,p,r),ap(u,r),!1;case 1:if(o=u.type,x=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ar===null||!Ar.has(x))))return u.flags|=65536,y&=-y,u.lanes|=y,y=E0(y),C0(y,r,u,p),ap(u,y),!1}u=u.return}while(u!==null);return!1}var Rp=Error(n(461)),tn=!1;function Tn(r,o,u,p){o.child=r===null?jb(o,null,u,p):la(o,r.child,u,p)}function T0(r,o,u,p,y){u=u.render;var x=o.ref;if("ref"in p){var C={};for(var D in p)D!=="ref"&&(C[D]=p[D])}else C=p;return ia(o),p=hp(r,o,u,C,x,y),D=fp(),r!==null&&!tn?(pp(r,o,y),Li(r,o,y)):(ot&&D&&Wf(o),o.flags|=1,Tn(r,o,p,y),o.child)}function N0(r,o,u,p,y){if(r===null){var x=u.type;return typeof x=="function"&&!Vf(x)&&x.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=x,k0(r,o,x,p,y)):(r=Ru(u.type,null,p,o,o.mode,y),r.ref=o.ref,r.return=o,o.child=r)}if(x=r.child,!zp(r,y)){var C=x.memoizedProps;if(u=u.compare,u=u!==null?u:Ll,u(C,p)&&r.ref===o.ref)return Li(r,o,y)}return o.flags|=1,r=ji(x,p),r.ref=o.ref,r.return=o,o.child=r}function k0(r,o,u,p,y){if(r!==null){var x=r.memoizedProps;if(Ll(x,p)&&r.ref===o.ref)if(tn=!1,o.pendingProps=p=x,zp(r,y))(r.flags&131072)!==0&&(tn=!0);else return o.lanes=r.lanes,Li(r,o,y)}return Dp(r,o,u,p,y)}function j0(r,o,u,p){var y=p.children,x=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(x=x!==null?x.baseLanes|u:u,r!==null){for(p=o.child=r.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~x}else p=0,o.child=null;return R0(r,o,x,u,p)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Pu(o,x!==null?x.cachePool:null),x!==null?Mb(o,x):lp(),Ob(o);else return p=o.lanes=536870912,R0(r,o,x!==null?x.baseLanes|u:u,u,p)}else x!==null?(Pu(o,x.cachePool),Mb(o,x),xr(),o.memoizedState=null):(r!==null&&Pu(o,null),lp(),xr());return Tn(r,o,y,u),o.child}function Jl(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function R0(r,o,u,p,y){var x=np();return x=x===null?null:{parent:Zt._currentValue,pool:x},o.memoizedState={baseLanes:u,cachePool:x},r!==null&&Pu(o,null),lp(),Ob(o),r!==null&&so(r,o,p,!0),o.childLanes=y,null}function Ju(r,o){return o=Zu({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function D0(r,o,u){return la(o,r.child,null,u),r=Ju(o,o.pendingProps),r.flags|=2,hs(o),o.memoizedState=null,r}function bN(r,o,u){var p=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(ot){if(p.mode==="hidden")return r=Ju(o,p),o.lanes=536870912,Jl(null,r);if(up(o),(r=Ct)?(r=Vx(r,js),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:hr!==null?{id:ai,overflow:oi}:null,retryLane:536870912,hydrationErrors:null},u=mb(r),u.return=o,o.child=u,En=o,Ct=null)):r=null,r===null)throw pr(o);return o.lanes=536870912,null}return Ju(o,p)}var x=r.memoizedState;if(x!==null){var C=x.dehydrated;if(up(o),y)if(o.flags&256)o.flags&=-257,o=D0(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(n(558));else if(tn||so(r,o,u,!1),y=(u&r.childLanes)!==0,tn||y){if(p=St,p!==null&&(C=Yn(p,u),C!==0&&C!==x.retryLane))throw x.retryLane=C,ea(r,C),ts(p,r,C),Rp;ld(),o=D0(r,o,u)}else r=x.treeContext,Ct=Ds(C.nextSibling),En=o,ot=!0,fr=null,js=!1,r!==null&&yb(o,r),o=Ju(o,p),o.flags|=4096;return o}return r=ji(r.child,{mode:p.mode,children:p.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Qu(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function Dp(r,o,u,p,y){return ia(o),u=hp(r,o,u,p,void 0,y),p=fp(),r!==null&&!tn?(pp(r,o,y),Li(r,o,y)):(ot&&p&&Wf(o),o.flags|=1,Tn(r,o,u,y),o.child)}function M0(r,o,u,p,y,x){return ia(o),o.updateQueue=null,u=Lb(o,p,u,y),Pb(r),p=fp(),r!==null&&!tn?(pp(r,o,x),Li(r,o,x)):(ot&&p&&Wf(o),o.flags|=1,Tn(r,o,u,x),o.child)}function O0(r,o,u,p,y){if(ia(o),o.stateNode===null){var x=Za,C=u.contextType;typeof C=="object"&&C!==null&&(x=Cn(C)),x=new u(p,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=kp,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=p,x.state=o.memoizedState,x.refs={},ip(o),C=u.contextType,x.context=typeof C=="object"&&C!==null?Cn(C):Za,x.state=o.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(Np(o,u,C,p),x.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(C=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),C!==x.state&&kp.enqueueReplaceState(x,x.state,null),ql(o,p,x,y),Gl(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(r===null){x=o.stateNode;var D=o.memoizedProps,V=ua(u,D);x.props=V;var se=x.context,de=u.contextType;C=Za,typeof de=="object"&&de!==null&&(C=Cn(de));var pe=u.getDerivedStateFromProps;de=typeof pe=="function"||typeof x.getSnapshotBeforeUpdate=="function",D=o.pendingProps!==D,de||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D||se!==C)&&x0(o,x,p,C),gr=!1;var re=o.memoizedState;x.state=re,ql(o,p,x,y),Gl(),se=o.memoizedState,D||re!==se||gr?(typeof pe=="function"&&(Np(o,u,pe,p),se=o.memoizedState),(V=gr||b0(o,u,V,p,re,se,C))?(de||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=se),x.props=p,x.state=se,x.context=C,p=V):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{x=o.stateNode,rp(r,o),C=o.memoizedProps,de=ua(u,C),x.props=de,pe=o.pendingProps,re=x.context,se=u.contextType,V=Za,typeof se=="object"&&se!==null&&(V=Cn(se)),D=u.getDerivedStateFromProps,(se=typeof D=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==pe||re!==V)&&x0(o,x,p,V),gr=!1,re=o.memoizedState,x.state=re,ql(o,p,x,y),Gl();var ce=o.memoizedState;C!==pe||re!==ce||gr||r!==null&&r.dependencies!==null&&Mu(r.dependencies)?(typeof D=="function"&&(Np(o,u,D,p),ce=o.memoizedState),(de=gr||b0(o,u,de,p,re,ce,V)||r!==null&&r.dependencies!==null&&Mu(r.dependencies))?(se||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,ce,V),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,ce,V)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===r.memoizedProps&&re===r.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&re===r.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=ce),x.props=p,x.state=ce,x.context=V,p=de):(typeof x.componentDidUpdate!="function"||C===r.memoizedProps&&re===r.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&re===r.memoizedState||(o.flags|=1024),p=!1)}return x=p,Qu(r,o),p=(o.flags&128)!==0,x||p?(x=o.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,r!==null&&p?(o.child=la(o,r.child,null,y),o.child=la(o,null,u,y)):Tn(r,o,u,y),o.memoizedState=x.state,r=o.child):r=Li(r,o,y),r}function P0(r,o,u,p){return na(),o.flags|=256,Tn(r,o,u,p),o.child}var Mp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Op(r){return{baseLanes:r,cachePool:Ab()}}function Pp(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=ps),r}function L0(r,o,u){var p=o.pendingProps,y=!1,x=(o.flags&128)!==0,C;if((C=x)||(C=r!==null&&r.memoizedState===null?!1:(qt.current&2)!==0),C&&(y=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,r===null){if(ot){if(y?br(o):xr(),(r=Ct)?(r=Vx(r,js),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:hr!==null?{id:ai,overflow:oi}:null,retryLane:536870912,hydrationErrors:null},u=mb(r),u.return=o,o.child=u,En=o,Ct=null)):r=null,r===null)throw pr(o);return vm(r)?o.lanes=32:o.lanes=536870912,null}var D=p.children;return p=p.fallback,y?(xr(),y=o.mode,D=Zu({mode:"hidden",children:D},y),p=ta(p,y,u,null),D.return=o,p.return=o,D.sibling=p,o.child=D,p=o.child,p.memoizedState=Op(u),p.childLanes=Pp(r,C,u),o.memoizedState=Mp,Jl(null,p)):(br(o),Lp(o,D))}var V=r.memoizedState;if(V!==null&&(D=V.dehydrated,D!==null)){if(x)o.flags&256?(br(o),o.flags&=-257,o=Ip(r,o,u)):o.memoizedState!==null?(xr(),o.child=r.child,o.flags|=128,o=null):(xr(),D=p.fallback,y=o.mode,p=Zu({mode:"visible",children:p.children},y),D=ta(D,y,u,null),D.flags|=2,p.return=o,D.return=o,p.sibling=D,o.child=p,la(o,r.child,null,u),p=o.child,p.memoizedState=Op(u),p.childLanes=Pp(r,C,u),o.memoizedState=Mp,o=Jl(null,p));else if(br(o),vm(D)){if(C=D.nextSibling&&D.nextSibling.dataset,C)var se=C.dgst;C=se,p=Error(n(419)),p.stack="",p.digest=C,zl({value:p,source:null,stack:null}),o=Ip(r,o,u)}else if(tn||so(r,o,u,!1),C=(u&r.childLanes)!==0,tn||C){if(C=St,C!==null&&(p=Yn(C,u),p!==0&&p!==V.retryLane))throw V.retryLane=p,ea(r,p),ts(C,r,p),Rp;gm(D)||ld(),o=Ip(r,o,u)}else gm(D)?(o.flags|=192,o.child=r.child,o=null):(r=V.treeContext,Ct=Ds(D.nextSibling),En=o,ot=!0,fr=null,js=!1,r!==null&&yb(o,r),o=Lp(o,p.children),o.flags|=4096);return o}return y?(xr(),D=p.fallback,y=o.mode,V=r.child,se=V.sibling,p=ji(V,{mode:"hidden",children:p.children}),p.subtreeFlags=V.subtreeFlags&65011712,se!==null?D=ji(se,D):(D=ta(D,y,u,null),D.flags|=2),D.return=o,p.return=o,p.sibling=D,o.child=p,Jl(null,p),p=o.child,D=r.child.memoizedState,D===null?D=Op(u):(y=D.cachePool,y!==null?(V=Zt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=Ab(),D={baseLanes:D.baseLanes|u,cachePool:y}),p.memoizedState=D,p.childLanes=Pp(r,C,u),o.memoizedState=Mp,Jl(r.child,p)):(br(o),u=r.child,r=u.sibling,u=ji(u,{mode:"visible",children:p.children}),u.return=o,u.sibling=null,r!==null&&(C=o.deletions,C===null?(o.deletions=[r],o.flags|=16):C.push(r)),o.child=u,o.memoizedState=null,u)}function Lp(r,o){return o=Zu({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Zu(r,o){return r=us(22,r,null,o),r.lanes=0,r}function Ip(r,o,u){return la(o,r.child,null,u),r=Lp(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function I0(r,o,u){r.lanes|=o;var p=r.alternate;p!==null&&(p.lanes|=o),Qf(r.return,o,u)}function Bp(r,o,u,p,y,x){var C=r.memoizedState;C===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y,treeForkCount:x}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=p,C.tail=u,C.tailMode=y,C.treeForkCount=x)}function B0(r,o,u){var p=o.pendingProps,y=p.revealOrder,x=p.tail;p=p.children;var C=qt.current,D=(C&2)!==0;if(D?(C=C&1|2,o.flags|=128):C&=1,B(qt,C),Tn(r,o,p,u),p=ot?Bl:0,!D&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&I0(r,u,o);else if(r.tag===19)I0(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(y){case"forwards":for(u=o.child,y=null;u!==null;)r=u.alternate,r!==null&&Uu(r)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),Bp(o,!1,y,u,x,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(r=y.alternate,r!==null&&Uu(r)===null){o.child=y;break}r=y.sibling,y.sibling=u,u=y,y=r}Bp(o,!0,u,null,x,p);break;case"together":Bp(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function Li(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),_r|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(so(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,u=ji(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=ji(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function zp(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Mu(r)))}function xN(r,o,u){switch(o.tag){case 3:Y(o,o.stateNode.containerInfo),mr(o,Zt,r.memoizedState.cache),na();break;case 27:case 5:ge(o);break;case 4:Y(o,o.stateNode.containerInfo);break;case 10:mr(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,up(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(br(o),o.flags|=128,null):(u&o.child.childLanes)!==0?L0(r,o,u):(br(o),r=Li(r,o,u),r!==null?r.sibling:null);br(o);break;case 19:var y=(r.flags&128)!==0;if(p=(u&o.childLanes)!==0,p||(so(r,o,u,!1),p=(u&o.childLanes)!==0),y){if(p)return B0(r,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),B(qt,qt.current),p)break;return null;case 22:return o.lanes=0,j0(r,o,u,o.pendingProps);case 24:mr(o,Zt,r.memoizedState.cache)}return Li(r,o,u)}function z0(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)tn=!0;else{if(!zp(r,u)&&(o.flags&128)===0)return tn=!1,xN(r,o,u);tn=(r.flags&131072)!==0}else tn=!1,ot&&(o.flags&1048576)!==0&&vb(o,Bl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(r=aa(o.elementType),o.type=r,typeof r=="function")Vf(r)?(p=ua(r,p),o.tag=1,o=O0(null,o,r,p,u)):(o.tag=0,o=Dp(null,o,r,p,u));else{if(r!=null){var y=r.$$typeof;if(y===j){o.tag=11,o=T0(null,o,r,p,u);break e}else if(y===M){o.tag=14,o=N0(null,o,r,p,u);break e}}throw o=H(r)||r,Error(n(306,o,""))}}return o;case 0:return Dp(r,o,o.type,o.pendingProps,u);case 1:return p=o.type,y=ua(p,o.pendingProps),O0(r,o,p,y,u);case 3:e:{if(Y(o,o.stateNode.containerInfo),r===null)throw Error(n(387));p=o.pendingProps;var x=o.memoizedState;y=x.element,rp(r,o),ql(o,p,null,u);var C=o.memoizedState;if(p=C.cache,mr(o,Zt,p),p!==x.cache&&Zf(o,[Zt],u,!0),Gl(),p=C.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=P0(r,o,p,u);break e}else if(p!==y){y=Ts(Error(n(424)),o),zl(y),o=P0(r,o,p,u);break e}else for(r=o.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,Ct=Ds(r.firstChild),En=o,ot=!0,fr=null,js=!0,u=jb(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(na(),p===y){o=Li(r,o,u);break e}Tn(r,o,p,u)}o=o.child}return o;case 26:return Qu(r,o),r===null?(u=Kx(o.type,null,o.pendingProps,null))?o.memoizedState=u:ot||(u=o.type,r=o.pendingProps,p=md(ue.current).createElement(u),p[An]=o,p[Xn]=r,Nn(p,u,r),hn(p),o.stateNode=p):o.memoizedState=Kx(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return ge(o),r===null&&ot&&(p=o.stateNode=Wx(o.type,o.pendingProps,ue.current),En=o,js=!0,y=Ct,Nr(o.type)?(ym=y,Ct=Ds(p.firstChild)):Ct=y),Tn(r,o,o.pendingProps.children,u),Qu(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&ot&&((y=p=Ct)&&(p=KN(p,o.type,o.pendingProps,js),p!==null?(o.stateNode=p,En=o,Ct=Ds(p.firstChild),js=!1,y=!0):y=!1),y||pr(o)),ge(o),y=o.type,x=o.pendingProps,C=r!==null?r.memoizedProps:null,p=x.children,fm(y,x)?p=null:C!==null&&fm(y,C)&&(o.flags|=32),o.memoizedState!==null&&(y=hp(r,o,dN,null,null,u),hc._currentValue=y),Qu(r,o),Tn(r,o,p,u),o.child;case 6:return r===null&&ot&&((r=u=Ct)&&(u=JN(u,o.pendingProps,js),u!==null?(o.stateNode=u,En=o,Ct=null,r=!0):r=!1),r||pr(o)),null;case 13:return L0(r,o,u);case 4:return Y(o,o.stateNode.containerInfo),p=o.pendingProps,r===null?o.child=la(o,null,p,u):Tn(r,o,p,u),o.child;case 11:return T0(r,o,o.type,o.pendingProps,u);case 7:return Tn(r,o,o.pendingProps,u),o.child;case 8:return Tn(r,o,o.pendingProps.children,u),o.child;case 12:return Tn(r,o,o.pendingProps.children,u),o.child;case 10:return p=o.pendingProps,mr(o,o.type,p.value),Tn(r,o,p.children,u),o.child;case 9:return y=o.type._context,p=o.pendingProps.children,ia(o),y=Cn(y),p=p(y),o.flags|=1,Tn(r,o,p,u),o.child;case 14:return N0(r,o,o.type,o.pendingProps,u);case 15:return k0(r,o,o.type,o.pendingProps,u);case 19:return B0(r,o,u);case 31:return bN(r,o,u);case 22:return j0(r,o,u,o.pendingProps);case 24:return ia(o),p=Cn(Zt),r===null?(y=np(),y===null&&(y=St,x=ep(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=u),y=x),o.memoizedState={parent:p,cache:y},ip(o),mr(o,Zt,y)):((r.lanes&u)!==0&&(rp(r,o),ql(o,null,null,u),Gl()),y=r.memoizedState,x=o.memoizedState,y.parent!==p?(y={parent:p,cache:p},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),mr(o,Zt,p)):(p=x.cache,mr(o,Zt,p),p!==y.cache&&Zf(o,[Zt],u,!0))),Tn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Ii(r){r.flags|=4}function Fp(r,o,u,p,y){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(y&335544128)===y)if(r.stateNode.complete)r.flags|=8192;else if(hx())r.flags|=8192;else throw oa=Iu,sp}else r.flags&=-16777217}function F0(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!tw(o))if(hx())r.flags|=8192;else throw oa=Iu,sp}function ed(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Ln():536870912,r.lanes|=o,go|=o)}function Ql(r,o){if(!ot)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function Tt(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,p=0;if(o)for(var y=r.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=p,r.childLanes=u,o}function wN(r,o,u){var p=o.pendingProps;switch(Yf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(o),null;case 1:return Tt(o),null;case 3:return u=o.stateNode,p=null,r!==null&&(p=r.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),Mi(Zt),oe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(no(o)?Ii(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Kf())),Tt(o),null;case 26:var y=o.type,x=o.memoizedState;return r===null?(Ii(o),x!==null?(Tt(o),F0(o,x)):(Tt(o),Fp(o,y,null,p,u))):x?x!==r.memoizedState?(Ii(o),Tt(o),F0(o,x)):(Tt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==p&&Ii(o),Tt(o),Fp(o,y,r,p,u)),null;case 27:if(xe(o),u=ue.current,y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==p&&Ii(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return Tt(o),null}r=q.current,no(o)?bb(o):(r=Wx(y,p,u),o.stateNode=r,Ii(o))}return Tt(o),null;case 5:if(xe(o),y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==p&&Ii(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return Tt(o),null}if(x=q.current,no(o))bb(o);else{var C=md(ue.current);switch(x){case 1:x=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=C.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof p.is=="string"?C.createElement("select",{is:p.is}):C.createElement("select"),p.multiple?x.multiple=!0:p.size&&(x.size=p.size);break;default:x=typeof p.is=="string"?C.createElement(y,{is:p.is}):C.createElement(y)}}x[An]=o,x[Xn]=p;e:for(C=o.child;C!==null;){if(C.tag===5||C.tag===6)x.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===o)break e;for(;C.sibling===null;){if(C.return===null||C.return===o)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}o.stateNode=x;e:switch(Nn(x,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Ii(o)}}return Tt(o),Fp(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==p&&Ii(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(n(166));if(r=ue.current,no(o)){if(r=o.stateNode,u=o.memoizedProps,p=null,y=En,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}r[An]=o,r=!!(r.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||Lx(r.nodeValue,u)),r||pr(o,!0)}else r=md(r).createTextNode(p),r[An]=o,o.stateNode=r}return Tt(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(p=no(o),u!==null){if(r===null){if(!p)throw Error(n(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[An]=o}else na(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Tt(o),r=!1}else u=Kf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(hs(o),o):(hs(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Tt(o),null;case 13:if(p=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=no(o),p!==null&&p.dehydrated!==null){if(r===null){if(!y)throw Error(n(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[An]=o}else na(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Tt(o),y=!1}else y=Kf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(hs(o),o):(hs(o),null)}return hs(o),(o.flags&128)!==0?(o.lanes=u,o):(u=p!==null,r=r!==null&&r.memoizedState!==null,u&&(p=o.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),x=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),x!==y&&(p.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),ed(o,o.updateQueue),Tt(o),null);case 4:return oe(),r===null&&lm(o.stateNode.containerInfo),Tt(o),null;case 10:return Mi(o.type),Tt(o),null;case 19:if(O(qt),p=o.memoizedState,p===null)return Tt(o),null;if(y=(o.flags&128)!==0,x=p.rendering,x===null)if(y)Ql(p,!1);else{if(Ht!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(x=Uu(r),x!==null){for(o.flags|=128,Ql(p,!1),r=x.updateQueue,o.updateQueue=r,ed(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)pb(u,r),u=u.sibling;return B(qt,qt.current&1|2),ot&&Ri(o,p.treeForkCount),o.child}r=r.sibling}p.tail!==null&&kt()>rd&&(o.flags|=128,y=!0,Ql(p,!1),o.lanes=4194304)}else{if(!y)if(r=Uu(x),r!==null){if(o.flags|=128,y=!0,r=r.updateQueue,o.updateQueue=r,ed(o,r),Ql(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!ot)return Tt(o),null}else 2*kt()-p.renderingStartTime>rd&&u!==536870912&&(o.flags|=128,y=!0,Ql(p,!1),o.lanes=4194304);p.isBackwards?(x.sibling=o.child,o.child=x):(r=p.last,r!==null?r.sibling=x:o.child=x,p.last=x)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=kt(),r.sibling=null,u=qt.current,B(qt,y?u&1|2:u&1),ot&&Ri(o,p.treeForkCount),r):(Tt(o),null);case 22:case 23:return hs(o),cp(),p=o.memoizedState!==null,r!==null?r.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(u&536870912)!==0&&(o.flags&128)===0&&(Tt(o),o.subtreeFlags&6&&(o.flags|=8192)):Tt(o),u=o.updateQueue,u!==null&&ed(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==u&&(o.flags|=2048),r!==null&&O(ra),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Mi(Zt),Tt(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function SN(r,o){switch(Yf(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Mi(Zt),oe(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return xe(o),null;case 31:if(o.memoizedState!==null){if(hs(o),o.alternate===null)throw Error(n(340));na()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(hs(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));na()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return O(qt),null;case 4:return oe(),null;case 10:return Mi(o.type),null;case 22:case 23:return hs(o),cp(),r!==null&&O(ra),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Mi(Zt),null;case 25:return null;default:return null}}function U0(r,o){switch(Yf(o),o.tag){case 3:Mi(Zt),oe();break;case 26:case 27:case 5:xe(o);break;case 4:oe();break;case 31:o.memoizedState!==null&&hs(o);break;case 13:hs(o);break;case 19:O(qt);break;case 10:Mi(o.type);break;case 22:case 23:hs(o),cp(),r!==null&&O(ra);break;case 24:Mi(Zt)}}function Zl(r,o){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&r)===r){p=void 0;var x=u.create,C=u.inst;p=x(),C.destroy=p}u=u.next}while(u!==y)}}catch(D){gt(o,o.return,D)}}function wr(r,o,u){try{var p=o.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var x=y.next;p=x;do{if((p.tag&r)===r){var C=p.inst,D=C.destroy;if(D!==void 0){C.destroy=void 0,y=o;var V=u,se=D;try{se()}catch(de){gt(y,V,de)}}}p=p.next}while(p!==x)}}catch(de){gt(o,o.return,de)}}function $0(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{Db(o,u)}catch(p){gt(r,r.return,p)}}}function H0(r,o,u){u.props=ua(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(p){gt(r,o,p)}}function ec(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var p=r.stateNode;break;case 30:p=r.stateNode;break;default:p=r.stateNode}typeof u=="function"?r.refCleanup=u(p):u.current=p}}catch(y){gt(r,o,y)}}function li(r,o){var u=r.ref,p=r.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(y){gt(r,o,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){gt(r,o,y)}else u.current=null}function V0(r){var o=r.type,u=r.memoizedProps,p=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(y){gt(r,r.return,y)}}function Up(r,o,u){try{var p=r.stateNode;VN(p,r.type,u,o),p[Xn]=o}catch(y){gt(r,r.return,y)}}function G0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Nr(r.type)||r.tag===4}function $p(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||G0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Nr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Hp(r,o,u){var p=r.tag;if(p===5||p===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ni));else if(p!==4&&(p===27&&Nr(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(Hp(r,o,u),r=r.sibling;r!==null;)Hp(r,o,u),r=r.sibling}function td(r,o,u){var p=r.tag;if(p===5||p===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(p!==4&&(p===27&&Nr(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(td(r,o,u),r=r.sibling;r!==null;)td(r,o,u),r=r.sibling}function q0(r){var o=r.stateNode,u=r.memoizedProps;try{for(var p=r.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);Nn(o,p,u),o[An]=r,o[Xn]=u}catch(x){gt(r,r.return,x)}}var Bi=!1,nn=!1,Vp=!1,W0=typeof WeakSet=="function"?WeakSet:Set,fn=null;function _N(r,o){if(r=r.containerInfo,dm=Sd,r=rb(r),If(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var y=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var C=0,D=-1,V=-1,se=0,de=0,pe=r,re=null;t:for(;;){for(var ce;pe!==u||y!==0&&pe.nodeType!==3||(D=C+y),pe!==x||p!==0&&pe.nodeType!==3||(V=C+p),pe.nodeType===3&&(C+=pe.nodeValue.length),(ce=pe.firstChild)!==null;)re=pe,pe=ce;for(;;){if(pe===r)break t;if(re===u&&++se===y&&(D=C),re===x&&++de===p&&(V=C),(ce=pe.nextSibling)!==null)break;pe=re,re=pe.parentNode}pe=ce}u=D===-1||V===-1?null:{start:D,end:V}}else u=null}u=u||{start:0,end:0}}else u=null;for(hm={focusedElem:r,selectionRange:u},Sd=!1,fn=o;fn!==null;)if(o=fn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,fn=r;else for(;fn!==null;){switch(o=fn,x=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)y=r[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&x!==null){r=void 0,u=o,y=x.memoizedProps,x=x.memoizedState,p=u.stateNode;try{var Ne=ua(u.type,y);r=p.getSnapshotBeforeUpdate(Ne,x),p.__reactInternalSnapshotBeforeUpdate=r}catch(ze){gt(u,u.return,ze)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)mm(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":mm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,fn=r;break}fn=o.return}}function Y0(r,o,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:Fi(r,u),p&4&&Zl(5,u);break;case 1:if(Fi(r,u),p&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(C){gt(u,u.return,C)}else{var y=ua(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(y,o,r.__reactInternalSnapshotBeforeUpdate)}catch(C){gt(u,u.return,C)}}p&64&&$0(u),p&512&&ec(u,u.return);break;case 3:if(Fi(r,u),p&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Db(r,o)}catch(C){gt(u,u.return,C)}}break;case 27:o===null&&p&4&&q0(u);case 26:case 5:Fi(r,u),o===null&&p&4&&V0(u),p&512&&ec(u,u.return);break;case 12:Fi(r,u);break;case 31:Fi(r,u),p&4&&J0(r,u);break;case 13:Fi(r,u),p&4&&Q0(r,u),p&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=DN.bind(null,u),QN(r,u))));break;case 22:if(p=u.memoizedState!==null||Bi,!p){o=o!==null&&o.memoizedState!==null||nn,y=Bi;var x=nn;Bi=p,(nn=o)&&!x?Ui(r,u,(u.subtreeFlags&8772)!==0):Fi(r,u),Bi=y,nn=x}break;case 30:break;default:Fi(r,u)}}function X0(r){var o=r.alternate;o!==null&&(r.alternate=null,X0(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&xf(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Dt=null,Jn=!1;function zi(r,o,u){for(u=u.child;u!==null;)K0(r,o,u),u=u.sibling}function K0(r,o,u){if(Q&&typeof Q.onCommitFiberUnmount=="function")try{Q.onCommitFiberUnmount(Us,u)}catch{}switch(u.tag){case 26:nn||li(u,o),zi(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:nn||li(u,o);var p=Dt,y=Jn;Nr(u.type)&&(Dt=u.stateNode,Jn=!1),zi(r,o,u),cc(u.stateNode),Dt=p,Jn=y;break;case 5:nn||li(u,o);case 6:if(p=Dt,y=Jn,Dt=null,zi(r,o,u),Dt=p,Jn=y,Dt!==null)if(Jn)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(u.stateNode)}catch(x){gt(u,o,x)}else try{Dt.removeChild(u.stateNode)}catch(x){gt(u,o,x)}break;case 18:Dt!==null&&(Jn?(r=Dt,$x(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),Ao(r)):$x(Dt,u.stateNode));break;case 4:p=Dt,y=Jn,Dt=u.stateNode.containerInfo,Jn=!0,zi(r,o,u),Dt=p,Jn=y;break;case 0:case 11:case 14:case 15:wr(2,u,o),nn||wr(4,u,o),zi(r,o,u);break;case 1:nn||(li(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"&&H0(u,o,p)),zi(r,o,u);break;case 21:zi(r,o,u);break;case 22:nn=(p=nn)||u.memoizedState!==null,zi(r,o,u),nn=p;break;default:zi(r,o,u)}}function J0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ao(r)}catch(u){gt(o,o.return,u)}}}function Q0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ao(r)}catch(u){gt(o,o.return,u)}}function AN(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new W0),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new W0),o;default:throw Error(n(435,r.tag))}}function nd(r,o){var u=AN(r);o.forEach(function(p){if(!u.has(p)){u.add(p);var y=MN.bind(null,r,p);p.then(y,y)}})}function Qn(r,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p],x=r,C=o,D=C;e:for(;D!==null;){switch(D.tag){case 27:if(Nr(D.type)){Dt=D.stateNode,Jn=!1;break e}break;case 5:Dt=D.stateNode,Jn=!1;break e;case 3:case 4:Dt=D.stateNode.containerInfo,Jn=!0;break e}D=D.return}if(Dt===null)throw Error(n(160));K0(x,C,y),Dt=null,Jn=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Z0(o,r),o=o.sibling}var Vs=null;function Z0(r,o){var u=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Qn(o,r),Zn(r),p&4&&(wr(3,r,r.return),Zl(3,r),wr(5,r,r.return));break;case 1:Qn(o,r),Zn(r),p&512&&(nn||u===null||li(u,u.return)),p&64&&Bi&&(r=r.updateQueue,r!==null&&(p=r.callbacks,p!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var y=Vs;if(Qn(o,r),Zn(r),p&512&&(nn||u===null||li(u,u.return)),p&4){var x=u!==null?u.memoizedState:null;if(p=r.memoizedState,u===null)if(p===null)if(r.stateNode===null){e:{p=r.type,u=r.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":x=y.getElementsByTagName("title")[0],(!x||x[Tl]||x[An]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(p),y.head.insertBefore(x,y.querySelector("head > title"))),Nn(x,p,u),x[An]=r,hn(x),p=x;break e;case"link":var C=Zx("link","href",y).get(p+(u.href||""));if(C){for(var D=0;D<C.length;D++)if(x=C[D],x.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&x.getAttribute("rel")===(u.rel==null?null:u.rel)&&x.getAttribute("title")===(u.title==null?null:u.title)&&x.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(D,1);break t}}x=y.createElement(p),Nn(x,p,u),y.head.appendChild(x);break;case"meta":if(C=Zx("meta","content",y).get(p+(u.content||""))){for(D=0;D<C.length;D++)if(x=C[D],x.getAttribute("content")===(u.content==null?null:""+u.content)&&x.getAttribute("name")===(u.name==null?null:u.name)&&x.getAttribute("property")===(u.property==null?null:u.property)&&x.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&x.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(D,1);break t}}x=y.createElement(p),Nn(x,p,u),y.head.appendChild(x);break;default:throw Error(n(468,p))}x[An]=r,hn(x),p=x}r.stateNode=p}else ew(y,r.type,r.stateNode);else r.stateNode=Qx(y,p,r.memoizedProps);else x!==p?(x===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):x.count--,p===null?ew(y,r.type,r.stateNode):Qx(y,p,r.memoizedProps)):p===null&&r.stateNode!==null&&Up(r,r.memoizedProps,u.memoizedProps)}break;case 27:Qn(o,r),Zn(r),p&512&&(nn||u===null||li(u,u.return)),u!==null&&p&4&&Up(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Qn(o,r),Zn(r),p&512&&(nn||u===null||li(u,u.return)),r.flags&32){y=r.stateNode;try{qa(y,"")}catch(Ne){gt(r,r.return,Ne)}}p&4&&r.stateNode!=null&&(y=r.memoizedProps,Up(r,y,u!==null?u.memoizedProps:y)),p&1024&&(Vp=!0);break;case 6:if(Qn(o,r),Zn(r),p&4){if(r.stateNode===null)throw Error(n(162));p=r.memoizedProps,u=r.stateNode;try{u.nodeValue=p}catch(Ne){gt(r,r.return,Ne)}}break;case 3:if(yd=null,y=Vs,Vs=gd(o.containerInfo),Qn(o,r),Vs=y,Zn(r),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Ao(o.containerInfo)}catch(Ne){gt(r,r.return,Ne)}Vp&&(Vp=!1,ex(r));break;case 4:p=Vs,Vs=gd(r.stateNode.containerInfo),Qn(o,r),Zn(r),Vs=p;break;case 12:Qn(o,r),Zn(r);break;case 31:Qn(o,r),Zn(r),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,nd(r,p)));break;case 13:Qn(o,r),Zn(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(id=kt()),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,nd(r,p)));break;case 22:y=r.memoizedState!==null;var V=u!==null&&u.memoizedState!==null,se=Bi,de=nn;if(Bi=se||y,nn=de||V,Qn(o,r),nn=de,Bi=se,Zn(r),p&8192)e:for(o=r.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(u===null||V||Bi||nn||da(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){V=u=o;try{if(x=V.stateNode,y)C=x.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{D=V.stateNode;var pe=V.memoizedProps.style,re=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;D.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Ne){gt(V,V.return,Ne)}}}else if(o.tag===6){if(u===null){V=o;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(Ne){gt(V,V.return,Ne)}}}else if(o.tag===18){if(u===null){V=o;try{var ce=V.stateNode;y?Hx(ce,!0):Hx(V.stateNode,!1)}catch(Ne){gt(V,V.return,Ne)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=r.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,nd(r,u))));break;case 19:Qn(o,r),Zn(r),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,nd(r,p)));break;case 30:break;case 21:break;default:Qn(o,r),Zn(r)}}function Zn(r){var o=r.flags;if(o&2){try{for(var u,p=r.return;p!==null;){if(G0(p)){u=p;break}p=p.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var y=u.stateNode,x=$p(r);td(r,x,y);break;case 5:var C=u.stateNode;u.flags&32&&(qa(C,""),u.flags&=-33);var D=$p(r);td(r,D,C);break;case 3:case 4:var V=u.stateNode.containerInfo,se=$p(r);Hp(r,se,V);break;default:throw Error(n(161))}}catch(de){gt(r,r.return,de)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function ex(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;ex(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Fi(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Y0(r,o.alternate,o),o=o.sibling}function da(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:wr(4,o,o.return),da(o);break;case 1:li(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&H0(o,o.return,u),da(o);break;case 27:cc(o.stateNode);case 26:case 5:li(o,o.return),da(o);break;case 22:o.memoizedState===null&&da(o);break;case 30:da(o);break;default:da(o)}r=r.sibling}}function Ui(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,y=r,x=o,C=x.flags;switch(x.tag){case 0:case 11:case 15:Ui(y,x,u),Zl(4,x);break;case 1:if(Ui(y,x,u),p=x,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(se){gt(p,p.return,se)}if(p=x,y=p.updateQueue,y!==null){var D=p.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)Rb(V[y],D)}catch(se){gt(p,p.return,se)}}u&&C&64&&$0(x),ec(x,x.return);break;case 27:q0(x);case 26:case 5:Ui(y,x,u),u&&p===null&&C&4&&V0(x),ec(x,x.return);break;case 12:Ui(y,x,u);break;case 31:Ui(y,x,u),u&&C&4&&J0(y,x);break;case 13:Ui(y,x,u),u&&C&4&&Q0(y,x);break;case 22:x.memoizedState===null&&Ui(y,x,u),ec(x,x.return);break;case 30:break;default:Ui(y,x,u)}o=o.sibling}}function Gp(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Fl(u))}function qp(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Fl(r))}function Gs(r,o,u,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)tx(r,o,u,p),o=o.sibling}function tx(r,o,u,p){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Gs(r,o,u,p),y&2048&&Zl(9,o);break;case 1:Gs(r,o,u,p);break;case 3:Gs(r,o,u,p),y&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Fl(r)));break;case 12:if(y&2048){Gs(r,o,u,p),r=o.stateNode;try{var x=o.memoizedProps,C=x.id,D=x.onPostCommit;typeof D=="function"&&D(C,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(V){gt(o,o.return,V)}}else Gs(r,o,u,p);break;case 31:Gs(r,o,u,p);break;case 13:Gs(r,o,u,p);break;case 23:break;case 22:x=o.stateNode,C=o.alternate,o.memoizedState!==null?x._visibility&2?Gs(r,o,u,p):tc(r,o):x._visibility&2?Gs(r,o,u,p):(x._visibility|=2,fo(r,o,u,p,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Gp(C,o);break;case 24:Gs(r,o,u,p),y&2048&&qp(o.alternate,o);break;default:Gs(r,o,u,p)}}function fo(r,o,u,p,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var x=r,C=o,D=u,V=p,se=C.flags;switch(C.tag){case 0:case 11:case 15:fo(x,C,D,V,y),Zl(8,C);break;case 23:break;case 22:var de=C.stateNode;C.memoizedState!==null?de._visibility&2?fo(x,C,D,V,y):tc(x,C):(de._visibility|=2,fo(x,C,D,V,y)),y&&se&2048&&Gp(C.alternate,C);break;case 24:fo(x,C,D,V,y),y&&se&2048&&qp(C.alternate,C);break;default:fo(x,C,D,V,y)}o=o.sibling}}function tc(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,p=o,y=p.flags;switch(p.tag){case 22:tc(u,p),y&2048&&Gp(p.alternate,p);break;case 24:tc(u,p),y&2048&&qp(p.alternate,p);break;default:tc(u,p)}o=o.sibling}}var nc=8192;function po(r,o,u){if(r.subtreeFlags&nc)for(r=r.child;r!==null;)nx(r,o,u),r=r.sibling}function nx(r,o,u){switch(r.tag){case 26:po(r,o,u),r.flags&nc&&r.memoizedState!==null&&uk(u,Vs,r.memoizedState,r.memoizedProps);break;case 5:po(r,o,u);break;case 3:case 4:var p=Vs;Vs=gd(r.stateNode.containerInfo),po(r,o,u),Vs=p;break;case 22:r.memoizedState===null&&(p=r.alternate,p!==null&&p.memoizedState!==null?(p=nc,nc=16777216,po(r,o,u),nc=p):po(r,o,u));break;default:po(r,o,u)}}function sx(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function sc(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];fn=p,rx(p,r)}sx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ix(r),r=r.sibling}function ix(r){switch(r.tag){case 0:case 11:case 15:sc(r),r.flags&2048&&wr(9,r,r.return);break;case 3:sc(r);break;case 12:sc(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,sd(r)):sc(r);break;default:sc(r)}}function sd(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];fn=p,rx(p,r)}sx(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:wr(8,o,o.return),sd(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,sd(o));break;default:sd(o)}r=r.sibling}}function rx(r,o){for(;fn!==null;){var u=fn;switch(u.tag){case 0:case 11:case 15:wr(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Fl(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,fn=p;else e:for(u=r;fn!==null;){p=fn;var y=p.sibling,x=p.return;if(X0(p),p===u){fn=null;break e}if(y!==null){y.return=x,fn=y;break e}fn=x}}}var EN={getCacheForType:function(r){var o=Cn(Zt),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return Cn(Zt).controller.signal}},CN=typeof WeakMap=="function"?WeakMap:Map,ft=0,St=null,nt=null,it=0,mt=0,fs=null,Sr=!1,mo=!1,Wp=!1,$i=0,Ht=0,_r=0,ha=0,Yp=0,ps=0,go=0,ic=null,es=null,Xp=!1,id=0,ax=0,rd=1/0,ad=null,Ar=null,on=0,Er=null,vo=null,Hi=0,Kp=0,Jp=null,ox=null,rc=0,Qp=null;function ms(){return(ft&2)!==0&&it!==0?it&-it:R.T!==null?im():yf()}function lx(){if(ps===0)if((it&536870912)===0||ot){var r=jt;jt<<=1,(jt&3932160)===0&&(jt=262144),ps=r}else ps=536870912;return r=ds.current,r!==null&&(r.flags|=32),ps}function ts(r,o,u){(r===St&&(mt===2||mt===9)||r.cancelPendingCommit!==null)&&(yo(r,0),Cr(r,it,ps,!1)),It(r,u),((ft&2)===0||r!==St)&&(r===St&&((ft&2)===0&&(ha|=u),Ht===4&&Cr(r,it,ps,!1)),ci(r))}function cx(r,o,u){if((ft&6)!==0)throw Error(n(327));var p=!u&&(o&127)===0&&(o&r.expiredLanes)===0||Rt(r,o),y=p?kN(r,o):em(r,o,!0),x=p;do{if(y===0){mo&&!p&&Cr(r,o,0,!1);break}else{if(u=r.current.alternate,x&&!TN(u)){y=em(r,o,!1),x=!1;continue}if(y===2){if(x=o,r.errorRecoveryDisabledLanes&x)var C=0;else C=r.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var D=r;y=ic;var V=D.current.memoizedState.isDehydrated;if(V&&(yo(D,C).flags|=256),C=em(D,C,!1),C!==2){if(Wp&&!V){D.errorRecoveryDisabledLanes|=x,ha|=x,y=4;break e}x=es,es=y,x!==null&&(es===null?es=x:es.push.apply(es,x))}y=C}if(x=!1,y!==2)continue}}if(y===1){yo(r,0),Cr(r,o,0,!0);break}e:{switch(p=r,x=y,x){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Cr(p,o,ps,!Sr);break e;case 2:es=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(y=id+300-kt(),10<y)){if(Cr(p,o,ps,!Sr),qe(p,0,!0)!==0)break e;Hi=o,p.timeoutHandle=Fx(ux.bind(null,p,u,es,ad,Xp,o,ps,ha,go,Sr,x,"Throttled",-0,0),y);break e}ux(p,u,es,ad,Xp,o,ps,ha,go,Sr,x,null,-0,0)}}break}while(!0);ci(r)}function ux(r,o,u,p,y,x,C,D,V,se,de,pe,re,ce){if(r.timeoutHandle=-1,pe=o.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ni},nx(o,x,pe);var Ne=(x&62914560)===x?id-kt():(x&4194048)===x?ax-kt():0;if(Ne=dk(pe,Ne),Ne!==null){Hi=x,r.cancelPendingCommit=Ne(yx.bind(null,r,o,x,u,p,y,C,D,V,de,pe,null,re,ce)),Cr(r,x,C,!se);return}}yx(r,o,x,u,p,y,C,D,V)}function TN(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var y=u[p],x=y.getSnapshot;y=y.value;try{if(!cs(x(),y))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Cr(r,o,u,p){o&=~Yp,o&=~ha,r.suspendedLanes|=o,r.pingedLanes&=~o,p&&(r.warmLanes|=o),p=r.expirationTimes;for(var y=o;0<y;){var x=31-ve(y),C=1<<x;p[x]=-1,y&=~C}u!==0&&Xr(r,u,o)}function od(){return(ft&6)===0?(ac(0),!1):!0}function Zp(){if(nt!==null){if(mt===0)var r=nt.return;else r=nt,Di=sa=null,mp(r),oo=null,$l=0,r=nt;for(;r!==null;)U0(r.alternate,r),r=r.return;nt=null}}function yo(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,WN(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Hi=0,Zp(),St=r,nt=u=ji(r.current,null),it=o,mt=0,fs=null,Sr=!1,mo=Rt(r,o),Wp=!1,go=ps=Yp=ha=_r=Ht=0,es=ic=null,Xp=!1,(o&8)!==0&&(o|=o&32);var p=r.entangledLanes;if(p!==0)for(r=r.entanglements,p&=o;0<p;){var y=31-ve(p),x=1<<y;o|=r[y],p&=~x}return $i=o,Nu(),u}function dx(r,o){Qe=null,R.H=Kl,o===ao||o===Lu?(o=Tb(),mt=3):o===sp?(o=Tb(),mt=4):mt=o===Rp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,fs=o,nt===null&&(Ht=1,Ku(r,Ts(o,r.current)))}function hx(){var r=ds.current;return r===null?!0:(it&4194048)===it?Rs===null:(it&62914560)===it||(it&536870912)!==0?r===Rs:!1}function fx(){var r=R.H;return R.H=Kl,r===null?Kl:r}function px(){var r=R.A;return R.A=EN,r}function ld(){Ht=4,Sr||(it&4194048)!==it&&ds.current!==null||(mo=!0),(_r&134217727)===0&&(ha&134217727)===0||St===null||Cr(St,it,ps,!1)}function em(r,o,u){var p=ft;ft|=2;var y=fx(),x=px();(St!==r||it!==o)&&(ad=null,yo(r,o)),o=!1;var C=Ht;e:do try{if(mt!==0&&nt!==null){var D=nt,V=fs;switch(mt){case 8:Zp(),C=6;break e;case 3:case 2:case 9:case 6:ds.current===null&&(o=!0);var se=mt;if(mt=0,fs=null,bo(r,D,V,se),u&&mo){C=0;break e}break;default:se=mt,mt=0,fs=null,bo(r,D,V,se)}}NN(),C=Ht;break}catch(de){dx(r,de)}while(!0);return o&&r.shellSuspendCounter++,Di=sa=null,ft=p,R.H=y,R.A=x,nt===null&&(St=null,it=0,Nu()),C}function NN(){for(;nt!==null;)mx(nt)}function kN(r,o){var u=ft;ft|=2;var p=fx(),y=px();St!==r||it!==o?(ad=null,rd=kt()+500,yo(r,o)):mo=Rt(r,o);e:do try{if(mt!==0&&nt!==null){o=nt;var x=fs;t:switch(mt){case 1:mt=0,fs=null,bo(r,o,x,1);break;case 2:case 9:if(Eb(x)){mt=0,fs=null,gx(o);break}o=function(){mt!==2&&mt!==9||St!==r||(mt=7),ci(r)},x.then(o,o);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Eb(x)?(mt=0,fs=null,gx(o)):(mt=0,fs=null,bo(r,o,x,7));break;case 5:var C=null;switch(nt.tag){case 26:C=nt.memoizedState;case 5:case 27:var D=nt;if(C?tw(C):D.stateNode.complete){mt=0,fs=null;var V=D.sibling;if(V!==null)nt=V;else{var se=D.return;se!==null?(nt=se,cd(se)):nt=null}break t}}mt=0,fs=null,bo(r,o,x,5);break;case 6:mt=0,fs=null,bo(r,o,x,6);break;case 8:Zp(),Ht=6;break e;default:throw Error(n(462))}}jN();break}catch(de){dx(r,de)}while(!0);return Di=sa=null,R.H=p,R.A=y,ft=u,nt!==null?0:(St=null,it=0,Nu(),Ht)}function jN(){for(;nt!==null&&!wt();)mx(nt)}function mx(r){var o=z0(r.alternate,r,$i);r.memoizedProps=r.pendingProps,o===null?cd(r):nt=o}function gx(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=M0(u,o,o.pendingProps,o.type,void 0,it);break;case 11:o=M0(u,o,o.pendingProps,o.type.render,o.ref,it);break;case 5:mp(o);default:U0(u,o),o=nt=pb(o,$i),o=z0(u,o,$i)}r.memoizedProps=r.pendingProps,o===null?cd(r):nt=o}function bo(r,o,u,p){Di=sa=null,mp(o),oo=null,$l=0;var y=o.return;try{if(yN(r,y,o,u,it)){Ht=1,Ku(r,Ts(u,r.current)),nt=null;return}}catch(x){if(y!==null)throw nt=y,x;Ht=1,Ku(r,Ts(u,r.current)),nt=null;return}o.flags&32768?(ot||p===1?r=!0:mo||(it&536870912)!==0?r=!1:(Sr=r=!0,(p===2||p===9||p===3||p===6)&&(p=ds.current,p!==null&&p.tag===13&&(p.flags|=16384))),vx(o,r)):cd(o)}function cd(r){var o=r;do{if((o.flags&32768)!==0){vx(o,Sr);return}r=o.return;var u=wN(o.alternate,o,$i);if(u!==null){nt=u;return}if(o=o.sibling,o!==null){nt=o;return}nt=o=r}while(o!==null);Ht===0&&(Ht=5)}function vx(r,o){do{var u=SN(r.alternate,r);if(u!==null){u.flags&=32767,nt=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){nt=r;return}nt=r=u}while(r!==null);Ht=6,nt=null}function yx(r,o,u,p,y,x,C,D,V){r.cancelPendingCommit=null;do ud();while(on!==0);if((ft&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(x=o.lanes|o.childLanes,x|=$f,qn(r,u,x,C,D,V),r===St&&(nt=St=null,it=0),vo=o,Er=r,Hi=u,Kp=x,Jp=y,ox=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,ON(ls,function(){return _x(),null})):(r.callbackNode=null,r.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=R.T,R.T=null,y=$.p,$.p=2,C=ft,ft|=4;try{_N(r,o,u)}finally{ft=C,$.p=y,R.T=p}}on=1,bx(),xx(),wx()}}function bx(){if(on===1){on=0;var r=Er,o=vo,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=R.T,R.T=null;var p=$.p;$.p=2;var y=ft;ft|=4;try{Z0(o,r);var x=hm,C=rb(r.containerInfo),D=x.focusedElem,V=x.selectionRange;if(C!==D&&D&&D.ownerDocument&&ib(D.ownerDocument.documentElement,D)){if(V!==null&&If(D)){var se=V.start,de=V.end;if(de===void 0&&(de=se),"selectionStart"in D)D.selectionStart=se,D.selectionEnd=Math.min(de,D.value.length);else{var pe=D.ownerDocument||document,re=pe&&pe.defaultView||window;if(re.getSelection){var ce=re.getSelection(),Ne=D.textContent.length,ze=Math.min(V.start,Ne),bt=V.end===void 0?ze:Math.min(V.end,Ne);!ce.extend&&ze>bt&&(C=bt,bt=ze,ze=C);var Z=sb(D,ze),W=sb(D,bt);if(Z&&W&&(ce.rangeCount!==1||ce.anchorNode!==Z.node||ce.anchorOffset!==Z.offset||ce.focusNode!==W.node||ce.focusOffset!==W.offset)){var ne=pe.createRange();ne.setStart(Z.node,Z.offset),ce.removeAllRanges(),ze>bt?(ce.addRange(ne),ce.extend(W.node,W.offset)):(ne.setEnd(W.node,W.offset),ce.addRange(ne))}}}}for(pe=[],ce=D;ce=ce.parentNode;)ce.nodeType===1&&pe.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<pe.length;D++){var he=pe[D];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Sd=!!dm,hm=dm=null}finally{ft=y,$.p=p,R.T=u}}r.current=o,on=2}}function xx(){if(on===2){on=0;var r=Er,o=vo,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=R.T,R.T=null;var p=$.p;$.p=2;var y=ft;ft|=4;try{Y0(r,o.alternate,o)}finally{ft=y,$.p=p,R.T=u}}on=3}}function wx(){if(on===4||on===3){on=0,Ut();var r=Er,o=vo,u=Hi,p=ox;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?on=5:(on=0,vo=Er=null,Sx(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(Ar=null),$s(u),o=o.stateNode,Q&&typeof Q.onCommitFiberRoot=="function")try{Q.onCommitFiberRoot(Us,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=R.T,y=$.p,$.p=2,R.T=null;try{for(var x=r.onRecoverableError,C=0;C<p.length;C++){var D=p[C];x(D.value,{componentStack:D.stack})}}finally{R.T=o,$.p=y}}(Hi&3)!==0&&ud(),ci(r),y=r.pendingLanes,(u&261930)!==0&&(y&42)!==0?r===Qp?rc++:(rc=0,Qp=r):rc=0,ac(0)}}function Sx(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Fl(o)))}function ud(){return bx(),xx(),wx(),_x()}function _x(){if(on!==5)return!1;var r=Er,o=Kp;Kp=0;var u=$s(Hi),p=R.T,y=$.p;try{$.p=32>u?32:u,R.T=null,u=Jp,Jp=null;var x=Er,C=Hi;if(on=0,vo=Er=null,Hi=0,(ft&6)!==0)throw Error(n(331));var D=ft;if(ft|=4,ix(x.current),tx(x,x.current,C,u),ft=D,ac(0,!1),Q&&typeof Q.onPostCommitFiberRoot=="function")try{Q.onPostCommitFiberRoot(Us,x)}catch{}return!0}finally{$.p=y,R.T=p,Sx(r,o)}}function Ax(r,o,u){o=Ts(u,o),o=jp(r.stateNode,o,2),r=yr(r,o,2),r!==null&&(It(r,2),ci(r))}function gt(r,o,u){if(r.tag===3)Ax(r,r,u);else for(;o!==null;){if(o.tag===3){Ax(o,r,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ar===null||!Ar.has(p))){r=Ts(u,r),u=E0(2),p=yr(o,u,2),p!==null&&(C0(u,p,o,r),It(p,2),ci(p));break}}o=o.return}}function tm(r,o,u){var p=r.pingCache;if(p===null){p=r.pingCache=new CN;var y=new Set;p.set(o,y)}else y=p.get(o),y===void 0&&(y=new Set,p.set(o,y));y.has(u)||(Wp=!0,y.add(u),r=RN.bind(null,r,o,u),o.then(r,r))}function RN(r,o,u){var p=r.pingCache;p!==null&&p.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,St===r&&(it&u)===u&&(Ht===4||Ht===3&&(it&62914560)===it&&300>kt()-id?(ft&2)===0&&yo(r,0):Yp|=u,go===it&&(go=0)),ci(r)}function Ex(r,o){o===0&&(o=Ln()),r=ea(r,o),r!==null&&(It(r,o),ci(r))}function DN(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),Ex(r,u)}function MN(r,o){var u=0;switch(r.tag){case 31:case 13:var p=r.stateNode,y=r.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=r.stateNode;break;case 22:p=r.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(o),Ex(r,u)}function ON(r,o){return un(r,o)}var dd=null,xo=null,nm=!1,hd=!1,sm=!1,Tr=0;function ci(r){r!==xo&&r.next===null&&(xo===null?dd=xo=r:xo=xo.next=r),hd=!0,nm||(nm=!0,LN())}function ac(r,o){if(!sm&&hd){sm=!0;do for(var u=!1,p=dd;p!==null;){if(r!==0){var y=p.pendingLanes;if(y===0)var x=0;else{var C=p.suspendedLanes,D=p.pingedLanes;x=(1<<31-ve(42|r)+1)-1,x&=y&~(C&~D),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(u=!0,kx(p,x))}else x=it,x=qe(p,p===St?x:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(x&3)===0||Rt(p,x)||(u=!0,kx(p,x));p=p.next}while(u);sm=!1}}function PN(){Cx()}function Cx(){hd=nm=!1;var r=0;Tr!==0&&qN()&&(r=Tr);for(var o=kt(),u=null,p=dd;p!==null;){var y=p.next,x=Tx(p,o);x===0?(p.next=null,u===null?dd=y:u.next=y,y===null&&(xo=u)):(u=p,(r!==0||(x&3)!==0)&&(hd=!0)),p=y}on!==0&&on!==5||ac(r),Tr!==0&&(Tr=0)}function Tx(r,o){for(var u=r.suspendedLanes,p=r.pingedLanes,y=r.expirationTimes,x=r.pendingLanes&-62914561;0<x;){var C=31-ve(x),D=1<<C,V=y[C];V===-1?((D&u)===0||(D&p)!==0)&&(y[C]=dn(D,o)):V<=o&&(r.expiredLanes|=D),x&=~D}if(o=St,u=it,u=qe(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p=r.callbackNode,u===0||r===o&&(mt===2||mt===9)||r.cancelPendingCommit!==null)return p!==null&&p!==null&&Nt(p),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Rt(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(p!==null&&Nt(p),$s(u)){case 2:case 8:u=ri;break;case 32:u=ls;break;case 268435456:u=Gt;break;default:u=ls}return p=Nx.bind(null,r),u=un(u,p),r.callbackPriority=o,r.callbackNode=u,o}return p!==null&&p!==null&&Nt(p),r.callbackPriority=2,r.callbackNode=null,2}function Nx(r,o){if(on!==0&&on!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(ud()&&r.callbackNode!==u)return null;var p=it;return p=qe(r,r===St?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p===0?null:(cx(r,p,o),Tx(r,kt()),r.callbackNode!=null&&r.callbackNode===u?Nx.bind(null,r):null)}function kx(r,o){if(ud())return null;cx(r,o,!0)}function LN(){YN(function(){(ft&6)!==0?un(Fn,PN):Cx()})}function im(){if(Tr===0){var r=io;r===0&&(r=Pt,Pt<<=1,(Pt&261888)===0&&(Pt=256)),Tr=r}return Tr}function jx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:xu(""+r)}function Rx(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function IN(r,o,u,p,y){if(o==="submit"&&u&&u.stateNode===y){var x=jx((y[Xn]||null).action),C=p.submitter;C&&(o=(o=C[Xn]||null)?jx(o.formAction):C.getAttribute("formAction"),o!==null&&(x=o,C=null));var D=new Au("action","action",null,p,y);r.push({event:D,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Tr!==0){var V=C?Rx(y,C):new FormData(y);Ap(u,{pending:!0,data:V,method:y.method,action:x},null,V)}}else typeof x=="function"&&(D.preventDefault(),V=C?Rx(y,C):new FormData(y),Ap(u,{pending:!0,data:V,method:y.method,action:x},x,V))},currentTarget:y}]})}}for(var rm=0;rm<Uf.length;rm++){var am=Uf[rm],BN=am.toLowerCase(),zN=am[0].toUpperCase()+am.slice(1);Hs(BN,"on"+zN)}Hs(lb,"onAnimationEnd"),Hs(cb,"onAnimationIteration"),Hs(ub,"onAnimationStart"),Hs("dblclick","onDoubleClick"),Hs("focusin","onFocus"),Hs("focusout","onBlur"),Hs(tN,"onTransitionRun"),Hs(nN,"onTransitionStart"),Hs(sN,"onTransitionCancel"),Hs(db,"onTransitionEnd"),Va("onMouseEnter",["mouseout","mouseover"]),Va("onMouseLeave",["mouseout","mouseover"]),Va("onPointerEnter",["pointerout","pointerover"]),Va("onPointerLeave",["pointerout","pointerover"]),Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oc));function Dx(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var p=r[u],y=p.event;p=p.listeners;e:{var x=void 0;if(o)for(var C=p.length-1;0<=C;C--){var D=p[C],V=D.instance,se=D.currentTarget;if(D=D.listener,V!==x&&y.isPropagationStopped())break e;x=D,y.currentTarget=se;try{x(y)}catch(de){Tu(de)}y.currentTarget=null,x=V}else for(C=0;C<p.length;C++){if(D=p[C],V=D.instance,se=D.currentTarget,D=D.listener,V!==x&&y.isPropagationStopped())break e;x=D,y.currentTarget=se;try{x(y)}catch(de){Tu(de)}y.currentTarget=null,x=V}}}}function st(r,o){var u=o[bf];u===void 0&&(u=o[bf]=new Set);var p=r+"__bubble";u.has(p)||(Mx(o,r,2,!1),u.add(p))}function om(r,o,u){var p=0;o&&(p|=4),Mx(u,r,p,o)}var fd="_reactListening"+Math.random().toString(36).slice(2);function lm(r){if(!r[fd]){r[fd]=!0,Cy.forEach(function(u){u!=="selectionchange"&&(FN.has(u)||om(u,!1,r),om(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[fd]||(o[fd]=!0,om("selectionchange",!1,o))}}function Mx(r,o,u,p){switch(lw(o)){case 2:var y=pk;break;case 8:y=mk;break;default:y=_m}u=y.bind(null,o,u,r),y=void 0,!Nf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),p?y!==void 0?r.addEventListener(o,u,{capture:!0,passive:y}):r.addEventListener(o,u,!0):y!==void 0?r.addEventListener(o,u,{passive:y}):r.addEventListener(o,u,!1)}function cm(r,o,u,p,y){var x=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var D=p.stateNode.containerInfo;if(D===y)break;if(C===4)for(C=p.return;C!==null;){var V=C.tag;if((V===3||V===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;D!==null;){if(C=Ua(D),C===null)return;if(V=C.tag,V===5||V===6||V===26||V===27){p=x=C;continue e}D=D.parentNode}}p=p.return}By(function(){var se=x,de=Cf(u),pe=[];e:{var re=hb.get(r);if(re!==void 0){var ce=Au,Ne=r;switch(r){case"keypress":if(Su(u)===0)break e;case"keydown":case"keyup":ce=M2;break;case"focusin":Ne="focus",ce=Df;break;case"focusout":Ne="blur",ce=Df;break;case"beforeblur":case"afterblur":ce=Df;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Uy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=w2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=L2;break;case lb:case cb:case ub:ce=A2;break;case db:ce=B2;break;case"scroll":case"scrollend":ce=b2;break;case"wheel":ce=F2;break;case"copy":case"cut":case"paste":ce=C2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Hy;break;case"toggle":case"beforetoggle":ce=$2}var ze=(o&4)!==0,bt=!ze&&(r==="scroll"||r==="scrollend"),Z=ze?re!==null?re+"Capture":null:re;ze=[];for(var W=se,ne;W!==null;){var he=W;if(ne=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ne===null||Z===null||(he=kl(W,Z),he!=null&&ze.push(lc(W,he,ne))),bt)break;W=W.return}0<ze.length&&(re=new ce(re,Ne,null,u,de),pe.push({event:re,listeners:ze}))}}if((o&7)===0){e:{if(re=r==="mouseover"||r==="pointerover",ce=r==="mouseout"||r==="pointerout",re&&u!==Ef&&(Ne=u.relatedTarget||u.fromElement)&&(Ua(Ne)||Ne[Fa]))break e;if((ce||re)&&(re=de.window===de?de:(re=de.ownerDocument)?re.defaultView||re.parentWindow:window,ce?(Ne=u.relatedTarget||u.toElement,ce=se,Ne=Ne?Ua(Ne):null,Ne!==null&&(bt=a(Ne),ze=Ne.tag,Ne!==bt||ze!==5&&ze!==27&&ze!==6)&&(Ne=null)):(ce=null,Ne=se),ce!==Ne)){if(ze=Uy,he="onMouseLeave",Z="onMouseEnter",W="mouse",(r==="pointerout"||r==="pointerover")&&(ze=Hy,he="onPointerLeave",Z="onPointerEnter",W="pointer"),bt=ce==null?re:Nl(ce),ne=Ne==null?re:Nl(Ne),re=new ze(he,W+"leave",ce,u,de),re.target=bt,re.relatedTarget=ne,he=null,Ua(de)===se&&(ze=new ze(Z,W+"enter",Ne,u,de),ze.target=ne,ze.relatedTarget=bt,he=ze),bt=he,ce&&Ne)t:{for(ze=UN,Z=ce,W=Ne,ne=0,he=Z;he;he=ze(he))ne++;he=0;for(var Pe=W;Pe;Pe=ze(Pe))he++;for(;0<ne-he;)Z=ze(Z),ne--;for(;0<he-ne;)W=ze(W),he--;for(;ne--;){if(Z===W||W!==null&&Z===W.alternate){ze=Z;break t}Z=ze(Z),W=ze(W)}ze=null}else ze=null;ce!==null&&Ox(pe,re,ce,ze,!1),Ne!==null&&bt!==null&&Ox(pe,bt,Ne,ze,!0)}}e:{if(re=se?Nl(se):window,ce=re.nodeName&&re.nodeName.toLowerCase(),ce==="select"||ce==="input"&&re.type==="file")var ut=Jy;else if(Xy(re))if(Qy)ut=Q2;else{ut=K2;var De=X2}else ce=re.nodeName,!ce||ce.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?se&&Af(se.elementType)&&(ut=Jy):ut=J2;if(ut&&(ut=ut(r,se))){Ky(pe,ut,u,de);break e}De&&De(r,re,se),r==="focusout"&&se&&re.type==="number"&&se.memoizedProps.value!=null&&_f(re,"number",re.value)}switch(De=se?Nl(se):window,r){case"focusin":(Xy(De)||De.contentEditable==="true")&&(Ka=De,Bf=se,Il=null);break;case"focusout":Il=Bf=Ka=null;break;case"mousedown":zf=!0;break;case"contextmenu":case"mouseup":case"dragend":zf=!1,ab(pe,u,de);break;case"selectionchange":if(eN)break;case"keydown":case"keyup":ab(pe,u,de)}var Ze;if(Of)e:{switch(r){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Xa?Wy(r,u)&&(rt="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(rt="onCompositionStart");rt&&(Vy&&u.locale!=="ko"&&(Xa||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Xa&&(Ze=zy()):(dr=de,kf="value"in dr?dr.value:dr.textContent,Xa=!0)),De=pd(se,rt),0<De.length&&(rt=new $y(rt,r,null,u,de),pe.push({event:rt,listeners:De}),Ze?rt.data=Ze:(Ze=Yy(u),Ze!==null&&(rt.data=Ze)))),(Ze=V2?G2(r,u):q2(r,u))&&(rt=pd(se,"onBeforeInput"),0<rt.length&&(De=new $y("onBeforeInput","beforeinput",null,u,de),pe.push({event:De,listeners:rt}),De.data=Ze)),IN(pe,r,se,u,de)}Dx(pe,o)})}function lc(r,o,u){return{instance:r,listener:o,currentTarget:u}}function pd(r,o){for(var u=o+"Capture",p=[];r!==null;){var y=r,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=kl(r,u),y!=null&&p.unshift(lc(r,y,x)),y=kl(r,o),y!=null&&p.push(lc(r,y,x))),r.tag===3)return p;r=r.return}return[]}function UN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ox(r,o,u,p,y){for(var x=o._reactName,C=[];u!==null&&u!==p;){var D=u,V=D.alternate,se=D.stateNode;if(D=D.tag,V!==null&&V===p)break;D!==5&&D!==26&&D!==27||se===null||(V=se,y?(se=kl(u,x),se!=null&&C.unshift(lc(u,se,V))):y||(se=kl(u,x),se!=null&&C.push(lc(u,se,V)))),u=u.return}C.length!==0&&r.push({event:o,listeners:C})}var $N=/\r\n?/g,HN=/\u0000|\uFFFD/g;function Px(r){return(typeof r=="string"?r:""+r).replace($N,`
`).replace(HN,"")}function Lx(r,o){return o=Px(o),Px(r)===o}function yt(r,o,u,p,y,x){switch(u){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||qa(r,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&qa(r,""+p);break;case"className":yu(r,"class",p);break;case"tabIndex":yu(r,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":yu(r,u,p);break;case"style":Ly(r,p,x);break;case"data":if(o!=="object"){yu(r,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(u);break}p=xu(""+p),r.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(u==="formAction"?(o!=="input"&&yt(r,o,"name",y.name,y,null),yt(r,o,"formEncType",y.formEncType,y,null),yt(r,o,"formMethod",y.formMethod,y,null),yt(r,o,"formTarget",y.formTarget,y,null)):(yt(r,o,"encType",y.encType,y,null),yt(r,o,"method",y.method,y,null),yt(r,o,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(u);break}p=xu(""+p),r.setAttribute(u,p);break;case"onClick":p!=null&&(r.onclick=Ni);break;case"onScroll":p!=null&&st("scroll",r);break;case"onScrollEnd":p!=null&&st("scrollend",r);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(u=p.__html,u!=null){if(y.children!=null)throw Error(n(60));r.innerHTML=u}}break;case"multiple":r.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":r.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){r.removeAttribute("xlink:href");break}u=xu(""+p),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(u,""+p):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":p===!0?r.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(u,p):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?r.setAttribute(u,p):r.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?r.removeAttribute(u):r.setAttribute(u,p);break;case"popover":st("beforetoggle",r),st("toggle",r),vu(r,"popover",p);break;case"xlinkActuate":Ti(r,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ti(r,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ti(r,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ti(r,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ti(r,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ti(r,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ti(r,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ti(r,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ti(r,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":vu(r,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=v2.get(u)||u,vu(r,u,p))}}function um(r,o,u,p,y,x){switch(u){case"style":Ly(r,p,x);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(u=p.__html,u!=null){if(y.children!=null)throw Error(n(60));r.innerHTML=u}}break;case"children":typeof p=="string"?qa(r,p):(typeof p=="number"||typeof p=="bigint")&&qa(r,""+p);break;case"onScroll":p!=null&&st("scroll",r);break;case"onScrollEnd":p!=null&&st("scrollend",r);break;case"onClick":p!=null&&(r.onclick=Ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ty.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),o=u.slice(2,y?u.length-7:void 0),x=r[Xn]||null,x=x!=null?x[u]:null,typeof x=="function"&&r.removeEventListener(o,x,y),typeof p=="function")){typeof x!="function"&&x!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,p,y);break e}u in r?r[u]=p:p===!0?r.setAttribute(u,""):vu(r,u,p)}}}function Nn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",r),st("load",r);var p=!1,y=!1,x;for(x in u)if(u.hasOwnProperty(x)){var C=u[x];if(C!=null)switch(x){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:yt(r,o,x,C,u,null)}}y&&yt(r,o,"srcSet",u.srcSet,u,null),p&&yt(r,o,"src",u.src,u,null);return;case"input":st("invalid",r);var D=x=C=y=null,V=null,se=null;for(p in u)if(u.hasOwnProperty(p)){var de=u[p];if(de!=null)switch(p){case"name":y=de;break;case"type":C=de;break;case"checked":V=de;break;case"defaultChecked":se=de;break;case"value":x=de;break;case"defaultValue":D=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(n(137,o));break;default:yt(r,o,p,de,u,null)}}Dy(r,x,D,V,se,C,y,!1);return;case"select":st("invalid",r),p=C=x=null;for(y in u)if(u.hasOwnProperty(y)&&(D=u[y],D!=null))switch(y){case"value":x=D;break;case"defaultValue":C=D;break;case"multiple":p=D;default:yt(r,o,y,D,u,null)}o=x,u=C,r.multiple=!!p,o!=null?Ga(r,!!p,o,!1):u!=null&&Ga(r,!!p,u,!0);return;case"textarea":st("invalid",r),x=y=p=null;for(C in u)if(u.hasOwnProperty(C)&&(D=u[C],D!=null))switch(C){case"value":p=D;break;case"defaultValue":y=D;break;case"children":x=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:yt(r,o,C,D,u,null)}Oy(r,p,y,x);return;case"option":for(V in u)u.hasOwnProperty(V)&&(p=u[V],p!=null)&&(V==="selected"?r.selected=p&&typeof p!="function"&&typeof p!="symbol":yt(r,o,V,p,u,null));return;case"dialog":st("beforetoggle",r),st("toggle",r),st("cancel",r),st("close",r);break;case"iframe":case"object":st("load",r);break;case"video":case"audio":for(p=0;p<oc.length;p++)st(oc[p],r);break;case"image":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"embed":case"source":case"link":st("error",r),st("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in u)if(u.hasOwnProperty(se)&&(p=u[se],p!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:yt(r,o,se,p,u,null)}return;default:if(Af(o)){for(de in u)u.hasOwnProperty(de)&&(p=u[de],p!==void 0&&um(r,o,de,p,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(p=u[D],p!=null&&yt(r,o,D,p,u,null))}function VN(r,o,u,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,C=null,D=null,V=null,se=null,de=null;for(ce in u){var pe=u[ce];if(u.hasOwnProperty(ce)&&pe!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":V=pe;default:p.hasOwnProperty(ce)||yt(r,o,ce,null,p,pe)}}for(var re in p){var ce=p[re];if(pe=u[re],p.hasOwnProperty(re)&&(ce!=null||pe!=null))switch(re){case"type":x=ce;break;case"name":y=ce;break;case"checked":se=ce;break;case"defaultChecked":de=ce;break;case"value":C=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,o));break;default:ce!==pe&&yt(r,o,re,ce,p,pe)}}Sf(r,C,D,V,se,de,x,y);return;case"select":ce=C=D=re=null;for(x in u)if(V=u[x],u.hasOwnProperty(x)&&V!=null)switch(x){case"value":break;case"multiple":ce=V;default:p.hasOwnProperty(x)||yt(r,o,x,null,p,V)}for(y in p)if(x=p[y],V=u[y],p.hasOwnProperty(y)&&(x!=null||V!=null))switch(y){case"value":re=x;break;case"defaultValue":D=x;break;case"multiple":C=x;default:x!==V&&yt(r,o,y,x,p,V)}o=D,u=C,p=ce,re!=null?Ga(r,!!u,re,!1):!!p!=!!u&&(o!=null?Ga(r,!!u,o,!0):Ga(r,!!u,u?[]:"",!1));return;case"textarea":ce=re=null;for(D in u)if(y=u[D],u.hasOwnProperty(D)&&y!=null&&!p.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:yt(r,o,D,null,p,y)}for(C in p)if(y=p[C],x=u[C],p.hasOwnProperty(C)&&(y!=null||x!=null))switch(C){case"value":re=y;break;case"defaultValue":ce=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==x&&yt(r,o,C,y,p,x)}My(r,re,ce);return;case"option":for(var Ne in u)re=u[Ne],u.hasOwnProperty(Ne)&&re!=null&&!p.hasOwnProperty(Ne)&&(Ne==="selected"?r.selected=!1:yt(r,o,Ne,null,p,re));for(V in p)re=p[V],ce=u[V],p.hasOwnProperty(V)&&re!==ce&&(re!=null||ce!=null)&&(V==="selected"?r.selected=re&&typeof re!="function"&&typeof re!="symbol":yt(r,o,V,re,p,ce));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in u)re=u[ze],u.hasOwnProperty(ze)&&re!=null&&!p.hasOwnProperty(ze)&&yt(r,o,ze,null,p,re);for(se in p)if(re=p[se],ce=u[se],p.hasOwnProperty(se)&&re!==ce&&(re!=null||ce!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(n(137,o));break;default:yt(r,o,se,re,p,ce)}return;default:if(Af(o)){for(var bt in u)re=u[bt],u.hasOwnProperty(bt)&&re!==void 0&&!p.hasOwnProperty(bt)&&um(r,o,bt,void 0,p,re);for(de in p)re=p[de],ce=u[de],!p.hasOwnProperty(de)||re===ce||re===void 0&&ce===void 0||um(r,o,de,re,p,ce);return}}for(var Z in u)re=u[Z],u.hasOwnProperty(Z)&&re!=null&&!p.hasOwnProperty(Z)&&yt(r,o,Z,null,p,re);for(pe in p)re=p[pe],ce=u[pe],!p.hasOwnProperty(pe)||re===ce||re==null&&ce==null||yt(r,o,pe,re,p,ce)}function Ix(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var y=u[p],x=y.transferSize,C=y.initiatorType,D=y.duration;if(x&&D&&Ix(C)){for(C=0,D=y.responseEnd,p+=1;p<u.length;p++){var V=u[p],se=V.startTime;if(se>D)break;var de=V.transferSize,pe=V.initiatorType;de&&Ix(pe)&&(V=V.responseEnd,C+=de*(V<D?1:(D-se)/(V-se)))}if(--p,o+=8*(x+C)/(y.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var dm=null,hm=null;function md(r){return r.nodeType===9?r:r.ownerDocument}function Bx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zx(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function fm(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var pm=null;function qN(){var r=window.event;return r&&r.type==="popstate"?r===pm?!1:(pm=r,!0):(pm=null,!1)}var Fx=typeof setTimeout=="function"?setTimeout:void 0,WN=typeof clearTimeout=="function"?clearTimeout:void 0,Ux=typeof Promise=="function"?Promise:void 0,YN=typeof queueMicrotask=="function"?queueMicrotask:typeof Ux<"u"?function(r){return Ux.resolve(null).then(r).catch(XN)}:Fx;function XN(r){setTimeout(function(){throw r})}function Nr(r){return r==="head"}function $x(r,o){var u=o,p=0;do{var y=u.nextSibling;if(r.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(p===0){r.removeChild(y),Ao(o);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")cc(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,cc(u);for(var x=u.firstChild;x;){var C=x.nextSibling,D=x.nodeName;x[Tl]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=C}}else u==="body"&&cc(r.ownerDocument.body);u=y}while(u);Ao(o)}function Hx(r,o){var u=r;r=0;do{var p=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=p}while(u)}function mm(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":mm(u),xf(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function KN(r,o,u,p){for(;r.nodeType===1;){var y=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(p){if(!r[Tl])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(x=r.getAttribute("rel"),x==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(x!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(x=r.getAttribute("src"),(x!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===x)return r}else return r;if(r=Ds(r.nextSibling),r===null)break}return null}function JN(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Ds(r.nextSibling),r===null))return null;return r}function Vx(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Ds(r.nextSibling),r===null))return null;return r}function gm(r){return r.data==="$?"||r.data==="$~"}function vm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function QN(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var p=function(){o(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),r._reactRetry=p}}function Ds(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var ym=null;function Gx(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return Ds(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function qx(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function Wx(r,o,u){switch(o=md(u),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function cc(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);xf(r)}var Ms=new Map,Yx=new Set;function gd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Vi=$.d;$.d={f:ZN,r:ek,D:tk,C:nk,L:sk,m:ik,X:ak,S:rk,M:ok};function ZN(){var r=Vi.f(),o=od();return r||o}function ek(r){var o=$a(r);o!==null&&o.tag===5&&o.type==="form"?d0(o):Vi.r(r)}var wo=typeof document>"u"?null:document;function Xx(r,o,u){var p=wo;if(p&&typeof o=="string"&&o){var y=Es(o);y='link[rel="'+r+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),Yx.has(y)||(Yx.add(y),r={rel:r,crossOrigin:u,href:o},p.querySelector(y)===null&&(o=p.createElement("link"),Nn(o,"link",r),hn(o),p.head.appendChild(o)))}}function tk(r){Vi.D(r),Xx("dns-prefetch",r,null)}function nk(r,o){Vi.C(r,o),Xx("preconnect",r,o)}function sk(r,o,u){Vi.L(r,o,u);var p=wo;if(p&&r&&o){var y='link[rel="preload"][as="'+Es(o)+'"]';o==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+Es(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+Es(u.imageSizes)+'"]')):y+='[href="'+Es(r)+'"]';var x=y;switch(o){case"style":x=So(r);break;case"script":x=_o(r)}Ms.has(x)||(r=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),Ms.set(x,r),p.querySelector(y)!==null||o==="style"&&p.querySelector(uc(x))||o==="script"&&p.querySelector(dc(x))||(o=p.createElement("link"),Nn(o,"link",r),hn(o),p.head.appendChild(o)))}}function ik(r,o){Vi.m(r,o);var u=wo;if(u&&r){var p=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Es(p)+'"][href="'+Es(r)+'"]',x=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=_o(r)}if(!Ms.has(x)&&(r=g({rel:"modulepreload",href:r},o),Ms.set(x,r),u.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(dc(x)))return}p=u.createElement("link"),Nn(p,"link",r),hn(p),u.head.appendChild(p)}}}function rk(r,o,u){Vi.S(r,o,u);var p=wo;if(p&&r){var y=Ha(p).hoistableStyles,x=So(r);o=o||"default";var C=y.get(x);if(!C){var D={loading:0,preload:null};if(C=p.querySelector(uc(x)))D.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":o},u),(u=Ms.get(x))&&bm(r,u);var V=C=p.createElement("link");hn(V),Nn(V,"link",r),V._p=new Promise(function(se,de){V.onload=se,V.onerror=de}),V.addEventListener("load",function(){D.loading|=1}),V.addEventListener("error",function(){D.loading|=2}),D.loading|=4,vd(C,o,p)}C={type:"stylesheet",instance:C,count:1,state:D},y.set(x,C)}}}function ak(r,o){Vi.X(r,o);var u=wo;if(u&&r){var p=Ha(u).hoistableScripts,y=_o(r),x=p.get(y);x||(x=u.querySelector(dc(y)),x||(r=g({src:r,async:!0},o),(o=Ms.get(y))&&xm(r,o),x=u.createElement("script"),hn(x),Nn(x,"link",r),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(y,x))}}function ok(r,o){Vi.M(r,o);var u=wo;if(u&&r){var p=Ha(u).hoistableScripts,y=_o(r),x=p.get(y);x||(x=u.querySelector(dc(y)),x||(r=g({src:r,async:!0,type:"module"},o),(o=Ms.get(y))&&xm(r,o),x=u.createElement("script"),hn(x),Nn(x,"link",r),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(y,x))}}function Kx(r,o,u,p){var y=(y=ue.current)?gd(y):null;if(!y)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=So(u.href),u=Ha(y).hoistableStyles,p=u.get(o),p||(p={type:"style",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=So(u.href);var x=Ha(y).hoistableStyles,C=x.get(r);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(r,C),(x=y.querySelector(uc(r)))&&!x._p&&(C.instance=x,C.state.loading=5),Ms.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ms.set(r,u),x||lk(y,r,u,C.state))),o&&p===null)throw Error(n(528,""));return C}if(o&&p!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=_o(u),u=Ha(y).hoistableScripts,p=u.get(o),p||(p={type:"script",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function So(r){return'href="'+Es(r)+'"'}function uc(r){return'link[rel="stylesheet"]['+r+"]"}function Jx(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function lk(r,o,u,p){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=r.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),Nn(o,"link",u),hn(o),r.head.appendChild(o))}function _o(r){return'[src="'+Es(r)+'"]'}function dc(r){return"script[async]"+r}function Qx(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var p=r.querySelector('style[data-href~="'+Es(u.href)+'"]');if(p)return o.instance=p,hn(p),p;var y=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(r.ownerDocument||r).createElement("style"),hn(p),Nn(p,"style",y),vd(p,u.precedence,r),o.instance=p;case"stylesheet":y=So(u.href);var x=r.querySelector(uc(y));if(x)return o.state.loading|=4,o.instance=x,hn(x),x;p=Jx(u),(y=Ms.get(y))&&bm(p,y),x=(r.ownerDocument||r).createElement("link"),hn(x);var C=x;return C._p=new Promise(function(D,V){C.onload=D,C.onerror=V}),Nn(x,"link",p),o.state.loading|=4,vd(x,u.precedence,r),o.instance=x;case"script":return x=_o(u.src),(y=r.querySelector(dc(x)))?(o.instance=y,hn(y),y):(p=u,(y=Ms.get(x))&&(p=g({},u),xm(p,y)),r=r.ownerDocument||r,y=r.createElement("script"),hn(y),Nn(y,"link",p),r.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,vd(p,u.precedence,r));return o.instance}function vd(r,o,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,x=y,C=0;C<p.length;C++){var D=p[C];if(D.dataset.precedence===o)x=D;else if(x!==y)break}x?x.parentNode.insertBefore(r,x.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function bm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function xm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var yd=null;function Zx(r,o,u){if(yd===null){var p=new Map,y=yd=new Map;y.set(u,p)}else y=yd,p=y.get(u),p||(p=new Map,y.set(u,p));if(p.has(r))return p;for(p.set(r,null),u=u.getElementsByTagName(r),y=0;y<u.length;y++){var x=u[y];if(!(x[Tl]||x[An]||r==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var C=x.getAttribute(o)||"";C=r+C;var D=p.get(C);D?D.push(x):p.set(C,[x])}}return p}function ew(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function ck(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(r=o.disabled,typeof o.precedence=="string"&&r==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function tw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function uk(r,o,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=So(p.href),x=o.querySelector(uc(y));if(x){o=x._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=bd.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=x,hn(x);return}x=o.ownerDocument||o,p=Jx(p),(y=Ms.get(y))&&bm(p,y),x=x.createElement("link"),hn(x);var C=x;C._p=new Promise(function(D,V){C.onload=D,C.onerror=V}),Nn(x,"link",p),u.instance=x}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=bd.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var wm=0;function dk(r,o){return r.stylesheets&&r.count===0&&wd(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var p=setTimeout(function(){if(r.stylesheets&&wd(r,r.stylesheets),r.unsuspend){var x=r.unsuspend;r.unsuspend=null,x()}},6e4+o);0<r.imgBytes&&wm===0&&(wm=62500*GN());var y=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&wd(r,r.stylesheets),r.unsuspend)){var x=r.unsuspend;r.unsuspend=null,x()}},(r.imgBytes>wm?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function bd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var xd=null;function wd(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,xd=new Map,o.forEach(hk,r),xd=null,bd.call(r))}function hk(r,o){if(!(o.state.loading&4)){var u=xd.get(r);if(u)var p=u.get(null);else{u=new Map,xd.set(r,u);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var C=y[x];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),p=C)}p&&u.set(null,p)}y=o.instance,C=y.getAttribute("data-precedence"),x=u.get(C)||p,x===p&&u.set(null,y),u.set(C,y),this.count++,p=bd.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),x?x.parentNode.insertBefore(y,x.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),o.state.loading|=4}}var hc={$$typeof:T,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function fk(r,o,u,p,y,x,C,D,V){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cr(0),this.hiddenUpdates=cr(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function nw(r,o,u,p,y,x,C,D,V,se,de,pe){return r=new fk(r,o,u,C,V,se,de,pe,D),o=1,x===!0&&(o|=24),x=us(3,null,null,o),r.current=x,x.stateNode=r,o=ep(),o.refCount++,r.pooledCache=o,o.refCount++,x.memoizedState={element:p,isDehydrated:u,cache:o},ip(x),r}function sw(r){return r?(r=Za,r):Za}function iw(r,o,u,p,y,x){y=sw(y),p.context===null?p.context=y:p.pendingContext=y,p=vr(o),p.payload={element:u},x=x===void 0?null:x,x!==null&&(p.callback=x),u=yr(r,p,o),u!==null&&(ts(u,r,o),Vl(u,r,o))}function rw(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Sm(r,o){rw(r,o),(r=r.alternate)&&rw(r,o)}function aw(r){if(r.tag===13||r.tag===31){var o=ea(r,67108864);o!==null&&ts(o,r,67108864),Sm(r,67108864)}}function ow(r){if(r.tag===13||r.tag===31){var o=ms();o=za(o);var u=ea(r,o);u!==null&&ts(u,r,o),Sm(r,o)}}var Sd=!0;function pk(r,o,u,p){var y=R.T;R.T=null;var x=$.p;try{$.p=2,_m(r,o,u,p)}finally{$.p=x,R.T=y}}function mk(r,o,u,p){var y=R.T;R.T=null;var x=$.p;try{$.p=8,_m(r,o,u,p)}finally{$.p=x,R.T=y}}function _m(r,o,u,p){if(Sd){var y=Am(p);if(y===null)cm(r,o,p,_d,u),cw(r,p);else if(vk(y,r,o,u,p))p.stopPropagation();else if(cw(r,p),o&4&&-1<gk.indexOf(r)){for(;y!==null;){var x=$a(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var C=_n(x.pendingLanes);if(C!==0){var D=x;for(D.pendingLanes|=2,D.entangledLanes|=2;C;){var V=1<<31-ve(C);D.entanglements[1]|=V,C&=~V}ci(x),(ft&6)===0&&(rd=kt()+500,ac(0))}}break;case 31:case 13:D=ea(x,2),D!==null&&ts(D,x,2),od(),Sm(x,2)}if(x=Am(p),x===null&&cm(r,o,p,_d,u),x===y)break;y=x}y!==null&&p.stopPropagation()}else cm(r,o,p,null,u)}}function Am(r){return r=Cf(r),Em(r)}var _d=null;function Em(r){if(_d=null,r=Ua(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return _d=r,null}function lw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fs()){case Fn:return 2;case ri:return 8;case ls:case an:return 32;case Gt:return 268435456;default:return 32}default:return 32}}var Cm=!1,kr=null,jr=null,Rr=null,fc=new Map,pc=new Map,Dr=[],gk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cw(r,o){switch(r){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":fc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(o.pointerId)}}function mc(r,o,u,p,y,x){return r===null||r.nativeEvent!==x?(r={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:x,targetContainers:[y]},o!==null&&(o=$a(o),o!==null&&aw(o)),r):(r.eventSystemFlags|=p,o=r.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),r)}function vk(r,o,u,p,y){switch(o){case"focusin":return kr=mc(kr,r,o,u,p,y),!0;case"dragenter":return jr=mc(jr,r,o,u,p,y),!0;case"mouseover":return Rr=mc(Rr,r,o,u,p,y),!0;case"pointerover":var x=y.pointerId;return fc.set(x,mc(fc.get(x)||null,r,o,u,p,y)),!0;case"gotpointercapture":return x=y.pointerId,pc.set(x,mc(pc.get(x)||null,r,o,u,p,y)),!0}return!1}function uw(r){var o=Ua(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,Ay(r.priority,function(){ow(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,Ay(r.priority,function(){ow(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ad(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=Am(r.nativeEvent);if(u===null){u=r.nativeEvent;var p=new u.constructor(u.type,u);Ef=p,u.target.dispatchEvent(p),Ef=null}else return o=$a(u),o!==null&&aw(o),r.blockedOn=u,!1;o.shift()}return!0}function dw(r,o,u){Ad(r)&&u.delete(o)}function yk(){Cm=!1,kr!==null&&Ad(kr)&&(kr=null),jr!==null&&Ad(jr)&&(jr=null),Rr!==null&&Ad(Rr)&&(Rr=null),fc.forEach(dw),pc.forEach(dw)}function Ed(r,o){r.blockedOn===o&&(r.blockedOn=null,Cm||(Cm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,yk)))}var Cd=null;function hw(r){Cd!==r&&(Cd=r,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Cd===r&&(Cd=null);for(var o=0;o<r.length;o+=3){var u=r[o],p=r[o+1],y=r[o+2];if(typeof p!="function"){if(Em(p||u)===null)continue;break}var x=$a(u);x!==null&&(r.splice(o,3),o-=3,Ap(x,{pending:!0,data:y,method:u.method,action:p},p,y))}}))}function Ao(r){function o(V){return Ed(V,r)}kr!==null&&Ed(kr,r),jr!==null&&Ed(jr,r),Rr!==null&&Ed(Rr,r),fc.forEach(o),pc.forEach(o);for(var u=0;u<Dr.length;u++){var p=Dr[u];p.blockedOn===r&&(p.blockedOn=null)}for(;0<Dr.length&&(u=Dr[0],u.blockedOn===null);)uw(u),u.blockedOn===null&&Dr.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var y=u[p],x=u[p+1],C=y[Xn]||null;if(typeof x=="function")C||hw(u);else if(C){var D=null;if(x&&x.hasAttribute("formAction")){if(y=x,C=x[Xn]||null)D=C.formAction;else if(Em(y)!==null)continue}else D=C.action;typeof D=="function"?u[p+1]=D:(u.splice(p,3),p-=3),hw(u)}}}function fw(){function r(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Tm(r){this._internalRoot=r}Td.prototype.render=Tm.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,p=ms();iw(u,p,r,o,null,null)},Td.prototype.unmount=Tm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;iw(r.current,2,null,r,null,null),od(),o[Fa]=null}};function Td(r){this._internalRoot=r}Td.prototype.unstable_scheduleHydration=function(r){if(r){var o=yf();r={blockedOn:null,target:r,priority:o};for(var u=0;u<Dr.length&&o!==0&&o<Dr[u].priority;u++);Dr.splice(u,0,r),u===0&&uw(r)}};var pw=e.version;if(pw!=="19.2.3")throw Error(n(527,pw,"19.2.3"));$.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=f(o),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var bk={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nd.isDisabled&&Nd.supportsFiber)try{Us=Nd.inject(bk),Q=Nd}catch{}}return vc.createRoot=function(r,o){if(!i(r))throw Error(n(299));var u=!1,p="",y=w0,x=S0,C=_0;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=nw(r,1,!1,null,null,u,p,null,y,x,C,fw),r[Fa]=o.current,lm(r),new Tm(o)},vc.hydrateRoot=function(r,o,u){if(!i(r))throw Error(n(299));var p=!1,y="",x=w0,C=S0,D=_0,V=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.formState!==void 0&&(V=u.formState)),o=nw(r,1,!0,o,u??null,p,y,V,x,C,D,fw),o.context=sw(null),u=o.current,p=ms(),p=za(p),y=vr(p),y.callback=null,yr(u,y,p),u=p,o.current.lanes=u,It(o,u),ci(o),r[Fa]=o.current,lm(r),new Td(o)},vc.version="19.2.3",vc}var Cw;function kk(){if(Cw)return Rm.exports;Cw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rm.exports=Nk(),Rm.exports}var jk=kk();function we(s,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(s?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function Rk(s,e){const t=S.createContext(e),n=a=>{const{children:l,...c}=a,d=S.useMemo(()=>c,Object.values(c));return h.jsx(t.Provider,{value:d,children:l})};n.displayName=s+"Provider";function i(a){const l=S.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${s}\``)}return[n,i]}function Bs(s,e=[]){let t=[];function n(a,l){const c=S.createContext(l),d=t.length;t=[...t,l];const f=g=>{const{scope:v,children:b,..._}=g,w=v?.[s]?.[d]||c,E=S.useMemo(()=>_,Object.values(_));return h.jsx(w.Provider,{value:E,children:b})};f.displayName=a+"Provider";function m(g,v){const b=v?.[s]?.[d]||c,_=S.useContext(b);if(_)return _;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${a}\``)}return[f,m]}const i=()=>{const a=t.map(l=>S.createContext(l));return function(c){const d=c?.[s]||a;return S.useMemo(()=>({[`__scope${s}`]:{...c,[s]:d}}),[c,d])}};return i.scopeName=s,[n,Dk(i,...e)]}function Dk(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const n=s.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=n.reduce((c,{useScope:d,scopeName:f})=>{const g=d(a)[`__scope${f}`];return{...c,...g}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function Tw(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function ar(...s){return e=>{let t=!1;const n=s.map(i=>{const a=Tw(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():Tw(s[i],null)}}}}function Je(...s){return S.useCallback(ar(...s),s)}function Nw(s){const e=Mk(s),t=S.forwardRef((n,i)=>{const{children:a,...l}=n,c=S.Children.toArray(a),d=c.find(Pk);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return h.jsx(e,{...l,ref:i,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return h.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}function Mk(s){const e=S.forwardRef((t,n)=>{const{children:i,...a}=t;if(S.isValidElement(i)){const l=Ik(i),c=Lk(a,i.props);return i.type!==S.Fragment&&(c.ref=n?ar(n,l):l),S.cloneElement(i,c)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var Ok=Symbol("radix.slottable");function Pk(s){return S.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===Ok}function Lk(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function Ik(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}function Mh(s){const e=s+"CollectionProvider",[t,n]=Bs(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=w=>{const{scope:E,children:A}=w,N=ye.useRef(null),T=ye.useRef(new Map).current;return h.jsx(i,{scope:E,itemMap:T,collectionRef:N,children:A})};l.displayName=e;const c=s+"CollectionSlot",d=Nw(c),f=ye.forwardRef((w,E)=>{const{scope:A,children:N}=w,T=a(c,A),j=Je(E,T.collectionRef);return h.jsx(d,{ref:j,children:N})});f.displayName=c;const m=s+"CollectionItemSlot",g="data-radix-collection-item",v=Nw(m),b=ye.forwardRef((w,E)=>{const{scope:A,children:N,...T}=w,j=ye.useRef(null),P=Je(E,j),L=a(m,A);return ye.useEffect(()=>(L.itemMap.set(j,{ref:j,...T}),()=>{L.itemMap.delete(j)})),h.jsx(v,{[g]:"",ref:P,children:N})});b.displayName=m;function _(w){const E=a(s+"CollectionConsumer",w);return ye.useCallback(()=>{const N=E.collectionRef.current;if(!N)return[];const T=Array.from(N.querySelectorAll(`[${g}]`));return Array.from(E.itemMap.values()).sort((L,M)=>T.indexOf(L.ref.current)-T.indexOf(M.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:l,Slot:f,ItemSlot:b},_,n]}var On=globalThis?.document?S.useLayoutEffect:()=>{},Bk=dv[" useId ".trim().toString()]||(()=>{}),zk=0;function Si(s){const[e,t]=S.useState(Bk());return On(()=>{t(n=>n??String(zk++))},[s]),s||(e?`radix-${e}`:"")}var fl=X1();const K1=cv(fl);function Fk(s){const e=Uk(s),t=S.forwardRef((n,i)=>{const{children:a,...l}=n,c=S.Children.toArray(a),d=c.find(Hk);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return h.jsx(e,{...l,ref:i,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return h.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}function Uk(s){const e=S.forwardRef((t,n)=>{const{children:i,...a}=t;if(S.isValidElement(i)){const l=Gk(i),c=Vk(a,i.props);return i.type!==S.Fragment&&(c.ref=n?ar(n,l):l),S.cloneElement(i,c)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var $k=Symbol("radix.slottable");function Hk(s){return S.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===$k}function Vk(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function Gk(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var qk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ue=qk.reduce((s,e)=>{const t=Fk(`Primitive.${e}`),n=S.forwardRef((i,a)=>{const{asChild:l,...c}=i,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(d,{...c,ref:a})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{});function J1(s,e){s&&fl.flushSync(()=>s.dispatchEvent(e))}function Mn(s){const e=S.useRef(s);return S.useEffect(()=>{e.current=s}),S.useMemo(()=>(...t)=>e.current?.(...t),[])}var Wk=dv[" useInsertionEffect ".trim().toString()]||On;function $r({prop:s,defaultProp:e,onChange:t=()=>{},caller:n}){const[i,a,l]=Yk({defaultProp:e,onChange:t}),c=s!==void 0,d=c?s:i;{const m=S.useRef(s!==void 0);S.useEffect(()=>{const g=m.current;g!==c&&console.warn(`${n} is changing from ${g?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,n])}const f=S.useCallback(m=>{if(c){const g=Xk(m)?m(s):m;g!==s&&l.current?.(g)}else a(m)},[c,s,a,l]);return[d,f]}function Yk({defaultProp:s,onChange:e}){const[t,n]=S.useState(s),i=S.useRef(t),a=S.useRef(e);return Wk(()=>{a.current=e},[e]),S.useEffect(()=>{i.current!==t&&(a.current?.(t),i.current=t)},[t,i]),[t,n,a]}function Xk(s){return typeof s=="function"}var Kk=S.createContext(void 0);function pl(s){const e=S.useContext(Kk);return s||e||"ltr"}var Pm="rovingFocusGroup.onEntryFocus",Jk={bubbles:!1,cancelable:!0},su="RovingFocusGroup",[bg,Q1,Qk]=Mh(su),[Zk,Oh]=Bs(su,[Qk]),[ej,tj]=Zk(su),Z1=S.forwardRef((s,e)=>h.jsx(bg.Provider,{scope:s.__scopeRovingFocusGroup,children:h.jsx(bg.Slot,{scope:s.__scopeRovingFocusGroup,children:h.jsx(nj,{...s,ref:e})})}));Z1.displayName=su;var nj=S.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...g}=s,v=S.useRef(null),b=Je(e,v),_=pl(a),[w,E]=$r({prop:l,defaultProp:c??null,onChange:d,caller:su}),[A,N]=S.useState(!1),T=Mn(f),j=Q1(t),P=S.useRef(!1),[L,M]=S.useState(0);return S.useEffect(()=>{const I=v.current;if(I)return I.addEventListener(Pm,T),()=>I.removeEventListener(Pm,T)},[T]),h.jsx(ej,{scope:t,orientation:n,dir:_,loop:i,currentTabStopId:w,onItemFocus:S.useCallback(I=>E(I),[E]),onItemShiftTab:S.useCallback(()=>N(!0),[]),onFocusableItemAdd:S.useCallback(()=>M(I=>I+1),[]),onFocusableItemRemove:S.useCallback(()=>M(I=>I-1),[]),children:h.jsx(Ue.div,{tabIndex:A||L===0?-1:0,"data-orientation":n,...g,ref:b,style:{outline:"none",...s.style},onMouseDown:we(s.onMouseDown,()=>{P.current=!0}),onFocus:we(s.onFocus,I=>{const F=!P.current;if(I.target===I.currentTarget&&F&&!A){const G=new CustomEvent(Pm,Jk);if(I.currentTarget.dispatchEvent(G),!G.defaultPrevented){const K=j().filter(R=>R.focusable),ae=K.find(R=>R.active),X=K.find(R=>R.id===w),ie=[ae,X,...K].filter(Boolean).map(R=>R.ref.current);n_(ie,m)}}P.current=!1}),onBlur:we(s.onBlur,()=>N(!1))})})}),e_="RovingFocusGroupItem",t_=S.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:i=!1,tabStopId:a,children:l,...c}=s,d=Si(),f=a||d,m=tj(e_,t),g=m.currentTabStopId===f,v=Q1(t),{onFocusableItemAdd:b,onFocusableItemRemove:_,currentTabStopId:w}=m;return S.useEffect(()=>{if(n)return b(),()=>_()},[n,b,_]),h.jsx(bg.ItemSlot,{scope:t,id:f,focusable:n,active:i,children:h.jsx(Ue.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:we(s.onMouseDown,E=>{n?m.onItemFocus(f):E.preventDefault()}),onFocus:we(s.onFocus,()=>m.onItemFocus(f)),onKeyDown:we(s.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){m.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const A=rj(E,m.orientation,m.dir);if(A!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let T=v().filter(j=>j.focusable).map(j=>j.ref.current);if(A==="last")T.reverse();else if(A==="prev"||A==="next"){A==="prev"&&T.reverse();const j=T.indexOf(E.currentTarget);T=m.loop?aj(T,j+1):T.slice(j+1)}setTimeout(()=>n_(T))}}),children:typeof l=="function"?l({isCurrentTabStop:g,hasTabStop:w!=null}):l})})});t_.displayName=e_;var sj={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ij(s,e){return e!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function rj(s,e,t){const n=ij(s.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return sj[n]}function n_(s,e=!1){const t=document.activeElement;for(const n of s)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function aj(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var s_=Z1,i_=t_;function oj(s,e){return S.useReducer((t,n)=>e[t][n]??t,s)}var os=s=>{const{present:e,children:t}=s,n=lj(e),i=typeof t=="function"?t({present:n.isPresent}):S.Children.only(t),a=Je(n.ref,cj(i));return typeof t=="function"||n.isPresent?S.cloneElement(i,{ref:a}):null};os.displayName="Presence";function lj(s){const[e,t]=S.useState(),n=S.useRef(null),i=S.useRef(s),a=S.useRef("none"),l=s?"mounted":"unmounted",[c,d]=oj(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const f=kd(n.current);a.current=c==="mounted"?f:"none"},[c]),On(()=>{const f=n.current,m=i.current;if(m!==s){const v=a.current,b=kd(f);s?d("MOUNT"):b==="none"||f?.display==="none"?d("UNMOUNT"):d(m&&v!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=s}},[s,d]),On(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,g=b=>{const w=kd(n.current).includes(CSS.escape(b.animationName));if(b.target===e&&w&&(d("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},v=b=>{b.target===e&&(a.current=kd(n.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:S.useCallback(f=>{n.current=f?getComputedStyle(f):null,t(f)},[])}}function kd(s){return s?.animationName||"none"}function cj(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var Ph="Tabs",[uj]=Bs(Ph,[Oh]),r_=Oh(),[dj,hv]=uj(Ph),a_=S.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,onValueChange:i,defaultValue:a,orientation:l="horizontal",dir:c,activationMode:d="automatic",...f}=s,m=pl(c),[g,v]=$r({prop:n,onChange:i,defaultProp:a??"",caller:Ph});return h.jsx(dj,{scope:t,baseId:Si(),value:g,onValueChange:v,orientation:l,dir:m,activationMode:d,children:h.jsx(Ue.div,{dir:m,"data-orientation":l,...f,ref:e})})});a_.displayName=Ph;var o_="TabsList",l_=S.forwardRef((s,e)=>{const{__scopeTabs:t,loop:n=!0,...i}=s,a=hv(o_,t),l=r_(t);return h.jsx(s_,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:n,children:h.jsx(Ue.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});l_.displayName=o_;var c_="TabsTrigger",u_=S.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,disabled:i=!1,...a}=s,l=hv(c_,t),c=r_(t),d=f_(l.baseId,n),f=p_(l.baseId,n),m=n===l.value;return h.jsx(i_,{asChild:!0,...c,focusable:!i,active:m,children:h.jsx(Ue.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...a,ref:e,onMouseDown:we(s.onMouseDown,g=>{!i&&g.button===0&&g.ctrlKey===!1?l.onValueChange(n):g.preventDefault()}),onKeyDown:we(s.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&l.onValueChange(n)}),onFocus:we(s.onFocus,()=>{const g=l.activationMode!=="manual";!m&&!i&&g&&l.onValueChange(n)})})})});u_.displayName=c_;var d_="TabsContent",h_=S.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,forceMount:i,children:a,...l}=s,c=hv(d_,t),d=f_(c.baseId,n),f=p_(c.baseId,n),m=n===c.value,g=S.useRef(m);return S.useEffect(()=>{const v=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(v)},[]),h.jsx(os,{present:i||m,children:({present:v})=>h.jsx(Ue.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!v,id:f,tabIndex:0,...l,ref:e,style:{...s.style,animationDuration:g.current?"0s":void 0},children:v&&a})})});h_.displayName=d_;function f_(s,e){return`${s}-trigger-${e}`}function p_(s,e){return`${s}-content-${e}`}var hj=a_,fj=l_,pj=u_,mj=h_;function m_(s){var e,t,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(e=0;e<i;e++)s[e]&&(t=m_(s[e]))&&(n&&(n+=" "),n+=t)}else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function ml(){for(var s,e,t=0,n="",i=arguments.length;t<i;t++)(s=arguments[t])&&(e=m_(s))&&(n&&(n+=" "),n+=e);return n}const gj=(s,e)=>{const t=new Array(s.length+e.length);for(let n=0;n<s.length;n++)t[n]=s[n];for(let n=0;n<e.length;n++)t[s.length+n]=e[n];return t},vj=(s,e)=>({classGroupId:s,validator:e}),g_=(s=new Map,e=null,t)=>({nextPart:s,validators:e,classGroupId:t}),hh="-",kw=[],yj="arbitrary..",bj=s=>{const e=wj(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return xj(l);const c=l.split(hh),d=c[0]===""&&c.length>1?1:0;return v_(c,d,e)},getConflictingClassGroupIds:(l,c)=>{if(c){const d=n[l],f=t[l];return d?f?gj(f,d):d:f||kw}return t[l]||kw}}},v_=(s,e,t)=>{if(s.length-e===0)return t.classGroupId;const i=s[e],a=t.nextPart.get(i);if(a){const f=v_(s,e+1,a);if(f)return f}const l=t.validators;if(l===null)return;const c=e===0?s.join(hh):s.slice(e).join(hh),d=l.length;for(let f=0;f<d;f++){const m=l[f];if(m.validator(c))return m.classGroupId}},xj=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=s.slice(1,-1),t=e.indexOf(":"),n=e.slice(0,t);return n?yj+n:void 0})(),wj=s=>{const{theme:e,classGroups:t}=s;return Sj(t,e)},Sj=(s,e)=>{const t=g_();for(const n in s){const i=s[n];fv(i,t,n,e)}return t},fv=(s,e,t,n)=>{const i=s.length;for(let a=0;a<i;a++){const l=s[a];_j(l,e,t,n)}},_j=(s,e,t,n)=>{if(typeof s=="string"){Aj(s,e,t);return}if(typeof s=="function"){Ej(s,e,t,n);return}Cj(s,e,t,n)},Aj=(s,e,t)=>{const n=s===""?e:y_(e,s);n.classGroupId=t},Ej=(s,e,t,n)=>{if(Tj(s)){fv(s(n),e,t,n);return}e.validators===null&&(e.validators=[]),e.validators.push(vj(t,s))},Cj=(s,e,t,n)=>{const i=Object.entries(s),a=i.length;for(let l=0;l<a;l++){const[c,d]=i[l];fv(d,y_(e,c),t,n)}},y_=(s,e)=>{let t=s;const n=e.split(hh),i=n.length;for(let a=0;a<i;a++){const l=n[a];let c=t.nextPart.get(l);c||(c=g_(),t.nextPart.set(l,c)),t=c}return t},Tj=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,Nj=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),n=Object.create(null);const i=(a,l)=>{t[a]=l,e++,e>s&&(e=0,n=t,t=Object.create(null))};return{get(a){let l=t[a];if(l!==void 0)return l;if((l=n[a])!==void 0)return i(a,l),l},set(a,l){a in t?t[a]=l:i(a,l)}}},xg="!",jw=":",kj=[],Rw=(s,e,t,n,i)=>({modifiers:s,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:n,isExternal:i}),jj=s=>{const{prefix:e,experimentalParseClassName:t}=s;let n=i=>{const a=[];let l=0,c=0,d=0,f;const m=i.length;for(let w=0;w<m;w++){const E=i[w];if(l===0&&c===0){if(E===jw){a.push(i.slice(d,w)),d=w+1;continue}if(E==="/"){f=w;continue}}E==="["?l++:E==="]"?l--:E==="("?c++:E===")"&&c--}const g=a.length===0?i:i.slice(d);let v=g,b=!1;g.endsWith(xg)?(v=g.slice(0,-1),b=!0):g.startsWith(xg)&&(v=g.slice(1),b=!0);const _=f&&f>d?f-d:void 0;return Rw(a,b,v,_)};if(e){const i=e+jw,a=n;n=l=>l.startsWith(i)?a(l.slice(i.length)):Rw(kj,!1,l,void 0,!0)}if(t){const i=n;n=a=>t({className:a,parseClassName:i})}return n},Rj=s=>{const e=new Map;return s.orderSensitiveModifiers.forEach((t,n)=>{e.set(t,1e6+n)}),t=>{const n=[];let i=[];for(let a=0;a<t.length;a++){const l=t[a],c=l[0]==="[",d=e.has(l);c||d?(i.length>0&&(i.sort(),n.push(...i),i=[]),n.push(l)):i.push(l)}return i.length>0&&(i.sort(),n.push(...i)),n}},Dj=s=>({cache:Nj(s.cacheSize),parseClassName:jj(s),sortModifiers:Rj(s),...bj(s)}),Mj=/\s+/,Oj=(s,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:a}=e,l=[],c=s.trim().split(Mj);let d="";for(let f=c.length-1;f>=0;f-=1){const m=c[f],{isExternal:g,modifiers:v,hasImportantModifier:b,baseClassName:_,maybePostfixModifierPosition:w}=t(m);if(g){d=m+(d.length>0?" "+d:d);continue}let E=!!w,A=n(E?_.substring(0,w):_);if(!A){if(!E){d=m+(d.length>0?" "+d:d);continue}if(A=n(_),!A){d=m+(d.length>0?" "+d:d);continue}E=!1}const N=v.length===0?"":v.length===1?v[0]:a(v).join(":"),T=b?N+xg:N,j=T+A;if(l.indexOf(j)>-1)continue;l.push(j);const P=i(A,E);for(let L=0;L<P.length;++L){const M=P[L];l.push(T+M)}d=m+(d.length>0?" "+d:d)}return d},Pj=(...s)=>{let e=0,t,n,i="";for(;e<s.length;)(t=s[e++])&&(n=b_(t))&&(i&&(i+=" "),i+=n);return i},b_=s=>{if(typeof s=="string")return s;let e,t="";for(let n=0;n<s.length;n++)s[n]&&(e=b_(s[n]))&&(t&&(t+=" "),t+=e);return t},Lj=(s,...e)=>{let t,n,i,a;const l=d=>{const f=e.reduce((m,g)=>g(m),s());return t=Dj(f),n=t.cache.get,i=t.cache.set,a=c,c(d)},c=d=>{const f=n(d);if(f)return f;const m=Oj(d,t);return i(d,m),m};return a=l,(...d)=>a(Pj(...d))},Ij=[],ln=s=>{const e=t=>t[s]||Ij;return e.isThemeGetter=!0,e},x_=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,w_=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Bj=/^\d+\/\d+$/,zj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Fj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Uj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,$j=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Hj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Eo=s=>Bj.test(s),tt=s=>!!s&&!Number.isNaN(Number(s)),Or=s=>!!s&&Number.isInteger(Number(s)),Lm=s=>s.endsWith("%")&&tt(s.slice(0,-1)),Gi=s=>zj.test(s),Vj=()=>!0,Gj=s=>Fj.test(s)&&!Uj.test(s),S_=()=>!1,qj=s=>$j.test(s),Wj=s=>Hj.test(s),Yj=s=>!ke(s)&&!je(s),Xj=s=>gl(s,E_,S_),ke=s=>x_.test(s),fa=s=>gl(s,C_,Gj),Im=s=>gl(s,eR,tt),Dw=s=>gl(s,__,S_),Kj=s=>gl(s,A_,Wj),jd=s=>gl(s,T_,qj),je=s=>w_.test(s),yc=s=>vl(s,C_),Jj=s=>vl(s,tR),Mw=s=>vl(s,__),Qj=s=>vl(s,E_),Zj=s=>vl(s,A_),Rd=s=>vl(s,T_,!0),gl=(s,e,t)=>{const n=x_.exec(s);return n?n[1]?e(n[1]):t(n[2]):!1},vl=(s,e,t=!1)=>{const n=w_.exec(s);return n?n[1]?e(n[1]):t:!1},__=s=>s==="position"||s==="percentage",A_=s=>s==="image"||s==="url",E_=s=>s==="length"||s==="size"||s==="bg-size",C_=s=>s==="length",eR=s=>s==="number",tR=s=>s==="family-name",T_=s=>s==="shadow",nR=()=>{const s=ln("color"),e=ln("font"),t=ln("text"),n=ln("font-weight"),i=ln("tracking"),a=ln("leading"),l=ln("breakpoint"),c=ln("container"),d=ln("spacing"),f=ln("radius"),m=ln("shadow"),g=ln("inset-shadow"),v=ln("text-shadow"),b=ln("drop-shadow"),_=ln("blur"),w=ln("perspective"),E=ln("aspect"),A=ln("ease"),N=ln("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...j(),je,ke],L=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],I=()=>[je,ke,d],F=()=>[Eo,"full","auto",...I()],G=()=>[Or,"none","subgrid",je,ke],K=()=>["auto",{span:["full",Or,je,ke]},Or,je,ke],ae=()=>[Or,"auto",je,ke],X=()=>["auto","min","max","fr",je,ke],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ie=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...I()],$=()=>[Eo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],U=()=>[s,je,ke],z=()=>[...j(),Mw,Dw,{position:[je,ke]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],k=()=>["auto","cover","contain",Qj,Xj,{size:[je,ke]}],O=()=>[Lm,yc,fa],B=()=>["","none","full",f,je,ke],q=()=>["",tt,yc,fa],J=()=>["solid","dashed","dotted","double"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[tt,Lm,Mw,Dw],Y=()=>["","none",_,je,ke],oe=()=>["none",tt,je,ke],ge=()=>["none",tt,je,ke],xe=()=>[tt,je,ke],be=()=>[Eo,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Gi],breakpoint:[Gi],color:[Vj],container:[Gi],"drop-shadow":[Gi],ease:["in","out","in-out"],font:[Yj],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Gi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Gi],shadow:[Gi],spacing:["px",tt],text:[Gi],"text-shadow":[Gi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Eo,ke,je,E]}],container:["container"],columns:[{columns:[tt,ke,je,c]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[Or,"auto",je,ke]}],basis:[{basis:[Eo,"full","auto",c,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,Eo,"auto","initial","none",ke]}],grow:[{grow:["",tt,je,ke]}],shrink:[{shrink:["",tt,je,ke]}],order:[{order:[Or,"first","last","none",je,ke]}],"grid-cols":[{"grid-cols":G()}],"col-start-end":[{col:K()}],"col-start":[{"col-start":ae()}],"col-end":[{"col-end":ae()}],"grid-rows":[{"grid-rows":G()}],"row-start-end":[{row:K()}],"row-start":[{"row-start":ae()}],"row-end":[{"row-end":ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":X()}],"auto-rows":[{"auto-rows":X()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...ie(),"normal"]}],"justify-self":[{"justify-self":["auto",...ie()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...ie(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ie(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...ie(),"baseline"]}],"place-self":[{"place-self":["auto",...ie()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[c,"screen",...$()]}],"min-w":[{"min-w":[c,"screen","none",...$()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...$()]}],h:[{h:["screen","lh",...$()]}],"min-h":[{"min-h":["screen","lh","none",...$()]}],"max-h":[{"max-h":["screen","lh",...$()]}],"font-size":[{text:["base",t,yc,fa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,je,Im]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Lm,ke]}],"font-family":[{font:[Jj,ke,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,je,ke]}],"line-clamp":[{"line-clamp":[tt,"none",je,Im]}],leading:[{leading:[a,...I()]}],"list-image":[{"list-image":["none",je,ke]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",je,ke]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",je,fa]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[tt,"auto",je,ke]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",je,ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",je,ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:z()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:k()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Or,je,ke],radial:["",je,ke],conic:[Or,je,ke]},Zj,Kj]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:O()}],"gradient-via-pos":[{via:O()}],"gradient-to-pos":[{to:O()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:B()}],"rounded-s":[{"rounded-s":B()}],"rounded-e":[{"rounded-e":B()}],"rounded-t":[{"rounded-t":B()}],"rounded-r":[{"rounded-r":B()}],"rounded-b":[{"rounded-b":B()}],"rounded-l":[{"rounded-l":B()}],"rounded-ss":[{"rounded-ss":B()}],"rounded-se":[{"rounded-se":B()}],"rounded-ee":[{"rounded-ee":B()}],"rounded-es":[{"rounded-es":B()}],"rounded-tl":[{"rounded-tl":B()}],"rounded-tr":[{"rounded-tr":B()}],"rounded-br":[{"rounded-br":B()}],"rounded-bl":[{"rounded-bl":B()}],"border-w":[{border:q()}],"border-w-x":[{"border-x":q()}],"border-w-y":[{"border-y":q()}],"border-w-s":[{"border-s":q()}],"border-w-e":[{"border-e":q()}],"border-w-t":[{"border-t":q()}],"border-w-r":[{"border-r":q()}],"border-w-b":[{"border-b":q()}],"border-w-l":[{"border-l":q()}],"divide-x":[{"divide-x":q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,je,ke]}],"outline-w":[{outline:["",tt,yc,fa]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",m,Rd,jd]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",g,Rd,jd]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[tt,fa]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":q()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",v,Rd,jd]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[tt,je,ke]}],"mix-blend":[{"mix-blend":[...ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[je,ke]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:z()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:k()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",je,ke]}],filter:[{filter:["","none",je,ke]}],blur:[{blur:Y()}],brightness:[{brightness:[tt,je,ke]}],contrast:[{contrast:[tt,je,ke]}],"drop-shadow":[{"drop-shadow":["","none",b,Rd,jd]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",tt,je,ke]}],"hue-rotate":[{"hue-rotate":[tt,je,ke]}],invert:[{invert:["",tt,je,ke]}],saturate:[{saturate:[tt,je,ke]}],sepia:[{sepia:["",tt,je,ke]}],"backdrop-filter":[{"backdrop-filter":["","none",je,ke]}],"backdrop-blur":[{"backdrop-blur":Y()}],"backdrop-brightness":[{"backdrop-brightness":[tt,je,ke]}],"backdrop-contrast":[{"backdrop-contrast":[tt,je,ke]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,je,ke]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,je,ke]}],"backdrop-invert":[{"backdrop-invert":["",tt,je,ke]}],"backdrop-opacity":[{"backdrop-opacity":[tt,je,ke]}],"backdrop-saturate":[{"backdrop-saturate":[tt,je,ke]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,je,ke]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",je,ke]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",je,ke]}],ease:[{ease:["linear","initial",A,je,ke]}],delay:[{delay:[tt,je,ke]}],animate:[{animate:["none",N,je,ke]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,je,ke]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:oe()}],"rotate-x":[{"rotate-x":oe()}],"rotate-y":[{"rotate-y":oe()}],"rotate-z":[{"rotate-z":oe()}],scale:[{scale:ge()}],"scale-x":[{"scale-x":ge()}],"scale-y":[{"scale-y":ge()}],"scale-z":[{"scale-z":ge()}],"scale-3d":["scale-3d"],skew:[{skew:xe()}],"skew-x":[{"skew-x":xe()}],"skew-y":[{"skew-y":xe()}],transform:[{transform:[je,ke,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:be()}],"translate-x":[{"translate-x":be()}],"translate-y":[{"translate-y":be()}],"translate-z":[{"translate-z":be()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",je,ke]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",je,ke]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[tt,yc,fa,Im]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},sR=Lj(nR);function Oe(...s){return sR(ml(s))}function pv({className:s,...e}){return h.jsx(hj,{"data-slot":"tabs",className:Oe("flex flex-col gap-2",s),...e})}function N_({className:s,...e}){return h.jsx(fj,{"data-slot":"tabs-list",className:Oe("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...e})}function Vo({className:s,...e}){return h.jsx(pj,{"data-slot":"tabs-trigger",className:Oe("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...e})}function Js({className:s,...e}){return h.jsx(mj,{"data-slot":"tabs-content",className:Oe("flex-1 outline-none",s),...e})}const iR=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rR=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Ow=s=>{const e=rR(s);return e.charAt(0).toUpperCase()+e.slice(1)},k_=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),aR=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var oR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lR=S.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:l,...c},d)=>S.createElement("svg",{ref:d,...oR,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:k_("lucide",i),...!a&&!aR(c)&&{"aria-hidden":"true"},...c},[...l.map(([f,m])=>S.createElement(f,m)),...Array.isArray(a)?a:[a]]));const _e=(s,e)=>{const t=S.forwardRef(({className:n,...i},a)=>S.createElement(lR,{ref:a,iconNode:e,className:k_(`lucide-${iR(Ow(s))}`,`lucide-${s}`,n),...i}));return t.displayName=Ow(s),t};const cR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wg=_e("arrow-left",cR);const uR=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],yl=_e("book-open",uR);const dR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],hR=_e("calendar-days",dR);const fR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],nl=_e("calendar",fR);const pR=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],mR=_e("chart-pie",pR);const gR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mv=_e("check",gR);const vR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],j_=_e("chevron-down",vR);const yR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],sl=_e("chevron-left",yR);const bR=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ta=_e("chevron-right",bR);const xR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],wR=_e("chevron-up",xR);const SR=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],R_=_e("circle-check-big",SR);const _R=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],D_=_e("circle-check",_R);const AR=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ER=_e("circle-play",AR);const CR=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],TR=_e("clipboard-list",CR);const NR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pw=_e("clock",NR);const kR=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Lw=_e("cloud-rain",kR);const jR=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],RR=_e("cloud",jR);const DR=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],M_=_e("code-xml",DR);const MR=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Iw=_e("cog",MR);const OR=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],PR=_e("database",OR);const LR=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ic=_e("download",LR);const IR=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],il=_e("ellipsis-vertical",IR);const BR=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bw=_e("eye",BR);const zR=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],zw=_e("file-code",zR);const FR=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],UR=_e("file-down",FR);const $R=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zr=_e("file-text",$R);const HR=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],O_=_e("folder-kanban",HR);const VR=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],P_=_e("folder",VR);const GR=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],qR=_e("grip-horizontal",GR);const WR=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],YR=_e("hard-drive",WR);const XR=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],Fw=_e("highlighter",XR);const KR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],JR=_e("image",KR);const QR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ZR=_e("info",QR);const eD=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Uw=_e("layout-grid",eD);const tD=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],L_=_e("library",tD);const nD=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Bm=_e("lightbulb",nD);const sD=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],iD=_e("list-todo",sD);const rD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],aD=_e("loader-circle",rD);const oD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Sg=_e("maximize-2",oD);const lD=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Go=_e("message-square",lD);const cD=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],uD=_e("minimize-2",cD);const dD=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],hD=_e("monitor",dD);const fD=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],pD=_e("move",fD);const mD=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],zm=_e("music",mD);const gD=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],vD=_e("newspaper",gD);const yD=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bD=_e("octagon-x",yD);const xD=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],wD=_e("pause",xD);const SD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$w=_e("pen-line",SD);const _D=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Dc=_e("pen",_D);const AD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ED=_e("pencil",AD);const CD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],TD=_e("play",CD);const ND=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ji=_e("plus",ND);const kD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],jD=_e("rotate-ccw",kD);const RD=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],DD=_e("rotate-cw",RD);const MD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Hw=_e("save",MD);const OD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],I_=_e("search",OD);const PD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gv=_e("settings",PD);const LD=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],ID=_e("sliders-horizontal",LD);const BD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],B_=_e("star",BD);const zD=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],FD=_e("timer",zD);const UD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Zs=_e("trash-2",UD);const $D=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ih=_e("triangle-alert",$D);const HD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Bc=_e("upload",HD);const VD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],GD=_e("user",VD);const qD=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Vw=_e("volume-2",qD);const WD=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Gw=_e("volume-x",WD);const YD=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],qw=_e("waves",YD);const XD=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],Ww=_e("wind",XD);const KD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vn=_e("x",KD);const JD=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],QD=_e("zoom-in",JD);const ZD=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],eM=_e("zoom-out",ZD);var tM=(s,e,t,n,i,a,l,c)=>{let d=document.documentElement,f=["light","dark"];function m(b){(Array.isArray(s)?s:[s]).forEach(_=>{let w=_==="class",E=w&&a?i.map(A=>a[A]||A):i;w?(d.classList.remove(...E),d.classList.add(a&&a[b]?a[b]:b)):d.setAttribute(_,b)}),g(b)}function g(b){c&&f.includes(b)&&(d.style.colorScheme=b)}function v(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)m(n);else try{let b=localStorage.getItem(e)||t,_=l&&b==="system"?v():b;m(_)}catch{}},nM=S.createContext(void 0),sM={setTheme:s=>{},themes:[]},iM=()=>{var s;return(s=S.useContext(nM))!=null?s:sM};S.memo(({forcedTheme:s,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:i,defaultTheme:a,value:l,themes:c,nonce:d,scriptProps:f})=>{let m=JSON.stringify([t,e,a,s,c,l,n,i]).slice(1,-1);return S.createElement("script",{...f,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${tM.toString()})(${m})`}})});function rM(s){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}const aM=s=>{switch(s){case"success":return cM;case"info":return dM;case"warning":return uM;case"error":return hM;default:return null}},oM=Array(12).fill(0),lM=({visible:s,className:e})=>ye.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},ye.createElement("div",{className:"sonner-spinner"},oM.map((t,n)=>ye.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),cM=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),uM=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),dM=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hM=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fM=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ye.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ye.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),pM=()=>{const[s,e]=ye.useState(document.hidden);return ye.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s};let _g=1;class mM{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...i}=e,a=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:_g++,l=this.toasts.find(d=>d.id===a),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),l?this.toasts=this.toasts.map(d=>d.id===a?(this.publish({...d,...e,id:a,title:n}),{...d,...e,id:a,dismissible:c,title:n}):d):this.addToast({title:n,...i,dismissible:c,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let a=n!==void 0,l;const c=i.then(async f=>{if(l=["resolve",f],ye.isValidElement(f))a=!1,this.create({id:n,type:"default",message:f});else if(vM(f)&&!f.ok){a=!1;const g=typeof t.error=="function"?await t.error(`HTTP error! status: ${f.status}`):t.error,v=typeof t.description=="function"?await t.description(`HTTP error! status: ${f.status}`):t.description,_=typeof g=="object"&&!ye.isValidElement(g)?g:{message:g};this.create({id:n,type:"error",description:v,..._})}else if(f instanceof Error){a=!1;const g=typeof t.error=="function"?await t.error(f):t.error,v=typeof t.description=="function"?await t.description(f):t.description,_=typeof g=="object"&&!ye.isValidElement(g)?g:{message:g};this.create({id:n,type:"error",description:v,..._})}else if(t.success!==void 0){a=!1;const g=typeof t.success=="function"?await t.success(f):t.success,v=typeof t.description=="function"?await t.description(f):t.description,_=typeof g=="object"&&!ye.isValidElement(g)?g:{message:g};this.create({id:n,type:"success",description:v,..._})}}).catch(async f=>{if(l=["reject",f],t.error!==void 0){a=!1;const m=typeof t.error=="function"?await t.error(f):t.error,g=typeof t.description=="function"?await t.description(f):t.description,b=typeof m=="object"&&!ye.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:g,...b})}}).finally(()=>{a&&(this.dismiss(n),n=void 0),t.finally==null||t.finally.call(t)}),d=()=>new Promise((f,m)=>c.then(()=>l[0]==="reject"?m(l[1]):f(l[1])).catch(m));return typeof n!="string"&&typeof n!="number"?{unwrap:d}:Object.assign(n,{unwrap:d})},this.custom=(e,t)=>{const n=t?.id||_g++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const is=new mM,gM=(s,e)=>{const t=e?.id||_g++;return is.addToast({title:s,...e,id:t}),t},vM=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",yM=gM,bM=()=>is.toasts,xM=()=>is.getActiveToasts(),Ae=Object.assign(yM,{success:is.success,info:is.info,warning:is.warning,error:is.error,custom:is.custom,message:is.message,promise:is.promise,dismiss:is.dismiss,loading:is.loading},{getHistory:bM,getToasts:xM});rM("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Dd(s){return s.label!==void 0}const wM=3,SM="24px",_M="16px",Yw=4e3,AM=356,EM=14,CM=45,TM=200;function hi(...s){return s.filter(Boolean).join(" ")}function NM(s){const[e,t]=s.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}const kM=s=>{var e,t,n,i,a,l,c,d,f;const{invert:m,toast:g,unstyled:v,interacting:b,setHeights:_,visibleToasts:w,heights:E,index:A,toasts:N,expanded:T,removeToast:j,defaultRichColors:P,closeButton:L,style:M,cancelButtonStyle:I,actionButtonStyle:F,className:G="",descriptionClassName:K="",duration:ae,position:X,gap:H,expandByDefault:ie,classNames:R,icons:$,closeButtonAriaLabel:U="Close toast"}=s,[z,le]=ye.useState(null),[k,O]=ye.useState(null),[B,q]=ye.useState(!1),[J,ue]=ye.useState(!1),[ee,Y]=ye.useState(!1),[oe,ge]=ye.useState(!1),[xe,be]=ye.useState(!1),[Ge,Ie]=ye.useState(0),[te,Se]=ye.useState(0),$e=ye.useRef(g.duration||ae||Yw),Re=ye.useRef(null),ht=ye.useRef(null),un=A===0,Nt=A+1<=w,wt=g.type,Ut=g.dismissible!==!1,kt=g.className||"",Fs=g.descriptionClassName||"",Fn=ye.useMemo(()=>E.findIndex(qe=>qe.toastId===g.id)||0,[E,g.id]),ri=ye.useMemo(()=>{var qe;return(qe=g.closeButton)!=null?qe:L},[g.closeButton,L]),ls=ye.useMemo(()=>g.duration||ae||Yw,[g.duration,ae]),an=ye.useRef(0),Gt=ye.useRef(0),Sn=ye.useRef(0),Pn=ye.useRef(null),[Us,Q]=X.split("-"),fe=ye.useMemo(()=>E.reduce((qe,Rt,dn)=>dn>=Fn?qe:qe+Rt.height,0),[E,Fn]),ve=pM(),Ee=g.invert||m,We=wt==="loading";Gt.current=ye.useMemo(()=>Fn*H+fe,[Fn,fe]),ye.useEffect(()=>{$e.current=ls},[ls]),ye.useEffect(()=>{q(!0)},[]),ye.useEffect(()=>{const qe=ht.current;if(qe){const Rt=qe.getBoundingClientRect().height;return Se(Rt),_(dn=>[{toastId:g.id,height:Rt,position:g.position},...dn]),()=>_(dn=>dn.filter(Ln=>Ln.toastId!==g.id))}},[_,g.id]),ye.useLayoutEffect(()=>{if(!B)return;const qe=ht.current,Rt=qe.style.height;qe.style.height="auto";const dn=qe.getBoundingClientRect().height;qe.style.height=Rt,Se(dn),_(Ln=>Ln.find(It=>It.toastId===g.id)?Ln.map(It=>It.toastId===g.id?{...It,height:dn}:It):[{toastId:g.id,height:dn,position:g.position},...Ln])},[B,g.title,g.description,_,g.id,g.jsx,g.action,g.cancel]);const ct=ye.useCallback(()=>{ue(!0),Ie(Gt.current),_(qe=>qe.filter(Rt=>Rt.toastId!==g.id)),setTimeout(()=>{j(g)},TM)},[g,j,_,Gt]);ye.useEffect(()=>{if(g.promise&&wt==="loading"||g.duration===1/0||g.type==="loading")return;let qe;return T||b||ve?(()=>{if(Sn.current<an.current){const Ln=new Date().getTime()-an.current;$e.current=$e.current-Ln}Sn.current=new Date().getTime()})():$e.current!==1/0&&(an.current=new Date().getTime(),qe=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),ct()},$e.current)),()=>clearTimeout(qe)},[T,b,g,wt,ve,ct]),ye.useEffect(()=>{g.delete&&(ct(),g.onDismiss==null||g.onDismiss.call(g,g))},[ct,g.delete]);function Pt(){var qe;if($?.loading){var Rt;return ye.createElement("div",{className:hi(R?.loader,g==null||(Rt=g.classNames)==null?void 0:Rt.loader,"sonner-loader"),"data-visible":wt==="loading"},$.loading)}return ye.createElement(lM,{className:hi(R?.loader,g==null||(qe=g.classNames)==null?void 0:qe.loader),visible:wt==="loading"})}const jt=g.icon||$?.[wt]||aM(wt);var Lt,_n;return ye.createElement("li",{tabIndex:0,ref:ht,className:hi(G,kt,R?.toast,g==null||(e=g.classNames)==null?void 0:e.toast,R?.default,R?.[wt],g==null||(t=g.classNames)==null?void 0:t[wt]),"data-sonner-toast":"","data-rich-colors":(Lt=g.richColors)!=null?Lt:P,"data-styled":!(g.jsx||g.unstyled||v),"data-mounted":B,"data-promise":!!g.promise,"data-swiped":xe,"data-removed":J,"data-visible":Nt,"data-y-position":Us,"data-x-position":Q,"data-index":A,"data-front":un,"data-swiping":ee,"data-dismissible":Ut,"data-type":wt,"data-invert":Ee,"data-swipe-out":oe,"data-swipe-direction":k,"data-expanded":!!(T||ie&&B),"data-testid":g.testId,style:{"--index":A,"--toasts-before":A,"--z-index":N.length-A,"--offset":`${J?Ge:Gt.current}px`,"--initial-height":ie?"auto":`${te}px`,...M,...g.style},onDragEnd:()=>{Y(!1),le(null),Pn.current=null},onPointerDown:qe=>{qe.button!==2&&(We||!Ut||(Re.current=new Date,Ie(Gt.current),qe.target.setPointerCapture(qe.pointerId),qe.target.tagName!=="BUTTON"&&(Y(!0),Pn.current={x:qe.clientX,y:qe.clientY})))},onPointerUp:()=>{var qe,Rt,dn;if(oe||!Ut)return;Pn.current=null;const Ln=Number(((qe=ht.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),cr=Number(((Rt=ht.current)==null?void 0:Rt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),It=new Date().getTime()-((dn=Re.current)==null?void 0:dn.getTime()),qn=z==="x"?Ln:cr,Xr=Math.abs(qn)/It;if(Math.abs(qn)>=CM||Xr>.11){Ie(Gt.current),g.onDismiss==null||g.onDismiss.call(g,g),O(z==="x"?Ln>0?"right":"left":cr>0?"down":"up"),ct(),ge(!0);return}else{var Wn,Yn;(Wn=ht.current)==null||Wn.style.setProperty("--swipe-amount-x","0px"),(Yn=ht.current)==null||Yn.style.setProperty("--swipe-amount-y","0px")}be(!1),Y(!1),le(null)},onPointerMove:qe=>{var Rt,dn,Ln;if(!Pn.current||!Ut||((Rt=window.getSelection())==null?void 0:Rt.toString().length)>0)return;const It=qe.clientY-Pn.current.y,qn=qe.clientX-Pn.current.x;var Xr;const Wn=(Xr=s.swipeDirections)!=null?Xr:NM(X);!z&&(Math.abs(qn)>1||Math.abs(It)>1)&&le(Math.abs(qn)>Math.abs(It)?"x":"y");let Yn={x:0,y:0};const za=$s=>1/(1.5+Math.abs($s)/20);if(z==="y"){if(Wn.includes("top")||Wn.includes("bottom"))if(Wn.includes("top")&&It<0||Wn.includes("bottom")&&It>0)Yn.y=It;else{const $s=It*za(It);Yn.y=Math.abs($s)<Math.abs(It)?$s:It}}else if(z==="x"&&(Wn.includes("left")||Wn.includes("right")))if(Wn.includes("left")&&qn<0||Wn.includes("right")&&qn>0)Yn.x=qn;else{const $s=qn*za(qn);Yn.x=Math.abs($s)<Math.abs(qn)?$s:qn}(Math.abs(Yn.x)>0||Math.abs(Yn.y)>0)&&be(!0),(dn=ht.current)==null||dn.style.setProperty("--swipe-amount-x",`${Yn.x}px`),(Ln=ht.current)==null||Ln.style.setProperty("--swipe-amount-y",`${Yn.y}px`)}},ri&&!g.jsx&&wt!=="loading"?ye.createElement("button",{"aria-label":U,"data-disabled":We,"data-close-button":!0,onClick:We||!Ut?()=>{}:()=>{ct(),g.onDismiss==null||g.onDismiss.call(g,g)},className:hi(R?.closeButton,g==null||(n=g.classNames)==null?void 0:n.closeButton)},(_n=$?.close)!=null?_n:fM):null,(wt||g.icon||g.promise)&&g.icon!==null&&($?.[wt]!==null||g.icon)?ye.createElement("div",{"data-icon":"",className:hi(R?.icon,g==null||(i=g.classNames)==null?void 0:i.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Pt():null,g.type!=="loading"?jt:null):null,ye.createElement("div",{"data-content":"",className:hi(R?.content,g==null||(a=g.classNames)==null?void 0:a.content)},ye.createElement("div",{"data-title":"",className:hi(R?.title,g==null||(l=g.classNames)==null?void 0:l.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?ye.createElement("div",{"data-description":"",className:hi(K,Fs,R?.description,g==null||(c=g.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),ye.isValidElement(g.cancel)?g.cancel:g.cancel&&Dd(g.cancel)?ye.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||I,onClick:qe=>{Dd(g.cancel)&&Ut&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,qe),ct())},className:hi(R?.cancelButton,g==null||(d=g.classNames)==null?void 0:d.cancelButton)},g.cancel.label):null,ye.isValidElement(g.action)?g.action:g.action&&Dd(g.action)?ye.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||F,onClick:qe=>{Dd(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,qe),!qe.defaultPrevented&&ct())},className:hi(R?.actionButton,g==null||(f=g.classNames)==null?void 0:f.actionButton)},g.action.label):null)};function Xw(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function jM(s,e){const t={};return[s,e].forEach((n,i)=>{const a=i===1,l=a?"--mobile-offset":"--offset",c=a?_M:SM;function d(f){["top","right","bottom","left"].forEach(m=>{t[`${l}-${m}`]=typeof f=="number"?`${f}px`:f})}typeof n=="number"||typeof n=="string"?d(n):typeof n=="object"?["top","right","bottom","left"].forEach(f=>{n[f]===void 0?t[`${l}-${f}`]=c:t[`${l}-${f}`]=typeof n[f]=="number"?`${n[f]}px`:n[f]}):d(c)}),t}const RM=ye.forwardRef(function(e,t){const{id:n,invert:i,position:a="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:d,className:f,offset:m,mobileOffset:g,theme:v="light",richColors:b,duration:_,style:w,visibleToasts:E=wM,toastOptions:A,dir:N=Xw(),gap:T=EM,icons:j,containerAriaLabel:P="Notifications"}=e,[L,M]=ye.useState([]),I=ye.useMemo(()=>n?L.filter(B=>B.toasterId===n):L.filter(B=>!B.toasterId),[L,n]),F=ye.useMemo(()=>Array.from(new Set([a].concat(I.filter(B=>B.position).map(B=>B.position)))),[I,a]),[G,K]=ye.useState([]),[ae,X]=ye.useState(!1),[H,ie]=ye.useState(!1),[R,$]=ye.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=ye.useRef(null),z=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),le=ye.useRef(null),k=ye.useRef(!1),O=ye.useCallback(B=>{M(q=>{var J;return(J=q.find(ue=>ue.id===B.id))!=null&&J.delete||is.dismiss(B.id),q.filter(({id:ue})=>ue!==B.id)})},[]);return ye.useEffect(()=>is.subscribe(B=>{if(B.dismiss){requestAnimationFrame(()=>{M(q=>q.map(J=>J.id===B.id?{...J,delete:!0}:J))});return}setTimeout(()=>{K1.flushSync(()=>{M(q=>{const J=q.findIndex(ue=>ue.id===B.id);return J!==-1?[...q.slice(0,J),{...q[J],...B},...q.slice(J+1)]:[B,...q]})})})}),[L]),ye.useEffect(()=>{if(v!=="system"){$(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;const B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:q})=>{$(q?"dark":"light")})}catch{B.addListener(({matches:J})=>{try{$(J?"dark":"light")}catch(ue){console.error(ue)}})}},[v]),ye.useEffect(()=>{L.length<=1&&X(!1)},[L]),ye.useEffect(()=>{const B=q=>{var J;if(l.every(Y=>q[Y]||q.code===Y)){var ee;X(!0),(ee=U.current)==null||ee.focus()}q.code==="Escape"&&(document.activeElement===U.current||(J=U.current)!=null&&J.contains(document.activeElement))&&X(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[l]),ye.useEffect(()=>{if(U.current)return()=>{le.current&&(le.current.focus({preventScroll:!0}),le.current=null,k.current=!1)}},[U.current]),ye.createElement("section",{ref:t,"aria-label":`${P} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((B,q)=>{var J;const[ue,ee]=B.split("-");return I.length?ye.createElement("ol",{key:B,dir:N==="auto"?Xw():N,tabIndex:-1,ref:U,className:f,"data-sonner-toaster":!0,"data-sonner-theme":R,"data-y-position":ue,"data-x-position":ee,style:{"--front-toast-height":`${((J=G[0])==null?void 0:J.height)||0}px`,"--width":`${AM}px`,"--gap":`${T}px`,...w,...jM(m,g)},onBlur:Y=>{k.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(k.current=!1,le.current&&(le.current.focus({preventScroll:!0}),le.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||k.current||(k.current=!0,le.current=Y.relatedTarget)},onMouseEnter:()=>X(!0),onMouseMove:()=>X(!0),onMouseLeave:()=>{H||X(!1)},onDragEnd:()=>X(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||ie(!0)},onPointerUp:()=>ie(!1)},I.filter(Y=>!Y.position&&q===0||Y.position===B).map((Y,oe)=>{var ge,xe;return ye.createElement(kM,{key:Y.id,icons:j,index:oe,toast:Y,defaultRichColors:b,duration:(ge=A?.duration)!=null?ge:_,className:A?.className,descriptionClassName:A?.descriptionClassName,invert:i,visibleToasts:E,closeButton:(xe=A?.closeButton)!=null?xe:d,interacting:H,position:B,style:A?.style,unstyled:A?.unstyled,classNames:A?.classNames,cancelButtonStyle:A?.cancelButtonStyle,actionButtonStyle:A?.actionButtonStyle,closeButtonAriaLabel:A?.closeButtonAriaLabel,removeToast:O,toasts:I.filter(be=>be.position==Y.position),heights:G.filter(be=>be.position==Y.position),setHeights:K,expandByDefault:c,gap:T,expanded:ae,swipeDirections:e.swipeDirections})})):null}))}),DM=({...s})=>{const{theme:e="system"}=iM();return h.jsx(RM,{theme:e,className:"toaster group",icons:{success:h.jsx(D_,{className:"size-4"}),info:h.jsx(ZR,{className:"size-4"}),warning:h.jsx(ih,{className:"size-4"}),error:h.jsx(bD,{className:"size-4"}),loading:h.jsx(aD,{className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...s})},Fm=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#d946ef","#f43f5e","#6b7280"],MM=[{id:"cat-entertainment",name:"",color:"#f43f5e"},{id:"cat-tech",name:"",color:"#3b82f6"},{id:"cat-academic",name:"",color:"#8b5cf6"},{id:"cat-literature",name:"",color:"#10b981"},{id:"cat-business",name:"",color:"#f59e0b"},{id:"cat-other",name:"",color:"#6b7280"}];function Kw(s,e){const t=e.split(".").pop()?.toLowerCase();return s==="application/pdf"||t==="pdf"?"pdf":s.startsWith("text/")||t==="txt"||t==="md"||t==="json"||t==="xml"||t==="csv"?"txt":t==="epub"||s==="application/epub+zip"?"epub":s.startsWith("image/")||["jpg","jpeg","png","gif","webp","bmp","svg"].includes(t||"")?"image":["doc","docx","odt","rtf"].includes(t||"")||s.includes("word")||s==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"?"doc":["ppt","pptx","odp"].includes(t||"")||s.includes("powerpoint")||s==="application/vnd.openxmlformats-officedocument.presentationml.presentation"?"ppt":["zip","7z","rar","tar","gz","bz2"].includes(t||"")||s.includes("zip")||s.includes("compressed")||s==="application/x-7z-compressed"||s==="application/x-rar-compressed"?"archive":s.startsWith("audio/")||["mp3","wav","ogg","flac","aac","m4a"].includes(t||"")?"audio":s.startsWith("video/")||["mp4","avi","mkv","mov","wmv"].includes(t||"")?"video":"other"}function OM(s){switch(s){case"pdf":return"";case"txt":return"";case"epub":return"";case"image":return"";case"doc":return"";case"ppt":return"";case"archive":return"";case"audio":return"";case"video":return"";default:return""}}function PM(s){switch(s){case"pdf":return"PDF";case"txt":return"";case"epub":return"EPUB";case"image":return"";case"doc":return"";case"ppt":return"";case"archive":return"";case"audio":return"";case"video":return"";default:return""}}function LM(s){return["pdf","txt","epub","image"].includes(s)}const Jw="jian-v1.1.0",mi=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,IM=()=>{let s=localStorage.getItem("knowledge-library-device-id");return s||(s=mi(),localStorage.setItem("knowledge-library-device-id",s)),s},z_=()=>Math.random().toString(36).substring(2,8).toUpperCase(),Ag={lastSyncAt:null,syncStatus:"idle",deviceId:IM(),syncCode:z_()},Um={books:[],categories:MM,pdfAnnotations:[],projects:[],notes:[],sync:Ag},BM="KnowledgeLibraryDB",zM=2,Hr="files";async function vv(){return new Promise((s,e)=>{const t=indexedDB.open(BM,zM);t.onerror=()=>e(t.error),t.onsuccess=()=>s(t.result),t.onupgradeneeded=n=>{const i=n.target.result;i.objectStoreNames.contains(Hr)||i.createObjectStore(Hr,{keyPath:"id"})}})}async function Qw(s){const e=await vv();return new Promise((t,n)=>{const l=e.transaction([Hr],"readwrite").objectStore(Hr).put(s);l.onsuccess=()=>t(),l.onerror=()=>n(l.error)})}async function Zw(s){const e=await vv();return new Promise((t,n)=>{const l=e.transaction([Hr],"readonly").objectStore(Hr).get(s);l.onsuccess=()=>t(l.result||null),l.onerror=()=>n(l.error)})}async function $m(s){const e=await vv();return new Promise((t,n)=>{const l=e.transaction([Hr],"readwrite").objectStore(Hr).delete(s);l.onsuccess=()=>t(),l.onerror=()=>n(l.error)})}function FM(){const[s,e]=S.useState(Um),[t,n]=S.useState(!1);S.useEffect(()=>{try{const k=localStorage.getItem(Jw);if(k){const O=JSON.parse(k);e({...Um,...O,sync:{...Ag,...O.sync}})}}catch(k){console.error("Failed to load data:",k)}n(!0)},[]),S.useEffect(()=>{t&&localStorage.setItem(Jw,JSON.stringify(s))},[s,t]);const i=S.useCallback(k=>{const O={...k,id:mi(),annotations:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(B=>({...B,books:[O,...B.books]})),O},[]),a=S.useCallback((k,O)=>{e(B=>({...B,books:B.books.map(q=>q.id===k?{...q,...O,updatedAt:new Date().toISOString()}:q)}))},[]),l=S.useCallback(async k=>{const O=s.books.find(B=>B.id===k);O?.fileId&&await $m(O.fileId),e(B=>({...B,books:B.books.filter(q=>q.id!==k),pdfAnnotations:B.pdfAnnotations.filter(q=>q.bookId!==k)}))},[s.books]),c=S.useCallback(k=>s.books.find(O=>O.id===k),[s.books]),d=S.useCallback(async(k,O)=>{const B=await O.arrayBuffer(),q=mi(),J=Kw(O.type,O.name),ue={id:q,name:O.name,type:O.type,fileType:J,size:O.size,data:B,createdAt:new Date().toISOString()};return await Qw(ue),a(k,{fileId:q,fileType:J,fileName:O.name}),ue},[a]),f=S.useCallback(async k=>await Zw(k),[]),m=S.useCallback(async k=>{const O=c(k);O?.fileId&&(await $m(O.fileId),a(k,{fileId:void 0,fileType:void 0,fileName:void 0}))},[c,a]),g=S.useCallback(k=>{const O={...k,id:mi(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(B=>({...B,pdfAnnotations:[O,...B.pdfAnnotations]})),O},[]),v=S.useCallback((k,O)=>{e(B=>({...B,pdfAnnotations:B.pdfAnnotations.map(q=>q.id===k?{...q,content:O,updatedAt:new Date().toISOString()}:q)}))},[]),b=S.useCallback(k=>{e(O=>({...O,pdfAnnotations:O.pdfAnnotations.filter(B=>B.id!==k)}))},[]),_=S.useCallback(k=>s.pdfAnnotations.filter(O=>O.bookId===k),[s.pdfAnnotations]),w=S.useCallback(k=>{const O={...k,id:mi(),knowledge:[],lessons:[],files:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(B=>({...B,projects:[O,...B.projects]})),O},[]),E=S.useCallback(k=>{e(O=>({...O,projects:O.projects.filter(B=>B.id!==k)}))},[]),A=S.useCallback((k,O)=>{const B={...O,id:mi(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(q=>({...q,projects:q.projects.map(J=>J.id===k?{...J,knowledge:[B,...J.knowledge],updatedAt:new Date().toISOString()}:J)})),B},[]),N=S.useCallback((k,O)=>{const B={...O,id:mi(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(q=>({...q,projects:q.projects.map(J=>J.id===k?{...J,lessons:[B,...J.lessons],updatedAt:new Date().toISOString()}:J)})),B},[]),T=S.useCallback(async(k,O,B)=>{const q=await O.arrayBuffer(),J=mi(),ue=Kw(O.type,O.name),ee={id:J,name:O.name,type:O.type,fileType:ue,size:O.size,data:q,createdAt:new Date().toISOString()};await Qw(ee);const Y={id:J,name:O.name,type:O.type,fileType:ue,size:O.size,description:B,createdAt:new Date().toISOString()};return e(oe=>({...oe,projects:oe.projects.map(ge=>ge.id===k?{...ge,files:[Y,...ge.files],updatedAt:new Date().toISOString()}:ge)})),Y},[]),j=S.useCallback(async(k,O)=>{await $m(O),e(B=>({...B,projects:B.projects.map(q=>q.id===k?{...q,files:q.files.filter(J=>J.id!==O),updatedAt:new Date().toISOString()}:q)}))},[]),P=S.useCallback(async k=>await Zw(k),[]),L=S.useCallback(k=>{const O={...k,id:mi(),completed:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(B=>({...B,notes:[O,...B.notes]})),O},[]),M=S.useCallback((k,O)=>{e(B=>({...B,notes:B.notes.map(q=>q.id===k?{...q,...O,completedAt:O.completed?new Date().toISOString():q.completedAt,updatedAt:new Date().toISOString()}:q)}))},[]),I=S.useCallback(k=>{e(O=>({...O,notes:O.notes.filter(B=>B.id!==k)}))},[]),F=S.useCallback(k=>{e(O=>({...O,notes:O.notes.map(B=>B.id===k?{...B,completed:!B.completed,completedAt:B.completed?void 0:new Date().toISOString(),updatedAt:new Date().toISOString()}:B)}))},[]),G=S.useCallback((k,O)=>{const B={id:mi(),name:k,color:O};return e(q=>({...q,categories:[...q.categories,B]})),B},[]),K=S.useCallback(k=>{e(O=>({...O,categories:O.categories.filter(B=>B.id!==k),books:O.books.map(B=>B.categoryId===k?{...B,categoryId:"cat-other",updatedAt:new Date().toISOString()}:B)}))},[]),ae=S.useCallback(k=>s.books.filter(O=>{if(k.categoryId&&O.categoryId!==k.categoryId||k.status&&O.status!==k.status||k.type&&O.type!==k.type||k.tags?.length&&!k.tags.some(B=>O.tags.includes(B)))return!1;if(k.searchQuery){const B=k.searchQuery.toLowerCase();if(!(O.title.toLowerCase().includes(B)||O.author.toLowerCase().includes(B)||O.description?.toLowerCase().includes(B)||O.tags.some(J=>J.toLowerCase().includes(B))))return!1}return!0}),[s.books]),X=S.useCallback(()=>{const k=new Set;return s.books.forEach(O=>O.tags.forEach(B=>k.add(B))),Array.from(k).sort()},[s.books]),H=S.useCallback(()=>{const k=s.books;return{total:k.length,completed:k.filter(O=>O.status==="completed").length,reading:k.filter(O=>O.status==="reading").length,unread:k.filter(O=>O.status==="unread").length,totalAnnotations:k.reduce((O,B)=>O+B.annotations.length,0),categoryStats:s.categories.map(O=>({...O,count:k.filter(B=>B.categoryId===O.id).length})),projectCount:s.projects.length,noteCount:s.notes.length,pendingNotes:s.notes.filter(O=>!O.completed&&O.type==="todo").length}},[s.books,s.categories,s.projects,s.notes]),ie=S.useCallback((k,O)=>{try{const B={data:O,timestamp:Date.now(),deviceId:O.sync.deviceId};return localStorage.setItem(`knowledge-sync-${k}`,JSON.stringify(B)),e(q=>({...q,sync:{...q.sync,lastSyncAt:new Date().toISOString(),syncStatus:"idle"}})),!0}catch(B){return console.error("Sync to cloud failed:",B),!1}},[]),R=S.useCallback(k=>{try{const O=localStorage.getItem(`knowledge-sync-${k}`);return O?JSON.parse(O).data:null}catch(O){return console.error("Sync from cloud failed:",O),null}},[]),$=S.useCallback(k=>{e(O=>{const B=new Map;[...O.books,...k.books].forEach(Y=>{const oe=B.get(Y.id);(!oe||new Date(Y.updatedAt)>new Date(oe.updatedAt))&&B.set(Y.id,Y)});const q=new Map;[...O.categories,...k.categories].forEach(Y=>{q.has(Y.id)||q.set(Y.id,Y)});const J=new Map;[...O.pdfAnnotations,...k.pdfAnnotations].forEach(Y=>{const oe=J.get(Y.id);(!oe||new Date(Y.updatedAt)>new Date(oe.updatedAt))&&J.set(Y.id,Y)});const ue=new Map;[...O.projects,...k.projects].forEach(Y=>{const oe=ue.get(Y.id);(!oe||new Date(Y.updatedAt)>new Date(oe.updatedAt))&&ue.set(Y.id,Y)});const ee=new Map;return[...O.notes,...k.notes].forEach(Y=>{const oe=ee.get(Y.id);(!oe||new Date(Y.updatedAt)>new Date(oe.updatedAt))&&ee.set(Y.id,Y)}),{books:Array.from(B.values()),categories:Array.from(q.values()),pdfAnnotations:Array.from(J.values()),projects:Array.from(ue.values()),notes:Array.from(ee.values()),sync:{...O.sync,lastSyncAt:new Date().toISOString()}}})},[]),U=S.useCallback(()=>JSON.stringify(s,null,2),[s]),z=S.useCallback(k=>{try{const O=JSON.parse(k);return e({...Um,...O,sync:{...Ag,...O.sync}}),!0}catch{return!1}},[]),le=S.useCallback(()=>{const k=z_();return e(O=>({...O,sync:{...O.sync,syncCode:k}})),k},[]);return{books:s.books,categories:s.categories,projects:s.projects,notes:s.notes,sync:s.sync,isLoaded:t,addBook:i,updateBook:a,deleteBook:l,getBook:c,filterBooks:ae,uploadFile:d,downloadFile:f,deleteBookFile:m,addPDFAnnotation:g,updatePDFAnnotation:v,deletePDFAnnotation:b,getBookPDFAnnotations:_,addProject:w,deleteProject:E,addProjectKnowledge:A,addProjectLesson:N,addProjectFile:T,deleteProjectFile:j,downloadProjectFile:P,addNote:L,updateNote:M,deleteNote:I,toggleNoteComplete:F,addCategory:G,deleteCategory:K,getAllTags:X,getStats:H,exportData:U,importData:z,regenerateSyncCode:le,syncDataToCloud:ie,syncDataFromCloud:R,mergeData:$}}var UM=Symbol.for("react.lazy"),fh=dv[" use ".trim().toString()];function $M(s){return typeof s=="object"&&s!==null&&"then"in s}function F_(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===UM&&"_payload"in s&&$M(s._payload)}function Lh(s){const e=HM(s),t=S.forwardRef((n,i)=>{let{children:a,...l}=n;F_(a)&&typeof fh=="function"&&(a=fh(a._payload));const c=S.Children.toArray(a),d=c.find(GM);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return h.jsx(e,{...l,ref:i,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return h.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}var U_=Lh("Slot");function HM(s){const e=S.forwardRef((t,n)=>{let{children:i,...a}=t;if(F_(i)&&typeof fh=="function"&&(i=fh(i._payload)),S.isValidElement(i)){const l=WM(i),c=qM(a,i.props);return i.type!==S.Fragment&&(c.ref=n?ar(n,l):l),S.cloneElement(i,c)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var VM=Symbol("radix.slottable");function GM(s){return S.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===VM}function qM(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function WM(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}const eS=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,tS=ml,$_=(s,e)=>t=>{var n;if(e?.variants==null)return tS(s,t?.class,t?.className);const{variants:i,defaultVariants:a}=e,l=Object.keys(i).map(f=>{const m=t?.[f],g=a?.[f];if(m===null)return null;const v=eS(m)||eS(g);return i[f][v]}),c=t&&Object.entries(t).reduce((f,m)=>{let[g,v]=m;return v===void 0||(f[g]=v),f},{}),d=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((f,m)=>{let{class:g,className:v,...b}=m;return Object.entries(b).every(_=>{let[w,E]=_;return Array.isArray(E)?E.includes({...a,...c}[w]):{...a,...c}[w]===E})?[...f,g,v]:f},[]);return tS(s,l,d,t?.class,t?.className)},yv=$_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function me({className:s,variant:e="default",size:t="default",asChild:n=!1,...i}){const a=n?U_:"button";return h.jsx(a,{"data-slot":"button","data-variant":e,"data-size":t,className:Oe(yv({variant:e,size:t,className:s})),...i})}const YM=$_("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function gn({className:s,variant:e,asChild:t=!1,...n}){const i=t?U_:"span";return h.jsx(i,{"data-slot":"badge",className:Oe(YM({variant:e}),s),...n})}function XM(s,e=globalThis?.document){const t=Mn(s);S.useEffect(()=>{const n=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var KM="DismissableLayer",Eg="dismissableLayer.update",JM="dismissableLayer.pointerDownOutside",QM="dismissableLayer.focusOutside",nS,H_=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ih=S.forwardRef((s,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...d}=s,f=S.useContext(H_),[m,g]=S.useState(null),v=m?.ownerDocument??globalThis?.document,[,b]=S.useState({}),_=Je(e,M=>g(M)),w=Array.from(f.layers),[E]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),A=w.indexOf(E),N=m?w.indexOf(m):-1,T=f.layersWithOutsidePointerEventsDisabled.size>0,j=N>=A,P=tO(M=>{const I=M.target,F=[...f.branches].some(G=>G.contains(I));!j||F||(i?.(M),l?.(M),M.defaultPrevented||c?.())},v),L=nO(M=>{const I=M.target;[...f.branches].some(G=>G.contains(I))||(a?.(M),l?.(M),M.defaultPrevented||c?.())},v);return XM(M=>{N===f.layers.size-1&&(n?.(M),!M.defaultPrevented&&c&&(M.preventDefault(),c()))},v),S.useEffect(()=>{if(m)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(nS=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),sS(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=nS)}},[m,v,t,f]),S.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),sS())},[m,f]),S.useEffect(()=>{const M=()=>b({});return document.addEventListener(Eg,M),()=>document.removeEventListener(Eg,M)},[]),h.jsx(Ue.div,{...d,ref:_,style:{pointerEvents:T?j?"auto":"none":void 0,...s.style},onFocusCapture:we(s.onFocusCapture,L.onFocusCapture),onBlurCapture:we(s.onBlurCapture,L.onBlurCapture),onPointerDownCapture:we(s.onPointerDownCapture,P.onPointerDownCapture)})});Ih.displayName=KM;var ZM="DismissableLayerBranch",eO=S.forwardRef((s,e)=>{const t=S.useContext(H_),n=S.useRef(null),i=Je(e,n);return S.useEffect(()=>{const a=n.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),h.jsx(Ue.div,{...s,ref:i})});eO.displayName=ZM;function tO(s,e=globalThis?.document){const t=Mn(s),n=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const a=c=>{if(c.target&&!n.current){let d=function(){V_(JM,t,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function nO(s,e=globalThis?.document){const t=Mn(s),n=S.useRef(!1);return S.useEffect(()=>{const i=a=>{a.target&&!n.current&&V_(QM,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function sS(){const s=new CustomEvent(Eg);document.dispatchEvent(s)}function V_(s,e,t,{discrete:n}){const i=t.originalEvent.target,a=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(s,e,{once:!0}),n?J1(i,a):i.dispatchEvent(a)}var Hm="focusScope.autoFocusOnMount",Vm="focusScope.autoFocusOnUnmount",iS={bubbles:!1,cancelable:!0},sO="FocusScope",Bh=S.forwardRef((s,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...l}=s,[c,d]=S.useState(null),f=Mn(i),m=Mn(a),g=S.useRef(null),v=Je(e,w=>d(w)),b=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(n){let w=function(T){if(b.paused||!c)return;const j=T.target;c.contains(j)?g.current=j:Pr(g.current,{select:!0})},E=function(T){if(b.paused||!c)return;const j=T.relatedTarget;j!==null&&(c.contains(j)||Pr(g.current,{select:!0}))},A=function(T){if(document.activeElement===document.body)for(const P of T)P.removedNodes.length>0&&Pr(c)};document.addEventListener("focusin",w),document.addEventListener("focusout",E);const N=new MutationObserver(A);return c&&N.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",E),N.disconnect()}}},[n,c,b.paused]),S.useEffect(()=>{if(c){aS.add(b);const w=document.activeElement;if(!c.contains(w)){const A=new CustomEvent(Hm,iS);c.addEventListener(Hm,f),c.dispatchEvent(A),A.defaultPrevented||(iO(cO(G_(c)),{select:!0}),document.activeElement===w&&Pr(c))}return()=>{c.removeEventListener(Hm,f),setTimeout(()=>{const A=new CustomEvent(Vm,iS);c.addEventListener(Vm,m),c.dispatchEvent(A),A.defaultPrevented||Pr(w??document.body,{select:!0}),c.removeEventListener(Vm,m),aS.remove(b)},0)}}},[c,f,m,b]);const _=S.useCallback(w=>{if(!t&&!n||b.paused)return;const E=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,A=document.activeElement;if(E&&A){const N=w.currentTarget,[T,j]=rO(N);T&&j?!w.shiftKey&&A===j?(w.preventDefault(),t&&Pr(T,{select:!0})):w.shiftKey&&A===T&&(w.preventDefault(),t&&Pr(j,{select:!0})):A===N&&w.preventDefault()}},[t,n,b.paused]);return h.jsx(Ue.div,{tabIndex:-1,...l,ref:v,onKeyDown:_})});Bh.displayName=sO;function iO(s,{select:e=!1}={}){const t=document.activeElement;for(const n of s)if(Pr(n,{select:e}),document.activeElement!==t)return}function rO(s){const e=G_(s),t=rS(e,s),n=rS(e.reverse(),s);return[t,n]}function G_(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function rS(s,e){for(const t of s)if(!aO(t,{upTo:e}))return t}function aO(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function oO(s){return s instanceof HTMLInputElement&&"select"in s}function Pr(s,{select:e=!1}={}){if(s&&s.focus){const t=document.activeElement;s.focus({preventScroll:!0}),s!==t&&oO(s)&&e&&s.select()}}var aS=lO();function lO(){let s=[];return{add(e){const t=s[0];e!==t&&t?.pause(),s=oS(s,e),s.unshift(e)},remove(e){s=oS(s,e),s[0]?.resume()}}}function oS(s,e){const t=[...s],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function cO(s){return s.filter(e=>e.tagName!=="A")}var uO="Portal",zh=S.forwardRef((s,e)=>{const{container:t,...n}=s,[i,a]=S.useState(!1);On(()=>a(!0),[]);const l=t||i&&globalThis?.document?.body;return l?K1.createPortal(h.jsx(Ue.div,{...n,ref:e}),l):null});zh.displayName=uO;var Gm=0;function bv(){S.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??lS()),document.body.insertAdjacentElement("beforeend",s[1]??lS()),Gm++,()=>{Gm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gm--}},[])}function lS(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var bi=function(){return bi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},bi.apply(this,arguments)};function bl(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t}function dO(s,e,t,n){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(m){try{f(n.next(m))}catch(g){l(g)}}function d(m){try{f(n.throw(m))}catch(g){l(g)}}function f(m){m.done?a(m.value):i(m.value).then(c,d)}f((n=n.apply(s,e||[])).next())})}function hO(s,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return s.concat(a||Array.prototype.slice.call(e))}var rh="right-scroll-bar-position",ah="width-before-scroll-bar",fO="with-scroll-bars-hidden",pO="--removed-body-scroll-bar-size";function qm(s,e){return typeof s=="function"?s(e):s&&(s.current=e),s}function mO(s,e){var t=S.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(n){var i=t.value;i!==n&&(t.value=n,t.callback(n,i))}}}})[0];return t.callback=e,t.facade}var gO=typeof window<"u"?S.useLayoutEffect:S.useEffect,cS=new WeakMap;function vO(s,e){var t=mO(null,function(n){return s.forEach(function(i){return qm(i,n)})});return gO(function(){var n=cS.get(t);if(n){var i=new Set(n),a=new Set(s),l=t.current;i.forEach(function(c){a.has(c)||qm(c,null)}),a.forEach(function(c){i.has(c)||qm(c,l)})}cS.set(t,s)},[s]),t}function yO(s){return s}function bO(s,e){e===void 0&&(e=yO);var t=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:s},useMedium:function(a){var l=e(a,n);return t.push(l),function(){t=t.filter(function(c){return c!==l})}},assignSyncMedium:function(a){for(n=!0;t.length;){var l=t;t=[],l.forEach(a)}t={push:function(c){return a(c)},filter:function(){return t}}},assignMedium:function(a){n=!0;var l=[];if(t.length){var c=t;t=[],c.forEach(a),l=t}var d=function(){var m=l;l=[],m.forEach(a)},f=function(){return Promise.resolve().then(d)};f(),t={push:function(m){l.push(m),f()},filter:function(m){return l=l.filter(m),t}}}};return i}function xO(s){s===void 0&&(s={});var e=bO(null);return e.options=bi({async:!0,ssr:!1},s),e}var q_=function(s){var e=s.sideCar,t=bl(s,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return S.createElement(n,bi({},t))};q_.isSideCarExport=!0;function wO(s,e){return s.useMedium(e),q_}var W_=xO(),Wm=function(){},Fh=S.forwardRef(function(s,e){var t=S.useRef(null),n=S.useState({onScrollCapture:Wm,onWheelCapture:Wm,onTouchMoveCapture:Wm}),i=n[0],a=n[1],l=s.forwardProps,c=s.children,d=s.className,f=s.removeScrollBar,m=s.enabled,g=s.shards,v=s.sideCar,b=s.noRelative,_=s.noIsolation,w=s.inert,E=s.allowPinchZoom,A=s.as,N=A===void 0?"div":A,T=s.gapMode,j=bl(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=v,L=vO([t,e]),M=bi(bi({},j),i);return S.createElement(S.Fragment,null,m&&S.createElement(P,{sideCar:W_,removeScrollBar:f,shards:g,noRelative:b,noIsolation:_,inert:w,setCallbacks:a,allowPinchZoom:!!E,lockRef:t,gapMode:T}),l?S.cloneElement(S.Children.only(c),bi(bi({},M),{ref:L})):S.createElement(N,bi({},M,{className:d,ref:L}),c))});Fh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fh.classNames={fullWidth:ah,zeroRight:rh};var SO=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _O(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var e=SO();return e&&s.setAttribute("nonce",e),s}function AO(s,e){s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}function EO(s){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(s)}var CO=function(){var s=0,e=null;return{add:function(t){s==0&&(e=_O())&&(AO(e,t),EO(e)),s++},remove:function(){s--,!s&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},TO=function(){var s=CO();return function(e,t){S.useEffect(function(){return s.add(e),function(){s.remove()}},[e&&t])}},Y_=function(){var s=TO(),e=function(t){var n=t.styles,i=t.dynamic;return s(n,i),null};return e},NO={left:0,top:0,right:0,gap:0},Ym=function(s){return parseInt(s||"",10)||0},kO=function(s){var e=window.getComputedStyle(document.body),t=e[s==="padding"?"paddingLeft":"marginLeft"],n=e[s==="padding"?"paddingTop":"marginTop"],i=e[s==="padding"?"paddingRight":"marginRight"];return[Ym(t),Ym(n),Ym(i)]},jO=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return NO;var e=kO(s),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},RO=Y_(),qo="data-scroll-locked",DO=function(s,e,t,n){var i=s.left,a=s.top,l=s.right,c=s.gap;return t===void 0&&(t="margin"),`
  .`.concat(fO,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(qo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rh,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(ah,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(rh," .").concat(rh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ah," .").concat(ah,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(qo,`] {
    `).concat(pO,": ").concat(c,`px;
  }
`)},uS=function(){var s=parseInt(document.body.getAttribute(qo)||"0",10);return isFinite(s)?s:0},MO=function(){S.useEffect(function(){return document.body.setAttribute(qo,(uS()+1).toString()),function(){var s=uS()-1;s<=0?document.body.removeAttribute(qo):document.body.setAttribute(qo,s.toString())}},[])},OO=function(s){var e=s.noRelative,t=s.noImportant,n=s.gapMode,i=n===void 0?"margin":n;MO();var a=S.useMemo(function(){return jO(i)},[i]);return S.createElement(RO,{styles:DO(a,!e,i,t?"":"!important")})},Cg=!1;if(typeof window<"u")try{var Md=Object.defineProperty({},"passive",{get:function(){return Cg=!0,!0}});window.addEventListener("test",Md,Md),window.removeEventListener("test",Md,Md)}catch{Cg=!1}var Co=Cg?{passive:!1}:!1,PO=function(s){return s.tagName==="TEXTAREA"},X_=function(s,e){if(!(s instanceof Element))return!1;var t=window.getComputedStyle(s);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!PO(s)&&t[e]==="visible")},LO=function(s){return X_(s,"overflowY")},IO=function(s){return X_(s,"overflowX")},dS=function(s,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=K_(s,n);if(i){var a=J_(s,n),l=a[1],c=a[2];if(l>c)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},BO=function(s){var e=s.scrollTop,t=s.scrollHeight,n=s.clientHeight;return[e,t,n]},zO=function(s){var e=s.scrollLeft,t=s.scrollWidth,n=s.clientWidth;return[e,t,n]},K_=function(s,e){return s==="v"?LO(e):IO(e)},J_=function(s,e){return s==="v"?BO(e):zO(e)},FO=function(s,e){return s==="h"&&e==="rtl"?-1:1},UO=function(s,e,t,n,i){var a=FO(s,window.getComputedStyle(e).direction),l=a*n,c=t.target,d=e.contains(c),f=!1,m=l>0,g=0,v=0;do{if(!c)break;var b=J_(s,c),_=b[0],w=b[1],E=b[2],A=w-E-a*_;(_||A)&&K_(s,c)&&(g+=A,v+=_);var N=c.parentNode;c=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(m&&Math.abs(g)<1||!m&&Math.abs(v)<1)&&(f=!0),f},Od=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},hS=function(s){return[s.deltaX,s.deltaY]},fS=function(s){return s&&"current"in s?s.current:s},$O=function(s,e){return s[0]===e[0]&&s[1]===e[1]},HO=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},VO=0,To=[];function GO(s){var e=S.useRef([]),t=S.useRef([0,0]),n=S.useRef(),i=S.useState(VO++)[0],a=S.useState(Y_)[0],l=S.useRef(s);S.useEffect(function(){l.current=s},[s]),S.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(i));var w=hO([s.lockRef.current],(s.shards||[]).map(fS),!0).filter(Boolean);return w.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[s.inert,s.lockRef.current,s.shards]);var c=S.useCallback(function(w,E){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!l.current.allowPinchZoom;var A=Od(w),N=t.current,T="deltaX"in w?w.deltaX:N[0]-A[0],j="deltaY"in w?w.deltaY:N[1]-A[1],P,L=w.target,M=Math.abs(T)>Math.abs(j)?"h":"v";if("touches"in w&&M==="h"&&L.type==="range")return!1;var I=window.getSelection(),F=I&&I.anchorNode,G=F?F===L||F.contains(L):!1;if(G)return!1;var K=dS(M,L);if(!K)return!0;if(K?P=M:(P=M==="v"?"h":"v",K=dS(M,L)),!K)return!1;if(!n.current&&"changedTouches"in w&&(T||j)&&(n.current=P),!P)return!0;var ae=n.current||P;return UO(ae,E,w,ae==="h"?T:j)},[]),d=S.useCallback(function(w){var E=w;if(!(!To.length||To[To.length-1]!==a)){var A="deltaY"in E?hS(E):Od(E),N=e.current.filter(function(P){return P.name===E.type&&(P.target===E.target||E.target===P.shadowParent)&&$O(P.delta,A)})[0];if(N&&N.should){E.cancelable&&E.preventDefault();return}if(!N){var T=(l.current.shards||[]).map(fS).filter(Boolean).filter(function(P){return P.contains(E.target)}),j=T.length>0?c(E,T[0]):!l.current.noIsolation;j&&E.cancelable&&E.preventDefault()}}},[]),f=S.useCallback(function(w,E,A,N){var T={name:w,delta:E,target:A,should:N,shadowParent:qO(A)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(j){return j!==T})},1)},[]),m=S.useCallback(function(w){t.current=Od(w),n.current=void 0},[]),g=S.useCallback(function(w){f(w.type,hS(w),w.target,c(w,s.lockRef.current))},[]),v=S.useCallback(function(w){f(w.type,Od(w),w.target,c(w,s.lockRef.current))},[]);S.useEffect(function(){return To.push(a),s.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:v}),document.addEventListener("wheel",d,Co),document.addEventListener("touchmove",d,Co),document.addEventListener("touchstart",m,Co),function(){To=To.filter(function(w){return w!==a}),document.removeEventListener("wheel",d,Co),document.removeEventListener("touchmove",d,Co),document.removeEventListener("touchstart",m,Co)}},[]);var b=s.removeScrollBar,_=s.inert;return S.createElement(S.Fragment,null,_?S.createElement(a,{styles:HO(i)}):null,b?S.createElement(OO,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function qO(s){for(var e=null;s!==null;)s instanceof ShadowRoot&&(e=s.host,s=s.host),s=s.parentNode;return e}const WO=wO(W_,GO);var Uh=S.forwardRef(function(s,e){return S.createElement(Fh,bi({},s,{ref:e,sideCar:WO}))});Uh.classNames=Fh.classNames;var YO=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},No=new WeakMap,Pd=new WeakMap,Ld={},Xm=0,Q_=function(s){return s&&(s.host||Q_(s.parentNode))},XO=function(s,e){return e.map(function(t){if(s.contains(t))return t;var n=Q_(t);return n&&s.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},KO=function(s,e,t,n){var i=XO(e,Array.isArray(s)?s:[s]);Ld[t]||(Ld[t]=new WeakMap);var a=Ld[t],l=[],c=new Set,d=new Set(i),f=function(g){!g||c.has(g)||(c.add(g),f(g.parentNode))};i.forEach(f);var m=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(v){if(c.has(v))m(v);else try{var b=v.getAttribute(n),_=b!==null&&b!=="false",w=(No.get(v)||0)+1,E=(a.get(v)||0)+1;No.set(v,w),a.set(v,E),l.push(v),w===1&&_&&Pd.set(v,!0),E===1&&v.setAttribute(t,"true"),_||v.setAttribute(n,"true")}catch(A){console.error("aria-hidden: cannot operate on ",v,A)}})};return m(e),c.clear(),Xm++,function(){l.forEach(function(g){var v=No.get(g)-1,b=a.get(g)-1;No.set(g,v),a.set(g,b),v||(Pd.has(g)||g.removeAttribute(n),Pd.delete(g)),b||g.removeAttribute(t)}),Xm--,Xm||(No=new WeakMap,No=new WeakMap,Pd=new WeakMap,Ld={})}},xv=function(s,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),i=YO(s);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),KO(n,i,t,"aria-hidden")):function(){return null}};function JO(s){const e=QO(s),t=S.forwardRef((n,i)=>{const{children:a,...l}=n,c=S.Children.toArray(a),d=c.find(eP);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return h.jsx(e,{...l,ref:i,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return h.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}function QO(s){const e=S.forwardRef((t,n)=>{const{children:i,...a}=t;if(S.isValidElement(i)){const l=nP(i),c=tP(a,i.props);return i.type!==S.Fragment&&(c.ref=n?ar(n,l):l),S.cloneElement(i,c)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var ZO=Symbol("radix.slottable");function eP(s){return S.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===ZO}function tP(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function nP(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var $h="Dialog",[Z_,eA]=Bs($h),[sP,ii]=Z_($h),tA=s=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:i,onOpenChange:a,modal:l=!0}=s,c=S.useRef(null),d=S.useRef(null),[f,m]=$r({prop:n,defaultProp:i??!1,onChange:a,caller:$h});return h.jsx(sP,{scope:e,triggerRef:c,contentRef:d,contentId:Si(),titleId:Si(),descriptionId:Si(),open:f,onOpenChange:m,onOpenToggle:S.useCallback(()=>m(g=>!g),[m]),modal:l,children:t})};tA.displayName=$h;var nA="DialogTrigger",sA=S.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,i=ii(nA,t),a=Je(e,i.triggerRef);return h.jsx(Ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":_v(i.open),...n,ref:a,onClick:we(s.onClick,i.onOpenToggle)})});sA.displayName=nA;var wv="DialogPortal",[iP,iA]=Z_(wv,{forceMount:void 0}),rA=s=>{const{__scopeDialog:e,forceMount:t,children:n,container:i}=s,a=ii(wv,e);return h.jsx(iP,{scope:e,forceMount:t,children:S.Children.map(n,l=>h.jsx(os,{present:t||a.open,children:h.jsx(zh,{asChild:!0,container:i,children:l})}))})};rA.displayName=wv;var ph="DialogOverlay",aA=S.forwardRef((s,e)=>{const t=iA(ph,s.__scopeDialog),{forceMount:n=t.forceMount,...i}=s,a=ii(ph,s.__scopeDialog);return a.modal?h.jsx(os,{present:n||a.open,children:h.jsx(aP,{...i,ref:e})}):null});aA.displayName=ph;var rP=JO("DialogOverlay.RemoveScroll"),aP=S.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,i=ii(ph,t);return h.jsx(Uh,{as:rP,allowPinchZoom:!0,shards:[i.contentRef],children:h.jsx(Ue.div,{"data-state":_v(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Na="DialogContent",oA=S.forwardRef((s,e)=>{const t=iA(Na,s.__scopeDialog),{forceMount:n=t.forceMount,...i}=s,a=ii(Na,s.__scopeDialog);return h.jsx(os,{present:n||a.open,children:a.modal?h.jsx(oP,{...i,ref:e}):h.jsx(lP,{...i,ref:e})})});oA.displayName=Na;var oP=S.forwardRef((s,e)=>{const t=ii(Na,s.__scopeDialog),n=S.useRef(null),i=Je(e,t.contentRef,n);return S.useEffect(()=>{const a=n.current;if(a)return xv(a)},[]),h.jsx(lA,{...s,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(s.onCloseAutoFocus,a=>{a.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:we(s.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&a.preventDefault()}),onFocusOutside:we(s.onFocusOutside,a=>a.preventDefault())})}),lP=S.forwardRef((s,e)=>{const t=ii(Na,s.__scopeDialog),n=S.useRef(!1),i=S.useRef(!1);return h.jsx(lA,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{s.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||t.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{s.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=a.target;t.triggerRef.current?.contains(l)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),lA=S.forwardRef((s,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...l}=s,c=ii(Na,t),d=S.useRef(null),f=Je(e,d);return bv(),h.jsxs(h.Fragment,{children:[h.jsx(Bh,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:h.jsx(Ih,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":_v(c.open),...l,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(uP,{titleId:c.titleId}),h.jsx(hP,{contentRef:d,descriptionId:c.descriptionId})]})]})}),Sv="DialogTitle",cA=S.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,i=ii(Sv,t);return h.jsx(Ue.h2,{id:i.titleId,...n,ref:e})});cA.displayName=Sv;var uA="DialogDescription",dA=S.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,i=ii(uA,t);return h.jsx(Ue.p,{id:i.descriptionId,...n,ref:e})});dA.displayName=uA;var hA="DialogClose",fA=S.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,i=ii(hA,t);return h.jsx(Ue.button,{type:"button",...n,ref:e,onClick:we(s.onClick,()=>i.onOpenChange(!1))})});fA.displayName=hA;function _v(s){return s?"open":"closed"}var pA="DialogTitleWarning",[cP,mA]=Rk(pA,{contentName:Na,titleName:Sv,docsSlug:"dialog"}),uP=({titleId:s})=>{const e=mA(pA),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},dP="DialogDescriptionWarning",hP=({contentRef:s,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${mA(dP).contentName}}.`;return S.useEffect(()=>{const i=s.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,s,e]),null},Av=tA,gA=sA,Ev=rA,Cv=aA,Tv=oA,Nv=cA,vA=dA,Hh=fA;function fP({...s}){return h.jsx(Av,{"data-slot":"sheet",...s})}function pP({...s}){return h.jsx(gA,{"data-slot":"sheet-trigger",...s})}function mP({...s}){return h.jsx(Ev,{"data-slot":"sheet-portal",...s})}function gP({className:s,...e}){return h.jsx(Cv,{"data-slot":"sheet-overlay",className:Oe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...e})}function vP({className:s,children:e,side:t="right",...n}){return h.jsxs(mP,{children:[h.jsx(gP,{}),h.jsxs(Tv,{"data-slot":"sheet-content",className:Oe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",t==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",t==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",t==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",t==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",s),...n,children:[e,h.jsxs(Hh,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[h.jsx(Vn,{className:"size-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function yP({className:s,...e}){return h.jsx("div",{"data-slot":"sheet-header",className:Oe("flex flex-col gap-1.5 p-4",s),...e})}function bP({className:s,...e}){return h.jsx(Nv,{"data-slot":"sheet-title",className:Oe("text-foreground font-semibold",s),...e})}function zc(s,[e,t]){return Math.min(t,Math.max(e,s))}const xP=["top","right","bottom","left"],Vr=Math.min,xs=Math.max,mh=Math.round,Id=Math.floor,_i=s=>({x:s,y:s}),wP={left:"right",right:"left",bottom:"top",top:"bottom"},SP={start:"end",end:"start"};function Tg(s,e,t){return xs(s,Vr(e,t))}function nr(s,e){return typeof s=="function"?s(e):s}function sr(s){return s.split("-")[0]}function xl(s){return s.split("-")[1]}function kv(s){return s==="x"?"y":"x"}function jv(s){return s==="y"?"height":"width"}const _P=new Set(["top","bottom"]);function wi(s){return _P.has(sr(s))?"y":"x"}function Rv(s){return kv(wi(s))}function AP(s,e,t){t===void 0&&(t=!1);const n=xl(s),i=Rv(s),a=jv(i);let l=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=gh(l)),[l,gh(l)]}function EP(s){const e=gh(s);return[Ng(s),e,Ng(e)]}function Ng(s){return s.replace(/start|end/g,e=>SP[e])}const pS=["left","right"],mS=["right","left"],CP=["top","bottom"],TP=["bottom","top"];function NP(s,e,t){switch(s){case"top":case"bottom":return t?e?mS:pS:e?pS:mS;case"left":case"right":return e?CP:TP;default:return[]}}function kP(s,e,t,n){const i=xl(s);let a=NP(sr(s),t==="start",n);return i&&(a=a.map(l=>l+"-"+i),e&&(a=a.concat(a.map(Ng)))),a}function gh(s){return s.replace(/left|right|bottom|top/g,e=>wP[e])}function jP(s){return{top:0,right:0,bottom:0,left:0,...s}}function yA(s){return typeof s!="number"?jP(s):{top:s,right:s,bottom:s,left:s}}function vh(s){const{x:e,y:t,width:n,height:i}=s;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function gS(s,e,t){let{reference:n,floating:i}=s;const a=wi(e),l=Rv(e),c=jv(l),d=sr(e),f=a==="y",m=n.x+n.width/2-i.width/2,g=n.y+n.height/2-i.height/2,v=n[c]/2-i[c]/2;let b;switch(d){case"top":b={x:m,y:n.y-i.height};break;case"bottom":b={x:m,y:n.y+n.height};break;case"right":b={x:n.x+n.width,y:g};break;case"left":b={x:n.x-i.width,y:g};break;default:b={x:n.x,y:n.y}}switch(xl(e)){case"start":b[l]-=v*(t&&f?-1:1);break;case"end":b[l]+=v*(t&&f?-1:1);break}return b}const RP=async(s,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:l}=t,c=a.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:s,floating:e,strategy:i}),{x:m,y:g}=gS(f,n,d),v=n,b={},_=0;for(let w=0;w<c.length;w++){const{name:E,fn:A}=c[w],{x:N,y:T,data:j,reset:P}=await A({x:m,y:g,initialPlacement:n,placement:v,strategy:i,middlewareData:b,rects:f,platform:l,elements:{reference:s,floating:e}});m=N??m,g=T??g,b={...b,[E]:{...b[E],...j}},P&&_<=50&&(_++,typeof P=="object"&&(P.placement&&(v=P.placement),P.rects&&(f=P.rects===!0?await l.getElementRects({reference:s,floating:e,strategy:i}):P.rects),{x:m,y:g}=gS(f,v,d)),w=-1)}return{x:m,y:g,placement:v,strategy:i,middlewareData:b}};async function Fc(s,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:l,elements:c,strategy:d}=s,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:v=!1,padding:b=0}=nr(e,s),_=yA(b),E=c[v?g==="floating"?"reference":"floating":g],A=vh(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(E)))==null||t?E:E.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:f,rootBoundary:m,strategy:d})),N=g==="floating"?{x:n,y:i,width:l.floating.width,height:l.floating.height}:l.reference,T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),j=await(a.isElement==null?void 0:a.isElement(T))?await(a.getScale==null?void 0:a.getScale(T))||{x:1,y:1}:{x:1,y:1},P=vh(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:N,offsetParent:T,strategy:d}):N);return{top:(A.top-P.top+_.top)/j.y,bottom:(P.bottom-A.bottom+_.bottom)/j.y,left:(A.left-P.left+_.left)/j.x,right:(P.right-A.right+_.right)/j.x}}const DP=s=>({name:"arrow",options:s,async fn(e){const{x:t,y:n,placement:i,rects:a,platform:l,elements:c,middlewareData:d}=e,{element:f,padding:m=0}=nr(s,e)||{};if(f==null)return{};const g=yA(m),v={x:t,y:n},b=Rv(i),_=jv(b),w=await l.getDimensions(f),E=b==="y",A=E?"top":"left",N=E?"bottom":"right",T=E?"clientHeight":"clientWidth",j=a.reference[_]+a.reference[b]-v[b]-a.floating[_],P=v[b]-a.reference[b],L=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let M=L?L[T]:0;(!M||!await(l.isElement==null?void 0:l.isElement(L)))&&(M=c.floating[T]||a.floating[_]);const I=j/2-P/2,F=M/2-w[_]/2-1,G=Vr(g[A],F),K=Vr(g[N],F),ae=G,X=M-w[_]-K,H=M/2-w[_]/2+I,ie=Tg(ae,H,X),R=!d.arrow&&xl(i)!=null&&H!==ie&&a.reference[_]/2-(H<ae?G:K)-w[_]/2<0,$=R?H<ae?H-ae:H-X:0;return{[b]:v[b]+$,data:{[b]:ie,centerOffset:H-ie-$,...R&&{alignmentOffset:$}},reset:R}}}),MP=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(e){var t,n;const{placement:i,middlewareData:a,rects:l,initialPlacement:c,platform:d,elements:f}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:w=!0,...E}=nr(s,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const A=sr(i),N=wi(c),T=sr(c)===c,j=await(d.isRTL==null?void 0:d.isRTL(f.floating)),P=v||(T||!w?[gh(c)]:EP(c)),L=_!=="none";!v&&L&&P.push(...kP(c,w,_,j));const M=[c,...P],I=await Fc(e,E),F=[];let G=((n=a.flip)==null?void 0:n.overflows)||[];if(m&&F.push(I[A]),g){const H=AP(i,l,j);F.push(I[H[0]],I[H[1]])}if(G=[...G,{placement:i,overflows:F}],!F.every(H=>H<=0)){var K,ae;const H=(((K=a.flip)==null?void 0:K.index)||0)+1,ie=M[H];if(ie&&(!(g==="alignment"?N!==wi(ie):!1)||G.every(U=>wi(U.placement)===N?U.overflows[0]>0:!0)))return{data:{index:H,overflows:G},reset:{placement:ie}};let R=(ae=G.filter($=>$.overflows[0]<=0).sort(($,U)=>$.overflows[1]-U.overflows[1])[0])==null?void 0:ae.placement;if(!R)switch(b){case"bestFit":{var X;const $=(X=G.filter(U=>{if(L){const z=wi(U.placement);return z===N||z==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(z=>z>0).reduce((z,le)=>z+le,0)]).sort((U,z)=>U[1]-z[1])[0])==null?void 0:X[0];$&&(R=$);break}case"initialPlacement":R=c;break}if(i!==R)return{reset:{placement:R}}}return{}}}};function vS(s,e){return{top:s.top-e.height,right:s.right-e.width,bottom:s.bottom-e.height,left:s.left-e.width}}function yS(s){return xP.some(e=>s[e]>=0)}const OP=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...i}=nr(s,e);switch(n){case"referenceHidden":{const a=await Fc(e,{...i,elementContext:"reference"}),l=vS(a,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:yS(l)}}}case"escaped":{const a=await Fc(e,{...i,altBoundary:!0}),l=vS(a,t.floating);return{data:{escapedOffsets:l,escaped:yS(l)}}}default:return{}}}}},bA=new Set(["left","top"]);async function PP(s,e){const{placement:t,platform:n,elements:i}=s,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),l=sr(t),c=xl(t),d=wi(t)==="y",f=bA.has(l)?-1:1,m=a&&d?-1:1,g=nr(e,s);let{mainAxis:v,crossAxis:b,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return c&&typeof _=="number"&&(b=c==="end"?_*-1:_),d?{x:b*m,y:v*f}:{x:v*f,y:b*m}}const LP=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(e){var t,n;const{x:i,y:a,placement:l,middlewareData:c}=e,d=await PP(e,s);return l===((t=c.offset)==null?void 0:t.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:l}}}}},IP=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:E=>{let{x:A,y:N}=E;return{x:A,y:N}}},...d}=nr(s,e),f={x:t,y:n},m=await Fc(e,d),g=wi(sr(i)),v=kv(g);let b=f[v],_=f[g];if(a){const E=v==="y"?"top":"left",A=v==="y"?"bottom":"right",N=b+m[E],T=b-m[A];b=Tg(N,b,T)}if(l){const E=g==="y"?"top":"left",A=g==="y"?"bottom":"right",N=_+m[E],T=_-m[A];_=Tg(N,_,T)}const w=c.fn({...e,[v]:b,[g]:_});return{...w,data:{x:w.x-t,y:w.y-n,enabled:{[v]:a,[g]:l}}}}}},BP=function(s){return s===void 0&&(s={}),{options:s,fn(e){const{x:t,y:n,placement:i,rects:a,middlewareData:l}=e,{offset:c=0,mainAxis:d=!0,crossAxis:f=!0}=nr(s,e),m={x:t,y:n},g=wi(i),v=kv(g);let b=m[v],_=m[g];const w=nr(c,e),E=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(d){const T=v==="y"?"height":"width",j=a.reference[v]-a.floating[T]+E.mainAxis,P=a.reference[v]+a.reference[T]-E.mainAxis;b<j?b=j:b>P&&(b=P)}if(f){var A,N;const T=v==="y"?"width":"height",j=bA.has(sr(i)),P=a.reference[g]-a.floating[T]+(j&&((A=l.offset)==null?void 0:A[g])||0)+(j?0:E.crossAxis),L=a.reference[g]+a.reference[T]+(j?0:((N=l.offset)==null?void 0:N[g])||0)-(j?E.crossAxis:0);_<P?_=P:_>L&&(_=L)}return{[v]:b,[g]:_}}}},zP=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(e){var t,n;const{placement:i,rects:a,platform:l,elements:c}=e,{apply:d=()=>{},...f}=nr(s,e),m=await Fc(e,f),g=sr(i),v=xl(i),b=wi(i)==="y",{width:_,height:w}=a.floating;let E,A;g==="top"||g==="bottom"?(E=g,A=v===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(A=g,E=v==="end"?"top":"bottom");const N=w-m.top-m.bottom,T=_-m.left-m.right,j=Vr(w-m[E],N),P=Vr(_-m[A],T),L=!e.middlewareData.shift;let M=j,I=P;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(I=T),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(M=N),L&&!v){const G=xs(m.left,0),K=xs(m.right,0),ae=xs(m.top,0),X=xs(m.bottom,0);b?I=_-2*(G!==0||K!==0?G+K:xs(m.left,m.right)):M=w-2*(ae!==0||X!==0?ae+X:xs(m.top,m.bottom))}await d({...e,availableWidth:I,availableHeight:M});const F=await l.getDimensions(c.floating);return _!==F.width||w!==F.height?{reset:{rects:!0}}:{}}}};function Vh(){return typeof window<"u"}function wl(s){return xA(s)?(s.nodeName||"").toLowerCase():"#document"}function Ss(s){var e;return(s==null||(e=s.ownerDocument)==null?void 0:e.defaultView)||window}function Ei(s){var e;return(e=(xA(s)?s.ownerDocument:s.document)||window.document)==null?void 0:e.documentElement}function xA(s){return Vh()?s instanceof Node||s instanceof Ss(s).Node:!1}function ti(s){return Vh()?s instanceof Element||s instanceof Ss(s).Element:!1}function Ai(s){return Vh()?s instanceof HTMLElement||s instanceof Ss(s).HTMLElement:!1}function bS(s){return!Vh()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Ss(s).ShadowRoot}const FP=new Set(["inline","contents"]);function iu(s){const{overflow:e,overflowX:t,overflowY:n,display:i}=ni(s);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!FP.has(i)}const UP=new Set(["table","td","th"]);function $P(s){return UP.has(wl(s))}const HP=[":popover-open",":modal"];function Gh(s){return HP.some(e=>{try{return s.matches(e)}catch{return!1}})}const VP=["transform","translate","scale","rotate","perspective"],GP=["transform","translate","scale","rotate","perspective","filter"],qP=["paint","layout","strict","content"];function Dv(s){const e=Mv(),t=ti(s)?ni(s):s;return VP.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||GP.some(n=>(t.willChange||"").includes(n))||qP.some(n=>(t.contain||"").includes(n))}function WP(s){let e=Gr(s);for(;Ai(e)&&!rl(e);){if(Dv(e))return e;if(Gh(e))return null;e=Gr(e)}return null}function Mv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const YP=new Set(["html","body","#document"]);function rl(s){return YP.has(wl(s))}function ni(s){return Ss(s).getComputedStyle(s)}function qh(s){return ti(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Gr(s){if(wl(s)==="html")return s;const e=s.assignedSlot||s.parentNode||bS(s)&&s.host||Ei(s);return bS(e)?e.host:e}function wA(s){const e=Gr(s);return rl(e)?s.ownerDocument?s.ownerDocument.body:s.body:Ai(e)&&iu(e)?e:wA(e)}function Uc(s,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=wA(s),a=i===((n=s.ownerDocument)==null?void 0:n.body),l=Ss(i);if(a){const c=kg(l);return e.concat(l,l.visualViewport||[],iu(i)?i:[],c&&t?Uc(c):[])}return e.concat(i,Uc(i,[],t))}function kg(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function SA(s){const e=ni(s);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Ai(s),a=i?s.offsetWidth:t,l=i?s.offsetHeight:n,c=mh(t)!==a||mh(n)!==l;return c&&(t=a,n=l),{width:t,height:n,$:c}}function Ov(s){return ti(s)?s:s.contextElement}function Wo(s){const e=Ov(s);if(!Ai(e))return _i(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:a}=SA(e);let l=(a?mh(t.width):t.width)/n,c=(a?mh(t.height):t.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const XP=_i(0);function _A(s){const e=Ss(s);return!Mv()||!e.visualViewport?XP:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function KP(s,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ss(s)?!1:e}function ka(s,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=s.getBoundingClientRect(),a=Ov(s);let l=_i(1);e&&(n?ti(n)&&(l=Wo(n)):l=Wo(s));const c=KP(a,t,n)?_A(a):_i(0);let d=(i.left+c.x)/l.x,f=(i.top+c.y)/l.y,m=i.width/l.x,g=i.height/l.y;if(a){const v=Ss(a),b=n&&ti(n)?Ss(n):n;let _=v,w=kg(_);for(;w&&n&&b!==_;){const E=Wo(w),A=w.getBoundingClientRect(),N=ni(w),T=A.left+(w.clientLeft+parseFloat(N.paddingLeft))*E.x,j=A.top+(w.clientTop+parseFloat(N.paddingTop))*E.y;d*=E.x,f*=E.y,m*=E.x,g*=E.y,d+=T,f+=j,_=Ss(w),w=kg(_)}}return vh({width:m,height:g,x:d,y:f})}function Wh(s,e){const t=qh(s).scrollLeft;return e?e.left+t:ka(Ei(s)).left+t}function AA(s,e){const t=s.getBoundingClientRect(),n=t.left+e.scrollLeft-Wh(s,t),i=t.top+e.scrollTop;return{x:n,y:i}}function JP(s){let{elements:e,rect:t,offsetParent:n,strategy:i}=s;const a=i==="fixed",l=Ei(n),c=e?Gh(e.floating):!1;if(n===l||c&&a)return t;let d={scrollLeft:0,scrollTop:0},f=_i(1);const m=_i(0),g=Ai(n);if((g||!g&&!a)&&((wl(n)!=="body"||iu(l))&&(d=qh(n)),Ai(n))){const b=ka(n);f=Wo(n),m.x=b.x+n.clientLeft,m.y=b.y+n.clientTop}const v=l&&!g&&!a?AA(l,d):_i(0);return{width:t.width*f.x,height:t.height*f.y,x:t.x*f.x-d.scrollLeft*f.x+m.x+v.x,y:t.y*f.y-d.scrollTop*f.y+m.y+v.y}}function QP(s){return Array.from(s.getClientRects())}function ZP(s){const e=Ei(s),t=qh(s),n=s.ownerDocument.body,i=xs(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=xs(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let l=-t.scrollLeft+Wh(s);const c=-t.scrollTop;return ni(n).direction==="rtl"&&(l+=xs(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:l,y:c}}const xS=25;function eL(s,e){const t=Ss(s),n=Ei(s),i=t.visualViewport;let a=n.clientWidth,l=n.clientHeight,c=0,d=0;if(i){a=i.width,l=i.height;const m=Mv();(!m||m&&e==="fixed")&&(c=i.offsetLeft,d=i.offsetTop)}const f=Wh(n);if(f<=0){const m=n.ownerDocument,g=m.body,v=getComputedStyle(g),b=m.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,_=Math.abs(n.clientWidth-g.clientWidth-b);_<=xS&&(a-=_)}else f<=xS&&(a+=f);return{width:a,height:l,x:c,y:d}}const tL=new Set(["absolute","fixed"]);function nL(s,e){const t=ka(s,!0,e==="fixed"),n=t.top+s.clientTop,i=t.left+s.clientLeft,a=Ai(s)?Wo(s):_i(1),l=s.clientWidth*a.x,c=s.clientHeight*a.y,d=i*a.x,f=n*a.y;return{width:l,height:c,x:d,y:f}}function wS(s,e,t){let n;if(e==="viewport")n=eL(s,t);else if(e==="document")n=ZP(Ei(s));else if(ti(e))n=nL(e,t);else{const i=_A(s);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return vh(n)}function EA(s,e){const t=Gr(s);return t===e||!ti(t)||rl(t)?!1:ni(t).position==="fixed"||EA(t,e)}function sL(s,e){const t=e.get(s);if(t)return t;let n=Uc(s,[],!1).filter(c=>ti(c)&&wl(c)!=="body"),i=null;const a=ni(s).position==="fixed";let l=a?Gr(s):s;for(;ti(l)&&!rl(l);){const c=ni(l),d=Dv(l);!d&&c.position==="fixed"&&(i=null),(a?!d&&!i:!d&&c.position==="static"&&!!i&&tL.has(i.position)||iu(l)&&!d&&EA(s,l))?n=n.filter(m=>m!==l):i=c,l=Gr(l)}return e.set(s,n),n}function iL(s){let{element:e,boundary:t,rootBoundary:n,strategy:i}=s;const l=[...t==="clippingAncestors"?Gh(e)?[]:sL(e,this._c):[].concat(t),n],c=l[0],d=l.reduce((f,m)=>{const g=wS(e,m,i);return f.top=xs(g.top,f.top),f.right=Vr(g.right,f.right),f.bottom=Vr(g.bottom,f.bottom),f.left=xs(g.left,f.left),f},wS(e,c,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function rL(s){const{width:e,height:t}=SA(s);return{width:e,height:t}}function aL(s,e,t){const n=Ai(e),i=Ei(e),a=t==="fixed",l=ka(s,!0,a,e);let c={scrollLeft:0,scrollTop:0};const d=_i(0);function f(){d.x=Wh(i)}if(n||!n&&!a)if((wl(e)!=="body"||iu(i))&&(c=qh(e)),n){const b=ka(e,!0,a,e);d.x=b.x+e.clientLeft,d.y=b.y+e.clientTop}else i&&f();a&&!n&&i&&f();const m=i&&!n&&!a?AA(i,c):_i(0),g=l.left+c.scrollLeft-d.x-m.x,v=l.top+c.scrollTop-d.y-m.y;return{x:g,y:v,width:l.width,height:l.height}}function Km(s){return ni(s).position==="static"}function SS(s,e){if(!Ai(s)||ni(s).position==="fixed")return null;if(e)return e(s);let t=s.offsetParent;return Ei(s)===t&&(t=t.ownerDocument.body),t}function CA(s,e){const t=Ss(s);if(Gh(s))return t;if(!Ai(s)){let i=Gr(s);for(;i&&!rl(i);){if(ti(i)&&!Km(i))return i;i=Gr(i)}return t}let n=SS(s,e);for(;n&&$P(n)&&Km(n);)n=SS(n,e);return n&&rl(n)&&Km(n)&&!Dv(n)?t:n||WP(s)||t}const oL=async function(s){const e=this.getOffsetParent||CA,t=this.getDimensions,n=await t(s.floating);return{reference:aL(s.reference,await e(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function lL(s){return ni(s).direction==="rtl"}const cL={convertOffsetParentRelativeRectToViewportRelativeRect:JP,getDocumentElement:Ei,getClippingRect:iL,getOffsetParent:CA,getElementRects:oL,getClientRects:QP,getDimensions:rL,getScale:Wo,isElement:ti,isRTL:lL};function TA(s,e){return s.x===e.x&&s.y===e.y&&s.width===e.width&&s.height===e.height}function uL(s,e){let t=null,n;const i=Ei(s);function a(){var c;clearTimeout(n),(c=t)==null||c.disconnect(),t=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),a();const f=s.getBoundingClientRect(),{left:m,top:g,width:v,height:b}=f;if(c||e(),!v||!b)return;const _=Id(g),w=Id(i.clientWidth-(m+v)),E=Id(i.clientHeight-(g+b)),A=Id(m),T={rootMargin:-_+"px "+-w+"px "+-E+"px "+-A+"px",threshold:xs(0,Vr(1,d))||1};let j=!0;function P(L){const M=L[0].intersectionRatio;if(M!==d){if(!j)return l();M?l(!1,M):n=setTimeout(()=>{l(!1,1e-7)},1e3)}M===1&&!TA(f,s.getBoundingClientRect())&&l(),j=!1}try{t=new IntersectionObserver(P,{...T,root:i.ownerDocument})}catch{t=new IntersectionObserver(P,T)}t.observe(s)}return l(!0),a}function dL(s,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,f=Ov(s),m=i||a?[...f?Uc(f):[],...Uc(e)]:[];m.forEach(A=>{i&&A.addEventListener("scroll",t,{passive:!0}),a&&A.addEventListener("resize",t)});const g=f&&c?uL(f,t):null;let v=-1,b=null;l&&(b=new ResizeObserver(A=>{let[N]=A;N&&N.target===f&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var T;(T=b)==null||T.observe(e)})),t()}),f&&!d&&b.observe(f),b.observe(e));let _,w=d?ka(s):null;d&&E();function E(){const A=ka(s);w&&!TA(w,A)&&t(),w=A,_=requestAnimationFrame(E)}return t(),()=>{var A;m.forEach(N=>{i&&N.removeEventListener("scroll",t),a&&N.removeEventListener("resize",t)}),g?.(),(A=b)==null||A.disconnect(),b=null,d&&cancelAnimationFrame(_)}}const hL=LP,fL=IP,pL=MP,mL=zP,gL=OP,_S=DP,vL=BP,yL=(s,e,t)=>{const n=new Map,i={platform:cL,...t},a={...i.platform,_c:n};return RP(s,e,{...i,platform:a})};var bL=typeof document<"u",xL=function(){},oh=bL?S.useLayoutEffect:xL;function yh(s,e){if(s===e)return!0;if(typeof s!=typeof e)return!1;if(typeof s=="function"&&s.toString()===e.toString())return!0;let t,n,i;if(s&&e&&typeof s=="object"){if(Array.isArray(s)){if(t=s.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!yh(s[n],e[n]))return!1;return!0}if(i=Object.keys(s),t=i.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=t;n--!==0;){const a=i[n];if(!(a==="_owner"&&s.$$typeof)&&!yh(s[a],e[a]))return!1}return!0}return s!==s&&e!==e}function NA(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function AS(s,e){const t=NA(s);return Math.round(e*t)/t}function Jm(s){const e=S.useRef(s);return oh(()=>{e.current=s}),e}function wL(s){s===void 0&&(s={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:d,open:f}=s,[m,g]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=S.useState(n);yh(v,n)||b(n);const[_,w]=S.useState(null),[E,A]=S.useState(null),N=S.useCallback(U=>{U!==L.current&&(L.current=U,w(U))},[]),T=S.useCallback(U=>{U!==M.current&&(M.current=U,A(U))},[]),j=a||_,P=l||E,L=S.useRef(null),M=S.useRef(null),I=S.useRef(m),F=d!=null,G=Jm(d),K=Jm(i),ae=Jm(f),X=S.useCallback(()=>{if(!L.current||!M.current)return;const U={placement:e,strategy:t,middleware:v};K.current&&(U.platform=K.current),yL(L.current,M.current,U).then(z=>{const le={...z,isPositioned:ae.current!==!1};H.current&&!yh(I.current,le)&&(I.current=le,fl.flushSync(()=>{g(le)}))})},[v,e,t,K,ae]);oh(()=>{f===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,g(U=>({...U,isPositioned:!1})))},[f]);const H=S.useRef(!1);oh(()=>(H.current=!0,()=>{H.current=!1}),[]),oh(()=>{if(j&&(L.current=j),P&&(M.current=P),j&&P){if(G.current)return G.current(j,P,X);X()}},[j,P,X,G,F]);const ie=S.useMemo(()=>({reference:L,floating:M,setReference:N,setFloating:T}),[N,T]),R=S.useMemo(()=>({reference:j,floating:P}),[j,P]),$=S.useMemo(()=>{const U={position:t,left:0,top:0};if(!R.floating)return U;const z=AS(R.floating,m.x),le=AS(R.floating,m.y);return c?{...U,transform:"translate("+z+"px, "+le+"px)",...NA(R.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:le}},[t,c,R.floating,m.x,m.y]);return S.useMemo(()=>({...m,update:X,refs:ie,elements:R,floatingStyles:$}),[m,X,ie,R,$])}const SL=s=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:s,fn(t){const{element:n,padding:i}=typeof s=="function"?s(t):s;return n&&e(n)?n.current!=null?_S({element:n.current,padding:i}).fn(t):{}:n?_S({element:n,padding:i}).fn(t):{}}}},_L=(s,e)=>({...hL(s),options:[s,e]}),AL=(s,e)=>({...fL(s),options:[s,e]}),EL=(s,e)=>({...vL(s),options:[s,e]}),CL=(s,e)=>({...pL(s),options:[s,e]}),TL=(s,e)=>({...mL(s),options:[s,e]}),NL=(s,e)=>({...gL(s),options:[s,e]}),kL=(s,e)=>({...SL(s),options:[s,e]});var jL="Arrow",kA=S.forwardRef((s,e)=>{const{children:t,width:n=10,height:i=5,...a}=s;return h.jsx(Ue.svg,{...a,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?t:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});kA.displayName=jL;var RL=kA;function Pv(s){const[e,t]=S.useState(void 0);return On(()=>{if(s){t({width:s.offsetWidth,height:s.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,c;if("borderBoxSize"in a){const d=a.borderBoxSize,f=Array.isArray(d)?d[0]:d;l=f.inlineSize,c=f.blockSize}else l=s.offsetWidth,c=s.offsetHeight;t({width:l,height:c})});return n.observe(s,{box:"border-box"}),()=>n.unobserve(s)}else t(void 0)},[s]),e}var Lv="Popper",[jA,Yh]=Bs(Lv),[DL,RA]=jA(Lv),DA=s=>{const{__scopePopper:e,children:t}=s,[n,i]=S.useState(null);return h.jsx(DL,{scope:e,anchor:n,onAnchorChange:i,children:t})};DA.displayName=Lv;var MA="PopperAnchor",OA=S.forwardRef((s,e)=>{const{__scopePopper:t,virtualRef:n,...i}=s,a=RA(MA,t),l=S.useRef(null),c=Je(e,l),d=S.useRef(null);return S.useEffect(()=>{const f=d.current;d.current=n?.current||l.current,f!==d.current&&a.onAnchorChange(d.current)}),n?null:h.jsx(Ue.div,{...i,ref:c})});OA.displayName=MA;var Iv="PopperContent",[ML,OL]=jA(Iv),PA=S.forwardRef((s,e)=>{const{__scopePopper:t,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:_,...w}=s,E=RA(Iv,t),[A,N]=S.useState(null),T=Je(e,ee=>N(ee)),[j,P]=S.useState(null),L=Pv(j),M=L?.width??0,I=L?.height??0,F=n+(a!=="center"?"-"+a:""),G=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},K=Array.isArray(f)?f:[f],ae=K.length>0,X={padding:G,boundary:K.filter(LL),altBoundary:ae},{refs:H,floatingStyles:ie,placement:R,isPositioned:$,middlewareData:U}=wL({strategy:"fixed",placement:F,whileElementsMounted:(...ee)=>dL(...ee,{animationFrame:b==="always"}),elements:{reference:E.anchor},middleware:[_L({mainAxis:i+I,alignmentAxis:l}),d&&AL({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?EL():void 0,...X}),d&&CL({...X}),TL({...X,apply:({elements:ee,rects:Y,availableWidth:oe,availableHeight:ge})=>{const{width:xe,height:be}=Y.reference,Ge=ee.floating.style;Ge.setProperty("--radix-popper-available-width",`${oe}px`),Ge.setProperty("--radix-popper-available-height",`${ge}px`),Ge.setProperty("--radix-popper-anchor-width",`${xe}px`),Ge.setProperty("--radix-popper-anchor-height",`${be}px`)}}),j&&kL({element:j,padding:c}),IL({arrowWidth:M,arrowHeight:I}),v&&NL({strategy:"referenceHidden",...X})]}),[z,le]=BA(R),k=Mn(_);On(()=>{$&&k?.()},[$,k]);const O=U.arrow?.x,B=U.arrow?.y,q=U.arrow?.centerOffset!==0,[J,ue]=S.useState();return On(()=>{A&&ue(window.getComputedStyle(A).zIndex)},[A]),h.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:$?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:h.jsx(ML,{scope:t,placedSide:z,onArrowChange:P,arrowX:O,arrowY:B,shouldHideArrow:q,children:h.jsx(Ue.div,{"data-side":z,"data-align":le,...w,ref:T,style:{...w.style,animation:$?void 0:"none"}})})})});PA.displayName=Iv;var LA="PopperArrow",PL={top:"bottom",right:"left",bottom:"top",left:"right"},IA=S.forwardRef(function(e,t){const{__scopePopper:n,...i}=e,a=OL(LA,n),l=PL[a.placedSide];return h.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:h.jsx(RL,{...i,ref:t,style:{...i.style,display:"block"}})})});IA.displayName=LA;function LL(s){return s!==null}var IL=s=>({name:"transformOrigin",options:s,fn(e){const{placement:t,rects:n,middlewareData:i}=e,l=i.arrow?.centerOffset!==0,c=l?0:s.arrowWidth,d=l?0:s.arrowHeight,[f,m]=BA(t),g={start:"0%",center:"50%",end:"100%"}[m],v=(i.arrow?.x??0)+c/2,b=(i.arrow?.y??0)+d/2;let _="",w="";return f==="bottom"?(_=l?g:`${v}px`,w=`${-d}px`):f==="top"?(_=l?g:`${v}px`,w=`${n.floating.height+d}px`):f==="right"?(_=`${-d}px`,w=l?g:`${b}px`):f==="left"&&(_=`${n.floating.width+d}px`,w=l?g:`${b}px`),{data:{x:_,y:w}}}});function BA(s){const[e,t="center"]=s.split("-");return[e,t]}var zA=DA,FA=OA,UA=PA,$A=IA;function BL(s){const e=zL(s),t=S.forwardRef((n,i)=>{const{children:a,...l}=n,c=S.Children.toArray(a),d=c.find(UL);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return h.jsx(e,{...l,ref:i,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return h.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}function zL(s){const e=S.forwardRef((t,n)=>{const{children:i,...a}=t;if(S.isValidElement(i)){const l=HL(i),c=$L(a,i.props);return i.type!==S.Fragment&&(c.ref=n?ar(n,l):l),S.cloneElement(i,c)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var FL=Symbol("radix.slottable");function UL(s){return S.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===FL}function $L(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function HL(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}function Bv(s){const e=S.useRef({value:s,previous:s});return S.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}var HA=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),VL="VisuallyHidden",GL=S.forwardRef((s,e)=>h.jsx(Ue.span,{...s,ref:e,style:{...HA,...s.style}}));GL.displayName=VL;var qL=[" ","Enter","ArrowUp","ArrowDown"],WL=[" ","Enter"],ja="Select",[Xh,Kh,YL]=Mh(ja),[Sl]=Bs(ja,[YL,Yh]),Jh=Yh(),[XL,Wr]=Sl(ja),[KL,JL]=Sl(ja),VA=s=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:i,onOpenChange:a,value:l,defaultValue:c,onValueChange:d,dir:f,name:m,autoComplete:g,disabled:v,required:b,form:_}=s,w=Jh(e),[E,A]=S.useState(null),[N,T]=S.useState(null),[j,P]=S.useState(!1),L=pl(f),[M,I]=$r({prop:n,defaultProp:i??!1,onChange:a,caller:ja}),[F,G]=$r({prop:l,defaultProp:c,onChange:d,caller:ja}),K=S.useRef(null),ae=E?_||!!E.closest("form"):!0,[X,H]=S.useState(new Set),ie=Array.from(X).map(R=>R.props.value).join(";");return h.jsx(zA,{...w,children:h.jsxs(XL,{required:b,scope:e,trigger:E,onTriggerChange:A,valueNode:N,onValueNodeChange:T,valueNodeHasChildren:j,onValueNodeHasChildrenChange:P,contentId:Si(),value:F,onValueChange:G,open:M,onOpenChange:I,dir:L,triggerPointerDownPosRef:K,disabled:v,children:[h.jsx(Xh.Provider,{scope:e,children:h.jsx(KL,{scope:s.__scopeSelect,onNativeOptionAdd:S.useCallback(R=>{H($=>new Set($).add(R))},[]),onNativeOptionRemove:S.useCallback(R=>{H($=>{const U=new Set($);return U.delete(R),U})},[]),children:t})}),ae?h.jsxs(hE,{"aria-hidden":!0,required:b,tabIndex:-1,name:m,autoComplete:g,value:F,onChange:R=>G(R.target.value),disabled:v,form:_,children:[F===void 0?h.jsx("option",{value:""}):null,Array.from(X)]},ie):null]})})};VA.displayName=ja;var GA="SelectTrigger",qA=S.forwardRef((s,e)=>{const{__scopeSelect:t,disabled:n=!1,...i}=s,a=Jh(t),l=Wr(GA,t),c=l.disabled||n,d=Je(e,l.onTriggerChange),f=Kh(t),m=S.useRef("touch"),[g,v,b]=pE(w=>{const E=f().filter(T=>!T.disabled),A=E.find(T=>T.value===l.value),N=mE(E,w,A);N!==void 0&&l.onValueChange(N.value)}),_=w=>{c||(l.onOpenChange(!0),b()),w&&(l.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return h.jsx(FA,{asChild:!0,...a,children:h.jsx(Ue.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":fE(l.value)?"":void 0,...i,ref:d,onClick:we(i.onClick,w=>{w.currentTarget.focus(),m.current!=="mouse"&&_(w)}),onPointerDown:we(i.onPointerDown,w=>{m.current=w.pointerType;const E=w.target;E.hasPointerCapture(w.pointerId)&&E.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(_(w),w.preventDefault())}),onKeyDown:we(i.onKeyDown,w=>{const E=g.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&v(w.key),!(E&&w.key===" ")&&qL.includes(w.key)&&(_(),w.preventDefault())})})})});qA.displayName=GA;var WA="SelectValue",YA=S.forwardRef((s,e)=>{const{__scopeSelect:t,className:n,style:i,children:a,placeholder:l="",...c}=s,d=Wr(WA,t),{onValueNodeHasChildrenChange:f}=d,m=a!==void 0,g=Je(e,d.onValueNodeChange);return On(()=>{f(m)},[f,m]),h.jsx(Ue.span,{...c,ref:g,style:{pointerEvents:"none"},children:fE(d.value)?h.jsx(h.Fragment,{children:l}):a})});YA.displayName=WA;var QL="SelectIcon",XA=S.forwardRef((s,e)=>{const{__scopeSelect:t,children:n,...i}=s;return h.jsx(Ue.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});XA.displayName=QL;var ZL="SelectPortal",KA=s=>h.jsx(zh,{asChild:!0,...s});KA.displayName=ZL;var Ra="SelectContent",JA=S.forwardRef((s,e)=>{const t=Wr(Ra,s.__scopeSelect),[n,i]=S.useState();if(On(()=>{i(new DocumentFragment)},[]),!t.open){const a=n;return a?fl.createPortal(h.jsx(QA,{scope:s.__scopeSelect,children:h.jsx(Xh.Slot,{scope:s.__scopeSelect,children:h.jsx("div",{children:s.children})})}),a):null}return h.jsx(ZA,{...s,ref:e})});JA.displayName=Ra;var Ws=10,[QA,Yr]=Sl(Ra),eI="SelectContentImpl",tI=BL("SelectContent.RemoveScroll"),ZA=S.forwardRef((s,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:l,side:c,sideOffset:d,align:f,alignOffset:m,arrowPadding:g,collisionBoundary:v,collisionPadding:b,sticky:_,hideWhenDetached:w,avoidCollisions:E,...A}=s,N=Wr(Ra,t),[T,j]=S.useState(null),[P,L]=S.useState(null),M=Je(e,ee=>j(ee)),[I,F]=S.useState(null),[G,K]=S.useState(null),ae=Kh(t),[X,H]=S.useState(!1),ie=S.useRef(!1);S.useEffect(()=>{if(T)return xv(T)},[T]),bv();const R=S.useCallback(ee=>{const[Y,...oe]=ae().map(be=>be.ref.current),[ge]=oe.slice(-1),xe=document.activeElement;for(const be of ee)if(be===xe||(be?.scrollIntoView({block:"nearest"}),be===Y&&P&&(P.scrollTop=0),be===ge&&P&&(P.scrollTop=P.scrollHeight),be?.focus(),document.activeElement!==xe))return},[ae,P]),$=S.useCallback(()=>R([I,T]),[R,I,T]);S.useEffect(()=>{X&&$()},[X,$]);const{onOpenChange:U,triggerPointerDownPosRef:z}=N;S.useEffect(()=>{if(T){let ee={x:0,y:0};const Y=ge=>{ee={x:Math.abs(Math.round(ge.pageX)-(z.current?.x??0)),y:Math.abs(Math.round(ge.pageY)-(z.current?.y??0))}},oe=ge=>{ee.x<=10&&ee.y<=10?ge.preventDefault():T.contains(ge.target)||U(!1),document.removeEventListener("pointermove",Y),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",oe,{capture:!0})}}},[T,U,z]),S.useEffect(()=>{const ee=()=>U(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[U]);const[le,k]=pE(ee=>{const Y=ae().filter(xe=>!xe.disabled),oe=Y.find(xe=>xe.ref.current===document.activeElement),ge=mE(Y,ee,oe);ge&&setTimeout(()=>ge.ref.current.focus())}),O=S.useCallback((ee,Y,oe)=>{const ge=!ie.current&&!oe;(N.value!==void 0&&N.value===Y||ge)&&(F(ee),ge&&(ie.current=!0))},[N.value]),B=S.useCallback(()=>T?.focus(),[T]),q=S.useCallback((ee,Y,oe)=>{const ge=!ie.current&&!oe;(N.value!==void 0&&N.value===Y||ge)&&K(ee)},[N.value]),J=n==="popper"?jg:eE,ue=J===jg?{side:c,sideOffset:d,align:f,alignOffset:m,arrowPadding:g,collisionBoundary:v,collisionPadding:b,sticky:_,hideWhenDetached:w,avoidCollisions:E}:{};return h.jsx(QA,{scope:t,content:T,viewport:P,onViewportChange:L,itemRefCallback:O,selectedItem:I,onItemLeave:B,itemTextRefCallback:q,focusSelectedItem:$,selectedItemText:G,position:n,isPositioned:X,searchRef:le,children:h.jsx(Uh,{as:tI,allowPinchZoom:!0,children:h.jsx(Bh,{asChild:!0,trapped:N.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:we(i,ee=>{N.trigger?.focus({preventScroll:!0}),ee.preventDefault()}),children:h.jsx(Ih,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:h.jsx(J,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:ee=>ee.preventDefault(),...A,...ue,onPlaced:()=>H(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:we(A.onKeyDown,ee=>{const Y=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!Y&&ee.key.length===1&&k(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let ge=ae().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(ge=ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const xe=ee.target,be=ge.indexOf(xe);ge=ge.slice(be+1)}setTimeout(()=>R(ge)),ee.preventDefault()}})})})})})})});ZA.displayName=eI;var nI="SelectItemAlignedPosition",eE=S.forwardRef((s,e)=>{const{__scopeSelect:t,onPlaced:n,...i}=s,a=Wr(Ra,t),l=Yr(Ra,t),[c,d]=S.useState(null),[f,m]=S.useState(null),g=Je(e,M=>m(M)),v=Kh(t),b=S.useRef(!1),_=S.useRef(!0),{viewport:w,selectedItem:E,selectedItemText:A,focusSelectedItem:N}=l,T=S.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&f&&w&&E&&A){const M=a.trigger.getBoundingClientRect(),I=f.getBoundingClientRect(),F=a.valueNode.getBoundingClientRect(),G=A.getBoundingClientRect();if(a.dir!=="rtl"){const xe=G.left-I.left,be=F.left-xe,Ge=M.left-be,Ie=M.width+Ge,te=Math.max(Ie,I.width),Se=window.innerWidth-Ws,$e=zc(be,[Ws,Math.max(Ws,Se-te)]);c.style.minWidth=Ie+"px",c.style.left=$e+"px"}else{const xe=I.right-G.right,be=window.innerWidth-F.right-xe,Ge=window.innerWidth-M.right-be,Ie=M.width+Ge,te=Math.max(Ie,I.width),Se=window.innerWidth-Ws,$e=zc(be,[Ws,Math.max(Ws,Se-te)]);c.style.minWidth=Ie+"px",c.style.right=$e+"px"}const K=v(),ae=window.innerHeight-Ws*2,X=w.scrollHeight,H=window.getComputedStyle(f),ie=parseInt(H.borderTopWidth,10),R=parseInt(H.paddingTop,10),$=parseInt(H.borderBottomWidth,10),U=parseInt(H.paddingBottom,10),z=ie+R+X+U+$,le=Math.min(E.offsetHeight*5,z),k=window.getComputedStyle(w),O=parseInt(k.paddingTop,10),B=parseInt(k.paddingBottom,10),q=M.top+M.height/2-Ws,J=ae-q,ue=E.offsetHeight/2,ee=E.offsetTop+ue,Y=ie+R+ee,oe=z-Y;if(Y<=q){const xe=K.length>0&&E===K[K.length-1].ref.current;c.style.bottom="0px";const be=f.clientHeight-w.offsetTop-w.offsetHeight,Ge=Math.max(J,ue+(xe?B:0)+be+$),Ie=Y+Ge;c.style.height=Ie+"px"}else{const xe=K.length>0&&E===K[0].ref.current;c.style.top="0px";const Ge=Math.max(q,ie+w.offsetTop+(xe?O:0)+ue)+oe;c.style.height=Ge+"px",w.scrollTop=Y-q+w.offsetTop}c.style.margin=`${Ws}px 0`,c.style.minHeight=le+"px",c.style.maxHeight=ae+"px",n?.(),requestAnimationFrame(()=>b.current=!0)}},[v,a.trigger,a.valueNode,c,f,w,E,A,a.dir,n]);On(()=>T(),[T]);const[j,P]=S.useState();On(()=>{f&&P(window.getComputedStyle(f).zIndex)},[f]);const L=S.useCallback(M=>{M&&_.current===!0&&(T(),N?.(),_.current=!1)},[T,N]);return h.jsx(iI,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:b,onScrollButtonChange:L,children:h.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:h.jsx(Ue.div,{...i,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});eE.displayName=nI;var sI="SelectPopperPosition",jg=S.forwardRef((s,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:i=Ws,...a}=s,l=Jh(t);return h.jsx(UA,{...l,...a,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jg.displayName=sI;var[iI,zv]=Sl(Ra,{}),Rg="SelectViewport",tE=S.forwardRef((s,e)=>{const{__scopeSelect:t,nonce:n,...i}=s,a=Yr(Rg,t),l=zv(Rg,t),c=Je(e,a.onViewportChange),d=S.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),h.jsx(Xh.Slot,{scope:t,children:h.jsx(Ue.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:we(i.onScroll,f=>{const m=f.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=l;if(v?.current&&g){const b=Math.abs(d.current-m.scrollTop);if(b>0){const _=window.innerHeight-Ws*2,w=parseFloat(g.style.minHeight),E=parseFloat(g.style.height),A=Math.max(w,E);if(A<_){const N=A+b,T=Math.min(_,N),j=N-T;g.style.height=T+"px",g.style.bottom==="0px"&&(m.scrollTop=j>0?j:0,g.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});tE.displayName=Rg;var nE="SelectGroup",[rI,aI]=Sl(nE),oI=S.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,i=Si();return h.jsx(rI,{scope:t,id:i,children:h.jsx(Ue.div,{role:"group","aria-labelledby":i,...n,ref:e})})});oI.displayName=nE;var sE="SelectLabel",lI=S.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,i=aI(sE,t);return h.jsx(Ue.div,{id:i.id,...n,ref:e})});lI.displayName=sE;var bh="SelectItem",[cI,iE]=Sl(bh),rE=S.forwardRef((s,e)=>{const{__scopeSelect:t,value:n,disabled:i=!1,textValue:a,...l}=s,c=Wr(bh,t),d=Yr(bh,t),f=c.value===n,[m,g]=S.useState(a??""),[v,b]=S.useState(!1),_=Je(e,N=>d.itemRefCallback?.(N,n,i)),w=Si(),E=S.useRef("touch"),A=()=>{i||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(cI,{scope:t,value:n,disabled:i,textId:w,isSelected:f,onItemTextChange:S.useCallback(N=>{g(T=>T||(N?.textContent??"").trim())},[]),children:h.jsx(Xh.ItemSlot,{scope:t,value:n,disabled:i,textValue:m,children:h.jsx(Ue.div,{role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:_,onFocus:we(l.onFocus,()=>b(!0)),onBlur:we(l.onBlur,()=>b(!1)),onClick:we(l.onClick,()=>{E.current!=="mouse"&&A()}),onPointerUp:we(l.onPointerUp,()=>{E.current==="mouse"&&A()}),onPointerDown:we(l.onPointerDown,N=>{E.current=N.pointerType}),onPointerMove:we(l.onPointerMove,N=>{E.current=N.pointerType,i?d.onItemLeave?.():E.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:we(l.onPointerLeave,N=>{N.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:we(l.onKeyDown,N=>{d.searchRef?.current!==""&&N.key===" "||(WL.includes(N.key)&&A(),N.key===" "&&N.preventDefault())})})})})});rE.displayName=bh;var Cc="SelectItemText",aE=S.forwardRef((s,e)=>{const{__scopeSelect:t,className:n,style:i,...a}=s,l=Wr(Cc,t),c=Yr(Cc,t),d=iE(Cc,t),f=JL(Cc,t),[m,g]=S.useState(null),v=Je(e,A=>g(A),d.onItemTextChange,A=>c.itemTextRefCallback?.(A,d.value,d.disabled)),b=m?.textContent,_=S.useMemo(()=>h.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:w,onNativeOptionRemove:E}=f;return On(()=>(w(_),()=>E(_)),[w,E,_]),h.jsxs(h.Fragment,{children:[h.jsx(Ue.span,{id:d.textId,...a,ref:v}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?fl.createPortal(a.children,l.valueNode):null]})});aE.displayName=Cc;var oE="SelectItemIndicator",lE=S.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s;return iE(oE,t).isSelected?h.jsx(Ue.span,{"aria-hidden":!0,...n,ref:e}):null});lE.displayName=oE;var Dg="SelectScrollUpButton",cE=S.forwardRef((s,e)=>{const t=Yr(Dg,s.__scopeSelect),n=zv(Dg,s.__scopeSelect),[i,a]=S.useState(!1),l=Je(e,n.onScrollButtonChange);return On(()=>{if(t.viewport&&t.isPositioned){let c=function(){const f=d.scrollTop>0;a(f)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),i?h.jsx(dE,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});cE.displayName=Dg;var Mg="SelectScrollDownButton",uE=S.forwardRef((s,e)=>{const t=Yr(Mg,s.__scopeSelect),n=zv(Mg,s.__scopeSelect),[i,a]=S.useState(!1),l=Je(e,n.onScrollButtonChange);return On(()=>{if(t.viewport&&t.isPositioned){let c=function(){const f=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<f;a(m)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),i?h.jsx(dE,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});uE.displayName=Mg;var dE=S.forwardRef((s,e)=>{const{__scopeSelect:t,onAutoScroll:n,...i}=s,a=Yr("SelectScrollButton",t),l=S.useRef(null),c=Kh(t),d=S.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),On(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),h.jsx(Ue.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:we(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:we(i.onPointerMove,()=>{a.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:we(i.onPointerLeave,()=>{d()})})}),uI="SelectSeparator",dI=S.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s;return h.jsx(Ue.div,{"aria-hidden":!0,...n,ref:e})});dI.displayName=uI;var Og="SelectArrow",hI=S.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,i=Jh(t),a=Wr(Og,t),l=Yr(Og,t);return a.open&&l.position==="popper"?h.jsx($A,{...i,...n,ref:e}):null});hI.displayName=Og;var fI="SelectBubbleInput",hE=S.forwardRef(({__scopeSelect:s,value:e,...t},n)=>{const i=S.useRef(null),a=Je(n,i),l=Bv(e);return S.useEffect(()=>{const c=i.current;if(!c)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&m){const g=new Event("change",{bubbles:!0});m.call(c,e),c.dispatchEvent(g)}},[l,e]),h.jsx(Ue.select,{...t,style:{...HA,...t.style},ref:a,defaultValue:e})});hE.displayName=fI;function fE(s){return s===""||s===void 0}function pE(s){const e=Mn(s),t=S.useRef(""),n=S.useRef(0),i=S.useCallback(l=>{const c=t.current+l;e(c),(function d(f){t.current=f,window.clearTimeout(n.current),f!==""&&(n.current=window.setTimeout(()=>d(""),1e3))})(c)},[e]),a=S.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,i,a]}function mE(s,e,t){const i=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=t?s.indexOf(t):-1;let l=pI(s,Math.max(a,0));i.length===1&&(l=l.filter(f=>f!==t));const d=l.find(f=>f.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function pI(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var mI=VA,gI=qA,vI=YA,yI=XA,bI=KA,xI=JA,wI=tE,SI=rE,_I=aE,AI=lE,EI=cE,CI=uE;function Qi({...s}){return h.jsx(mI,{"data-slot":"select",...s})}function Zi({...s}){return h.jsx(vI,{"data-slot":"select-value",...s})}function er({className:s,size:e="default",children:t,...n}){return h.jsxs(gI,{"data-slot":"select-trigger","data-size":e,className:Oe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n,children:[t,h.jsx(yI,{asChild:!0,children:h.jsx(j_,{className:"size-4 opacity-50"})})]})}function tr({className:s,children:e,position:t="item-aligned",align:n="center",...i}){return h.jsx(bI,{children:h.jsxs(xI,{"data-slot":"select-content",className:Oe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,align:n,...i,children:[h.jsx(TI,{}),h.jsx(wI,{className:Oe("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),h.jsx(NI,{})]})})}function Kt({className:s,children:e,...t}){return h.jsxs(SI,{"data-slot":"select-item",className:Oe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[h.jsx("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:h.jsx(AI,{children:h.jsx(mv,{className:"size-4"})})}),h.jsx(_I,{children:e})]})}function TI({className:s,...e}){return h.jsx(EI,{"data-slot":"select-scroll-up-button",className:Oe("flex cursor-default items-center justify-center py-1",s),...e,children:h.jsx(wR,{className:"size-4"})})}function NI({className:s,...e}){return h.jsx(CI,{"data-slot":"select-scroll-down-button",className:Oe("flex cursor-default items-center justify-center py-1",s),...e,children:h.jsx(j_,{className:"size-4"})})}function Jt({className:s,...e}){return h.jsx("div",{"data-slot":"card",className:Oe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...e})}function lh({className:s,...e}){return h.jsx("div",{"data-slot":"card-header",className:Oe("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...e})}function ch({className:s,...e}){return h.jsx("div",{"data-slot":"card-title",className:Oe("leading-none font-semibold",s),...e})}function Qt({className:s,...e}){return h.jsx("div",{"data-slot":"card-content",className:Oe("px-6",s),...e})}function kI(s){const e=jI(s),t=S.forwardRef((n,i)=>{const{children:a,...l}=n,c=S.Children.toArray(a),d=c.find(DI);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return h.jsx(e,{...l,ref:i,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return h.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}function jI(s){const e=S.forwardRef((t,n)=>{const{children:i,...a}=t;if(S.isValidElement(i)){const l=OI(i),c=MI(a,i.props);return i.type!==S.Fragment&&(c.ref=n?ar(n,l):l),S.cloneElement(i,c)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var RI=Symbol("radix.slottable");function DI(s){return S.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===RI}function MI(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function OI(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var Pg=["Enter"," "],PI=["ArrowDown","PageUp","Home"],gE=["ArrowUp","PageDown","End"],LI=[...PI,...gE],II={ltr:[...Pg,"ArrowRight"],rtl:[...Pg,"ArrowLeft"]},BI={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ru="Menu",[$c,zI,FI]=Mh(ru),[Pa,vE]=Bs(ru,[FI,Yh,Oh]),Qh=Yh(),yE=Oh(),[UI,La]=Pa(ru),[$I,au]=Pa(ru),bE=s=>{const{__scopeMenu:e,open:t=!1,children:n,dir:i,onOpenChange:a,modal:l=!0}=s,c=Qh(e),[d,f]=S.useState(null),m=S.useRef(!1),g=Mn(a),v=pl(i);return S.useEffect(()=>{const b=()=>{m.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>m.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),h.jsx(zA,{...c,children:h.jsx(UI,{scope:e,open:t,onOpenChange:g,content:d,onContentChange:f,children:h.jsx($I,{scope:e,onClose:S.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:m,dir:v,modal:l,children:n})})})};bE.displayName=ru;var HI="MenuAnchor",Fv=S.forwardRef((s,e)=>{const{__scopeMenu:t,...n}=s,i=Qh(t);return h.jsx(FA,{...i,...n,ref:e})});Fv.displayName=HI;var Uv="MenuPortal",[VI,xE]=Pa(Uv,{forceMount:void 0}),wE=s=>{const{__scopeMenu:e,forceMount:t,children:n,container:i}=s,a=La(Uv,e);return h.jsx(VI,{scope:e,forceMount:t,children:h.jsx(os,{present:t||a.open,children:h.jsx(zh,{asChild:!0,container:i,children:n})})})};wE.displayName=Uv;var Is="MenuContent",[GI,$v]=Pa(Is),SE=S.forwardRef((s,e)=>{const t=xE(Is,s.__scopeMenu),{forceMount:n=t.forceMount,...i}=s,a=La(Is,s.__scopeMenu),l=au(Is,s.__scopeMenu);return h.jsx($c.Provider,{scope:s.__scopeMenu,children:h.jsx(os,{present:n||a.open,children:h.jsx($c.Slot,{scope:s.__scopeMenu,children:l.modal?h.jsx(qI,{...i,ref:e}):h.jsx(WI,{...i,ref:e})})})})}),qI=S.forwardRef((s,e)=>{const t=La(Is,s.__scopeMenu),n=S.useRef(null),i=Je(e,n);return S.useEffect(()=>{const a=n.current;if(a)return xv(a)},[]),h.jsx(Hv,{...s,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:we(s.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),WI=S.forwardRef((s,e)=>{const t=La(Is,s.__scopeMenu);return h.jsx(Hv,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),YI=kI("MenuContent.ScrollLock"),Hv=S.forwardRef((s,e)=>{const{__scopeMenu:t,loop:n=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:v,onDismiss:b,disableOutsideScroll:_,...w}=s,E=La(Is,t),A=au(Is,t),N=Qh(t),T=yE(t),j=zI(t),[P,L]=S.useState(null),M=S.useRef(null),I=Je(e,M,E.onContentChange),F=S.useRef(0),G=S.useRef(""),K=S.useRef(0),ae=S.useRef(null),X=S.useRef("right"),H=S.useRef(0),ie=_?Uh:S.Fragment,R=_?{as:YI,allowPinchZoom:!0}:void 0,$=z=>{const le=G.current+z,k=j().filter(ee=>!ee.disabled),O=document.activeElement,B=k.find(ee=>ee.ref.current===O)?.textValue,q=k.map(ee=>ee.textValue),J=a3(q,le,B),ue=k.find(ee=>ee.textValue===J)?.ref.current;(function ee(Y){G.current=Y,window.clearTimeout(F.current),Y!==""&&(F.current=window.setTimeout(()=>ee(""),1e3))})(le),ue&&setTimeout(()=>ue.focus())};S.useEffect(()=>()=>window.clearTimeout(F.current),[]),bv();const U=S.useCallback(z=>X.current===ae.current?.side&&l3(z,ae.current?.area),[]);return h.jsx(GI,{scope:t,searchRef:G,onItemEnter:S.useCallback(z=>{U(z)&&z.preventDefault()},[U]),onItemLeave:S.useCallback(z=>{U(z)||(M.current?.focus(),L(null))},[U]),onTriggerLeave:S.useCallback(z=>{U(z)&&z.preventDefault()},[U]),pointerGraceTimerRef:K,onPointerGraceIntentChange:S.useCallback(z=>{ae.current=z},[]),children:h.jsx(ie,{...R,children:h.jsx(Bh,{asChild:!0,trapped:i,onMountAutoFocus:we(a,z=>{z.preventDefault(),M.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:h.jsx(Ih,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:v,onDismiss:b,children:h.jsx(s_,{asChild:!0,...T,dir:A.dir,orientation:"vertical",loop:n,currentTabStopId:P,onCurrentTabStopIdChange:L,onEntryFocus:we(d,z=>{A.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(UA,{role:"menu","aria-orientation":"vertical","data-state":BE(E.open),"data-radix-menu-content":"",dir:A.dir,...N,...w,ref:I,style:{outline:"none",...w.style},onKeyDown:we(w.onKeyDown,z=>{const k=z.target.closest("[data-radix-menu-content]")===z.currentTarget,O=z.ctrlKey||z.altKey||z.metaKey,B=z.key.length===1;k&&(z.key==="Tab"&&z.preventDefault(),!O&&B&&$(z.key));const q=M.current;if(z.target!==q||!LI.includes(z.key))return;z.preventDefault();const ue=j().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);gE.includes(z.key)&&ue.reverse(),i3(ue)}),onBlur:we(s.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(F.current),G.current="")}),onPointerMove:we(s.onPointerMove,Hc(z=>{const le=z.target,k=H.current!==z.clientX;if(z.currentTarget.contains(le)&&k){const O=z.clientX>H.current?"right":"left";X.current=O,H.current=z.clientX}}))})})})})})})});SE.displayName=Is;var XI="MenuGroup",Vv=S.forwardRef((s,e)=>{const{__scopeMenu:t,...n}=s;return h.jsx(Ue.div,{role:"group",...n,ref:e})});Vv.displayName=XI;var KI="MenuLabel",_E=S.forwardRef((s,e)=>{const{__scopeMenu:t,...n}=s;return h.jsx(Ue.div,{...n,ref:e})});_E.displayName=KI;var xh="MenuItem",ES="menu.itemSelect",Zh=S.forwardRef((s,e)=>{const{disabled:t=!1,onSelect:n,...i}=s,a=S.useRef(null),l=au(xh,s.__scopeMenu),c=$v(xh,s.__scopeMenu),d=Je(e,a),f=S.useRef(!1),m=()=>{const g=a.current;if(!t&&g){const v=new CustomEvent(ES,{bubbles:!0,cancelable:!0});g.addEventListener(ES,b=>n?.(b),{once:!0}),J1(g,v),v.defaultPrevented?f.current=!1:l.onClose()}};return h.jsx(AE,{...i,ref:d,disabled:t,onClick:we(s.onClick,m),onPointerDown:g=>{s.onPointerDown?.(g),f.current=!0},onPointerUp:we(s.onPointerUp,g=>{f.current||g.currentTarget?.click()}),onKeyDown:we(s.onKeyDown,g=>{const v=c.searchRef.current!=="";t||v&&g.key===" "||Pg.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});Zh.displayName=xh;var AE=S.forwardRef((s,e)=>{const{__scopeMenu:t,disabled:n=!1,textValue:i,...a}=s,l=$v(xh,t),c=yE(t),d=S.useRef(null),f=Je(e,d),[m,g]=S.useState(!1),[v,b]=S.useState("");return S.useEffect(()=>{const _=d.current;_&&b((_.textContent??"").trim())},[a.children]),h.jsx($c.ItemSlot,{scope:t,disabled:n,textValue:i??v,children:h.jsx(i_,{asChild:!0,...c,focusable:!n,children:h.jsx(Ue.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:f,onPointerMove:we(s.onPointerMove,Hc(_=>{n?l.onItemLeave(_):(l.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:we(s.onPointerLeave,Hc(_=>l.onItemLeave(_))),onFocus:we(s.onFocus,()=>g(!0)),onBlur:we(s.onBlur,()=>g(!1))})})})}),JI="MenuCheckboxItem",EE=S.forwardRef((s,e)=>{const{checked:t=!1,onCheckedChange:n,...i}=s;return h.jsx(jE,{scope:s.__scopeMenu,checked:t,children:h.jsx(Zh,{role:"menuitemcheckbox","aria-checked":wh(t)?"mixed":t,...i,ref:e,"data-state":qv(t),onSelect:we(i.onSelect,()=>n?.(wh(t)?!0:!t),{checkForDefaultPrevented:!1})})})});EE.displayName=JI;var CE="MenuRadioGroup",[QI,ZI]=Pa(CE,{value:void 0,onValueChange:()=>{}}),TE=S.forwardRef((s,e)=>{const{value:t,onValueChange:n,...i}=s,a=Mn(n);return h.jsx(QI,{scope:s.__scopeMenu,value:t,onValueChange:a,children:h.jsx(Vv,{...i,ref:e})})});TE.displayName=CE;var NE="MenuRadioItem",kE=S.forwardRef((s,e)=>{const{value:t,...n}=s,i=ZI(NE,s.__scopeMenu),a=t===i.value;return h.jsx(jE,{scope:s.__scopeMenu,checked:a,children:h.jsx(Zh,{role:"menuitemradio","aria-checked":a,...n,ref:e,"data-state":qv(a),onSelect:we(n.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});kE.displayName=NE;var Gv="MenuItemIndicator",[jE,e3]=Pa(Gv,{checked:!1}),RE=S.forwardRef((s,e)=>{const{__scopeMenu:t,forceMount:n,...i}=s,a=e3(Gv,t);return h.jsx(os,{present:n||wh(a.checked)||a.checked===!0,children:h.jsx(Ue.span,{...i,ref:e,"data-state":qv(a.checked)})})});RE.displayName=Gv;var t3="MenuSeparator",DE=S.forwardRef((s,e)=>{const{__scopeMenu:t,...n}=s;return h.jsx(Ue.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});DE.displayName=t3;var n3="MenuArrow",ME=S.forwardRef((s,e)=>{const{__scopeMenu:t,...n}=s,i=Qh(t);return h.jsx($A,{...i,...n,ref:e})});ME.displayName=n3;var s3="MenuSub",[Q8,OE]=Pa(s3),Tc="MenuSubTrigger",PE=S.forwardRef((s,e)=>{const t=La(Tc,s.__scopeMenu),n=au(Tc,s.__scopeMenu),i=OE(Tc,s.__scopeMenu),a=$v(Tc,s.__scopeMenu),l=S.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=a,f={__scopeMenu:s.__scopeMenu},m=S.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return S.useEffect(()=>m,[m]),S.useEffect(()=>{const g=c.current;return()=>{window.clearTimeout(g),d(null)}},[c,d]),h.jsx(Fv,{asChild:!0,...f,children:h.jsx(AE,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":BE(t.open),...s,ref:ar(e,i.onTriggerChange),onClick:g=>{s.onClick?.(g),!(s.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:we(s.onPointerMove,Hc(g=>{a.onItemEnter(g),!g.defaultPrevented&&!s.disabled&&!t.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),m()},100))})),onPointerLeave:we(s.onPointerLeave,Hc(g=>{m();const v=t.content?.getBoundingClientRect();if(v){const b=t.content?.dataset.side,_=b==="right",w=_?-5:5,E=v[_?"left":"right"],A=v[_?"right":"left"];a.onPointerGraceIntentChange({area:[{x:g.clientX+w,y:g.clientY},{x:E,y:v.top},{x:A,y:v.top},{x:A,y:v.bottom},{x:E,y:v.bottom}],side:b}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(g),g.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:we(s.onKeyDown,g=>{const v=a.searchRef.current!=="";s.disabled||v&&g.key===" "||II[n.dir].includes(g.key)&&(t.onOpenChange(!0),t.content?.focus(),g.preventDefault())})})})});PE.displayName=Tc;var LE="MenuSubContent",IE=S.forwardRef((s,e)=>{const t=xE(Is,s.__scopeMenu),{forceMount:n=t.forceMount,...i}=s,a=La(Is,s.__scopeMenu),l=au(Is,s.__scopeMenu),c=OE(LE,s.__scopeMenu),d=S.useRef(null),f=Je(e,d);return h.jsx($c.Provider,{scope:s.__scopeMenu,children:h.jsx(os,{present:n||a.open,children:h.jsx($c.Slot,{scope:s.__scopeMenu,children:h.jsx(Hv,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:f,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{l.isUsingKeyboardRef.current&&d.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:we(s.onFocusOutside,m=>{m.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:we(s.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:we(s.onKeyDown,m=>{const g=m.currentTarget.contains(m.target),v=BI[l.dir].includes(m.key);g&&v&&(a.onOpenChange(!1),c.trigger?.focus(),m.preventDefault())})})})})})});IE.displayName=LE;function BE(s){return s?"open":"closed"}function wh(s){return s==="indeterminate"}function qv(s){return wh(s)?"indeterminate":s?"checked":"unchecked"}function i3(s){const e=document.activeElement;for(const t of s)if(t===e||(t.focus(),document.activeElement!==e))return}function r3(s,e){return s.map((t,n)=>s[(e+n)%s.length])}function a3(s,e,t){const i=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=t?s.indexOf(t):-1;let l=r3(s,Math.max(a,0));i.length===1&&(l=l.filter(f=>f!==t));const d=l.find(f=>f.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function o3(s,e){const{x:t,y:n}=s;let i=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const c=e[a],d=e[l],f=c.x,m=c.y,g=d.x,v=d.y;m>n!=v>n&&t<(g-f)*(n-m)/(v-m)+f&&(i=!i)}return i}function l3(s,e){if(!e)return!1;const t={x:s.clientX,y:s.clientY};return o3(t,e)}function Hc(s){return e=>e.pointerType==="mouse"?s(e):void 0}var c3=bE,u3=Fv,d3=wE,h3=SE,f3=Vv,p3=_E,m3=Zh,g3=EE,v3=TE,y3=kE,b3=RE,x3=DE,w3=ME,S3=PE,_3=IE,ef="DropdownMenu",[A3]=Bs(ef,[vE]),Gn=vE(),[E3,zE]=A3(ef),FE=s=>{const{__scopeDropdownMenu:e,children:t,dir:n,open:i,defaultOpen:a,onOpenChange:l,modal:c=!0}=s,d=Gn(e),f=S.useRef(null),[m,g]=$r({prop:i,defaultProp:a??!1,onChange:l,caller:ef});return h.jsx(E3,{scope:e,triggerId:Si(),triggerRef:f,contentId:Si(),open:m,onOpenChange:g,onOpenToggle:S.useCallback(()=>g(v=>!v),[g]),modal:c,children:h.jsx(c3,{...d,open:m,onOpenChange:g,dir:n,modal:c,children:t})})};FE.displayName=ef;var UE="DropdownMenuTrigger",$E=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,disabled:n=!1,...i}=s,a=zE(UE,t),l=Gn(t);return h.jsx(u3,{asChild:!0,...l,children:h.jsx(Ue.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:ar(e,a.triggerRef),onPointerDown:we(s.onPointerDown,c=>{!n&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:we(s.onKeyDown,c=>{n||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});$E.displayName=UE;var C3="DropdownMenuPortal",HE=s=>{const{__scopeDropdownMenu:e,...t}=s,n=Gn(e);return h.jsx(d3,{...n,...t})};HE.displayName=C3;var VE="DropdownMenuContent",GE=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=zE(VE,t),a=Gn(t),l=S.useRef(!1);return h.jsx(h3,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...n,ref:e,onCloseAutoFocus:we(s.onCloseAutoFocus,c=>{l.current||i.triggerRef.current?.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:we(s.onInteractOutside,c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,m=d.button===2||f;(!i.modal||m)&&(l.current=!0)}),style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GE.displayName=VE;var T3="DropdownMenuGroup",N3=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(f3,{...i,...n,ref:e})});N3.displayName=T3;var k3="DropdownMenuLabel",j3=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(p3,{...i,...n,ref:e})});j3.displayName=k3;var R3="DropdownMenuItem",qE=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(m3,{...i,...n,ref:e})});qE.displayName=R3;var D3="DropdownMenuCheckboxItem",M3=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(g3,{...i,...n,ref:e})});M3.displayName=D3;var O3="DropdownMenuRadioGroup",P3=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(v3,{...i,...n,ref:e})});P3.displayName=O3;var L3="DropdownMenuRadioItem",I3=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(y3,{...i,...n,ref:e})});I3.displayName=L3;var B3="DropdownMenuItemIndicator",z3=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(b3,{...i,...n,ref:e})});z3.displayName=B3;var F3="DropdownMenuSeparator",U3=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(x3,{...i,...n,ref:e})});U3.displayName=F3;var $3="DropdownMenuArrow",H3=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(w3,{...i,...n,ref:e})});H3.displayName=$3;var V3="DropdownMenuSubTrigger",G3=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(S3,{...i,...n,ref:e})});G3.displayName=V3;var q3="DropdownMenuSubContent",W3=S.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=Gn(t);return h.jsx(_3,{...i,...n,ref:e,style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});W3.displayName=q3;var Y3=FE,X3=$E,K3=HE,J3=GE,Q3=qE;function al({...s}){return h.jsx(Y3,{"data-slot":"dropdown-menu",...s})}function ol({...s}){return h.jsx(X3,{"data-slot":"dropdown-menu-trigger",...s})}function ll({className:s,sideOffset:e=4,...t}){return h.jsx(K3,{children:h.jsx(J3,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Oe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...t})})}function as({className:s,inset:e,variant:t="default",...n}){return h.jsx(Q3,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:Oe("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n})}const Z3={unread:"",reading:"",completed:""},e4={unread:"bg-slate-100 text-slate-700",reading:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700"},t4={book:"",paper:"",article:"",other:""};function n4({book:s,category:e,onClick:t,onEdit:n,onDelete:i}){return h.jsx(Jt,{className:"cursor-pointer hover:shadow-md transition-shadow overflow-hidden",onClick:t,children:h.jsx(Qt,{className:"p-4",children:h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:"flex-shrink-0",children:s.coverUrl?h.jsx("img",{src:s.coverUrl,alt:s.title,className:"w-20 h-28 object-cover rounded-md bg-muted"}):h.jsxs("div",{className:"w-20 h-28 rounded-md bg-muted flex items-center justify-center relative",children:[h.jsx(yl,{className:"h-8 w-8 text-muted-foreground"}),s.fileId&&h.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 bg-primary rounded-full flex items-center justify-center",children:h.jsx(zr,{className:"h-3 w-3 text-primary-foreground"})})]})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-start justify-between gap-2",children:[h.jsx("h3",{className:"font-semibold text-sm line-clamp-2 flex-1",children:s.title}),h.jsxs(al,{children:[h.jsx(ol,{asChild:!0,children:h.jsx(me,{variant:"ghost",size:"icon",className:"h-7 w-7 -mr-2 -mt-1 flex-shrink-0",onClick:a=>a.stopPropagation(),children:h.jsx(il,{className:"h-4 w-4"})})}),h.jsxs(ll,{align:"end",children:[h.jsx(as,{onClick:a=>{a.stopPropagation(),n?.()},children:""}),h.jsx(as,{className:"text-destructive",onClick:a=>{a.stopPropagation(),i?.()},children:""})]})]})]}),h.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.author}),h.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[h.jsx(gn,{variant:"secondary",className:`text-xs ${e4[s.status]}`,children:Z3[s.status]}),h.jsx(gn,{variant:"outline",className:"text-xs",children:t4[s.type]}),e&&h.jsx(gn,{variant:"outline",className:"text-xs",style:{borderColor:e.color,color:e.color},children:e.name})]}),h.jsxs("div",{className:"flex items-center justify-between mt-3",children:[h.jsx("div",{className:"flex items-center gap-1",children:s.rating?h.jsxs(h.Fragment,{children:[h.jsx(B_,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),h.jsx("span",{className:"text-xs",children:s.rating})]}):h.jsx("span",{className:"text-xs text-muted-foreground",children:""})}),h.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.fileId&&h.jsx(zr,{className:"h-3 w-3 text-primary"}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Go,{className:"h-3 w-3"}),h.jsx("span",{className:"text-xs",children:s.annotations.length})]})]})]}),s.currentPage&&s.totalPages&&h.jsxs("div",{className:"mt-2",children:[h.jsx("div",{className:"h-1.5 w-full bg-muted rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${s.currentPage/s.totalPages*100}%`}})}),h.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[s.currentPage," / ",s.totalPages," "]})]})]})]})})})}const CS=[{value:"unread",label:""},{value:"reading",label:""},{value:"completed",label:""}],TS=[{value:"book",label:""},{value:"paper",label:""},{value:"article",label:""},{value:"other",label:""}];function s4({books:s,categories:e,filter:t,onFilterChange:n,onBookClick:i,allTags:a,onEditBook:l,onDeleteBook:c}){const[d,f]=S.useState(!1),m=b=>e.find(_=>_.id===b),g=t.categoryId||t.status||t.type||t.tags&&t.tags.length>0,v=()=>{n({categoryId:void 0,status:void 0,type:void 0,tags:void 0})};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(fP,{open:d,onOpenChange:f,children:[h.jsx(pP,{asChild:!0,children:h.jsxs(me,{variant:"outline",size:"sm",className:"gap-2",children:[h.jsx(ID,{className:"h-4 w-4"}),"",g&&h.jsx(gn,{variant:"secondary",className:"ml-1",children:"!"})]})}),h.jsxs(vP,{side:"right",className:"w-full sm:max-w-md",children:[h.jsx(yP,{children:h.jsx(bP,{children:""})}),h.jsxs("div",{className:"space-y-6 py-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:""}),h.jsxs(Qi,{value:t.categoryId||"all",onValueChange:b=>n({categoryId:b==="all"?void 0:b}),children:[h.jsx(er,{children:h.jsx(Zi,{placeholder:""})}),h.jsxs(tr,{children:[h.jsx(Kt,{value:"all",children:""}),e.map(b=>h.jsx(Kt,{value:b.id,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b.color}}),b.name]})},b.id))]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:""}),h.jsxs(Qi,{value:t.status||"all",onValueChange:b=>n({status:b==="all"?void 0:b}),children:[h.jsx(er,{children:h.jsx(Zi,{placeholder:""})}),h.jsxs(tr,{children:[h.jsx(Kt,{value:"all",children:""}),CS.map(b=>h.jsx(Kt,{value:b.value,children:b.label},b.value))]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:""}),h.jsxs(Qi,{value:t.type||"all",onValueChange:b=>n({type:b==="all"?void 0:b}),children:[h.jsx(er,{children:h.jsx(Zi,{placeholder:""})}),h.jsxs(tr,{children:[h.jsx(Kt,{value:"all",children:""}),TS.map(b=>h.jsx(Kt,{value:b.value,children:b.label},b.value))]})]})]}),a.length>0&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:""}),h.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(b=>h.jsx(gn,{variant:t.tags?.includes(b)?"default":"outline",className:"cursor-pointer",onClick:()=>{const _=t.tags||[],w=_.includes(b)?_.filter(E=>E!==b):[..._,b];n({tags:w.length>0?w:void 0})},children:b},b))})]}),g&&h.jsx(me,{variant:"outline",className:"w-full",onClick:v,children:""})]})]})]}),t.categoryId&&h.jsxs(gn,{variant:"secondary",className:"gap-1",children:[m(t.categoryId)?.name,h.jsx(Vn,{className:"h-3 w-3 cursor-pointer",onClick:()=>n({categoryId:void 0})})]}),t.status&&h.jsxs(gn,{variant:"secondary",className:"gap-1",children:[CS.find(b=>b.value===t.status)?.label,h.jsx(Vn,{className:"h-3 w-3 cursor-pointer",onClick:()=>n({status:void 0})})]}),t.type&&h.jsxs(gn,{variant:"secondary",className:"gap-1",children:[TS.find(b=>b.value===t.type)?.label,h.jsx(Vn,{className:"h-3 w-3 cursor-pointer",onClick:()=>n({type:void 0})})]})]}),h.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",s.length," "]}),s.length>0?h.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:s.map(b=>h.jsx(n4,{book:b,category:m(b.categoryId),onClick:()=>i(b),onEdit:()=>l?.(b),onDelete:()=>c?.(b.id)},b.id))}):h.jsxs("div",{className:"text-center py-12",children:[h.jsx("p",{className:"text-muted-foreground",children:""}),g&&h.jsx(me,{variant:"link",onClick:v,children:""})]})]})}function ei({className:s,...e}){return h.jsx("textarea",{"data-slot":"textarea",className:Oe("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...e})}function pt({className:s,type:e,...t}){return h.jsx("input",{type:e,"data-slot":"input",className:Oe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...t})}var i4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],r4=i4.reduce((s,e)=>{const t=Lh(`Primitive.${e}`),n=S.forwardRef((i,a)=>{const{asChild:l,...c}=i,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(d,{...c,ref:a})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{}),a4="Label",WE=S.forwardRef((s,e)=>h.jsx(r4.label,{...s,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(s.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));WE.displayName=a4;var o4=WE;function Be({className:s,...e}){return h.jsx(o4,{"data-slot":"label",className:Oe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...e})}function vn({...s}){return h.jsx(Av,{"data-slot":"dialog",...s})}function l4({...s}){return h.jsx(Ev,{"data-slot":"dialog-portal",...s})}function c4({className:s,...e}){return h.jsx(Cv,{"data-slot":"dialog-overlay",className:Oe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...e})}function yn({className:s,children:e,showCloseButton:t=!0,...n}){return h.jsxs(l4,{"data-slot":"dialog-portal",children:[h.jsx(c4,{}),h.jsxs(Tv,{"data-slot":"dialog-content",className:Oe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",s),...n,children:[e,t&&h.jsxs(Hh,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[h.jsx(Vn,{}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function bn({className:s,...e}){return h.jsx("div",{"data-slot":"dialog-header",className:Oe("flex flex-col gap-2 text-center sm:text-left",s),...e})}function Qs({className:s,...e}){return h.jsx("div",{"data-slot":"dialog-footer",className:Oe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...e})}function xn({className:s,...e}){return h.jsx(Nv,{"data-slot":"dialog-title",className:Oe("text-lg leading-none font-semibold",s),...e})}function YE({className:s,...e}){return h.jsx(vA,{"data-slot":"dialog-description",className:Oe("text-muted-foreground text-sm",s),...e})}const u4={unread:"",reading:"",completed:""};function d4({book:s,categories:e,onBack:t,onUpdate:n,onDelete:i,onAddAnnotation:a,onUpdateAnnotation:l,onDeleteAnnotation:c,onUploadFile:d,onDeleteFile:f,onReadPDF:m,onReadText:g,hasFile:v,onUploadCover:b}){const[_,w]=S.useState(!1),[E,A]=S.useState(!1),[N,T]=S.useState(""),[j,P]=S.useState(""),[L,M]=S.useState(null),[I,F]=S.useState(""),[G,K]=S.useState({title:s.title,author:s.author,description:s.description||"",totalPages:s.totalPages?.toString()||"",currentPage:s.currentPage?.toString()||"",rating:s.rating?.toString()||""}),ae=S.useRef(null),X=S.useRef(null),H=e.find(J=>J.id===s.categoryId),ie=async J=>{const ue=J.target.files?.[0];if(ue&&b){if(!ue.type.startsWith("image/")){Ae.error("");return}await b(s.id,ue),Ae.success("")}},R=()=>{n(s.id,{coverUrl:void 0}),Ae.success("")},$=()=>{if(!G.title.trim()){Ae.error("");return}n(s.id,{title:G.title.trim(),author:G.author.trim(),description:G.description.trim()||void 0,totalPages:G.totalPages?parseInt(G.totalPages):void 0,currentPage:G.currentPage?parseInt(G.currentPage):void 0,rating:G.rating?parseInt(G.rating):void 0}),w(!1),Ae.success("")},U=()=>{i(s.id)},z=()=>{if(!N.trim()){Ae.error("");return}a(s.id,N.trim(),j?parseInt(j):void 0),T(""),P(""),Ae.success("")},le=()=>{if(!L||!I.trim()){Ae.error("");return}l(s.id,L.id,I.trim()),M(null),F(""),Ae.success("")},k=J=>{c(s.id,J)},O=J=>{const ue=J.target.files?.[0];ue&&d&&d(s.id,ue)},B=async()=>{if(f)try{await f(s.id),Ae.success("")}catch{Ae.error("")}},q=s.totalPages&&s.currentPage?Math.round(s.currentPage/s.totalPages*100):0;return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(me,{variant:"ghost",size:"icon",onClick:t,children:h.jsx(wg,{className:"h-5 w-5"})}),h.jsx("h1",{className:"text-lg font-semibold flex-1 truncate",children:s.title}),h.jsxs(al,{children:[h.jsx(ol,{asChild:!0,children:h.jsx(me,{variant:"ghost",size:"icon",children:h.jsx(il,{className:"h-5 w-5"})})}),h.jsxs(ll,{align:"end",children:[h.jsxs(as,{onClick:()=>w(!0),children:[h.jsx(Dc,{className:"h-4 w-4 mr-2"}),""]}),h.jsxs(as,{className:"text-destructive",onClick:()=>A(!0),children:[h.jsx(Zs,{className:"h-4 w-4 mr-2"}),""]})]})]})]}),h.jsx(Jt,{children:h.jsxs(Qt,{className:"p-4",children:[h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{className:"flex-shrink-0 relative group",children:[s.coverUrl?h.jsxs(h.Fragment,{children:[h.jsx("img",{src:s.coverUrl,alt:s.title,className:"w-28 h-40 object-cover rounded-lg bg-muted"}),h.jsxs("div",{className:"absolute inset-0 bg-black/50 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[h.jsx(me,{variant:"ghost",size:"icon",className:"text-white hover:text-white hover:bg-white/20",onClick:()=>X.current?.click(),children:h.jsx(Bc,{className:"h-4 w-4"})}),h.jsx(me,{variant:"ghost",size:"icon",className:"text-white hover:text-white hover:bg-white/20",onClick:R,children:h.jsx(Vn,{className:"h-4 w-4"})})]})]}):h.jsxs("div",{className:"w-28 h-40 rounded-lg bg-gradient-to-br from-muted to-muted/50 flex flex-col items-center justify-center cursor-pointer hover:from-muted/80 hover:to-muted/30 transition-colors border-2 border-dashed border-muted-foreground/30",onClick:()=>X.current?.click(),children:[h.jsx(JR,{className:"h-10 w-10 text-muted-foreground/50 mb-2"}),h.jsx("span",{className:"text-xs text-muted-foreground/70",children:""})]}),h.jsx("input",{ref:X,type:"file",accept:"image/*",className:"hidden",onChange:ie})]}),h.jsxs("div",{className:"flex-1 space-y-2",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"font-semibold text-lg",children:s.title}),h.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[h.jsx(GD,{className:"h-3 w-3"}),s.author]})]}),H&&h.jsx(gn,{variant:"outline",style:{borderColor:H.color,color:H.color},children:H.name}),h.jsxs(Qi,{value:s.status,onValueChange:J=>{n(s.id,{status:J,completedAt:J==="completed"?new Date().toISOString():void 0}),Ae.success("")},children:[h.jsx(er,{className:"w-32 h-8",children:h.jsx(Zi,{})}),h.jsx(tr,{children:Object.entries(u4).map(([J,ue])=>h.jsx(Kt,{value:J,children:ue},J))})]}),h.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(J=>h.jsx("button",{onClick:()=>n(s.id,{rating:J}),className:"p-0.5",children:h.jsx(B_,{className:`h-5 w-5 ${(s.rating||0)>=J?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`})},J))})]})]}),h.jsxs("div",{className:"mt-4 pt-4 border-t",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm font-medium",children:""}),v?h.jsxs("div",{className:"flex gap-2",children:[s.fileType==="txt"&&g&&h.jsxs(me,{size:"sm",variant:"outline",onClick:g,children:[h.jsx(Bw,{className:"h-4 w-4 mr-1"}),""]}),s.fileType&&s.fileType!=="txt"&&LM(s.fileType)&&m&&h.jsxs(me,{size:"sm",variant:"outline",onClick:m,children:[h.jsx(Bw,{className:"h-4 w-4 mr-1"}),""]}),f&&h.jsxs(me,{size:"sm",variant:"outline",className:"text-destructive",onClick:B,children:[h.jsx(Zs,{className:"h-4 w-4 mr-1"}),""]})]}):h.jsxs(me,{size:"sm",variant:"outline",onClick:()=>ae.current?.click(),children:[h.jsx(Bc,{className:"h-4 w-4 mr-1"}),""]})]}),h.jsx("input",{ref:ae,type:"file",className:"hidden",onChange:O}),v&&h.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[h.jsx("span",{className:"text-lg",children:s.fileType?OM(s.fileType):""}),h.jsx("span",{children:s.fileName||""}),s.fileType&&h.jsx(gn,{variant:"secondary",className:"text-xs",children:PM(s.fileType)})]})]}),s.totalPages&&h.jsxs("div",{className:"mt-4 pt-4 border-t",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-sm",children:""}),h.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.currentPage||0," / ",s.totalPages,"  (",q,"%)"]})]}),h.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${q}%`}})}),h.jsxs("div",{className:"flex gap-2 mt-3",children:[h.jsx(pt,{type:"number",placeholder:"",value:s.currentPage||"",onChange:J=>n(s.id,{currentPage:J.target.value?parseInt(J.target.value):void 0}),className:"w-28"}),h.jsx(me,{variant:"outline",size:"sm",onClick:()=>n(s.id,{currentPage:s.totalPages,status:"completed",completedAt:new Date().toISOString()}),children:""})]})]}),s.description&&h.jsx("div",{className:"mt-4 pt-4 border-t",children:h.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:s.description})}),s.tags.length>0&&h.jsx("div",{className:"mt-4 pt-4 border-t",children:h.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map(J=>h.jsx(gn,{variant:"secondary",children:J},J))})}),h.jsxs("div",{className:"mt-4 pt-4 border-t flex items-center gap-4 text-xs text-muted-foreground",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(nl,{className:"h-3 w-3"})," ",new Date(s.createdAt).toLocaleDateString()]}),s.completedAt&&h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(nl,{className:"h-3 w-3"})," ",new Date(s.completedAt).toLocaleDateString()]})]})]})}),h.jsxs(Jt,{children:[h.jsx(lh,{children:h.jsxs(ch,{className:"text-lg flex items-center gap-2",children:[h.jsx(Go,{className:"h-5 w-5"})," (",s.annotations.length,")"]})}),h.jsxs(Qt,{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(ei,{placeholder:"...",value:N,onChange:J=>T(J.target.value),rows:3}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(pt,{type:"number",placeholder:"",value:j,onChange:J=>P(J.target.value),className:"w-32"}),h.jsxs(me,{onClick:z,disabled:!N.trim(),className:"gap-2",children:[h.jsx(Ji,{className:"h-4 w-4"}),""]})]})]}),s.annotations.length>0?h.jsx("div",{className:"space-y-3",children:s.annotations.map(J=>h.jsx("div",{className:"p-3 bg-muted rounded-lg",children:h.jsxs("div",{className:"flex items-start justify-between gap-2",children:[h.jsx("div",{className:"flex-1",children:L?.id===J.id?h.jsxs("div",{className:"space-y-2",children:[h.jsx(ei,{value:I,onChange:ue=>F(ue.target.value),rows:3}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(me,{size:"sm",onClick:le,children:""}),h.jsx(me,{size:"sm",variant:"outline",onClick:()=>{M(null),F("")},children:""})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"text-sm whitespace-pre-wrap",children:J.content}),J.page&&h.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",J.page," "]}),h.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(J.createdAt).toLocaleString()})]})}),L?.id!==J.id&&h.jsxs(al,{children:[h.jsx(ol,{asChild:!0,children:h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8",children:h.jsx(il,{className:"h-4 w-4"})})}),h.jsxs(ll,{align:"end",children:[h.jsxs(as,{onClick:()=>{M(J),F(J.content)},children:[h.jsx(Dc,{className:"h-4 w-4 mr-2"}),""]}),h.jsxs(as,{className:"text-destructive",onClick:()=>k(J.id),children:[h.jsx(Zs,{className:"h-4 w-4 mr-2"}),""]})]})]})]})},J.id))}):h.jsx("p",{className:"text-center text-muted-foreground py-4",children:""})]})]}),h.jsx(vn,{open:_,onOpenChange:w,children:h.jsxs(yn,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[h.jsx(bn,{children:h.jsx(xn,{children:""})}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs(Be,{children:[" ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx(pt,{value:G.title,onChange:J=>K({...G,title:J.target.value}),placeholder:""})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:G.author,onChange:J=>K({...G,author:J.target.value}),placeholder:""})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(ei,{value:G.description,onChange:J=>K({...G,description:J.target.value}),rows:3,placeholder:""})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{type:"number",value:G.totalPages,onChange:J=>K({...G,totalPages:J.target.value}),placeholder:""})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{type:"number",value:G.currentPage,onChange:J=>K({...G,currentPage:J.target.value}),placeholder:""})]})]})]}),h.jsxs(Qs,{children:[h.jsx(me,{variant:"outline",onClick:()=>w(!1),children:""}),h.jsx(me,{onClick:$,children:""})]})]})}),h.jsx(vn,{open:E,onOpenChange:A,children:h.jsxs(yn,{children:[h.jsxs(bn,{children:[h.jsx(xn,{children:""}),h.jsxs(YE,{children:["",s.title,"PDF"]})]}),h.jsxs(Qs,{children:[h.jsx(me,{variant:"outline",onClick:()=>A(!1),children:""}),h.jsx(me,{variant:"destructive",onClick:U,children:""})]})]})})]})}const h4=[{value:"book",label:"",icon:h.jsx(yl,{className:"h-4 w-4"})},{value:"paper",label:"",icon:h.jsx(zr,{className:"h-4 w-4"})},{value:"article",label:"",icon:h.jsx(vD,{className:"h-4 w-4"})},{value:"other",label:"",icon:h.jsx(P_,{className:"h-4 w-4"})}];function f4({open:s,onOpenChange:e,categories:t,onAdd:n,allTags:i}){const[a,l]=S.useState({title:"",author:"",description:"",type:"book",categoryId:t[0]?.id||"",status:"unread",totalPages:"",tags:[],newTag:""}),c=()=>{if(!a.title.trim()||!a.author.trim()){Ae.error("");return}n({title:a.title.trim(),author:a.author.trim(),description:a.description.trim()||void 0,type:a.type,categoryId:a.categoryId,status:a.status,totalPages:a.totalPages?parseInt(a.totalPages):void 0,tags:a.tags,rating:void 0,coverUrl:void 0,currentPage:void 0,completedAt:void 0}),Ae.success(""),d(),e(!1)},d=()=>{l({title:"",author:"",description:"",type:"book",categoryId:t[0]?.id||"",status:"unread",totalPages:"",tags:[],newTag:""})},f=()=>{a.newTag.trim()&&!a.tags.includes(a.newTag.trim())&&l({...a,tags:[...a.tags,a.newTag.trim()],newTag:""})},m=v=>{l({...a,tags:a.tags.filter(b=>b!==v)})},g=v=>{a.tags.includes(v)||l({...a,tags:[...a.tags,v]})};return h.jsx(vn,{open:s,onOpenChange:e,children:h.jsxs(yn,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[h.jsxs(bn,{children:[h.jsx(xn,{children:"/"}),h.jsx(YE,{children:""})]}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx("div",{className:"grid grid-cols-4 gap-2",children:h4.map(v=>h.jsxs("button",{onClick:()=>l({...a,type:v.value}),className:`flex flex-col items-center gap-1 p-3 rounded-lg border transition-colors ${a.type===v.value?"border-primary bg-primary/5":"border-border hover:bg-accent"}`,children:[v.icon,h.jsx("span",{className:"text-xs",children:v.label})]},v.value))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(Be,{children:["/ ",h.jsx("span",{className:"text-destructive",children:"*"})]}),h.jsx(pt,{placeholder:"",value:a.title,onChange:v=>l({...a,title:v.target.value})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(Be,{children:[" ",h.jsx("span",{className:"text-destructive",children:"*"})]}),h.jsx(pt,{placeholder:"",value:a.author,onChange:v=>l({...a,author:v.target.value})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsxs(Qi,{value:a.categoryId,onValueChange:v=>l({...a,categoryId:v}),children:[h.jsx(er,{children:h.jsx(Zi,{placeholder:""})}),h.jsx(tr,{children:t.map(v=>h.jsx(Kt,{value:v.id,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:v.color}}),v.name]})},v.id))})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsxs(Qi,{value:a.status,onValueChange:v=>l({...a,status:v}),children:[h.jsx(er,{children:h.jsx(Zi,{})}),h.jsxs(tr,{children:[h.jsx(Kt,{value:"unread",children:""}),h.jsx(Kt,{value:"reading",children:""}),h.jsx(Kt,{value:"completed",children:""})]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{type:"number",placeholder:"",value:a.totalPages,onChange:v=>l({...a,totalPages:v.target.value})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(ei,{placeholder:"",value:a.description,onChange:v=>l({...a,description:v.target.value}),rows:3})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(pt,{placeholder:"",value:a.newTag,onChange:v=>l({...a,newTag:v.target.value}),onKeyDown:v=>{v.key==="Enter"&&(v.preventDefault(),f())}}),h.jsx(me,{type:"button",onClick:f,variant:"outline",children:""})]}),i.length>0&&h.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[h.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:":"}),i.map(v=>h.jsx(gn,{variant:a.tags.includes(v)?"default":"outline",className:"cursor-pointer text-xs",onClick:()=>g(v),children:v},v))]}),a.tags.length>0&&h.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.tags.map(v=>h.jsxs(gn,{variant:"secondary",className:"gap-1",children:[v,h.jsx("button",{onClick:()=>m(v),className:"ml-1 hover:text-destructive",children:""})]},v))})]})]}),h.jsxs(Qs,{children:[h.jsx(me,{variant:"outline",onClick:()=>e(!1),children:""}),h.jsx(me,{onClick:c,children:""})]})]})})}function p4(s,e=[]){let t=[];function n(a,l){const c=S.createContext(l);c.displayName=a+"Context";const d=t.length;t=[...t,l];const f=g=>{const{scope:v,children:b,..._}=g,w=v?.[s]?.[d]||c,E=S.useMemo(()=>_,Object.values(_));return h.jsx(w.Provider,{value:E,children:b})};f.displayName=a+"Provider";function m(g,v){const b=v?.[s]?.[d]||c,_=S.useContext(b);if(_)return _;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${a}\``)}return[f,m]}const i=()=>{const a=t.map(l=>S.createContext(l));return function(c){const d=c?.[s]||a;return S.useMemo(()=>({[`__scope${s}`]:{...c,[s]:d}}),[c,d])}};return i.scopeName=s,[n,m4(i,...e)]}function m4(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const n=s.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=n.reduce((c,{useScope:d,scopeName:f})=>{const g=d(a)[`__scope${f}`];return{...c,...g}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var g4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],XE=g4.reduce((s,e)=>{const t=Lh(`Primitive.${e}`),n=S.forwardRef((i,a)=>{const{asChild:l,...c}=i,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(d,{...c,ref:a})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{}),Wv="Progress",Yv=100,[v4]=p4(Wv),[y4,b4]=v4(Wv),KE=S.forwardRef((s,e)=>{const{__scopeProgress:t,value:n=null,max:i,getValueLabel:a=x4,...l}=s;(i||i===0)&&!NS(i)&&console.error(w4(`${i}`,"Progress"));const c=NS(i)?i:Yv;n!==null&&!kS(n,c)&&console.error(S4(`${n}`,"Progress"));const d=kS(n,c)?n:null,f=Sh(d)?a(d,c):void 0;return h.jsx(y4,{scope:t,value:d,max:c,children:h.jsx(XE.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Sh(d)?d:void 0,"aria-valuetext":f,role:"progressbar","data-state":ZE(d,c),"data-value":d??void 0,"data-max":c,...l,ref:e})})});KE.displayName=Wv;var JE="ProgressIndicator",QE=S.forwardRef((s,e)=>{const{__scopeProgress:t,...n}=s,i=b4(JE,t);return h.jsx(XE.div,{"data-state":ZE(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:e})});QE.displayName=JE;function x4(s,e){return`${Math.round(s/e*100)}%`}function ZE(s,e){return s==null?"indeterminate":s===e?"complete":"loading"}function Sh(s){return typeof s=="number"}function NS(s){return Sh(s)&&!isNaN(s)&&s>0}function kS(s,e){return Sh(s)&&!isNaN(s)&&s<=e&&s>=0}function w4(s,e){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Yv}\`.`}function S4(s,e){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Yv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var _4=KE,A4=QE;function E4({className:s,value:e,...t}){return h.jsx(_4,{"data-slot":"progress",className:Oe("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...t,children:h.jsx(A4,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function C4({stats:s}){const e=s.total>0?Math.round(s.completed/s.total*100):0;return h.jsxs("div",{className:"space-y-4",children:[h.jsx("h2",{className:"text-lg font-semibold",children:""}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(Jt,{children:h.jsx(Qt,{className:"p-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:h.jsx(yl,{className:"h-5 w-5 text-primary"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-2xl font-bold",children:s.total}),h.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})}),h.jsx(Jt,{children:h.jsx(Qt,{className:"p-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:h.jsx(R_,{className:"h-5 w-5 text-green-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-2xl font-bold",children:s.completed}),h.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})}),h.jsx(Jt,{children:h.jsx(Qt,{className:"p-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:h.jsx(ER,{className:"h-5 w-5 text-blue-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-2xl font-bold",children:s.reading}),h.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})}),h.jsx(Jt,{children:h.jsx(Qt,{className:"p-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:h.jsx(Go,{className:"h-5 w-5 text-purple-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-2xl font-bold",children:s.totalAnnotations}),h.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsx(Jt,{children:h.jsxs(Qt,{className:"p-4 text-center",children:[h.jsx(O_,{className:"h-5 w-5 mx-auto text-orange-500 mb-2"}),h.jsx("p",{className:"text-xl font-bold",children:s.projectCount}),h.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}),h.jsx(Jt,{children:h.jsxs(Qt,{className:"p-4 text-center",children:[h.jsx(TR,{className:"h-5 w-5 mx-auto text-yellow-500 mb-2"}),h.jsx("p",{className:"text-xl font-bold",children:s.pendingNotes}),h.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}),h.jsx(Jt,{children:h.jsxs(Qt,{className:"p-4 text-center",children:[h.jsx(hR,{className:"h-5 w-5 mx-auto text-cyan-500 mb-2"}),h.jsx("p",{className:"text-xl font-bold",children:s.noteCount}),h.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})]}),h.jsxs(Jt,{children:[h.jsx(lh,{children:h.jsx(ch,{className:"text-sm font-medium",children:""})}),h.jsx(Qt,{children:h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsxs("span",{children:[e,"%"]}),h.jsxs("span",{className:"text-muted-foreground",children:[s.completed," / ",s.total]})]}),h.jsx(E4,{value:e,className:"h-2"})]})})]}),h.jsxs(Jt,{children:[h.jsx(lh,{children:h.jsx(ch,{className:"text-sm font-medium",children:""})}),h.jsx(Qt,{children:h.jsxs("div",{className:"space-y-3",children:[s.categoryStats.filter(t=>t.count>0).sort((t,n)=>n.count-t.count).map(t=>h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),h.jsx("span",{className:"text-sm flex-1",children:t.name}),h.jsx("span",{className:"text-sm font-medium",children:t.count})]},t.id)),s.categoryStats.filter(t=>t.count>0).length===0&&h.jsx("p",{className:"text-sm text-muted-foreground text-center py-2",children:""})]})})]}),h.jsxs(Jt,{children:[h.jsx(lh,{children:h.jsx(ch,{className:"text-sm font-medium",children:""})}),h.jsx(Qt,{children:h.jsxs("div",{className:"space-y-3",children:[s.typeStats?[{key:"book",label:"",count:s.typeStats.book},{key:"paper",label:"",count:s.typeStats.paper},{key:"article",label:"",count:s.typeStats.article},{key:"other",label:"",count:s.typeStats.other}].filter(t=>t.count>0).map(t=>h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-sm flex-1",children:t.label}),h.jsx("span",{className:"text-sm font-medium",children:t.count})]},t.key)):null,(!s.typeStats||s.total===0)&&h.jsx("p",{className:"text-sm text-muted-foreground text-center py-2",children:""})]})})]})]})}var T4=Symbol("radix.slottable");function N4(s){const e=({children:t})=>h.jsx(h.Fragment,{children:t});return e.displayName=`${s}.Slottable`,e.__radixId=T4,e}var eC="AlertDialog",[k4]=Bs(eC,[eA]),or=eA(),tC=s=>{const{__scopeAlertDialog:e,...t}=s,n=or(e);return h.jsx(Av,{...n,...t,modal:!0})};tC.displayName=eC;var j4="AlertDialogTrigger",R4=S.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,i=or(t);return h.jsx(gA,{...i,...n,ref:e})});R4.displayName=j4;var D4="AlertDialogPortal",nC=s=>{const{__scopeAlertDialog:e,...t}=s,n=or(e);return h.jsx(Ev,{...n,...t})};nC.displayName=D4;var M4="AlertDialogOverlay",sC=S.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,i=or(t);return h.jsx(Cv,{...i,...n,ref:e})});sC.displayName=M4;var Yo="AlertDialogContent",[O4,P4]=k4(Yo),L4=N4("AlertDialogContent"),iC=S.forwardRef((s,e)=>{const{__scopeAlertDialog:t,children:n,...i}=s,a=or(t),l=S.useRef(null),c=Je(e,l),d=S.useRef(null);return h.jsx(cP,{contentName:Yo,titleName:rC,docsSlug:"alert-dialog",children:h.jsx(O4,{scope:t,cancelRef:d,children:h.jsxs(Tv,{role:"alertdialog",...a,...i,ref:c,onOpenAutoFocus:we(i.onOpenAutoFocus,f=>{f.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[h.jsx(L4,{children:n}),h.jsx(B4,{contentRef:l})]})})})});iC.displayName=Yo;var rC="AlertDialogTitle",aC=S.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,i=or(t);return h.jsx(Nv,{...i,...n,ref:e})});aC.displayName=rC;var oC="AlertDialogDescription",lC=S.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,i=or(t);return h.jsx(vA,{...i,...n,ref:e})});lC.displayName=oC;var I4="AlertDialogAction",cC=S.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,i=or(t);return h.jsx(Hh,{...i,...n,ref:e})});cC.displayName=I4;var uC="AlertDialogCancel",dC=S.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,{cancelRef:i}=P4(uC,t),a=or(t),l=Je(e,i);return h.jsx(Hh,{...a,...n,ref:l})});dC.displayName=uC;var B4=({contentRef:s})=>{const e=`\`${Yo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Yo}\` by passing a \`${oC}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Yo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return S.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,s]),null},z4=tC,F4=nC,U4=sC,$4=iC,H4=cC,V4=dC,G4=aC,q4=lC;function W4({...s}){return h.jsx(z4,{"data-slot":"alert-dialog",...s})}function Y4({...s}){return h.jsx(F4,{"data-slot":"alert-dialog-portal",...s})}function X4({className:s,...e}){return h.jsx(U4,{"data-slot":"alert-dialog-overlay",className:Oe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...e})}function K4({className:s,...e}){return h.jsxs(Y4,{children:[h.jsx(X4,{}),h.jsx($4,{"data-slot":"alert-dialog-content",className:Oe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...e})]})}function J4({className:s,...e}){return h.jsx("div",{"data-slot":"alert-dialog-header",className:Oe("flex flex-col gap-2 text-center sm:text-left",s),...e})}function Q4({className:s,...e}){return h.jsx("div",{"data-slot":"alert-dialog-footer",className:Oe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...e})}function Z4({className:s,...e}){return h.jsx(G4,{"data-slot":"alert-dialog-title",className:Oe("text-lg font-semibold",s),...e})}function eB({className:s,...e}){return h.jsx(q4,{"data-slot":"alert-dialog-description",className:Oe("text-muted-foreground text-sm",s),...e})}function tB({className:s,...e}){return h.jsx(H4,{className:Oe(yv(),s),...e})}function nB({className:s,...e}){return h.jsx(V4,{className:Oe(yv({variant:"outline"}),s),...e})}function sB({categories:s,onAddCategory:e,onDeleteCategory:t}){const[n,i]=S.useState(!1),[a,l]=S.useState(!1),[c,d]=S.useState(null),[f,m]=S.useState(""),[g,v]=S.useState(Fm[0]),b=()=>{if(!f.trim()){Ae.error("");return}e(f.trim(),g),m(""),v(Fm[0]),i(!1),Ae.success("")},_=()=>{c&&(t(c.id),l(!1),d(null),Ae.success(""))};return h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-sm font-medium",children:""}),h.jsxs(me,{size:"sm",variant:"outline",onClick:()=>i(!0),children:[h.jsx(Ji,{className:"h-4 w-4 mr-1"}),""]})]}),h.jsx("div",{className:"space-y-2",children:s.map(w=>h.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:w.color}}),h.jsx("span",{className:"text-sm",children:w.name})]}),!["cat-entertainment","cat-tech","cat-academic","cat-literature","cat-business","cat-other"].includes(w.id)&&h.jsx(me,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-destructive",onClick:()=>{d(w),l(!0)},children:h.jsx(Vn,{className:"h-4 w-4"})})]},w.id))}),h.jsx(vn,{open:n,onOpenChange:i,children:h.jsxs(yn,{children:[h.jsx(bn,{children:h.jsx(xn,{children:""})}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:f,onChange:w=>m(w.target.value),placeholder:""})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx("div",{className:"flex flex-wrap gap-2",children:Fm.map(w=>h.jsx("button",{onClick:()=>v(w),className:`w-8 h-8 rounded-full transition-all ${g===w?"ring-2 ring-offset-2 ring-primary scale-110":""}`,style:{backgroundColor:w}},w))})]})]}),h.jsxs(Qs,{children:[h.jsx(me,{variant:"outline",onClick:()=>i(!1),children:""}),h.jsx(me,{onClick:b,children:""})]})]})}),h.jsx(W4,{open:a,onOpenChange:l,children:h.jsxs(K4,{children:[h.jsxs(J4,{children:[h.jsx(Z4,{children:""}),h.jsxs(eB,{children:['"',c?.name,'"""']})]}),h.jsxs(Q4,{children:[h.jsx(nB,{onClick:()=>d(null),children:""}),h.jsx(tB,{onClick:_,className:"bg-destructive",children:""})]})]})})]})}function iB({value:s,onChange:e,placeholder:t="..."}){return h.jsxs("div",{className:"relative",children:[h.jsx(I_,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),h.jsx(pt,{value:s,onChange:n=>e(n.target.value),placeholder:t,className:"pl-10 pr-10"}),s&&h.jsx(me,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>e(""),children:h.jsx(Vn,{className:"h-4 w-4"})})]})}const $n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Lg=[.001,0,0,.001,0,0],Qm=1.35,vs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},xi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Vc="pdfjs_internal_editor_",Xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},at={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},hC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},jn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Mc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Yt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Lo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ou={ERRORS:0,WARNINGS:1,INFOS:5},cl={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Bd={moveTo:0,lineTo:1,curveTo:2,closePath:3},fC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let tf=ou.WARNINGS;function rB(s){Number.isInteger(s)&&(tf=s)}function aB(){return tf}function nf(s){tf>=ou.INFOS&&console.info(`Info: ${s}`)}function Ke(s){tf>=ou.WARNINGS&&console.warn(`Warning: ${s}`)}function At(s){throw new Error(s)}function lt(s,e){s||At(e)}function oB(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Xv(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"&&(t.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),t.tryConvertEncoding))try{s=hB(s)}catch{}const n=e?URL.parse(s,e):URL.parse(s);return oB(n)?n:null}function Kv(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&Xv(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function et(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Ia=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class jS extends Ia{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Zm extends Ia{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class _h extends Ia{constructor(e){super(e,"InvalidPDFException")}}class Gc extends Ia{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class lB extends Ia{constructor(e){super(e,"FormatError")}}class ir extends Ia{constructor(e){super(e,"AbortException")}}function pC(s){(typeof s!="object"||s?.length===void 0)&&At("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),l=s.subarray(i,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function lu(s){typeof s!="string"&&At("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function cB(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function uB(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function dB(){try{return new Function(""),!0}catch{return!1}}class wn{static get isLittleEndian(){return et(this,"isLittleEndian",uB())}static get isEvalSupported(){return et(this,"isEvalSupported",dB())}static get isOffscreenCanvasSupported(){return et(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return et(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return et(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return et(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const eg=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class Te{static makeHexColor(e,t,n){return`#${eg[e]}${eg[t]}${eg[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const i=e[n],a=e[n+1];e[n]=i*t[0]+a*t[2]+t[4],e[n+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const i=t[0],a=t[1],l=t[2],c=t[3],d=t[4],f=t[5];for(let m=0;m<6;m+=2){const g=e[n+m],v=e[n+m+1];e[n+m]=g*i+v*l+d,e[n+m+1]=g*a+v*c+f}}static applyInverseTransform(e,t){const n=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,n){const i=t[0],a=t[1],l=t[2],c=t[3],d=t[4],f=t[5],m=e[0],g=e[1],v=e[2],b=e[3];let _=i*m+d,w=_,E=i*v+d,A=E,N=c*g+f,T=N,j=c*b+f,P=j;if(a!==0||l!==0){const L=a*m,M=a*v,I=l*g,F=l*b;_+=I,A+=I,E+=F,w+=F,N+=L,P+=L,j+=M,T+=M}n[0]=Math.min(n[0],_,E,w,A),n[1]=Math.min(n[1],N,j,T,P),n[2]=Math.max(n[2],_,E,w,A),n[3]=Math.max(n[3],N,j,T,P)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],a=e[2],l=e[3],c=n**2+i**2,d=n*a+i*l,f=a**2+l**2,m=(c+f)/2,g=Math.sqrt(m**2-(c*f-d**2));t[0]=Math.sqrt(m+g||1),t[1]=Math.sqrt(m-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>l?null:[n,a,i,l]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,a){a[0]=Math.min(a[0],e,n),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,n),a[3]=Math.max(a[3],t,i)}static#e(e,t,n,i,a,l,c,d,f,m){if(f<=0||f>=1)return;const g=1-f,v=f*f,b=v*f,_=g*(g*(g*e+3*f*t)+3*v*n)+b*i,w=g*(g*(g*a+3*f*l)+3*v*c)+b*d;m[0]=Math.min(m[0],_),m[1]=Math.min(m[1],w),m[2]=Math.max(m[2],_),m[3]=Math.max(m[3],w)}static#t(e,t,n,i,a,l,c,d,f,m,g,v){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&this.#e(e,t,n,i,a,l,c,d,-g/m,v);return}const b=m**2-4*g*f;if(b<0)return;const _=Math.sqrt(b),w=2*f;this.#e(e,t,n,i,a,l,c,d,(-m+_)/w,v),this.#e(e,t,n,i,a,l,c,d,(-m-_)/w,v)}static bezierBoundingBox(e,t,n,i,a,l,c,d,f){f[0]=Math.min(f[0],e,c),f[1]=Math.min(f[1],t,d),f[2]=Math.max(f[2],e,c),f[3]=Math.max(f[3],t,d),this.#t(e,n,a,c,t,i,l,d,3*(-e+3*(n-a)+c),6*(e-2*n+a),3*(n-e),f),this.#t(e,n,a,c,t,i,l,d,3*(-t+3*(i-l)+d),6*(t-2*i+l),3*(i-t),f)}}function hB(s){return decodeURIComponent(escape(s))}let tg=null,RS=null;function mC(s){return tg||(tg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,RS=new Map([["","t"]])),s.replaceAll(tg,(e,t,n)=>t?t.normalize("NFKC"):RS.get(n))}function Jv(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),pC(s)}const Qv="pdfjs_internal_id_";function fB(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,i,...a]=t;if(!s(n)&&!Number.isInteger(n)||!e(i))return!1;const l=a.length;let c=!0;switch(i.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const d of a)if(!(typeof d=="number"||c&&d===null))return!1;return!0}function Bn(s,e,t){return Math.min(Math.max(s,e),t)}function gC(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(pC(s))}function pB(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):lu(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});class qc{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(a){if(!a)return;let l=null;const c=a.name;if(c==="#text")l=a.value;else if(qc.shouldBuildText(c))a?.attributes?.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&t.push({str:l}),!!a.children)for(const d of a.children)i(d)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class Zv{static setupStorage(e,t,n,i,a){const l=i.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),a==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",c=>{i.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),a==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const d=c.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;i.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:a}){const{attributes:l}=t,c=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${i}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&e.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!c||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,f)}c&&a.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",l=document.createElement(i.name);i.attributes&&this.setAttributes({html:l,element:i,intent:a,linkService:n});const c=a!=="richText",d=e.div;if(d.append(l),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=g}c&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);l.append(g),c&&qc.shouldBuildText(i.name)&&f.push(g)}return{textDivs:f}}const m=[[i,-1,l]];for(;m.length>0;){const[g,v,b]=m.at(-1);if(v+1===g.children.length){m.pop();continue}const _=g.children[++m.at(-1)[1]];if(_===null)continue;const{name:w}=_;if(w==="#text"){const A=document.createTextNode(_.value);f.push(A),b.append(A);continue}const E=_?.attributes?.xmlns?document.createElementNS(_.attributes.xmlns,w):document.createElement(w);if(b.append(E),_.attributes&&this.setAttributes({html:E,element:_,storage:t,intent:a,linkService:n}),_.children?.length>0)m.push([_,-1,E]);else if(_.value){const A=document.createTextNode(_.value);c&&qc.shouldBuildText(w)&&f.push(A),E.append(A)}}for(const g of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Yi="http://www.w3.org/2000/svg";class Da{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function _l(s,e="text"){if(Nc(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class cu{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:a=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=l,n*=t;const d=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let m,g,v,b;switch(i%=360,i<0&&(i+=360),i){case 180:m=-1,g=0,v=0,b=1;break;case 90:m=0,g=1,v=1,b=0;break;case 270:m=0,g=-1,v=-1,b=0;break;case 0:m=1,g=0,v=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(v=-v,b=-b);let _,w,E,A;m===0?(_=Math.abs(f-e[1])*n+a,w=Math.abs(d-e[0])*n+l,E=(e[3]-e[1])*n,A=(e[2]-e[0])*n):(_=Math.abs(d-e[0])*n+a,w=Math.abs(f-e[1])*n+l,E=(e[2]-e[0])*n,A=(e[3]-e[1])*n),this.transform=[m*n,g*n,v*n,b*n,_-m*n*d-v*n*f,w-g*n*d-b*n*f],this.width=E,this.height=A}get rawDims(){const e=this.viewBox;return et(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new cu({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const n=[e,t];return Te.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Te.applyTransform(t,this.transform);const n=[e[2],e[3]];return Te.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Te.applyInverseTransform(n,this.transform),n}}class sf extends Ia{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function uu(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function rf(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function vC(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function yC(s,e="document.pdf"){if(typeof s!="string")return e;if(uu(s))return Ke('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const i=c=>{try{let d=decodeURIComponent(c);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:c):d}catch{return c}},a=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(a.test(l))return i(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const f of c)if(a.test(f))return i(f);const d=Array.from(n.searchParams.keys()).reverse();for(const f of d)if(a.test(f))return i(f)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return i(d[0])}return e}class DS{started=Object.create(null);times=[];time(e){e in this.started&&Ke(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ke(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:a}of this.times)e.push(`${n.padEnd(t)} ${a-i}ms
`);return e.join("")}}function Nc(s,e){const t=e?URL.parse(s,e):URL.parse(s);return t?.protocol==="http:"||t?.protocol==="https:"}function _s(s){s.preventDefault()}function zt(s){s.preventDefault(),s.stopPropagation()}function mB(s){console.log("Deprecated API usage: "+s)}class Ah{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const f=t[7]||"Z";let m=parseInt(t[8],10);m=m>=0&&m<=23?m:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(l+=m,c+=g):f==="+"&&(l-=m,c-=g),new Date(Date.UTC(n,i,a,l,c,d))}}function bC(s,{scale:e=1,rotation:t=0}){const{width:n,height:i}=s.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new cu({viewBox:a,userUnit:1,scale:e,rotation:t})}function Al(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ke(`Not a valid color format: "${s}"`),[0,0,0])}function gB(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,Al(n))}e.remove()}function Bt(s){const{a:e,b:t,c:n,d:i,e:a,f:l}=s.getTransform();return[e,t,n,i,a,l]}function fi(s){const{a:e,b:t,c:n,d:i,e:a,f:l}=s.getTransform().invertSelf();return[e,t,n,i,a,l]}function qr(s,e,t=!1,n=!0){if(e instanceof cu){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:l}=s,c=wn.isCSSRoundSupported,d=`var(--total-scale-factor) * ${i}px`,f=`var(--total-scale-factor) * ${a}px`,m=c?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,g=c?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!t||e.rotation%180===0?(l.width=m,l.height=g):(l.width=g,l.height=m)}n&&s.setAttribute("data-main-rotation",e.rotation)}class si{constructor(){const{pixelRatio:e}=si;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,a=-1){let l=1/0,c=1/0,d=1/0;n=si.capPixels(n,a),n>0&&(l=Math.sqrt(n/(e*t))),i!==-1&&(c=i/e,d=i/t);const f=Math.min(l,c,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Eh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class vB{static get isDarkMode(){return et(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class xC{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),et(this,"commentForegroundColor",Al(n))}}function wC(s,e,t,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return s=Math.round(s*n+i),e=Math.round(e*n+i),t=Math.round(t*n+i),[s,e,t]}function MS(s,e){const t=s[0]/255,n=s[1]/255,i=s[2]/255,a=Math.max(t,n,i),l=Math.min(t,n,i),c=(a+l)/2;if(a===l)e[0]=e[1]=0;else{const d=a-l;switch(e[1]=c<.5?d/(a+l):d/(2-a-l),a){case t:e[0]=((n-i)/d+(n<i?6:0))*60;break;case n:e[0]=((i-t)/d+2)*60;break;case i:e[0]=((t-n)/d+4)*60;break}}e[2]=c}function Ig(s,e){const t=s[0],n=s[1],i=s[2],a=(1-Math.abs(2*i-1))*n,l=a*(1-Math.abs(t/60%2-1)),c=i-a/2;switch(Math.floor(t/60)){case 0:e[0]=a+c,e[1]=l+c,e[2]=c;break;case 1:e[0]=l+c,e[1]=a+c,e[2]=c;break;case 2:e[0]=c,e[1]=a+c,e[2]=l+c;break;case 3:e[0]=c,e[1]=l+c,e[2]=a+c;break;case 4:e[0]=l+c,e[1]=c,e[2]=a+c;break;case 5:case 6:e[0]=a+c,e[1]=c,e[2]=l+c;break}}function OS(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function PS(s,e,t){Ig(s,t),t.map(OS);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];Ig(e,t),t.map(OS);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const LS=new Map;function SC(s,e){const t=s[0]+s[1]*256+s[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=LS.get(t);if(n)return n;const i=new Float32Array(9),a=i.subarray(0,3),l=i.subarray(3,6);MS(s,l);const c=i.subarray(6,9);MS(e,c);const d=c[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),PS(l,c,a)<f){let m,g;d?(m=l[2],g=1):(m=0,g=l[2]);const v=.005;for(;g-m>v;){const b=l[2]=(m+g)/2;d===PS(l,c,a)<f?m=b:g=b}l[2]=d?g:m}return Ig(l,a),n=Te.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),LS.set(t,n),n}function ey({html:s,dir:e,className:t},n){const i=document.createDocumentFragment();if(typeof s=="string"){const a=document.createElement("p");a.dir=e||"auto";const l=s.split(/(?:\r\n?|\n)/);for(let c=0,d=l.length;c<d;++c){const f=l[c];a.append(document.createTextNode(f)),c<d-1&&a.append(document.createElement("br"))}i.append(a)}else Zv.render({xfaHtml:s,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),n.append(i)}class Oc{#e=null;#t=null;#s;#n=null;#a=null;#i=null;#r=null;#o=null;static#c=null;constructor(e){this.#s=e,Oc.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#s._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",_s,{signal:t}),e.addEventListener("pointerdown",Oc.#l,{signal:t}));const n=this.#n=document.createElement("div");n.className="buttons",e.append(n);const i=this.#s.toolbarPosition;if(i){const{style:a}=e,l=this.#s._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#s._focusEventsAllowed=!1,zt(e)}#d(e){this.#s._focusEventsAllowed=!0,zt(e)}#f(e){const t=this.#s._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",_s,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#s,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Oc.#c[e]),this.#f(n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(n)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#a=e}addComment(e,t=null){if(this.#i)return;const n=e.renderForToolbar();if(!n)return;this.#f(n);const i=this.#r=this.#g;t?(this.#n.insertBefore(n,t),this.#n.insertBefore(i,t)):this.#n.append(n,i),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#s);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#r?.remove(),this.#r=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const i=this.#n.querySelector(n);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class yB{#e=null;#t=null;#s;constructor(e){this.#s=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#s._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",_s,{signal:t});const n=this.#e=document.createElement("div");return n.className="buttons",e.append(n),this.#s.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),e}#a(e,t){let n=0,i=0;for(const a of e){const l=a.y+a.height;if(l<n)continue;const c=a.x+(t?a.width:0);if(l>n){i=c,n=l;continue}t?c>i&&(i=c):c<i&&(i=c)}return[t?1-i:i,n]}show(e,t,n){const[i,a]=this.#a(t,n),{style:l}=this.#t||=this.#n();e.append(this.#t),l.insetInlineEnd=`${100*i}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,t,n,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",t);const l=document.createElement("span");a.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const c=this.#s._signal;c instanceof AbortSignal&&!c.aborted&&(a.addEventListener("contextmenu",_s,{signal:c}),a.addEventListener("click",i,{signal:c})),this.#e.append(a)}}function _C(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}class bB{#e=0;get id(){return`${Vc}${this.#e++}`}}class ty{#e=Jv();#t=0;#s=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return et(this,"_isSVGFittingCanvas",a)}async#n(e,t){this.#s||=new Map;let n=this.#s.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(n.url=t,i=await _l(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=ty._isSVGFittingCanvas,l=new FileReader,c=new Image,d=new Promise((f,m)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,f()},l.onload=async()=>{const g=n.svgUrl=l.result;c.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},c.onerror=l.onerror=m});l.readAsDataURL(i),await d}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Ke(i),n=null}return this.#s.set(e,n),n&&this.#s.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:i,type:a}=e;return this.#n(`${t}_${n}_${i}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const n=await t;return this.#n(e,n)}async getFromId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#s||=new Map;let n=this.#s.get(e);if(n?.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#s.set(e,n),this.#s.set(n.id,n),n}getSvgUrl(e){const t=this.#s.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class xB{#e=[];#t=!1;#s;#n=-1;constructor(e=128){this.#s=e}add({cmd:e,undo:t,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(i&&e(),this.#t)return;const d={cmd:e,undo:t,post:n,type:a};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(d);return}if(l&&this.#e[this.#n].type===a){c&&(d.undo=this.#e[this.#n].undo),this.#e[this.#n]=d;return}const f=this.#n+1;f===this.#s?this.#e.splice(0,1):(this.#n=f,f<this.#e.length&&this.#e.splice(f)),this.#e.push(d)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class du{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=wn.platform;for(const[n,i,a={}]of e)for(const l of n){const c=l.startsWith("mac+");t&&c?(this.callbacks.set(l.slice(4),{callback:i,options:a}),this.allKeys.add(l.split("+").at(-1))):!t&&!c&&(this.callbacks.set(l,{callback:i,options:a}),this.allKeys.add(l.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#e(t));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:l=[],checker:c=null}}=n;c&&!c(e,t)||(i.bind(e,...l,t)(),a||zt(t))}}class ny{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return gB(e),et(this,"_colors",e)}convert(e){const t=Al(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((a,l)=>a===t[l]))return ny._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Te.makeHexColor(...t):e}}class rr{#e=new AbortController;#t=null;#s=null;#n=new Map;#a=new Map;#i=null;#r=null;#o=null;#c=new xB;#l=null;#h=null;#d=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#v=!1;#b=!1;#y=!1;#E=null;#_=null;#x=null;#T=null;#S=!1;#A=null;#j=new bB;#N=!1;#k=!1;#I=!1;#D=null;#O=null;#B=null;#P=null;#V=null;#C=Xe.NONE;#w=new Set;#M=null;#z=null;#U=null;#W=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#$=[0,0];#L=null;#G=null;#Q=null;#Z=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=rr.prototype,t=l=>l.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return et(this,"_keyboardManager",new du([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}constructor(e,t,n,i,a,l,c,d,f,m,g,v,b,_,w,E){const A=this._signal=this.#e.signal;this.#G=e,this.#Q=t,this.#Z=n,this.#i=i,this.#l=a,this.#z=l,this.#q=d,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:A}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),c._on("setpreference",this.onSetPreference.bind(this),{signal:A}),c._on("switchannotationeditorparams",N=>this.updateParams(N.type,N.value),{signal:A}),window.addEventListener("pointerdown",()=>{this.#k=!0},{capture:!0,signal:A}),window.addEventListener("pointerup",()=>{this.#k=!1},{capture:!0,signal:A}),this.#le(),this.#he(),this.#te(),this.#r=d.annotationStorage,this.#E=d.filterFactory,this.#U=f,this.#T=m||null,this.#v=g,this.#b=v,this.#y=b,this.#V=_||null,this.viewParameters={realScale:Da.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=E!==!1,a?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#a.values())e.destroy();this.#a.clear(),this.#n.clear(),this.#m.clear(),this.#P?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#z?.destroy(),this.#A?.hide(),this.#A=null,this.#B?.destroy(),this.#B=null,this.#s=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return et(this,"hcmFilter",this.#U?this.#E.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return et(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return et(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return et(this,"highlightColors",null);const t=new Map,n=!!this.#U;for(const[i,a]of e){const l=i.endsWith("_HCM");if(n&&l){t.set(i.replace("_HCM",""),a);continue}!n&&!l&&t.set(i,a)}return et(this,"highlightColors",t)}get highlightColorNames(){return et(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#B=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,n,i){this.#l?.showDialog(this,e,t,n,i)}selectComment(e,t){this.#a.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,n=void 0){this.#l?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#a.has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){this.#z?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#z}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#y=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(const n of this.#a.values()){const{x:i,y:a,width:l,height:c}=n.div.getBoundingClientRect();if(e>=i&&e<=i+l&&t>=a&&t<=a+c)return n}return null}disableUserSelect(e=!1){this.#Q.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#m.add(e)}removeShouldRescale(e){this.#m.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Da.PDF_TO_CSS_UNITS;for(const t of this.#m)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#J({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of this.#a.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:c}=n,d=n.toString(),m=this.#J(n).closest(".textLayer"),g=this.getSelectionBoxes(m);if(!g)return;n.empty();const v=this.#ee(m),b=this.#C===Xe.NONE,_=()=>{const w=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:c,text:d});b&&this.showAllEditors("highlight",!0,!0),t&&w?.editComment()};if(b){this.switchToMode(Xe.HIGHLIGHT,_);return}_()}commentSelection(e=""){this.highlightSelection(e,!0)}#ae(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#J(e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(this.#A||=new yB(this),this.#A.show(n,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#r)return null;const t=`${Vc}${e}`,n=this.#r.getRawValue(t);return n&&this.#r.remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}a11yAlert(e,t=null){const n=this.#Z;n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#A?.hide(),this.#M=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#M)return;const i=this.#J(e).closest(".textLayer");if(!i){this.#M&&(this.#A?.hide(),this.#M=null,this.#R({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#M=t,this.#R({hasSelectedText:!0}),!(this.#C!==Xe.HIGHLIGHT&&this.#C!==Xe.NONE)&&(this.#C===Xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#C===Xe.HIGHLIGHT?this.#ee(i):null;if(a?.toggleDrawing(),this.#k){const l=new AbortController,c=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),a?.toggleDrawing(!0),f.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}else a?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#C===Xe.HIGHLIGHT?this.highlightSelection(e):this.#v&&this.#ae()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#x)return;this.#x=new AbortController;const e=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#O=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,t]=this.#O;this.#O=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#D?.abort(),this.#D=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#se(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#se()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#w){const i=n.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Ke(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const d of n){const f=await i.deserialize(d);if(!f)return;a.push(f)}const l=()=>{for(const d of a)this.#ie(d);this.#re(a)},c=()=>{for(const d of a)d.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(a){Ke(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==Xe.NONE&&!this.isEditorHandlingKeyboard&&rr._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(e){Object.entries(e).some(([n,i])=>this.#Y[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#C===Xe.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#H([[at.HIGHLIGHT_FREE,!0]]))}#H(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#R({isEditing:this.#C!==Xe.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#se(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#H(t.defaultPropertiesToUpdate)}}getId(){return this.#j.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(e){return this.#a.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#a.set(e.pageIndex,e),this.#N?e.enable():e.disable()}removeLayer(e){this.#a.delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,a=!1){if(this.#C!==e&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#C===Xe.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=e,e===Xe.NONE){this.setEditingState(!1),this.#pe();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();e===Xe.SIGNATURE&&await this.#z?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const l of this.#a.values())l.updateMode(e);if(e===Xe.POPUP){this.#s||=await this.#q.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,c=[];for(const d of this.#n.values()){const{annotationElementId:f,hasComment:m,deleted:g}=d;f&&l.add(f),m&&!g&&c.push(d.getData())}for(const d of this.#s){const{id:f,popupRef:m,contentsObj:g}=d;m&&g?.str&&!l.has(f)&&!this.#g.has(f)&&c.push(d)}this.#l?.showSidebar(c)}if(!t){n&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const l of this.#n.values())l.uid===t?(this.setSelected(l),a?l.editComment():i?l.enterInEditMode():l.focus()):l.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case at.CREATE:this.currentLayer.addNewEditor(t);return;case at.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of this.#w)n.updateParams(e,t);else for(const n of this.#u)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(const a of this.#n.values())a.editorType===e&&a.show(t);(this.#W?.get(at.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#H([[at.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#I!==e){this.#I=e;for(const t of this.#a.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#N){this.#N=!0;const e=[];for(const t of this.#a.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#N){this.#N=!1;for(const e of this.#a.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#P?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#a.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#H(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#w);return e}updateUI(e){this.#me===e&&this.#H(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#H(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#d?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],n=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const a of t)this.#ie(a)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#re(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#C!==Xe.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#$[0]+=e,this.#$[1]+=t;const[i,a]=this.#$,l=[...this.#w],c=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#$[0]=this.#$[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(i,a),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-i,-a),d.translationDone())},mustExec:!1})},c);for(const d of l)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#w)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let t=!1;for(const[{x:i,y:a,pageIndex:l},c]of e)c.newX=i,c.newY=a,c.newPageIndex=l,t||=i!==c.savedX||a!==c.savedY||l!==c.savedPageIndex;if(!t)return!1;const n=(i,a,l,c)=>{if(this.#n.has(i.id)){const d=this.#a.get(c);d?i._setParentAndPosition(d,a,l):(i.pageIndex=c,i.x=a,i.y=l)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:l,newPageIndex:c}]of e)n(i,a,l,c)},undo:()=>{for(const[i,{savedX:a,savedY:l,savedPageIndex:c}]of e)n(i,a,l,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#p)for(const n of this.#p.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#C}isEditingMode(){return this.#C!==Xe.NONE}get imageManager(){return et(this,"imageManager",new ty)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,m=t.rangeCount;f<m;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:l}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(f,m,g,v)=>({x:(m-i)/l,y:1-(f+g-n)/a,width:v/l,height:g/a});break;case"180":c=(f,m,g,v)=>({x:1-(f+g-n)/a,y:1-(m+v-i)/l,width:g/a,height:v/l});break;case"270":c=(f,m,g,v)=>({x:1-(m+v-i)/l,y:(f-n)/a,width:v/l,height:g/a});break;default:c=(f,m,g,v)=>({x:(f-n)/a,y:(m-i)/l,width:g/a,height:v/l});break}const d=[];for(let f=0,m=t.rangeCount;f<m;f++){const g=t.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:b,width:_,height:w}of g.getClientRects())_===0||w===0||d.push(c(v,b,_,w))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const n=this.#r.getRawValue(t);n&&(this.#C===Xe.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){const i=this.#P?.get(e);i&&(i.setCanvas(t,n),this.#P.delete(e))}addMissingCanvas(e,t){(this.#P||=new Map).set(e,t)}}class vi{#e=null;#t=!1;#s=null;#n=null;#a=null;#i=null;#r=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,vi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){vi._l10n??=e}async render(){const e=this.#s=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",vi.#f.missing),t.setAttribute("data-l10n-id",vi.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;e.addEventListener("contextmenu",_s,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#r=!0,i(a))},{signal:n}),await this.#p(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await vi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(this.#l=n,this.#h=i),!(this.#e===e&&this.#t===t)&&(a||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#s&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#p(){const e=this.#s;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",vi.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",vi.#f[`${this.#g}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#a;if(!t){this.#a=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#a?.classList.remove("show")},{signal:a})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class zd{#e=null;#t=null;#s=!1;#n=null;#a=null;#i=null;#r=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(n.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:n}=this.#e.getBoundingClientRect(),{x:i,y:a,width:l,height:c}=this.#n.parent.boundingClientRect;return[(e-i)/l,(t+n-a)/c]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",_s,{signal:n}),t&&(e.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,zt(a)},{capture:!0,signal:n}),e.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,zt(a)},{capture:!0,signal:n})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#s=!0,i(a))},{signal:n}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),e}edit(e){const t=this.commentPopupPositionInLayer;let n,i;if(t)[n,i]=t;else{[n,i]=this.#n.commentButtonPosition;const{width:m,height:g,x:v,y:b}=this.#n;n=v+n*m,i=b+i*g}const a=this.#n.parent.boundingClientRect,{x:l,y:c,width:d,height:f}=a;this.#n._uiManager.editComment(this.#n,l+n*d,c+i*f,{...e,parentDimensions:a})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#r===""}isEmpty(){return this.#r===null}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#a}serialize(){return this.data}get data(){return{text:this.#r,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#r&&(this.#i=null),e===null){this.#r="",this.#c=!0;return}this.#r=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#a=e,this.data=e,this.#o=null,this.#i=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#r="",this.#i=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class hu{#e;#t=!1;#s=null;#n;#a;#i;#r;#o=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:l=null,signal:c}){this.#e=e,this.#s=n,this.#n=t,this.#a=i,this.#i=a,this.#r=l,this.#h=new AbortController,this.#c=AbortSignal.any([c,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/si.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,a=AbortSignal.any([this.#c,i.signal]),l=this.#e,c={capture:!0,signal:a,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(zt(f),d(f))},c),l.addEventListener("pointerup",d,c),l.addEventListener("pointercancel",d,c);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#c,this.#d.signal]),a=this.#e,l={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),l);const c=this.#p.bind(this);a.addEventListener("touchend",c,l),a.addEventListener("touchcancel",c,l),l.capture=!0,a.addEventListener("pointerdown",zt,l),a.addEventListener("pointermove",zt,l),a.addEventListener("pointercancel",zt,l),a.addEventListener("pointerup",zt,l),this.#a?.()}if(zt(e),e.touches.length!==2||this.#s?.()){this.#l=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;zt(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:a}=t,{screenX:l,screenY:c}=n,d=this.#l,{touch0X:f,touch0Y:m,touch1X:g,touch1Y:v}=d,b=g-f,_=v-m,w=l-i,E=c-a,A=Math.hypot(w,E)||1,N=Math.hypot(b,_)||1;if(!this.#t&&Math.abs(N-A)<=hu.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=i,d.touch0Y=a,d.touch1X=l,d.touch1Y=c,!this.#t){this.#t=!0;return}const T=[(i+l)/2,(a+c)/2];this.#i?.(T,N,A)}#p(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#r?.()),this.#l&&(zt(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class Le{#e=null;#t=null;#s=null;#n=null;#a=null;#i=!1;#r=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#v=!1;#b=!1;#y=null;#E=0;#_=0;#x=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#A=Le._zIndex++;static _borderLineWidth=-1;static _colorManager=new ny;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Le.prototype._resizeWithKeyboard,t=rr.TRANSLATE_SMALL,n=rr.TRANSLATE_BIG;return et(this,"_resizerKeyboardManager",new du([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Le.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,l];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return et(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new wB({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Le._l10n??=e,Le._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Le._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Le._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){At("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(e){this.#S=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#A}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[a,l]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/a,this.y=(t+i)/l,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}#j([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#j(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#j(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[d,f]=this.getBaseTranslation();l+=d,c+=f;const{style:m}=n;m.left=`${(100*l).toFixed(2)}%`,m.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Le,i=n/e,a=n/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:a,y:l,width:c,height:d}=this;if(c*=n,d*=i,a*=n,l*=i,this._mustFixPosition)switch(e){case 0:a=Bn(a,0,n-c),l=Bn(l,0,i-d);break;case 90:a=Bn(a,0,n-d),l=Bn(l,c,i);break;case 180:a=Bn(a,c,n),l=Bn(l,d,i);break;case 270:a=Bn(a,d,n),l=Bn(l,0,i-c);break}this.x=a/=n,this.y=l/=i;const[f,m]=this.getBaseTranslation();a+=f,l+=m,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#N(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Le.#N(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Le.#N(e,t,360-this.parentRotation)}#k(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",this.#D.bind(this,n),{signal:t}),i.addEventListener("contextmenu",_s,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#D(e,t){t.preventDefault();const{isMac:n}=wn.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#s?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#P.bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",zt,{passive:!1,signal:l}),window.addEventListener("contextmenu",_s,{signal:l}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#B()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#O(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=this.#h;this.#h=null;const a=this.x,l=this.y,c=this.width,d=this.height;a===e&&l===t&&c===n&&d===i||this.addCommands({cmd:this.#O.bind(this,a,l,c,d),undo:this.#O.bind(this,e,t,n,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#P(e,t){const[n,i]=this.parentDimensions,a=this.x,l=this.y,c=this.width,d=this.height,f=Le.MIN_SIZE/n,m=Le.MIN_SIZE/i,g=this.#k(this.rotation),v=(R,$)=>[g[0]*R+g[2]*$,g[1]*R+g[3]*$],b=this.#k(360-this.rotation),_=(R,$)=>[b[0]*R+b[2]*$,b[1]*R+b[3]*$];let w,E,A=!1,N=!1;switch(e){case"topLeft":A=!0,w=(R,$)=>[0,0],E=(R,$)=>[R,$];break;case"topMiddle":w=(R,$)=>[R/2,0],E=(R,$)=>[R/2,$];break;case"topRight":A=!0,w=(R,$)=>[R,0],E=(R,$)=>[0,$];break;case"middleRight":N=!0,w=(R,$)=>[R,$/2],E=(R,$)=>[0,$/2];break;case"bottomRight":A=!0,w=(R,$)=>[R,$],E=(R,$)=>[0,0];break;case"bottomMiddle":w=(R,$)=>[R/2,$],E=(R,$)=>[R/2,0];break;case"bottomLeft":A=!0,w=(R,$)=>[0,$],E=(R,$)=>[R,0];break;case"middleLeft":N=!0,w=(R,$)=>[0,$/2],E=(R,$)=>[R,$/2];break}const T=w(c,d),j=E(c,d);let P=v(...j);const L=Le._round(a+P[0]),M=Le._round(l+P[1]);let I=1,F=1,G,K;if(t.fromKeyboard)({deltaX:G,deltaY:K}=t);else{const{screenX:R,screenY:$}=t,[U,z]=this.#l;[G,K]=this.screenToPageTranslation(R-U,$-z),this.#l[0]=R,this.#l[1]=$}if([G,K]=_(G/n,K/i),A){const R=Math.hypot(c,d);I=F=Math.max(Math.min(Math.hypot(j[0]-T[0]-G,j[1]-T[1]-K)/R,1/c,1/d),f/c,m/d)}else N?I=Bn(Math.abs(j[0]-T[0]-G),f,1)/c:F=Bn(Math.abs(j[1]-T[1]-K),m,1)/d;const ae=Le._round(c*I),X=Le._round(d*F);P=v(...E(ae,X));const H=L-P[0],ie=M-P[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ae,this.height=X,this.x=H,this.y=ie,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#v)return this._editToolbar;this._editToolbar=new Oc(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(vi.initialize(Le._l10n),this.#s=new vi(this),this.#e&&(this.#s.data=this.#e,this.#e=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(e){this.#s&&(this.#s.data=e)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(e){await this.#s?.setGuessedText(e)}serializeAltText(e){return this.#s?.serialize(e)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new zd(this)}addStandaloneCommentButton(){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:i}}=this.#n;return{text:t,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new zd(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(this.#n||=new zd(this),this.#n.setInitialText(e,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new zd(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[l]=this.pageTranslation,c=l+a+1,d=i-100,f=c+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,d,f,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#U();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),_C(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new hu({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#V(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(e,t,n){let a=.7*(n/t)+1-.7;if(a===1)return;const l=this.#k(this.rotation),c=(L,M)=>[l[0]*L+l[2]*M,l[1]*L+l[3]*M],[d,f]=this.parentDimensions,m=this.x,g=this.y,v=this.width,b=this.height,_=Le.MIN_SIZE/d,w=Le.MIN_SIZE/f;a=Math.max(Math.min(a,1/v,1/b),_/v,w/b);const E=Le._round(v*a),A=Le._round(b*a);if(E===v&&A===b)return;this.#u||=[m,g,v,b];const N=c(v/2,b/2),T=Le._round(m+N[0]),j=Le._round(g+N[1]),P=c(E/2,A/2);this.x=T-P[0],this.y=j-P[1],this.width=E,this.height=A,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(e){const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#z(e);return}this.#M(e)}#M(e){const{isMac:t}=wn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),l={capture:!0,passive:!1,signal:a},c=f=>{i.abort(),this.#r=null,this.#p=!1,this._uiManager.endDragSession()||this.#M(f),n&&this._onStopDragging()};t&&(this.#E=e.clientX,this.#_=e.clientY,this.#r=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:g,pointerId:v}=f;if(v!==this.#r){zt(f);return}const[b,_]=this.screenToPageTranslation(m-this.#E,g-this.#_);this.#E=m,this.#_=g,this._uiManager.dragSelectedEditors(b,_)},l),window.addEventListener("touchmove",zt,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#T||f.isPrimary)&&c(f),zt(f)},l));const d=f=>{if(!this.#r||this.#r===f.pointerId){c(f);return}zt(f)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[a,l]=this.pageDimensions,[c,d]=this.pageTranslation,f=e/i,m=t/i,g=this.x*a,v=this.y*l,b=this.width*a,_=this.height*l;switch(n){case 0:return[g+f+c,l-v-m-_+d,g+f+b+c,l-v-m+d];case 90:return[g+m+c,l-v+f+d,g+m+_+c,l-v+f+b+d];case 180:return[g-f-b+c,l-v+m+d,g-f+c,l-v+m+_+d];case 270:return[g-m-_+c,l-v-f-b+d,g-m+c,l-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,a,l]=e,c=a-n,d=l-i;switch(this.rotation){case 0:return[n,t-l,c,d];case 90:return[n,t-i,d,c];case 180:return[a,t-i,c,d];case 270:return[a,t-l,d,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Le._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:i,deleted:a,richText:l},uid:c,pageIndex:d,creationDate:f,modificationDate:m}=this;return{id:c,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:e},creationDate:f,modificationDate:n||m,popupRef:!a,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#v=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#v=!1,!0):!1}isInEditMode(){return this.#v}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return t<l&&i>0&&e<a&&n>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#U()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[a,l]=i.pageDimensions,[c,d,f,m]=i.getRectInCurrentCoords(e.rect,l);return i.x=c/a,i.y=d/l,i.width=f/a,i.height=m/l,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#L(),this.removeEditToolbar(),this.#x){for(const e of this.#x.values())clearTimeout(e);this.#x=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,i,a,l]=this.getPDFRect();return[Le._round(n+(a-n)*e),Le._round(i+(l-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const l=this.#W.bind(this),c=this.#q.bind(this),d=this._uiManager._signal;for(const f of this.#t){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",c,{signal:d}),f.addEventListener("focus",this.#Y.bind(this,m),{signal:d}),f.setAttribute("data-l10n-id",Le._l10nResizer[m])}}const n=this.#t[0];let i=0;for(const l of t){if(l===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==i){if(a<i)for(let c=0;c<i-a;c++)this.#c.append(this.#c.firstChild);else if(a>i)for(let c=0;c<a-i;c++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const c of t){const f=this.#t[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Le._l10nResizer[f])}}this.#$(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#W(e){Le._resizerKeyboardManager.exec(this,e)}#q(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#L()}#Y(e){this.#g=this.#b?e:""}#$(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#P(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#L(){this.#b=!1,this.#$(-1),this.#B()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(e){this.#m=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#x||=new Map;const{action:n}=e;let i=this.#x.get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#x.delete(n),this.#x.size===0&&(this.#x=null)},Le._telemetryTimeout),this.#x.set(n,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class wB extends Le{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const IS=3285377520,Os=4294901760,pi=65535;class AC{constructor(e){this.h1=e?e&4294967295:IS,this.h2=e?e&4294967295:IS}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let w=0,E=e.length;w<E;w++){const A=e.charCodeAt(w);A<=255?t[n++]=A:(t[n++]=A>>>8,t[n++]=A&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,l=new Uint32Array(t.buffer,0,i);let c=0,d=0,f=this.h1,m=this.h2;const g=3432918353,v=461845907,b=g&pi,_=v&pi;for(let w=0;w<i;w++)w&1?(c=l[w],c=c*g&Os|c*b&pi,c=c<<15|c>>>17,c=c*v&Os|c*_&pi,f^=c,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[w],d=d*g&Os|d*b&pi,d=d<<15|d>>>17,d=d*v&Os|d*_&pi,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(c=0,a){case 3:c^=t[i*4+2]<<16;case 2:c^=t[i*4+1]<<8;case 1:c^=t[i*4],c=c*g&Os|c*b&pi,c=c<<15|c>>>17,c=c*v&Os|c*_&pi,i&1?f^=c:m^=c}this.h1=f,this.h2=m}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Os|e*36045&pi,t=t*4283543511&Os|((t<<16|e>>>16)*2950163797&Os)>>>16,e^=t>>>1,e=e*444984403&Os|e*60499&pi,t=t*3301882366&Os|((t<<16|e>>>16)*3120437893&Os)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Bg=Object.freeze({map:null,hash:"",transfer:void 0});class sy{#e=!1;#t=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof Le&&this.#s.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof Le)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#n.get(e);let i=!1;if(n!==void 0)for(const[a,l]of Object.entries(t))n[a]!==l&&(i=!0,n[a]=l);else i=!0,this.#n.set(e,t);i&&this.#a(),t instanceof Le&&((this.#s||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#a(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new EC(this)}get serializable(){if(this.#n.size===0)return Bg;const e=new Map,t=new AC,n=[],i=Object.create(null);let a=!1;for(const[l,c]of this.#n){const d=c instanceof Le?c.serialize(!1,i):c;d&&(e.set(l,d),t.update(`${l}:${JSON.stringify(d)}`),a||=!!d.bitmap)}if(a)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Bg}get editorStats(){let e=null;const t=new Map;let n=0,i=0;for(const a of this.#n.values()){if(!(a instanceof Le)){a.popup&&(a.popup.deleted?i+=1:n+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(n+=1);const l=a.telemetryFinalData;if(!l)continue;const{type:c}=l;t.has(c)||t.set(c,Object.getPrototypeOf(a).constructor),e||=Object.create(null);const d=e[c]||=new Map;for(const[f,m]of Object.entries(l)){if(f==="type")continue;let g=d.get(f);g||(g=new Map,d.set(f,g));const v=g.get(m)??0;g.set(m,v+1)}}if((i>0||n>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:n}),!e)return null;for(const[a,l]of t)e[a]=l.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const n=this.#s?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#s?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#s)for(const t of this.#s.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class EC extends sy{#e;constructor(e){super();const{map:t,hash:n,transfer:i}=e.serializable,a=structuredClone(t,i?{transfer:i}:null);this.#e={map:a,hash:n,transfer:i}}get print(){At("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return et(this,"modifiedIds",{ids:new Set,hash:""})}}class SB{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(lt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:l}=e,c=new FontFace(i,a,l);this.addNativeFontFace(c);try{await c.load(),this.#e.add(i),n?.(e)}catch{Ke(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}At("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Ke(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return et(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return et(this,"isSyncFontLoadingSupported",$n||wn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(lt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return et(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(j,P){return j.charCodeAt(P)<<24|j.charCodeAt(P+1)<<16|j.charCodeAt(P+2)<<8|j.charCodeAt(P+3)&255}function i(j,P,L,M){const I=j.substring(0,P),F=j.substring(P+L);return I+M+F}let a,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let f=0;function m(j,P){if(++f>30){Ke("Load test font never loaded."),P();return}if(d.font="30px "+j,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(m.bind(null,j,P))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=i(v,976,g.length,g);const _=16,w=1482184792;let E=n(v,_);for(a=0,l=g.length-3;a<l;a+=4)E=E-w+n(g,a)|0;a<g.length&&(E=E-w+n(g+"XXX",a)|0),v=i(v,_,4,cB(E));const A=`url(data:font/opentype;base64,${btoa(v)});`,N=`@font-face {font-family:"${g}";src:${A}}`;this.insertRule(N);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const j of[e.loadedName,g]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=j,T.append(P)}this._document.body.append(T),m(g,()=>{T.remove(),t.complete()})}}class _B{#e;constructor(e,t=null,n,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${gC(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(l){Ke(`getPathGenerator - ignoring character: "${l}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=a}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function AB(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if($n)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function EB(s){if($n&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return lu(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Fd(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const zg=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,CB=s=>typeof s=="object"&&typeof s?.name=="string",CC=fB.bind(null,zg,CB);class TB{#e=new Map;#t=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Ke("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Ud={DATA:1,ERROR:2},sn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function BS(){}function ss(s){if(s instanceof ir||s instanceof _h||s instanceof jS||s instanceof Gc||s instanceof Zm)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||At('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new ir(s.message);case"InvalidPDFException":return new _h(s.message);case"PasswordException":return new jS(s.message,s.code);case"ResponseException":return new Gc(s.message,s.status,s.missing);case"UnknownErrorException":return new Zm(s.message,s.details)}return new Zm(s.message,s.toString())}class kc{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Ud.DATA)i.resolve(e.data);else if(e.callback===Ud.ERROR)i.reject(ss(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(l){a.postMessage({sourceName:n,targetName:i,callback:Ud.DATA,callbackId:e.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:i,callback:Ud.ERROR,callbackId:e.callbackId,reason:ss(l)})});return}if(e.streamId){this.#s(e);return}t(e.data)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(e,t,n,i){const a=this.streamId++,l=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:c,action:e,streamId:a,data:t,desiredSize:f.desiredSize},i),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[a].pullCall=m,d.postMessage({sourceName:l,targetName:c,stream:sn.PULL,streamId:a,desiredSize:f.desiredSize}),m.promise},cancel:f=>{lt(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[a].cancelCall=m,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:l,targetName:c,stream:sn.CANCEL,streamId:a,reason:ss(f)}),m.promise}},n)}#s(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,l=this,c=this.actionHandler[e.action],d={enqueue(f,m=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:sn.ENQUEUE,streamId:t,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:sn.CLOSE,streamId:t}),delete l.streamSinks[t])},error(f){lt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:sn.ERROR,streamId:t,reason:ss(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(c,e.data,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:sn.START_COMPLETE,streamId:t,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:sn.START_COMPLETE,streamId:t,reason:ss(f)})})}#n(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,l=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case sn.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(ss(e.reason));break;case sn.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(ss(e.reason));break;case sn.PULL:if(!c){a.postMessage({sourceName:n,targetName:i,stream:sn.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||BS).then(function(){a.postMessage({sourceName:n,targetName:i,stream:sn.PULL_COMPLETE,streamId:t,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:sn.PULL_COMPLETE,streamId:t,reason:ss(f)})});break;case sn.ENQUEUE:if(lt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case sn.CLOSE:if(lt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,t);break;case sn.ERROR:lt(l,"error should have stream controller"),l.controller.error(ss(e.reason)),this.#a(l,t);break;case sn.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(ss(e.reason)),this.#a(l,t);break;case sn.CANCEL:if(!c)break;const d=ss(e.reason);Promise.try(c.onCancel||BS,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:sn.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:sn.CANCEL_COMPLETE,streamId:t,reason:ss(f)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#a(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class TC{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){At("Abstract method `_createCanvas` called.")}}class NB extends TC{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class NC{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){At("Abstract method `_fetch` called.")}}class zS extends NC{async _fetch(e){const t=await _l(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):lu(t)}}class kC{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,a){return"none"}destroy(e=!1){}}class kB extends kC{#e;#t;#s;#n;#a;#i;#r=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#a=t}get#o(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#s){const e=this.#a.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#a.createElementNS(Yi,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#s=this.#a.createElementNS(Yi,"defs"),e.append(n),n.append(this.#s),this.#a.body.append(e)}return this.#s}#h(e){if(e.length===1){const d=e[0],f=new Array(256);for(let g=0;g<256;g++)f[g]=d[g]/255;const m=f.join(",");return[m,m,m]}const[t,n,i]=e,a=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)a[d]=t[d]/255,l[d]=n[d]/255,c[d]=i[d]/255;return[a.join(","),l.join(","),c.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#a.URL;t!==this.#a.baseURI&&(uu(t)?Ke('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=Kv(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[n,i,a]=this.#h(e),l=e.length===1?n:`${n}${i}${a}`;if(t=this.#o.get(l),t)return this.#o.set(e,t),t;const c=`g_${this.#n}_transfer_map_${this.#r++}`,d=this.#d(c);this.#o.set(e,d),this.#o.set(l,d);const f=this.#p(c);return this.#m(n,i,a,f),d}addHCMFilter(e,t){const n=`${e}-${t}`,i="base";let a=this.#c.get(i);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#c.set(i,a)),!e||!t))return a.url;const l=this.#b(e);e=Te.makeHexColor(...l);const c=this.#b(t);if(t=Te.makeHexColor(...c),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return a.url;const d=new Array(256);for(let b=0;b<=255;b++){const _=b/255;d[b]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const f=d.join(","),m=`g_${this.#n}_hcm_filter`,g=a.filter=this.#p(m);this.#m(f,f,f,g),this.#g(g);const v=(b,_)=>{const w=l[b]/255,E=c[b]/255,A=new Array(_+1);for(let N=0;N<=_;N++)A[N]=w+N/_*(E-w);return A.join(",")};return this.#m(v(0,5),v(1,5),v(2,5),g),a.url=this.#d(m),a.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[n]=this.#h([e]),i=`alpha_${n}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_alpha_map_${this.#r++}`,l=this.#d(a);this.#o.set(e,l),this.#o.set(i,l);const c=this.#p(a);return this.#v(n,c),l}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let n,i;if(e?([n]=this.#h([e]),i=`luminosity_${n}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_luminosity_map_${this.#r++}`,l=this.#d(a);this.#o.set(e,l),this.#o.set(i,l);const c=this.#p(a);return this.#f(c),e&&this.#v(n,c),l}addHighlightHCMFilter(e,t,n,i,a){const l=`${t}-${n}-${i}-${a}`;let c=this.#c.get(e);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#c.set(e,c)),!t||!n))return c.url;const[d,f]=[t,n].map(this.#b.bind(this));let m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,b]=[i,a].map(this.#b.bind(this));g<m&&([m,g,v,b]=[g,m,b,v]),this.#l.style.color="";const _=(A,N,T)=>{const j=new Array(256),P=(g-m)/T,L=A/255,M=(N-A)/(255*T);let I=0;for(let F=0;F<=T;F++){const G=Math.round(m+F*P),K=L+F*M;for(let ae=I;ae<=G;ae++)j[ae]=K;I=G+1}for(let F=I;F<256;F++)j[F]=j[I-1];return j.join(",")},w=`g_${this.#n}_hcm_${e}_filter`,E=c.filter=this.#p(w);return this.#g(E),this.#m(_(v[0],b[0],5),_(v[1],b[1],5),_(v[2],b[2],5),E),c.url=this.#d(w),c.url}destroy(e=!1){e&&this.#i?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#r=0)}#f(e){const t=this.#a.createElementNS(Yi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#a.createElementNS(Yi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#a.createElementNS(Yi,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,n){const i=this.#a.createElementNS(Yi,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}#m(e,t,n,i){const a=this.#a.createElementNS(Yi,"feComponentTransfer");i.append(a),this.#u(a,"feFuncR",e),this.#u(a,"feFuncG",t),this.#u(a,"feFuncB",n)}#v(e,t){const n=this.#a.createElementNS(Yi,"feComponentTransfer");t.append(n),this.#u(n,"feFuncA",e)}#b(e){return this.#l.style.color=e,Al(getComputedStyle(this.#l).getPropertyValue("color"))}}class jC{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){At("Abstract method `_fetch` called.")}}class FS extends jC{async _fetch(e){const t=await _l(e,"arraybuffer");return new Uint8Array(t)}}class RC{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){At("Abstract method `_fetch` called.")}}class US extends RC{async _fetch(e){const t=await _l(e,"arraybuffer");return new Uint8Array(t)}}$n&&Ke("Please use the `legacy` build in Node.js environments.");async function iy(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class jB extends kC{}class RB extends TC{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class DB extends NC{async _fetch(e){return iy(e)}}class MB extends jC{async _fetch(e){return iy(e)}}class OB extends RC{async _fetch(e){return iy(e)}}const ko="__forcedDependency",{floor:$S,ceil:HS}=Math;function $d(s,e,t,n,i,a){s[e*4+0]=Math.min(s[e*4+0],t),s[e*4+1]=Math.min(s[e*4+1],n),s[e*4+2]=Math.max(s[e*4+2],i),s[e*4+3]=Math.max(s[e*4+3],a)}const Fg=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class PB{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Fg}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Hd=(s,e)=>{if(!s)return;let t=s.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},s.set(e,t)),t};class LB{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[ko]:[]};#s=new Map;#n=[];#a=[];#i=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#p;#u;#m;constructor(e,t,n=!1){this.#f=e.width,this.#g=e.height,this.#v(t),n&&(this.#m=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#v(e,this.#u)}#v(e,t){const n=new ArrayBuffer(e*4);this.#p=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),t&&t.length>0?(this.#u.set(t),this.#u.fill(Fg,t.length)):this.#u.fill(Fg)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[ko]:{__proto__:this.#t[ko]}},this.#r={__proto__:this.#r},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#r=Object.getPrototypeOf(this.#r);const n=this.#n.pop();return n!==void 0&&(Hd(this.#m,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(Hd(this.#m,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#a.push(e),this}endMarkedContent(e){const t=this.#a.pop();return t!==void 0&&(Hd(this.#m,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#i.push(Te.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#s.set(e,t),this}recordSimpleDataFromNamed(e,t,n){this.#e[e]=this.#s.get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(ko,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(ko,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,n,i,a,l){const c=Te.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform()),d=[1/0,1/0,-1/0,-1/0];Te.axialAlignedBoundingBox([n,a,i,l],c,d);const f=Te.intersect(this.#r,d);return f?(this.#r[0]=f[0],this.#r[1]=f[1],this.#r[2]=f[2],this.#r[3]=f[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(e,t,n,i,a,l){const c=this.#r;if(c[0]===1/0)return this;const d=Te.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform());if(c[0]===-1/0)return Te.axialAlignedBoundingBox([n,a,i,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return Te.axialAlignedBoundingBox([n,a,i,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],c[3])),this}recordCharacterBBox(e,t,n,i=1,a=0,l=0,c){const d=n.bbox;let f,m;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#d.get(n),f!==!1&&(m=[0,0,0,0],Te.axialAlignedBoundingBox(d,n.fontMatrix,m),(i!==1||a!==0||l!==0)&&Te.scaleMinMax([i,0,0,-i,a,l],m),f)))return this.recordBBox(e,t,m[0],m[2],m[1],m[3]);if(!c)return this.recordFullPageBBox(e);const g=c();return d&&m&&f===void 0&&(f=m[0]<=a-g.actualBoundingBoxLeft&&m[2]>=a+g.actualBoundingBoxRight&&m[1]<=l-g.actualBoundingBoxAscent&&m[3]>=l+g.actualBoundingBoxDescent,this.#d.set(n,f),f)?this.recordBBox(e,t,m[0],m[2],m[1],m[3]):this.recordBBox(e,t,a-g.actualBoundingBoxLeft,a+g.actualBoundingBoxRight,l-g.actualBoundingBoxAscent,l+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#r[0]),this.#o[1]=Math.max(0,this.#r[1]),this.#o[2]=Math.min(this.#f,this.#r[2]),this.#o[3]=Math.min(this.#g,this.#r[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const n=this.#l,i=this.#e,a=this.#t;for(const l of t)l in this.#e?n.add(i[l]):l in a&&a[l].forEach(n.add,n);return this}recordNamedDependency(e,t){return this.#s.has(t)&&this.#l.add(this.#s.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[ko]),this.#m){const n=Hd(this.#m,e),{dependencies:i}=n;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#a.forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(this.#c===e){const n=$S(this.#o[0]*256/this.#f),i=$S(this.#o[1]*256/this.#g),a=HS(this.#o[2]*256/this.#f),l=HS(this.#o[3]*256/this.#g);$d(this.#p,e,n,i,a,l);for(const c of this.#l)c!==e&&$d(this.#p,c,n,i,a,l);for(const c of this.#n)c!==e&&$d(this.#p,c,n,i,a,l);for(const c of this.#a)c!==e&&$d(this.#p,c,n,i,a,l);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const n=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#r[0]=Math.max(this.#r[0],this.#o[0]),this.#r[1]=Math.max(this.#r[1],this.#o[1]),this.#r[2]=Math.min(this.#r[2],this.#o[2]),this.#r[3]=Math.min(this.#r[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new PB(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class Ch{#e;#t;#s;#n=0;#a=0;constructor(e,t,n){if(e instanceof Ch&&e.#s===!!n)return e;this.#e=e,this.#t=t,this.#s=!!n}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#a++,this.#e.save(this.#t),this}restore(e){return this.#a>0&&(this.#e.restore(this.#t),this.#a--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#s||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,n,i,a,l){return this.#s||this.#e.recordClipBox(this.#t,t,n,i,a,l),this}recordBBox(e,t,n,i,a,l){return this.#s||this.#e.recordBBox(this.#t,t,n,i,a,l),this}recordCharacterBBox(e,t,n,i,a,l,c){return this.#s||this.#e.recordCharacterBBox(this.#t,t,n,i,a,l,c),this}recordFullPageBBox(e){return this.#s||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#s||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Ps={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Dn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ug(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),s.clip(i)}class ry{isModifyingCurrentTransform(){return!1}getPattern(){At("Abstract method `getPattern` called.")}}class IB extends ry{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let a;if(i===Dn.STROKE||i===Dn.FILL){const l=t.current.getClippedPathBoundingBox(i,Bt(e))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=t.cachedCanvases.getCanvas("pattern",c,d),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-l[0],-l[1]),n=Te.transform(n,[1,0,0,1,l[0],l[1]]),m.transform(...t.baseTransform),this.matrix&&m.transform(...this.matrix),Ug(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),a=e.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);a.setTransform(g)}else Ug(e,this._bbox),a=this._createGradient(e);return a}}function ng(s,e,t,n,i,a,l,c){const d=e.coords,f=e.colors,m=s.data,g=s.width*4;let v;d[t+1]>d[n+1]&&(v=t,t=n,n=v,v=a,a=l,l=v),d[n+1]>d[i+1]&&(v=n,n=i,i=v,v=l,l=c,c=v),d[t+1]>d[n+1]&&(v=t,t=n,n=v,v=a,a=l,l=v);const b=(d[t]+e.offsetX)*e.scaleX,_=(d[t+1]+e.offsetY)*e.scaleY,w=(d[n]+e.offsetX)*e.scaleX,E=(d[n+1]+e.offsetY)*e.scaleY,A=(d[i]+e.offsetX)*e.scaleX,N=(d[i+1]+e.offsetY)*e.scaleY;if(_>=N)return;const T=f[a],j=f[a+1],P=f[a+2],L=f[l],M=f[l+1],I=f[l+2],F=f[c],G=f[c+1],K=f[c+2],ae=Math.round(_),X=Math.round(N);let H,ie,R,$,U,z,le,k;for(let O=ae;O<=X;O++){if(O<E){const ee=O<_?0:(_-O)/(_-E);H=b-(b-w)*ee,ie=T-(T-L)*ee,R=j-(j-M)*ee,$=P-(P-I)*ee}else{let ee;O>N?ee=1:E===N?ee=0:ee=(E-O)/(E-N),H=w-(w-A)*ee,ie=L-(L-F)*ee,R=M-(M-G)*ee,$=I-(I-K)*ee}let B;O<_?B=0:O>N?B=1:B=(_-O)/(_-N),U=b-(b-A)*B,z=T-(T-F)*B,le=j-(j-G)*B,k=P-(P-K)*B;const q=Math.round(Math.min(H,U)),J=Math.round(Math.max(H,U));let ue=g*O+q*4;for(let ee=q;ee<=J;ee++)B=(H-ee)/(H-U),B<0?B=0:B>1&&(B=1),m[ue++]=ie-(ie-z)*B|0,m[ue++]=R-(R-le)*B|0,m[ue++]=$-($-k)*B|0,m[ue++]=255}}function BB(s,e,t){const n=e.coords,i=e.colors;let a,l;switch(e.type){case"lattice":const c=e.verticesPerRow,d=Math.floor(n.length/c)-1,f=c-1;for(a=0;a<d;a++){let m=a*c;for(let g=0;g<f;g++,m++)ng(s,t,n[m],n[m+1],n[m+c],i[m],i[m+1],i[m+c]),ng(s,t,n[m+c+1],n[m+1],n[m+c],i[m+c+1],i[m+1],i[m+c])}break;case"triangles":for(a=0,l=n.length;a<l;a+=3)ng(s,t,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class zB extends ry{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-c,m=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*e[1]*1.1)),3e3),b=f/g,_=m/v,w={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/b,scaleY:1/_},E=g+4,A=v+4,N=n.getCanvas("mesh",E,A),T=N.context,j=T.createImageData(g,v);if(t){const L=j.data;for(let M=0,I=L.length;M<I;M+=4)L[M]=t[0],L[M+1]=t[1],L[M+2]=t[2],L[M+3]=255}for(const L of this._figures)BB(j,L,w);return T.putImageData(j,2,2),{canvas:N.canvas,offsetX:c-2*b,offsetY:d-2*_,scaleX:b,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Ug(e,this._bbox);const a=new Float32Array(2);if(i===Dn.SHADING)Te.singularValueDecompose2dScale(Bt(e),a);else if(this.matrix){Te.singularValueDecompose2dScale(this.matrix,a);const[c,d]=a;Te.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=c,a[1]*=d}else Te.singularValueDecompose2dScale(t.baseTransform,a);const l=this._createMeshCanvas(a,i===Dn.SHADING?null:this._background,t.cachedCanvases);return i!==Dn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class FB extends ry{getPattern(){return"hotpink"}}function UB(s){switch(s[0]){case"RadialAxial":return new IB(s);case"Mesh":return new zB(s);case"Dummy":return new FB}throw new Error(`Unknown IR type: ${s[0]}`)}const VS={COLORED:1,UNCOLORED:2};class ay{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:n,operatorList:i,paintType:a,tilingType:l,color:c,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:m}=this;f=Math.abs(f),m=Math.abs(m),nf("TilingType: "+l);const g=n[0],v=n[1],b=n[2],_=n[3],w=b-g,E=_-v,A=new Float32Array(2);Te.singularValueDecompose2dScale(this.matrix,A);const[N,T]=A;Te.singularValueDecompose2dScale(this.baseTransform,A);const j=N*A[0],P=T*A[1];let L=w,M=E,I=!1,F=!1;const G=Math.ceil(f*j),K=Math.ceil(m*P),ae=Math.ceil(w*j),X=Math.ceil(E*P);G>=ae?L=f:I=!0,K>=X?M=m:F=!0;const H=this.getSizeAndScale(L,this.ctx.canvas.width,j),ie=this.getSizeAndScale(M,this.ctx.canvas.height,P),R=e.cachedCanvases.getCanvas("pattern",H.size,ie.size),$=R.context,U=d.createCanvasGraphics($,t);if(U.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(U,a,c),$.translate(-H.scale*g,-ie.scale*v),U.transform(0,H.scale,0,0,ie.scale,0,0),$.save(),U.dependencyTracker?.save(),this.clipBbox(U,g,v,b,_),U.baseTransform=Bt(U.ctx),U.executeOperatorList(i),U.endDrawing(),U.dependencyTracker?.restore(),$.restore(),I||F){const z=R.canvas;I&&(L=f),F&&(M=m);const le=this.getSizeAndScale(L,this.ctx.canvas.width,j),k=this.getSizeAndScale(M,this.ctx.canvas.height,P),O=le.size,B=k.size,q=e.cachedCanvases.getCanvas("pattern-workaround",O,B),J=q.context,ue=I?Math.floor(w/f):0,ee=F?Math.floor(E/m):0;for(let Y=0;Y<=ue;Y++)for(let oe=0;oe<=ee;oe++)J.drawImage(z,O*Y,B*oe,O,B,0,0,O,B);return{canvas:q.canvas,scaleX:le.scale,scaleY:k.scale,offsetX:g,offsetY:v}}return{canvas:R.canvas,scaleX:H.scale,scaleY:ie.scale,offsetX:g,offsetY:v}}getSizeAndScale(e,t,n){const i=Math.max(ay.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*n);return a>=i?a=i:n=a/e,{scale:n,size:a}}clipBbox(e,t,n,i,a){const l=i-t,c=a-n;e.ctx.rect(t,n,l,c),Te.axialAlignedBoundingBox([t,n,i,a],Bt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,a=e.current;switch(t){case VS.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;i.fillStyle=a.fillColor=l,i.strokeStyle=a.strokeColor=c;break;case VS.UNCOLORED:i.fillStyle=i.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new lB(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,a){let l=n;i!==Dn.SHADING&&(l=Te.transform(l,t.baseTransform),this.matrix&&(l=Te.transform(l,this.matrix)));const c=this.createPatternCanvas(t,a);let d=new DOMMatrix(l);d=d.translate(c.offsetX,c.offsetY),d=d.scale(1/c.scaleX,1/c.scaleY);const f=e.createPattern(c.canvas,"repeat");return f.setTransform(d),f}}function $B({src:s,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const c=wn.isLittleEndian?4278190080:255,[d,f]=l?[a,c]:[c,a],m=n>>3,g=n&7,v=s.length;t=new Uint32Array(t.buffer);let b=0;for(let _=0;_<i;_++){for(const E=e+m;e<E;e++){const A=e<v?s[e]:255;t[b++]=A&128?f:d,t[b++]=A&64?f:d,t[b++]=A&32?f:d,t[b++]=A&16?f:d,t[b++]=A&8?f:d,t[b++]=A&4?f:d,t[b++]=A&2?f:d,t[b++]=A&1?f:d}if(g===0)continue;const w=e<v?s[e++]:255;for(let E=0;E<g;E++)t[b++]=w&1<<7-E?f:d}return{srcPos:e,destPos:b}}const GS=16,qS=100,HB=15,WS=10,rs=16,sg=new DOMMatrix,bs=new Float32Array(2),Uo=new Float32Array([1/0,1/0,-1/0,-1/0]);function VB(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,i,a,l,c){e.transform(t,n,i,a,l,c),this.__originalTransform(t,n,i,a,l,c)},s.setTransform=function(t,n,i,a,l,c){e.setTransform(t,n,i,a,l,c),this.__originalSetTransform(t,n,i,a,l,c)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,i,a,l,c){e.bezierCurveTo(t,n,i,a,l,c),this.__originalBezierCurveTo(t,n,i,a,l,c)},s.rect=function(t,n,i,a){e.rect(t,n,i,a),this.__originalRect(t,n,i,a)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class GB{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Vd(s,e,t,n,i,a,l,c,d,f){const[m,g,v,b,_,w]=Bt(s);if(g===0&&v===0){const N=l*m+_,T=Math.round(N),j=c*b+w,P=Math.round(j),L=(l+d)*m+_,M=Math.abs(Math.round(L)-T)||1,I=(c+f)*b+w,F=Math.abs(Math.round(I)-P)||1;return s.setTransform(Math.sign(m),0,0,Math.sign(b),T,P),s.drawImage(e,t,n,i,a,0,0,M,F),s.setTransform(m,g,v,b,_,w),[M,F]}if(m===0&&b===0){const N=c*v+_,T=Math.round(N),j=l*g+w,P=Math.round(j),L=(c+f)*v+_,M=Math.abs(Math.round(L)-T)||1,I=(l+d)*g+w,F=Math.abs(Math.round(I)-P)||1;return s.setTransform(0,Math.sign(g),Math.sign(v),0,T,P),s.drawImage(e,t,n,i,a,0,0,F,M),s.setTransform(m,g,v,b,_,w),[F,M]}s.drawImage(e,t,n,i,a,l,c,d,f);const E=Math.hypot(m,g),A=Math.hypot(v,b);return[E*d,A*f]}class YS{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Lg;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=jn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,n){n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Uo.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Dn.FILL,t=null){const n=this.minMax.slice();if(e===Dn.STROKE){t||At("Stroke bounding box must include transform."),Te.singularValueDecompose2dScale(t,bs);const i=bs[0]*this.lineWidth/2,a=bs[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=Te.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Uo,0)}getClippedPathBoundingBox(e=Dn.FILL,t=null){return Te.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function XS(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%rs,a=(t-i)/rs,l=i===0?a:a+1,c=s.createImageData(n,rs);let d=0,f;const m=e.data,g=c.data;let v,b,_,w;if(e.kind===Mc.GRAYSCALE_1BPP){const E=m.byteLength,A=new Uint32Array(g.buffer,0,g.byteLength>>2),N=A.length,T=n+7>>3,j=4294967295,P=wn.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(_=v<a?rs:i,f=0,b=0;b<_;b++){const L=E-d;let M=0;const I=L>T?n:L*8-7,F=I&-8;let G=0,K=0;for(;M<F;M+=8)K=m[d++],A[f++]=K&128?j:P,A[f++]=K&64?j:P,A[f++]=K&32?j:P,A[f++]=K&16?j:P,A[f++]=K&8?j:P,A[f++]=K&4?j:P,A[f++]=K&2?j:P,A[f++]=K&1?j:P;for(;M<I;M++)G===0&&(K=m[d++],G=128),A[f++]=K&G?j:P,G>>=1}for(;f<N;)A[f++]=0;s.putImageData(c,0,v*rs)}}else if(e.kind===Mc.RGBA_32BPP){for(b=0,w=n*rs*4,v=0;v<a;v++)g.set(m.subarray(d,d+w)),d+=w,s.putImageData(c,0,b),b+=rs;v<l&&(w=n*i*4,g.set(m.subarray(d,d+w)),s.putImageData(c,0,b))}else if(e.kind===Mc.RGB_24BPP)for(_=rs,w=n*_,v=0;v<l;v++){for(v>=a&&(_=i,w=n*_),f=0,b=w;b--;)g[f++]=m[d++],g[f++]=m[d++],g[f++]=m[d++],g[f++]=255;s.putImageData(c,0,v*rs)}else throw new Error(`bad image kind: ${e.kind}`)}function KS(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%rs,a=(t-i)/rs,l=i===0?a:a+1,c=s.createImageData(n,rs);let d=0;const f=e.data,m=c.data;for(let g=0;g<l;g++){const v=g<a?rs:i;({srcPos:d}=$B({src:f,srcPos:d,dest:m,width:n,height:v,nonBlackColor:0})),s.putImageData(c,0,g*rs)}}function bc(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function Gd(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function JS(s,e){if(e)return!0;Te.singularValueDecompose2dScale(s,bs);const t=Math.fround(si.pixelRatio*Da.PDF_TO_CSS_UNITS);return bs[0]<=t&&bs[1]<=t}const qB=["butt","round","square"],WB=["miter","round","bevel"],YB={},QS={};class Xo{constructor(e,t,n,i,a,{optionalContentConfig:l,markedContentStack:c=null},d,f,m){this.ctx=e,this.current=new YS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new GB(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=c,n){const d=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Bt(this.compositeCtx))}this.ctx.save(),Gd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Bt(this.ctx)}executeOperatorList(e,t,n,i,a){const l=e.argsArray,c=e.fnArray;let d=t||0;const f=l.length;if(f===d)return d;const m=f-d>WS&&typeof n=="function",g=m?Date.now()+HB:0;let v=0;const b=this.commonObjs,_=this.objs;let w,E;for(;;){if(i!==void 0&&d===i.nextBreakPoint)return i.breakIt(d,n),d;if(!a||a(d))if(w=c[d],E=l[d]??null,w!==cl.dependency)E===null?this[w](d):this[w](d,...E);else for(const A of E){this.dependencyTracker?.recordNamedData(A,d);const N=A.startsWith("g_")?b:_;if(!N.has(A))return N.get(A,n),d}if(d++,d===f)return d;if(m&&++v>WS){if(Date.now()>g)return n(),d;v=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),c=n,d=i,f="prescale1",m,g;for(;a>2&&c>1||l>2&&d>1;){let v=c,b=d;a>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/v),l>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/b),m=this.cachedCanvases.getCanvas(f,v,b),g=m.context,g.clearRect(0,0,v,b),g.drawImage(e,0,0,c,d,0,0,v,b),e=m.canvas,c=v,d=b,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e,t){const n=this.ctx,{width:i,height:a}=t,l=this.current.fillColor,c=this.current.patternFill,d=Bt(n);let f,m,g,v;if((t.bitmap||t.data)&&t.count>1){const G=t.bitmap||t.data.buffer;m=JSON.stringify(c?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(G),f||(f=new Map,this._cachedBitmapsMap.set(G,f));const K=f.get(m);if(K&&!c){const ae=Math.round(Math.min(d[0],d[2])+d[4]),X=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(e,Ps.transformAndFill),{canvas:K,offsetX:ae,offsetY:X}}g=K}g||(v=this.cachedCanvases.getCanvas("maskCanvas",i,a),KS(v.context,t));let b=Te.transform(d,[1/i,0,0,-1/a,0,0]);b=Te.transform(b,[1,0,0,1,0,-a]);const _=Uo.slice();Te.axialAlignedBoundingBox([0,0,i,a],b,_);const[w,E,A,N]=_,T=Math.round(A-w)||1,j=Math.round(N-E)||1,P=this.cachedCanvases.getCanvas("fillCanvas",T,j),L=P.context,M=w,I=E;L.translate(-M,-I),L.transform(...b),g||(g=this._scaleImage(v.canvas,fi(L)),g=g.img,f&&c&&f.set(m,g)),L.imageSmoothingEnabled=JS(Bt(L),t.interpolate),Vd(L,g,0,0,g.width,g.height,0,0,i,a),L.globalCompositeOperation="source-in";const F=Te.transform(fi(L),[1,0,0,1,-M,-I]);return L.fillStyle=c?l.getPattern(n,this,F,Dn.FILL,e):l,L.fillRect(0,0,i,a),f&&!c&&(this.cachedCanvases.delete("fillCanvas"),f.set(m,P.canvas)),this.dependencyTracker?.recordDependencies(e,Ps.transformAndFill),{canvas:P.canvas,offsetX:Math.round(M),offsetY:Math.round(I)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=qB[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=WB[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[n,i]of t)switch(n){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const l=this.ctx=a.context;l.setTransform(this.suspendedCtx.getTransform()),bc(this.suspendedCtx,l),VB(l,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const a=i[0],l=i[1],c=i[2]-a,d=i[3]-l;c===0||d===0||(this.genericComposeSMask(t.context,n,c,d,t.subtype,t.backdrop,t.transferMap,a,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,a,l,c,d,f,m,g){let v=e.canvas,b=d-m,_=f-g;if(l)if(b<0||_<0||b+n>v.width||_+i>v.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,i),A=E.context;A.drawImage(v,-b,-_),A.globalCompositeOperation="destination-atop",A.fillStyle=l,A.fillRect(0,0,n,i),A.globalCompositeOperation="source-over",v=E.canvas,b=_=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(b,_,n,i),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=l,e.fillRect(b,_,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const w=new Path2D;w.rect(d,f,n,i),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(v,b,_,n,i,d,f,n,i),t.restore()}save(e){this.inSMaskMode&&bc(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&bc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,a,l,c){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,a,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[a]=n;if(!i){a||=n[0]=new Path2D,this[t](e,a);return}if(this.dependencyTracker!==null){const l=t===cl.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-l,i[2]+l,i[1]-l,i[3]+l).recordDependencies(e,["transform"])}if(!(a instanceof Path2D)){const l=n[0]=new Path2D;for(let c=0,d=a.length;c<d;)switch(a[c++]){case Bd.moveTo:l.moveTo(a[c++],a[c++]);break;case Bd.lineTo:l.lineTo(a[c++],a[c++]);break;case Bd.curveTo:l.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);break;case Bd.closePath:l.closePath();break;default:Ke(`Unrecognized drawing path operator: ${a[c-1]}`);break}a=l}Te.axialAlignedBoundingBox(i,Bt(this.ctx),this.current.minMax),this[t](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const l=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,fi(i),Dn.STROKE,e),l){const c=new Path2D;c.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,Ps.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Dn.STROKE,Bt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){const i=this.ctx,a=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const f=a.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=a.getPattern(i,this,fi(i),Dn.FILL,e),f){const m=new Path2D;m.addPath(t,i.getTransform().invertSelf().multiplySelf(f)),t=m}c=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,Ps.fill),c&&(i.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,d)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,Ps.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=YB}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=QS}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,a=n.getTransform().invertSelf();for(const{transform:l,x:c,y:d,fontSize:f,path:m}of t)m&&i.addPath(m,new DOMMatrix(l).preMultiplySelf(a).translate(c,d).scale(f,-f));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||Lg,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Ke("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const l=i.loadedName||"sans-serif",c=i.systemFontInfo?.css||`"${l}", ${i.fallbackName}`;let d="normal";i.black?d="900":i.bold&&(d="bold");const f=i.italic?"italic":"normal";let m=n;n<GS?m=GS:n>qS&&(m=qS),this.current.fontSizeScale=n/m,this.ctx.font=`${f} ${d} ${m}px ${c}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#s(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}paintChar(e,t,n,i,a,l){const c=this.ctx,d=this.current,f=d.font,m=d.textRenderingMode,g=d.fontSize/d.fontSizeScale,v=m&jn.FILL_STROKE_MASK,b=!!(m&jn.ADD_TO_PATH_FLAG),_=d.patternFill&&!f.missingFile,w=d.patternStroke&&!f.missingFile;let E;if((f.disableFontFace||b||_||w)&&!f.missingFile&&(E=f.getPathGenerator(this.commonObjs,t)),E&&(f.disableFontFace||_||w)){c.save(),c.translate(n,i),c.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,c,f);let A;if(v===jn.FILL||v===jn.FILL_STROKE)if(a){A=c.getTransform(),c.setTransform(...a);const N=this.#s(E,A,a);c.fill(N)}else c.fill(E);if(v===jn.STROKE||v===jn.FILL_STROKE)if(l){A||=c.getTransform(),c.setTransform(...l);const{a:N,b:T,c:j,d:P}=A,L=Te.inverseTransform(l),M=Te.transform([N,T,j,P,0,0],L);Te.singularValueDecompose2dScale(M,bs),c.lineWidth*=Math.max(bs[0],bs[1])/g,c.stroke(this.#s(E,A,l))}else c.lineWidth/=g,c.stroke(E);c.restore()}else(v===jn.FILL||v===jn.FILL_STROKE)&&(c.fillText(t,n,i),this.dependencyTracker?.recordCharacterBBox(e,c,f,g,n,i,()=>c.measureText(t))),(v===jn.STROKE||v===jn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,c,f,g,n,i,()=>c.measureText(t)).recordDependencies(e,Ps.stroke),c.strokeText(t,n,i));b&&((this.pendingTextPaths||=[]).push({transform:Bt(c),x:n,y:i,fontSize:g,path:E}),this.dependencyTracker?.recordCharacterBBox(e,c,f,g,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return et(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Ps.showText).resetBBox(e),this.current.textRenderingMode&jn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const a=n.fontSize;if(a===0){this.dependencyTracker?.recordOperation(e);return}const l=this.ctx,c=n.fontSizeScale,d=n.charSpacing,f=n.wordSpacing,m=n.fontDirection,g=n.textHScale*m,v=t.length,b=i.vertical,_=b?1:-1,w=i.defaultVMetrics,E=a*n.fontMatrix[0],A=n.textRenderingMode===jn.FILL&&!i.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),m>0?l.scale(g,-1):l.scale(g,1);let N,T;if(n.patternFill){l.save();const I=n.fillColor.getPattern(l,this,fi(l),Dn.FILL,e);N=Bt(l),l.restore(),l.fillStyle=I}if(n.patternStroke){l.save();const I=n.strokeColor.getPattern(l,this,fi(l),Dn.STROKE,e);T=Bt(l),l.restore(),l.strokeStyle=I}let j=n.lineWidth;const P=n.textMatrixScale;if(P===0||j===0){const I=n.textRenderingMode&jn.FILL_STROKE_MASK;(I===jn.STROKE||I===jn.FILL_STROKE)&&(j=this.getSinglePixelWidth())}else j/=P;if(c!==1&&(l.scale(c,c),j/=c),l.lineWidth=j,i.isInvalidPDFjsFont){const I=[];let F=0;for(const K of t)I.push(K.unicode),F+=K.width;const G=I.join("");if(l.fillText(G,0,0),this.dependencyTracker!==null){const K=l.measureText(G);this.dependencyTracker.recordBBox(e,this.ctx,-K.actualBoundingBoxLeft,K.actualBoundingBoxRight,-K.actualBoundingBoxAscent,K.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=F*E*g,l.restore(),this.compose();return}let L=0,M;for(M=0;M<v;++M){const I=t[M];if(typeof I=="number"){L+=_*I*a/1e3;continue}let F=!1;const G=(I.isSpace?f:0)+d,K=I.fontChar,ae=I.accent;let X,H,ie=I.width;if(b){const U=I.vmetric||w,z=-(I.vmetric?U[1]:ie*.5)*E,le=U[2]*E;ie=U?-U[0]:ie,X=z/c,H=(L+le)/c}else X=L/c,H=0;let R;if(i.remeasure&&ie>0){R=l.measureText(K);const U=R.width*1e3/a*c;if(ie<U&&this.isFontSubpixelAAEnabled){const z=ie/U;F=!0,l.save(),l.scale(z,1),X/=z}else ie!==U&&(X+=(ie-U)/2e3*a/c)}if(this.contentVisible&&(I.isInFont||i.missingFile)){if(A&&!ae)l.fillText(K,X,H),this.dependencyTracker?.recordCharacterBBox(e,l,R?{bbox:null}:i,a/c,X,H,()=>R??l.measureText(K));else if(this.paintChar(e,K,X,H,N,T),ae){const U=X+a*ae.offset.x/c,z=H-a*ae.offset.y/c;this.paintChar(e,ae.fontChar,U,z,N,T)}}const $=b?ie*E-G*m:ie*E+G*m;L+=$,F&&l.restore()}b?n.y-=L:n.x+=L*g,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,i=this.current,a=i.font,l=i.fontSize,c=i.fontDirection,d=a.vertical?1:-1,f=i.charSpacing,m=i.wordSpacing,g=i.textHScale*c,v=i.fontMatrix||Lg,b=t.length,_=i.textRenderingMode===jn.INVISIBLE;let w,E,A,N;if(_||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(g,c);const T=this.dependencyTracker;for(this.dependencyTracker=T?new Ch(T,e):null,w=0;w<b;++w){if(E=t[w],typeof E=="number"){N=d*E*l/1e3,this.ctx.translate(N,0),i.x+=N*g;continue}const j=(E.isSpace?m:0)+f,P=a.charProcOperatorList[E.operatorListId];P?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...v),this.executeOperatorList(P),this.restore()):Ke(`Type3 character "${E.operatorListId}" is not available.`);const L=[E.width,0];Te.applyTransform(L,v),A=L[0]*l+j,n.translate(A,0),i.x+=A*g}n.restore(),T&&(this.dependencyTracker=T)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,a,l,c){const d=new Path2D;d.rect(i,a,l-i,c-a),this.ctx.clip(d),this.dependencyTracker?.recordBBox(e,this.ctx,i,l,a,c).recordClipBox(e,this.ctx,i,l,a,c),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const i=this.baseTransform||Bt(this.ctx),a={createCanvasGraphics:(l,c)=>new Xo(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Ch(this.dependencyTracker,c,!0):null)};n=new ay(t,this.ctx,a,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=UB(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,fi(n),Dn.SHADING,e);const a=fi(n);if(a){const{width:l,height:c}=n.canvas,d=Uo.slice();Te.axialAlignedBoundingBox([0,0,l,c],a,d);const[f,m,g,v]=d;this.ctx.fillRect(f,m,g-f,v-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Ps.transform).recordDependencies(e,Ps.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){At("Should not call beginInlineImage")}beginImageData(){At("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Bt(this.ctx),n)){Te.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,a,l,c]=n,d=new Path2D;d.rect(i,a,l-i,c-a),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(e,this.ctx,i,l,a,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||nf("TODO: Support non-isolated groups."),t.knockout&&Ke("Knockout groups not supported.");const i=Bt(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=Uo.slice();Te.axialAlignedBoundingBox(t.bbox,Bt(n),a);const l=[0,0,n.canvas.width,n.canvas.height];a=Te.intersect(a,l)||[0,0,0,0];const c=Math.floor(a[0]),d=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-c,1),m=Math.max(Math.ceil(a[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,m]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(g,f,m),b=v.context;b.translate(-c,-d),b.transform(...i);let _=new Path2D;const[w,E,A,N]=t.bbox;if(_.rect(w,E,A-w,N-E),t.matrix){const T=new Path2D;T.addPath(_,new DOMMatrix(t.matrix)),_=T}b.clip(_),t.smask&&this.smaskStack.push({canvas:v.canvas,context:b,offsetX:c,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(c,d),n.save()),bc(n,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Bt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const l=Uo.slice();Te.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,n,i,a,l){if(this.#e(),Gd(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],d=n[3]-n[1];if(l&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=d,Te.singularValueDecompose2dScale(Bt(this.ctx),bs);const{viewportScale:f}=this,m=Math.ceil(c*this.outputScaleX*f),g=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,g);const{canvas:v,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(bs[0],0,0,-bs[1],0,d*bs[1]),Gd(this.ctx)}else{Gd(this.ctx),this.endPath(e);const f=new Path2D;f.rect(n[0],n[1],c,d),this.ctx.clip(f)}}this.current=new YS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const i=this.ctx,a=this._createMaskCanvas(e,t),l=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(l,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+l.width,a.offsetY,a.offsetY+l.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,a=0,l,c){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const f=Bt(d);d.transform(n,i,a,l,0,0);const m=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,m.offsetX-f[4],m.offsetY-f[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,v=c.length;g<v;g+=2){const b=Te.transform(f,[n,i,a,l,c[g],c[g+1]]);d.drawImage(m.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(e,this.ctx,b[4],b[4]+m.canvas.width,b[5],b[5]+m.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Ps.transformAndFill);for(const l of t){const{data:c,width:d,height:f,transform:m}=l,g=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=g.context;v.save();const b=this.getObject(e,c,l);KS(v,b),v.globalCompositeOperation="source-in",v.fillStyle=a?i.getPattern(v,this,fi(n),Dn.FILL,e):i,v.fillRect(0,0,d,f),v.restore(),n.save(),n.transform(...m),n.scale(1,-1),Vd(n,g.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,d,0,f),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Ke("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,a){if(!this.contentVisible)return;const l=this.getObject(e,t);if(!l){Ke("Dependent image isn't ready yet");return}const c=l.width,d=l.height,f=[];for(let m=0,g=a.length;m<g;m+=2)f.push({transform:[n,0,0,i,a[m],a[m+1]],x:0,y:0,w:c,h:d});this.paintInlineImageXObjectGroup(e,l,f)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,i),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",a.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const n=t.width,i=t.height,a=this.ctx;this.save(e);const{filter:l}=a;l!=="none"&&l!==""&&(a.filter="none"),a.scale(1/n,-1/i);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const m=this.cachedCanvases.getCanvas("inlineImage",n,i).context;XS(m,t),c=this.applyTransferMapsToCanvas(m)}const d=this._scaleImage(c,fi(a));a.imageSmoothingEnabled=JS(Bt(a),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,a,0,n,-i,0).recordDependencies(e,Ps.imageXObject).recordOperation(e),Vd(a,d.img,0,0,d.paintWidth,d.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const l=t.width,c=t.height,f=this.cachedCanvases.getCanvas("inlineImage",l,c).context;XS(f,t),a=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(e);for(const l of n)i.save(),i.transform(...l.transform),i.scale(1,-1),Vd(i,a,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Ps.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===QS?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Bt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:a}=this.ctx.getTransform();let l,c;if(n===0&&i===0){const d=Math.abs(t),f=Math.abs(a);if(d===f)if(e===0)l=c=1/d;else{const m=d*e;l=c=m<1?1/m:1}else if(e===0)l=1/d,c=1/f;else{const m=d*e,g=f*e;l=m<1?1/m:1,c=g<1?1/g:1}}else{const d=Math.abs(t*a-n*i),f=Math.hypot(t,n),m=Math.hypot(i,a);if(e===0)l=m/d,c=f/d;else{const g=e*d;l=m>g?m/g:1,c=f>g?f/g:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[a,l]=this.getScaleForStroking();if(a===l){n.lineWidth=(i||1)*a,n.stroke(e);return}const c=n.getLineDash();t&&n.save(),n.scale(a,l),sg.a=1/a,sg.d=1/l;const d=new Path2D;if(d.addPath(e,sg),c.length>0){const f=Math.max(a,l);n.setLineDash(c.map(m=>m/f)),n.lineDashOffset/=f}n.lineWidth=i||1,n.stroke(d),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const s in cl)Xo.prototype[s]!==void 0&&(Xo.prototype[cl[s]]=Xo.prototype[s]);class Ko{#e;#t;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,n={};let i=0;for(const f of Ko.strings){const m=t.encode(e[f]);n[f]=m,i+=4+m.length}const a=new ArrayBuffer(i),l=new Uint8Array(a),c=new DataView(a);let d=0;for(const f of Ko.strings){const m=n[f],g=m.length;c.setUint32(d,g),l.set(m,d+4),d+=4+g}return lt(d===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}#n(e){lt(e<Ko.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Jo{#e;#t;#s;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,n={};let i=0;for(const v of Jo.strings){const b=t.encode(e[v]);n[v]=b,i+=4+b.length}i+=4;let a,l,c=1+i;e.style&&(a=t.encode(e.style.style),l=t.encode(e.style.weight),c+=4+a.length+4+l.length);const d=new ArrayBuffer(c),f=new Uint8Array(d),m=new DataView(d);let g=0;m.setUint8(g++,e.guessFallback?1:0),m.setUint32(g,0),g+=4,i=0;for(const v of Jo.strings){const b=n[v],_=b.length;i+=4+_,m.setUint32(g,_),f.set(b,g+4),g+=4+_}return m.setUint32(g-i-4,i),e.style&&(m.setUint32(g,a.length),f.set(a,g+4),g+=4+a.length,m.setUint32(g,l.length),f.set(l,g+4),g+=4+l.length),lt(g<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(g)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){lt(e<Jo.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),n=this.#s.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),a=this.#s.decode(new Uint8Array(this.#e,e+4,i));return{style:n,weight:a}}}class xt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#s=this.#t+1+8;static#n=this.#s+1+48;static#a=this.#n+1+6;#i;#r;#o;constructor({data:e,extra:t}){this.#i=e,this.#r=new TextDecoder,this.#o=new DataView(this.#i),t&&Object.assign(this,t)}#c(e){lt(e<xt.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,i=this.#o.getUint8(t)>>n&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return lt(e<xt.numbers.length,"Invalid number index"),this.#o.getFloat64(xt.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=xt.#t;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<4;i++)n.push(this.#o.getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=xt.#s;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<6;i++)n.push(this.#o.getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=xt.#n;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<3;i++)n.push(this.#o.getInt16(e,!0)),e+=2;return n}#h(e){lt(e<xt.strings.length,"Invalid string index");let t=xt.#a+4;for(let a=0;a<e;a++)t+=this.#o.getUint32(t)+4;const n=this.#o.getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(this.#i,t+4,n)),this.#r.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=xt.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);if(a!==0)return new Uint8Array(this.#i,e+4,a)}clearData(){let e=xt.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);new Uint8Array(this.#i,e+4,a).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=xt.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#i,e+4,i)),new Ko(a.buffer)}get systemFontInfo(){let e=xt.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(this.#i,e+4,n)),new Jo(i.buffer)}static write(e){const t=e.systemFontInfo?Jo.write(e.systemFontInfo):null,n=e.cssFontInfo?Ko.write(e.cssFontInfo):null,i=new TextEncoder,a={};let l=0;for(const w of xt.strings)a[w]=i.encode(e[w]),l+=4+a[w].length;const c=xt.#a+4+l+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),d=new ArrayBuffer(c),f=new Uint8Array(d),m=new DataView(d);let g=0;const v=xt.bools.length;let b=0,_=0;for(let w=0;w<v;w++){const E=e[xt.bools[w]];b|=(E===void 0?0:E?2:1)<<_,_+=2,(_===8||w===v-1)&&(m.setUint8(g++,b),b=0,_=0)}lt(g===xt.#e,"FontInfo.write: Boolean properties offset mismatch");for(const w of xt.numbers)m.setFloat64(g,e[w]),g+=8;if(lt(g===xt.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){m.setUint8(g++,4);for(const w of e.bbox)m.setInt16(g,w,!0),g+=2}else m.setUint8(g++,0),g+=8;if(lt(g===xt.#s,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){m.setUint8(g++,6);for(const w of e.fontMatrix)m.setFloat64(g,w,!0),g+=8}else m.setUint8(g++,0),g+=48;if(lt(g===xt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){m.setUint8(g++,1);for(const w of e.defaultVMetrics)m.setInt16(g,w,!0),g+=2}else m.setUint8(g++,0),g+=6;lt(g===xt.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(xt.#a,0),g+=4;for(const w of xt.strings){const E=a[w],A=E.length;m.setUint32(g,A),f.set(E,g+4),g+=4+A}if(m.setUint32(xt.#a,g-xt.#a-4),!t)m.setUint32(g,0),g+=4;else{const w=t.byteLength;m.setUint32(g,w),lt(g+4+w<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(t),g+4),g+=4+w}if(!n)m.setUint32(g,0),g+=4;else{const w=n.byteLength;m.setUint32(g,w),lt(g+4+w<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),g+4),g+=4+w}return e.data===void 0?(m.setUint32(g,0),g+=4):(m.setUint32(g,e.data.length),f.set(e.data,g+4),g+=4+e.data.length),lt(g<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(g)}}class Fr{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class XB{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const Io=Symbol("INTERNAL");class KB{#e=!1;#t=!1;#s=!1;#n=!0;constructor(e,{name:t,intent:n,usage:i,rbGroups:a}){this.#e=!!(e&vs.DISPLAY),this.#t=!!(e&vs.PRINT),this.name=t,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==Io&&At("Internal method `_setVisible` called."),this.#s=n,this.#n=t}}class JB{#e=null;#t=new Map;#s=null;#n=null;constructor(e,t=vs.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const n of e.groups)this.#t.set(n.id,new KB(t,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible(Io,!1);for(const n of e.on)this.#t.get(n)._setVisible(Io,!0);for(const n of e.off)this.#t.get(n)._setVisible(Io,!1);this.#s=this.getHash()}}#a(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const a=e[i];let l;if(Array.isArray(a))l=this.#a(a);else if(this.#t.has(a))l=this.#t.get(a).visible;else return Ke(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return nf("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ke(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Ke(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Ke(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Ke(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Ke(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ke(`Unknown optional content policy ${e.policy}.`),!0}return Ke(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){const i=this.#t.get(e);if(!i){Ke(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const l of a)l!==e&&this.#t.get(l)?._setVisible(Io,!1,!0);i._setVisible(Io,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=this.#t.get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new AC;for(const[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class QB{constructor(e,{disableRange:t=!1,disableStream:n=!1}){lt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:l,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,a?.length>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),e.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});lt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new ZB(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new e5(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class ZB{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=rf(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class e5{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function t5(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let m=c(t);return m=unescape(m),m=d(m),m=f(m),a(m)}if(t=l(s),t){const m=f(t);return a(m)}if(t=n("filename","i").exec(s),t){t=t[1];let m=c(t);return m=f(m),a(m)}function n(m,g){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(m,g){if(m){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(m,{fatal:!0}),b=lu(g);g=v.decode(b),e=!1}catch{}}return g}function a(m){return e&&/[\x80-\xff]/.test(m)&&(m=i("utf-8",m),e&&(m=i("iso-8859-1",m))),m}function l(m){const g=[];let v;const b=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(m))!==null;){let[,w,E,A]=v;if(w=parseInt(w,10),w in g){if(w===0)break;continue}g[w]=[E,A]}const _=[];for(let w=0;w<g.length&&w in g;++w){let[E,A]=g[w];A=c(A),E&&(A=unescape(A),w===0&&(A=d(A))),_.push(A)}return _.join("")}function c(m){if(m.startsWith('"')){const g=m.slice(1).split('\\"');for(let v=0;v<g.length;++v){const b=g[v].indexOf('"');b!==-1&&(g[v]=g[v].slice(0,b),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}m=g.join('"')}return m}function d(m){const g=m.indexOf("'");if(g===-1)return m;const v=m.slice(0,g),_=m.slice(g+1).replace(/^[^']*'/,"");return i(v,_)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,b,_){if(b==="q"||b==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,E){return String.fromCharCode(parseInt(E,16))}),i(v,_);try{_=atob(_)}catch{}return i(v,_)})}return""}function DC(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function af(s){return URL.parse(s)?.origin??null}function MC({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(s.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function OC(s){const e=s.get("Content-Disposition");if(e){let t=t5(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(rf(t))return t}return null}function fu(s,e){return new Gc(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function PC(s){return s===200||s===206}function LC(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function IC(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Ke(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class n5{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=DC(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new s5(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new i5(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class s5{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,LC(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=af(a.url),!PC(a.status))throw fu(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:c,suggestedLength:d}=MC({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=OC(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ir("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:IC(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class i5{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${n-1}`);const l=i.url;fetch(l,LC(a,this._withCredentials,this._abortController)).then(c=>{const d=af(c.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!PC(c.status))throw fu(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:IC(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const ig=200,rg=206;function r5(s){const e=s.response;return typeof e!="string"?e:lu(e).buffer}class a5{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=DC(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,l]of this.headers)t.setRequestHeader(a,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=rg):i.expectedStatus=ig,t.responseType="arraybuffer",lt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||ig;if(!(a===ig&&n.expectedStatus===rg)&&a!==n.expectedStatus){n.onError(i.status);return}const c=r5(i);if(a===rg){const d=i.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:c}):(Ke('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class o5{constructor(e){this._source=e,this._manager=new a5(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l5(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new c5(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class l5{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=af(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...f]=c.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=MC({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=OC(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=fu(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class c5{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=af(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=fu(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const u5=/^[a-z][a-z0-9\-+.]+:/i;function d5(s){if(u5.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}class h5{constructor(e){this.source=e,this.url=d5(e.url),lt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new f5(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new p5(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class f5{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=fu(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ir("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class p5{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const xc=Symbol("INITIAL_DATA");class BC{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:xc}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const n=this.#e[e];if(!n||n.data===xc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#e[e];return!!t&&t.data!==xc}delete(e){const t=this.#e[e];return!t||t.data===xc?!1:(delete this.#e[e],!0)}resolve(e,t=null){const n=this.#t(e);n.data=t,n.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==xc&&(yield[e,t])}}}const m5=1e5,ZS=30;let Wc=class Ls{#e=Promise.withResolvers();#t=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#i=null;#r=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#v=null;static#b=new Map;static#y=new Map;static#E=new WeakMap;static#_=null;static#x=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(d){d.enqueue(e),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=n.scale*si.pixelRatio,this.#h=n.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:l,pageY:c}=n.rawDims;this.#v=[1,0,0,-1,-l,c+a],this.#o=i,this.#r=a,Ls.#k(),qr(t,n),this.#e.promise.finally(()=>{Ls.#x.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=wn.platform;return et(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#a??=t.lang,Object.assign(this.#f,t.styles),this.#T(t.items),e()},this.#e.reject)};return this.#c=this.#p.getReader(),Ls.#x.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const n=e.scale*si.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,qr(this.#l,{rotation:i})),n!==this.#d){t?.(),this.#d=n;const a={div:null,properties:null,ctx:Ls.#j(this.#a)};for(const l of this.#u)a.properties=this.#m.get(l),a.div=l,this.#A(a)}}cancel(){const e=new ir("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(e){if(this.#s)return;this.#i.ctx??=Ls.#j(this.#a);const t=this.#u,n=this.#g;for(const i of e){if(t.length>m5){Ke("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),a.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(i.str),this.#S(i)}}#S(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const i=Te.transform(this.#v,e.transform);let a=Math.atan2(i[1],i[0]);const l=this.#f[e.fontName];l.vertical&&(a+=Math.PI/2);let c=this.#n&&l.fontSubstitution||l.fontFamily;c=Ls.fontFamilyMap.get(c)||c;const d=Math.hypot(i[2],i[3]),f=d*Ls.#I(c,l,this.#a);let m,g;a===0?(m=i[4],g=i[5]-f):(m=i[4]+f*Math.sin(a),g=i[5]-f*Math.cos(a));const v="calc(var(--total-scale-factor) *",b=t.style;this.#t===this.#l?(b.left=`${(100*m/this.#o).toFixed(2)}%`,b.top=`${(100*g/this.#r).toFixed(2)}%`):(b.left=`${v}${m.toFixed(2)}px)`,b.top=`${v}${g.toFixed(2)}px)`),b.fontSize=`${v}${(Ls.#_*d).toFixed(2)}px)`,b.fontFamily=c,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let _=!1;if(e.str.length>1)_=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);w!==E&&Math.max(w,E)/Math.min(w,E)>1.5&&(_=!0)}if(_&&(n.canvasWidth=l.vertical?e.height:e.width),this.#m.set(t,n),this.#i.div=t,this.#i.properties=n,this.#A(this.#i),n.hasText&&this.#t.append(t),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#t.append(w)}}#A(e){const{div:t,properties:n,ctx:i}=e,{style:a}=t;let l="";if(Ls.#_>1&&(l=`scale(${1/Ls.#_})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=a,{canvasWidth:d,fontSize:f}=n;Ls.#N(i,f*this.#d,c);const{width:m}=i.measureText(t.textContent);m>0&&(l=`scaleX(${d*this.#d/m}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(a.transform=l)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#j(e=null){let t=this.#y.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#N(e,t,n){const i=this.#E.get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)}static#k(){if(this.#_!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#_=e.getBoundingClientRect().height,e.remove()}static#I(e,t,n){const i=this.#b.get(e);if(i)return i;const a=this.#j(n);a.canvas.width=a.canvas.height=ZS,this.#N(a,ZS,e);const l=a.measureText(""),c=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let f=.8;return c?f=c/(c+d):(wn.platform.isFirefox&&Ke("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?f=t.ascent:t.descent&&(f=1+t.descent)),this.#b.set(e,f),f}};const g5=100;function oy(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new ly,{docId:t}=e,n=s.url?AB(s.url):null,i=s.data?EB(s.data):null,a=s.httpHeaders||null,l=s.withCredentials===!0,c=s.password??null,d=s.range instanceof cy?s.range:null,f=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let m=s.worker instanceof ul?s.worker:null;const g=s.verbosity,v=typeof s.docBaseUrl=="string"&&!uu(s.docBaseUrl)?s.docBaseUrl:null,b=Fd(s.cMapUrl),_=s.cMapPacked!==!1,w=s.CMapReaderFactory||($n?DB:zS),E=Fd(s.iccUrl),A=Fd(s.standardFontDataUrl),N=s.StandardFontDataFactory||($n?MB:FS),T=Fd(s.wasmUrl),j=s.WasmFactory||($n?OB:US),P=s.stopAtErrors!==!0,L=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,M=s.isEvalSupported!==!1,I=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!$n,F=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!$n&&(wn.platform.isFirefox||!globalThis.chrome),G=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,K=typeof s.disableFontFace=="boolean"?s.disableFontFace:$n,ae=s.fontExtraProperties===!0,X=s.enableXfa===!0,H=s.ownerDocument||globalThis.document,ie=s.disableRange===!0,R=s.disableStream===!0,$=s.disableAutoFetch===!0,U=s.pdfBug===!0,z=s.CanvasFactory||($n?RB:NB),le=s.FilterFactory||($n?jB:kB),k=s.enableHWA===!0,O=s.useWasm!==!1,B=d?d.length:s.length??NaN,q=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!$n&&!K,J=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(w===zS&&N===FS&&j===US&&b&&A&&T&&Nc(b,document.baseURI)&&Nc(A,document.baseURI)&&Nc(T,document.baseURI)),ue=null;rB(g);const ee={canvasFactory:new z({ownerDocument:H,enableHWA:k}),filterFactory:new le({docId:t,ownerDocument:H}),cMapReaderFactory:J?null:new w({baseUrl:b,isCompressed:_}),standardFontDataFactory:J?null:new N({baseUrl:A}),wasmFactory:J?null:new j({baseUrl:T})};m||(m=ul.create({verbosity:g,port:Fr.workerPort}),e._worker=m);const Y={docId:t,apiVersion:"5.4.296",data:i,password:c,disableAutoFetch:$,rangeChunkSize:f,length:B,docBaseUrl:v,enableXfa:X,evaluatorOptions:{maxImageSize:L,disableFontFace:K,ignoreErrors:P,isEvalSupported:M,isOffscreenCanvasSupported:I,isImageDecoderSupported:F,canvasMaxAreaInBytes:G,fontExtraProperties:ae,useSystemFonts:q,useWasm:O,useWorkerFetch:J,cMapUrl:b,iccUrl:E,standardFontDataUrl:A,wasmUrl:T}},oe={ownerDocument:H,pdfBug:U,styleElement:ue,loadingParams:{disableAutoFetch:$,enableXfa:X}};return m.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ge=m.messageHandler.sendWithPromise("GetDocRequest",Y,i?[i.buffer]:null);let xe;if(d)xe=new QB(d,{disableRange:ie,disableStream:R});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const be=Nc(n)?n5:$n?h5:o5;xe=new be({url:n,length:B,httpHeaders:a,withCredentials:l,rangeChunkSize:f,disableRange:ie,disableStream:R})}return ge.then(be=>{if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Ge=new kc(t,be,m.port),Ie=new b5(Ge,e,xe,oe,ee,k);e._transport=Ie,Ge.send("Ready",null)})}).catch(e._capability.reject),e}class ly{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${ly.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let cy=class{#e=Promise.withResolvers();#t=[];#s=[];#n=[];#a=[];constructor(e,t,n=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#s.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const n of this.#a)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const n of this.#n)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#s)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){At("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class v5{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return et(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class y5{#e=!1;constructor(e,t,n,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new DS:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new BC,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new cu({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return et(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:a=xi.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:g=null,isEditing:v=!1,recordOperations:b=!1,operationsFilter:_=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(i,a,g,v),{renderingIntent:E,cacheKey:A}=w;this.#e=!1,d||=this._transport.getOptionalContentConfig(E);let N=this._intentStates.get(A);N||(N=Object.create(null),this._intentStates.set(A,N)),N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null);const T=!!(E&vs.PRINT);N.displayReadyCapability||(N.displayReadyCapability=Promise.withResolvers(),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const j=!!(this._pdfBug&&globalThis.StepperManager?.enabled),P=!this.recordedBBoxes&&(b||j),L=F=>{if(N.renderTasks.delete(M),P){const G=M.gfx?.dependencyTracker.take();G&&(M.stepper&&M.stepper.setOperatorBBoxes(G,M.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=G))}T&&(this.#e=!0),this.#t(),F?(M.capability.reject(F),this._abortOperatorList({intentState:N,reason:F instanceof Error?F:new Error(F)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new $o({callback:L,params:{canvas:t,canvasContext:e,dependencyTracker:P?new LB(t,N.operatorList.length,j):null,viewport:n,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:N.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:_});(N.renderTasks||=new Set).add(M);const I=M.task;return Promise.all([N.displayReadyCapability.promise,d]).then(([F,G])=>{if(this.destroyed){L();return}if(this._stats?.time("Rendering"),!(G.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:F,optionalContentConfig:G}),M.operatorListChanged()}).catch(L),I}getOperatorList({intent:e="display",annotationMode:t=xi.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(e,t,n,i,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>qc.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function a(){l.read().then(function({value:d,done:f}){if(f){n(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),a()},i)}const l=t.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new DS),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},l).getReader(),f=this._intentStates.get(t);f.streamReader=d;const m=()=>{d.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),m())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#t()}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};m()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof sf){let i=g5;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new ir(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Br,Xs,Ki,Aa,Dh,Ea,Ca,Hn,uh,zC,FC,jc,tl,dh;const Ot=class Ot{constructor({name:e=null,port:t=null,verbosity:n=aB()}={}){ui(this,Hn);ui(this,Br,Promise.withResolvers());ui(this,Xs,null);ui(this,Ki,null);ui(this,Aa,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(Mt(Ot,Ca).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Mt(Ot,Ca).set(t,this),di(this,Hn,zC).call(this,t)}else di(this,Hn,FC).call(this)}get promise(){return Mt(this,Br).promise}get port(){return Mt(this,Ki)}get messageHandler(){return Mt(this,Xs)}destroy(){this.destroyed=!0,Mt(this,Aa)?.terminate(),ns(this,Aa,null),Mt(Ot,Ca).delete(Mt(this,Ki)),ns(this,Ki,null),Mt(this,Xs)?.destroy(),ns(this,Xs,null)}static create(e){const t=Mt(this,Ca).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ot(e)}static get workerSrc(){if(Fr.workerSrc)return Fr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return et(this,"_setupFakeWorkerGlobal",(async()=>Mt(this,tl,dh)?Mt(this,tl,dh):(await import(this.workerSrc)).WorkerMessageHandler)())}};Br=new WeakMap,Xs=new WeakMap,Ki=new WeakMap,Aa=new WeakMap,Dh=new WeakMap,Ea=new WeakMap,Ca=new WeakMap,Hn=new WeakSet,uh=function(){Mt(this,Br).resolve(),Mt(this,Xs).send("configure",{verbosity:this.verbosity})},zC=function(e){ns(this,Ki,e),ns(this,Xs,new kc("main","worker",e)),Mt(this,Xs).on("ready",()=>{}),di(this,Hn,uh).call(this)},FC=function(){if(Mt(Ot,Ea)||Mt(Ot,tl,dh)){di(this,Hn,jc).call(this);return}let{workerSrc:e}=Ot;try{Ot._isSameOrigin(window.location,e)||(e=Ot._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new kc("main","worker",t),i=()=>{a.abort(),n.destroy(),t.terminate(),this.destroyed?Mt(this,Br).reject(new Error("Worker was destroyed")):di(this,Hn,jc).call(this)},a=new AbortController;t.addEventListener("error",()=>{Mt(this,Aa)||i()},{signal:a.signal}),n.on("test",c=>{if(a.abort(),this.destroyed||!c){i();return}ns(this,Xs,n),ns(this,Ki,t),ns(this,Aa,t),di(this,Hn,uh).call(this)}),n.on("ready",c=>{if(a.abort(),this.destroyed){i();return}try{l()}catch{di(this,Hn,jc).call(this)}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{nf("The worker has been disabled.")}di(this,Hn,jc).call(this)},jc=function(){Mt(Ot,Ea)||(Ke("Setting up fake worker."),ns(Ot,Ea,!0)),Ot._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Mt(this,Br).reject(new Error("Worker was destroyed"));return}const t=new TB;ns(this,Ki,t);const n=`fake${gw(Ot,Dh)._++}`,i=new kc(n+"_worker",n,t);e.setup(i,t),ns(this,Xs,new kc(n,n+"_worker",t)),di(this,Hn,uh).call(this)}).catch(e=>{Mt(this,Br).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},tl=new WeakSet,dh=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ui(Ot,tl),ui(Ot,Dh,0),ui(Ot,Ea,!1),ui(Ot,Ca,new WeakMap),$n&&(ns(Ot,Ea,!0),Fr.workerSrc||="./pdf.worker.mjs"),Ot._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;const i=new URL(t,n);return n.origin===i.origin},Ot._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ot.fromPort=e=>{if(mB("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Ot.create(e)};let ul=Ot;class b5{#e=new Map;#t=new Map;#s=new Map;#n=new Map;#a=null;constructor(e,t,n,i,a,l){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new BC,this.fontLoader=new SB({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#i(e,t=null){const n=this.#e.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return et(this,"annotationStorage",new sy)}getRenderingIntent(e,t=xi.ENABLE,n=null,i=!1,a=!1){let l=vs.DISPLAY,c=Bg;switch(e){case"any":l=vs.ANY;break;case"display":break;case"print":l=vs.PRINT;break;default:Ke(`getRenderingIntent - invalid intent: ${e}`)}const d=l&vs.PRINT&&n instanceof EC?n:this.annotationStorage;switch(t){case xi.DISABLE:l+=vs.ANNOTATIONS_DISABLE;break;case xi.ENABLE:break;case xi.ENABLE_FORMS:l+=vs.ANNOTATIONS_FORMS;break;case xi.ENABLE_STORAGE:l+=vs.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Ke(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(l+=vs.IS_EDITING),a&&(l+=vs.OPLIST);const{ids:f,hash:m}=d.modifiedIds,g=[l,c.hash,m];return{renderingIntent:l,cacheKey:g.join("_"),annotationStorageSerializable:c,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Wc.cleanup(),this._networkStream?.cancelAllRequests(new ir("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){i.close();return}lt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:l}=this._fullReader;return(!i||!a)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{t.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:l}}),e.on("GetRangeReader",(n,i)=>{lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:l,done:c}){if(c){i.close();return}lt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{i.error(l)})},i.onCancel=l=>{a.cancel(l),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new v5(n,this))}),e.on("DocException",n=>{t._capability.reject(ss(n))}),e.on("PasswordRequest",n=>{this.#a=Promise.withResolvers();try{if(!t.onPassword)throw ss(n);const i=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};t.onPassword(i,n.code)}catch(i){this.#a.reject(i)}return this.#a.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in a){const m=a.error;Ke(`Error during font loading: ${m}`),this.commonObjs.resolve(n,m);break}const l=new xt(a),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,g)=>globalThis.FontInspector.fontAdded(m,g):null,d=new _B(l,c,a.extra,a.charProcOperatorList);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=a;lt(f,"The imageRef must be defined.");for(const m of this.#t.values())for(const[,g]of m.objs)if(g?.ref===f)return g.dataLen?(this.commonObjs.resolve(n,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,a,l])=>{if(this.destroyed)return;const c=this.#t.get(i);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(a){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ke("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#s.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const l=new y5(t,a,this,this._params.pdfBug);return this.#t.set(t,l),l});return this.#s.set(t,i),i}getPageIndex(e){return zg(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new JB(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new XB(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Wc.cleanup()}}cachedPageNumber(e){if(!zg(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class x5{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class $o{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:l,pageIndex:c,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:g=!1,pageColors:v=null,enableHWA:b=!1,operationsFilter:_=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new x5(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=b,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=_}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if($o.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");$o.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:a,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Xo(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),$o.#t.delete(this._canvas),e||=new sf(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),$o.#t.delete(this._canvas),this.callback())))}}const uy="5.4.296",UC="f56dc8601";class ys{#e=null;#t=null;#s;#n=null;#a=!1;#i=!1;#r=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return et(this,"_keyboardManager",new du([[["Escape","mac+Escape"],ys.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ys.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ys.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ys.prototype._moveToPrevious],[["Home","mac+Home"],ys.prototype._moveToBeginning],[["End","mac+End"],ys.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#r=e):this.#i=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#s=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",ys.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#r&&(e.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#p.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const n=this.#t=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#s,e.append(n),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",_s,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(e.id=`${this.#r.id}_colorpicker_dropdown`);for(const[n,i]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",ys.#h[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=i,a.ariaSelected=i===this.#s,a.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:at.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#p(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#m){this.#p(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#p(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#p(e);return}this.#n.lastChild?.focus()}#g(e){ys._keyboardManager.exec(this,e)}#p(e){if(this.#m){this.hideDropdown();return}if(this.#a=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#m){this.#r?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Yc{#e=null;#t=null;#s=null;static#n=null;constructor(e){this.#t=e,this.#s=e._uiManager,Yc.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:n}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",Yc.#n[e]),i.addEventListener("input",()=>{this.#s.updateParams(t,i.value)},{signal:this.#s._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function e1(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function wc(s){return Math.max(0,Math.min(255,255*s))}class t1{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=wc(e),[e,e,e]}static G_HTML([e]){const t=e1(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(wc)}static RGB_HTML(e){return`#${e.map(e1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[wc(1-Math.min(1,e+i)),wc(1-Math.min(1,n+i)),wc(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,a=1-t,l=1-n,c=Math.min(i,a,l);return["CMYK",i,a,l,c]}}class w5{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){At("Abstract method `_createSVG` called.")}}class Xc extends w5{_createSVG(e){return document.createElementNS(Yi,e)}}const S5=9,Ma=new WeakSet,_5=new Date().getTimezoneOffset()*60*1e3;class n1{static create(e){switch(e.data.annotationType){case Yt.LINK:return new dy(e);case Yt.TEXT:return new E5(e);case Yt.WIDGET:switch(e.data.fieldType){case"Tx":return new C5(e);case"Btn":return e.data.radioButton?new $C(e):e.data.checkBox?new N5(e):new k5(e);case"Ch":return new j5(e);case"Sig":return new T5(e)}return new Ba(e);case Yt.POPUP:return new $g(e);case Yt.FREETEXT:return new HC(e);case Yt.LINE:return new D5(e);case Yt.SQUARE:return new M5(e);case Yt.CIRCLE:return new O5(e);case Yt.POLYLINE:return new VC(e);case Yt.CARET:return new L5(e);case Yt.INK:return new hy(e);case Yt.POLYGON:return new P5(e);case Yt.HIGHLIGHT:return new GC(e);case Yt.UNDERLINE:return new I5(e);case Yt.SQUIGGLY:return new B5(e);case Yt.STRIKEOUT:return new z5(e);case Yt.STAMP:return new qC(e);case Yt.FILEATTACHMENT:return new F5(e);default:return new Ft(e)}}}class Ft{#e=null;#t=!1;#s=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ft._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:i}=this.data;let a=-1/0,l=-1/0;if(t?.length>=8){for(let c=0;c<t.length;c+=8)t[c+1]>l?(l=t[c+1],a=t[c+2]):t[c+1]===l&&(a=Math.max(a,t[c+2]));return[a,l]}if(n?.length>=1){for(const c of n)for(let d=0,f=c.length;d<f;d+=2)c[d+1]>l?(l=c[d+1],a=c[d]):c[d+1]===l&&(a=Math.max(a,c[d]));if(a!==1/0)return[a,l]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:l}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-a)/n,e[1]=100*(e[1]-l)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Vc}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${Vc}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:n}=e;t&&this.#n(t);let i=this.#s?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=this.#s.popup),i&&(i.updateEdited(e),n?.deleted&&(i.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#s?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:d}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-c)/a}%`,t.top=`${100*(l-e[3]+d)/l}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/l}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof Ba)&&!(this instanceof dy)&&(a.tabIndex=0);const{style:l}=a;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof $g){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,a),a}const{width:c,height:d}=this;if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(w>0||E>0){const N=`calc(${w}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;l.borderRadius=N}else if(this instanceof $C){const N=`calc(${c}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=N}switch(t.borderStyle.style){case Lo.SOLID:l.borderStyle="solid";break;case Lo.DASHED:l.borderStyle="dashed";break;case Lo.BEVELED:Ke("Unimplemented border style: beveled");break;case Lo.INSET:Ke("Unimplemented border style: inset");break;case Lo.UNDERLINE:l.borderBottomStyle="solid";break}const A=t.borderColor||null;A?(this.#t=!0,l.borderColor=Te.makeHexColor(A[0]|0,A[1]|0,A[2]|0)):l.borderWidth=0}const f=Te.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:g,pageX:v,pageY:b}=i.rawDims;l.left=`${100*(f[0]-v)/m}%`,l.top=`${100*(f[1]-b)/g}%`;const{rotation:_}=t;return t.hasOwnCanvas||_===0?(l.width=`${100*c/m}%`,l.height=`${100*d/g}%`):this.setRotation(_,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:l}=this;e%180!==0&&([a,l]=[l,a]),t.style.width=`${100*a/n}%`,t.style.height=`${100*l/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const a=i.detail[t],l=a[0],c=a.slice(1);i.target.style[n]=t1[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:t1[`${l}_rgb`](c)})};return et(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||n[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,a]of Object.entries(t)){const l=n[i];if(l){const c={detail:{[i]:a},target:e};l(c),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,a]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,E,A,N]=e.subarray(2,6);if(i===w&&a===E&&t===A&&n===N)return}const{style:l}=this.container;let c;if(this.#t){const{borderColor:w,borderWidth:E}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=i-t,f=a-n,{svgFactory:m}=this,g=m.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const v=m.createElement("defs");g.append(v);const b=m.createElement("clipPath"),_=`clippath_${this.data.id}`;b.setAttribute("id",_),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let w=2,E=e.length;w<E;w+=8){const A=e[w],N=e[w+1],T=e[w+2],j=e[w+3],P=m.createElement("rect"),L=(T-t)/d,M=(a-N)/f,I=(A-T)/d,F=(N-j)/f;P.setAttribute("x",L),P.setAttribute("y",M),P.setAttribute("width",I),P.setAttribute("height",F),b.append(P),c?.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${M}" width="${I}" height="${F}"/>`)}this.#t&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(g),this.container.style.clipPath=`url(#${_})`}_createPopup(e=null){const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate);const a=this.#s=new $g({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){At("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:l,exportValues:c}of i){if(a===-1||l===t)continue;const d=typeof c=="string"?c:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Ma.has(f)){Ke(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:f})}return n}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,l=i.getAttribute("data-element-id");l!==t&&Ma.has(i)&&n.push({id:l,exportValue:a,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class A5 extends Ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class dy extends Ft{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#s(n,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,n=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),this.#e()}#t(e,t,n="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#s(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const a=n.get(i);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ke('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:i,refs:a,include:l}=t,c=[];if(i.length!==0||a.length!==0){const m=new Set(a);for(const g of i){const v=this._fieldObjects[g]||[];for(const{id:b}of v)m.add(b)}for(const g of Object.values(this._fieldObjects))for(const v of g)m.has(v.id)===l&&c.push(v)}else for(const m of Object.values(this._fieldObjects))c.push(...m);const d=this.annotationStorage,f=[];for(const m of c){const{id:g}=m;switch(f.push(g),m.type){case"text":{const b=m.defaultValue||"";d.setValue(g,{value:b});break}case"checkbox":case"radiobutton":{const b=m.defaultValue===m.exportValues;d.setValue(g,{value:b});break}case"combobox":case"listbox":{const b=m.defaultValue||"";d.setValue(g,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!Ma.has(v)){Ke(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class E5 extends Ft{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Ba extends Ft{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return wn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,a){n.includes("mouse")?e.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(l)}})})}_setEventListeners(e,t,n,i){for(const[a,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,a,l,i),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Te.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||S5,a=e.style;let l;const c=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c),m=Math.round(f/(Qm*i))||1,g=f/m;l=Math.min(i,d(g/Qm))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(i,d(f/Qm))}a.fontSize=`calc(${l}px * var(--total-scale-factor))`,a.color=Te.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class C5 extends Ba{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const a=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),a.setValue(l.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let a=i.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=i.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ma.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:m,timeStep:g}=this.data,v=!!m&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",_=>{e.setValue(t,{value:_.target.value}),this.setPropertyOnSiblings(n,"value",_.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",_=>{const w=this.data.defaultFieldValue??"";n.value=d.userValue=w,d.formattedValue=null});let b=_=>{const{formattedValue:w}=d;w!=null&&(_.target.value=w),_.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",w=>{if(d.focused)return;const{target:E}=w;if(v&&(E.type=m,g&&(E.step=g)),d.userValue){const A=d.userValue;if(v)if(m==="time"){const N=new Date(A),T=[N.getHours(),N.getMinutes(),N.getSeconds()];E.value=T.map(j=>j.toString().padStart(2,"0")).join(":")}else E.value=new Date(A-_5).toISOString().split(m==="date"?"T":".",1)[0];else E.value=A}d.lastCommittedValue=E.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const E={value(A){d.userValue=A.detail.value??"",v||e.setValue(t,{value:d.userValue.toString()}),A.target.value=d.userValue},formattedValue(A){const{formattedValue:N}=A.detail;d.formattedValue=N,N!=null&&A.target!==document.activeElement&&(A.target.value=N);const T={formattedValue:N};v&&(T.value=N),e.setValue(t,T)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{const{charLimit:N}=A.detail,{target:T}=A;if(N===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",N);let j=d.userValue;!j||j.length<=N||(j=j.slice(0,N),T.value=d.userValue=j,e.setValue(t,{value:j}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:j,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(E,w)}),n.addEventListener("keydown",w=>{d.commitKey=1;let E=-1;if(w.key==="Escape"?E=0:w.key==="Enter"&&!this.data.multiLine?E=2:w.key==="Tab"&&(d.commitKey=3),E===-1)return;const{value:A}=w.target;d.lastCommittedValue!==A&&(d.lastCommittedValue=A,d.userValue=A,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:E,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const _=b;b=null,n.addEventListener("blur",w=>{if(!d.focused||!w.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:E}=w;let{value:A}=E;if(v){if(A&&m==="time"){const N=A.split(":").map(T=>parseInt(T,10));A=new Date(2e3,0,1,N[0],N[1],N[2]||0).valueOf(),E.step=""}else A.includes("T")||(A=`${A}T00:00`),A=new Date(A).valueOf();E.type="text"}d.userValue=A,d.lastCommittedValue!==A&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:d.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),_(w)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",w=>{d.lastCommittedValue=null;const{data:E,target:A}=w,{value:N,selectionStart:T,selectionEnd:j}=A;let P=T,L=j;switch(w.inputType){case"deleteWordBackward":{const M=N.substring(0,T).match(/\w*[^\w]*$/);M&&(P-=M[0].length);break}case"deleteWordForward":{const M=N.substring(T).match(/^[^\w]*\w*/);M&&(L+=M[0].length);break}case"deleteContentBackward":T===j&&(P-=1);break;case"deleteContentForward":T===j&&(L+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,change:E||"",willCommit:!1,selStart:P,selEnd:L}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(b&&n.addEventListener("blur",b),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class T5 extends Ba{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class N5 extends Ba{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Ma.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const f of this._getElementsByName(c,n)){const m=d&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}e.setValue(n,{value:d})}),a.addEventListener("resetform",l=>{const c=t.defaultFieldValue||"Off";l.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const c={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class $C extends Ba{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const a=document.createElement("input");if(Ma.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const f of this._getElementsByName(c,n))e.setValue(f.id,{value:!1});e.setValue(n,{value:d})}),a.addEventListener("resetform",l=>{const c=t.defaultFieldValue;l.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;a.addEventListener("updatefromsandbox",c=>{const d={value:f=>{const m=l===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=m&&g.id===n;g.domElement&&(g.domElement.checked=v),e.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class k5 extends dy{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class j5 extends Ba{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Ma.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue;for(const v of i.options)v.selected=v.value===g});for(const m of this.data.options){const g=document.createElement("option");g.textContent=m.displayValue,g.value=m.exportValue,n.value.includes(m.exportValue)&&(g.setAttribute("selected",!0),a=!1),i.append(g)}let l=null;if(a){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),i.prepend(m),l=()=>{m.remove(),i.removeEventListener("input",l),l=null},i.addEventListener("input",l)}const c=m=>{const g=m?"value":"textContent",{options:v,multiple:b}=i;return b?Array.prototype.filter.call(v,_=>_.selected).map(_=>_[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let d=c(!1);const f=m=>{const g=m.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",m=>{const g={value(v){l?.();const b=v.detail.value,_=new Set(Array.isArray(b)?b:[b]);for(const w of i.options)w.selected=_.has(w.value);e.setValue(t,{value:c(!0)}),d=c(!1)},multipleSelection(v){i.multiple=!0},remove(v){const b=i.options,_=v.detail.remove;b[_].selected=!1,i.remove(_),b.length>0&&Array.prototype.findIndex.call(b,E=>E.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:c(!0),items:f(v)}),d=c(!1)},clear(v){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),d=c(!1)},insert(v){const{index:b,displayValue:_,exportValue:w}=v.detail.insert,E=i.children[b],A=document.createElement("option");A.textContent=_,A.value=w,E?E.before(A):i.append(A),e.setValue(t,{value:c(!0),items:f(v)}),d=c(!1)},items(v){const{items:b}=v.detail;for(;i.length!==0;)i.remove(0);for(const _ of b){const{displayValue:w,exportValue:E}=_,A=document.createElement("option");A.textContent=w,A.value=E,i.append(A)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:c(!0),items:f(v)}),d=c(!1)},indices(v){const b=new Set(v.detail.indices);for(const _ of v.target.options)_.selected=b.has(_.index);e.setValue(t,{value:c(!0)}),d=c(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,m)}),i.addEventListener("input",m=>{const g=c(!0),v=c(!1);e.setValue(t,{value:g}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):i.addEventListener("input",function(m){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class $g extends Ft{constructor(e){const{data:t,elements:n,parent:i}=e,a=!!i._commentManager;if(super(e,{isRenderable:!a&&Ft._hasPopupData(t)}),this.elements=n,a&&Ft._hasPopupData(t)){const l=this.popup=this.#e();for(const c of n)c.popup=l}else this.popup=null}#e(){return new R5({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${Qv}${i}`).join(",")),this.container}}class R5{#e=null;#t=this.#V.bind(this);#s=this.#z.bind(this);#n=this.#M.bind(this);#a=this.#w.bind(this);#i=null;#r=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#v=null;#b=null;#y=null;#E=null;#_=null;#x=null;#T=!1;#S=null;#A=null;constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:a,contentsObj:l,richText:c,parent:d,rect:f,parentRect:m,open:g,commentManager:v=null}){this.#r=e,this.#_=i,this.#o=l,this.#E=c,this.#h=d,this.#i=t,this.#y=f,this.#d=m,this.#l=n,this.#e=v,this.#S=n[0],this.#c=Ah.toDateObject(a),this.trigger=n.flatMap(b=>b.getElementsToTriggerPopup()),v?this.renderCommentButton():(this.#j(),this.#r.hidden=!0,g&&this.#w())}#j(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const t of this.trigger)t.addEventListener("click",this.#a,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#s,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#N(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#v=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#v||this.#N(),!this.#v))return;const{signal:e}=this.#p=new AbortController,t=!!this.#S.extraPopupElement,n=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},a=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#m=this.#S.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",i,{signal:e}),l.addEventListener("pointerleave",a,{signal:e}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const c=this.#S.container;l.style.zIndex=c.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#k(),l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",i,{signal:e}),l.addEventListener("pointerleave",a,{signal:e}),c.after(l)}}#k(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[e,t]=this.#v,{style:n}=this.#m;n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`}#I(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#S.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:i,modificationDate:a}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:a}}get elementBeforePopup(){return this.#m}get comment(){return this.#A||=this.#S.commentText,this.#A}set comment(e){e!==this.comment&&(this.#S.commentText=this.#A=e)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#m&&(this.#m.classList.toggle("selected",e),this.#m.ariaExpanded=t)}setSelectedCommentButton(e){this.#m.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:n}=this.#m.getBoundingClientRect(),{x:i,y:a,width:l,height:c}=this.#S.layer.getBoundingClientRect();return[(e-i)/l,(t+n-a)/c]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#v}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=this.#b||this.commentButtonPosition.map(f=>f/100),i=this.parentBoundingClientRect,{x:a,y:l,width:c,height:d}=i;this.#e.showDialog(null,this,a+t*c,l+n*d,{...e,parentDimensions:i})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#i){const n=e.style.outlineColor=Te.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#_?.str){const n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=this.#_}if(e.append(t),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),t.append(n)}ey({html:this.#D||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#r.append(e)}get#D(){const e=this.#E,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#E.html||null}get#O(){return this.#D?.attributes?.style?.fontSize||0}get#B(){return this.#D?.attributes?.style?.color||null}#P(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#B,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return n}#V(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:t,deleted:n}){if(this.#e){n?(this.remove(),this.#A=null):t&&(t.deleted?this.remove():(this.#I(),this.#A=t.text)),e&&(this.#v=null,this.#N(),this.#k());return}if(n||t?.deleted){this.remove();return}this.#j(),this.#x||={contentsObj:this.#o,richText:this.#E},e&&(this.#u=null),t&&t.text&&(this.#E=this.#P(t.text),this.#c=Ah.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#E}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:a}}}=this.#h;let l=!!this.#d,c=l?this.#d:this.#y;for(const _ of this.#l)if(!c||Te.intersect(_.data.rect,c)!==null){c=_.data.rect,l=!0;break}const d=Te.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),m=l?c[2]-c[0]+5:0,g=d[0]+m,v=d[1];this.#u=[100*(g-i)/t,100*(v-a)/n];const{style:b}=this.#r;b.left=`${this.#u[0]}%`,b.top=`${this.#u[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#M(),this.#r.addEventListener("click",this.#a),this.#r.addEventListener("keydown",this.#t)):(this.#z(),this.#r.removeEventListener("click",this.#a),this.#r.removeEventListener("keydown",this.#t))}#M(){this.#g||this.render(),this.isVisible?this.#f&&this.#r.classList.add("focused"):(this.#C(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#z(){this.#r.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#r.hidden=!0)}maybeShow(){this.#e||(this.#j(),this.#T&&(this.#g||this.#M(),this.#T=!1,this.#r.hidden=!1))}get isVisible(){return this.#e?!1:this.#r.hidden===!1}}class HC extends Ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class D5 extends Ft{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=this.#e=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class M5 extends Ft{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",t-a),l.setAttribute("height",n-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class O5 extends Ft{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",t/2),l.setAttribute("cy",n/2),l.setAttribute("rx",t/2-a/2),l.setAttribute("ry",n/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class VC extends Ft{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:a,height:l}=this;if(!t)return this.container;const c=this.svgFactory.create(a,l,!0);let d=[];for(let m=0,g=t.length;m<g;m+=2){const v=t[m]-e[0],b=e[3]-t[m+1];d.push(`${v},${b}`)}d=d.join(" ");const f=this.#e=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),c.append(f),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class P5 extends VC{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class L5 extends Ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class hy extends Ft{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Xe.HIGHLIGHT:Xe.INK}#s(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:a}}=this,{transform:l,width:c,height:d}=this.#s(t,e),f=this.svgFactory.create(c,d,!0),m=this.#e=this.svgFactory.createElement("svg:g");f.append(m),m.setAttribute("stroke-width",i.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",l);for(let g=0,v=n.length;g<v;g++){const b=this.svgFactory.createElement(this.svgElementName);this.#t.push(b),b.setAttribute("points",n[g].join(",")),m.append(b)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,a=this.#e;if(t>=0&&a.setAttribute("stroke-width",t||1),n)for(let l=0,c=this.#t.length;l<c;l++)this.#t[l].setAttribute("points",n[l].join(","));if(i){const{transform:l,width:c,height:d}=this.#s(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class GC extends Ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Xe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class I5 extends Ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class B5 extends Ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class z5 extends Ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class qC extends Ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Xe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class F5 extends Ft{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:i}=wn.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let fy=class WC{#e=null;#t=null;#s=null;#n=new Map;#a=null;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:l,structTreeLayer:c,commentManager:d,linkService:f,annotationStorage:m}){this.div=e,this.#e=t,this.#t=n,this.#a=c||null,this.#i=f||null,this.#s=m||new sy,this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#r(e,t,n){const i=e.firstChild||e,a=i.id=`${Qv}${t}`,l=await this.#a?.getAriaAttributes(a);if(l)for(const[c,d]of l)i.setAttribute(c,d);n?n.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,n=this.div;qr(n,this.viewport);const i=new Map,a={data:null,layer:n,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Xc,annotationStorage:this.#s,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===Yt.POPUP;if(c){const m=i.get(l.id);if(!m)continue;a.elements=m}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const d=n1.create(a);if(!d.isRenderable)continue;if(!c&&l.popupRef){const m=i.get(l.popupRef);m?m.push(d):i.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),await this.#r(f,l.id,a.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#i,svgFactory:new Xc,parent:this};for(const n of e){n.borderStyle||=WC._defaultBorderStyle,t.data=n;const i=n1.create(t);if(!i.isRenderable)continue;const a=i.render();await this.#r(a,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,qr(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,n]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):i.append(n);const l=this.#n.get(t);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:i}=e,a=new A5({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#s}),l=a.render();return t.append(l),this.#e?.moveElementInDOM(t,l,l,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return et(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Lo.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const qd=/\r\n?|\n/g;class pn extends Le{#e="";#t=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=pn.prototype,t=a=>a.isEmpty(),n=rr.TRANSLATE_SMALL,i=rr.TRANSLATE_BIG;return et(this,"_keyboardManager",new du([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Xe.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||pn._defaultColor||Le._defaultLineColor,this.#n=e.fontSize||pn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){Le.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case at.FREETEXT_SIZE:pn._defaultFontSize=t;break;case at.FREETEXT_COLOR:pn._defaultColor=t;break}}updateParams(e,t){switch(e){case at.FREETEXT_SIZE:this.#a(t);break;case at.FREETEXT_COLOR:this.#i(t);break}}static get defaultPropertiesToUpdate(){return[[at.FREETEXT_SIZE,pn._defaultFontSize],[at.FREETEXT_COLOR,pn._defaultColor||Le._defaultLineColor]]}get propertiesToUpdate(){return[[at.FREETEXT_SIZE,this.#n],[at.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Yc(this),[["colorPicker",this._colorPicker]]}get colorType(){return at.FREETEXT_COLOR}#a(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},n=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const t=i=>{this.color=i,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-pn._internalPadding*e,-(pn._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const e=[];this.editorDiv.normalize();let t=null;for(const n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(pn.#c(n)),t=n);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#r().trimEnd();if(e===t)return;const n=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){pn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[f,m]=this.pageDimensions,[g,v]=this.pageTranslation;let b,_;switch(this.rotation){case 0:b=e+(l[0]-g)/f,_=t+this.height-(l[1]-v)/m;break;case 90:b=e+(l[0]-g)/f,_=t-(l[1]-v)/m,[c,d]=[d,-c];break;case 180:b=e-this.width+(l[0]-g)/f,_=t-(l[1]-v)/m,[c,d]=[-c,-d];break;case 270:b=e+(l[0]-g-this.height*m)/f,_=t+(l[1]-v-this.width*f)/m,[c,d]=[-d,c];break}this.setAt(b*i,_*a,c,d)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(qd,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const i=pn.#d(t.getData("text")||"").replaceAll(qd,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:d}=l,f=[],m=[];if(c.nodeType===Node.TEXT_NODE){const b=c.parentElement;if(m.push(c.nodeValue.slice(d).replaceAll(qd,"")),b!==this.editorDiv){let _=f;for(const w of this.editorDiv.childNodes){if(w===b){_=m;continue}_.push(pn.#c(w))}}f.push(c.nodeValue.slice(0,d).replaceAll(qd,""))}else if(c===this.editorDiv){let b=f,_=0;for(const w of this.editorDiv.childNodes)_++===d&&(b=m),b.push(pn.#c(w))}this.#e=`${f.join(`
`)}${i}${m.join(`
`)}`,this.#l();const g=new Range;let v=Math.sumPrecise(f.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const _=b.nodeValue.length;if(v<=_){g.setStart(b,v),g.setEnd(b,v);break}v-=_}a.removeAllRanges(),a.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=pn._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let i=null;if(e instanceof HC){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:f,id:m,popupRef:g,richText:v,contentsObj:b,creationDate:_,modificationDate:w},textContent:E,textPosition:A,parent:{page:{pageNumber:N}}}=e;if(!E||E.length===0)return null;i=e={annotationType:Xe.FREETEXT,color:Array.from(c),fontSize:l,value:E.join(`
`),position:A,pageIndex:N-1,rect:d.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:g,comment:b?.str||null,richText:v,creationDate:_,modificationDate:w}}const a=await super.deserialize(e,t,n);return a.#n=e.fontSize,a.color=Te.makeHexColor(...e.color),a.#e=pn.#d(e.value),a._initialData=i,e.comment&&a.setCommentData(e),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Le._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(e){const{value:t,fontSize:n,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((l,c)=>l!==i[c])||e.pageIndex!==a}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),t.append(a)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Ce{static PRECISION=1e-4;toSVGPath(){At("Abstract method `toSVGPath` must be implemented.")}get box(){At("Abstract getter `box` must be implemented.")}serialize(e,t){At("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,a,l){l||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)l[c]=t+e[c]*i,l[c+1]=n+e[c+1]*a;return l}static _rescaleAndSwap(e,t,n,i,a,l){l||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)l[c]=t+e[c+1]*i,l[c+1]=n+e[c]*a;return l}static _translate(e,t,n,i){i||=new Float32Array(e.length);for(let a=0,l=e.length;a<l;a+=2)i[a]=t+e[a],i[a+1]=n+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,a){switch(a){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,a,l){return[(e+5*n)/6,(t+5*i)/6,(5*n+a)/6,(5*i+l)/6,(n+a)/2,(i+l)/2]}}class Sa{#e;#t=[];#s;#n;#a=[];#i=new Float32Array(18);#r;#o;#c;#l;#h;#d;#f=[];static#g=8;static#p=2;static#u=Sa.#g+Sa.#p;constructor({x:e,y:t},n,i,a,l,c=0){this.#e=n,this.#d=a*i,this.#n=l,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#s=c,this.#l=Sa.#g*i,this.#c=Sa.#u*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#m(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[n,i,a,l]=this.#e;return[(this.#r+(e[0]-t[0])/2-n)/a,(this.#o+(e[1]-t[1])/2-i)/l,(this.#r+(t[0]-e[0])/2-n)/a,(this.#o+(t[1]-e[1])/2-i)/l]}add({x:e,y:t}){this.#r=e,this.#o=t;const[n,i,a,l]=this.#e;let[c,d,f,m]=this.#i.subarray(8,12);const g=e-f,v=t-m,b=Math.hypot(g,v);if(b<this.#c)return!1;const _=b-this.#l,w=_/b,E=w*g,A=w*v;let N=c,T=d;c=f,d=m,f+=E,m+=A,this.#f?.push(e,t);const j=-A/_,P=E/_,L=j*this.#d,M=P*this.#d;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([f+L,m+M],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([f-L,m-M],16),isNaN(this.#i[6])?(this.#a.length===0&&(this.#i.set([c+L,d+M],2),this.#a.push(NaN,NaN,NaN,NaN,(c+L-n)/a,(d+M-i)/l),this.#i.set([c-L,d-M],14),this.#t.push(NaN,NaN,NaN,NaN,(c-L-n)/a,(d-M-i)/l)),this.#i.set([N,T,c,d,f,m],6),!this.isEmpty()):(this.#i.set([N,T,c,d,f,m],6),Math.abs(Math.atan2(T-d,N-c)-Math.atan2(A,E))<Math.PI/2?([c,d,f,m]=this.#i.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((c+f)/2-n)/a,((d+m)/2-i)/l),[c,d,N,T]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((N+c)/2-n)/a,((T+d)/2-i)/l),!0):([N,T,c,d,f,m]=this.#i.subarray(0,6),this.#a.push(((N+5*c)/6-n)/a,((T+5*d)/6-i)/l,((5*c+f)/6-n)/a,((5*d+m)/6-i)/l,((c+f)/2-n)/a,((d+m)/2-i)/l),[f,m,c,d,N,T]=this.#i.subarray(12,18),this.#t.push(((N+5*c)/6-n)/a,((T+5*d)/6-i)/l,((5*c+f)/6-n)/a,((5*d+m)/6-i)/l,((c+f)/2-n)/a,((d+m)/2-i)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#v();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#y(n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#b(n),n.join(" ")}#v(){const[e,t,n,i]=this.#e,[a,l,c,d]=this.#m();return`M${(this.#i[2]-e)/n} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/n} ${(this.#i[5]-t)/i} L${a} ${l} L${c} ${d} L${(this.#i[16]-e)/n} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/n} ${(this.#i[15]-t)/i} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){const[t,n,i,a]=this.#e,l=this.#i.subarray(4,6),c=this.#i.subarray(16,18),[d,f,m,g]=this.#m();e.push(`L${(l[0]-t)/i} ${(l[1]-n)/a} L${d} ${f} L${m} ${g} L${(c[0]-t)/i} ${(c[1]-n)/a}`)}newFreeDrawOutline(e,t,n,i,a,l){return new YC(e,t,n,i,a,l)}getOutlines(){const e=this.#a,t=this.#t,n=this.#i,[i,a,l,c]=this.#e,d=new Float32Array((this.#f?.length??0)+2);for(let g=0,v=d.length-2;g<v;g+=2)d[g]=(this.#f[g]-i)/l,d[g+1]=(this.#f[g+1]-a)/c;if(d[d.length-2]=(this.#r-i)/l,d[d.length-1]=(this.#o-a)/c,isNaN(n[6])&&!this.isEmpty())return this.#E(d);const f=new Float32Array(this.#a.length+24+this.#t.length);let m=e.length;for(let g=0;g<m;g+=2){if(isNaN(e[g])){f[g]=f[g+1]=NaN;continue}f[g]=e[g],f[g+1]=e[g+1]}m=this.#x(f,m);for(let g=t.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(t[g+v])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=t[g+v],f[m+1]=t[g+v+1],m+=2}return this.#_(f,m),this.newFreeDrawOutline(f,d,this.#e,this.#h,this.#s,this.#n)}#E(e){const t=this.#i,[n,i,a,l]=this.#e,[c,d,f,m]=this.#m(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-n)/a,(t[3]-i)/l,NaN,NaN,NaN,NaN,(t[4]-n)/a,(t[5]-i)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(t[16]-n)/a,(t[17]-i)/l,NaN,NaN,NaN,NaN,(t[14]-n)/a,(t[15]-i)/l],0),this.newFreeDrawOutline(g,e,this.#e,this.#h,this.#s,this.#n)}#_(e,t){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#x(e,t){const n=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[a,l,c,d]=this.#e,[f,m,g,v]=this.#m();return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/c,(n[1]-l)/d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-l)/d],t),t+=24}}class YC extends Ce{#e;#t=new Float32Array(4);#s;#n;#a;#i;#r;constructor(e,t,n,i,a,l){super(),this.#r=e,this.#a=t,this.#e=n,this.#i=i,this.#s=a,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[c,d,f,m]=this.#t;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-c)/f,e[g+1]=(e[g+1]-d)/m;for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-c)/f,t[g+1]=(t[g+1]-d)/m}toSVGPath(){const e=[`M${this.#r[4]} ${this.#r[5]}`];for(let t=6,n=this.#r.length;t<n;t+=6){if(isNaN(this.#r[t])){e.push(`L${this.#r[t+4]} ${this.#r[t+5]}`);continue}e.push(`C${this.#r[t]} ${this.#r[t+1]} ${this.#r[t+2]} ${this.#r[t+3]} ${this.#r[t+4]} ${this.#r[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,i],a){const l=n-e,c=i-t;let d,f;switch(a){case 0:d=Ce._rescale(this.#r,e,i,l,-c),f=Ce._rescale(this.#a,e,i,l,-c);break;case 90:d=Ce._rescaleAndSwap(this.#r,e,t,l,c),f=Ce._rescaleAndSwap(this.#a,e,t,l,c);break;case 180:d=Ce._rescale(this.#r,n,t,-l,c),f=Ce._rescale(this.#a,n,t,-l,c);break;case 270:d=Ce._rescaleAndSwap(this.#r,n,i,-l,-c),f=Ce._rescaleAndSwap(this.#a,n,i,-l,-c);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(e){const t=this.#r;let n=t[4],i=t[5];const a=[n,i,n,i];let l=n,c=i,d=n,f=i;const m=e?Math.max:Math.min,g=new Float32Array(4);for(let b=6,_=t.length;b<_;b+=6){const w=t[b+4],E=t[b+5];isNaN(t[b])?(Te.pointBoundingBox(w,E,a),c>E?(l=w,c=E):c===E&&(l=m(l,w)),f<E?(d=w,f=E):f===E&&(d=m(d,w))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,Te.bezierBoundingBox(n,i,...t.slice(b,b+6),g),Te.rectBoundingBox(g[0],g[1],g[2],g[3],a),c>g[1]?(l=g[0],c=g[1]):c===g[1]&&(l=m(l,g[0])),f<g[3]?(d=g[2],f=g[3]):f===g[3]&&(d=m(d,g[2]))),n=w,i=E}const v=this.#t;v[0]=a[0]-this.#s,v[1]=a[1]-this.#s,v[2]=a[2]-a[0]+2*this.#s,v[3]=a[3]-a[1]+2*this.#s,this.firstPoint=[l,c],this.lastPoint=[d,f]}get box(){return this.#t}newOutliner(e,t,n,i,a,l=0){return new Sa(e,t,n,i,a,l)}getNewOutline(e,t){const[n,i,a,l]=this.#t,[c,d,f,m]=this.#e,g=a*f,v=l*m,b=n*f+c,_=i*m+d,w=this.newOutliner({x:this.#a[0]*g+b,y:this.#a[1]*v+_},this.#e,this.#i,e,this.#n,t??this.#s);for(let E=2;E<this.#a.length;E+=2)w.add({x:this.#a[E]*g+b,y:this.#a[E+1]*v+_});return w.getOutlines()}}class Hg{#e;#t;#s;#n=[];#a=[];constructor(e,t=0,n=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:w,y:E,width:A,height:N}of e){const T=Math.floor((w-t)/l)*l,j=Math.ceil((w+A+t)/l)*l,P=Math.floor((E-t)/l)*l,L=Math.ceil((E+N+t)/l)*l,M=[T,P,L,!0],I=[j,P,L,!1];this.#n.push(M,I),Te.rectBoundingBox(T,P,j,L,a)}const c=a[2]-a[0]+2*n,d=a[3]-a[1]+2*n,f=a[0]-n,m=a[1]-n;let g=i?-1/0:1/0,v=1/0;const b=this.#n.at(i?-1:-2),_=[b[0],b[2]];for(const w of this.#n){const[E,A,N,T]=w;!T&&i?A<v?(v=A,g=E):A===v&&(g=Math.max(g,E)):T&&!i&&(A<v?(v=A,g=E):A===v&&(g=Math.min(g,E))),w[0]=(E-f)/c,w[1]=(A-m)/d,w[2]=(N-m)/d}this.#e=new Float32Array([f,m,c,d]),this.#t=[g,v],this.#s=_}getOutlines(){this.#n.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],n=new Set;for(const l of e){const[c,d,f]=l;t.push([c,d,l],[c,f,l])}t.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=t.length;l<c;l+=2){const d=t[l][2],f=t[l+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const i=[];let a;for(;n.size>0;){const l=n.values().next().value;let[c,d,f,m,g]=l;n.delete(l);let v=c,b=d;for(a=[c,f],i.push(a);;){let _;if(n.has(m))_=m;else if(n.has(g))_=g;else break;n.delete(_),[c,d,f,m,g]=_,v!==c&&(a.push(v,b,c,b===d?d:f),v=c),b=b===d?f:d}a.push(v,b)}return new U5(i,this.#e,this.#t,this.#s)}#r(e){const t=this.#a;let n=0,i=t.length-1;for(;n<=i;){const a=n+i>>1,l=t[a][0];if(l===e)return a;l<e?n=a+1:i=a-1}return i+1}#o([,e,t]){const n=this.#r(e);this.#a.splice(n,0,[e,t])}#c([,e,t]){const n=this.#r(e);for(let i=n;i<this.#a.length;i++){const[a,l]=this.#a[i];if(a!==e)break;if(a===e&&l===t){this.#a.splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,l]=this.#a[i];if(a!==e)break;if(a===e&&l===t){this.#a.splice(i,1);return}}}#l(e){const[t,n,i]=e,a=[[t,n,i]],l=this.#r(i);for(let c=0;c<l;c++){const[d,f]=this.#a[c];for(let m=0,g=a.length;m<g;m++){const[,v,b]=a[m];if(!(f<=v||b<=d)){if(v>=d){if(b>f)a[m][1]=f;else{if(g===1)return[];a.splice(m,1),m--,g--}continue}a[m][2]=d,b>f&&a.push([t,f,b])}}}return a}}class U5 extends Ce{#e;#t;constructor(e,t,n,i){super(),this.#t=e,this.#e=t,this.firstPoint=n,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[n,i]=t;e.push(`M${n} ${i}`);for(let a=2;a<t.length;a+=2){const l=t[a],c=t[a+1];l===n?(e.push(`V${c}`),i=c):c===i&&(e.push(`H${l}`),n=l)}e.push("Z")}return e.join(" ")}serialize([e,t,n,i],a){const l=[],c=n-e,d=i-t;for(const f of this.#t){const m=new Array(f.length);for(let g=0;g<f.length;g+=2)m[g]=e+f[g]*c,m[g+1]=i-f[g+1]*d;l.push(m)}return l}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class Vg extends Sa{newFreeDrawOutline(e,t,n,i,a,l){return new $5(e,t,n,i,a,l)}}class $5 extends YC{newOutliner(e,t,n,i,a,l=0){return new Vg(e,t,n,i,a,l)}}class Xt extends Le{#e=null;#t=0;#s;#n=null;#a=null;#i=null;#r=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#p=null;#u="";#m;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Xe.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Xt.prototype;return et(this,"_keyboardManager",new du([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Xt._defaultColor,this.#m=e.thickness||Xt._defaultThickness,this.opacity=e.opacity||Xt._defaultOpacity,this.#s=e.boxes||null,this.#v=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#y(e),this.#S()):this.#s&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#r=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new Hg(this.#s,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new Hg(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:i}=this.#i;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#l=e;const i=1.5;if(this.#i=e.getNewOutline(this.#m/2+i,.0025),t>=0)this.#h=t,this.#n=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Xt.#A(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Xt.#A(this.#i.box,g),path:{d:this.#i.toSVGPath()}})}const[a,l,c,d]=e.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=d;break;case 90:{const[g,v]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*v/g,this.height=d*g/v;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*v/g,this.height=d*g/v;break}}const{firstPoint:f}=e;this.#f=[(f[0]-a)/c,(f[1]-l)/d];const{lastPoint:m}=this.#i;this.#g=[(m[0]-a)/c,(m[1]-l)/d]}static initialize(e,t){Le.initialize(e,t),Xt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case at.HIGHLIGHT_COLOR:Xt._defaultColor=t;break;case at.HIGHLIGHT_THICKNESS:Xt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case at.HIGHLIGHT_COLOR:this.#E(t);break;case at.HIGHLIGHT_THICKNESS:this.#_(t);break}}static get defaultPropertiesToUpdate(){return[[at.HIGHLIGHT_COLOR,Xt._defaultColor],[at.HIGHLIGHT_THICKNESS,Xt._defaultThickness]]}get propertiesToUpdate(){return[[at.HIGHLIGHT_COLOR,this.color||Xt._defaultColor],[at.HIGHLIGHT_THICKNESS,this.#m||Xt._defaultThickness],[at.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#E(e){const t=(a,l)=>{this.color=a,this.opacity=l,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,Xt._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#_(e){const t=this.#m,n=i=>{this.#m=i,this.#x(i)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new ys({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#k())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#k())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#T():e&&(this.#S(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#x(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#A([e,t,n,i],a){switch(a){case 90:return[1-t-i,e,i,n];case 180:return[1-e-n,1-t-i,n,i];case 270:return[t,1-e-n,i,n]}return[e,t,n,i]}rotate(e){const{drawLayer:t}=this.parent;let n;this.#d?(e=(e-this.rotation+360)%360,n=Xt.#A(this.#l.box,e)):n=Xt.#A([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:Xt.#A(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#j.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),_C(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#j(e){Xt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#N(!0);break;case 1:case 3:this.#N(!1);break}}#N(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#r,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#N(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#k(){return this.#d?this.rotation:0}#I(){if(this.#d)return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,a=this.#s,l=new Float32Array(a.length*8);let c=0;for(const{x:d,y:f,width:m,height:g}of a){const v=d*e+n,b=(1-f)*t+i;l[c]=l[c+4]=v,l[c+1]=l[c+3]=b,l[c+2]=l[c+6]=v+m*e,l[c+5]=l[c+7]=b-g*t,c+=8}return l}#D(e){return this.#l.serialize(e,this.#k())}static startHighlighting(e,t,{target:n,x:i,y:a}){const{x:l,y:c,width:d,height:f}=n.getBoundingClientRect(),m=new AbortController,g=e.combinedSignal(m),v=b=>{m.abort(),this.#B(e,b)};window.addEventListener("blur",v,{signal:g}),window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("pointerdown",zt,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",_s,{signal:g}),n.addEventListener("pointermove",this.#O.bind(this,e),{signal:g}),this._freeHighlight=new Vg({x:i,y:a},[l,c,d,f],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,n){let i=null;if(e instanceof GC){const{data:{quadPoints:_,rect:w,rotation:E,id:A,color:N,opacity:T,popupRef:j,richText:P,contentsObj:L,creationDate:M,modificationDate:I},parent:{page:{pageNumber:F}}}=e;i=e={annotationType:Xe.HIGHLIGHT,color:Array.from(N),opacity:T,quadPoints:_,boxes:null,pageIndex:F-1,rect:w.slice(0),rotation:E,annotationElementId:A,id:A,deleted:!1,popupRef:j,richText:P,comment:L?.str||null,creationDate:M,modificationDate:I}}else if(e instanceof hy){const{data:{inkLists:_,rect:w,rotation:E,id:A,color:N,borderStyle:{rawWidth:T},popupRef:j,richText:P,contentsObj:L,creationDate:M,modificationDate:I},parent:{page:{pageNumber:F}}}=e;i=e={annotationType:Xe.HIGHLIGHT,color:Array.from(N),thickness:T,inkLists:_,boxes:null,pageIndex:F-1,rect:w.slice(0),rotation:E,annotationElementId:A,id:A,deleted:!1,popupRef:j,richText:P,comment:L?.str||null,creationDate:M,modificationDate:I}}const{color:a,quadPoints:l,inkLists:c,opacity:d}=e,f=await super.deserialize(e,t,n);f.color=Te.makeHexColor(...a),f.opacity=d||1,c&&(f.#m=e.thickness),f._initialData=i,e.comment&&f.setCommentData(e);const[m,g]=f.pageDimensions,[v,b]=f.pageTranslation;if(l){const _=f.#s=[];for(let w=0;w<l.length;w+=8)_.push({x:(l[w]-v)/m,y:1-(l[w+1]-b)/g,width:(l[w+2]-l[w])/m,height:(l[w+1]-l[w+5])/g});f.#b(),f.#S(),f.rotate(f.rotation)}else if(c){f.#d=!0;const _=c[0],w={x:_[0]-v,y:g-(_[1]-b)},E=new Vg(w,[0,0,m,g],1,f.#m/2,!0,.001);for(let T=0,j=_.length;T<j;T+=2)w.x=_[T]-v,w.y=g-(_[T+1]-b),E.add(w);const{id:A,clipPathId:N}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);f.#y({highlightOutlines:E.getOutlines(),highlightId:A,clipPathId:N}),f.#S(),f.rotate(f.parentRotation)}return f}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=Le._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:this.#m,quadPoints:this.#I(),outlines:this.#D(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#P(n)?null:(n.id=this.annotationElementId,n)}#P(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((n,i)=>n!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class XC{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){At("Not implemented")}}class He extends Le{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#a=null;static#i=NaN;static#r=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#u(e.box)}#h(e,t){const{id:n}=t.drawLayer.draw(He._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,a]of Object.entries(t))n.has(i)?Object.assign(e[i],a):e[i]=a;return e}static getDefaultDrawingOptions(e){At("Not implemented")}static get typesMap(){At("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(He.#s.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,a=i[t],l=c=>{i.updateProperty(t,c);const d=this.#e.updateProperty(t,c);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,He._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,He._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,He._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,t,n,i]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[t,1-e,n*(l/a),i*(a/l)];case 180:return[1-e,1-t,n,i];case 270:return[1-t,e,n*(l/a),i*(a/l)];default:return[e,t,n,i]}}#p(){const{x:e,y:t,width:n,height:i,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-t,e,n*(a/l),i*(l/a)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(a/l),i*(l/a)];default:return[e,t,n,i]}}#u(e){[this.x,this.y,this.width,this.height]=this.#g(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:e,y:t,width:n,height:i,rotation:a,parentRotation:l,parentDimensions:[c,d]}=this;switch((a*4+l)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(c/d),i*(d/c),n*(c/d)];case 5:return[1-t,e,n*(c/d),i*(d/c)];case 6:return[1-e-i*(d/c),1-t,i*(d/c),n*(c/d)];case 7:return[t-n*(c/d),1-e-i*(d/c),n*(c/d),i*(d/c)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(d/c),t,i*(d/c),n*(c/d)];case 13:return[1-t-n*(c/d),e-i*(d/c),n*(c/d),i*(d/c)];case 14:return[1-e,1-t-n*(c/d),i*(d/c),n*(c/d)];case 15:return[t,1-e,n*(c/d),i*(d/c)];default:return[e,t,n,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,He._mergeSVGProperties({bbox:this.#m()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,a){At("Not implemented")}static startDrawing(e,t,n,i){const{target:a,offsetX:l,offsetY:c,pointerId:d,pointerType:f}=i;if(He.#r&&He.#r!==f)return;const{viewport:{rotation:m}}=e,{width:g,height:v}=a.getBoundingClientRect(),b=He.#n=new AbortController,_=e.combinedSignal(b);if(He.#i||=d,He.#r??=f,window.addEventListener("pointerup",w=>{He.#i===w.pointerId?this._endDraw(w):He.#o?.delete(w.pointerId)},{signal:_}),window.addEventListener("pointercancel",w=>{He.#i===w.pointerId?this._currentParent.endDrawingSession():He.#o?.delete(w.pointerId)},{signal:_}),window.addEventListener("pointerdown",w=>{He.#r===w.pointerType&&((He.#o||=new Set).add(w.pointerId),He.#s.isCancellable()&&(He.#s.removeLastElement(),He.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",_s,{signal:_}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),a.addEventListener("touchmove",w=>{w.timeStamp===He.#c&&zt(w)},{signal:_}),e.toggleDrawing(),t._editorUndoBar?.hide(),He.#s){e.drawLayer.updateProperties(this._currentDrawId,He.#s.startNew(l,c,g,v,m));return}t.updateUIForDefaultProperties(this),He.#s=this.createDrawerInstance(l,c,g,v,m),He.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(He.#a.toSVGProperties(),He.#s.defaultSVGProperties),!0,!1)}static _drawMove(e){if(He.#c=-1,!He.#s)return;const{offsetX:t,offsetY:n,pointerId:i}=e;if(He.#i===i){if(He.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,He.#s.add(t,n)),He.#c=e.timeStamp,zt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,He.#s=null,He.#a=null,He.#r=null,He.#c=NaN),He.#n&&(He.#n.abort(),He.#n=null,He.#i=NaN,He.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,He.#s.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=He.#s,i=this._currentDrawId,a=n.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,n.setLastElement(a))},undo:()=>{t.drawLayer.updateProperties(i,n.removeLastElement())},mustExec:!1,type:at.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(at.DRAW_STEP),!He.#s.isEmpty()){const{pageDimensions:[n,i],scale:a}=t,l=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:He.#s.getOutlines(n*a,i*a,a,this._INNER_MARGIN),drawingOptions:He.#a,mustBeCommitted:!e});return this._cleanup(!0),l}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,a,l){At("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=t.viewport,d=this.deserializeDraw(l,c,i,a,this._INNER_MARGIN,e),f=await super.deserialize(e,t,n);return f.createDrawingOptions(e),f.#l({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(e){const[t,n]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#e.serialize([t,n,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class H5{#e=new Float64Array(6);#t;#s;#n;#a;#i;#r="";#o=0;#c=new pu;#l;#h;constructor(e,t,n,i,a,l){this.#l=n,this.#h=i,this.#n=a,this.#a=l,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#s=[{line:c,points:this.#i}],this.#e.set(c,0)}updateProperty(e,t){e==="stroke-width"&&(this.#a=t)}#d(e,t){return Ce._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#d(e,t);const[n,i,a,l]=this.#e.subarray(2,6),c=e-a,d=t-l;return Math.hypot(this.#l*c,this.#h*d)<=2?null:(this.#i.push(e,t),isNaN(n)?(this.#e.set([a,l,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,i,a,l,e,t],0),this.#t.push(...Ce.createBezierPoints(n,i,a,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,a){this.#l=n,this.#h=i,this.#n=a,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const c=this.#s.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#s.push({line:l,points:this.#i}),this.#e.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(e){return this.#s?(this.#s.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#r="";for(let e=0,t=this.#s.length;e<t;e++){const{line:n,points:i}=this.#s[e];this.#t=n,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const e=Ce.svgRound(this.#t[4]),t=Ce.svgRound(this.#t[5]);if(this.#i.length===2)return this.#r=`${this.#r} M ${e} ${t} Z`,this.#r;if(this.#i.length<=6){const i=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const i=Ce.svgRound(this.#t[10]),a=Ce.svgRound(this.#t[11]);return this.#r=`${this.#r} L ${i} ${a}`,this.#o=12,this.#r}const n=[];this.#o===0&&(n.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,a=this.#t.length;i<a;i+=6){const[l,c,d,f,m,g]=this.#t.slice(i,i+6).map(Ce.svgRound);n.push(`C${l} ${c} ${d} ${f} ${m} ${g}`)}return this.#r+=n.join(" "),this.#o=this.#t.length,this.#r}getOutlines(e,t,n,i){const a=this.#s.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#s,e,t,n,this.#n,this.#a,i),this.#e=null,this.#t=null,this.#s=null,this.#r=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class pu extends Ce{#e;#t=0;#s;#n;#a;#i;#r;#o;#c;build(e,t,n,i,a,l,c){this.#a=t,this.#i=n,this.#r=i,this.#o=a,this.#c=l,this.#s=c??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${Ce.svgRound(t[4])} ${Ce.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${Ce.svgRound(t[10])} ${Ce.svgRound(t[11])}`);continue}for(let n=6,i=t.length;n<i;n+=6){const[a,l,c,d,f,m]=t.subarray(n,n+6).map(Ce.svgRound);e.push(`C${a} ${l} ${c} ${d} ${f} ${m}`)}}return e.join("")}serialize([e,t,n,i],a){const l=[],c=[],[d,f,m,g]=this.#h();let v,b,_,w,E,A,N,T,j;switch(this.#o){case 0:j=Ce._rescale,v=e,b=t+i,_=n,w=-i,E=e+d*n,A=t+(1-f-g)*i,N=e+(d+m)*n,T=t+(1-f)*i;break;case 90:j=Ce._rescaleAndSwap,v=e,b=t,_=n,w=i,E=e+f*n,A=t+d*i,N=e+(f+g)*n,T=t+(d+m)*i;break;case 180:j=Ce._rescale,v=e+n,b=t,_=-n,w=i,E=e+(1-d-m)*n,A=t+f*i,N=e+(1-d)*n,T=t+(f+g)*i;break;case 270:j=Ce._rescaleAndSwap,v=e+n,b=t+i,_=-n,w=-i,E=e+(1-f-g)*n,A=t+(1-d-m)*i,N=e+(1-f)*n,T=t+(1-d)*i;break}for(const{line:P,points:L}of this.#n)l.push(j(P,v,b,_,w,a?new Array(P.length):null)),c.push(j(L,v,b,_,w,a?new Array(L.length):null));return{lines:l,points:c,rect:[E,A,N,T]}}static deserialize(e,t,n,i,a,{paths:{lines:l,points:c},rotation:d,thickness:f}){const m=[];let g,v,b,_,w;switch(d){case 0:w=Ce._rescale,g=-e/n,v=t/i+1,b=1/n,_=-1/i;break;case 90:w=Ce._rescaleAndSwap,g=-t/i,v=-e/n,b=1/i,_=1/n;break;case 180:w=Ce._rescale,g=e/n+1,v=-t/i,b=-1/n,_=1/i;break;case 270:w=Ce._rescaleAndSwap,g=t/i+1,v=e/n+1,b=-1/i,_=-1/n;break}if(!l){l=[];for(const A of c){const N=A.length;if(N===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1]]));continue}if(N===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1],NaN,NaN,NaN,NaN,A[2],A[3]]));continue}const T=new Float32Array(3*(N-2));l.push(T);let[j,P,L,M]=A.subarray(0,4);T.set([NaN,NaN,NaN,NaN,j,P],0);for(let I=4;I<N;I+=2){const F=A[I],G=A[I+1];T.set(Ce.createBezierPoints(j,P,L,M,F,G),(I-2)*3),[j,P,L,M]=[L,M,F,G]}}}for(let A=0,N=l.length;A<N;A++)m.push({line:w(l[A].map(T=>T??NaN),g,v,b,_),points:w(c[A].map(T=>T??NaN),g,v,b,_)});const E=new this.prototype.constructor;return E.build(m,n,i,1,d,f,a),E}#l(e=this.#c){const t=this.#s+e/2*this.#r;return this.#o%180===0?[t/this.#a,t/this.#i]:[t/this.#i,t/this.#a]}#h(){const[e,t,n,i]=this.#e,[a,l]=this.#l(0);return[e+a,t+l,n-2*a,i-2*l]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let c=4,d=i.length;c<d;c+=6)Te.pointBoundingBox(i[c],i[c+1],e);continue}let a=i[4],l=i[5];for(let c=6,d=i.length;c<d;c+=6){const[f,m,g,v,b,_]=i.subarray(c,c+6);Te.bezierBoundingBox(a,l,f,m,g,v,b,_,e),a=b,l=_}}const[t,n]=this.#l();e[0]=Bn(e[0]-t,0,1),e[1]=Bn(e[1]-n,0,1),e[2]=Bn(e[2]+t,0,1),e[3]=Bn(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,n]=this.#l();this.#c=e;const[i,a]=this.#l(),[l,c]=[i-t,a-n],d=this.#e;return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateParentDimensions([e,t],n){const[i,a]=this.#l();this.#a=e,this.#i=t,this.#r=n;const[l,c]=this.#l(),d=l-i,f=c-a,m=this.#e;return m[0]-=d,m[1]-=f,m[2]+=2*d,m[3]+=2*f,m}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Ce.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let n=0,i=0,a=0,l=0,c=0,d=0;switch(this.#t){case 90:i=t/e,a=-e/t,c=e;break;case 180:n=-1,l=-1,c=e,d=t;break;case 270:i=-t/e,a=e/t,d=t;break;default:return""}return`matrix(${n} ${i} ${a} ${l} ${Ce.svgRound(c)} ${Ce.svgRound(d)})`}getPathResizingSVGProperties([e,t,n,i]){const[a,l]=this.#l(),[c,d,f,m]=this.#e;if(Math.abs(f-a)<=Ce.PRECISION||Math.abs(m-l)<=Ce.PRECISION){const w=e+n/2-(c+f/2),E=t+i/2-(d+m/2);return{path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`,transform:`${this.rotationTransform} translate(${w} ${E})`}}}const g=(n-2*a)/(f-2*a),v=(i-2*l)/(m-2*l),b=f/n,_=m/i;return{path:{"transform-origin":`${Ce.svgRound(c)} ${Ce.svgRound(d)}`,transform:`${this.rotationTransform} scale(${b} ${_}) translate(${Ce.svgRound(a)} ${Ce.svgRound(l)}) scale(${g} ${v}) translate(${Ce.svgRound(-a)} ${Ce.svgRound(-l)})`}}}getPathResizedSVGProperties([e,t,n,i]){const[a,l]=this.#l(),c=this.#e,[d,f,m,g]=c;if(c[0]=e,c[1]=t,c[2]=n,c[3]=i,Math.abs(m-a)<=Ce.PRECISION||Math.abs(g-l)<=Ce.PRECISION){const E=e+n/2-(d+m/2),A=t+i/2-(f+g/2);for(const{line:N,points:T}of this.#n)Ce._translate(N,E,A,N),Ce._translate(T,E,A,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(n-2*a)/(m-2*a),b=(i-2*l)/(g-2*l),_=-v*(d+a)+e+a,w=-b*(f+l)+t+l;if(v!==1||b!==1||_!==0||w!==0)for(const{line:E,points:A}of this.#n)Ce._rescale(E,_,w,v,b,E),Ce._rescale(A,_,w,v,b,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[i,a]=n,l=this.#e,c=e-l[0],d=t-l[1];if(this.#a===i&&this.#i===a)for(const{line:f,points:m}of this.#n)Ce._translate(f,c,d,f),Ce._translate(m,c,d,m);else{const f=this.#a/i,m=this.#i/a;this.#a=i,this.#i=a;for(const{line:g,points:v}of this.#n)Ce._rescale(g,c,d,f,m,g),Ce._rescale(v,c,d,f,m,v);l[2]*=f,l[3]*=m}return l[0]=e,l[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ce.svgRound(e[0])} ${Ce.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class of extends XC{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Le._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new of(this._viewParameters);return e.updateAll(this),e}}class py extends He{static _type="ink";static _editorType=Xe.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Le.initialize(e,t),this._defaultDrawingOptions=new of(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return et(this,"typesMap",new Map([[at.INK_THICKNESS,"stroke-width"],[at.INK_COLOR,"stroke"],[at.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,a){return new H5(e,t,n,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,a,l){return pu.deserialize(e,t,n,i,a,l)}static async deserialize(e,t,n){let i=null;if(e instanceof hy){const{data:{inkLists:l,rect:c,rotation:d,id:f,color:m,opacity:g,borderStyle:{rawWidth:v},popupRef:b,richText:_,contentsObj:w,creationDate:E,modificationDate:A},parent:{page:{pageNumber:N}}}=e;i=e={annotationType:Xe.INK,color:Array.from(m),thickness:v,opacity:g,paths:{points:l},boxes:null,pageIndex:N-1,rect:c.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:b,richText:_,comment:w?.str||null,creationDate:E,modificationDate:A}}const a=await super.deserialize(e,t,n);return a._initialData=i,e.comment&&a.setCommentData(e),a}get toolbarButtons(){return this._colorPicker||=new Yc(this),[["colorPicker",this._colorPicker]]}get colorType(){return at.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=py.getDefaultDrawingOptions({stroke:Te.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":l}}=this,c=Object.assign(super.serialize(e),{color:Le._colorManager.convert(i),opacity:a,thickness:l,paths:{lines:t,points:n}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!this.#e(c)?null:(c.id=this.annotationElementId,c)}#e(e){const{color:t,thickness:n,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==t[c])||e.thickness!==n||e.opacity!==i||e.pageIndex!==a}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class Gg extends pu{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Wd=8,Sc=3;class ba{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,n,i,a,l,c){const d=this.#t(n,i,a,l);for(let f=0;f<8;f++){const m=(-f+d-c+16)%8,g=this.#s[2*m],v=this.#s[2*m+1];if(e[(n+g)*t+(i+v)]!==0)return m}return-1}static#a(e,t,n,i,a,l,c){const d=this.#t(n,i,a,l);for(let f=0;f<8;f++){const m=(f+d+c+16)%8,g=this.#s[2*m],v=this.#s[2*m+1];if(e[(n+g)*t+(i+v)]!==0)return m}return-1}static#i(e,t,n,i){const a=e.length,l=new Int32Array(a);for(let m=0;m<a;m++)l[m]=e[m]<=i?1:0;for(let m=1;m<n-1;m++)l[m*t]=l[m*t+t-1]=0;for(let m=0;m<t;m++)l[m]=l[t*n-1-m]=0;let c=1,d;const f=[];for(let m=1;m<n-1;m++){d=1;for(let g=1;g<t-1;g++){const v=m*t+g,b=l[v];if(b===0)continue;let _=m,w=g;if(b===1&&l[v-1]===0)c+=1,w-=1;else if(b>=1&&l[v+1]===0)c+=1,w+=1,b>1&&(d=b);else{b!==1&&(d=Math.abs(b));continue}const E=[g,m],A=w===g+1,N={isHole:A,points:E,id:c,parent:0};f.push(N);let T;for(const K of f)if(K.id===d){T=K;break}T?T.isHole?N.parent=A?T.parent:d:N.parent=A?d:T.parent:N.parent=A?d:0;const j=this.#n(l,t,m,g,_,w,0);if(j===-1){l[v]=-c,l[v]!==1&&(d=Math.abs(l[v]));continue}let P=this.#s[2*j],L=this.#s[2*j+1];const M=m+P,I=g+L;_=M,w=I;let F=m,G=g;for(;;){const K=this.#a(l,t,F,G,_,w,1);P=this.#s[2*K],L=this.#s[2*K+1];const ae=F+P,X=G+L;E.push(X,ae);const H=F*t+G;if(l[H+1]===0?l[H]=-c:l[H]===1&&(l[H]=c),ae===m&&X===g&&F===M&&G===I){l[v]!==1&&(d=Math.abs(l[v]));break}else _=F,w=G,F=ae,G=X}}}return f}static#r(e,t,n,i){if(n-t<=4){for(let M=t;M<n-2;M+=2)i.push(e[M],e[M+1]);return}const a=e[t],l=e[t+1],c=e[n-4]-a,d=e[n-3]-l,f=Math.hypot(c,d),m=c/f,g=d/f,v=m*l-g*a,b=d/c,_=1/f,w=Math.atan(b),E=Math.cos(w),A=Math.sin(w),N=_*(Math.abs(E)+Math.abs(A)),T=_*(1-N+N**2),j=Math.max(Math.atan(Math.abs(A+E)*T),Math.atan(Math.abs(A-E)*T));let P=0,L=t;for(let M=t+2;M<n-2;M+=2){const I=Math.abs(v-m*e[M+1]+g*e[M]);I>P&&(L=M,P=I)}P>(f*j)**2?(this.#r(e,t,L+2,i),this.#r(e,L,n,i)):i.push(a,l)}static#o(e){const t=[],n=e.length;return this.#r(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#c(e,t,n,i,a,l){const c=new Float32Array(l**2),d=-2*i**2,f=l>>1;for(let w=0;w<l;w++){const E=(w-f)**2;for(let A=0;A<l;A++)c[w*l+A]=Math.exp((E+(A-f)**2)/d)}const m=new Float32Array(256),g=-2*a**2;for(let w=0;w<256;w++)m[w]=Math.exp(w**2/g);const v=e.length,b=new Uint8Array(v),_=new Uint32Array(256);for(let w=0;w<n;w++)for(let E=0;E<t;E++){const A=w*t+E,N=e[A];let T=0,j=0;for(let L=0;L<l;L++){const M=w+L-f;if(!(M<0||M>=n))for(let I=0;I<l;I++){const F=E+I-f;if(F<0||F>=t)continue;const G=e[M*t+F],K=c[L*l+I]*m[Math.abs(G-N)];T+=G*K,j+=K}}const P=b[A]=Math.round(T/j);_[P]++}return[b,_]}static#l(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}static#h(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let c=0,d=n.length;c<d;c++){const f=n[c]=e[c<<2];i=Math.max(i,f),a=Math.min(a,f)}const l=255/(i-a);for(let c=0,d=n.length;c<d;c++)n[c]=(n[c]-a)*l;return n}static#d(e){let t,n=-1/0,i=-1/0;const a=e.findIndex(d=>d!==0);let l=a,c=a;for(t=a;t<256;t++){const d=e[t];d>n&&(t-l>i&&(i=t-l,c=t-1),n=d,l=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:n,height:i}=e,{maxDim:a}=this.#e;let l=n,c=i;if(n>a||i>a){let v=n,b=i,_=Math.log2(Math.max(n,i)/a);const w=Math.floor(_);_=_===w?w-1:w;for(let A=0;A<_;A++){l=Math.ceil(v/2),c=Math.ceil(b/2);const N=new OffscreenCanvas(l,c);N.getContext("2d").drawImage(e,0,0,v,b,0,0,l,c),v=l,b=c,e!==t&&e.close(),e=N.transferToImageBitmap()}const E=Math.min(a/l,a/c);l=Math.round(l*E),c=Math.round(c*E)}const f=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,c),f.filter="grayscale(1)",f.drawImage(e,0,0,e.width,e.height,0,0,l,c);const m=f.getImageData(0,0,l,c).data;return[this.#h(m),l,c]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},a,l,c,d){let f=new OffscreenCanvas(1,1),m=f.getContext("2d",{alpha:!1});const g=200,v=m.font=`${n} ${i} ${g}px ${t}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:_,actualBoundingBoxAscent:w,actualBoundingBoxDescent:E,fontBoundingBoxAscent:A,fontBoundingBoxDescent:N,width:T}=m.measureText(e),j=1.5,P=Math.ceil(Math.max(Math.abs(b)+Math.abs(_)||0,T)*j),L=Math.ceil(Math.max(Math.abs(w)+Math.abs(E)||g,Math.abs(A)+Math.abs(N)||g)*j);f=new OffscreenCanvas(P,L),m=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=v,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,P,L),m.fillStyle="black",m.fillText(e,P*(j-1)/2,L*(3-j)/2);const M=this.#h(m.getImageData(0,0,P,L).data),I=this.#l(M),F=this.#d(I),G=this.#i(M,P,L,F);return this.processDrawnLines({lines:{curves:G,width:P,height:L},pageWidth:a,pageHeight:l,rotation:c,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,a){const[l,c,d]=this.#f(e),[f,m]=this.#c(l,c,d,Math.hypot(c,d)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),g=this.#d(m),v=this.#i(f,c,d,g);return this.processDrawnLines({lines:{curves:v,width:c,height:d},pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:l,areContours:c}){i%180!==0&&([t,n]=[n,t]);const{curves:d,width:f,height:m}=e,g=e.thickness??0,v=[],b=Math.min(t/f,n/m),_=b/t,w=b/n,E=[];for(const{points:N}of d){const T=l?this.#o(N):N;if(!T)continue;E.push(T);const j=T.length,P=new Float32Array(j),L=new Float32Array(3*(j===2?2:j-2));if(v.push({line:L,points:P}),j===2){P[0]=T[0]*_,P[1]=T[1]*w,L.set([NaN,NaN,NaN,NaN,P[0],P[1]],0);continue}let[M,I,F,G]=T;M*=_,I*=w,F*=_,G*=w,P.set([M,I,F,G],0),L.set([NaN,NaN,NaN,NaN,M,I],0);for(let K=4;K<j;K+=2){const ae=P[K]=T[K]*_,X=P[K+1]=T[K+1]*w;L.set(Ce.createBezierPoints(M,I,F,G,ae,X),(K-2)*3),[M,I,F,G]=[F,G,ae,X]}}if(v.length===0)return null;const A=c?new Gg:new pu;return A.build(v,t,n,1,i,c?0:g,a),{outline:A,newCurves:E,areContours:c,thickness:g,width:f,height:m}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:a}){let l=1/0,c=-1/0,d=0;for(const T of e){d+=T.length;for(let j=2,P=T.length;j<P;j++){const L=T[j]-T[j-2];l=Math.min(l,L),c=Math.max(c,L)}}let f;l>=-128&&c<=127?f=Int8Array:l>=-32768&&c<=32767?f=Int16Array:f=Int32Array;const m=e.length,g=Wd+Sc*m,v=new Uint32Array(g);let b=0;v[b++]=g*Uint32Array.BYTES_PER_ELEMENT+(d-2*m)*f.BYTES_PER_ELEMENT,v[b++]=0,v[b++]=i,v[b++]=a,v[b++]=t?0:1,v[b++]=Math.max(0,Math.floor(n??0)),v[b++]=m,v[b++]=f.BYTES_PER_ELEMENT;for(const T of e)v[b++]=T.length-2,v[b++]=T[0],v[b++]=T[1];const _=new CompressionStream("deflate-raw"),w=_.writable.getWriter();await w.ready,w.write(v);const E=f.prototype.constructor;for(const T of e){const j=new E(T.length-2);for(let P=2,L=T.length;P<L;P++)j[P-2]=T[P]-T[P-2];w.write(j)}w.close();const A=await new Response(_.readable).arrayBuffer(),N=new Uint8Array(A);return gC(N)}static async decompressSignature(e){try{const t=pB(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let l=null,c=0;for await(const T of n)l||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),l.set(T,c),c+=T.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const m=d[2],g=d[3],v=d[4]===0,b=d[5],_=d[6],w=d[7],E=[],A=(Wd+Sc*_)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(w){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(l.buffer,A);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(l.buffer,A);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(l.buffer,A);break}c=0;for(let T=0;T<_;T++){const j=d[Sc*T+Wd],P=new Float32Array(j+2);E.push(P);for(let L=0;L<Sc-1;L++)P[L]=d[Sc*T+Wd+L+1];for(let L=0;L<j;L++)P[L+2]=P[L]+N[c++]}return{areContours:v,thickness:b,outlines:E,width:m,height:g}}catch(t){return Ke(`decompressSignature: ${t}`),null}}}class my extends XC{constructor(){super(),super.updateProperties({fill:Le._defaultLineColor,"stroke-width":0})}clone(){const e=new my;return e.updateAll(this),e}}class gy extends of{constructor(e){super(e),super.updateProperties({stroke:Le._defaultLineColor,"stroke-width":1})}clone(){const e=new gy(this._viewParameters);return e.updateAll(this),e}}class gi extends He{#e=!1;#t=null;#s=null;#n=null;static _type="signature";static _editorType=Xe.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Le.initialize(e,t),this._defaultDrawingOptions=new my,this._defaultDrawnSignatureOptions=new gy(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return et(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:i,mustSmooth:a,areContours:l,description:c,uuid:d,heightInPage:f}=this.#s,{rawDims:{pageWidth:m,pageHeight:g},rotation:v}=this.parent.viewport,b=ba.processDrawnLines({lines:i,pageWidth:m,pageHeight:g,rotation:v,innerMargin:gi._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(b,f,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:a}=this.#s,l=Math.max(i,a),c=ba.processDrawnLines({lines:{curves:e.map(d=>({points:d})),thickness:n,width:i,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,i){const{x:a,y:l}=this,{outline:c}=this.#s=e;this.#e=c instanceof Gg,this.description=n;let d;this.#e?d=gi.getDefaultDrawingOptions():(d=gi._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[,f]=this.pageDimensions;let m=t/f;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return ba.process(e,t,n,i,gi._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return ba.extractContoursFromText(e,t,n,i,a,gi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return ba.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:gi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=gi.getDefaultDrawingOptions():(this._drawingOptions=gi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(a),e?(a.paths={lines:t,points:n},a.uuid=this.#n,a.isCopy=!0):a.lines=t,this.#t&&(a.accessibilityData={type:"Figure",alt:this.#t}),a}static deserializeDraw(e,t,n,i,a,l){return l.areContours?Gg.deserialize(e,t,n,i,a,l):pu.deserialize(e,t,n,i,a,l)}static async deserialize(e,t,n){const i=await super.deserialize(e,t,n);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class V5 extends Le{#e=null;#t=null;#s=null;#n=null;#a=null;#i="";#r=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Xe.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Le.initialize(e,t)}static isHandlingMimeForPasting(e){return Eh.includes(e)}static paste(e,t){t.pasteEditor({mode:Xe.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#p()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:i,width:a,height:l,channels:i.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),t&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#d(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(n).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(n).then(i=>this.#d(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Eh.join(",");const t=this._uiManager._signal;this.#s=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#r?.remove(),this.#r=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#r===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#s||this.#e||this.#n||this.#a||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,i&&(this.#e=i),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},e)}#p(){const{div:e}=this;let{width:t,height:n}=this.#e;const[i,a]=this.pageDimensions,l=.75;if(this.width)t=this.width*i,n=this.height*a;else if(t>l*i||n>l*a){const d=Math.min(l*i/t,l*a/n);t*=d,n*=d}this._uiManager.enableWaiting(!1);const c=this.#r=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/i,this.height=n/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,n=!1){e||(e=224);const{width:i,height:a}=this.#e,l=new si;let c=this.#e,d=i,f=a,m=null;if(t){if(i>t||a>t){const L=Math.min(t/i,t/a);d=Math.floor(i*L),f=Math.floor(a*L)}m=document.createElement("canvas");const v=m.width=Math.ceil(d*l.sx),b=m.height=Math.ceil(f*l.sy);this.#l||(c=this.#u(v,b));const _=m.getContext("2d");_.filter=this._uiManager.hcmFilter;let w="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":vB.isDarkMode&&(w="#8f8f9d",E="#42414d");const A=15,N=A*l.sx,T=A*l.sy,j=new OffscreenCanvas(N*2,T*2),P=j.getContext("2d");P.fillStyle=w,P.fillRect(0,0,N*2,T*2),P.fillStyle=E,P.fillRect(0,0,N,T),P.fillRect(N,T,N,T),_.fillStyle=_.createPattern(j,"repeat"),_.fillRect(0,0,v,b),_.drawImage(c,0,0,c.width,c.height,0,0,v,b)}let g=null;if(n){let v,b;if(l.symmetric&&c.width<e&&c.height<e)v=c.width,b=c.height;else if(c=this.#e,i>e||a>e){const E=Math.min(e/i,e/a);v=Math.floor(i*E),b=Math.floor(a*E),this.#l||(c=this.#u(v,b))}const w=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,v,b),g={width:v,height:b,data:w.getImageData(0,0,v,b).data}}return{canvas:m,width:d,height:f,imageData:g}}#u(e,t){const{width:n,height:i}=this.#e;let a=n,l=i,c=this.#e;for(;a>2*e||l>2*t;){const d=a,f=l;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const m=new OffscreenCanvas(a,l);m.getContext("2d").drawImage(c,0,0,d,f,0,0,a,l),c=m.transferToImageBitmap()}return c}#m(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,a=new si,l=Math.ceil(n*e*a.sx),c=Math.ceil(i*t*a.sy),d=this.#r;if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const f=this.#l?this.#e:this.#u(l,c),m=d.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(f,0,0,f.width,f.height,0,0,l,c)}#v(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,n]=this.pageDimensions,i=Math.round(this.width*t*Da.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*Da.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,a);return l.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,a),l.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let i=null,a=!1;if(e instanceof qC){const{data:{rect:w,rotation:E,id:A,structParent:N,popupRef:T,richText:j,contentsObj:P,creationDate:L,modificationDate:M},container:I,parent:{page:{pageNumber:F}},canvas:G}=e;let K,ae;G?(delete e.canvas,{id:K,bitmap:ae}=n.imageManager.getFromCanvas(I.id,G),G.remove()):(a=!0,e._hasNoCanvas=!0);const X=(await t._structTree.getAriaAttributes(`${Qv}${A}`))?.get("aria-label")||"";i=e={annotationType:Xe.STAMP,bitmapId:K,bitmap:ae,pageIndex:F-1,rect:w.slice(0),rotation:E,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:X},isSvg:!1,structParent:N,popupRef:T,richText:j,comment:P?.str||null,creationDate:L,modificationDate:M}}const l=await super.deserialize(e,t,n),{rect:c,bitmap:d,bitmapUrl:f,bitmapId:m,isSvg:g,accessibilityData:v}=e;a?(n.addMissingCanvas(e.id,l),l.#o=!0):m&&n.imageManager.isValidId(m)?(l.#t=m,d&&(l.#e=d)):l.#n=f,l.#l=g;const[b,_]=l.pageDimensions;return l.width=(c[2]-c[0])/b,l.height=(c[3]-c[1])/_,v&&(l.altTextData=v),l._initialData=i,e.comment&&l.setCommentData(e),l.#h=!!i,l}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(n),e)return n.bitmapUrl=this.#v(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=this.#b(n);return c.isSame?null:(c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(t===null)return n;t.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:l,serialized:n}),n.bitmap=this.#v(!1);else if(this.#l){const c=t.stamps.get(this.#t);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#v(!1))}return n}#b(e){const{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,i=e.pageIndex===t,a=(e.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class yi{#e;#t=!1;#s=null;#n=null;#a=null;#i=new Map;#r=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([pn,py,V5,Xt,gi].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:l,drawLayer:c,textLayer:d,viewport:f,l10n:m}){const g=[...yi.#m.values()];if(!yi._initialized){yi._initialized=!0;for(const v of g)v.initialize(m,e)}e.registerEditorTypes(g),this.#u=e,this.pageIndex=t,this.div=n,this.#e=a,this.#s=l,this.viewport=f,this.#d=d,this.drawLayer=c,this._structTree=i,this.#u.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Xe.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#x(),e){case Xe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Xe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Xe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of yi.#m.values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#s?.div.classList.toggle("disabled",!e)}get#v(){return this.#i.size!==0?this.#i.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const n of this.#v)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));const t=this.#s;if(t)for(const n of t.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const n=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",i=>{const{clientX:l,clientY:c,timeStamp:d}=i,f=this.#p;if(d-f>500){this.#p=d;return}this.#p=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const g=document.elementsFromPoint(l,c);if(m.toggle("getElements",!1),!this.div.contains(g[0]))return;let v;const b=new RegExp(`^${Vc}[0-9]+$`);for(const w of g)if(b.test(w.id)){v=w.id;break}if(!v)return;const _=this.#i.get(v);_?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),_.dblclick(i))},{signal:n,capture:!0})}const e=this.#s;if(e){const n=new Map,i=new Map;for(const l of this.#v){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){n.set(l.annotationElementId,l);continue}else i.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const a=e.getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(this.#u.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let d=i.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=n.get(c),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const n of yi.#m.values())t.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#s?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:n}=wn.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Xt.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),Le.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of this.#i.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#y(){return yi.#m.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#E(e){const t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:n,offsetY:i}=this.#_(),a=this.getNextId(),l=this.#E({parent:this,id:a,x:n,y:i,uiManager:this.#u,isCentered:!0,...t});l&&this.add(l)}async deserialize(e){return await yi.#m.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),a=this.#E({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...n});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#_(){const{x:e,y:t,width:n,height:i}=this.boundingClientRect,a=Math.max(0,e),l=Math.max(0,t),c=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+i),f=(a+c)/2-e,m=(l+d)/2-t,[g,v]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:g,offsetY:v}}addNewEditor(e={}){this.createAndAddNewEditor(this.#_(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#r||(this.#r=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const n=this.#u.getMode();if(n===Xe.STAMP||n===Xe.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===Xe.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#r=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const n=this.#u.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,t,n){const i=this.#u.findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#u.removeLayer(this)}#x(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,qr(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#x();const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,qr(this.div,{rotation:n}),t!==n)for(const i of this.#i.values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class mn{#e=null;#t=new Map;#s=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return et(this,"_svgFactory",new Xc)}static#a(e,[t,n,i,a]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*i}%`,l.height=`${100*a}%`}#i(){const e=mn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#r(e,t){const n=mn._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=mn._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i}#o(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)}draw(e,t=!1,n=!1){const i=mn.#n++,a=this.#i(),l=mn._svgFactory.createElement("defs");a.append(l);const c=mn._svgFactory.createElement("path");l.append(c);const d=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(i,c);const f=n?this.#r(l,d):null,m=mn._svgFactory.createElement("use");return a.append(m),m.setAttribute("href",`#${d}`),this.updateProperties(a,e),this.#t.set(i,a),{id:i,clipPathId:`url(#${f})`}}drawOutline(e,t){const n=mn.#n++,i=this.#i(),a=mn._svgFactory.createElement("defs");i.append(a);const l=mn._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const g=mn._svgFactory.createElement("mask");a.append(g),d=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const v=mn._svgFactory.createElement("rect");g.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const b=mn._svgFactory.createElement("use");g.append(b),b.setAttribute("href",`#${c}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const f=mn._svgFactory.createElement("use");i.append(f),f.setAttribute("href",`#${c}`),d&&f.setAttribute("mask",`url(#${d})`);const m=f.cloneNode();return i.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(n,i),n}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:a,path:l}=t,c=typeof e=="number"?this.#t.get(e):e;if(c){if(n&&this.#o(c,n),i&&mn.#a(c,i),a){const{classList:d}=c;for(const[f,m]of Object.entries(a))d.toggle(f,m)}if(l){const f=c.firstChild.firstChild;this.#o(f,l)}}}updateParent(e,t){if(t===this)return;const n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Hg};globalThis.pdfjsLib={AbortException:ir,AnnotationEditorLayer:yi,AnnotationEditorParamsType:at,AnnotationEditorType:Xe,AnnotationEditorUIManager:rr,AnnotationLayer:fy,AnnotationMode:xi,AnnotationType:Yt,applyOpacity:wC,build:UC,ColorPicker:ys,createValidAbsoluteUrl:Xv,CSSConstants:xC,DOMSVGFactory:Xc,DrawLayer:mn,FeatureTest:wn,fetchData:_l,findContrastColor:SC,getDocument:oy,getFilenameFromUrl:vC,getPdfFilenameFromUrl:yC,getRGB:Al,getUuid:Jv,getXfaPageViewport:bC,GlobalWorkerOptions:Fr,ImageKind:Mc,InvalidPDFException:_h,isDataScheme:uu,isPdfFile:rf,isValidExplicitDest:CC,MathClamp:Bn,noContextMenu:_s,normalizeUnicode:mC,OPS:cl,OutputScale:si,PasswordResponses:fC,PDFDataRangeTransport:cy,PDFDateString:Ah,PDFWorker:ul,PermissionFlag:hC,PixelsPerInch:Da,RenderingCancelledException:sf,renderRichText:ey,ResponseException:Gc,setLayerDimensions:qr,shadow:et,SignatureExtractor:ba,stopEvent:zt,SupportedImageMimeTypes:Eh,TextLayer:Wc,TouchManager:hu,updateUrlHash:Kv,Util:Te,VerbosityLevel:ou,version:uy,XfaLayer:Zv};const G5=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ir,AnnotationEditorLayer:yi,AnnotationEditorParamsType:at,AnnotationEditorType:Xe,AnnotationEditorUIManager:rr,AnnotationLayer:fy,AnnotationMode:xi,AnnotationType:Yt,CSSConstants:xC,ColorPicker:ys,DOMSVGFactory:Xc,DrawLayer:mn,FeatureTest:wn,GlobalWorkerOptions:Fr,ImageKind:Mc,InvalidPDFException:_h,MathClamp:Bn,OPS:cl,OutputScale:si,PDFDataRangeTransport:cy,PDFDateString:Ah,PDFWorker:ul,PasswordResponses:fC,PermissionFlag:hC,PixelsPerInch:Da,RenderingCancelledException:sf,ResponseException:Gc,SignatureExtractor:ba,SupportedImageMimeTypes:Eh,TextLayer:Wc,TouchManager:hu,Util:Te,VerbosityLevel:ou,XfaLayer:Zv,applyOpacity:wC,build:UC,createValidAbsoluteUrl:Xv,fetchData:_l,findContrastColor:SC,getDocument:oy,getFilenameFromUrl:vC,getPdfFilenameFromUrl:yC,getRGB:Al,getUuid:Jv,getXfaPageViewport:bC,isDataScheme:uu,isPdfFile:rf,isValidExplicitDest:CC,noContextMenu:_s,normalizeUnicode:mC,renderRichText:ey,setLayerDimensions:qr,shadow:et,stopEvent:zt,updateUrlHash:Kv,version:uy},Symbol.toStringTag,{value:"Module"}));var s1=Object.prototype.hasOwnProperty;function i1(s,e,t){for(t of s.keys())if(Qo(t,e))return t}function Qo(s,e){var t,n,i;if(s===e)return!0;if(s&&e&&(t=s.constructor)===e.constructor){if(t===Date)return s.getTime()===e.getTime();if(t===RegExp)return s.toString()===e.toString();if(t===Array){if((n=s.length)===e.length)for(;n--&&Qo(s[n],e[n]););return n===-1}if(t===Set){if(s.size!==e.size)return!1;for(n of s)if(i=n,i&&typeof i=="object"&&(i=i1(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(s.size!==e.size)return!1;for(n of s)if(i=n[0],i&&typeof i=="object"&&(i=i1(e,i),!i)||!Qo(n[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)s=new Uint8Array(s),e=new Uint8Array(e);else if(t===DataView){if((n=s.byteLength)===e.byteLength)for(;n--&&s.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===e.byteLength)for(;n--&&s[n]===e[n];);return n===-1}if(!t||typeof s=="object"){n=0;for(t in s)if(s1.call(s,t)&&++n&&!s1.call(e,t)||!(t in e)||!Qo(s[t],e[t]))return!1;return Object.keys(e).length===n}}return s!==s&&e!==e}function mu(s){let e=!1;return{promise:new Promise((n,i)=>{s.then(a=>!e&&n(a)).catch(a=>!e&&i(a))}),cancel(){e=!0}}}const q5=["onCopy","onCut","onPaste"],W5=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Y5=["onFocus","onBlur"],X5=["onInput","onInvalid","onReset","onSubmit"],K5=["onLoad","onError"],J5=["onKeyDown","onKeyPress","onKeyUp"],Q5=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Z5=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],ez=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],tz=["onSelect"],nz=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],sz=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],iz=["onScroll"],rz=["onWheel"],az=["onAnimationStart","onAnimationEnd","onAnimationIteration"],oz=["onTransitionEnd"],lz=["onToggle"],cz=["onChange"],uz=[...q5,...W5,...Y5,...X5,...K5,...J5,...Q5,...Z5,...ez,...tz,...nz,...sz,...iz,...rz,...az,...oz,...cz,...lz];function KC(s,e){const t={};for(const n of uz){const i=s[n];i&&(e?t[n]=(a=>i(a,e(n))):t[n]=i)}return t}var dz="Invariant failed";function _t(s,e){if(!s)throw new Error(dz)}var ag,r1;function hz(){if(r1)return ag;r1=1;var s=function(){};return ag=s,ag}var fz=hz();const zn=cv(fz),JC=S.createContext(null),pz="noopener noreferrer nofollow";class mz{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return _t(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){_t(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||pz,e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{_t(this.pdfDocument),_t(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{_t(Array.isArray(t));const n=t[0];new Promise(i=>{_t(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(a=>{i(a)}).catch(()=>{_t(!1)}):typeof n=="number"?i(n):_t(!1)}).then(i=>{const a=i+1;_t(this.pdfViewer),_t(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:a})})})}goToPage(e){const t=e-1;_t(this.pdfViewer),_t(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Zo({children:s,type:e}){return h.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:s})}const a1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function gz(s,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function dl(){return S.useReducer(gz,{value:void 0,error:void 0})}const lf=typeof window<"u",QC=lf&&window.location.protocol==="file:";function vz(s){return typeof s<"u"}function pa(s){return vz(s)&&s!==null}function yz(s){return typeof s=="string"}function bz(s){return s instanceof ArrayBuffer}function xz(s){return _t(lf),s instanceof Blob}function qg(s){return yz(s)&&/^data:/.test(s)}function o1(s){_t(qg(s));const[e="",t=""]=s.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function wz(){return lf&&window.devicePixelRatio||1}const ZC="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function l1(){zn(!QC,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${ZC}`)}function Sz(){zn(!QC,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${ZC}`)}function Oa(s){s?.cancel&&s.cancel()}function Wg(s,e){return Object.defineProperty(s,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),s}function eT(s){return s.name==="AbortException"||s.name==="RenderingCancelledException"}function _z(s){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:a}=i.target;if(!a)return t(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}const{PDFDataRangeTransport:Az}=G5,Ez=(s,e)=>{switch(e){case a1.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");s(t);break}case a1.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");s(t);break}}};function c1(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const og=S.forwardRef(function({children:e,className:t,error:n="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:d,loading:f="Loading PDF",noData:m="No PDF file specified.",onItemClick:g,onLoadError:v,onLoadProgress:b,onLoadSuccess:_,onPassword:w=Ez,onSourceError:E,onSourceSuccess:A,options:N,renderMode:T,rotate:j,scale:P,...L},M){const[I,F]=dl(),{value:G,error:K}=I,[ae,X]=dl(),{value:H,error:ie}=ae,R=S.useRef(new mz),$=S.useRef([]),U=S.useRef(void 0),z=S.useRef(void 0);l&&l!==U.current&&c1(l)&&(zn(!Qo(l,U.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),U.current=l),N&&N!==z.current&&(zn(!Qo(N,z.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),z.current=N);const le=S.useRef({scrollPageIntoView:Ge=>{const{dest:Ie,pageNumber:te,pageIndex:Se=te-1}=Ge;if(g){g({dest:Ie,pageIndex:Se,pageNumber:te});return}const $e=$.current[Se];if($e){$e.scrollIntoView();return}zn(!1,`An internal link leading to page ${te} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});S.useImperativeHandle(M,()=>({linkService:R,pages:$,viewer:le}),[]);function k(){A&&A()}function O(){K&&(zn(!1,K.toString()),E&&E(K))}function B(){F({type:"RESET"})}S.useEffect(B,[l,F]);const q=S.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return qg(l)?{data:o1(l)}:(l1(),{url:l});if(l instanceof Az)return{range:l};if(bz(l))return{data:l};if(lf&&xz(l))return{data:await _z(l)};if(_t(typeof l=="object"),_t(c1(l)),"url"in l&&typeof l.url=="string"){if(qg(l.url)){const{url:Ge,...Ie}=l;return{data:o1(Ge),...Ie}}l1()}return l},[l]);S.useEffect(()=>{const Ge=mu(q());return Ge.promise.then(Ie=>{F({type:"RESOLVE",value:Ie})}).catch(Ie=>{F({type:"REJECT",error:Ie})}),()=>{Oa(Ge)}},[q,F]),S.useEffect(()=>{if(!(typeof G>"u")){if(G===!1){O();return}k()}},[G]);function J(){H&&(_&&_(H),$.current=new Array(H.numPages),R.current.setDocument(H))}function ue(){ie&&(zn(!1,ie.toString()),v&&v(ie))}S.useEffect(function(){X({type:"RESET"})},[X,G]),S.useEffect(function(){if(!G)return;const Ie=N?{...G,...N}:G,te=oy(Ie);b&&(te.onProgress=b),w&&(te.onPassword=w);const Se=te;return Se.promise.then($e=>{Se.destroyed||X({type:"RESOLVE",value:$e})}).catch($e=>{Se.destroyed||X({type:"REJECT",error:$e})}),()=>{Se.destroy()}},[N,X,G]),S.useEffect(()=>{if(!(typeof H>"u")){if(H===!1){ue();return}J()}},[H]),S.useEffect(function(){R.current.setViewer(le.current),R.current.setExternalLinkRel(i),R.current.setExternalLinkTarget(a)},[i,a]);const ee=S.useCallback((Ge,Ie)=>{$.current[Ge]=Ie},[]),Y=S.useCallback(Ge=>{delete $.current[Ge]},[]),oe=S.useMemo(()=>({imageResourcesPath:d,linkService:R.current,onItemClick:g,pdf:H,registerPage:ee,renderMode:T,rotate:j,scale:P,unregisterPage:Y}),[d,g,H,ee,T,j,P,Y]),ge=S.useMemo(()=>KC(L,()=>H),[L,H]);function xe(){function Ge(te){return!!te?.pdf}if(!Ge(oe))throw new Error("pdf is undefined");const Ie=typeof e=="function"?e(oe):e;return h.jsx(JC.Provider,{value:oe,children:Ie})}function be(){return l?H==null?h.jsx(Zo,{type:"loading",children:typeof f=="function"?f():f}):H===!1?h.jsx(Zo,{type:"error",children:typeof n=="function"?n():n}):xe():h.jsx(Zo,{type:"no-data",children:typeof m=="function"?m():m})}return h.jsx("div",{className:ml("react-pdf__Document",t),ref:c,...ge,children:be()})});function tT(){return S.useContext(JC)}function nT(){for(var s=[],e=0;e<arguments.length;e++)s[e]=arguments[e];var t=s.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(a){for(var l=0,c=t;l<c.length;l++){var d=c[l];typeof d=="function"?d(a):d&&(d.current=a)}}}const sT=S.createContext(null);function cf(){return S.useContext(sT)}function Cz(){const s=tT(),e=cf();_t(e);const t={...s,...e},{filterAnnotations:n,imageResourcesPath:i,linkService:a,onGetAnnotationsError:l,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:f,page:m,pdf:g,renderForms:v,rotate:b,scale:_=1}=t;_t(g),_t(m),_t(a);const[w,E]=dl(),{value:A,error:N}=w,T=S.useRef(null);zn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function j(){A&&c&&c(A)}function P(){N&&(zn(!1,N.toString()),l&&l(N))}S.useEffect(function(){E({type:"RESET"})},[E,m]),S.useEffect(function(){if(!m)return;const G=mu(m.getAnnotations()),K=G;return G.promise.then(ae=>{E({type:"RESOLVE",value:ae})}).catch(ae=>{E({type:"REJECT",error:ae})}),()=>{Oa(K)}},[E,m]),S.useEffect(()=>{if(A!==void 0){if(A===!1){P();return}j()}},[A]);function L(){f&&f()}function M(F){zn(!1,`${F}`),d&&d(F)}const I=S.useMemo(()=>m.getViewport({scale:_,rotation:b}),[m,b,_]);return S.useEffect(function(){if(!g||!m||!a||!A)return;const{current:G}=T;if(!G)return;const K=I.clone({dontFlip:!0}),ae={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:g.annotationStorage,commentManager:null,div:G,l10n:null,linkService:a,page:m,structTreeLayer:null,viewport:K},X={annotations:n?n({annotations:A}):A,annotationStorage:g.annotationStorage,div:G,imageResourcesPath:i,linkService:a,page:m,renderForms:v,viewport:K};G.innerHTML="";try{new fy(ae).render(X),L()}catch(H){M(H)}return()=>{}},[A,n,i,a,m,g,v,I]),h.jsx("div",{className:ml("react-pdf__Page__annotations","annotationLayer"),ref:T})}const iT={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Tz=/^H(\d+)$/;function Nz(s){return s in iT}function uf(s){return"children"in s}function rT(s){return uf(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function kz(s){const e={};if(uf(s)){const{role:t}=s,n=t.match(Tz);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(Nz(t)){const i=iT[t];i&&(e.role=i)}}return e}function aT(s){const e={};if(uf(s)){if(s.alt!==void 0&&(e["aria-label"]=s.alt),s.lang!==void 0&&(e.lang=s.lang),rT(s)){const[t]=s.children;if(t){const n=aT(t);return{...e,...n}}}}else"id"in s&&(e["aria-owns"]=s.id);return e}function jz(s){return s?{...kz(s),...aT(s)}:null}function oT({className:s,node:e}){const t=S.useMemo(()=>jz(e),[e]),n=S.useMemo(()=>!uf(e)||rT(e)?null:e.children.map((i,a)=>h.jsx(oT,{node:i},a)),[e]);return h.jsx("span",{className:s,...t,children:n})}function Rz(){const s=cf();_t(s);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=s,[n,i]=dl(),{value:a,error:l}=n,{customTextRenderer:c,page:d}=s;function f(){a&&t&&t(a)}function m(){l&&(zn(!1,l.toString()),e&&e(l))}return S.useEffect(function(){i({type:"RESET"})},[i,d]),S.useEffect(function(){if(c||!d)return;const v=mu(d.getStructTree()),b=v;return v.promise.then(_=>{i({type:"RESOLVE",value:_})}).catch(_=>{i({type:"REJECT",error:_})}),()=>Oa(b)},[c,d,i]),S.useEffect(()=>{if(a!==void 0){if(a===!1){m();return}f()}},[a]),a?h.jsx(oT,{className:"react-pdf__Page__structTree structTree",node:a}):null}const u1=xi;function Dz(s){const e=cf();_t(e);const t={...e,...s},{_className:n,canvasBackground:i,devicePixelRatio:a=wz(),onRenderError:l,onRenderSuccess:c,page:d,renderForms:f,renderTextLayer:m,pageColors:g,rotate:v,scale:b}=t,{canvasRef:_}=s;_t(d);const w=S.useRef(null);function E(){d&&c&&c(Wg(d,b))}function A(P){eT(P)||(zn(!1,P.toString()),l&&l(P))}const N=S.useMemo(()=>d.getViewport({scale:b*a,rotation:v}),[a,d,v,b]),T=S.useMemo(()=>d.getViewport({scale:b,rotation:v}),[d,v,b]);S.useEffect(function(){if(!d)return;d.cleanup();const{current:L}=w;if(!L)return;L.width=N.width,L.height=N.height,L.style.width=`${Math.floor(T.width)}px`,L.style.height=`${Math.floor(T.height)}px`,L.style.visibility="hidden";const M={annotationMode:f?u1.ENABLE_FORMS:u1.ENABLE,canvas:L,canvasContext:L.getContext("2d",{alpha:!1}),pageColors:g,viewport:N};i&&(M.background=i);const I=d.render(M),F=I;return I.promise.then(()=>{L.style.visibility="",E()}).catch(A),()=>Oa(F)},[i,d,g,f,N,T]);const j=S.useCallback(()=>{const{current:P}=w;P&&(P.width=0,P.height=0)},[]);return S.useEffect(()=>j,[j]),h.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:nT(_,w),style:{display:"block",userSelect:"none"},children:m?h.jsx(Rz,{}):null})}function Mz(s){return"str"in s}const Oz=new Set(["base","embed","iframe","link","meta","object","script","style","template"]),Pz=new Set(["action","formaction","href","poster","src","xlink:href"]);function Lz(s){let e="";for(const t of s){const n=t.charCodeAt(0);n<=32||n===127||(e+=t.toLowerCase())}return e.startsWith("javascript:")||e.startsWith("vbscript:")}function Iz(s){return s.nodeType===Node.ELEMENT_NODE}function lT(s){return Iz(s)&&s instanceof HTMLElement}function Bz(s){return lT(s)&&Oz.has(s.tagName.toLowerCase())}function zz(s){const e=document.createElement(s.tagName.toLowerCase());return Array.from(s.attributes).forEach(t=>{const n=t.name.toLowerCase();n.startsWith("on")||n==="srcdoc"||Pz.has(n)&&Lz(t.value)||e.setAttribute(t.name,t.value)}),Array.from(s.childNodes).forEach(t=>{e.append(cT(t))}),e}function cT(s){var e;return lT(s)&&!Bz(s)?zz(s):document.createTextNode((e=s.textContent)!==null&&e!==void 0?e:"")}function Fz(s,e){const t=document.createElement("template");t.innerHTML=e;const n=document.createDocumentFragment();Array.from(t.content.childNodes).forEach(i=>{n.append(cT(i))}),s.replaceChildren(n)}function Uz(){const s=cf();_t(s);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:a,page:l,pageIndex:c,pageNumber:d,rotate:f,scale:m}=s;_t(l);const[g,v]=dl(),{value:b,error:_}=g,w=S.useRef(null);zn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){b&&n&&n(b)}function A(){_&&(zn(!1,_.toString()),t&&t(_))}S.useEffect(function(){v({type:"RESET"})},[l,v]),S.useEffect(function(){if(!l)return;const I=mu(l.getTextContent()),F=I;return I.promise.then(G=>{v({type:"RESOLVE",value:G})}).catch(G=>{v({type:"REJECT",error:G})}),()=>Oa(F)},[l,v]),S.useEffect(()=>{if(b!==void 0){if(b===!1){A();return}E()}},[b]);const N=S.useCallback(()=>{a&&a()},[a]),T=S.useCallback(M=>{eT(M)||(zn(!1,M.toString()),i&&i(M))},[i]);function j(){const M=w.current;M&&M.classList.add("selecting")}function P(){const M=w.current;M&&M.classList.remove("selecting")}const L=S.useMemo(()=>l.getViewport({scale:m,rotation:f}),[l,f,m]);return S.useLayoutEffect(function(){if(!l||!b)return;const{current:I}=w;if(!I)return;I.innerHTML="";const F=l.streamTextContent({includeMarkedContent:!0}),G={container:I,textContentSource:F,viewport:L},K=new Wc(G),ae=K;return K.render().then(()=>{const X=document.createElement("div");X.className="endOfContent",I.append(X);const H=I.querySelectorAll('[role="presentation"]');if(e){let ie=0;b.items.forEach((R,$)=>{if(!Mz(R))return;const U=H[ie];if(!U)return;const z=e({pageIndex:c,pageNumber:d,itemIndex:$,...R});Fz(U,z),ie+=R.str&&R.hasEOL?2:1})}N()}).catch(T),()=>Oa(ae)},[e,T,N,l,c,d,b,L]),h.jsx("div",{className:ml("react-pdf__Page__textContent","textLayer"),onMouseUp:P,onMouseDown:j,ref:w})}const d1=1;function lg(s){const t={...tT(),...s},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:a,canvasRef:l,children:c,className:d,customRenderer:f,customTextRenderer:m,devicePixelRatio:g,error:v="Failed to load the page.",filterAnnotations:b,height:_,inputRef:w,loading:E="Loading page",noData:A="No page specified.",onGetAnnotationsError:N,onGetAnnotationsSuccess:T,onGetStructTreeError:j,onGetStructTreeSuccess:P,onGetTextError:L,onGetTextSuccess:M,onLoadError:I,onLoadSuccess:F,onRenderAnnotationLayerError:G,onRenderAnnotationLayerSuccess:K,onRenderError:ae,onRenderSuccess:X,onRenderTextLayerError:H,onRenderTextLayerSuccess:ie,pageColors:R,pageIndex:$,pageNumber:U,pdf:z,registerPage:le,renderAnnotationLayer:k=!0,renderForms:O=!1,renderMode:B="canvas",renderTextLayer:q=!0,rotate:J,scale:ue=d1,unregisterPage:ee,width:Y,...oe}=t,[ge,xe]=dl(),{value:be,error:Ge}=ge,Ie=S.useRef(null);_t(z);const te=pa(U)?U-1:$??null,Se=U??(pa($)?$+1:null),$e=J??(be?be.rotate:null),Re=S.useMemo(()=>{if(!be)return null;let an=1;const Gt=ue??d1;if(Y||_){const Sn=be.getViewport({scale:1,rotation:$e});Y?an=Y/Sn.width:_&&(an=_/Sn.height)}return Gt*an},[_,be,$e,ue,Y]);S.useEffect(function(){return()=>{pa(te)&&i&&ee&&ee(te)}},[i,z,te,ee]);function ht(){if(F){if(!be||!Re)return;F(Wg(be,Re))}if(i&&le){if(!pa(te)||!Ie.current)return;le(te,Ie.current)}}function un(){Ge&&(zn(!1,Ge.toString()),I&&I(Ge))}S.useEffect(function(){xe({type:"RESET"})},[xe,z,te]),S.useEffect(function(){if(!z||!Se)return;const Gt=mu(z.getPage(Se)),Sn=Gt;return Gt.promise.then(Pn=>{xe({type:"RESOLVE",value:Pn})}).catch(Pn=>{xe({type:"REJECT",error:Pn})}),()=>Oa(Sn)},[xe,z,Se]),S.useEffect(()=>{if(be!==void 0){if(be===!1){un();return}ht()}},[be,Re]);const Nt=S.useMemo(()=>pa(te)&&Se&&pa($e)&&pa(Re)?{_className:n,canvasBackground:a,customTextRenderer:m,devicePixelRatio:g,filterAnnotations:b,onGetAnnotationsError:N,onGetAnnotationsSuccess:T,onGetStructTreeError:j,onGetStructTreeSuccess:P,onGetTextError:L,onGetTextSuccess:M,onRenderAnnotationLayerError:G,onRenderAnnotationLayerSuccess:K,onRenderError:ae,onRenderSuccess:X,onRenderTextLayerError:H,onRenderTextLayerSuccess:ie,page:be,pageColors:R,pageIndex:te,pageNumber:Se,renderForms:O,renderTextLayer:q,rotate:$e,scale:Re}:null,[n,a,m,g,b,N,T,j,P,L,M,G,K,ae,X,H,ie,be,R,te,Se,O,q,$e,Re]),wt=S.useMemo(()=>KC(oe,()=>be&&(Re?Wg(be,Re):void 0)),[oe,be,Re]),Ut=`${te}@${Re}/${$e}`;function kt(){switch(B){case"custom":return _t(f),h.jsx(f,{},`${Ut}_custom`);case"none":return null;default:return h.jsx(Dz,{canvasRef:l},`${Ut}_canvas`)}}function Fs(){return q?h.jsx(Uz,{},`${Ut}_text`):null}function Fn(){return k?h.jsx(Cz,{},`${Ut}_annotations`):null}function ri(){function an(Sn){return!!Sn?.page}if(!an(Nt))throw new Error("page is undefined");const Gt=typeof c=="function"?c(Nt):c;return h.jsxs(sT.Provider,{value:Nt,children:[kt(),Fs(),Fn(),Gt]})}function ls(){return Se?z===null||be===void 0||be===null?h.jsx(Zo,{type:"loading",children:typeof E=="function"?E():E}):z===!1||be===!1?h.jsx(Zo,{type:"error",children:typeof v=="function"?v():v}):ri():h.jsx(Zo,{type:"no-data",children:typeof A=="function"?A():A})}return h.jsx("div",{className:ml(n,d),"data-page-number":Se,ref:nT(w,Ie),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Re}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...wt,children:ls()})}Sz();Fr.workerSrc="pdf.worker.mjs";var df="Checkbox",[$z]=Bs(df),[Hz,vy]=$z(df);function Vz(s){const{__scopeCheckbox:e,checked:t,children:n,defaultChecked:i,disabled:a,form:l,name:c,onCheckedChange:d,required:f,value:m="on",internal_do_not_use_render:g}=s,[v,b]=$r({prop:t,defaultProp:i??!1,onChange:d,caller:df}),[_,w]=S.useState(null),[E,A]=S.useState(null),N=S.useRef(!1),T=_?!!l||!!_.closest("form"):!0,j={checked:v,disabled:a,setChecked:b,control:_,setControl:w,name:c,form:l,value:m,hasConsumerStoppedPropagationRef:N,required:f,defaultChecked:Ur(i)?!1:i,isFormControl:T,bubbleInput:E,setBubbleInput:A};return h.jsx(Hz,{scope:e,...j,children:Gz(g)?g(j):n})}var uT="CheckboxTrigger",dT=S.forwardRef(({__scopeCheckbox:s,onKeyDown:e,onClick:t,...n},i)=>{const{control:a,value:l,disabled:c,checked:d,required:f,setControl:m,setChecked:g,hasConsumerStoppedPropagationRef:v,isFormControl:b,bubbleInput:_}=vy(uT,s),w=Je(i,m),E=S.useRef(d);return S.useEffect(()=>{const A=a?.form;if(A){const N=()=>g(E.current);return A.addEventListener("reset",N),()=>A.removeEventListener("reset",N)}},[a,g]),h.jsx(Ue.button,{type:"button",role:"checkbox","aria-checked":Ur(d)?"mixed":d,"aria-required":f,"data-state":vT(d),"data-disabled":c?"":void 0,disabled:c,value:l,...n,ref:w,onKeyDown:we(e,A=>{A.key==="Enter"&&A.preventDefault()}),onClick:we(t,A=>{g(N=>Ur(N)?!0:!N),_&&b&&(v.current=A.isPropagationStopped(),v.current||A.stopPropagation())})})});dT.displayName=uT;var hT=S.forwardRef((s,e)=>{const{__scopeCheckbox:t,name:n,checked:i,defaultChecked:a,required:l,disabled:c,value:d,onCheckedChange:f,form:m,...g}=s;return h.jsx(Vz,{__scopeCheckbox:t,checked:i,defaultChecked:a,disabled:c,required:l,onCheckedChange:f,name:n,form:m,value:d,internal_do_not_use_render:({isFormControl:v})=>h.jsxs(h.Fragment,{children:[h.jsx(dT,{...g,ref:e,__scopeCheckbox:t}),v&&h.jsx(gT,{__scopeCheckbox:t})]})})});hT.displayName=df;var fT="CheckboxIndicator",pT=S.forwardRef((s,e)=>{const{__scopeCheckbox:t,forceMount:n,...i}=s,a=vy(fT,t);return h.jsx(os,{present:n||Ur(a.checked)||a.checked===!0,children:h.jsx(Ue.span,{"data-state":vT(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...s.style}})})});pT.displayName=fT;var mT="CheckboxBubbleInput",gT=S.forwardRef(({__scopeCheckbox:s,...e},t)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:l,required:c,disabled:d,name:f,value:m,form:g,bubbleInput:v,setBubbleInput:b}=vy(mT,s),_=Je(t,b),w=Bv(a),E=Pv(n);S.useEffect(()=>{const N=v;if(!N)return;const T=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(T,"checked").set,L=!i.current;if(w!==a&&P){const M=new Event("click",{bubbles:L});N.indeterminate=Ur(a),P.call(N,Ur(a)?!1:a),N.dispatchEvent(M)}},[v,w,a,i]);const A=S.useRef(Ur(a)?!1:a);return h.jsx(Ue.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??A.current,required:c,disabled:d,name:f,value:m,form:g,...e,tabIndex:-1,ref:_,style:{...e.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});gT.displayName=mT;function Gz(s){return typeof s=="function"}function Ur(s){return s==="indeterminate"}function vT(s){return Ur(s)?"indeterminate":s?"checked":"unchecked"}function Yg({className:s,...e}){return h.jsx(hT,{"data-slot":"checkbox",className:Oe("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...e,children:h.jsx(pT,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:h.jsx(mv,{className:"size-3.5"})})})}function qz(s,e){return S.useReducer((t,n)=>e[t][n]??t,s)}var yy="ScrollArea",[yT]=Bs(yy),[Wz,zs]=yT(yy),bT=S.forwardRef((s,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:i,scrollHideDelay:a=600,...l}=s,[c,d]=S.useState(null),[f,m]=S.useState(null),[g,v]=S.useState(null),[b,_]=S.useState(null),[w,E]=S.useState(null),[A,N]=S.useState(0),[T,j]=S.useState(0),[P,L]=S.useState(!1),[M,I]=S.useState(!1),F=Je(e,K=>d(K)),G=pl(i);return h.jsx(Wz,{scope:t,type:n,dir:G,scrollHideDelay:a,scrollArea:c,viewport:f,onViewportChange:m,content:g,onContentChange:v,scrollbarX:b,onScrollbarXChange:_,scrollbarXEnabled:P,onScrollbarXEnabledChange:L,scrollbarY:w,onScrollbarYChange:E,scrollbarYEnabled:M,onScrollbarYEnabledChange:I,onCornerWidthChange:N,onCornerHeightChange:j,children:h.jsx(Ue.div,{dir:G,...l,ref:F,style:{position:"relative","--radix-scroll-area-corner-width":A+"px","--radix-scroll-area-corner-height":T+"px",...s.style}})})});bT.displayName=yy;var xT="ScrollAreaViewport",wT=S.forwardRef((s,e)=>{const{__scopeScrollArea:t,children:n,nonce:i,...a}=s,l=zs(xT,t),c=S.useRef(null),d=Je(e,c,l.onViewportChange);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx(Ue.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...s.style},children:h.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});wT.displayName=xT;var Ci="ScrollAreaScrollbar",ST=S.forwardRef((s,e)=>{const{forceMount:t,...n}=s,i=zs(Ci,s.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=i,c=s.orientation==="horizontal";return S.useEffect(()=>(c?a(!0):l(!0),()=>{c?a(!1):l(!1)}),[c,a,l]),i.type==="hover"?h.jsx(Yz,{...n,ref:e,forceMount:t}):i.type==="scroll"?h.jsx(Xz,{...n,ref:e,forceMount:t}):i.type==="auto"?h.jsx(_T,{...n,ref:e,forceMount:t}):i.type==="always"?h.jsx(by,{...n,ref:e}):null});ST.displayName=Ci;var Yz=S.forwardRef((s,e)=>{const{forceMount:t,...n}=s,i=zs(Ci,s.__scopeScrollArea),[a,l]=S.useState(!1);return S.useEffect(()=>{const c=i.scrollArea;let d=0;if(c){const f=()=>{window.clearTimeout(d),l(!0)},m=()=>{d=window.setTimeout(()=>l(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",m)}}},[i.scrollArea,i.scrollHideDelay]),h.jsx(os,{present:t||a,children:h.jsx(_T,{"data-state":a?"visible":"hidden",...n,ref:e})})}),Xz=S.forwardRef((s,e)=>{const{forceMount:t,...n}=s,i=zs(Ci,s.__scopeScrollArea),a=s.orientation==="horizontal",l=ff(()=>d("SCROLL_END"),100),[c,d]=qz("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return S.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,i.scrollHideDelay,d]),S.useEffect(()=>{const f=i.viewport,m=a?"scrollLeft":"scrollTop";if(f){let g=f[m];const v=()=>{const b=f[m];g!==b&&(d("SCROLL"),l()),g=b};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[i.viewport,a,d,l]),h.jsx(os,{present:t||c!=="hidden",children:h.jsx(by,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:we(s.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:we(s.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),_T=S.forwardRef((s,e)=>{const t=zs(Ci,s.__scopeScrollArea),{forceMount:n,...i}=s,[a,l]=S.useState(!1),c=s.orientation==="horizontal",d=ff(()=>{if(t.viewport){const f=t.viewport.offsetWidth<t.viewport.scrollWidth,m=t.viewport.offsetHeight<t.viewport.scrollHeight;l(c?f:m)}},10);return hl(t.viewport,d),hl(t.content,d),h.jsx(os,{present:n||a,children:h.jsx(by,{"data-state":a?"visible":"hidden",...i,ref:e})})}),by=S.forwardRef((s,e)=>{const{orientation:t="vertical",...n}=s,i=zs(Ci,s.__scopeScrollArea),a=S.useRef(null),l=S.useRef(0),[c,d]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=NT(c.viewport,c.content),m={...n,sizes:c,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:v=>a.current=v,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:v=>l.current=v};function g(v,b){return tF(v,l.current,c,b)}return t==="horizontal"?h.jsx(Kz,{...m,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const v=i.viewport.scrollLeft,b=h1(v,c,i.dir);a.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollLeft=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollLeft=g(v,i.dir))}}):t==="vertical"?h.jsx(Jz,{...m,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const v=i.viewport.scrollTop,b=h1(v,c);a.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollTop=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollTop=g(v))}}):null}),Kz=S.forwardRef((s,e)=>{const{sizes:t,onSizesChange:n,...i}=s,a=zs(Ci,s.__scopeScrollArea),[l,c]=S.useState(),d=S.useRef(null),f=Je(e,d,a.onScrollbarXChange);return S.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),h.jsx(ET,{"data-orientation":"horizontal",...i,ref:f,sizes:t,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":hf(t)+"px",...s.style},onThumbPointerDown:m=>s.onThumbPointerDown(m.x),onDragScroll:m=>s.onDragScroll(m.x),onWheelScroll:(m,g)=>{if(a.viewport){const v=a.viewport.scrollLeft+m.deltaX;s.onWheelScroll(v),jT(v,g)&&m.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Nh(l.paddingLeft),paddingEnd:Nh(l.paddingRight)}})}})}),Jz=S.forwardRef((s,e)=>{const{sizes:t,onSizesChange:n,...i}=s,a=zs(Ci,s.__scopeScrollArea),[l,c]=S.useState(),d=S.useRef(null),f=Je(e,d,a.onScrollbarYChange);return S.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),h.jsx(ET,{"data-orientation":"vertical",...i,ref:f,sizes:t,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":hf(t)+"px",...s.style},onThumbPointerDown:m=>s.onThumbPointerDown(m.y),onDragScroll:m=>s.onDragScroll(m.y),onWheelScroll:(m,g)=>{if(a.viewport){const v=a.viewport.scrollTop+m.deltaY;s.onWheelScroll(v),jT(v,g)&&m.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Nh(l.paddingTop),paddingEnd:Nh(l.paddingBottom)}})}})}),[Qz,AT]=yT(Ci),ET=S.forwardRef((s,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:i,onThumbChange:a,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:m,onResize:g,...v}=s,b=zs(Ci,t),[_,w]=S.useState(null),E=Je(e,F=>w(F)),A=S.useRef(null),N=S.useRef(""),T=b.viewport,j=n.content-n.viewport,P=Mn(m),L=Mn(d),M=ff(g,10);function I(F){if(A.current){const G=F.clientX-A.current.left,K=F.clientY-A.current.top;f({x:G,y:K})}}return S.useEffect(()=>{const F=G=>{const K=G.target;_?.contains(K)&&P(G,j)};return document.addEventListener("wheel",F,{passive:!1}),()=>document.removeEventListener("wheel",F,{passive:!1})},[T,_,j,P]),S.useEffect(L,[n,L]),hl(_,M),hl(b.content,M),h.jsx(Qz,{scope:t,scrollbar:_,hasThumb:i,onThumbChange:Mn(a),onThumbPointerUp:Mn(l),onThumbPositionChange:L,onThumbPointerDown:Mn(c),children:h.jsx(Ue.div,{...v,ref:E,style:{position:"absolute",...v.style},onPointerDown:we(s.onPointerDown,F=>{F.button===0&&(F.target.setPointerCapture(F.pointerId),A.current=_.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),I(F))}),onPointerMove:we(s.onPointerMove,I),onPointerUp:we(s.onPointerUp,F=>{const G=F.target;G.hasPointerCapture(F.pointerId)&&G.releasePointerCapture(F.pointerId),document.body.style.webkitUserSelect=N.current,b.viewport&&(b.viewport.style.scrollBehavior=""),A.current=null})})})}),Th="ScrollAreaThumb",CT=S.forwardRef((s,e)=>{const{forceMount:t,...n}=s,i=AT(Th,s.__scopeScrollArea);return h.jsx(os,{present:t||i.hasThumb,children:h.jsx(Zz,{ref:e,...n})})}),Zz=S.forwardRef((s,e)=>{const{__scopeScrollArea:t,style:n,...i}=s,a=zs(Th,t),l=AT(Th,t),{onThumbPositionChange:c}=l,d=Je(e,g=>l.onThumbChange(g)),f=S.useRef(void 0),m=ff(()=>{f.current&&(f.current(),f.current=void 0)},100);return S.useEffect(()=>{const g=a.viewport;if(g){const v=()=>{if(m(),!f.current){const b=nF(g,c);f.current=b,c()}};return c(),g.addEventListener("scroll",v),()=>g.removeEventListener("scroll",v)}},[a.viewport,m,c]),h.jsx(Ue.div,{"data-state":l.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:we(s.onPointerDownCapture,g=>{const b=g.target.getBoundingClientRect(),_=g.clientX-b.left,w=g.clientY-b.top;l.onThumbPointerDown({x:_,y:w})}),onPointerUp:we(s.onPointerUp,l.onThumbPointerUp)})});CT.displayName=Th;var xy="ScrollAreaCorner",TT=S.forwardRef((s,e)=>{const t=zs(xy,s.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?h.jsx(eF,{...s,ref:e}):null});TT.displayName=xy;var eF=S.forwardRef((s,e)=>{const{__scopeScrollArea:t,...n}=s,i=zs(xy,t),[a,l]=S.useState(0),[c,d]=S.useState(0),f=!!(a&&c);return hl(i.scrollbarX,()=>{const m=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(m),d(m)}),hl(i.scrollbarY,()=>{const m=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(m),l(m)}),f?h.jsx(Ue.div,{...n,ref:e,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...s.style}}):null});function Nh(s){return s?parseInt(s,10):0}function NT(s,e){const t=s/e;return isNaN(t)?0:t}function hf(s){const e=NT(s.viewport,s.content),t=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,n=(s.scrollbar.size-t)*e;return Math.max(n,18)}function tF(s,e,t,n="ltr"){const i=hf(t),a=i/2,l=e||a,c=i-l,d=t.scrollbar.paddingStart+l,f=t.scrollbar.size-t.scrollbar.paddingEnd-c,m=t.content-t.viewport,g=n==="ltr"?[0,m]:[m*-1,0];return kT([d,f],g)(s)}function h1(s,e,t="ltr"){const n=hf(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,l=e.content-e.viewport,c=a-n,d=t==="ltr"?[0,l]:[l*-1,0],f=zc(s,d);return kT([0,l],[0,c])(f)}function kT(s,e){return t=>{if(s[0]===s[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(s[1]-s[0]);return e[0]+n*(t-s[0])}}function jT(s,e){return s>0&&s<e}var nF=(s,e=()=>{})=>{let t={left:s.scrollLeft,top:s.scrollTop},n=0;return(function i(){const a={left:s.scrollLeft,top:s.scrollTop},l=t.left!==a.left,c=t.top!==a.top;(l||c)&&e(),t=a,n=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(n)};function ff(s,e){const t=Mn(s),n=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(n.current),[]),S.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function hl(s,e){const t=Mn(e);On(()=>{let n=0;if(s){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return i.observe(s),()=>{window.cancelAnimationFrame(n),i.unobserve(s)}}},[s,t])}var sF=bT,iF=wT,rF=TT;function Xg({className:s,children:e,...t}){return h.jsxs(sF,{"data-slot":"scroll-area",className:Oe("relative",s),...t,children:[h.jsx(iF,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),h.jsx(aF,{}),h.jsx(rF,{})]})}function aF({className:s,orientation:e="vertical",...t}){return h.jsx(ST,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Oe("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",s),...t,children:h.jsx(CT,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}Fr.workerSrc=`https://unpkg.com/pdfjs-dist@ ${uy}/build/pdf.worker.min.mjs`;function oF({fileUrl:s,book:e,annotations:t,onAddAnnotation:n,onUpdateAnnotation:i,onDeleteAnnotation:a,onDownloadFile:l,onClose:c}){const[d,f]=S.useState(0),[m,g]=S.useState(1),[v,b]=S.useState(0),[_,w]=S.useState(!1),[E,A]=S.useState(!1),[N,T]=S.useState(!0),[j,P]=S.useState("single"),[L,M]=S.useState(!1),[I,F]=S.useState({scale:1,panX:0,panY:0}),[G,K]=S.useState(!1),[ae,X]=S.useState(!1),[H,ie]=S.useState("select"),[R,$]=S.useState(null),[U,z]=S.useState(null),[le,k]=S.useState(null),[O,B]=S.useState(!1),[q,J]=S.useState(!0),[ue,ee]=S.useState(!1),Y=S.useRef(null),oe=S.useRef(null),ge=S.useRef(null),xe=S.useRef(null),be=S.useRef(null),Ge=S.useRef(0),Ie=S.useRef(null),te=S.useRef(null);S.useEffect(()=>{const Q=()=>{const ve=window.innerWidth<768;B(ve),M(!ve),ve&&I.scale===1&&F({scale:.9,panX:0,panY:0})};Q(),window.addEventListener("resize",Q);const fe=localStorage.getItem(`pdf-progress-${e.id}`);return fe&&g(parseInt(fe,10)),()=>{window.removeEventListener("resize",Q),Ie.current&&cancelAnimationFrame(Ie.current)}},[e.id,I.scale]);const Se=S.useCallback(()=>{te.current&&clearTimeout(te.current),J(!0),te.current=setTimeout(()=>{!G&&!ae&&H!=="note"&&!R&&J(!1)},3e3)},[G,ae,H,R]);S.useEffect(()=>{const Q=()=>{const fe=!!document.fullscreenElement;w(fe),fe&&!ue&&(ee(!0),Ae.success("",{duration:3e3})),Se()};return document.addEventListener("fullscreenchange",Q),()=>document.removeEventListener("fullscreenchange",Q)},[ue,Se]);const $e=S.useCallback((Q,fe,ve)=>{if(!Y.current||!oe.current)return{x:Q,y:fe};const Ee=Y.current.getBoundingClientRect(),We=oe.current.offsetWidth*ve,ct=oe.current.offsetHeight*ve,Pt=Math.max(0,(We-Ee.width)/2+50),jt=Math.max(0,(ct-Ee.height)/2+50);return We<=Ee.width?Q=0:Q=Math.max(-Pt,Math.min(Pt,Q)),ct<=Ee.height?fe=0:fe=Math.max(-jt,Math.min(jt,fe)),{x:Q,y:fe}},[]),Re=S.useCallback(({numPages:Q})=>{f(Q)},[]),ht=S.useCallback(()=>{Ae.error("PDF ")},[]),un=S.useCallback(Q=>{const fe=Math.max(1,Math.min(Q,d));g(fe),localStorage.setItem(`pdf-progress-${e.id}`,String(fe)),F(ve=>({...ve,panX:0,panY:0}))},[d,e.id]),Nt=()=>un(m-1),wt=()=>un(m+1),Ut=()=>F({scale:O?.9:1,panX:0,panY:0}),kt=S.useCallback(async()=>{try{document.fullscreenElement?await document.exitFullscreen():await Y.current?.requestFullscreen()}catch{Ae.error("")}},[]),Fs=Q=>{if(Se(),Q.touches.length===2){K(!0);const fe=Q.touches[0].pageX-Q.touches[1].pageX,ve=Q.touches[0].pageY-Q.touches[1].pageY;Ge.current=Math.hypot(fe,ve),xe.current={x:(Q.touches[0].pageX+Q.touches[1].pageX)/2,y:(Q.touches[0].pageY+Q.touches[1].pageY)/2,time:Date.now(),scale:I.scale,panX:I.panX,panY:I.panY}}else if(Q.touches.length===1){const fe=Q.touches[0];if(xe.current={x:fe.clientX,y:fe.clientY,time:Date.now(),scale:I.scale,panX:I.panX,panY:I.panY},be.current={x:fe.clientX,y:fe.clientY},H==="note"&&oe.current){const ve=oe.current.getBoundingClientRect(),Ee=(fe.clientX-ve.left-I.panX)/(ve.width*I.scale),We=(fe.clientY-ve.top-I.panY)/(ve.height*I.scale);Ee>=0&&Ee<=1&&We>=0&&We<=1&&k({x:Ee,y:We,content:""})}}},Fn=Q=>{if(Q.touches.length>1&&Q.preventDefault(),Q.touches.length===2&&xe.current){const fe=Q.touches[0].pageX-Q.touches[1].pageX,ve=Q.touches[0].pageY-Q.touches[1].pageY,We=Math.hypot(fe,ve)/Ge.current,ct=Math.max(.5,Math.min(5,xe.current.scale*We)),Pt=(Q.touches[0].pageX+Q.touches[1].pageX)/2,jt=(Q.touches[0].pageY+Q.touches[1].pageY)/2,Lt=ct/I.scale,_n=Pt-(Pt-I.panX)*Lt,qe=jt-(jt-I.panY)*Lt;Ie.current&&cancelAnimationFrame(Ie.current),Ie.current=requestAnimationFrame(()=>{F({scale:ct,panX:_n,panY:qe})})}else if(Q.touches.length===1&&xe.current&&be.current&&H!=="note"&&H!=="highlight"){const fe=Q.touches[0],ve=fe.clientX-be.current.x,Ee=fe.clientY-be.current.y;if((Math.abs(fe.clientX-xe.current.x)>5||Math.abs(fe.clientY-xe.current.y)>5)&&X(!0),ae||Math.abs(ve)>0||Math.abs(Ee)>0){const We=I.panX+ve,ct=I.panY+Ee;Ie.current&&cancelAnimationFrame(Ie.current),Ie.current=requestAnimationFrame(()=>{F(Pt=>({...Pt,panX:We,panY:ct}))}),be.current={x:fe.clientX,y:fe.clientY}}}},ri=Q=>{if(Q.touches.length===0){const fe=G,ve=ae,Ee=xe.current;if(K(!1),X(!1),H==="highlight"){setTimeout(()=>{Gt()},50),xe.current=null,be.current=null;return}if(H==="note"&&Ee&&!fe&&!ve){Date.now()-Ee.time;const We=Q.changedTouches[0];Math.abs(We.clientX-Ee.x),Math.abs(We.clientY-Ee.y)}if(!H||H==="select"||H==="move"){if(Ee&&!fe&&!ve){const We=Date.now()-Ee.time,ct=Q.changedTouches[0],Pt=Math.abs(ct.clientX-Ee.x),jt=Math.abs(ct.clientY-Ee.y);if(We<300&&Pt<20&&jt<20){const Lt=Date.now();window.lastClickTime&&Lt-window.lastClickTime<300?(Q.preventDefault(),I.scale>1.2?F({scale:1,panX:0,panY:0}):F({scale:2.5,panX:0,panY:0}),window.lastClickTime=0):window.lastClickTime=Lt}if(We<300&&Pt<10&&jt<10){const Lt=window.innerWidth;ct.clientX<Lt*.15&&m>1?Nt():ct.clientX>Lt*.85&&m<d&&wt()}}if(!fe){const We=$e(I.panX,I.panY,I.scale);(We.x!==I.panX||We.y!==I.panY)&&F(ct=>({...ct,panX:We.x,panY:We.y}))}}xe.current=null,be.current=null}else if(Q.touches.length===1&&G){K(!1);const fe=Q.touches[0];xe.current={x:fe.clientX,y:fe.clientY,time:Date.now(),scale:I.scale,panX:I.panX,panY:I.panY},be.current={x:fe.clientX,y:fe.clientY}}},ls=Q=>{if(Q.ctrlKey||Q.metaKey){Q.preventDefault();const fe=Q.deltaY>0?-.1:.1,ve=Math.max(.5,Math.min(5,I.scale+fe));F(Ee=>({...Ee,scale:ve}))}},an=()=>{le&&le.content.trim()&&(n({bookId:e.id,page:m,x:le.x,y:le.y,content:le.content.trim(),color:"#fbbf24",type:"note"}),k(null),ie("select"),Ae.success(""))},Gt=S.useCallback(()=>{if(H!=="highlight")return;const Q=window.getSelection();if(!Q||Q.rangeCount===0)return;const fe=Q.getRangeAt(0),ve=Q.toString().trim();if(!ve||ve.length<1)return;const Ee=fe.startContainer.parentElement?.closest("[data-page-number]");if(!Ee)return;const We=parseInt(Ee.getAttribute("data-page-number")||String(m),10),ct=Ee.getBoundingClientRect(),Pt=Array.from(fe.getClientRects()).map(jt=>({left:(jt.left-ct.left)/ct.width*100,top:(jt.top-ct.top)/ct.height*100,width:jt.width/ct.width*100,height:jt.height/ct.height*100}));Pt.length!==0&&(n({bookId:e.id,page:We,type:"highlight",content:"",color:"#fef08a",rects:Pt,quote:ve,x:0,y:0}),Q.removeAllRanges(),ie("select"),Ae.success(""))},[H,m,e.id,n]),Sn=S.useCallback(Q=>{a(Q),$(null),Ae.success("")},[a]);S.useEffect(()=>{const Q=fe=>{if(fe.target instanceof HTMLTextAreaElement){fe.key==="Escape"&&(fe.target.blur(),z(null));return}if(fe.key==="Escape"){if(R){$(null);return}if(H!=="select"){ie("select"),k(null);return}document.fullscreenElement?document.exitFullscreen():c&&c();return}switch(fe.key){case"ArrowRight":case" ":fe.preventDefault(),wt();break;case"ArrowLeft":fe.preventDefault(),Nt();break;case"+":case"=":fe.preventDefault(),F(ve=>({...ve,scale:Math.min(5,ve.scale+.2)}));break;case"-":fe.preventDefault(),F(ve=>({...ve,scale:Math.max(.5,ve.scale-.2)}));break;case"0":fe.preventDefault(),Ut();break}};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[wt,Nt,c,H,R]);const Pn=S.useMemo(()=>t.filter(Q=>Q.page===m),[t,m]),Us=Oe("flex h-full w-full overflow-hidden relative bg-background touch-manipulation",_&&"fixed inset-0 z-50 bg-black",H!=="highlight"&&"select-none");return j==="thumbnails"?h.jsxs("div",{className:"flex flex-col h-full bg-background",children:[h.jsxs("div",{className:"flex items-center justify-between p-3 border-b h-14 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[c&&h.jsx(me,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:c,children:h.jsx(wg,{className:"h-5 w-5"})}),h.jsxs(me,{variant:"outline",size:"sm",onClick:()=>P("single"),className:"h-9",children:[h.jsx(yl,{className:"h-4 w-4 mr-2"}),""]})]}),h.jsx("span",{className:"font-medium text-sm truncate max-w-[200px]",children:e.title}),h.jsxs("span",{className:"text-xs text-muted-foreground",children:[d," "]})]}),h.jsx(Xg,{className:"flex-1 bg-muted/20",children:h.jsx("div",{className:"p-4 pb-20",children:h.jsx(og,{file:s,onLoadSuccess:Re,onLoadError:ht,children:h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:Array.from({length:d},(Q,fe)=>fe+1).map(Q=>h.jsxs("button",{onClick:()=>{g(Q),P("single")},className:"relative aspect-[3/4] rounded-lg overflow-hidden bg-white shadow-sm hover:shadow-md hover:ring-2 hover:ring-primary transition-all active:scale-95",children:[h.jsx(lg,{pageNumber:Q,scale:.15,renderTextLayer:!1,renderAnnotationLayer:!1}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity flex items-end justify-center pb-2",children:h.jsx("span",{className:"text-white text-xs font-medium",children:Q})}),m===Q&&h.jsx("div",{className:"absolute inset-0 ring-2 ring-primary ring-inset"})]},Q))})})})})]}):h.jsxs("div",{ref:Y,className:Us,onClick:Se,children:[h.jsx("div",{className:Oe("absolute top-0 left-0 right-0 z-40 bg-background/95 backdrop-blur-md border-b transition-transform duration-300 ease-out",_||q?"translate-y-0":"-translate-y-full",_&&"bg-black/90 border-white/10 text-white"),children:h.jsxs("div",{className:"flex items-center justify-between h-14 px-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[c&&!_&&h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-white/10",onClick:c,children:h.jsx(wg,{className:"h-4 w-4"})}),h.jsxs(me,{variant:"ghost",size:"sm",className:"h-8 gap-1 hover:bg-white/10",onClick:()=>P("thumbnails"),children:[h.jsx(Uw,{className:"h-4 w-4"}),!O&&""]})]}),h.jsx("div",{className:"flex items-center gap-4",children:h.jsxs("div",{className:"flex items-center gap-1 bg-muted/50 rounded-full px-3 py-1",children:[h.jsx(me,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-white/20",onClick:Nt,disabled:m<=1,children:h.jsx(sl,{className:"h-4 w-4"})}),h.jsxs("span",{className:"text-sm font-medium tabular-nums min-w-[60px] text-center",children:[m,"/",d]}),h.jsx(me,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-white/20",onClick:wt,disabled:m>=d,children:h.jsx(Ta,{className:"h-4 w-4"})})]})}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsxs("div",{className:"flex items-center gap-1 bg-muted/50 rounded-full px-2 py-1 mr-2",children:[h.jsx(me,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-white/20",onClick:()=>F(Q=>({...Q,scale:Math.max(.5,Q.scale-.2)})),children:h.jsx(eM,{className:"h-4 w-4"})}),h.jsxs("span",{className:"text-xs w-10 text-center font-mono",children:[Math.round(I.scale*100),"%"]}),h.jsx(me,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-white/20",onClick:()=>F(Q=>({...Q,scale:Math.min(5,Q.scale+.2)})),children:h.jsx(QD,{className:"h-4 w-4"})})]}),h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-white/10",onClick:kt,children:_?h.jsx(uD,{className:"h-4 w-4"}):h.jsx(Sg,{className:"h-4 w-4"})})]})]})}),h.jsxs("div",{className:Oe("absolute bottom-6 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-background/95 backdrop-blur-md border rounded-full shadow-lg px-4 py-2 transition-all duration-300 ease-out",q||H!=="select"||R?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none",_&&"bg-black/90 border-white/10 text-white bottom-10"),children:[h.jsx(me,{variant:H==="move"?"default":"ghost",size:"icon",className:"h-9 w-9 rounded-full",onClick:()=>ie(H==="move"?"select":"move"),title:"/",children:h.jsx(pD,{className:"h-4 w-4"})}),h.jsx(me,{variant:H==="highlight"?"default":"ghost",size:"icon",className:Oe("h-9 w-9 rounded-full relative",H==="highlight"&&"ring-2 ring-primary ring-offset-2"),onClick:()=>ie(H==="highlight"?"select":"highlight"),title:"",children:h.jsx(Fw,{className:"h-4 w-4"})}),h.jsx(me,{variant:H==="note"?"default":"ghost",size:"icon",className:Oe("h-9 w-9 rounded-full relative",H==="note"&&"ring-2 ring-primary ring-offset-2"),onClick:()=>ie(H==="note"?"select":"note"),title:"",children:h.jsx(Go,{className:"h-4 w-4"})}),h.jsx("div",{className:"w-px h-4 bg-border mx-1"}),h.jsx(me,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full",onClick:Ut,title:"",children:h.jsx(qR,{className:"h-4 w-4"})}),h.jsx(me,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full",onClick:()=>b(Q=>(Q+90)%360),children:h.jsx(DD,{className:"h-4 w-4"})})]}),H==="highlight"&&h.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-30 bg-primary text-primary-foreground px-4 py-2 rounded-full text-sm shadow-lg flex items-center gap-2 animate-in fade-in slide-in-from-top-2",children:[h.jsx("span",{children:""}),h.jsx("button",{onClick:()=>ie("select"),className:"hover:opacity-80 p-1",children:h.jsx(Vn,{className:"h-3 w-3"})})]}),H==="note"&&h.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-30 bg-amber-500 text-white px-4 py-2 rounded-full text-sm shadow-lg flex items-center gap-2 animate-in fade-in slide-in-from-top-2",children:[h.jsx("span",{children:""}),h.jsx("button",{onClick:()=>{ie("select"),k(null)},className:"hover:opacity-80 p-1",children:h.jsx(Vn,{className:"h-3 w-3"})})]}),h.jsx("div",{ref:ge,className:Oe("flex-1 overflow-hidden relative bg-muted/30",H==="note"?"cursor-crosshair":H==="highlight"?"cursor-text select-text":"cursor-grab active:cursor-grabbing",_&&"bg-black"),onTouchStart:Fs,onTouchMove:Fn,onTouchEnd:ri,onMouseUp:H==="highlight"?Gt:void 0,onWheel:ls,children:h.jsx("div",{className:"w-full h-full flex items-center justify-center will-change-transform",style:{transform:`translate3d(${I.panX}px, ${I.panY}px, 0) scale(${I.scale})`,transformOrigin:"center center",transition:G?"none":"transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:h.jsx(og,{file:s,onLoadSuccess:Re,onLoadError:ht,loading:h.jsx("div",{className:"flex items-center justify-center h-[50vh]",children:h.jsx("div",{className:"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),children:h.jsxs("div",{ref:oe,className:"relative shadow-2xl bg-white",style:{transform:`rotate(${v}deg)`,transformOrigin:"center center"},onClick:Q=>{if(H==="note"&&!ae){const fe=Q.currentTarget.getBoundingClientRect(),ve=(Q.clientX-fe.left)/fe.width,Ee=(Q.clientY-fe.top)/fe.height;k({x:ve,y:Ee,content:""})}},"data-page-number":m,children:[h.jsx(lg,{pageNumber:m,scale:1.5,rotate:v,renderTextLayer:H==="highlight",renderAnnotationLayer:!1,className:"shadow-2xl",canvasBackground:"white"}),H!=="highlight"&&h.jsx("div",{className:"absolute inset-0 z-10"}),Pn.map(Q=>{if(Q.type==="highlight"&&Q.rects){const fe=R?.id===Q.id;return h.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Q.rects.map((ve,Ee)=>h.jsx("div",{className:Oe("absolute pointer-events-auto cursor-pointer transition-all",fe?"bg-yellow-400/80 ring-2 ring-yellow-600 shadow-sm":"bg-yellow-300/60 hover:bg-yellow-400/70 border-b-2 border-yellow-500/50"),style:{left:`${ve.left}%`,top:`${ve.top}%`,width:`${ve.width}%`,height:`${ve.height}%`},onClick:We=>{We.stopPropagation(),We.preventDefault(),$(Q)},onContextMenu:We=>{We.preventDefault(),$(Q)}},Ee))},Q.id)}if(Q.type==="note"){const fe=U===Q.id,ve=R?.id===Q.id;return h.jsx("div",{className:"absolute z-20",style:{left:`${Q.x*100}%`,top:`${Q.y*100}%`,transform:"translate(-50%, -50%)"},children:fe?h.jsxs("div",{className:"bg-white border-2 border-primary rounded-lg shadow-xl p-2 w-48 animate-in zoom-in-95",onClick:Ee=>Ee.stopPropagation(),children:[h.jsx(ei,{autoFocus:!0,defaultValue:Q.content,className:"min-h-[80px] text-sm resize-none border-0 focus-visible:ring-1",onBlur:Ee=>{i(Q.id,Ee.target.value),z(null)},onKeyDown:Ee=>{Ee.key==="Enter"&&Ee.metaKey&&(i(Q.id,Ee.target.value),z(null))}}),h.jsx("div",{className:"flex justify-end mt-2",children:h.jsxs(me,{size:"sm",className:"h-7",onClick:()=>z(null),children:[h.jsx(mv,{className:"h-3 w-3 mr-1"}),""]})})]}):h.jsxs("div",{className:Oe("group relative",ve&&"scale-110"),onClick:Ee=>{Ee.stopPropagation(),$(Q)},children:[h.jsx("div",{className:Oe("w-8 h-8 rounded-full shadow-lg flex items-center justify-center cursor-pointer hover:scale-110 transition-transform border-2 border-white",ve?"bg-amber-500 ring-2 ring-primary":"bg-amber-400 ring-2 ring-amber-400/30"),children:h.jsx(Go,{className:"h-4 w-4 text-white"})}),Q.content&&!ve&&h.jsx("div",{className:"absolute left-10 top-0 bg-white border shadow-lg rounded-lg p-2 w-48 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-30",children:h.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:Q.content})})]})},Q.id)}return null}),le&&h.jsx("div",{className:"absolute z-30",style:{left:`${le.x*100}%`,top:`${le.y*100}%`,transform:"translate(-50%, -50%)"},onClick:Q=>Q.stopPropagation(),children:h.jsxs("div",{className:"bg-white border-2 border-amber-400 rounded-lg shadow-xl p-3 w-56 animate-in zoom-in-95",children:[h.jsx(ei,{autoFocus:!0,placeholder:"...",className:"min-h-[100px] text-sm resize-none border-0 focus-visible:ring-1",value:le.content,onChange:Q=>k({...le,content:Q.target.value}),onKeyDown:Q=>{Q.key==="Enter"&&Q.metaKey&&an(),Q.key==="Escape"&&(k(null),ie("select"))}}),h.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[h.jsx(me,{size:"sm",variant:"ghost",className:"h-7",onClick:()=>{k(null),ie("select")},children:""}),h.jsx(me,{size:"sm",className:"h-7 bg-amber-500 hover:bg-amber-600",onClick:an,children:""})]})]})})]})})})}),!O&&L&&h.jsxs("div",{className:"w-56 border-l bg-background/95 backdrop-blur-md flex flex-col shrink-0 h-full absolute right-0 top-14 bottom-0 z-30 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[h.jsx("span",{className:"font-semibold text-sm",children:""}),h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>M(!1),children:h.jsx(Vn,{className:"h-4 w-4"})})]}),h.jsx(Xg,{className:"flex-1",children:h.jsx(og,{file:s,children:h.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:d},(Q,fe)=>fe+1).map(Q=>h.jsxs("button",{onClick:()=>un(Q),className:Oe("w-full relative aspect-[3/4] rounded-lg overflow-hidden transition-all border-2 hover:opacity-100",m===Q?"border-primary opacity-100 ring-1 ring-primary":"border-transparent opacity-60"),children:[h.jsx(lg,{pageNumber:Q,scale:.12,renderTextLayer:!1,renderAnnotationLayer:!1}),h.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-black/60 text-white text-[10px] py-0.5 text-center font-medium",children:Q})]},Q))})})})]}),O&&!_&&h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-background/95 backdrop-blur-lg border-t flex items-center justify-around z-30 pb-safe",children:[h.jsxs("button",{onClick:()=>P("thumbnails"),className:"flex flex-col items-center gap-1 text-muted-foreground active:scale-95 transition-transform",children:[h.jsx(Uw,{className:"h-5 w-5"}),h.jsx("span",{className:"text-[10px]",children:""})]}),h.jsx("button",{onClick:Nt,disabled:m<=1,className:"p-3 disabled:opacity-30 active:scale-95 transition-transform",children:h.jsx(sl,{className:"h-6 w-6"})}),h.jsxs("button",{onClick:()=>M(!0),className:"flex flex-col items-center px-4 active:scale-95 transition-transform",children:[h.jsx("span",{className:"text-lg font-bold tabular-nums leading-none",children:m}),h.jsxs("span",{className:"text-[10px] text-muted-foreground leading-tight",children:["/",d]})]}),h.jsx("button",{onClick:wt,disabled:m>=d,className:"p-3 disabled:opacity-30 active:scale-95 transition-transform",children:h.jsx(Ta,{className:"h-6 w-6"})}),h.jsxs("button",{onClick:kt,className:"flex flex-col items-center gap-1 text-muted-foreground active:scale-95 transition-transform",children:[h.jsx(Sg,{className:"h-5 w-5"}),h.jsx("span",{className:"text-[10px]",children:""})]})]}),h.jsx(vn,{open:!!R,onOpenChange:()=>$(null),children:h.jsxs(yn,{className:"sm:max-w-md",children:[h.jsx(bn,{children:h.jsxs(xn,{className:"flex items-center gap-2",children:[R?.type==="highlight"?h.jsx(Fw,{className:"h-5 w-5 text-yellow-600"}):h.jsx(Go,{className:"h-5 w-5 text-amber-500"}),R?.type==="highlight"?"":""]})}),h.jsxs("div",{className:"mt-4 space-y-4",children:[h.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",R?.page," "]}),R?.type==="highlight"&&R?.quote&&h.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg",children:h.jsxs("p",{className:"text-sm text-yellow-900 leading-relaxed",children:['"',R.quote,'"']})}),R?.type==="note"&&h.jsx("div",{className:"bg-muted p-4 rounded-lg",children:h.jsx("p",{className:"whitespace-pre-wrap text-sm",children:R.content||""})}),h.jsxs("div",{className:"flex gap-2 pt-2",children:[R?.type==="note"&&h.jsxs(me,{variant:"outline",className:"flex-1",onClick:()=>{z(R.id),$(null)},children:[h.jsx(ED,{className:"h-4 w-4 mr-2"}),""]}),h.jsxs(me,{variant:"destructive",className:"flex-1",onClick:()=>R&&Sn(R.id),children:[h.jsx(Zs,{className:"h-4 w-4 mr-2"}),"",R?.type==="highlight"?"":""]})]})]})]})}),h.jsx(vn,{open:E,onOpenChange:A,children:h.jsxs(yn,{children:[h.jsx(bn,{children:h.jsxs(xn,{className:"flex items-center gap-2",children:[h.jsx(UR,{className:"h-5 w-5"}),""]})}),h.jsxs("div",{className:"py-4 space-y-4",children:[h.jsxs("p",{className:"text-sm text-muted-foreground",children:["",e.title,""]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Yg,{id:"include-annotations",checked:N,onCheckedChange:Q=>T(Q)}),h.jsxs("label",{htmlFor:"include-annotations",className:"text-sm font-medium",children:[" (",t.length,")"]})]})]}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(me,{variant:"outline",onClick:()=>A(!1),children:""}),h.jsxs(me,{onClick:()=>{l?.(N),A(!1)},children:[h.jsx(Ic,{className:"h-4 w-4 mr-2"}),""]})]})]})})]})}function jo(s,e,t){let n=t.initialDeps??[],i,a=!0;function l(){var c,d,f;let m;t.key&&((c=t.debug)!=null&&c.call(t))&&(m=Date.now());const g=s();if(!(g.length!==n.length||g.some((_,w)=>n[w]!==_)))return i;n=g;let b;if(t.key&&((d=t.debug)!=null&&d.call(t))&&(b=Date.now()),i=e(...g),t.key&&((f=t.debug)!=null&&f.call(t))){const _=Math.round((Date.now()-m)*100)/100,w=Math.round((Date.now()-b)*100)/100,E=w/16,A=(N,T)=>{for(N=String(N);N.length<T;)N=" "+N;return N};console.info(`%c ${A(w,5)} /${A(_,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*E,120))}deg 100% 31%);`,t?.key)}return t?.onChange&&!(a&&t.skipInitialOnChange)&&t.onChange(i),a=!1,i}return l.updateDeps=c=>{n=c},l}function f1(s,e){if(s===void 0)throw new Error("Unexpected undefined");return s}const lF=(s,e)=>Math.abs(s-e)<1.01,cF=(s,e,t)=>{let n;return function(...i){s.clearTimeout(n),n=s.setTimeout(()=>e.apply(this,i),t)}},p1=s=>{const{offsetWidth:e,offsetHeight:t}=s;return{width:e,height:t}},uF=s=>s,dF=s=>{const e=Math.max(s.startIndex-s.overscan,0),t=Math.min(s.endIndex+s.overscan,s.count-1),n=[];for(let i=e;i<=t;i++)n.push(i);return n},hF=(s,e)=>{const t=s.scrollElement;if(!t)return;const n=s.targetWindow;if(!n)return;const i=l=>{const{width:c,height:d}=l;e({width:Math.round(c),height:Math.round(d)})};if(i(p1(t)),!n.ResizeObserver)return()=>{};const a=new n.ResizeObserver(l=>{const c=()=>{const d=l[0];if(d?.borderBoxSize){const f=d.borderBoxSize[0];if(f){i({width:f.inlineSize,height:f.blockSize});return}}i(p1(t))};s.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(c):c()});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},m1={passive:!0},g1=typeof window>"u"?!0:"onscrollend"in window,fF=(s,e)=>{const t=s.scrollElement;if(!t)return;const n=s.targetWindow;if(!n)return;let i=0;const a=s.options.useScrollendEvent&&g1?()=>{}:cF(n,()=>{e(i,!1)},s.options.isScrollingResetDelay),l=m=>()=>{const{horizontal:g,isRtl:v}=s.options;i=g?t.scrollLeft*(v&&-1||1):t.scrollTop,a(),e(i,m)},c=l(!0),d=l(!1);t.addEventListener("scroll",c,m1);const f=s.options.useScrollendEvent&&g1;return f&&t.addEventListener("scrollend",d,m1),()=>{t.removeEventListener("scroll",c),f&&t.removeEventListener("scrollend",d)}},pF=(s,e,t)=>{if(e?.borderBoxSize){const n=e.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return s[t.options.horizontal?"offsetWidth":"offsetHeight"]},mF=(s,{adjustments:e=0,behavior:t},n)=>{var i,a;const l=s+e;(a=(i=n.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[n.options.horizontal?"left":"top"]:l,behavior:t})};class gF{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const l=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var i;(i=n())==null||i.disconnect(),t=null},observe:i=>{var a;return(a=n())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=n())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,i])=>{typeof i>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:uF,rangeExtractor:dF,onChange:()=>{},measureElement:pF,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var n,i;(i=(n=this.options).onChange)==null||i.call(n,this,t)},this.maybeNotify=jo(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const i=new Map,a=new Map;for(let l=n-1;l>=0;l--){const c=t[l];if(i.has(c.lane))continue;const d=a.get(c.lane);if(d==null||c.end>d.end?a.set(c.lane,c):c.end<d.end&&i.set(c.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((l,c)=>l.end===c.end?l.index-c.index:l.end-c.end)[0]:void 0},this.getMeasurementOptions=jo(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(t,n,i,a,l,c)=>(this.prevLanes!==void 0&&this.prevLanes!==c&&(this.lanesChangedFlag=!0),this.prevLanes=c,this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:i,getItemKey:a,enabled:l,lanes:c}),{key:!1}),this.getMeasurements=jo(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:i,getItemKey:a,enabled:l,lanes:c},d)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>t)for(const v of this.laneAssignments.keys())v>=t&&this.laneAssignments.delete(v);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const f=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===t&&(this.lanesSettling=!1);const m=this.measurementsCache.slice(0,f),g=new Array(c).fill(void 0);for(let v=0;v<f;v++){const b=m[v];b&&(g[b.lane]=v)}for(let v=f;v<t;v++){const b=a(v),_=this.laneAssignments.get(v);let w,E;if(_!==void 0&&this.options.lanes>1){w=_;const j=g[w],P=j!==void 0?m[j]:void 0;E=P?P.end+this.options.gap:n+i}else{const j=this.options.lanes===1?m[v-1]:this.getFurthestMeasurement(m,v);E=j?j.end+this.options.gap:n+i,w=j?j.lane:v%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(v,w)}const A=d.get(b),N=typeof A=="number"?A:this.options.estimateSize(v),T=E+N;m[v]={index:v,start:E,size:N,end:T,key:b,lane:w},g[w]=v}return this.measurementsCache=m,m},{key:!1,debug:()=>this.options.debug}),this.calculateRange=jo(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,n,i,a)=>this.range=t.length>0&&n>0?vF({measurements:t,outerSize:n,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=jo(()=>{let t=null,n=null;const i=this.calculateRange();return i&&(t=i.startIndex,n=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,n]},(t,n,i,a,l)=>a===null||l===null?[]:t({startIndex:a,endIndex:l,overscan:n,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,i=t.getAttribute(n);return i?parseInt(i,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const i=this.indexFromElement(t),a=this.measurementsCache[i];if(!a)return;const l=a.key,c=this.elementsCache.get(l);c!==t&&(c&&this.observer.unobserve(c),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(i,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const i=this.measurementsCache[t];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,l=n-a;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,l,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,i)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(i))});return}this._measureElement(t,void 0)},this.getVirtualItems=jo(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,n)=>{const i=[];for(let a=0,l=t.length;a<l;a++){const c=t[a],d=n[c];i.push(d)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return f1(n[RT(0,n.length-1,i=>f1(n[i]).start,t)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const t=this.scrollElement.document.documentElement;return this.options.horizontal?t.scrollWidth-this.scrollElement.innerWidth:t.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(t,n,i=0)=>{if(!this.scrollElement)return 0;const a=this.getSize(),l=this.getScrollOffset();n==="auto"&&(n=t>=l+a?"end":"start"),n==="center"?t+=(i-a)/2:n==="end"&&(t-=a);const c=this.getMaxScrollOffset();return Math.max(Math.min(c,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const i=this.measurementsCache[t];if(!i)return;const a=this.getSize(),l=this.getScrollOffset();if(n==="auto")if(i.end>=l+a-this.options.scrollPaddingEnd)n="end";else if(i.start<=l+this.options.scrollPaddingStart)n="start";else return[l,n];if(n==="end"&&t===this.options.count-1)return[this.getMaxScrollOffset(),n];const c=n==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(c,n,i.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:n="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:i})},this.scrollToIndex=(t,{align:n="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1)),this.currentScrollToIndex=t;let a=0;const l=10,c=f=>{if(!this.targetWindow)return;const m=this.getOffsetForIndex(t,f);if(!m){console.warn("Failed to get offset for index:",t);return}const[g,v]=m;this._scrollToOffset(g,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{if(!this.targetWindow)return;const b=()=>{if(this.currentScrollToIndex!==t)return;const _=this.getScrollOffset(),w=this.getOffsetForIndex(t,v);if(!w){console.warn("Failed to get offset for index:",t);return}lF(w[0],_)||d(v)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(b):b()})},d=f=>{this.targetWindow&&this.currentScrollToIndex===t&&(a++,a<l?this.targetWindow.requestAnimationFrame(()=>c(f)):console.warn(`Failed to scroll to index ${t} after ${l} attempts.`))};c(n)},this.scrollBy=(t,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let i;if(n.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((t=n[n.length-1])==null?void 0:t.end)??0;else{const a=Array(this.options.lanes).fill(null);let l=n.length-1;for(;l>=0&&a.some(c=>c===null);){const c=n[l];a[c.lane]===null&&(a[c.lane]=c.end),l--}i=Math.max(...a.filter(c=>c!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:i})=>{this.options.scrollToFn(t,{behavior:i,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(e)}}const RT=(s,e,t,n)=>{for(;s<=e;){const i=(s+e)/2|0,a=t(i);if(a<n)s=i+1;else if(a>n)e=i-1;else return i}return s>0?s-1:0};function vF({measurements:s,outerSize:e,scrollOffset:t,lanes:n}){const i=s.length-1,a=d=>s[d].start;if(s.length<=n)return{startIndex:0,endIndex:i};let l=RT(0,i,a,t),c=l;if(n===1)for(;c<i&&s[c].end<t+e;)c++;else if(n>1){const d=Array(n).fill(0);for(;c<i&&d.some(m=>m<t+e);){const m=s[c];d[m.lane]=m.end,c++}const f=Array(n).fill(t+e);for(;l>=0&&f.some(m=>m>=t);){const m=s[l];f[m.lane]=m.start,l--}l=Math.max(0,l-l%n),c=Math.min(i,c+(n-1-c%n))}return{startIndex:l,endIndex:c}}const v1=typeof document<"u"?S.useLayoutEffect:S.useEffect;function yF({useFlushSync:s=!0,...e}){const t=S.useReducer(()=>({}),{})[1],n={...e,onChange:(a,l)=>{var c;s&&l?fl.flushSync(t):t(),(c=e.onChange)==null||c.call(e,a,l)}},[i]=S.useState(()=>new gF(n));return i.setOptions(n),v1(()=>i._didMount(),[]),v1(()=>i._willUpdate()),i}function bF(s){return yF({observeElementRect:hF,observeElementOffset:fF,scrollToFn:mF,...s})}const xF=[{name:"",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans SC", sans-serif'},{name:"",value:'"Noto Serif SC", "Source Han Serif SC", "SimSun", "STSong", "Songti SC", serif'},{name:"",value:'"Noto Sans SC", "Source Han Sans SC", "SimHei", "STHeiti", "Heiti SC", sans-serif'},{name:"",value:'"KaiTi", "Kaiti SC", "STKaiti", "", serif'},{name:"",value:'"FangSong", "FangSong SC", "STFangsong", serif'}],cg=[{name:"",bg:"#ffffff",text:"#1f2937",accent:"#3b82f6",border:"#f3f4f6",secondaryBg:"#fafafa"},{name:"",bg:"#fafafa",text:"#374151",accent:"#2563eb",border:"#e5e7eb",secondaryBg:"#f3f4f6"},{name:"",bg:"#0f172a",text:"#e2e8f0",accent:"#60a5fa",border:"#1e293b",secondaryBg:"#1e293b"},{name:"",bg:"#f4f1ea",text:"#2d3748",accent:"#48bb78",border:"#e8e4dc",secondaryBg:"#ebe7df"},{name:"",bg:"#f5f0e6",text:"#5c4b37",accent:"#8b6914",border:"#e5ddd0",secondaryBg:"#efe8db"}],wF=(s,e)=>{const t=new Uint8Array(s);if(e&&e!=="auto")try{return new TextDecoder(e,{fatal:!1}).decode(t)}catch{console.warn(` ${e} `)}if(t.length>=3&&t[0]===239&&t[1]===187&&t[2]===191)return new TextDecoder("utf-8").decode(t.slice(3));if(t.length>=2&&t[0]===255&&t[1]===254)return new TextDecoder("utf-16le").decode(t.slice(2));try{const i=new TextDecoder("utf-8",{fatal:!0}).decode(t);if(!/[\u0000-\u0008\u000b\u000c\u000e-\u001f]/.test(i))return i}catch{}try{return new TextDecoder("gb18030",{fatal:!1}).decode(t)}catch{}return new TextDecoder("utf-8",{fatal:!1}).decode(t)},SF=s=>{try{const e=/[]+/,t=(s.match(/[\x80-\xff]/g)||[]).length/s.length;if(e.test(s)||t>.2){console.log(" GBK ...");const n=new Uint8Array(s.length);let i=!0;for(let a=0;a<s.length;a++){const l=s.charCodeAt(a);if(l>255){i=!1;break}n[a]=l}if(i)try{const l=new TextDecoder("gb18030",{fatal:!1}).decode(n);if((l.match(/[]/g)||[]).length<l.length*.01)return console.log("GBK "),l}catch{}}}catch{}return s},_F=s=>{if(!s)return"";let e=s;return e=SF(e),e=e.replace(/^\uFEFF|^\uFFFE/g,""),e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e=e.replace(/[ \t]+$/gm,""),e=e.replace(/[\x00-\x08\x0b\x0c\x0e-\x1f\x7f]/g,""),e=e.replace(/\n{3,}/g,`

`),e=e.trim(),e},AF=s=>{const e=s.split(`
`),t=[];let n=-1,i=0;const a=/^([\d]+[]|[][]|\d+[.]\s*|.*?|Chapter\s+\d+|Prologue|Epilogue|Preface|Introduction)/i;return e.forEach(l=>{const c=l.trim();c&&(a.test(c)&&c.length<100?(n++,t.push({type:"title",content:c,chapterIndex:n,globalIndex:i++})):(n===-1&&(n=0,t.push({type:"title",content:"",chapterIndex:0,globalIndex:i++})),t.push({type:"paragraph",content:c,chapterIndex:n,globalIndex:i++})))}),t.length>0?t:[{type:"paragraph",content:s,chapterIndex:0,globalIndex:0}]},_c={loadSettings:()=>({fontSize:18,fontFamily:xF[0].value,theme:0,lineHeight:1.8,letterSpacing:0,textAlign:"justify",paragraphSpacing:1,autoHideHeader:!0}),saveSettings:s=>{try{localStorage.setItem("reader-settings-v4",JSON.stringify(s))}catch{}},loadProgress:s=>{try{const e=JSON.parse(localStorage.getItem(`reader-progress-v4-${s}`)||"{}");return typeof e.index=="number"?e.index:0}catch{return 0}},saveProgress:(s,e)=>{try{localStorage.setItem(`reader-progress-v4-${s}`,JSON.stringify({index:e,time:Date.now()}))}catch{}}},EF=({content:s="",title:e,bookId:t,onClose:n,rawBuffer:i,encoding:a="auto"})=>{const l=S.useMemo(()=>{let Y;return i?Y=wF(i,a):Y=s,_F(Y)},[s,i,a]),c=S.useMemo(()=>AF(l),[l]),[d,f]=S.useState(_c.loadSettings()),[m,g]=S.useState(0),[v,b]=S.useState(!0),[_,w]=S.useState(!1),[E,A]=S.useState(!1),[N,T]=S.useState(!1),[j,P]=S.useState(!1),[L,M]=S.useState(0),[I,F]=S.useState(0),G=S.useRef(null),K=S.useRef(void 0),ae=S.useRef(0),X=S.useRef(0),H=cg[d.theme]||cg[0];S.useEffect(()=>{const Y=()=>{const oe=document.createElement("div");oe.style.position="fixed",oe.style.paddingTop="env(safe-area-inset-top)",oe.style.paddingBottom="env(safe-area-inset-bottom)",oe.style.paddingLeft="env(safe-area-inset-left)",oe.style.paddingRight="env(safe-area-inset-right)",document.body.appendChild(oe);const ge=getComputedStyle(oe),xe=parseInt(ge.paddingTop)||0,be=parseInt(ge.paddingBottom)||0;document.body.removeChild(oe),M(xe),F(be)};return Y(),window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[]);const ie=S.useCallback(Y=>{const oe=c[Y];if(!oe)return d.fontSize*d.lineHeight;const ge=d.fontSize*d.lineHeight;if(oe.type==="title")return ge*1.5+48;const xe=Math.max(20,Math.floor(600/(d.fontSize*.8))),be=Math.ceil(oe.content.length/xe);return Math.max(ge,be*ge*d.lineHeight)},[d.fontSize,d.lineHeight,c]),R=bF({count:c.length,getScrollElement:()=>G.current,estimateSize:ie,overscan:5,measureElement:S.useCallback((Y,oe,ge)=>Y?Y.getBoundingClientRect().height:0,[]),getItemKey:S.useCallback(Y=>c[Y]?.globalIndex??Y,[c])});S.useEffect(()=>{if(c.length===0)return;const Y=_c.loadProgress(t);ae.current=Y,X.current=Y;const oe=setTimeout(()=>{if(Y>0&&Y<c.length){R.scrollToIndex(Y,{align:"start",behavior:"auto"});const ge=c[Y];ge&&g(ge.chapterIndex)}P(!0)},100);return()=>clearTimeout(oe)},[c,t,R]),S.useEffect(()=>{const Y=R.getVirtualItems();if(Y.length===0)return;const oe=Y[0];if(!oe)return;const ge=oe.index;ae.current=ge;const xe=c[ge];xe&&(g(xe.chapterIndex),(Math.abs(ge-X.current)>10||xe.chapterIndex!==m)&&(_c.saveProgress(t,ge),X.current=ge))},[R.getVirtualItems(),c,t,m]),S.useEffect(()=>{if(!d.autoHideHeader||_||E){clearTimeout(K.current);return}return K.current=setTimeout(()=>{!_&&!E&&b(!1)},4e3),()=>clearTimeout(K.current)},[d.autoHideHeader,_,E,v]),S.useEffect(()=>{const Y=()=>{T(!!document.fullscreenElement),setTimeout(()=>{const oe=new Event("resize");window.dispatchEvent(oe)},100)};return document.addEventListener("fullscreenchange",Y),()=>document.removeEventListener("fullscreenchange",Y)},[]),S.useEffect(()=>{const Y=oe=>{_||E||(oe.key==="ArrowLeft"||oe.key==="ArrowUp"||oe.key==="PageUp"?(oe.preventDefault(),G.current?.scrollBy({top:-window.innerHeight*.85,behavior:"smooth"})):oe.key==="ArrowRight"||oe.key==="ArrowDown"||oe.key===" "||oe.key==="PageDown"?(oe.preventDefault(),G.current?.scrollBy({top:window.innerHeight*.85,behavior:"smooth"})):oe.key==="Escape"&&(N?document.exitFullscreen():_?w(!1):E?A(!1):b(ge=>!ge)))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[_,E,N]);const $=S.useCallback(async()=>{try{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()}catch{}},[]),U=S.useMemo(()=>{const Y=[];return c.forEach((oe,ge)=>{oe.type==="title"&&Y.push({index:oe.chapterIndex,title:oe.content,itemIndex:ge})}),Y.length>0?Y:[{index:0,title:"",itemIndex:0}]},[c]),z=S.useCallback(Y=>{const oe=c.find(ge=>ge.chapterIndex===Y&&ge.type==="title");if(oe){const ge=c.findIndex(xe=>xe.globalIndex===oe.globalIndex);ge!==-1&&(R.scrollToIndex(ge,{align:"start",behavior:"smooth"}),g(Y),A(!1),b(!0),ae.current=ge,_c.saveProgress(t,ge),X.current=ge)}},[c,R,t]),le=S.useCallback(()=>{m>0&&z(m-1)},[m,z]),k=S.useCallback(()=>{m<U.length-1&&z(m+1)},[m,U.length,z]),O=S.useCallback(Y=>{if(Y.target.closest(".panel")||Y.target.closest("button")||Y.target.closest("input"))return;const oe=Y.currentTarget.getBoundingClientRect(),ge=Y.clientX-oe.left,xe=oe.width;ge<xe*.2?G.current?.scrollBy({top:-window.innerHeight*.85,behavior:"smooth"}):ge>xe*.8?G.current?.scrollBy({top:window.innerHeight*.85,behavior:"smooth"}):!_&&!E&&b(be=>!be)},[_,E]),B=S.useCallback((Y,oe)=>{const ge={...d,[Y]:oe};f(ge),_c.saveSettings(ge),requestAnimationFrame(()=>R.measure())},[d,R]),q=S.useCallback(Y=>{const oe=c[Y.index];if(!oe)return null;const ge=oe.type==="title";return h.jsx("div",{ref:R.measureElement,"data-index":Y.index,className:`px-6 ${ge?"pt-12 pb-8":"py-0"}`,style:{fontSize:ge?`${d.fontSize*1.3}px`:`${d.fontSize}px`,fontFamily:d.fontFamily,lineHeight:ge?1.4:d.lineHeight,letterSpacing:`${d.letterSpacing}px`,textAlign:ge?"center":d.textAlign,color:ge?H.accent:H.text,fontWeight:ge?"700":"400",marginBottom:ge?"2rem":`${d.paragraphSpacing}em`,textIndent:!ge&&d.textAlign!=="center"?"2em":"0",willChange:"transform",contain:"layout style paint",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap",minHeight:"1em"},children:oe.content},Y.key)},[c,d,H,R]),J=S.useMemo(()=>{const Y=R.scrollOffset||0,oe=R.getTotalSize(),ge=G.current?.clientHeight||0;return oe===0||oe<=ge?0:Math.min(100,Math.max(0,Math.round(Y/(oe-ge)*100)))},[R.scrollOffset,R.getTotalSize()]);if(!c.length)return null;const ue=N?Math.max(L,0):0,ee=N?Math.max(I,0):0;return h.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col overflow-hidden",style:{backgroundColor:H.bg,fontFamily:d.fontFamily,WebkitFontSmoothing:"antialiased",paddingTop:ue,paddingBottom:ee},children:[N&&h.jsx("div",{className:"fixed top-0 left-0 right-0 z-[60] pointer-events-none",style:{height:L>0?L:0,backgroundColor:H.bg}}),!j&&h.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center",style:{backgroundColor:H.bg},children:h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:`${H.accent}40`,borderTopColor:H.accent}}),h.jsx("span",{style:{color:H.text},children:"..."})]})}),h.jsx("header",{className:`absolute left-0 right-0 z-40 transition-all duration-300 ${v?"opacity-100 translate-y-0":"opacity-0 -translate-y-full pointer-events-none"}`,style:{top:ue,backgroundColor:`${H.bg}f0`,backdropFilter:"blur(12px)",borderBottom:`1px solid ${H.border}`},children:h.jsxs("div",{className:"h-14 px-4 flex items-center justify-between max-w-3xl mx-auto",children:[h.jsx("button",{onClick:n,className:"p-2 -ml-2 rounded-full active:opacity-60",style:{color:H.text},children:h.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",children:h.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),h.jsxs("div",{className:"flex-1 text-center px-4 overflow-hidden",children:[h.jsx("h1",{className:"text-[15px] font-semibold truncate",style:{color:H.text},children:e}),h.jsx("p",{className:"text-[11px] opacity-60 truncate",style:{color:H.text},children:U[m]?.title||""})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>A(!0),className:"p-2.5 rounded-full active:opacity-60",style:{color:H.text},children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),h.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),h.jsx("button",{onClick:$,className:"p-2.5 rounded-full active:opacity-60",style:{color:H.text},children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:N?h.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"}):h.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})}),h.jsx("button",{onClick:()=>w(!0),className:"p-2.5 rounded-full active:opacity-60",style:{color:H.text},children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"3"}),h.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]})]})}),h.jsx("div",{ref:G,className:"flex-1 overflow-y-auto relative w-full h-full",onClick:O,style:{paddingTop:v?56+ue:24+ue,paddingBottom:v?64+ee:40+ee},children:h.jsx("div",{style:{height:`${R.getTotalSize()}px`,width:"100%",position:"relative"},children:R.getVirtualItems().map(Y=>h.jsx("div",{className:"absolute top-0 left-0 w-full",style:{transform:`translateY(${Y.start}px)`},children:q(Y)},Y.key))})}),h.jsx("footer",{className:`absolute left-0 right-0 z-40 transition-all duration-300 ${v?"opacity-100 translate-y-0":"opacity-0 translate-y-full pointer-events-none"}`,style:{bottom:ee,backgroundColor:`${H.bg}f0`,backdropFilter:"blur(12px)",borderTop:`1px solid ${H.border}`},children:h.jsxs("div",{className:"h-16 px-6 flex items-center gap-4 max-w-3xl mx-auto",children:[h.jsx("button",{onClick:le,disabled:m===0,className:"text-[13px] font-semibold disabled:opacity-30 active:opacity-60",style:{color:H.text},children:""}),h.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex justify-between text-[11px] opacity-50",style:{color:H.text},children:[h.jsxs("span",{children:[J,"%"]}),h.jsxs("span",{children:[m+1," / ",U.length]})]}),h.jsxs("div",{className:"relative h-1.5 rounded-full overflow-hidden",style:{backgroundColor:H.border},children:[h.jsx("div",{className:"absolute left-0 top-0 h-full rounded-full transition-all",style:{width:`${J}%`,backgroundColor:H.accent}}),h.jsx("input",{type:"range",min:0,max:c.length-1,value:ae.current,onChange:Y=>{const oe=parseInt(Y.target.value);ae.current=oe,R.scrollToIndex(oe,{align:"start",behavior:"smooth"})},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]}),h.jsx("button",{onClick:k,disabled:m>=U.length-1,className:"text-[13px] font-semibold disabled:opacity-30 active:opacity-60",style:{color:H.text},children:""})]})}),E&&h.jsxs("div",{className:"absolute inset-0 z-50 flex",children:[h.jsxs("div",{className:"w-[min(320px,85vw)] h-full shadow-2xl flex flex-col",style:{backgroundColor:H.bg,paddingTop:ue},children:[h.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{borderColor:H.border},children:[h.jsx("h2",{className:"font-bold text-lg",style:{color:H.text},children:""}),h.jsx("button",{onClick:()=>A(!1),style:{color:H.text},className:"p-2",children:""})]}),h.jsx("div",{className:"flex-1 overflow-y-auto",children:U.map(Y=>h.jsx("button",{onClick:()=>z(Y.index),className:"w-full text-left px-6 py-4 border-b active:opacity-60",style:{borderColor:H.border,color:m===Y.index?H.accent:H.text,backgroundColor:m===Y.index?`${H.accent}10`:"transparent"},children:h.jsx("span",{className:"text-[15px] block truncate",children:Y.title})},Y.index))})]}),h.jsx("div",{className:"flex-1 bg-black/30",onClick:()=>A(!1)})]}),_&&h.jsxs("div",{className:"absolute inset-0 z-50 flex justify-end",children:[h.jsx("div",{className:"flex-1 bg-black/30",onClick:()=>w(!1)}),h.jsxs("div",{className:"w-[min(360px,90vw)] h-full shadow-2xl p-6 overflow-y-auto",style:{backgroundColor:H.bg,paddingTop:24+ue},children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h2",{className:"font-bold text-lg",style:{color:H.text},children:""}),h.jsx("button",{onClick:()=>w(!1),style:{color:H.text},className:"p-2",children:""})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsxs("span",{style:{color:H.text},children:[": ",d.fontSize,"px"]}),h.jsx("input",{type:"range",min:"12",max:"32",value:d.fontSize,onChange:Y=>B("fontSize",parseInt(Y.target.value)),className:"w-full mt-2"})]}),h.jsxs("div",{children:[h.jsxs("span",{style:{color:H.text},children:[": ",d.lineHeight]}),h.jsx("input",{type:"range",min:"1.2",max:"2.8",step:"0.1",value:d.lineHeight,onChange:Y=>B("lineHeight",parseFloat(Y.target.value)),className:"w-full mt-2"})]}),h.jsxs("div",{children:[h.jsx("span",{style:{color:H.text},children:""}),h.jsx("div",{className:"grid grid-cols-5 gap-2 mt-2",children:cg.map((Y,oe)=>h.jsx("button",{onClick:()=>B("theme",oe),className:"aspect-square rounded-lg border-2",style:{backgroundColor:Y.bg,borderColor:d.theme===oe?Y.accent:"transparent"}},oe))})]}),h.jsxs("div",{children:[h.jsx("span",{style:{color:H.text},children:""}),h.jsx("div",{className:"flex gap-2 mt-2",children:["left","justify","center"].map(Y=>h.jsx("button",{onClick:()=>B("textAlign",Y),className:"flex-1 py-2 rounded text-sm",style:{backgroundColor:d.textAlign===Y?H.accent:H.secondaryBg,color:d.textAlign===Y?"#fff":H.text},children:Y==="left"?"":Y==="justify"?"":""},Y))})]})]})]})]})]})},CF={ongoing:"",completed:"",archived:""},TF={ongoing:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700",archived:"bg-gray-100 text-gray-700"},y1=s=>s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/(1024*1024)).toFixed(1)+" MB";function NF({projects:s,onAddProject:e,onDeleteProject:t,onAddKnowledge:n,onAddLesson:i,onAddFile:a,onDeleteFile:l,onDownloadFile:c}){const[d,f]=S.useState(!1),[m,g]=S.useState(null),[v,b]=S.useState(!1),[_,w]=S.useState(!1),[E,A]=S.useState(!1),N=S.useRef(null),[T,j]=S.useState({name:"",description:"",status:"ongoing",startDate:new Date().toISOString().split("T")[0],tags:[],newTag:""}),[P,L]=S.useState({title:"",content:"",category:"technical"}),[M,I]=S.useState({title:"",content:"",type:"success"}),[F,G]=S.useState({description:"",selectedFile:null}),K=()=>{if(!T.name.trim()){Ae.error("");return}e({name:T.name.trim(),description:T.description.trim(),status:T.status,startDate:T.startDate,tags:T.tags}),j({name:"",description:"",status:"ongoing",startDate:new Date().toISOString().split("T")[0],tags:[],newTag:""}),f(!1),Ae.success("")},ae=()=>{if(!m||!P.title.trim()||!P.content.trim()){Ae.error("");return}n(m.id,{title:P.title.trim(),content:P.content.trim(),category:P.category}),L({title:"",content:"",category:"technical"}),b(!1),Ae.success("")},X=()=>{if(!m||!M.title.trim()||!M.content.trim()){Ae.error("");return}i(m.id,{title:M.title.trim(),content:M.content.trim(),type:M.type}),I({title:"",content:"",type:"success"}),w(!1),Ae.success("")},H=z=>{const le=z.target.files?.[0];le&&G({...F,selectedFile:le})},ie=async()=>{!m||!F.selectedFile||!a||(await a(m.id,F.selectedFile,F.description),G({description:"",selectedFile:null}),A(!1),N.current&&(N.current.value=""),Ae.success(""))},R=async z=>{if(!c)return;const le=await c(z.id);if(le){const k=new Blob([le.data],{type:le.type}),O=URL.createObjectURL(k),B=document.createElement("a");B.href=O,B.download=le.name,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(O),Ae.success("")}else Ae.error("")},$=async z=>{!m||!l||(await l(m.id,z),Ae.success(""))},U=()=>{T.newTag.trim()&&!T.tags.includes(T.newTag.trim())&&j({...T,tags:[...T.tags,T.newTag.trim()],newTag:""})};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold",children:""}),h.jsxs(me,{size:"sm",onClick:()=>f(!0),children:[h.jsx(Ji,{className:"h-4 w-4 mr-1"}),""]})]}),s.length===0?h.jsx(Jt,{children:h.jsxs(Qt,{className:"p-8 text-center",children:[h.jsx(P_,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),h.jsx("p",{className:"text-muted-foreground",children:""}),h.jsx(me,{variant:"outline",className:"mt-4",onClick:()=>f(!0),children:""})]})}):h.jsx("div",{className:"space-y-3",children:s.map(z=>h.jsx(Jt,{className:"cursor-pointer hover:shadow-md transition-all duration-200",children:h.jsx(Qt,{className:"p-4",children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1",onClick:()=>g(z),children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("h3",{className:"font-semibold",children:z.name}),h.jsx(gn,{className:TF[z.status],children:CF[z.status]})]}),h.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:z.description}),h.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(nl,{className:"h-3 w-3"}),new Date(z.startDate).toLocaleDateString()]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(Bm,{className:"h-3 w-3"}),z.knowledge.length," "]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(ih,{className:"h-3 w-3"}),z.lessons.length," "]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(zr,{className:"h-3 w-3"}),z.files.length," "]})]}),z.tags.length>0&&h.jsx("div",{className:"flex gap-1 mt-2",children:z.tags.map(le=>h.jsx(gn,{variant:"secondary",className:"text-xs",children:le},le))})]}),h.jsxs(al,{children:[h.jsx(ol,{asChild:!0,children:h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8",children:h.jsx(il,{className:"h-4 w-4"})})}),h.jsxs(ll,{align:"end",children:[h.jsxs(as,{onClick:()=>g(z),children:[h.jsx(Ta,{className:"h-4 w-4 mr-2"}),""]}),h.jsxs(as,{className:"text-destructive",onClick:()=>t(z.id),children:[h.jsx(Zs,{className:"h-4 w-4 mr-2"}),""]})]})]})]})})},z.id))}),h.jsx(vn,{open:!!m,onOpenChange:()=>g(null),children:h.jsx(yn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:m&&h.jsxs(h.Fragment,{children:[h.jsx(bn,{children:h.jsx(xn,{children:m.name})}),h.jsxs(pv,{defaultValue:"knowledge",className:"w-full",children:[h.jsxs(N_,{className:"grid w-full grid-cols-3",children:[h.jsxs(Vo,{value:"knowledge",children:[h.jsx(Bm,{className:"h-4 w-4 mr-1"})," (",m.knowledge.length,")"]}),h.jsxs(Vo,{value:"lessons",children:[h.jsx(ih,{className:"h-4 w-4 mr-1"})," (",m.lessons.length,")"]}),h.jsxs(Vo,{value:"files",children:[h.jsx(zr,{className:"h-4 w-4 mr-1"})," (",m.files.length,")"]})]}),h.jsxs(Js,{value:"knowledge",className:"space-y-4 mt-4",children:[h.jsxs(me,{size:"sm",onClick:()=>b(!0),className:"w-full",children:[h.jsx(Ji,{className:"h-4 w-4 mr-1"}),""]}),m.knowledge.length===0?h.jsx("p",{className:"text-center text-muted-foreground py-8",children:""}):h.jsx("div",{className:"space-y-3",children:m.knowledge.map(z=>h.jsx(Jt,{className:"transition-all duration-200 hover:shadow-sm",children:h.jsx(Qt,{className:"p-4",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(Bm,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-medium text-sm",children:z.title}),h.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:z.content}),h.jsxs(gn,{variant:"outline",className:"mt-2 text-xs",children:[z.category==="technical"&&"",z.category==="process"&&"",z.category==="communication"&&"",z.category==="other"&&""]})]})]})})},z.id))})]}),h.jsxs(Js,{value:"lessons",className:"space-y-4 mt-4",children:[h.jsxs(me,{size:"sm",onClick:()=>w(!0),className:"w-full",children:[h.jsx(Ji,{className:"h-4 w-4 mr-1"}),""]}),m.lessons.length===0?h.jsx("p",{className:"text-center text-muted-foreground py-8",children:""}):h.jsx("div",{className:"space-y-3",children:m.lessons.map(z=>h.jsx(Jt,{className:"transition-all duration-200 hover:shadow-sm",children:h.jsx(Qt,{className:"p-4",children:h.jsxs("div",{className:"flex items-start gap-2",children:[z.type==="success"&&h.jsx(R_,{className:"h-4 w-4 text-green-500 mt-0.5"}),z.type==="failure"&&h.jsx(Vn,{className:"h-4 w-4 text-red-500 mt-0.5"}),z.type==="warning"&&h.jsx(ih,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-medium text-sm",children:z.title}),h.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:z.content}),h.jsxs(gn,{variant:"outline",className:`mt-2 text-xs ${z.type==="success"?"border-green-500 text-green-600":z.type==="failure"?"border-red-500 text-red-600":"border-yellow-500 text-yellow-600"}`,children:[z.type==="success"&&"",z.type==="failure"&&"",z.type==="warning"&&""]})]})]})})},z.id))})]}),h.jsxs(Js,{value:"files",className:"space-y-4 mt-4",children:[h.jsxs(me,{size:"sm",onClick:()=>A(!0),className:"w-full",children:[h.jsx(Bc,{className:"h-4 w-4 mr-1"}),""]}),m.files.length===0?h.jsx("p",{className:"text-center text-muted-foreground py-8",children:""}):h.jsx("div",{className:"space-y-2",children:m.files.map(z=>h.jsx(Jt,{className:"transition-all duration-200 hover:shadow-sm",children:h.jsx(Qt,{className:"p-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(zr,{className:"h-5 w-5 text-primary"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium",children:z.name}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:[y1(z.size),z.description&&`  ${z.description}`]})]})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>R(z),children:h.jsx(Ic,{className:"h-4 w-4"})}),h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>$(z.id),children:h.jsx(Zs,{className:"h-4 w-4"})})]})]})})},z.id))})]})]})]})})}),h.jsx(vn,{open:d,onOpenChange:f,children:h.jsxs(yn,{className:"max-w-md",children:[h.jsx(bn,{children:h.jsx(xn,{children:""})}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:T.name,onChange:z=>j({...T,name:z.target.value}),placeholder:""})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(ei,{value:T.description,onChange:z=>j({...T,description:z.target.value}),placeholder:"",rows:3})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsxs(Qi,{value:T.status,onValueChange:z=>j({...T,status:z}),children:[h.jsx(er,{children:h.jsx(Zi,{})}),h.jsxs(tr,{children:[h.jsx(Kt,{value:"ongoing",children:""}),h.jsx(Kt,{value:"completed",children:""}),h.jsx(Kt,{value:"archived",children:""})]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{type:"date",value:T.startDate,onChange:z=>j({...T,startDate:z.target.value})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(pt,{value:T.newTag,onChange:z=>j({...T,newTag:z.target.value}),placeholder:"",onKeyDown:z=>z.key==="Enter"&&U()}),h.jsx(me,{type:"button",variant:"outline",onClick:U,children:""})]}),T.tags.length>0&&h.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:T.tags.map(z=>h.jsxs(gn,{variant:"secondary",className:"gap-1",children:[z,h.jsx("button",{onClick:()=>j({...T,tags:T.tags.filter(le=>le!==z)}),children:h.jsx(Vn,{className:"h-3 w-3"})})]},z))})]})]}),h.jsxs(Qs,{children:[h.jsx(me,{variant:"outline",onClick:()=>f(!1),children:""}),h.jsx(me,{onClick:K,children:""})]})]})}),h.jsx(vn,{open:v,onOpenChange:b,children:h.jsxs(yn,{children:[h.jsx(bn,{children:h.jsx(xn,{children:""})}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:P.title,onChange:z=>L({...P,title:z.target.value}),placeholder:""})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(ei,{value:P.content,onChange:z=>L({...P,content:z.target.value}),placeholder:"",rows:4})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsxs(Qi,{value:P.category,onValueChange:z=>L({...P,category:z}),children:[h.jsx(er,{children:h.jsx(Zi,{})}),h.jsxs(tr,{children:[h.jsx(Kt,{value:"technical",children:""}),h.jsx(Kt,{value:"process",children:""}),h.jsx(Kt,{value:"communication",children:""}),h.jsx(Kt,{value:"other",children:""})]})]})]})]}),h.jsxs(Qs,{children:[h.jsx(me,{variant:"outline",onClick:()=>b(!1),children:""}),h.jsx(me,{onClick:ae,children:""})]})]})}),h.jsx(vn,{open:_,onOpenChange:w,children:h.jsxs(yn,{children:[h.jsx(bn,{children:h.jsx(xn,{children:""})}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:M.title,onChange:z=>I({...M,title:z.target.value}),placeholder:""})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(ei,{value:M.content,onChange:z=>I({...M,content:z.target.value}),placeholder:"",rows:4})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsxs(Qi,{value:M.type,onValueChange:z=>I({...M,type:z}),children:[h.jsx(er,{children:h.jsx(Zi,{})}),h.jsxs(tr,{children:[h.jsx(Kt,{value:"success",children:""}),h.jsx(Kt,{value:"failure",children:""}),h.jsx(Kt,{value:"warning",children:""})]})]})]})]}),h.jsxs(Qs,{children:[h.jsx(me,{variant:"outline",onClick:()=>w(!1),children:""}),h.jsx(me,{onClick:X,children:""})]})]})}),h.jsx(vn,{open:E,onOpenChange:A,children:h.jsxs(yn,{children:[h.jsx(bn,{children:h.jsx(xn,{children:""})}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{ref:N,type:"file",onChange:H})]}),F.selectedFile&&h.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[h.jsx("p",{className:"text-sm font-medium",children:F.selectedFile.name}),h.jsx("p",{className:"text-xs text-muted-foreground",children:y1(F.selectedFile.size)})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:F.description,onChange:z=>G({...F,description:z.target.value}),placeholder:""})]})]}),h.jsxs(Qs,{children:[h.jsx(me,{variant:"outline",onClick:()=>A(!1),children:""}),h.jsx(me,{onClick:ie,disabled:!F.selectedFile,children:""})]})]})})]})}const kF=["","","","","","",""],ug=["","","","","","",""],jF=["","","","","","","","","","","",""],Ac=[{bg:"bg-blue-100",border:"border-blue-300",text:"text-blue-800"},{bg:"bg-green-100",border:"border-green-300",text:"text-green-800"},{bg:"bg-yellow-100",border:"border-yellow-300",text:"text-yellow-800"},{bg:"bg-red-100",border:"border-red-300",text:"text-red-800"},{bg:"bg-purple-100",border:"border-purple-300",text:"text-purple-800"},{bg:"bg-pink-100",border:"border-pink-300",text:"text-pink-800"},{bg:"bg-indigo-100",border:"border-indigo-300",text:"text-indigo-800"},{bg:"bg-orange-100",border:"border-orange-300",text:"text-orange-800"}],Yd=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"];function b1(s,e){return new Date(s,e+1,0).getDate()}function RF(s,e){return new Date(s,e,1).getDay()}function x1(s,e){return s.getFullYear()===e.getFullYear()&&s.getMonth()===e.getMonth()&&s.getDate()===e.getDate()}function Xd(s){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function DF(){try{const s=localStorage.getItem("schedule-courses");if(s)return JSON.parse(s)}catch{}return[]}function MF(s){try{localStorage.setItem("schedule-courses",JSON.stringify(s))}catch{}}function OF({notes:s,onAddNote:e,onUpdateNote:t,onDeleteNote:n,onToggleComplete:i}){const[a,l]=S.useState(new Date),[c,d]=S.useState(null),[f,m]=S.useState(!1),[g,v]=S.useState(!1),[b,_]=S.useState(null),[w,E]=S.useState("calendar"),[A,N]=S.useState(DF()),[T,j]=S.useState(1),[P,L]=S.useState(!1),[M,I]=S.useState(null),[F,G]=S.useState({name:"",location:"",day:1,startTime:"08:00",endTime:"09:40",color:"0",weekType:"all"}),K=a.getFullYear(),ae=a.getMonth();S.useEffect(()=>{MF(A)},[A]);const X=b1(K,ae),H=RF(K,ae),ie=b1(K,ae-1),R=S.useMemo(()=>{const te={};return s.forEach(Se=>{if(Se.dueDate){const $e=new Date(Se.dueDate),Re=Xd($e);te[Re]||(te[Re]=[]),te[Re].push(Se)}}),te},[s]),$=S.useMemo(()=>{if(!c)return[];const te=Xd(c);return R[te]||[]},[c,R]),U=S.useMemo(()=>s.filter(te=>!te.completed&&te.type==="todo"),[s]),[z,le]=S.useState({title:"",content:"",type:"todo",dueDate:"",dueTime:""}),k=te=>{l(new Date(K,ae+te,1))},O=()=>{const te=new Date;l(te),d(te)},B=()=>{if(!z.title.trim()){Ae.error("");return}e({title:z.title,content:z.content,type:z.type,dueDate:z.dueDate||void 0,dueTime:z.dueTime||void 0,tags:[],priority:"medium"}),le({title:"",content:"",type:"todo",dueDate:"",dueTime:""}),m(!1),Ae.success("")},q=()=>{!b||!z.title.trim()||(t(b.id,{title:z.title,content:z.content,type:z.type,dueDate:z.dueDate||void 0,dueTime:z.dueTime||void 0}),v(!1),_(null),Ae.success(""))},J=te=>{_(te),le({title:te.title,content:te.content,type:te.type==="todo"||te.type==="note"?te.type:"todo",dueDate:te.dueDate||"",dueTime:te.dueTime||""}),v(!0)},ue=te=>{n(te),Ae.success("")},ee=()=>{if(!F.name.trim()){Ae.error("");return}const te={id:Date.now().toString(),name:F.name,location:F.location,day:F.day,startTime:F.startTime,endTime:F.endTime,color:F.color,weekType:F.weekType};N([...A,te]),G({name:"",location:"",day:1,startTime:"08:00",endTime:"09:40",color:"0",weekType:"all"}),L(!1),Ae.success("")},Y=()=>{!M||!F.name.trim()||(N(A.map(te=>te.id===M.id?{...te,...F}:te)),L(!1),I(null),Ae.success(""))},oe=te=>{N(A.filter(Se=>Se.id!==te)),Ae.success("")},ge=te=>{I(te),G({name:te.name,location:te.location,day:te.day,startTime:te.startTime,endTime:te.endTime,color:te.color,weekType:te.weekType}),L(!0)},xe=()=>{I(null),G({name:"",location:"",day:1,startTime:"08:00",endTime:"09:40",color:"0",weekType:"all"}),L(!0)},be=te=>A.filter(Se=>Se.day===te).filter(Se=>Se.weekType==="all"?!0:Se.weekType==="odd"?T%2===1:Se.weekType==="even"?T%2===0:!0).sort((Se,$e)=>Se.startTime.localeCompare($e.startTime)),Ge=te=>{const Se=Yd.findIndex(Nt=>Nt>=te.startTime),$e=Yd.findIndex(Nt=>Nt>=te.endTime),Re=Se>=0?Se*32:0,ht=Math.max(32,($e-Se)*32),un=Ac[parseInt(te.color)%Ac.length];return{top:`${Re}px`,height:`${ht}px`,colorSet:un}},Ie=()=>{const te=[],Se=new Date;for(let Re=H-1;Re>=0;Re--){const ht=ie-Re;te.push(h.jsx("div",{className:"p-2 text-center text-muted-foreground opacity-50",children:ht},`prev-${ht}`))}for(let Re=1;Re<=X;Re++){const ht=new Date(K,ae,Re),un=Xd(ht),Nt=R[un]||[],wt=Nt.length>0,Ut=x1(ht,Se),kt=c&&x1(ht,c);te.push(h.jsxs("button",{onClick:()=>d(ht),className:`p-2 text-center rounded-lg transition-all relative ${kt?"bg-primary text-primary-foreground":Ut?"bg-primary/20 text-primary font-semibold":"hover:bg-muted"}`,children:[h.jsx("span",{children:Re}),wt&&h.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 flex gap-0.5",children:Nt.slice(0,3).map((Fs,Fn)=>h.jsx("div",{className:`w-1 h-1 rounded-full ${Fs.completed?"bg-green-500":"bg-orange-500"}`},Fn))})]},`current-${Re}`))}const $e=42-te.length;for(let Re=1;Re<=$e;Re++)te.push(h.jsx("div",{className:"p-2 text-center text-muted-foreground opacity-50",children:Re},`next-${Re}`));return te};return h.jsxs("div",{className:"space-y-4 pb-20",children:[h.jsxs(pv,{value:w,onValueChange:E,className:"w-full",children:[h.jsxs(N_,{className:"grid w-full grid-cols-3",children:[h.jsxs(Vo,{value:"calendar",className:"flex items-center gap-1.5",children:[h.jsx(nl,{className:"h-4 w-4"}),""]}),h.jsxs(Vo,{value:"schedule",className:"flex items-center gap-1.5",children:[h.jsx(yl,{className:"h-4 w-4"}),""]}),h.jsxs(Vo,{value:"todos",className:"flex items-center gap-1.5",children:[h.jsx(iD,{className:"h-4 w-4"}),""]})]}),h.jsxs(Js,{value:"calendar",className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(me,{variant:"outline",size:"icon",onClick:()=>k(-1),children:h.jsx(sl,{className:"h-4 w-4"})}),h.jsxs("span",{className:"text-lg font-semibold min-w-[120px] text-center",children:[K," ",jF[ae]]}),h.jsx(me,{variant:"outline",size:"icon",onClick:()=>k(1),children:h.jsx(Ta,{className:"h-4 w-4"})})]}),h.jsx(me,{variant:"outline",size:"sm",onClick:O,children:""})]}),h.jsx("div",{className:"grid grid-cols-7 gap-1",children:kF.map(te=>h.jsxs("div",{className:"text-center text-sm font-medium text-muted-foreground py-2",children:["",te]},te))}),h.jsx("div",{className:"grid grid-cols-7 gap-1",children:Ie()}),c&&h.jsx(Jt,{children:h.jsxs(Qt,{className:"p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("h3",{className:"font-semibold",children:[c.getMonth()+1,"",c.getDate(),""]}),h.jsxs(me,{size:"sm",onClick:()=>{le({...z,dueDate:Xd(c)}),m(!0)},children:[h.jsx(Ji,{className:"h-4 w-4 mr-1"}),""]})]}),h.jsx("div",{className:"space-y-2",children:$.length===0?h.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""}):$.map(te=>h.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-muted group",children:[h.jsx(Yg,{checked:te.completed,onCheckedChange:()=>i(te.id),className:"mt-0.5"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:`text-sm font-medium ${te.completed?"line-through text-muted-foreground":""}`,children:te.title}),te.dueTime&&h.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[h.jsx(Pw,{className:"h-3 w-3"}),te.dueTime]})]}),h.jsxs(al,{children:[h.jsx(ol,{asChild:!0,children:h.jsx(me,{variant:"ghost",size:"icon",className:"h-7 w-7 opacity-0 group-hover:opacity-100",children:h.jsx(il,{className:"h-4 w-4"})})}),h.jsxs(ll,{align:"end",children:[h.jsxs(as,{onClick:()=>J(te),children:[h.jsx(Dc,{className:"h-4 w-4 mr-2"}),""]}),h.jsxs(as,{onClick:()=>ue(te.id),className:"text-red-600",children:[h.jsx(Zs,{className:"h-4 w-4 mr-2"}),""]})]})]})]},te.id))})]})})]}),h.jsxs(Js,{value:"schedule",className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("h2",{className:"text-lg font-semibold",children:""}),h.jsxs("div",{className:"flex items-center gap-1 bg-muted rounded-lg p-1",children:[h.jsx("button",{onClick:()=>j(Math.max(1,T-1)),className:"p-1.5 rounded hover:bg-background transition-colors",children:h.jsx(sl,{className:"h-4 w-4"})}),h.jsxs("div",{className:"px-3 py-1 text-sm font-medium min-w-[80px] text-center",children:[" ",T," "]}),h.jsx("button",{onClick:()=>j(T+1),className:"p-1.5 rounded hover:bg-background transition-colors",children:h.jsx(Ta,{className:"h-4 w-4"})})]}),h.jsx("span",{className:"text-xs text-muted-foreground",children:T%2===1?"":""})]}),h.jsxs(me,{size:"sm",onClick:xe,children:[h.jsx(Ji,{className:"h-4 w-4 mr-1"}),""]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("div",{className:"min-w-[800px]",children:[h.jsxs("div",{className:"grid grid-cols-8 gap-1 mb-1",children:[h.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground py-2",children:""}),ug.map(te=>h.jsx("div",{className:"text-center text-sm font-medium py-2 bg-muted rounded",children:te},te))]}),h.jsxs("div",{className:"grid grid-cols-8 gap-1 relative",children:[h.jsx("div",{className:"space-y-0",children:Yd.map((te,Se)=>h.jsx("div",{className:"h-8 text-xs text-muted-foreground text-right pr-2 flex items-center justify-end",children:Se%2===0?te:""},te))}),[1,2,3,4,5,6,0].map(te=>h.jsxs("div",{className:"relative bg-muted/30 rounded min-h-[832px]",children:[Yd.map((Se,$e)=>h.jsx("div",{className:"h-8 border-b border-dashed border-border/50"},$e)),be(te).map(Se=>{const $e=Ge(Se),Re=$e.colorSet;return h.jsxs("div",{onClick:()=>ge(Se),className:`absolute left-1 right-1 rounded px-2 py-1 cursor-pointer hover:brightness-95 transition-all border ${Re.bg} ${Re.border}`,style:{top:$e.top,height:$e.height},children:[h.jsx("p",{className:`text-xs font-medium truncate ${Re.text}`,children:Se.name}),h.jsx("p",{className:`text-[10px] truncate ${Re.text} opacity-80`,children:Se.location})]},Se.id)})]},te))]})]})}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:""}),A.length===0?h.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""}):h.jsx("div",{className:"space-y-2",children:A.map(te=>{const Se=Ac[parseInt(te.color)%Ac.length],$e={all:"",odd:"",even:""}[te.weekType||"all"];return h.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-3 h-3 rounded-full ${Se.bg.replace("bg-","bg-").replace("100","400")}`}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("p",{className:"font-medium",children:te.name}),h.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:$e})]}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:[ug[te.day===0?6:te.day-1]," ",te.startTime,"-",te.endTime,"  ",te.location]})]})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>ge(te),children:h.jsx(Dc,{className:"h-4 w-4"})}),h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500",onClick:()=>oe(te.id),children:h.jsx(Zs,{className:"h-4 w-4"})})]})]},te.id)})})]})]}),h.jsxs(Js,{value:"todos",className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("h2",{className:"text-lg font-semibold",children:["",U.length>0&&h.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",U.length,")"]})]}),h.jsxs(me,{size:"sm",onClick:()=>m(!0),children:[h.jsx(Ji,{className:"h-4 w-4 mr-1"}),""]})]}),h.jsx("div",{className:"space-y-2",children:U.length===0?h.jsxs("div",{className:"text-center py-8",children:[h.jsx(D_,{className:"h-12 w-12 mx-auto text-green-500 mb-3"}),h.jsx("p",{className:"text-muted-foreground",children:""})]}):U.map(te=>h.jsx(Jt,{className:"group",children:h.jsx(Qt,{className:"p-3",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Yg,{checked:te.completed,onCheckedChange:()=>i(te.id),className:"mt-1"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"font-medium",children:te.title}),te.content&&h.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:te.content}),(te.dueDate||te.dueTime)&&h.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[te.dueDate&&h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(nl,{className:"h-3 w-3"}),te.dueDate]}),te.dueTime&&h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(Pw,{className:"h-3 w-3"}),te.dueTime]})]})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>J(te),children:h.jsx(Dc,{className:"h-4 w-4"})}),h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500",onClick:()=>ue(te.id),children:h.jsx(Zs,{className:"h-4 w-4"})})]})]})})},te.id))})]})]}),h.jsx(vn,{open:f||g,onOpenChange:te=>{te||(m(!1),v(!1),_(null))},children:h.jsxs(yn,{className:"sm:max-w-md",children:[h.jsx(bn,{children:h.jsx(xn,{children:b?"":""})}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:z.title,onChange:te=>le({...z,title:te.target.value}),placeholder:"..."})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(ei,{value:z.content,onChange:te=>le({...z,content:te.target.value}),placeholder:"...",rows:3})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{type:"date",value:z.dueDate,onChange:te=>le({...z,dueDate:te.target.value})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{type:"time",value:z.dueTime,onChange:te=>le({...z,dueTime:te.target.value})})]})]})]}),h.jsxs(Qs,{children:[h.jsx(me,{variant:"outline",onClick:()=>{m(!1),v(!1),_(null)},children:""}),h.jsx(me,{onClick:b?q:B,children:b?"":""})]})]})}),h.jsx(vn,{open:P,onOpenChange:L,children:h.jsxs(yn,{className:"sm:max-w-md",children:[h.jsx(bn,{children:h.jsx(xn,{children:M?"":""})}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:F.name,onChange:te=>G({...F,name:te.target.value}),placeholder:""})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:F.location,onChange:te=>G({...F,location:te.target.value}),placeholder:" A301"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx("div",{className:"grid grid-cols-7 gap-1",children:ug.map((te,Se)=>h.jsx("button",{onClick:()=>G({...F,day:Se===6?0:Se+1}),className:`p-2 text-xs rounded transition-colors ${(F.day===0?6:F.day-1)===Se?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:te.replace("","")},te))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{type:"time",value:F.startTime,onChange:te=>G({...F,startTime:te.target.value})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{type:"time",value:F.endTime,onChange:te=>G({...F,endTime:te.target.value})})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx("div",{className:"flex gap-2 flex-wrap",children:Ac.map((te,Se)=>h.jsx("button",{onClick:()=>G({...F,color:Se.toString()}),className:`w-8 h-8 rounded-full ${te.bg} border-2 ${te.border} transition-all ${F.color===Se.toString()?"ring-2 ring-primary ring-offset-2 scale-110":""}`},Se))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx("div",{className:"flex gap-2",children:[{value:"all",label:""},{value:"odd",label:""},{value:"even",label:""}].map(te=>h.jsx("button",{onClick:()=>G({...F,weekType:te.value}),className:`flex-1 p-2 text-sm rounded transition-colors ${F.weekType===te.value?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:te.label},te.value))})]})]}),h.jsxs(Qs,{children:[M&&h.jsx(me,{variant:"destructive",onClick:()=>{oe(M.id),L(!1),I(null)},children:""}),h.jsx("div",{className:"flex-1"}),h.jsx(me,{variant:"outline",onClick:()=>{L(!1),I(null)},children:""}),h.jsx(me,{onClick:M?Y:ee,children:M?"":""})]})]})})]})}var DT=["PageUp","PageDown"],MT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],OT={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},El="Slider",[Kg,PF,LF]=Mh(El),[PT]=Bs(El,[LF]),[IF,pf]=PT(El),LT=S.forwardRef((s,e)=>{const{name:t,min:n=0,max:i=100,step:a=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:f=[n],value:m,onValueChange:g=()=>{},onValueCommit:v=()=>{},inverted:b=!1,form:_,...w}=s,E=S.useRef(new Set),A=S.useRef(0),T=l==="horizontal"?BF:zF,[j=[],P]=$r({prop:m,defaultProp:f,onChange:K=>{[...E.current][A.current]?.focus(),g(K)}}),L=S.useRef(j);function M(K){const ae=VF(j,K);G(K,ae)}function I(K){G(K,A.current)}function F(){const K=L.current[A.current];j[A.current]!==K&&v(j)}function G(K,ae,{commit:X}={commit:!1}){const H=YF(a),ie=XF(Math.round((K-n)/a)*a+n,H),R=zc(ie,[n,i]);P(($=[])=>{const U=$F($,R,ae);if(WF(U,d*a)){A.current=U.indexOf(R);const z=String(U)!==String($);return z&&X&&v(U),z?U:$}else return $})}return h.jsx(IF,{scope:s.__scopeSlider,name:t,disabled:c,min:n,max:i,valueIndexToChangeRef:A,thumbs:E.current,values:j,orientation:l,form:_,children:h.jsx(Kg.Provider,{scope:s.__scopeSlider,children:h.jsx(Kg.Slot,{scope:s.__scopeSlider,children:h.jsx(T,{"aria-disabled":c,"data-disabled":c?"":void 0,...w,ref:e,onPointerDown:we(w.onPointerDown,()=>{c||(L.current=j)}),min:n,max:i,inverted:b,onSlideStart:c?void 0:M,onSlideMove:c?void 0:I,onSlideEnd:c?void 0:F,onHomeKeyDown:()=>!c&&G(n,0,{commit:!0}),onEndKeyDown:()=>!c&&G(i,j.length-1,{commit:!0}),onStepKeyDown:({event:K,direction:ae})=>{if(!c){const ie=DT.includes(K.key)||K.shiftKey&&MT.includes(K.key)?10:1,R=A.current,$=j[R],U=a*ie*ae;G($+U,R,{commit:!0})}}})})})})});LT.displayName=El;var[IT,BT]=PT(El,{startEdge:"left",endEdge:"right",size:"width",direction:1}),BF=S.forwardRef((s,e)=>{const{min:t,max:n,dir:i,inverted:a,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:f,...m}=s,[g,v]=S.useState(null),b=Je(e,T=>v(T)),_=S.useRef(void 0),w=pl(i),E=w==="ltr",A=E&&!a||!E&&a;function N(T){const j=_.current||g.getBoundingClientRect(),P=[0,j.width],M=wy(P,A?[t,n]:[n,t]);return _.current=j,M(T-j.left)}return h.jsx(IT,{scope:s.__scopeSlider,startEdge:A?"left":"right",endEdge:A?"right":"left",direction:A?1:-1,size:"width",children:h.jsx(zT,{dir:w,"data-orientation":"horizontal",...m,ref:b,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:T=>{const j=N(T.clientX);l?.(j)},onSlideMove:T=>{const j=N(T.clientX);c?.(j)},onSlideEnd:()=>{_.current=void 0,d?.()},onStepKeyDown:T=>{const P=OT[A?"from-left":"from-right"].includes(T.key);f?.({event:T,direction:P?-1:1})}})})}),zF=S.forwardRef((s,e)=>{const{min:t,max:n,inverted:i,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...f}=s,m=S.useRef(null),g=Je(e,m),v=S.useRef(void 0),b=!i;function _(w){const E=v.current||m.current.getBoundingClientRect(),A=[0,E.height],T=wy(A,b?[n,t]:[t,n]);return v.current=E,T(w-E.top)}return h.jsx(IT,{scope:s.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:h.jsx(zT,{"data-orientation":"vertical",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const E=_(w.clientY);a?.(E)},onSlideMove:w=>{const E=_(w.clientY);l?.(E)},onSlideEnd:()=>{v.current=void 0,c?.()},onStepKeyDown:w=>{const A=OT[b?"from-bottom":"from-top"].includes(w.key);d?.({event:w,direction:A?-1:1})}})})}),zT=S.forwardRef((s,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:d,...f}=s,m=pf(El,t);return h.jsx(Ue.span,{...f,ref:e,onKeyDown:we(s.onKeyDown,g=>{g.key==="Home"?(l(g),g.preventDefault()):g.key==="End"?(c(g),g.preventDefault()):DT.concat(MT).includes(g.key)&&(d(g),g.preventDefault())}),onPointerDown:we(s.onPointerDown,g=>{const v=g.target;v.setPointerCapture(g.pointerId),g.preventDefault(),m.thumbs.has(v)?v.focus():n(g)}),onPointerMove:we(s.onPointerMove,g=>{g.target.hasPointerCapture(g.pointerId)&&i(g)}),onPointerUp:we(s.onPointerUp,g=>{const v=g.target;v.hasPointerCapture(g.pointerId)&&(v.releasePointerCapture(g.pointerId),a(g))})})}),FT="SliderTrack",UT=S.forwardRef((s,e)=>{const{__scopeSlider:t,...n}=s,i=pf(FT,t);return h.jsx(Ue.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:e})});UT.displayName=FT;var Jg="SliderRange",$T=S.forwardRef((s,e)=>{const{__scopeSlider:t,...n}=s,i=pf(Jg,t),a=BT(Jg,t),l=S.useRef(null),c=Je(e,l),d=i.values.length,f=i.values.map(v=>GT(v,i.min,i.max)),m=d>1?Math.min(...f):0,g=100-Math.max(...f);return h.jsx(Ue.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:c,style:{...s.style,[a.startEdge]:m+"%",[a.endEdge]:g+"%"}})});$T.displayName=Jg;var Qg="SliderThumb",HT=S.forwardRef((s,e)=>{const t=PF(s.__scopeSlider),[n,i]=S.useState(null),a=Je(e,c=>i(c)),l=S.useMemo(()=>n?t().findIndex(c=>c.ref.current===n):-1,[t,n]);return h.jsx(FF,{...s,ref:a,index:l})}),FF=S.forwardRef((s,e)=>{const{__scopeSlider:t,index:n,name:i,...a}=s,l=pf(Qg,t),c=BT(Qg,t),[d,f]=S.useState(null),m=Je(e,N=>f(N)),g=d?l.form||!!d.closest("form"):!0,v=Pv(d),b=l.values[n],_=b===void 0?0:GT(b,l.min,l.max),w=HF(n,l.values.length),E=v?.[c.size],A=E?GF(E,_,c.direction):0;return S.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${_}% + ${A}px)`},children:[h.jsx(Kg.ItemSlot,{scope:s.__scopeSlider,children:h.jsx(Ue.span,{role:"slider","aria-label":s["aria-label"]||w,"aria-valuemin":l.min,"aria-valuenow":b,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...a,ref:m,style:b===void 0?{display:"none"}:s.style,onFocus:we(s.onFocus,()=>{l.valueIndexToChangeRef.current=n})})}),g&&h.jsx(VT,{name:i??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:b},n)]})});HT.displayName=Qg;var UF="RadioBubbleInput",VT=S.forwardRef(({__scopeSlider:s,value:e,...t},n)=>{const i=S.useRef(null),a=Je(i,n),l=Bv(e);return S.useEffect(()=>{const c=i.current;if(!c)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&m){const g=new Event("input",{bubbles:!0});m.call(c,e),c.dispatchEvent(g)}},[l,e]),h.jsx(Ue.input,{style:{display:"none"},...t,ref:a,defaultValue:e})});VT.displayName=UF;function $F(s=[],e,t){const n=[...s];return n[t]=e,n.sort((i,a)=>i-a)}function GT(s,e,t){const a=100/(t-e)*(s-e);return zc(a,[0,100])}function HF(s,e){return e>2?`Value ${s+1} of ${e}`:e===2?["Minimum","Maximum"][s]:void 0}function VF(s,e){if(s.length===1)return 0;const t=s.map(i=>Math.abs(i-e)),n=Math.min(...t);return t.indexOf(n)}function GF(s,e,t){const n=s/2,a=wy([0,50],[0,n]);return(n-a(e)*t)*t}function qF(s){return s.slice(0,-1).map((e,t)=>s[t+1]-e)}function WF(s,e){if(e>0){const t=qF(s);return Math.min(...t)>=e}return!0}function wy(s,e){return t=>{if(s[0]===s[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(s[1]-s[0]);return e[0]+n*(t-s[0])}}function YF(s){return(String(s).split(".")[1]||"").length}function XF(s,e){const t=Math.pow(10,e);return Math.round(s*t)/t}var KF=LT,JF=UT,QF=$T,ZF=HT;function qT({className:s,defaultValue:e,value:t,min:n=0,max:i=100,...a}){const l=S.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[n,i],[t,e,n,i]);return h.jsxs(KF,{"data-slot":"slider",defaultValue:e,value:t,min:n,max:i,className:Oe("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...a,children:[h.jsx(JF,{"data-slot":"slider-track",className:Oe("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:h.jsx(QF,{"data-slot":"slider-range",className:Oe("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(c,d)=>h.jsx(ZF,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},d))]})}const dg=[{value:"javascript",label:"JavaScript",icon:"JS",color:"#f7df1e"},{value:"typescript",label:"TypeScript",icon:"TS",color:"#3178c6"},{value:"python",label:"Python",icon:"PY",color:"#3776ab"},{value:"java",label:"Java",icon:"JV",color:"#b07219"},{value:"cpp",label:"C++",icon:"C++",color:"#f34b7d"},{value:"c",label:"C",icon:"C",color:"#555555"},{value:"html",label:"HTML",icon:"HT",color:"#e34c26"},{value:"css",label:"CSS",icon:"CS",color:"#563d7c"},{value:"sql",label:"SQL",icon:"SQ",color:"#336791"},{value:"rust",label:"Rust",icon:"RS",color:"#dea584"},{value:"go",label:"Go",icon:"GO",color:"#00add8"},{value:"other",label:"",icon:"..",color:"#888888"}],w1=[{name:"Darcula",bg:"#2b2b2b",sidebar:"#3c3f41",text:"#a9b7c6",keyword:"#cc7832",string:"#6a8759",comment:"#808080",number:"#6897bb",function:"#ffc66d",lineNumber:"#606366",selection:"#214283"},{name:"Light",bg:"#ffffff",sidebar:"#f5f5f5",text:"#000000",keyword:"#000080",string:"#008000",comment:"#808080",number:"#0000ff",function:"#795e26",lineNumber:"#237893",selection:"#add6ff"},{name:"Monokai",bg:"#272822",sidebar:"#3e3d32",text:"#f8f8f2",keyword:"#f92672",string:"#e6db74",comment:"#75715e",number:"#ae81ff",function:"#a6e22e",lineNumber:"#90908a",selection:"#49483e"},{name:"Oceanic",bg:"#1e2b35",sidebar:"#263740",text:"#d8dee9",keyword:"#c695c6",string:"#99c794",comment:"#65737e",number:"#f99157",function:"#6699cc",lineNumber:"#5f7885",selection:"#344a55"}];function eU(){try{const s=localStorage.getItem("coding-projects-v2");if(s)return JSON.parse(s)}catch{}return[]}function tU(s){try{localStorage.setItem("coding-projects-v2",JSON.stringify(s))}catch{}}function nU(){try{const s=localStorage.getItem("coding-editor-settings");if(s)return JSON.parse(s)}catch{}return{theme:0,fontSize:14}}function sU(s){try{localStorage.setItem("coding-editor-settings",JSON.stringify(s))}catch{}}function iU(){const[s,e]=S.useState(eU()),[t,n]=S.useState(""),[i,a]=S.useState(null),[l,c]=S.useState(!1),[d,f]=S.useState(!1),[m,g]=S.useState(!1),[v,b]=S.useState(!1),[_,w]=S.useState(nU()),[E,A]=S.useState(!1),[N,T]=S.useState({name:"",description:"",language:"javascript",code:""}),j=w1[_.theme],P=S.useRef(null),L=S.useRef(null);S.useEffect(()=>{tU(s)},[s]),S.useEffect(()=>{sU(_)},[_]);const M=S.useMemo(()=>{if(!t.trim())return s;const k=t.toLowerCase();return s.filter(O=>O.name.toLowerCase().includes(k)||O.description.toLowerCase().includes(k)||O.language.toLowerCase().includes(k))},[s,t]),I=S.useMemo(()=>{const k={};return M.forEach(O=>{k[O.language]||(k[O.language]=[]),k[O.language].push(O)}),k},[M]),F=()=>{if(!N.name.trim()){Ae.error("");return}const k={id:Date.now().toString(),name:N.name,description:N.description,language:N.language,code:N.code,createdAt:Date.now(),updatedAt:Date.now()};e([k,...s]),T({name:"",description:"",language:"javascript",code:""}),c(!1),Ae.success("")},G=()=>{if(!i||!N.name.trim())return;const k=s.map(B=>B.id===i.id?{...B,...N,updatedAt:Date.now()}:B);e(k);const O={...i,...N,updatedAt:Date.now()};a(O),f(!1),A(!1),Ae.success("")},K=k=>{e(s.filter(O=>O.id!==k)),i?.id===k&&(a(null),g(!1)),Ae.success("")},ae=k=>{i&&(a({...i,code:k}),A(!0))},X=()=>{i&&(e(s.map(k=>k.id===i.id?{...k,code:i.code,updatedAt:Date.now()}:k)),A(!1),Ae.success(""))},H=()=>{i&&(T({name:i.name,description:i.description,language:i.language,code:i.code}),f(!0))},ie=()=>{T({name:"",description:"",language:"javascript",code:""}),c(!0)},R=k=>{const O=new Blob([k.code],{type:"text/plain"}),B=URL.createObjectURL(O),q=document.createElement("a");q.href=B,q.download=`${k.name}.${U(k.language)}`,q.click(),URL.revokeObjectURL(B),Ae.success("")},$=k=>{const O=k.target.files?.[0];if(!O)return;const B=new FileReader;B.onload=q=>{const J=q.target?.result,ue=z(O.name);T({name:O.name.replace(/\.[^/.]+$/,""),description:` ${O.name} `,language:ue,code:J}),c(!0)},B.readAsText(O),k.target.value=""},U=k=>({javascript:"js",typescript:"ts",python:"py",java:"java",cpp:"cpp",c:"c",html:"html",css:"css",sql:"sql",rust:"rs",go:"go"})[k]||"txt",z=k=>{const O=k.split(".").pop()?.toLowerCase()||"";return{js:"javascript",ts:"typescript",py:"python",java:"java",cpp:"cpp",c:"c",h:"c",html:"html",htm:"html",css:"css",sql:"sql",rs:"rust",go:"go"}[O]||"other"},le=k=>dg.find(O=>O.value===k)||dg[11];return m&&i?h.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col animate-in fade-in duration-200",style:{backgroundColor:j.bg},children:[h.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b select-none",style:{backgroundColor:j.sidebar,borderColor:`${j.text}15`},children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("button",{onClick:()=>{E&&X(),g(!1)},className:"flex items-center gap-1.5 px-2 py-1.5 rounded text-sm transition-all hover:brightness-110",style:{backgroundColor:`${j.text}15`,color:j.text},children:[h.jsx(sl,{className:"h-4 w-4"}),""]}),h.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded",style:{backgroundColor:`${j.text}08`},children:[h.jsx(zw,{className:"h-4 w-4",style:{color:le(i.language).color}}),h.jsx("span",{style:{color:j.text,fontSize:"13px"},children:i.name}),E&&h.jsx("span",{className:"text-amber-400 text-xs",children:""})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{onClick:X,className:"flex items-center gap-1.5 px-3 py-1.5 rounded text-sm transition-all hover:brightness-110",style:{backgroundColor:E?"#365880":`${j.text}15`,color:E?"#fff":j.text},children:[h.jsx(Hw,{className:"h-4 w-4"}),""]}),h.jsx("button",{onClick:()=>b(!0),className:"p-2 rounded transition-all hover:brightness-110",style:{backgroundColor:`${j.text}15`,color:j.text},children:h.jsx(gv,{className:"h-4 w-4"})}),h.jsx("button",{onClick:()=>{E&&X(),g(!1)},className:"p-2 rounded transition-all hover:brightness-110",style:{backgroundColor:`${j.text}15`,color:j.text},children:h.jsx(Vn,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h.jsx("div",{className:"w-12 flex-shrink-0 py-4 text-right pr-2 select-none overflow-hidden",style:{backgroundColor:j.bg,color:j.lineNumber,fontSize:`${_.fontSize}px`,lineHeight:"1.6",fontFamily:'"JetBrains Mono", "Fira Code", monospace'},children:i.code.split(`
`).map((k,O)=>h.jsx("div",{className:"h-[1.6em]",children:O+1},O))}),h.jsx("div",{className:"flex-1 relative overflow-auto",ref:L,children:h.jsx("textarea",{ref:P,value:i.code,onChange:k=>ae(k.target.value),className:"w-full min-h-full p-4 resize-none outline-none border-0",style:{backgroundColor:j.bg,color:j.text,fontSize:`${_.fontSize}px`,lineHeight:"1.6",fontFamily:'"JetBrains Mono", "Fira Code", monospace',tabSize:2},spellCheck:!1,placeholder:"// ..."})})]}),h.jsxs("div",{className:"flex items-center justify-between px-3 py-1 text-xs select-none",style:{backgroundColor:j.sidebar,color:j.text},children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("span",{children:le(i.language).label}),h.jsx("span",{children:"UTF-8"}),h.jsxs("span",{children:[i.code.length," "]}),h.jsxs("span",{children:[i.code.split(`
`).length," "]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("span",{children:[": ",_.fontSize,"px"]}),h.jsxs("span",{children:[": ",j.name]})]})]}),v&&h.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 animate-in fade-in duration-150",onClick:()=>b(!1),children:h.jsxs("div",{className:"w-full max-w-sm rounded-lg overflow-hidden shadow-2xl animate-in zoom-in-95 duration-200",style:{backgroundColor:j.sidebar},onClick:k=>k.stopPropagation(),children:[h.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",style:{borderColor:`${j.text}15`},children:[h.jsx("h3",{className:"font-semibold",style:{color:j.text},children:""}),h.jsx("button",{onClick:()=>b(!1),className:"p-1.5 rounded hover:brightness-110 transition-all",style:{color:j.text},children:h.jsx(Vn,{className:"h-4 w-4"})})]}),h.jsxs("div",{className:"p-4 space-y-5",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{style:{color:j.text},children:""}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:w1.map((k,O)=>h.jsx("button",{onClick:()=>w({..._,theme:O}),className:`p-3 rounded-lg text-sm font-medium transition-all ${_.theme===O?"ring-2 ring-primary scale-[1.02]":"hover:scale-[1.02]"}`,style:{backgroundColor:k.bg,color:k.text,border:`1px solid ${_.theme===O?"var(--primary)":"transparent"}`},children:k.name},O))})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(Be,{style:{color:j.text},children:""}),h.jsxs("span",{className:"text-sm font-mono px-2 py-0.5 rounded",style:{backgroundColor:`${j.text}15`,color:j.text},children:[_.fontSize,"px"]})]}),h.jsx(qT,{value:[_.fontSize],onValueChange:k=>w({..._,fontSize:k[0]}),min:10,max:24,step:1})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{style:{color:j.text},children:""}),h.jsxs("div",{className:"p-3 rounded-lg font-mono text-sm",style:{backgroundColor:j.bg,color:j.text,fontSize:`${_.fontSize}px`},children:[h.jsx("span",{style:{color:j.keyword},children:"function"}),h.jsx("span",{children:" hello"}),h.jsx("span",{style:{color:j.function},children:"()"}),h.jsxs("span",{children:[" ","{"]}),h.jsx("br",{}),h.jsx("span",{children:"  "}),h.jsx("span",{style:{color:j.keyword},children:"return"}),h.jsx("span",{style:{color:j.string},children:' "Hello World"'}),h.jsx("span",{children:";"}),h.jsx("br",{}),h.jsx("span",{children:"}"})]})]})]})]})})]}):i?h.jsxs("div",{className:"h-full flex flex-col animate-in fade-in duration-200",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-muted/30",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs(me,{variant:"ghost",size:"sm",onClick:()=>{E&&X(),a(null)},children:[h.jsx(sl,{className:"h-4 w-4 mr-1"}),""]}),h.jsx("div",{className:"h-6 w-px bg-border"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(zw,{className:"h-5 w-5",style:{color:le(i.language).color}}),h.jsx("span",{className:"font-medium",children:i.name}),E&&h.jsx("span",{className:"text-amber-500 text-xs",children:" "})]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(me,{variant:"ghost",size:"icon",onClick:X,title:"",children:h.jsx(Hw,{className:"h-4 w-4"})}),h.jsx(me,{variant:"ghost",size:"icon",onClick:()=>g(!0),title:"",children:h.jsx(Sg,{className:"h-4 w-4"})}),h.jsx(me,{variant:"ghost",size:"icon",onClick:H,title:"",children:h.jsx($w,{className:"h-4 w-4"})}),h.jsx(me,{variant:"ghost",size:"icon",onClick:()=>R(i),title:"",children:h.jsx(Ic,{className:"h-4 w-4"})}),h.jsx(me,{variant:"ghost",size:"icon",onClick:()=>K(i.id),title:"",className:"text-red-500 hover:text-red-600",children:h.jsx(Zs,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h.jsx("div",{className:"w-10 flex-shrink-0 py-4 text-right pr-2 select-none bg-muted/20 text-muted-foreground text-sm font-mono",children:i.code.split(`
`).map((k,O)=>h.jsx("div",{className:"h-6",children:O+1},O))}),h.jsx("textarea",{value:i.code,onChange:k=>ae(k.target.value),className:"flex-1 w-full p-4 resize-none outline-none font-mono text-sm",style:{lineHeight:"1.5",backgroundColor:"#1e1e1e",color:"#d4d4d4"},placeholder:"// ...",spellCheck:!1})]})]}):h.jsxs("div",{className:"space-y-4 pb-20 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold",children:""}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.length," "]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(Be,{htmlFor:"import-file",className:"cursor-pointer",children:[h.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 rounded-md bg-muted hover:bg-muted/80 transition-all text-sm",children:[h.jsx(Bc,{className:"h-4 w-4"}),""]}),h.jsx(pt,{id:"import-file",type:"file",accept:".js,.ts,.py,.java,.cpp,.c,.html,.css,.sql,.rs,.go,.txt",className:"hidden",onChange:$})]}),h.jsxs(me,{size:"sm",onClick:ie,children:[h.jsx(Ji,{className:"h-4 w-4 mr-1"}),""]})]})]}),h.jsxs("div",{className:"relative",children:[h.jsx(I_,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(pt,{placeholder:"...",value:t,onChange:k=>n(k.target.value),className:"pl-9"})]}),s.length===0?h.jsxs("div",{className:"text-center py-16 animate-in fade-in duration-500",children:[h.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl bg-primary/10 flex items-center justify-center",children:h.jsx(M_,{className:"h-10 w-10 text-primary"})}),h.jsx("p",{className:"text-muted-foreground mb-1",children:""}),h.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}):M.length===0?h.jsx("div",{className:"text-center py-8",children:h.jsx("p",{className:"text-muted-foreground",children:""})}):h.jsx("div",{className:"space-y-6",children:Object.entries(I).map(([k,O])=>{const B=le(k);return h.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-300",children:[h.jsxs("h3",{className:"text-sm font-medium text-muted-foreground mb-3 flex items-center gap-2",children:[h.jsx("span",{className:"w-6 h-6 rounded-md flex items-center justify-center text-[10px] font-bold",style:{backgroundColor:`${B.color}20`,color:B.color},children:B.icon}),B.label,h.jsxs("span",{className:"text-xs",children:["(",O.length,")"]})]}),h.jsx("div",{className:"grid gap-2",children:O.map((q,J)=>h.jsx(Jt,{className:"cursor-pointer hover:border-primary/50 hover:shadow-sm transition-all duration-200 group animate-in fade-in slide-in-from-bottom-2",style:{animationDelay:`${J*50}ms`},onClick:()=>a(q),children:h.jsx(Qt,{className:"p-3",children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(zr,{className:"h-4 w-4 text-primary"}),h.jsx("p",{className:"font-medium truncate",children:q.name})]}),q.description&&h.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-1",children:q.description}),h.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",new Date(q.updatedAt).toLocaleDateString("zh-CN")]})]}),h.jsxs(al,{children:[h.jsx(ol,{asChild:!0,children:h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:ue=>ue.stopPropagation(),children:h.jsx(il,{className:"h-4 w-4"})})}),h.jsxs(ll,{align:"end",children:[h.jsxs(as,{onClick:ue=>{ue.stopPropagation(),a(q),g(!0)},children:[h.jsx(hD,{className:"h-4 w-4 mr-2"}),""]}),h.jsxs(as,{onClick:ue=>{ue.stopPropagation(),a(q),H()},children:[h.jsx($w,{className:"h-4 w-4 mr-2"}),""]}),h.jsxs(as,{onClick:ue=>{ue.stopPropagation(),R(q)},children:[h.jsx(Ic,{className:"h-4 w-4 mr-2"}),""]}),h.jsxs(as,{onClick:ue=>{ue.stopPropagation(),K(q.id)},className:"text-red-600",children:[h.jsx(Zs,{className:"h-4 w-4 mr-2"}),""]})]})]})]})})},q.id))})]},k)})}),h.jsx(vn,{open:l||d,onOpenChange:k=>{k||(c(!1),f(!1))},children:h.jsxs(yn,{className:"sm:max-w-md",children:[h.jsx(bn,{children:h.jsx(xn,{children:d?"":""})}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:N.name,onChange:k=>T({...N,name:k.target.value}),placeholder:""})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{value:N.description,onChange:k=>T({...N,description:k.target.value}),placeholder:"..."})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx("div",{className:"grid grid-cols-4 gap-2",children:dg.map(k=>h.jsx("button",{onClick:()=>T({...N,language:k.value}),className:`p-2 rounded-md text-xs font-medium transition-all ${N.language===k.value?"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2":"bg-muted hover:bg-muted/80"}`,children:k.label},k.value))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(ei,{value:N.code,onChange:k=>T({...N,code:k.target.value}),placeholder:"...",rows:5,className:"font-mono text-sm"})]})]}),h.jsxs(Qs,{children:[h.jsx(me,{variant:"outline",onClick:()=>{c(!1),f(!1)},children:""}),h.jsx(me,{onClick:d?G:F,children:d?"":""})]})]})})]})}const rU=()=>{const s=new(window.AudioContext||window.webkitAudioContext),e=s.createOscillator(),t=s.createGain();e.connect(t),t.connect(s.destination),e.frequency.value=800,e.type="sine",t.gain.setValueAtTime(.3,s.currentTime),t.gain.exponentialRampToValueAtTime(.01,s.currentTime+.5),e.start(s.currentTime),e.stop(s.currentTime+.5),setTimeout(()=>{const n=s.createOscillator(),i=s.createGain();n.connect(i),i.connect(s.destination),n.frequency.value=1e3,n.type="sine",i.gain.setValueAtTime(.3,s.currentTime),i.gain.exponentialRampToValueAtTime(.01,s.currentTime+.5),n.start(s.currentTime),n.stop(s.currentTime+.5)},200),setTimeout(()=>{const n=s.createOscillator(),i=s.createGain();n.connect(i),i.connect(s.destination),n.frequency.value=1200,n.type="sine",i.gain.setValueAtTime(.3,s.currentTime),i.gain.exponentialRampToValueAtTime(.01,s.currentTime+1),n.start(s.currentTime),n.stop(s.currentTime+1)},400)},aU=s=>{if(s==="none")return null;const e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate,n=t*2,i=e.createBuffer(1,n,t),a=i.getChannelData(0);for(let d=0;d<n;d++)if(s==="rain"){const f=Math.random()*2-1;a[d]=(S1+.02*f)/1.02,S1=a[d],a[d]*=3.5}else if(s==="wind"){const f=Math.random()*2-1;a[d]=f*.3}else if(s==="waves"){const f=d/t,m=.1+Math.sin(f*.5)*.05;a[d]=Math.sin(f*m*Math.PI*2)*.3}const l=e.createBufferSource();l.buffer=i,l.loop=!0;const c=e.createGain();if(c.gain.value=.3,s==="wind"){const d=e.createBiquadFilter();d.type="lowpass",d.frequency.value=400,l.connect(d),d.connect(c)}else l.connect(c);return c.connect(e.destination),l.start(),{audioContext:e,noiseNode:l,gainNode:c}};let S1=0;function oU(){const[s,e]=S.useState(!1),[t,n]=S.useState(!1),[i,a]=S.useState(!1),[l,c]=S.useState(0),[d,f]=S.useState({mode:"countdown",minutes:25,soundEnabled:!0,ambientSound:"none",ambientVolume:30}),[m,g]=S.useState(25),[v,b]=S.useState(null),[_,w]=S.useState(""),E=S.useRef(null),A=S.useRef(null),N=S.useRef(null);S.useEffect(()=>()=>{T(),E.current&&clearInterval(E.current)},[]);const T=()=>{if(A.current){try{A.current.noiseNode.stop(),A.current.audioContext.close()}catch{}A.current=null}N.current&&(N.current.pause(),N.current=null)},j=()=>{if(T(),v){const R=new Audio(v);R.loop=!0,R.volume=d.ambientVolume/100,R.play().catch(()=>{Ae.error("")}),N.current=R}else if(d.ambientSound!=="none"){const R=aU(d.ambientSound);R&&(R.gainNode.gain.value=d.ambientVolume/100,A.current=R)}},P=S.useCallback(()=>{d.soundEnabled&&rU()},[d.soundEnabled]),L=S.useCallback(()=>{d.mode==="countdown"||d.mode==="custom"?c(d.minutes*60):c(0),a(!0),j()},[d.mode,d.minutes,v,d.ambientSound,d.ambientVolume]),M=S.useCallback(()=>{a(!1),T(),E.current&&(clearInterval(E.current),E.current=null)},[]),I=S.useCallback(()=>{M(),d.mode==="countdown"||d.mode==="custom"?c(d.minutes*60):c(0)},[d.mode,d.minutes,M]),F=S.useCallback(()=>{M(),c(0)},[M]);S.useEffect(()=>(i&&(E.current=setInterval(()=>{c(R=>d.mode==="countdown"||d.mode==="custom"?R<=1?(M(),P(),Ae.success(" ",{duration:5e3,icon:""}),0):R-1:R+1)},1e3)),()=>{E.current&&clearInterval(E.current)}),[i,d.mode,M,P]);const G=R=>{const $=Math.floor(R/3600),U=Math.floor(R%3600/60),z=R%60;return $>0?`${$}:${U.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}`:`${U.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}`},K=()=>!i&&l===0&&(d.mode==="countdown"||d.mode==="custom")?G(d.minutes*60):G(l),ae=()=>{if(d.mode==="countup")return 0;const R=d.minutes*60;return R===0?0:(R-l)/R*100},X=()=>{f(R=>({...R,minutes:m})),i||c(m*60),n(!1),Ae.success("")},H=R=>{const $=R.target.files?.[0];if($){const U=URL.createObjectURL($);b(U),w($.name),Ae.success("")}},ie=()=>{v&&URL.revokeObjectURL(v),b(null),w(""),Ae.success("")};return h.jsxs(h.Fragment,{children:[h.jsxs(me,{variant:"ghost",size:"sm",onClick:()=>e(!0),className:"gap-2",children:[h.jsx(FD,{className:"h-4 w-4"}),h.jsx("span",{className:"hidden sm:inline",children:""}),i&&h.jsx("span",{className:"ml-1 text-xs font-mono",children:K()})]}),h.jsx(vn,{open:s,onOpenChange:R=>{e(!R&&i?!1:R)},children:h.jsxs(yn,{className:"max-w-sm",children:[h.jsx(bn,{children:h.jsxs(xn,{className:"flex items-center justify-between",children:[h.jsx("span",{children:""}),h.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>n(!0),children:h.jsx(gv,{className:"h-4 w-4"})})]})}),h.jsxs("div",{className:"py-6",children:[h.jsxs("div",{className:"relative flex items-center justify-center mb-8",children:[h.jsxs("svg",{className:"w-56 h-56 transform -rotate-90",children:[h.jsx("circle",{cx:"112",cy:"112",r:"100",fill:"none",stroke:"currentColor",strokeWidth:"12",className:"text-muted"}),h.jsx("circle",{cx:"112",cy:"112",r:"100",fill:"none",stroke:"currentColor",strokeWidth:"12",strokeLinecap:"round",className:"text-primary transition-all duration-1000",strokeDasharray:`${2*Math.PI*100}`,strokeDashoffset:`${2*Math.PI*100*(1-ae()/100)}`})]}),h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[h.jsx("span",{className:"text-5xl font-mono font-bold",children:K()}),h.jsxs("span",{className:"text-sm text-muted-foreground mt-2",children:[d.mode==="countdown"&&"",d.mode==="countup"&&"",d.mode==="custom"&&` ${d.minutes}`]}),d.ambientSound!=="none"&&h.jsxs("span",{className:"text-xs text-primary mt-1 flex items-center gap-1",children:[d.ambientSound==="rain"&&h.jsx(Lw,{className:"h-3 w-3"}),d.ambientSound==="wind"&&h.jsx(Ww,{className:"h-3 w-3"}),d.ambientSound==="waves"&&h.jsx(qw,{className:"h-3 w-3"}),""]}),v&&h.jsxs("span",{className:"text-xs text-primary mt-1 flex items-center gap-1",children:[h.jsx(zm,{className:"h-3 w-3"}),""]})]})]}),h.jsxs("div",{className:"flex items-center justify-center gap-3",children:[i?h.jsxs(me,{size:"lg",variant:"outline",onClick:M,className:"gap-2 px-8",children:[h.jsx(wD,{className:"h-5 w-5"}),""]}):h.jsxs(me,{size:"lg",onClick:L,className:"gap-2 px-8",children:[h.jsx(TD,{className:"h-5 w-5"}),""]}),h.jsxs(me,{size:"lg",variant:"outline",onClick:I,disabled:l===0&&!i,className:"gap-2",children:[h.jsx(jD,{className:"h-5 w-5"}),""]}),h.jsx(me,{size:"lg",variant:"ghost",onClick:()=>f(R=>({...R,soundEnabled:!R.soundEnabled})),className:"gap-2",children:d.soundEnabled?h.jsx(Vw,{className:"h-5 w-5"}):h.jsx(Gw,{className:"h-5 w-5"})})]}),h.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[h.jsx(me,{variant:d.mode==="countdown"?"default":"outline",size:"sm",onClick:()=>{f(R=>({...R,mode:"countdown",minutes:25})),g(25),F()},children:"25"}),h.jsx(me,{variant:d.mode==="countup"?"default":"outline",size:"sm",onClick:()=>{f(R=>({...R,mode:"countup"})),F()},children:""}),h.jsx(me,{variant:d.mode==="custom"?"default":"outline",size:"sm",onClick:()=>{f(R=>({...R,mode:"custom",minutes:m})),F()},children:""})]})]})]})}),h.jsx(vn,{open:t,onOpenChange:n,children:h.jsxs(yn,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[h.jsx(bn,{children:h.jsx(xn,{children:""})}),h.jsxs("div",{className:"space-y-6 py-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Be,{children:""}),h.jsx(pt,{type:"number",min:1,max:180,value:m,onChange:R=>g(Math.max(1,Math.min(180,parseInt(R.target.value)||1)))})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(Be,{children:""}),h.jsx(me,{variant:"ghost",size:"sm",onClick:()=>f(R=>({...R,soundEnabled:!R.soundEnabled})),children:d.soundEnabled?h.jsx(Vw,{className:"h-4 w-4"}):h.jsx(Gw,{className:"h-4 w-4"})})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(Be,{children:""}),h.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[h.jsx(me,{variant:d.ambientSound==="none"?"default":"outline",size:"sm",onClick:()=>f(R=>({...R,ambientSound:"none"})),children:""}),h.jsxs(me,{variant:d.ambientSound==="rain"?"default":"outline",size:"sm",onClick:()=>f(R=>({...R,ambientSound:"rain"})),className:"gap-1",children:[h.jsx(Lw,{className:"h-3 w-3"}),""]}),h.jsxs(me,{variant:d.ambientSound==="wind"?"default":"outline",size:"sm",onClick:()=>f(R=>({...R,ambientSound:"wind"})),className:"gap-1",children:[h.jsx(Ww,{className:"h-3 w-3"}),""]}),h.jsxs(me,{variant:d.ambientSound==="waves"?"default":"outline",size:"sm",onClick:()=>f(R=>({...R,ambientSound:"waves"})),className:"gap-1",children:[h.jsx(qw,{className:"h-3 w-3"}),""]})]})]}),d.ambientSound!=="none"&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs(Be,{children:[" (",d.ambientVolume,"%)"]}),h.jsx(qT,{value:[d.ambientVolume],onValueChange:R=>f($=>({...$,ambientVolume:R[0]})),min:0,max:100,step:5})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(Be,{children:""}),v?h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[h.jsx(zm,{className:"h-4 w-4 text-primary"}),h.jsx("span",{className:"flex-1 text-sm truncate",children:_}),h.jsx(me,{variant:"ghost",size:"sm",onClick:ie,children:""})]}):h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"file",accept:"audio/*",onChange:H,className:"hidden",id:"music-upload"}),h.jsx("label",{htmlFor:"music-upload",className:"flex-1",children:h.jsx(me,{variant:"outline",className:"w-full gap-2",asChild:!0,children:h.jsxs("span",{children:[h.jsx(zm,{className:"h-4 w-4"}),""]})})})]}),h.jsx("p",{className:"text-xs text-muted-foreground",children:" MP3, WAV, OGG "})]})]}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(me,{variant:"outline",onClick:()=>n(!1),children:""}),h.jsx(me,{onClick:X,children:""})]})]})})]})}const lU=s=>s?(...e)=>s(...e):(...e)=>fetch(...e);class Sy extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class cU extends Sy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _1 extends Sy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class A1 extends Sy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zg;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Zg||(Zg={}));class uU{constructor(e,{headers:t={},customFetch:n,region:i=Zg.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=lU(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return dO(this,arguments,void 0,function*(t,n={}){var i;let a,l;try{const{headers:c,method:d,body:f,signal:m,timeout:g}=n;let v={},{region:b}=n;b||(b=this.region);const _=new URL(`${this.url}/${t}`);b&&b!=="any"&&(v["x-region"]=b,_.searchParams.set("forceFunctionRegion",b));let w;f&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",w=f):typeof f=="string"?(v["Content-Type"]="text/plain",w=f):typeof FormData<"u"&&f instanceof FormData?w=f:(v["Content-Type"]="application/json",w=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?w=JSON.stringify(f):w=f;let E=m;g&&(l=new AbortController,a=setTimeout(()=>l.abort(),g),m?(E=l.signal,m.addEventListener("abort",()=>l.abort())):E=l.signal);const A=yield this.fetch(_.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),c),body:w,signal:E}).catch(P=>{throw new cU(P)}),N=A.headers.get("x-relay-error");if(N&&N==="true")throw new _1(A);if(!A.ok)throw new A1(A);let T=((i=A.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return T==="application/json"?j=yield A.json():T==="application/octet-stream"||T==="application/pdf"?j=yield A.blob():T==="text/event-stream"?j=A:T==="multipart/form-data"?j=yield A.formData():j=yield A.text(),{data:j,error:null,response:A}}catch(c){return{data:null,error:c,response:c instanceof A1||c instanceof _1?c.context:void 0}}finally{a&&clearTimeout(a)}})}}var dU=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},hU=class{constructor(s){var e,t,n;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(e=s.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=s.signal,this.isMaybeSingle=(t=s.isMaybeSingle)!==null&&t!==void 0?t:!1,this.urlLengthLimit=(n=s.urlLengthLimit)!==null&&n!==void 0?n:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,e){return this.headers=new Headers(this.headers),this.headers.set(s,e),this}then(s,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,c=null,d=null,f=a.status,m=a.statusText;if(a.ok){var g,v;if(t.method!=="HEAD"){var b;const A=await a.text();A===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((b=t.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?c=A:c=JSON.parse(A))}const w=(g=t.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),E=(v=a.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");w&&E&&E.length>1&&(d=parseInt(E[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,m="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var _;const w=await a.text();try{l=JSON.parse(w),Array.isArray(l)&&a.status===404&&(c=[],l=null,f=200,m="OK")}catch{a.status===404&&w===""?(f=204,m="No Content"):l={message:w}}if(l&&t.isMaybeSingle&&(!(l==null||(_=l.details)===null||_===void 0)&&_.includes("0 rows"))&&(l=null,f=200,m="OK"),l&&t.shouldThrowOnError)throw new dU(l)}return{error:l,data:c,count:d,status:f,statusText:m}});return this.shouldThrowOnError||(i=i.catch(a=>{var l;let c="",d="",f="";const m=a?.cause;if(m){var g,v,b,_;const A=(g=m?.message)!==null&&g!==void 0?g:"",N=(v=m?.code)!==null&&v!==void 0?v:"";c=`${(b=a?.name)!==null&&b!==void 0?b:"FetchError"}: ${a?.message}`,c+=`

Caused by: ${(_=m?.name)!==null&&_!==void 0?_:"Error"}: ${A}`,N&&(c+=` (${N})`),m?.stack&&(c+=`
${m.stack}`)}else{var w;c=(w=a?.stack)!==null&&w!==void 0?w:""}const E=this.url.toString().length;return a?.name==="AbortError"||a?.code==="ABORT_ERR"?(f="",d="Request was aborted (timeout or manual cancellation)",E>this.urlLengthLimit&&(d+=`. Note: Your request URL is ${E} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(m?.name==="HeadersOverflowError"||m?.code==="UND_ERR_HEADERS_OVERFLOW")&&(f="",d="HTTP headers exceeded server limits (typically 16KB)",E>this.urlLengthLimit&&(d+=`. Your request URL is ${E} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=a?.name)!==null&&l!==void 0?l:"FetchError"}: ${a?.message}`,details:c,hint:d,code:f},data:null,count:null,status:0,statusText:""}})),i.then(s,e)}returns(){return this}overrideTypes(){return this}},fU=class extends hU{select(s){let e=!1;const t=(s??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:e=!0,nullsFirst:t,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${s}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:e,referencedTable:t=e}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${s}`),this}range(s,e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${s}`),this.url.searchParams.set(a,`${e-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:e=!1,settings:t=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var l;const c=[s?"analyze":null,e?"verbose":null,t?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const E1=new RegExp("[,()]");var Bo=class extends fU{eq(s,e){return this.url.searchParams.append(s,`eq.${e}`),this}neq(s,e){return this.url.searchParams.append(s,`neq.${e}`),this}gt(s,e){return this.url.searchParams.append(s,`gt.${e}`),this}gte(s,e){return this.url.searchParams.append(s,`gte.${e}`),this}lt(s,e){return this.url.searchParams.append(s,`lt.${e}`),this}lte(s,e){return this.url.searchParams.append(s,`lte.${e}`),this}like(s,e){return this.url.searchParams.append(s,`like.${e}`),this}likeAllOf(s,e){return this.url.searchParams.append(s,`like(all).{${e.join(",")}}`),this}likeAnyOf(s,e){return this.url.searchParams.append(s,`like(any).{${e.join(",")}}`),this}ilike(s,e){return this.url.searchParams.append(s,`ilike.${e}`),this}ilikeAllOf(s,e){return this.url.searchParams.append(s,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(s,e){return this.url.searchParams.append(s,`ilike(any).{${e.join(",")}}`),this}regexMatch(s,e){return this.url.searchParams.append(s,`match.${e}`),this}regexIMatch(s,e){return this.url.searchParams.append(s,`imatch.${e}`),this}is(s,e){return this.url.searchParams.append(s,`is.${e}`),this}isDistinct(s,e){return this.url.searchParams.append(s,`isdistinct.${e}`),this}in(s,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&E1.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`in.(${t})`),this}notIn(s,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&E1.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`not.in.(${t})`),this}contains(s,e){return typeof e=="string"?this.url.searchParams.append(s,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(s,`cs.{${e.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(e)}`),this}containedBy(s,e){return typeof e=="string"?this.url.searchParams.append(s,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(s,`cd.{${e.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(e)}`),this}rangeGt(s,e){return this.url.searchParams.append(s,`sr.${e}`),this}rangeGte(s,e){return this.url.searchParams.append(s,`nxl.${e}`),this}rangeLt(s,e){return this.url.searchParams.append(s,`sl.${e}`),this}rangeLte(s,e){return this.url.searchParams.append(s,`nxr.${e}`),this}rangeAdjacent(s,e){return this.url.searchParams.append(s,`adj.${e}`),this}overlaps(s,e){return typeof e=="string"?this.url.searchParams.append(s,`ov.${e}`):this.url.searchParams.append(s,`ov.{${e.join(",")}}`),this}textSearch(s,e,{config:t,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=t===void 0?"":`(${t})`;return this.url.searchParams.append(s,`${i}fts${a}.${e}`),this}match(s){return Object.entries(s).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(s,e,t){return this.url.searchParams.append(s,`not.${e}.${t}`),this}or(s,{foreignTable:e,referencedTable:t=e}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${s})`),this}filter(s,e,t){return this.url.searchParams.append(s,`${e}.${t}`),this}},pU=class{constructor(s,{headers:e={},schema:t,fetch:n,urlLengthLimit:i=8e3}){this.url=s,this.headers=new Headers(e),this.schema=t,this.fetch=n,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,e){const{head:t=!1,count:n}=e??{},i=t?"HEAD":"GET";let a=!1;const l=(s??"*").split("").map(f=>/\s/.test(f)&&!a?"":(f==='"'&&(a=!a),f)).join(""),{url:c,headers:d}=this.cloneRequestState();return c.searchParams.set("select",l),n&&d.append("Prefer",`count=${n}`),new Bo({method:i,url:c,headers:d,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:e,defaultToNull:t=!0}={}){var n;const i="POST",{url:a,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),t||l.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);a.searchParams.set("columns",d.join(","))}}return new Bo({method:i,url:a,headers:l,schema:this.schema,body:s,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:e,ignoreDuplicates:t=!1,count:n,defaultToNull:i=!0}={}){var a;const l="POST",{url:c,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&c.searchParams.set("on_conflict",e),n&&d.append("Prefer",`count=${n}`),i||d.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);c.searchParams.set("columns",m.join(","))}}return new Bo({method:l,url:c,headers:d,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:e}={}){var t;const n="PATCH",{url:i,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Bo({method:n,url:i,headers:a,schema:this.schema,body:s,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var e;const t="DELETE",{url:n,headers:i}=this.cloneRequestState();return s&&i.append("Prefer",`count=${s}`),new Bo({method:t,url:n,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Kc(s){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(s)}function mU(s,e){if(Kc(s)!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(Kc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function gU(s){var e=mU(s,"string");return Kc(e)=="symbol"?e:e+""}function vU(s,e,t){return(e=gU(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function C1(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),t.push.apply(t,n)}return t}function Kd(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?C1(Object(t),!0).forEach(function(n){vU(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):C1(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}var yU=class WT{constructor(e,{headers:t={},schema:n,fetch:i,timeout:a,urlLengthLimit:l=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.urlLengthLimit=l;const c=i??globalThis.fetch;a!==void 0&&a>0?this.fetch=(d,f)=>{const m=new AbortController,g=setTimeout(()=>m.abort(),a),v=f?.signal;if(v){if(v.aborted)return clearTimeout(g),c(d,f);const b=()=>{clearTimeout(g),m.abort()};return v.addEventListener("abort",b,{once:!0}),c(d,Kd(Kd({},f),{},{signal:m.signal})).finally(()=>{clearTimeout(g),v.removeEventListener("abort",b)})}return c(d,Kd(Kd({},f),{},{signal:m.signal})).finally(()=>clearTimeout(g))}:this.fetch=c}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new pU(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new WT(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,t={},{head:n=!1,get:i=!1,count:a}={}){var l;let c;const d=new URL(`${this.url}/rpc/${e}`);let f;const m=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(m)),g=n&&Object.values(t).some(m);g?(c="POST",f=t):n||i?(c=n?"HEAD":"GET",Object.entries(t).filter(([b,_])=>_!==void 0).map(([b,_])=>[b,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([b,_])=>{d.searchParams.append(b,_)})):(c="POST",f=t);const v=new Headers(this.headers);return g?v.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&v.set("Prefer",`count=${a}`),new Bo({method:c,url:d,headers:v,schema:this.schemaName,body:f,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class bU{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const n=t.versions;if(n&&n.node){const i=n.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const xU="2.98.0",wU=`realtime-js/${xU}`,SU="1.0.0",YT="2.0.0",T1=YT,ev=1e4,_U=1e3,AU=100;var Lr;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Lr||(Lr={}));var cn;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(cn||(cn={}));var Ks;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Ks||(Ks={}));var tv;(function(s){s.websocket="websocket"})(tv||(tv={}));var xa;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(xa||(xa={}));class EU{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const i=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var t,n;const i=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,t,n){var i,a;const l=e.topic,c=(i=e.ref)!==null&&i!==void 0?i:"",d=(a=e.join_ref)!==null&&a!==void 0?a:"",f=e.payload.event,m=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},g=Object.keys(m).length===0?"":JSON.stringify(m);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+c.length+l.length+f.length+g.length,b=new ArrayBuffer(this.HEADER_LENGTH+v);let _=new DataView(b),w=0;_.setUint8(w++,this.KINDS.userBroadcastPush),_.setUint8(w++,d.length),_.setUint8(w++,c.length),_.setUint8(w++,l.length),_.setUint8(w++,f.length),_.setUint8(w++,g.length),_.setUint8(w++,t),Array.from(d,A=>_.setUint8(w++,A.charCodeAt(0))),Array.from(c,A=>_.setUint8(w++,A.charCodeAt(0))),Array.from(l,A=>_.setUint8(w++,A.charCodeAt(0))),Array.from(f,A=>_.setUint8(w++,A.charCodeAt(0))),Array.from(g,A=>_.setUint8(w++,A.charCodeAt(0)));var E=new Uint8Array(b.byteLength+n.byteLength);return E.set(new Uint8Array(b),0),E.set(new Uint8Array(n),b.byteLength),E.buffer}decode(e,t){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return t(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,a,l,c,d]=n;return t({join_ref:i,ref:a,topic:l,event:c,payload:d})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,i)}_decodeUserBroadcast(e,t,n){const i=t.getUint8(1),a=t.getUint8(2),l=t.getUint8(3),c=t.getUint8(4);let d=this.HEADER_LENGTH+4;const f=n.decode(e.slice(d,d+i));d=d+i;const m=n.decode(e.slice(d,d+a));d=d+a;const g=n.decode(e.slice(d,d+l));d=d+l;const v=e.slice(d,e.byteLength),b=c===this.JSON_ENCODING?JSON.parse(n.decode(v)):v,_={type:this.BROADCAST_EVENT,event:m,payload:b};return l>0&&(_.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>t.includes(n)))}}class XT{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Et||(Et={}));const N1=(s,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=CU(l,s,e,i),a),{}):{}},CU=(s,e,t,n)=>{const i=e.find(c=>c.name===s),a=i?.type,l=t[s];return a&&!n.includes(a)?KT(a,l):nv(l)},KT=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return jU(e,t)}switch(s){case Et.bool:return TU(e);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return NU(e);case Et.json:case Et.jsonb:return kU(e);case Et.timestamp:return RU(e);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return nv(e);default:return nv(e)}},nv=s=>s,TU=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},NU=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},kU=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},jU=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let a;const l=s.slice(1,t);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(c=>KT(e,c))}return s},RU=s=>typeof s=="string"?s.replace(" ","T"):s,JT=s=>{const e=new URL(s);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class hg{constructor(e,t,n={},i=ev){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var k1;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(k1||(k1={}));class Pc{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pc.syncState(this.state,i,a,l),this.pendingDiffs.forEach(d=>{this.state=Pc.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Pc.syncDiff(this.state,i,a,l),c())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const a=this.cloneDeep(e),l=this.transformState(t),c={},d={};return this.map(a,(f,m)=>{l[f]||(d[f]=m)}),this.map(l,(f,m)=>{const g=a[f];if(g){const v=m.map(E=>E.presence_ref),b=g.map(E=>E.presence_ref),_=m.filter(E=>b.indexOf(E.presence_ref)<0),w=g.filter(E=>v.indexOf(E.presence_ref)<0);_.length>0&&(c[f]=_),w.length>0&&(d[f]=w)}else c[f]=m}),this.syncDiff(a,{joins:c,leaves:d},n,i)}static syncDiff(e,t,n,i){const{joins:a,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(c,d)=>{var f;const m=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(d),m.length>0){const g=e[c].map(b=>b.presence_ref),v=m.filter(b=>g.indexOf(b.presence_ref)<0);e[c].unshift(...v)}n(c,m,d)}),this.map(l,(c,d)=>{let f=e[c];if(!f)return;const m=d.map(g=>g.presence_ref);f=f.filter(g=>m.indexOf(g.presence_ref)<0),e[c]=f,i(c,f,d),f.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var j1;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(j1||(j1={}));var Lc;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Lc||(Lc={}));var Xi;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Xi||(Xi={}));class Ho{constructor(e,t={config:{}},n){var i,a;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=cn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new hg(this,Ks.join,this.params,this.timeout),this.rejoinTimer=new XT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ks.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Pc(this),this.broadcastEndpointURL=JT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==cn.closed){const{config:{broadcast:l,presence:c,private:d}}=this.params,f=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[Lc.PRESENCE]&&this.bindings[Lc.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},v={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:m}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(Xi.CHANNEL_ERROR,b)),this._onClose(()=>e?.(Xi.CLOSED)),this.updateJoinPayload(Object.assign({config:v},g)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:b})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){e?.(Xi.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,E=(_=w?.length)!==null&&_!==void 0?_:0,A=[];for(let N=0;N<E;N++){const T=w[N],{filter:{event:j,schema:P,table:L,filter:M}}=T,I=b&&b[N];if(I&&I.event===j&&Ho.isFilterValueEqual(I.schema,P)&&Ho.isFilterValueEqual(I.table,L)&&Ho.isFilterValueEqual(I.filter,M))A.push(Object.assign(Object.assign({},T),{id:I.id}));else{this.unsubscribe(),this.state=cn.errored,e?.(Xi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(Xi.SUBSCRIBED);return}}).receive("error",b=>{this.state=cn.errored,e?.(Xi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(Xi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===cn.joined&&e===Lc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var i;if(t==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let d=c.statusText;try{const f=await c.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,c,d;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=cn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ks.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new hg(this,Ks.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=cn.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),l}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new hg(this,e,t,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>AU){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,a;const l=e.toLocaleLowerCase(),{close:c,error:d,leave:f,join:m}=Ks;if(n&&[c,d,f,m].indexOf(l)>=0&&n!==this._joinRef())return;let v=this._onMessage(l,t,n);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var _,w,E;return((_=b.filter)===null||_===void 0?void 0:_.event)==="*"||((E=(w=b.filter)===null||w===void 0?void 0:w.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(b=>b.callback(v,n)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var _,w,E,A,N,T;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const j=b.id,P=(_=b.filter)===null||_===void 0?void 0:_.event;return j&&((w=t.ids)===null||w===void 0?void 0:w.includes(j))&&(P==="*"||P?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const j=(N=(A=b?.filter)===null||A===void 0?void 0:A.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return j==="*"||j===((T=t?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:w,table:E,commit_timestamp:A,type:N,errors:T}=_;v=Object.assign(Object.assign({},{schema:w,table:E,commit_timestamp:A,eventType:N,new:{},old:{},errors:T}),this._getPayloadRecords(_))}b.callback(v,n)})}_isClosed(){return this.state===cn.closed}_isJoined(){return this.state===cn.joined}_isJoining(){return this.state===cn.joining}_isLeaving(){return this.state===cn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Ho.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ks.close,{},e)}_onError(e){this._on(Ks.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=N1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=N1(e.columns,e.old_record)),t}}const fg=()=>{},Jd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},DU=[1e3,2e3,5e3,1e4],MU=1e4,OU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class PU{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ev,this.transport=null,this.heartbeatIntervalMs=Jd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fg,this.ref=0,this.reconnectTimer=null,this.vsn=T1,this.logger=fg,this.conn=null,this.sendBuffer=[],this.serializer=new EU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=t?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${tv.websocket}`,this.httpEndpoint=JT(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bU.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Lr.connecting:return xa.Connecting;case Lr.open:return xa.Open;case Lr.closing:return xa.Closing;default:return xa.Closed}}isConnected(){return this.connectionState()===xa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Ho(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:n,payload:i,ref:a}=e,l=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${t} ${n} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(_U,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Jd.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",f)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:a,ref:l}=t,c=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${i} ${c}`.trim(),a),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(i,a,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Lr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Lr.open||this.conn.readyState===Lr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.accessTokenValue&&(this.channels.forEach(t=>{t.updateJoinPayload({access_token:this.accessTokenValue})}),this.sendBuffer=[],this.channels.forEach(t=>{t._isJoining()&&(t.joinPush.sent=!1,t.joinPush.send())})),this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ks.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([OU],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const a={access_token:t,version:wU};t&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Ks.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new XT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Jd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,i,a,l,c,d,f,m,g,v,b;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:ev,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Jd.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e?.heartbeatCallback)!==null&&c!==void 0?c:fg,this.vsn=(d=e?.vsn)!==null&&d!==void 0?d:T1,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(_=>DU[_-1]||MU),this.vsn){case SU:this.encode=(m=e?.encode)!==null&&m!==void 0?m:((_,w)=>w(JSON.stringify(_))),this.decode=(g=e?.decode)!==null&&g!==void 0?g:((_,w)=>w(JSON.parse(_)));break;case YT:this.encode=(v=e?.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(b=e?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var Jc=class extends Error{constructor(s,e){super(s),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function LU(s,e,t){const n=new URL(e,s);if(t)for(const[i,a]of Object.entries(t))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function IU(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function BU(s){const e=s.fetchImpl??globalThis.fetch;return{async request({method:t,path:n,query:i,body:a,headers:l}){const c=LU(s.baseUrl,n,i),d=await IU(s.auth),f=await e(c,{method:t,headers:{...a?{"Content-Type":"application/json"}:{},...d,...l},body:a?JSON.stringify(a):void 0}),m=await f.text(),g=(f.headers.get("content-type")||"").includes("application/json"),v=g&&m?JSON.parse(m):m;if(!f.ok){const b=g?v:void 0,_=b?.error;throw new Jc(_?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:_?.type,icebergCode:_?.code,details:b})}return{status:f.status,headers:f.headers,data:v}}}}function Qd(s){return s.join("")}var zU=class{constructor(s,e=""){this.client=s,this.prefix=e}async listNamespaces(s){const e=s?{parent:Qd(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(s,e){const t={namespace:s.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Qd(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qd(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Qd(s.namespace)}`}),!0}catch(e){if(e instanceof Jc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(s,e){try{return await this.createNamespace(s,e)}catch(t){if(t instanceof Jc&&t.status===409)return;throw t}}};function Ro(s){return s.join("")}var FU=class{constructor(s,e="",t){this.client=s,this.prefix=e,this.accessDelegation=t}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ro(s.namespace)}/tables`})).data.identifiers}async createTable(s,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ro(s.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(s,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ro(s.namespace)}/tables/${s.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(s,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ro(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(s){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ro(s.namespace)}/tables/${s.name}`,headers:e})).data.metadata}async tableExists(s){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ro(s.namespace)}/tables/${s.name}`,headers:e}),!0}catch(t){if(t instanceof Jc&&t.status===404)return!1;throw t}}async createTableIfNotExists(s,e){try{return await this.createTable(s,e)}catch(t){if(t instanceof Jc&&t.status===409)return await this.loadTable({namespace:s.namespace,name:e.name});throw t}}},UU=class{constructor(s){let e="v1";s.catalogName&&(e+=`/${s.catalogName}`);const t=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=BU({baseUrl:t,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new zU(this.client,e),this.tableOps=new FU(this.client,e,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,e){return this.namespaceOps.createNamespace(s,e)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,e){return this.tableOps.createTable(s,e)}async updateTable(s,e){return this.tableOps.updateTable(s,e)}async dropTable(s,e){await this.tableOps.dropTable(s,e)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,e){return this.namespaceOps.createNamespaceIfNotExists(s,e)}async createTableIfNotExists(s,e){return this.tableOps.createTableIfNotExists(s,e)}},mf=class extends Error{constructor(s,e="storage",t,n){super(s),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=n}};function gf(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Zd=class extends mf{constructor(s,e,t,n="storage"){super(s,n,e,t),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},QT=class extends mf{constructor(s,e,t="storage"){super(s,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const $U=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),HU=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},sv=s=>{if(Array.isArray(s))return s.map(t=>sv(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=sv(n)}),e},VU=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function Qc(s){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(s)}function GU(s,e){if(Qc(s)!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function qU(s){var e=GU(s,"string");return Qc(e)=="symbol"?e:e+""}function WU(s,e,t){return(e=qU(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function R1(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),t.push.apply(t,n)}return t}function Fe(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?R1(Object(t),!0).forEach(function(n){WU(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):R1(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}const D1=s=>{var e;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(e=s.error)===null||e===void 0?void 0:e.message)||JSON.stringify(s)},YU=async(s,e,t,n)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!t?.noResolveJson){const i=s,a=i.status||500;if(typeof i.json=="function")i.json().then(l=>{const c=l?.statusCode||l?.code||a+"";e(new Zd(D1(l),a,c,n))}).catch(()=>{if(n==="vectors"){const l=a+"";e(new Zd(i.statusText||`HTTP ${a} error`,a,l,n))}else{const l=a+"";e(new Zd(i.statusText||`HTTP ${a} error`,a,l,n))}});else{const l=a+"";e(new Zd(i.statusText||`HTTP ${a} error`,a,l,n))}}else e(new QT(D1(s),s,n))},XU=(s,e,t,n)=>{const i={method:s,headers:e?.headers||{}};return s==="GET"||s==="HEAD"||!n?Fe(Fe({},i),t):(HU(n)?(i.headers=Fe({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),Fe(Fe({},i),t))};async function Ec(s,e,t,n,i,a,l){return new Promise((c,d)=>{s(t,XU(e,n,i,a)).then(f=>{if(!f.ok)throw f;if(n?.noResolveJson)return f;if(l==="vectors"){const m=f.headers.get("content-type");if(f.headers.get("content-length")==="0"||f.status===204)return{};if(!m||!m.includes("application/json"))return{}}return f.json()}).then(f=>c(f)).catch(f=>YU(f,d,n,l))})}function ZT(s="storage"){return{get:async(e,t,n,i)=>Ec(e,"GET",t,n,i,void 0,s),post:async(e,t,n,i,a)=>Ec(e,"POST",t,i,a,n,s),put:async(e,t,n,i,a)=>Ec(e,"PUT",t,i,a,n,s),head:async(e,t,n,i)=>Ec(e,"HEAD",t,Fe(Fe({},n),{},{noResolveJson:!0}),i,void 0,s),remove:async(e,t,n,i,a)=>Ec(e,"DELETE",t,i,a,n,s)}}const KU=ZT("storage"),{get:Zc,post:Ys,put:iv,head:JU,remove:_y}=KU,ws=ZT("vectors");var Cl=class{constructor(s,e={},t,n="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=e,this.fetch=$U(t),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,e){return this.headers=Fe(Fe({},this.headers),{},{[s]:e}),this}async handleOperation(s){var e=this;try{return{data:await s(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(gf(t))return{data:null,error:t};throw t}}},QU=class{constructor(s,e){this.downloadFn=s,this.shouldThrowOnError=e}then(s,e){return this.execute().then(s,e)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(gf(e))return{data:null,error:e};throw e}}};let e2;e2=Symbol.toStringTag;var ZU=class{constructor(s,e){this.downloadFn=s,this.shouldThrowOnError=e,this[e2]="BlobDownloadBuilder",this.promise=null}asStream(){return new QU(this.downloadFn,this.shouldThrowOnError)}then(s,e){return this.getPromise().then(s,e)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(gf(e))return{data:null,error:e};throw e}}};const e6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},M1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var t6=class extends Cl{constructor(s,e={},t,n){super(s,e,n,"storage"),this.bucketId=t}async uploadOrUpdate(s,e,t,n){var i=this;return i.handleOperation(async()=>{let a;const l=Fe(Fe({},M1),n);let c=Fe(Fe({},i.headers),s==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&t instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",i.encodeMetadata(d)),a.append("",t)):typeof FormData<"u"&&t instanceof FormData?(a=t,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),d&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(d))):(a=t,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,d&&(c["x-metadata"]=i.toBase64(i.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),n?.headers&&(c=Fe(Fe({},c),n.headers));const f=i._removeEmptyFolders(e),m=i._getFinalPath(f),g=await(s=="PUT"?iv:Ys)(i.fetch,`${i.url}/object/${m}`,a,Fe({headers:c},l?.duplex?{duplex:l.duplex}:{}));return{path:f,id:g.Id,fullPath:g.Key}})}async upload(s,e,t){return this.uploadOrUpdate("POST",s,e,t)}async uploadToSignedUrl(s,e,t,n){var i=this;const a=i._removeEmptyFolders(s),l=i._getFinalPath(a),c=new URL(i.url+`/object/upload/sign/${l}`);return c.searchParams.set("token",e),i.handleOperation(async()=>{let d;const f=Fe({upsert:M1.upsert},n),m=Fe(Fe({},i.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&t instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",t)):typeof FormData<"u"&&t instanceof FormData?(d=t,d.append("cacheControl",f.cacheControl)):(d=t,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType),{path:a,fullPath:(await iv(i.fetch,c.toString(),d,{headers:m})).Key}})}async createSignedUploadUrl(s,e){var t=this;return t.handleOperation(async()=>{let n=t._getFinalPath(s);const i=Fe({},t.headers);e?.upsert&&(i["x-upsert"]="true");const a=await Ys(t.fetch,`${t.url}/object/upload/sign/${n}`,{},{headers:i}),l=new URL(t.url+a.url),c=l.searchParams.get("token");if(!c)throw new mf("No token returned by API");return{signedUrl:l.toString(),path:s,token:c}})}async update(s,e,t){return this.uploadOrUpdate("PUT",s,e,t)}async move(s,e,t){var n=this;return n.handleOperation(async()=>await Ys(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:s,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:n.headers}))}async copy(s,e,t){var n=this;return n.handleOperation(async()=>({path:(await Ys(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:s,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(s,e,t){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(s),a=await Ys(n.fetch,`${n.url}/object/sign/${i}`,Fe({expiresIn:e},t?.transform?{transform:t.transform}:{}),{headers:n.headers});const l=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${n.url}${a.signedURL}${l}`)}})}async createSignedUrls(s,e,t){var n=this;return n.handleOperation(async()=>{const i=await Ys(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:s},{headers:n.headers}),a=t?.download?`&download=${t.download===!0?"":t.download}`:"";return i.map(l=>Fe(Fe({},l),{},{signedUrl:l.signedURL?encodeURI(`${n.url}${l.signedURL}${a}`):null}))})}download(s,e,t){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),a=i?`?${i}`:"",l=this._getFinalPath(s),c=()=>Zc(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0},t);return new ZU(c,this.shouldThrowOnError)}async info(s){var e=this;const t=e._getFinalPath(s);return e.handleOperation(async()=>sv(await Zc(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(s){var e=this;const t=e._getFinalPath(s);try{return await JU(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gf(n)&&n instanceof QT){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}}getPublicUrl(s,e){const t=this._getFinalPath(s),n=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&n.push(l);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${t}${c}`)}}}async remove(s){var e=this;return e.handleOperation(async()=>await _y(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:s},{headers:e.headers}))}async list(s,e,t){var n=this;return n.handleOperation(async()=>{const i=Fe(Fe(Fe({},e6),e),{},{prefix:s||""});return await Ys(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},t)})}async listV2(s,e){var t=this;return t.handleOperation(async()=>{const n=Fe({},s);return await Ys(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,n,{headers:t.headers},e)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const e=[];return s.width&&e.push(`width=${s.width}`),s.height&&e.push(`height=${s.height}`),s.resize&&e.push(`resize=${s.resize}`),s.format&&e.push(`format=${s.format}`),s.quality&&e.push(`quality=${s.quality}`),e.join("&")}};const n6="2.98.0",gu={"X-Client-Info":`storage-js/${n6}`};var s6=class extends Cl{constructor(s,e={},t,n){const i=new URL(s);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const a=i.href.replace(/\/$/,""),l=Fe(Fe({},gu),e);super(a,l,t,"storage")}async listBuckets(s){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(s);return await Zc(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(s){var e=this;return e.handleOperation(async()=>await Zc(e.fetch,`${e.url}/bucket/${s}`,{headers:e.headers}))}async createBucket(s,e={public:!1}){var t=this;return t.handleOperation(async()=>await Ys(t.fetch,`${t.url}/bucket`,{id:s,name:s,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(s,e){var t=this;return t.handleOperation(async()=>await iv(t.fetch,`${t.url}/bucket/${s}`,{id:s,name:s,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(s){var e=this;return e.handleOperation(async()=>await Ys(e.fetch,`${e.url}/bucket/${s}/empty`,{},{headers:e.headers}))}async deleteBucket(s){var e=this;return e.handleOperation(async()=>await _y(e.fetch,`${e.url}/bucket/${s}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(s){const e={};return s&&("limit"in s&&(e.limit=String(s.limit)),"offset"in s&&(e.offset=String(s.offset)),s.search&&(e.search=s.search),s.sortColumn&&(e.sortColumn=s.sortColumn),s.sortOrder&&(e.sortOrder=s.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},i6=class extends Cl{constructor(s,e={},t){const n=s.replace(/\/$/,""),i=Fe(Fe({},gu),e);super(n,i,t,"storage")}async createBucket(s){var e=this;return e.handleOperation(async()=>await Ys(e.fetch,`${e.url}/bucket`,{name:s},{headers:e.headers}))}async listBuckets(s){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;s?.limit!==void 0&&t.set("limit",s.limit.toString()),s?.offset!==void 0&&t.set("offset",s.offset.toString()),s?.sortColumn&&t.set("sortColumn",s.sortColumn),s?.sortOrder&&t.set("sortOrder",s.sortOrder),s?.search&&t.set("search",s.search);const n=t.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return await Zc(e.fetch,i,{headers:e.headers})})}async deleteBucket(s){var e=this;return e.handleOperation(async()=>await _y(e.fetch,`${e.url}/bucket/${s}`,{},{headers:e.headers}))}from(s){var e=this;if(!VU(s))throw new mf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new UU({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(t,{get(i,a){const l=i[a];return typeof l!="function"?l:async(...c)=>{try{return{data:await l.apply(i,c),error:null}}catch(d){if(n)throw d;return{data:null,error:d}}}}})}},r6=class extends Cl{constructor(s,e={},t){const n=s.replace(/\/$/,""),i=Fe(Fe({},gu),{},{"Content-Type":"application/json"},e);super(n,i,t,"vectors")}async createIndex(s){var e=this;return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/CreateIndex`,s,{headers:e.headers})||{})}async getIndex(s,e){var t=this;return t.handleOperation(async()=>await ws.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:s,indexName:e},{headers:t.headers}))}async listIndexes(s){var e=this;return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/ListIndexes`,s,{headers:e.headers}))}async deleteIndex(s,e){var t=this;return t.handleOperation(async()=>await ws.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:s,indexName:e},{headers:t.headers})||{})}},a6=class extends Cl{constructor(s,e={},t){const n=s.replace(/\/$/,""),i=Fe(Fe({},gu),{},{"Content-Type":"application/json"},e);super(n,i,t,"vectors")}async putVectors(s){var e=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/PutVectors`,s,{headers:e.headers})||{})}async getVectors(s){var e=this;return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/GetVectors`,s,{headers:e.headers}))}async listVectors(s){var e=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/ListVectors`,s,{headers:e.headers}))}async queryVectors(s){var e=this;return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/QueryVectors`,s,{headers:e.headers}))}async deleteVectors(s){var e=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/DeleteVectors`,s,{headers:e.headers})||{})}},o6=class extends Cl{constructor(s,e={},t){const n=s.replace(/\/$/,""),i=Fe(Fe({},gu),{},{"Content-Type":"application/json"},e);super(n,i,t,"vectors")}async createBucket(s){var e=this;return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:e.headers})||{})}async getBucket(s){var e=this;return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:s},{headers:e.headers}))}async listBuckets(s={}){var e=this;return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/ListVectorBuckets`,s,{headers:e.headers}))}async deleteBucket(s){var e=this;return e.handleOperation(async()=>await ws.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:e.headers})||{})}},l6=class extends o6{constructor(s,e={}){super(s,e.headers||{},e.fetch)}from(s){return new c6(this.url,this.headers,s,this.fetch)}async createBucket(s){var e=()=>super.createBucket,t=this;return e().call(t,s)}async getBucket(s){var e=()=>super.getBucket,t=this;return e().call(t,s)}async listBuckets(s={}){var e=()=>super.listBuckets,t=this;return e().call(t,s)}async deleteBucket(s){var e=()=>super.deleteBucket,t=this;return e().call(t,s)}},c6=class extends r6{constructor(s,e,t,n){super(s,e,n),this.vectorBucketName=t}async createIndex(s){var e=()=>super.createIndex,t=this;return e().call(t,Fe(Fe({},s),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(s={}){var e=()=>super.listIndexes,t=this;return e().call(t,Fe(Fe({},s),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(s){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,s)}async deleteIndex(s){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,s)}index(s){return new u6(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},u6=class extends a6{constructor(s,e,t,n,i){super(s,e,i),this.vectorBucketName=t,this.indexName=n}async putVectors(s){var e=()=>super.putVectors,t=this;return e().call(t,Fe(Fe({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(s){var e=()=>super.getVectors,t=this;return e().call(t,Fe(Fe({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(s={}){var e=()=>super.listVectors,t=this;return e().call(t,Fe(Fe({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(s){var e=()=>super.queryVectors,t=this;return e().call(t,Fe(Fe({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(s){var e=()=>super.deleteVectors,t=this;return e().call(t,Fe(Fe({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},d6=class extends s6{constructor(s,e={},t,n){super(s,e,t,n)}from(s){return new t6(this.url,this.headers,s,this.fetch)}get vectors(){return new l6(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new i6(this.url+"/iceberg",this.headers,this.fetch)}};const t2="2.98.0",zo=30*1e3,rv=3,pg=rv*zo,h6="http://localhost:9999",f6="supabase.auth.token",p6={"X-Client-Info":`gotrue-js/${t2}`},av="X-Supabase-Api-Version",n2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},m6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,g6=600*1e3;class eu extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Me(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class v6 extends eu{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function y6(s){return Me(s)&&s.name==="AuthApiError"}class wa extends eu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class lr extends eu{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class gs extends lr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function mg(s){return Me(s)&&s.name==="AuthSessionMissingError"}class Do extends lr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eh extends lr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class th extends lr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function b6(s){return Me(s)&&s.name==="AuthImplicitGrantRedirectError"}class O1 extends lr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class x6 extends lr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ov extends lr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function gg(s){return Me(s)&&s.name==="AuthRetryableFetchError"}class P1 extends lr{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class lv extends lr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),L1=` 	
\r=`.split(""),w6=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<L1.length;e+=1)s[L1[e].charCodeAt(0)]=-2;for(let e=0;e<kh.length;e+=1)s[kh[e].charCodeAt(0)]=e;return s})();function I1(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(kh[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(kh[n]),e.queuedBits-=6}}function s2(s,e,t){const n=w6[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function B1(s){const e=[],t=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{A6(l,n,t)};for(let l=0;l<s.length;l+=1)s2(s.charCodeAt(l),i,a);return e.join("")}function S6(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function _6(s,e){for(let t=0;t<s.length;t+=1){let n=s.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(s.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}S6(n,e)}}function A6(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let n=1;n<6;n+=1)if((s>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function el(s){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<s.length;i+=1)s2(s.charCodeAt(i),t,n);return new Uint8Array(e)}function E6(s){const e=[];return _6(s,t=>e.push(t)),new Uint8Array(e)}function _a(s){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};return s.forEach(i=>I1(i,t,n)),I1(null,t,n),e.join("")}function C6(s){return Math.round(Date.now()/1e3)+s}function T6(){return Symbol("auth-callback")}const Rn=()=>typeof window<"u"&&typeof document<"u",ma={tested:!1,writable:!1},i2=()=>{if(!Rn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ma.tested)return ma.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),ma.tested=!0,ma.writable=!0}catch{ma.tested=!0,ma.writable=!1}return ma.writable};function N6(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const r2=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),k6=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Fo=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},ga=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},kn=async(s,e)=>{await s.removeItem(e)};class vf{constructor(){this.promise=new vf.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}vf.promiseConstructor=Promise;function nh(s){const e=s.split(".");if(e.length!==3)throw new lv("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!m6.test(e[n]))throw new lv("JWT not in base64url format");return{header:JSON.parse(B1(e[0])),payload:JSON.parse(B1(e[1])),signature:el(e[2]),raw:{header:e[0],payload:e[1]}}}async function j6(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function R6(s,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await s(a);if(!e(a,null,l)){n(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function D6(s){return("0"+s.toString(16)).substr(-2)}function M6(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,D6).join("")}async function O6(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function P6(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await O6(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mo(s,e,t=!1){const n=M6();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await Fo(s,`${e}-code-verifier`,i);const a=await P6(n);return[a,n===a?"plain":"s256"]}const L6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function I6(s){const e=s.headers.get(av);if(!e||!e.match(L6))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function B6(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function z6(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const F6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Oo(s){if(!F6.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vg(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function U6(s,e){return new Proxy(s,{get:(t,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,i)}})}function z1(s){return JSON.parse(JSON.stringify(s))}const va=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),$6=[502,503,504];async function F1(s){var e;if(!k6(s))throw new ov(va(s),0);if($6.includes(s.status))throw new ov(va(s),s.status);let t;try{t=await s.json()}catch(a){throw new wa(va(a),a)}let n;const i=I6(s);if(i&&i.getTime()>=n2["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new P1(va(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new gs}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new P1(va(t),s.status,t.weak_password.reasons);throw new v6(va(t),s.status||500,n)}const H6=(s,e,t,n)=>{const i={method:s,headers:e?.headers||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function Ve(s,e,t,n){var i;const a=Object.assign({},n?.headers);a[av]||(a[av]=n2["2024-01-01"].name),n?.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(l.redirect_to=n.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await V6(s,e,t+c,{headers:a,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(d):{data:Object.assign({},d),error:null}}async function V6(s,e,t,n,i,a){const l=H6(e,n,i,a);let c;try{c=await s(t,Object.assign({},l))}catch(d){throw console.error(d),new ov(va(d),0)}if(c.ok||await F1(c),n?.noResolveJson)return c;try{return await c.json()}catch(d){await F1(d)}}function qs(s){var e;let t=null;W6(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=C6(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function U1(s){const e=qs(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function Ir(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function G6(s){return{data:s,error:null}}function q6(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:a}=s,l=bl(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:a},d=Object.assign({},l);return{data:{properties:c,user:d},error:null}}function $1(s){return s}function W6(s){return s.access_token&&s.refresh_token&&s.expires_in}const yg=["global","local","others"];class Y6{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=r2(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=yg[0]){if(yg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yg.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ir})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=bl(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:q6,redirectTo:t?.redirectTo})}catch(t){if(Me(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ir})}catch(t){if(Me(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,a,l,c,d;try{const f={nextPage:null,lastPage:0,total:0},m=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:$1});if(m.error)throw m.error;const g=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(_=>{const w=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);f[`${E}Page`]=w}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(Me(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Oo(e);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ir})}catch(t){if(Me(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Oo(e);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ir})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Oo(e);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ir})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Oo(e.userId);try{const{data:t,error:n}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Oo(e.userId),Oo(e.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,i,a,l,c,d;try{const f={nextPage:null,lastPage:0,total:0},m=await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:$1});if(m.error)throw m.error;const g=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(_=>{const w=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);f[`${E}Page`]=w}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(Me(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Me(t))return{data:null,error:t};throw t}}}function H1(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}const qi={debug:!!(globalThis&&i2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class a2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class X6 extends a2{}async function K6(s,e,t){qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;e>0&&setTimeout(()=>{n.abort(),qi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve();try{return await globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await t()}finally{qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(e===0)throw qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new X6(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(qi.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}catch(i){if(i?.name==="AbortError"&&e>0)return qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire timeout, recovering by stealing lock",s),console.warn(`@supabase/gotrue-js: Lock "${s}" was not released within ${e}ms. This may indicate an orphaned lock from a component unmount (e.g., React Strict Mode). Forcefully acquiring the lock to recover.`),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,{mode:"exclusive",steal:!0},async a=>{if(a){qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: recovered (stolen)",s,a.name);try{return await t()}finally{qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released (stolen)",s,a.name)}}else return console.warn("@supabase/gotrue-js: Navigator LockManager returned null lock even with steal: true"),await t()}));throw i}}function J6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function o2(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function Q6(s){return parseInt(s,16)}function Z6(s){const e=new TextEncoder().encode(s);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function e8(s){var e;const{chainId:t,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:l,notBefore:c,requestId:d,resources:f,scheme:m,uri:g,version:v}=s;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=s.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const b=o2(s.address),_=m?`${m}://${n}`:n,w=s.statement?`${s.statement}
`:"",E=`${_} wants you to sign in with your Ethereum account:
${b}

${w}`;let A=`URI: ${g}
Version: ${v}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(i&&(A+=`
Expiration Time: ${i.toISOString()}`),c&&(A+=`
Not Before: ${c.toISOString()}`),d&&(A+=`
Request ID: ${d}`),f){let N=`
Resources:`;for(const T of f){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);N+=`
- ${T}`}A+=N}return`${E}
${A}`}class rn extends Error{constructor({message:e,code:t,cause:n,name:i}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class jh extends rn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function t8({error:s,options:e}){var t,n,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new rn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new rn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new rn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new rn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new rn({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return a.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new rn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new rn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const l=window.location.hostname;if(l2(l)){if(a.rp.id!==l)return new rn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new rn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new rn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new rn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new rn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function n8({error:s,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new rn({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const n=window.location.hostname;if(l2(n)){if(t.rpId!==n)return new rn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new rn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new rn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new rn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class s8{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const i8=new s8;function r8(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:e,user:t,excludeCredentials:n}=s,i=bl(s,["challenge","user","excludeCredentials"]),a=el(e).buffer,l=Object.assign(Object.assign({},t),{id:el(t.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:a,user:l});if(n&&n.length>0){c.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const f=n[d];c.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:el(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function a8(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:e,allowCredentials:t}=s,n=bl(s,["challenge","allowCredentials"]),i=el(e).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const c=t[l];a.allowCredentials[l]=Object.assign(Object.assign({},c),{id:el(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function o8(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s;return{id:s.id,rawId:s.id,response:{attestationObject:_a(new Uint8Array(s.response.attestationObject)),clientDataJSON:_a(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function l8(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s,n=s.getClientExtensionResults(),i=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:_a(new Uint8Array(i.authenticatorData)),clientDataJSON:_a(new Uint8Array(i.clientDataJSON)),signature:_a(new Uint8Array(i.signature)),userHandle:i.userHandle?_a(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function l2(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function V1(){var s,e;return!!(Rn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function c8(s){try{const e=await navigator.credentials.create(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new jh("Browser returned unexpected credential type",e)}:{data:null,error:new jh("Empty credential response",e)}}catch(e){return{data:null,error:t8({error:e,options:s})}}}async function u8(s){try{const e=await navigator.credentials.get(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new jh("Browser returned unexpected credential type",e)}:{data:null,error:new jh("Empty credential response",e)}}catch(e){return{data:null,error:n8({error:e,options:s})}}}const d8={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},h8={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Rh(...s){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of s)if(i)for(const a in i){const l=i[a];if(l!==void 0)if(Array.isArray(l))n[a]=l;else if(t(l))n[a]=l;else if(e(l)){const c=n[a];e(c)?n[a]=Rh(c,l):n[a]=Rh(l)}else n[a]=l}return n}function f8(s,e){return Rh(d8,s,e||{})}function p8(s,e){return Rh(h8,s,e||{})}class m8{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:i},a){var l;try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:d};const f=i??i8.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;if(!m.name){const g=n;if(g)m.name=`${m.id}:${g}`;else{const b=(await this.client.getUser()).data.user,_=((l=b?.user_metadata)===null||l===void 0?void 0:l.name)||b?.email||b?.id||"User";m.name=`${m.id}:${_}`}}m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=f8(c.webauthn.credential_options.publicKey,a?.create),{data:g,error:v}=await c8({publicKey:m,signal:f});return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}case"request":{const m=p8(c.webauthn.credential_options.publicKey,a?.request),{data:g,error:v}=await u8(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:f}));return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}}}catch(c){return Me(c)?{data:null,error:c}:{data:null,error:new wa("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!t)return{data:null,error:new eu("rpId is required for WebAuthn authentication")};try{if(!V1())return{data:null,error:new wa("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:i},{request:a});if(!l)return{data:null,error:c};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:t,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return Me(l)?{data:null,error:l}:{data:null,error:new wa("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!t)return{data:null,error:new eu("rpId is required for WebAuthn registration")};try{if(!V1())return{data:null,error:new wa("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:c};const{data:d,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:i},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:t,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(l){return Me(l)?{data:null,error:l}:{data:null,error:new wa("Unexpected error in register",l)}}}}J6();const g8={url:h6,storageKey:f6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:p6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:5e3,skipAutoInitialize:!1};async function G1(s,e,t){return await t()}const Po={};class tu{get jwks(){var e,t;return(t=(e=Po[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Po[this.storageKey]=Object.assign(Object.assign({},Po[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Po[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Po[this.storageKey]=Object.assign(Object.assign({},Po[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},g8),e);if(this.storageKey=a.storageKey,this.instanceID=(t=tu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,tu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Rn()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Y6({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=r2(a.fetch),this.lock=a.lock||G1,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Rn()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=K6:this.lock=G1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new m8(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:i2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=H1(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=H1(this.memoryStorage)),Rn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}a.skipAutoInitialize||this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${t2}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(Rn()&&(t=N6(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Rn()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),b6(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:l,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Me(t)?this._returnResult({error:t}):this._returnResult({error:new wa("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:qs}),{data:l,error:c}=a;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(Me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,n,i;try{let a;if("email"in e){const{email:m,password:g,options:v}=e;let b=null,_=null;this.flowType==="pkce"&&([b,_]=await Mo(this.storage,this.storageKey)),a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:m,password:g,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:_},xform:qs})}else if("phone"in e){const{phone:m,password:g,options:v}=e;a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(n=v?.data)!==null&&n!==void 0?n:{},channel:(i=v?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:qs})}else throw new eh("You must provide either an email or phone number and a password");const{data:l,error:c}=a;if(c||!l)return await kn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(await kn(this.storage,`${this.storageKey}-code-verifier`),Me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:l,options:c}=e;t=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:U1})}else if("phone"in e){const{phone:a,password:l,options:c}=e;t=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:U1})}else throw new eh("You must provide either an email or phone number and a password");const{data:n,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new Do;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(Me(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,i,a,l,c,d,f,m,g,v;let b,_;if("message"in e)b=e.message,_=e.signature;else{const{chain:w,wallet:E,statement:A,options:N}=e;let T;if(Rn())if(typeof E=="object")T=E;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")T=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=E}const j=new URL((t=N?.url)!==null&&t!==void 0?t:window.location.href),P=await T.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=o2(P[0]);let M=(n=N?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const F=await T.request({method:"eth_chainId"});M=Q6(F)}const I={domain:j.host,address:L,statement:A,uri:j.href,version:"1",chainId:M,nonce:(i=N?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(a=N?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=N?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=N?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=N?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(m=N?.signInWithEthereum)===null||m===void 0?void 0:m.resources};b=e8(I),_=await T.request({method:"personal_sign",params:[Z6(b),L]})}try{const{data:w,error:E}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:_},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:qs});if(E)throw E;if(!w||!w.session||!w.user){const A=new Do;return this._returnResult({data:{user:null,session:null},error:A})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:E})}catch(w){if(Me(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var t,n,i,a,l,c,d,f,m,g,v,b;let _,w;if("message"in e)_=e.message,w=e.signature;else{const{chain:E,wallet:A,statement:N,options:T}=e;let j;if(Rn())if(typeof A=="object")j=A;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))j=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=A}const P=new URL((t=T?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in j&&j.signIn){const L=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),N?{statement:N}:null));let M;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")M=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)M=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)_=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),w=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${P.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(i=(n=T?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=T?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((d=T?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((f=T?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((g=(m=T?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...T.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const L=await j.signMessage(new TextEncoder().encode(_),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=L}}try{const{data:E,error:A}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:_a(w)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:qs});if(A)throw A;if(!E||!E.session||!E.user){const N=new Do;return this._returnResult({data:{user:null,session:null},error:N})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:A})}catch(E){if(Me(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const t=await ga(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{if(!n&&this.flowType==="pkce")throw new x6;const{data:a,error:l}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:qs});if(await kn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const c=new Do;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(await kn(this.storage,`${this.storageKey}-code-verifier`),Me(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:a,nonce:l}=e,c=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:qs}),{data:d,error:f}=c;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const m=new Do;return this._returnResult({data:{user:null,session:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(t){if(Me(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,i,a,l;try{if("email"in e){const{email:c,options:d}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Mo(this.storage,this.storageKey));const{error:g}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=d?.data)!==null&&t!==void 0?t:{},create_user:(n=d?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in e){const{phone:c,options:d}=e,{data:f,error:m}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:m})}throw new eh("You must provide either an email or phone number.")}catch(c){if(await kn(this.storage,`${this.storageKey}-code-verifier`),Me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var t,n;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:c}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:qs});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(i){if(Me(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,n,i,a,l;try{let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Mo(this.storage,this.storageKey));const f=await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:G6});return!((a=f.data)===null||a===void 0)&&a.url&&Rn()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(c){if(await kn(this.storage,`${this.storageKey}-code-verifier`),Me(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new gs;const{error:i}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Me(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:l}=await Ve(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:l,error:c}=await Ve(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:c})}throw new eh("You must provide either an email or phone number and a type")}catch(t){if(Me(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ga(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<pg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await ga(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=vg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=U6(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ir}):await this._useSession(async t=>{var n,i,a;const{data:l,error:c}=t;if(c)throw c;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gs}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Ir})})}catch(t){if(Me(t))return mg(t)&&(await this._removeSession(),await kn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new gs;const l=i.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await Mo(this.storage,this.storageKey));const{data:f,error:m}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:l.access_token,xform:Ir});if(m)throw m;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(await kn(this.storage,`${this.storageKey}-code-verifier`),Me(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new gs;const t=Date.now()/1e3;let n=t,i=!0,a=null;const{payload:l}=nh(e.access_token);if(l.exp&&(n=l.exp,i=n<=t),i){const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(Me(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:l,error:c}=t;if(c)throw c;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new gs;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Me(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Rn())throw new th("No browser detected.");if(e.error||e.error_description||e.error_code)throw new th(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new O1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new th("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new O1("No code detected.");const{data:N,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:c,expires_at:d,token_type:f}=e;if(!a||!c||!l||!f)throw new th("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(c);let v=m+g;d&&(v=parseInt(d));const b=v-m;b*1e3<=zo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const _=v-g;m-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,m):m-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,m);const{data:w,error:E}=await this._getUser(a);if(E)throw E;const A={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:g,expires_at:v,refresh_token:l,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:e.type},error:null})}catch(n){if(Me(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ga(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:a}=t;if(a&&!mg(a))return this._returnResult({error:a});const l=(n=i.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(y6(c)&&(c.status===404||c.status===401||c.status===403)||mg(c)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await kn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=T6(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:a},error:l}=t;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Mo(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await kn(this.storage,`${this.storageKey}-code-verifier`),Me(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(Me(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:i}=await this._useSession(async a=>{var l,c,d,f,m;const{data:g,error:v}=a;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return Rn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(Me(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:i,data:{session:a}}=t;if(i)throw i;const{options:l,provider:c,token:d,access_token:f,nonce:m}=e,g=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:c,id_token:d,access_token:f,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:qs}),{data:v,error:b}=g;return b?this._returnResult({data:{user:null,session:null},error:b}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Do}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:b}))}catch(i){if(await kn(this.storage,`${this.storageKey}-code-verifier`),Me(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:a,error:l}=t;if(l)throw l;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Me(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await R6(async i=>(i>0&&await j6(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qs})),(i,a)=>{const l=200*Math.pow(2,i);return a&&gg(a)&&Date.now()+l-n<zo})}catch(n){if(this._debug(t,"error",n),Me(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Rn()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await ga(this.storage,this.storageKey);if(i&&this.userStorage){let l=await ga(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Fo(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:vg()}else if(i&&!i.user&&!i.user){const l=await ga(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await kn(this.storage,this.storageKey+"-user"),await Fo(this.storage,this.storageKey,i)):i.user=vg()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<pg;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${pg}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),gg(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(i.access_token);!c&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new gs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new vf;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new gs;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),Me(a)){const l={data:null,error:a};return gg(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await kn(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await Fo(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const a=z1(i);await Fo(this.storage,this.storageKey,a)}else{const i=z1(t);await Fo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await kn(this.storage,this.storageKey),await kn(this.storage,this.storageKey+"-code-verifier"),await kn(this.storage,this.storageKey+"-user"),this.userStorage&&await kn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),zo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/zo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${zo}ms, refresh threshold is ${rv} ticks`),i<=rv&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof a2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Mo(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(c.toString())}if(n?.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:a}=t;return a?this._returnResult({data:null,error:a}):await Ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Me(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&d.type==="totp"&&(!((i=d?.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(t){if(Me(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:a}=t;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?o8(e.webauthn.credential_response):l8(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:d}=await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:d}))})}catch(t){if(Me(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:a}=t;if(a)return this._returnResult({data:null,error:a});const l=await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:r8(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:a8(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Me(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,n,i,a;if(e)try{const{payload:b}=nh(e);let _=null;b.aal&&(_=b.aal);let w=_;const{data:{user:E},error:A}=await this.getUser(e);if(A)return this._returnResult({data:null,error:A});((n=(t=E?.factors)===null||t===void 0?void 0:t.filter(j=>j.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(w="aal2");const T=b.amr||[];return{data:{currentLevel:_,nextLevel:w,currentAuthenticationMethods:T},error:null}}catch(b){if(Me(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:l},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=nh(l.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((a=(i=l.user.factors)===null||i===void 0?void 0:i.filter(b=>b.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(m="aal2");const v=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await Ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new gs})})}catch(t){if(Me(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new gs});const l=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Rn()&&!t?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Me(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new gs});const l=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Rn()&&!t?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Me(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await Ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new gs})})}catch(e){if(Me(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?(await Ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new gs})})}catch(t){if(Me(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(c=>c.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(c=>c.kid===e),n&&this.jwks_cached_at+g6>i)return n;const{data:a,error:l}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(c=>c.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:b,error:_}=await this.getSession();if(_||!b.session)return this._returnResult({data:null,error:_});n=b.session.access_token}const{header:i,payload:a,signature:l,raw:{header:c,payload:d}}=nh(n);t?.allowExpired||B6(a.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!f){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:a,header:i,signature:l},error:null}}const m=z6(i.alg),g=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,l,E6(`${c}.${d}`)))throw new lv("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(n){if(Me(n))return this._returnResult({data:null,error:n});throw n}}}tu.nextInstanceID={};const v8=tu,y8="2.98.0";let Rc="";typeof Deno<"u"?Rc="deno":typeof document<"u"?Rc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rc="react-native":Rc="node";const b8={"X-Client-Info":`supabase-js-${Rc}/${y8}`},x8={headers:b8},w8={schema:"public"},S8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_8={};function nu(s){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nu(s)}function A8(s,e){if(nu(s)!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function E8(s){var e=A8(s,"string");return nu(e)=="symbol"?e:e+""}function C8(s,e,t){return(e=E8(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function q1(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),t.push.apply(t,n)}return t}function Vt(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?q1(Object(t),!0).forEach(function(n){C8(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):q1(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}const T8=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),N8=()=>Headers,k8=(s,e,t)=>{const n=T8(t),i=N8();return async(a,l)=>{var c;const d=(c=await e())!==null&&c!==void 0?c:s;let f=new i(l?.headers);return f.has("apikey")||f.set("apikey",s),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),n(a,Vt(Vt({},l),{},{headers:f}))}};function j8(s){return s.endsWith("/")?s:s+"/"}function R8(s,e){var t,n;const{db:i,auth:a,realtime:l,global:c}=s,{db:d,auth:f,realtime:m,global:g}=e,v={db:Vt(Vt({},d),i),auth:Vt(Vt({},f),a),realtime:Vt(Vt({},m),l),storage:{},global:Vt(Vt(Vt({},g),c),{},{headers:Vt(Vt({},(t=g?.headers)!==null&&t!==void 0?t:{}),(n=c?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return s.accessToken?v.accessToken=s.accessToken:delete v.accessToken,v}function D8(s){const e=s?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(j8(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var M8=class extends v8{constructor(s){super(s)}},O8=class{constructor(s,e,t){var n,i;this.supabaseUrl=s,this.supabaseKey=e;const a=D8(s);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:w8,realtime:_8,auth:Vt(Vt({},S8),{},{storageKey:l}),global:x8},d=R8(t??{},c);if(this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=d.auth)!==null&&f!==void 0?f:{},this.headers,d.global.fetch)}this.fetch=k8(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Vt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new yU(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch,timeout:d.db.timeout,urlLengthLimit:d.db.urlLengthLimit}),this.storage=new d6(this.storageUrl.href,this.headers,this.fetch,t?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new uU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,e,t)}channel(s,e={config:{}}){return this.realtime.channel(s,e)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,e,t;if(s.accessToken)return await s.accessToken();const{data:n}=await s.auth.getSession();return(e=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:i,storageKey:a,flowType:l,lock:c,debug:d,throwOnError:f},m,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M8({url:this.authUrl.href,headers:Vt(Vt({},v),m),storageKey:a,autoRefreshToken:s,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:i,flowType:l,lock:c,debug:d,throwOnError:f,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new PU(this.realtimeUrl.href,Vt(Vt({},s),{},{params:Vt(Vt({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,e)=>{this._handleTokenChanged(s,"CLIENT",e?.access_token)})}_handleTokenChanged(s,e,t){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const P8=(s,e,t)=>new O8(s,e,t);function L8(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const e=s.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}L8()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const I8="https://eppgffcwmqawegngstqq.supabase.co",B8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwcGdmZmN3bWdhd2VnbmdzdHFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIyNDUzNDIsImV4cCI6MjA4NzgyMTM0Mn0.Wdtc_a9hcd6yKgHYWEtnGeXW_3lhcraNYy3XCHgB4NU",Wi=P8(I8,B8),z8=2*1024*1024*1024,sh=2*1024*1024*1024;function ya(s){if(s===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,n)).toFixed(2))+" "+t[n]}function F8(s){return ya(s)+"/s"}function U8(){const[s,e]=S.useState(null),[t,n]=S.useState([]),[i,a]=S.useState(()=>({user:localStorage.getItem("githubUser")||"",token:localStorage.getItem("githubToken")||"",repo:localStorage.getItem("repoName")||""})),[l,c]=S.useState(!1),[d,f]=S.useState(null),[m,g]=S.useState(""),[v,b]=S.useState(null),_=S.useRef(null),w=S.useRef(0),E=S.useCallback(async X=>{try{const{data:H,error:ie}=await Wi.from("files").select("*").eq("user_id",X).order("created_at",{ascending:!1});if(ie)throw ie;n(H||[])}catch(H){console.error(":",H),g(" "+H.message)}},[]);S.useEffect(()=>{A();const{data:{subscription:X}}=Wi.auth.onAuthStateChange((H,ie)=>{const R=ie?.user??null;e(R),R&&setTimeout(()=>E(R.id),0)});return()=>X.unsubscribe()},[E]);async function A(){try{const{data:{user:X},error:H}=await Wi.auth.getUser();if(H)throw H;e(X),X&&E(X.id)}catch(X){console.error(":",X),g(" "+X.message)}}async function N(){const X=prompt("")?.trim(),H=prompt("")?.trim();if(!X||!H){g(" ");return}g("...");try{const{data:ie,error:R}=await Wi.auth.signInWithPassword({email:X,password:H});if(R)if(R.message.includes("Invalid login")){const{data:$,error:U}=await Wi.auth.signUp({email:X,password:H,options:{data:{email_confirmed:!0}}});U?g(" "+U.message):(e($.user),g(" "))}else g(" "+R.message);else e(ie.user),g(" ")}catch(ie){g(" "+ie.message)}}async function T(){await Wi.auth.signOut(),e(null),n([]),g(" ")}function j(){const X=prompt("GitHub",i.user)?.trim(),H=prompt("GitHub Tokenghp_  github_pat_ ",i.token)?.trim(),ie=prompt("",i.repo)?.trim();if(!X||!H||!ie){g(" ");return}if(!H.startsWith("ghp_")&&!H.startsWith("github_pat_")){g(" Token");return}localStorage.setItem("githubUser",X),localStorage.setItem("githubToken",H),localStorage.setItem("repoName",ie),a({user:X,token:H,repo:ie}),g(" GitHub"),setTimeout(()=>g(""),3e3)}async function P(X,H,ie,R,$){return new Promise((U,z)=>{const le=new XMLHttpRequest;le.upload.addEventListener("progress",k=>{if(k.lengthComputable){const B=(Date.now()-w.current)/1e3,q=B>0?k.loaded/B:0,J=k.loaded>0?(k.total-k.loaded)/q:0;R({loaded:k.loaded,total:k.total,percentage:Math.round(k.loaded/k.total*100),speed:F8(q),timeLeft:J>60?`${Math.round(J/60)}`:`${Math.round(J)}`})}}),le.addEventListener("load",()=>{if(le.status>=200&&le.status<300)try{U(JSON.parse(le.responseText))}catch{U(le.responseText)}else try{const k=JSON.parse(le.responseText);z(new Error(k.message||`HTTP ${le.status}`))}catch{z(new Error(`: ${le.status}`))}}),le.addEventListener("error",()=>z(new Error(""))),le.addEventListener("abort",()=>z(new Error(""))),$.addEventListener("abort",()=>le.abort()),le.open("POST",X),Object.entries(ie).forEach(([k,O])=>{le.setRequestHeader(k,O)}),w.current=Date.now(),le.send(H)})}async function L(X){const H=X.target.files?.[0];if(!H||!s){g("");return}if(!i.user||!i.token||!i.repo){g("  GitHub ");return}if(H.size>z8)if(confirm(` ${ya(H.size)} GitHub Releases  2GB 

 <2GB `)){await I(H),X.target.value="";return}else{g("  2GB");return}await M(H),X.target.value=""}async function M(X){c(!0),f({loaded:0,total:X.size,percentage:0,speed:"0 KB/s",timeLeft:"..."}),g("...");const H=new AbortController;b(H);try{const R=`files-${new Date().toISOString().split("T")[0]}`,$=await F(R);if(!$)throw new Error(" Release ID");const U=`https://uploads.github.com/repos/${i.user}/${i.repo}/releases/${$}/assets?name=${encodeURIComponent(X.name)}`;g("...");const z=await P(U,X,{Authorization:`Bearer ${i.token}`,"Content-Type":X.type||"application/octet-stream",Accept:"application/vnd.github.v3+json","X-GitHub-Api-Version":"2022-11-28"},k=>f(k),H.signal),{error:le}=await Wi.from("files").insert({user_id:s.id,name:X.name,url:z.browser_download_url,size:X.size,type:X.name.split(".").pop()?.toLowerCase()||"unknown",created_at:new Date().toISOString(),is_chunked:!1});if(le)throw le;await E(s.id),g(` ${ya(X.size)}`),setTimeout(()=>g(""),5e3)}catch(ie){ie.message===""?g(" "):(console.error(":",ie),g(" "+ie.message))}finally{c(!1),f(null),b(null)}}async function I(X){const H=Math.ceil(X.size/sh);c(!0),g(` ${H} ...`);try{const R=`files-${new Date().toISOString().split("T")[0]}`,$=await F(R);if(!$)throw new Error(" Release ID");const U=[];for(let z=0;z<H;z++){const le=z*sh,k=Math.min(le+sh,X.size),O=X.slice(le,k),B=`${X.name}.part${z+1}`;g(` ${z+1}/${H} (${ya(O.size)})...`),f({loaded:0,total:O.size,percentage:0,speed:"0 KB/s",timeLeft:"..."});const q=new AbortController;b(q);const J=`https://uploads.github.com/repos/${i.user}/${i.repo}/releases/${$}/assets?name=${encodeURIComponent(B)}`,ue=await P(J,O,{Authorization:`Bearer ${i.token}`,"Content-Type":"application/octet-stream",Accept:"application/vnd.github.v3+json","X-GitHub-Api-Version":"2022-11-28"},ee=>f({...ee,percentage:Math.round((z*sh+ee.loaded)/X.size*100)}),q.signal);U.push(ue.browser_download_url),await Wi.from("files").insert({user_id:s.id,name:B,url:ue.browser_download_url,size:O.size,type:"part",created_at:new Date().toISOString(),is_chunked:!0,total_chunks:H,chunk_index:z+1,original_name:X.name})}await E(s.id),g(` ${X.name}  ${H} `),setTimeout(()=>g(""),5e3)}catch(ie){console.error(":",ie),g(" "+ie.message)}finally{c(!1),f(null),b(null)}}async function F(X){const H=`https://api.github.com/repos/${i.user}/${i.repo}/releases/tags/${X}`,ie=await fetch(H,{headers:{Authorization:`Bearer ${i.token}`,Accept:"application/vnd.github.v3+json","X-GitHub-Api-Version":"2022-11-28"}});if(ie.ok)return(await ie.json()).id;if(ie.status===404){const R=await fetch(`https://api.github.com/repos/${i.user}/${i.repo}/releases`,{method:"POST",headers:{Authorization:`Bearer ${i.token}`,"Content-Type":"application/json",Accept:"application/vnd.github.v3+json","X-GitHub-Api-Version":"2022-11-28"},body:JSON.stringify({tag_name:X,name:` ${X}`,body:"",draft:!1,prerelease:!1})});if(!R.ok){const U=await R.json();throw new Error(U.message||` Release : ${R.status}`)}return(await R.json()).id}else throw new Error(` Release : ${ie.status}`)}function G(){v&&(v.abort(),b(null))}async function K(X,H){if(confirm(` "${H}"
GitHub Release `))try{const{error:ie}=await Wi.from("files").delete().eq("id",X);if(ie)throw ie;s&&E(s.id),g(" ")}catch(ie){g(" "+ie.message)}}const ae=i.user&&i.token&&i.repo;return h.jsxs("div",{className:"space-y-4 p-2 max-w-2xl mx-auto",children:[h.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[h.jsx("h4",{className:"font-semibold text-amber-900 mb-2",children:"  GitHub"}),ae?h.jsxs("div",{className:"space-y-2",children:[h.jsxs("p",{className:"text-sm text-amber-800",children:["",h.jsx("span",{className:"font-bold text-green-600",children:""})," (",i.user,"/",i.repo,")"]}),h.jsx("button",{onClick:j,className:"text-xs text-amber-700 underline hover:text-amber-900",children:""})]}):h.jsxs("div",{className:"space-y-2",children:[h.jsxs("p",{className:"text-sm text-amber-800",children:["",h.jsx("span",{className:"font-bold text-red-600",children:""})]}),h.jsx("button",{onClick:j,className:"w-full py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-medium transition-colors",children:" GitHub"})]})]}),h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[h.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" "}),s?h.jsxs("div",{className:"space-y-2",children:[h.jsxs("p",{className:"text-sm text-blue-800",children:["",h.jsx("span",{className:"font-bold",children:s.email})]}),h.jsx("button",{onClick:T,className:"text-xs text-blue-700 underline hover:text-blue-900",children:""})]}):h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-sm text-blue-800",children:""}),h.jsx("button",{onClick:N,className:"w-full py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors",children:" / "})]})]}),m&&h.jsx("div",{className:`text-sm p-3 rounded-lg text-center border ${m.startsWith("")?"bg-green-100 text-green-800 border-green-200":m.startsWith("")?"bg-red-100 text-red-800 border-red-200":m.startsWith("")?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-blue-100 text-blue-800 border-blue-200"}`,children:m}),s&&h.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[h.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"  2GB"}),h.jsx("input",{ref:_,type:"file",onChange:L,disabled:l,className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600 disabled:opacity-50 cursor-pointer mb-3"}),!ae&&h.jsx("p",{className:"text-xs text-red-500",children:"  GitHub "}),h.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"  2GB"}),l&&d&&h.jsxs("div",{className:"mt-4 space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[h.jsxs("span",{children:[d.percentage,"% (",ya(d.loaded)," / ",ya(d.total),")"]}),h.jsxs("span",{children:[d.speed,"   ",d.timeLeft]})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:h.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${d.percentage}%`}})}),h.jsx("button",{onClick:G,className:"w-full py-1.5 bg-red-100 text-red-700 rounded text-xs font-medium hover:bg-red-200 transition-colors",children:""})]})]}),s&&h.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("h4",{className:"font-semibold text-gray-900",children:["  (",t.length,")"]}),h.jsx("button",{onClick:()=>E(s.id),className:"text-xs text-blue-600 hover:text-blue-800 hover:underline",children:""})]}),h.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:t.length===0?h.jsxs("div",{className:"text-center py-8 text-gray-400",children:[h.jsx("p",{className:"text-sm",children:""}),h.jsx("p",{className:"text-xs mt-1",children:" 2GB "})]}):t.map(X=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg text-sm hover:bg-gray-100 transition-colors border border-gray-100",children:[h.jsxs("div",{className:"flex-1 min-w-0 mr-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("p",{className:"truncate font-medium text-gray-900",title:X.name,children:X.is_chunked?` ${X.original_name} ( ${X.chunk_index}/${X.total_chunks})`:X.name}),X.is_chunked&&h.jsx("span",{className:"px-1.5 py-0.5 bg-yellow-100 text-yellow-700 text-[10px] rounded",children:"PART"})]}),h.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ya(X.size),"  ",new Date(X.created_at).toLocaleDateString()]})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("a",{href:X.url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-md text-xs font-medium hover:bg-blue-200 transition-colors whitespace-nowrap",children:""}),h.jsx("button",{onClick:()=>K(X.id,X.name),className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-md text-xs font-medium hover:bg-red-200 transition-colors",children:""})]})]},X.id))}),t.some(X=>X.is_chunked)&&h.jsx("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800",children:" Windows: copy /b file.part1 + file.part2 file.ext"})]})]})}var $8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],H8=$8.reduce((s,e)=>{const t=Lh(`Primitive.${e}`),n=S.forwardRef((i,a)=>{const{asChild:l,...c}=i,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(d,{...c,ref:a})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{}),V8="Separator",W1="horizontal",G8=["horizontal","vertical"],c2=S.forwardRef((s,e)=>{const{decorative:t,orientation:n=W1,...i}=s,a=q8(n)?n:W1,c=t?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return h.jsx(H8.div,{"data-orientation":a,...c,...i,ref:e})});c2.displayName=V8;function q8(s){return G8.includes(s)}var W8=c2;function Y1({className:s,orientation:e="horizontal",decorative:t=!0,...n}){return h.jsx(W8,{"data-slot":"separator",decorative:t,orientation:e,className:Oe("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...n})}const Y8=[{id:"schedule",label:"",icon:nl},{id:"coding",label:"",icon:M_},{id:"library",label:"",icon:L_},{id:"projects",label:"",icon:O_}];function X8(){const{categories:s,projects:e,notes:t,isLoaded:n,addBook:i,updateBook:a,deleteBook:l,getBook:c,filterBooks:d,uploadFile:f,downloadFile:m,deleteBookFile:g,addPDFAnnotation:v,updatePDFAnnotation:b,deletePDFAnnotation:_,getBookPDFAnnotations:w,addProject:E,deleteProject:A,addProjectKnowledge:N,addProjectLesson:T,addProjectFile:j,deleteProjectFile:P,downloadProjectFile:L,addNote:M,updateNote:I,deleteNote:F,toggleNoteComplete:G,addCategory:K,deleteCategory:ae,getAllTags:X,getStats:H,exportData:ie,importData:R}=FM(),[$,U]=S.useState(null),[z,le]=S.useState(!1),[k,O]=S.useState({}),[B,q]=S.useState("schedule"),[J,ue]=S.useState(!1),[ee,Y]=S.useState(null),[oe,ge]=S.useState(null),[xe,be]=S.useState(!1),[Ge,Ie]=S.useState(!1),[te,Se]=S.useState(""),$e=$?c($):null,Re=oe?c(oe):null,ht=d(k),un=X(),Nt=H();S.useEffect(()=>()=>{ee&&URL.revokeObjectURL(ee)},[ee]);const wt=Q=>{U(Q.id)},Ut=()=>{U(null)},kt=Q=>{O(fe=>({...fe,searchQuery:Q}))},Fs=Q=>{O(fe=>({...fe,...Q}))},Fn=async(Q,fe)=>{if(fe.size>104857600){Ae.error("100MB");return}await f(Q,fe),Ae.success("")},ri=async Q=>{const fe=c(Q);if(!fe?.fileId){Ae.error("");return}try{const ve=await m(fe.fileId);if(ve){ee&&URL.revokeObjectURL(ee);const Ee=new Blob([ve.data],{type:ve.type}),We=URL.createObjectURL(Ee);Y(We),ge(Q),ue(!0)}else Ae.error("")}catch{Ae.error("")}},ls=async Q=>{const fe=c(Q);if(!fe?.fileId){Ae.error("");return}try{const ve=await m(fe.fileId);if(ve){const We=new TextDecoder("utf-8").decode(ve.data);Se(We),ge(Q),Ie(!0)}else Ae.error("")}catch{Ae.error("")}},an=async(Q,fe)=>{try{const ve=await fe.arrayBuffer(),Ee=new Blob([ve],{type:fe.type}),We=URL.createObjectURL(Ee);return a(Q,{coverUrl:We}),Promise.resolve()}catch(ve){return Ae.error(""),Promise.reject(ve)}},Gt=Q=>{Re?.id&&v({...Q,bookId:Re.id,type:Q.type||"highlight"})},Sn=Q=>{if(ee&&Re?.fileName){const fe=document.createElement("a");if(fe.href=ee,fe.download=Re.fileName,fe.click(),Q){const ve=w(Re.id);if(ve.length>0){const Ee=ve.sort((Lt,_n)=>Lt.page-_n.page||new Date(Lt.createdAt).getTime()-new Date(_n.createdAt).getTime()).map((Lt,_n)=>`[${_n+1}] ${Lt.page}
${Lt.content}
: ${new Date(Lt.createdAt).toLocaleString()}
`).join(`
---

`),We=`${Re.title}
: ${Re.author}
: ${new Date().toLocaleString()}
 ${ve.length} 

==================

${Ee}`,ct=new Blob([We],{type:"text/plain;charset=utf-8"}),Pt=URL.createObjectURL(ct),jt=document.createElement("a");jt.href=Pt,jt.download=`${Re.title}_.txt`,jt.click(),URL.revokeObjectURL(Pt)}}Ae.success("")}},Pn=()=>{const Q=ie(),fe=new Blob([Q],{type:"application/json"}),ve=URL.createObjectURL(fe),Ee=document.createElement("a");Ee.href=ve,Ee.download=`knowledge-library-backup-${new Date().toISOString().split("T")[0]}.json`,Ee.click(),URL.revokeObjectURL(ve),Ae.success("")},Us=Q=>R(Q)?(Ae.success(""),!0):(Ae.error(""),!1);return n?h.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[h.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:h.jsxs("div",{className:"container mx-auto max-w-6xl px-4 flex h-14 items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(yl,{className:"h-6 w-6 text-primary"}),h.jsx("h1",{className:"text-lg font-semibold",children:""}),h.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"v1.4.0"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(me,{variant:"ghost",size:"icon",onClick:()=>q("stats"),className:B==="stats"?"text-primary":"",title:"",children:h.jsx(mR,{className:"h-5 w-5"})}),h.jsx(oU,{}),h.jsx(me,{variant:"ghost",size:"icon",onClick:()=>be(!0),className:xe?"text-primary":"",children:h.jsx(gv,{className:"h-5 w-5"})})]})]})}),h.jsxs("main",{className:"flex-1 container mx-auto max-w-6xl px-4 py-6 pb-28",children:[h.jsxs(pv,{value:B,onValueChange:q,className:"w-full",children:[h.jsx(Js,{value:"schedule",className:"mt-0",children:h.jsx(OF,{notes:t,onAddNote:M,onUpdateNote:I,onDeleteNote:F,onToggleComplete:G})}),h.jsx(Js,{value:"coding",className:"mt-0",children:h.jsx(iU,{})}),h.jsx(Js,{value:"library",className:"mt-0",children:$e?h.jsx(d4,{book:$e,categories:s,onBack:Ut,onUpdate:a,onDelete:Q=>{l(Q),Ut(),Ae.success("")},onAddAnnotation:(Q,fe,ve)=>{const Ee=c(Q);Ee&&(a(Q,{annotations:[...Ee.annotations,{id:K8(),content:fe,page:ve,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]}),Ae.success(""))},onUpdateAnnotation:(Q,fe,ve)=>{const Ee=c(Q);Ee&&(a(Q,{annotations:Ee.annotations.map(We=>We.id===fe?{...We,content:ve,updatedAt:new Date().toISOString()}:We)}),Ae.success(""))},onDeleteAnnotation:(Q,fe)=>{const ve=c(Q);ve&&(a(Q,{annotations:ve.annotations.filter(Ee=>Ee.id!==fe)}),Ae.success(""))},onUploadFile:Fn,onDeleteFile:g,onReadPDF:()=>ri($e.id),onReadText:()=>ls($e.id),hasFile:!!$e.fileId,onUploadCover:an}):h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"max-w-2xl mx-auto w-full",children:h.jsx(iB,{value:k.searchQuery||"",onChange:kt,placeholder:"..."})}),ht.length===0?h.jsxs("div",{className:"text-center py-16 space-y-4 max-w-md mx-auto",children:[h.jsx(L_,{className:"mx-auto h-12 w-12 text-muted-foreground"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:""}),h.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}):h.jsx(s4,{books:ht,categories:s,filter:k,onFilterChange:Fs,onBookClick:wt,allTags:un,onEditBook:Q=>U(Q.id),onDeleteBook:Q=>{l(Q),Ae.success("")}})]})}),h.jsx(Js,{value:"projects",className:"mt-0",children:h.jsx(NF,{projects:e,onAddProject:E,onDeleteProject:A,onAddKnowledge:N,onAddLesson:T,onAddFile:j,onDeleteFile:P,onDownloadFile:L})}),h.jsx(Js,{value:"stats",className:"mt-0",children:h.jsx(C4,{stats:Nt})})]}),B==="library"&&!$e&&h.jsx("button",{onClick:()=>le(!0),className:"fixed bottom-20 right-6 z-40 w-12 h-12 rounded-full bg-primary text-primary-foreground shadow-lg hover:shadow-xl hover:bg-primary/90 transition-all duration-200 flex items-center justify-center","aria-label":"",children:h.jsx(Bc,{className:"h-6 w-6"})})]}),h.jsx("nav",{className:"fixed bottom-0 left-0 right-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 z-50",children:h.jsx("div",{className:"container mx-auto max-w-6xl px-4",children:h.jsx("div",{className:"flex justify-around h-16 items-center",children:Y8.map(Q=>{const fe=Q.icon,ve=B===Q.id;return h.jsxs("button",{onClick:()=>{q(Q.id),Ut()},className:`flex flex-col items-center gap-1 px-2 py-2 transition-colors duration-200 ${ve?"text-primary":"text-muted-foreground"}`,children:[h.jsx(fe,{className:"h-5 w-5"}),h.jsx("span",{className:"text-xs font-medium leading-none",children:Q.label}),ve&&h.jsx("div",{className:"absolute bottom-1 w-6 h-0.5 bg-primary rounded-full"})]},Q.id)})})})}),h.jsx(vn,{open:xe,onOpenChange:be,children:h.jsxs(yn,{className:"max-w-2xl max-h-[85vh] p-0 gap-0 overflow-hidden",children:[h.jsx(bn,{className:"px-6 py-4 border-b bg-muted/30 shrink-0",children:h.jsxs(xn,{className:"flex items-center gap-2 text-lg",children:[h.jsx(Iw,{className:"h-5 w-5 text-primary"}),""]})}),h.jsx(Xg,{className:"h-[calc(85vh-4rem)] overflow-y-auto scrollbar-hide",children:h.jsxs("div",{className:"p-6 space-y-8",children:[h.jsxs("section",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:h.jsx(RR,{className:"h-5 w-5 text-blue-600 dark:text-blue-300"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg",children:""}),h.jsx("p",{className:"text-sm text-muted-foreground",children:" GitHub "})]})]}),h.jsx("div",{className:"bg-card border rounded-2xl p-1 shadow-sm",children:h.jsx(U8,{})})]}),h.jsx(Y1,{}),h.jsxs("section",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:h.jsx(PR,{className:"h-5 w-5 text-green-600 dark:text-green-300"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg",children:""}),h.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("button",{onClick:Pn,className:"flex items-center justify-between p-4 rounded-xl border bg-card hover:bg-accent transition-colors text-left group",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-muted rounded-lg group-hover:bg-background transition-colors",children:h.jsx(Ic,{className:"h-4 w-4"})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:""}),h.jsx("div",{className:"text-sm text-muted-foreground",children:" JSON "})]})]}),h.jsx(Ta,{className:"h-5 w-5 text-muted-foreground"})]}),h.jsxs("label",{className:"cursor-pointer block",children:[h.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:Q=>{const fe=Q.target.files?.[0];if(fe){const ve=new FileReader;ve.onload=Ee=>{Us(Ee.target?.result)},ve.readAsText(fe)}}}),h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border bg-card hover:bg-accent transition-colors text-left group",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-muted rounded-lg group-hover:bg-background transition-colors",children:h.jsx(YR,{className:"h-4 w-4"})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:""}),h.jsx("div",{className:"text-sm text-muted-foreground",children:""})]})]}),h.jsx(Ta,{className:"h-5 w-5 text-muted-foreground"})]})]})]})]}),h.jsx(Y1,{}),h.jsxs("section",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:h.jsx(Iw,{className:"h-5 w-5 text-purple-600 dark:text-purple-300"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg",children:""}),h.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),h.jsx("div",{className:"bg-card border rounded-2xl p-4 shadow-sm",children:h.jsx(sB,{categories:s,onAddCategory:K,onDeleteCategory:ae})})]}),h.jsxs("div",{className:"pt-4 text-center space-y-1 text-muted-foreground",children:[h.jsx("p",{className:"text-sm font-medium",children:" v1.4.0"}),h.jsx("p",{className:"text-xs",children:" GitHub "})]})]})})]})}),h.jsx(f4,{open:z,onOpenChange:le,categories:s,onAdd:i,allTags:un}),h.jsx(vn,{open:J,onOpenChange:ue,children:h.jsxs(yn,{className:"max-w-5xl h-[90vh] p-0 flex flex-col",showCloseButton:!1,children:[h.jsx(bn,{className:"p-4 border-b flex flex-row items-center justify-between",children:h.jsxs(xn,{className:"flex items-center gap-2",children:[h.jsx(zr,{className:"h-5 w-5"}),Re?.title||""]})}),h.jsx("div",{className:"flex-1 overflow-hidden",children:ee&&Re&&h.jsx(oF,{fileUrl:ee,book:Re,annotations:w(Re.id),onAddAnnotation:Gt,onUpdateAnnotation:b,onDeleteAnnotation:_,onDownloadFile:Sn})})]})}),Ge&&Re&&h.jsx(EF,{content:te,title:Re.title,bookId:Re.id,onClose:()=>{Ie(!1),Se("")}}),h.jsx(DM,{position:"top-center",toastOptions:{duration:2e3},style:{top:"20%"}})]}):h.jsx("div",{className:"flex items-center justify-center h-screen bg-background",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function K8(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}jk.createRoot(document.getElementById("root")).render(h.jsx(S.StrictMode,{children:h.jsx(X8,{})}));
